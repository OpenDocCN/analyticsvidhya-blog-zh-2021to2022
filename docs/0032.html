<html>
<head>
<title>List all Images of Selected Album-React Native-Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">列出所选相册的所有图片</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/list-all-images-of-selected-album-react-native-expo-b51bef62c4df?source=collection_archive---------2-----------------------#2021-01-02">https://medium.com/analytics-vidhya/list-all-images-of-selected-album-react-native-expo-b51bef62c4df?source=collection_archive---------2-----------------------#2021-01-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/213a8e2dfd154ccdd84dba57ed23d5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ftnjbMAOcmelIcRhRTP8cw.png"/></div></div></figure><p id="f99e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Expo是一个强大的React Native环境，可以帮助您从创建到分发React Native应用程序。</p><p id="d279" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这篇文章的主要目的是什么？</p><p id="cfb4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有很多文章都是关于如何拍照和存储的。当我在做一个项目时，我在显示相册中的照片列表时遇到了问题。我寻找它的解决方案，但不幸的是找不到它。在阅读和理解文档之后，我终于能够解决这个问题了。我们开始吧。</p></div><div class="ab cl jn jo go jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ha hb hc hd he"><p id="0fad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">先决条件</strong>:你的系统中安装了expo，<em class="ju"> react </em>和<em class="ju"> react native </em>的基础知识。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es jv"><img src="../Images/b6bc5efcc93309e0e1d9b8ba8ba6c1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*tgRMuhUKcQSx2475ecJp-g.png"/></div></figure><p id="9721" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="ju">Expo init project name</em></strong>创建新项目。</p><p id="7906" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="ju">Expo-permission</em></strong>s处理权限。</p><p id="f9de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="ju">Expo-media-library</em></strong>提供对用户媒体库的访问，允许他们从应用程序访问现有的图像和视频，以及保存新的图像和视频。</p><p id="b6f1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建一个组件文件，并将其包含在主文件app.js中</p><p id="5db3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在组件文件中，作为第一步，我们需要处理权限。</p><p id="6414" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们需要哪些权限？</p><p id="bcfd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">嗯！让我们问问我们的朋友。嘿，文档，我们需要向用户询问什么权限。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es ka"><img src="../Images/313d2e9fdf3d7faf9ab751e65fb6562e.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*Hk9vIgqjr58lQX8AglVzDQ.jpeg"/></div></figure><p id="033a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所以我们需要<em class="ju">摄像许可</em>。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kb"><img src="../Images/b1c2c18532c68e71d0adc24512af5a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A7F-80DiWlu4ll2jWpiSqg.png"/></div></div></figure><p id="ea9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们请求允许摄像。在请求权限之前，我们使用<strong class="ir hi"> <em class="ju"> getAsync() </em> </strong>方法检查用户是否已经允许权限。如果是，我们将loaded改为true，这样我们就可以显示我们的组件。如果用户不允许权限，我们使用<strong class="ir hi"> <em class="ju"> askAsync() </em> </strong>方法请求权限。如果用户允许，我们将loaded设置为true并显示组件，否则我们可以将用户导航到主屏幕。</p><p id="0ecc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当用户取消权限时，我们得到以下对象。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es kc"><img src="../Images/a019644bc973382ad5c7a600a11aeaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*kAlSNv7XfJWr4d6ps0epiw.png"/></div></figure><p id="de71" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果用户接受许可</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es kd"><img src="../Images/1530fc5fa4d224845bcae987a3f66fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*Ogt3iPlKhqR0fcCeh0uhaQ.png"/></div></figure><p id="c4d2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="ju"> getAsync() </em> </strong>和<strong class="ir hi"> <em class="ju"> askAsync() </em> </strong>根据用户的动作返回上述两个对象中的任意一个。通过使用<em class="ju">授予的</em>和<em class="ju">状态</em>属性，我们可以处理app的逻辑。</p><p id="7a18" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们列出所选相册的所有图像。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ke"><img src="../Images/3005601b10fc7492d16fb6ecf70ca439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrlmBcRcDzNJKYU-vtFfag.png"/></div></div></figure><p id="2c11" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="ju"/>getAlbumAsync(名字)</strong></p><p id="dd52" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">name接受代表<strong class="ir hi"> <em class="ju">专辑名</em> </strong>的字符串。如果相册存在，它返回一个对象。该对象包含所选相册的详细信息(id、标题、文件夹名称等)。如果相册不存在，则返回空值<strong class="ir hi"> <em class="ju">。</em>T51】</strong></p><p id="0452" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<strong class="ir hi"> <em class="ju"> getAssetAsync() </em> </strong>中，我们已经将相册细节(<strong class="ir hi"> <em class="ju"> getAlbumAsync() </em> </strong>方法的结果)传递给相册属性。该方法返回传递给它的相册的项目列表。我们可以传递更多配置给它，比如第一、排序、媒体类型。</p><p id="ede0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">参考文档了解更多信息:</p><div class="kf kg ez fb kh ki"><a href="https://docs.expo.io/versions/latest/sdk/media-library/#medialibraryaddassetstoalbumasyncassets-album-copyassets" rel="noopener  ugc nofollow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hi fi z dy kn ea eb ko ed ef hg bi translated">媒体库-世博会文档</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">expo-media-library提供对用户媒体库的访问，允许他们访问他们现有的图像和…</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">docs.expo.io</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw in ki"/></div></div></a></div><p id="d760" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将以上两个方法包装在<strong class="ir hi"> <em class="ju"> async </em> </strong>函数中。</p><p id="cc9e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了列出我们设备中的所有相册，我们使用<strong class="ir hi"><em class="ju">getAlbumsAsync()</em></strong>来列出用户创建的相册。</p><p id="c2e5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">就是这样。</p><p id="5251" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="ju">【getAlbumsAsync()</em></strong>-列出所有相册<br/><strong class="ir hi"><em class="ju">getAlbumAsync(album name</em></strong>)-列出album name<br/><strong class="ir hi"><em class="ju">getAssetsAsync(options)</em></strong>-获取一页资产</p><h1 id="4bd3" class="kx ky hh bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">快速笔记显示本地URI图像</h1><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es lv"><img src="../Images/1a72bb84ad20b4408eded3476f8ddc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*gOTFirRKyP0ijAv4ZaFMuA.png"/></div></figure><p id="49b9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了显示本地图像，我们必须添加以下属性</p><p id="5099" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">isStatic:true <br/>提及宽度和高度</p></div></div>    
</body>
</html>