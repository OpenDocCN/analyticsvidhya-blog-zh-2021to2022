<html>
<head>
<title>Disney Movie Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迪士尼电影分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/portfolio-project-1-disney-movie-anaysis-12190297d1fe?source=collection_archive---------7-----------------------#2021-03-06">https://medium.com/analytics-vidhya/portfolio-project-1-disney-movie-anaysis-12190297d1fe?source=collection_archive---------7-----------------------#2021-03-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="8df4" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="4f3d" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在这篇博客中，我将概述我最近在分析华特迪士尼电影公司列表时所做的端到端数据分析项目。下面是代码的<a class="ae ka" href="https://github.com/Dvboi/Disney-Movie-Analysis" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Github链接</em> </a>和<a class="ae ka" href="https://public.tableau.com/views/DisneyMovies_16148452251710/Story1?:language=en&amp;:display_count=y&amp;publish=yes&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Tableau仪表盘</em> </a>供你玩/与视觉效果&amp;互动的发现。</p><p id="56f0" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">我们将首先从数据收集过程开始，我们从多个来源(合法地)获取数据，并建立我们的数据集。然后，我们将数据存储为json格式。然后，我们将非结构化数据加载为CSV格式，并开始清理和预处理它。</p><p id="aee6" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">一旦我们完成了这些，我们将开始执行EDA和一些Python中的数据统计分析。最后，我们将在Tableau Public中构建所有的视觉效果，并将它们汇总到一个故事中，以便在商业环境中展示。<br/>我<strong class="je hi">不会</strong>在这里向您展示/解释代码(除了最耗时的数据收集之外),而是向您提供我从数据中获得的见解。话虽如此，我还是尽我最大的努力记录了尽可能多的代码，这样你理解起来就不会有问题了。此外，我很乐意在评论区解决你的所有疑问，或者你可以在LinkedIn上连接并ping我。</p><h1 id="c570" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">先决条件</h1><p id="6e19" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">关于——的知识</p><ul class=""><li id="ebd0" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">蟒蛇(熊猫、熊猫等)</li><li id="4bb9" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">美丽的汤4</li><li id="d0ea" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">Tableau公共</li></ul><p id="03dd" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">所以让我们开始吧…</p><h1 id="a68d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">数据收集</h1><p id="c48c" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">首先，我们导入库..</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="19c5" class="le if hh la b fi lf lg l lh li">import numpy as np<br/>import pandas as pd<br/>from bs4 import BeautifulSoup as bs<br/>import requests</span></pre><p id="2898" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">我们想把这个列表中的每部电影，以及它上面和下面的列表中的每部电影都划掉..</p><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lj"><img src="../Images/47fcfb595e3fc047a5897617e34831dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lBtUbxDn8oJXkeBk9nxAtw.png"/></div></div></figure><p id="6095" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">我们还想为列表中的每部电影抓取信息表，例如(如果你点击任何一部电影，你都会进入这样的页面..) —</p><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lr"><img src="../Images/730f8f5b4707881014e28b8ac2e61b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0WwpgjUEaJEW_m-Snxm_Tw.png"/></div></div></figure><p id="e374" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">首先是获取每部电影信息表的代码..</p><figure class="kv kw kx ky fd lk"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="2c4e" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">现在，获取所有电影的代码..</p><figure class="kv kw kx ky fd lk"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="1932" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">在获得每部电影的信息表后，我们将使用第三方API通过从API请求每部电影标题的信息来附加每部电影的评级(和其他信息)。<br/>代码看起来像这样..</p><figure class="kv kw kx ky fd lk"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="b3c9" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated"><strong class="je hi">注意</strong> —请使用您自己的<strong class="je hi"><em class="kb">【API-key】</em></strong>。免费的！只要去<a class="ae ka" href="http://www.omdbapi.com/" rel="noopener ugc nofollow" target="_blank"> OMDB </a>创建一个个人资料，你一天就会收到1000个请求。对于更多，他们有一些付费计划。</p><p id="df62" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">现在我们只需将数据保存在CSV中。这段代码很容易做到这一点..</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="9320" class="le if hh la b fi lf lg l lh li"># Saving to CSV</span><span id="bb1a" class="le if hh la b fi lu lg l lh li">df = pd.DataFrame(mov_info)<br/>df.to_csv(‘Final_Data.csv’,index=False)</span></pre><p id="db4b" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">现在请记住，这些脚本可能在未来不起作用，因为网站是动态的，会随着时间不断变化，所以如果不起作用，您可能需要相应地编辑代码。<br/>我们已经完成了数据收集和数据集创建，现在我们可以进入清理部分了。</p><h1 id="3d01" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">数据清理</strong></h1><p id="dd55" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">解释整个数据清理(<a class="ae ka" href="https://github.com/Dvboi/Disney-Movie-Analysis/blob/master/Data%20Cleaning.ipynb" rel="noopener ugc nofollow" target="_blank"> <em class="kb">笔记本</em> </a>)代码将是多余的，这里主要的事情不是代码，而是我如何处理数据，丢失值等。<br/>数据清理的关键点是—</p><ul class=""><li id="0d10" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">删除了大约20列，因为它们几乎99%都是空值。</li><li id="278c" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">发现只要生产公司(列名)为空，我们就会在生产公司(列名)中有值，所以我们可以将其合并到一列中。国家和国家列、语言和语言列也是如此。<br/>从名字本身来看，原因很直观，当只有一家制作公司参与时，维基百科将其存储在“制作公司”标题下，如果有几家公司参与电影制作，那么维基百科将其存储在“制作公司”标题下。</li><li id="7c6b" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">使用Regex删除链接标记，如“[1]/[2]”，清理日期时间列。</li><li id="8463" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">使用helper函数和regex将值United StatesUnited Kingdom转换为→['United States '，' United Kingdom']。</li><li id="0c40" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">一起使用几个正则表达式从预算和票房列中解析出不同格式的主要货币值。</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="b2ca" class="le if hh la b fi lf lg l lh li">pattern2 = r’\$\d+,?\d+,?\d+,?\d+\.?’ # for $40,070,995, $950000</span><span id="62f8" class="le if hh la b fi lu lg l lh li">pattern3 = r’\$\d+\.?\d*\s?(?:million|billion|thousand)?’ # for $178 million[3]</span><span id="fb1c" class="le if hh la b fi lu lg l lh li">pattern1 = r’\$\d+\.?\d*–\$?\d+\.?\d* million’ # for ranges of money $76.4–$83.3 million[4][5] , later took the average after parsing out the values</span><span id="bbab" class="le if hh la b fi lu lg l lh li">pattern4 = r’₹?\s?\d+ crore|lakh|lakhs’ # to grab indian rupee format</span><span id="9284" class="le if hh la b fi lu lg l lh li">pattern5 = r’₹\d+\.?\d*? (?:billion|million)’ # to grab ₹1.09 billion</span><span id="3842" class="le if hh la b fi lu lg l lh li"><br/>final_regex = ‘(%s|%s|%s|%s|%s)’ %(pattern1,pattern2,pattern3,pattern4,pattern5)</span></pre><ul class=""><li id="3264" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">使用几个嵌套的if-else将所有这些值转换成美元。</li><li id="10b9" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">清理其他列，如运行时间和Imdb-rating，然后将它们的数据类型转换为数字。</li><li id="9f46" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">最后将清理后的数据保存为CSV格式以供EDA使用。</li></ul><h1 id="c40c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">探索性数据分析</strong></h1><p id="43ea" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">对于EDA( <a class="ae ka" href="https://github.com/Dvboi/Disney-Movie-Analysis/blob/master/EDA.ipynb" rel="noopener ugc nofollow" target="_blank"> <em class="kb">笔记本</em> </a>)，我首先在python中对列进行分析以寻找趋势，然后在Tableau中实现它，以便每个人都更容易理解。然而，一些基本的统计数据只在python中完成。</p><p id="a732" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">我强烈建议你看看Tableau仪表盘，自己写故事，玩一玩，然后在下面留下你的反馈。这里的链接是<a class="ae ka" href="https://public.tableau.com/views/DisneyMovies_16148452251710/Story1?:language=en&amp;:display_count=y&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><p id="2d75" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">关键发现—</p><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/639be4b38dcc09d55e3c20faccc700fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTFBx-lTtAbfIJEHTqcDBA.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">预算和票房箱</figcaption></figure><ul class=""><li id="4117" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">两者都严重右倾，但电影票房收入有很大差异。<br/>取两种分布的对数，得到正态分布(使用Q-Q图<a class="ae ka" href="https://github.com/Dvboi/Disney-Movie-Analysis/blob/master/EDA.ipynb" rel="noopener ugc nofollow" target="_blank">确定，此处为</a>)。平均票房收入<strong class="je hi">∈(</strong>3540万美元，<strong class="je hi">5250万美元)</strong>和预算<strong class="je hi">∈(</strong>2330万美元，<strong class="je hi">3310万美元)的95%置信区间。</strong></li></ul><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/0104fde3dc0b5077dcce3e31b0e177d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n7MBx8AEsJ8nXB_jxCtoMQ.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">IMD b-评级</figcaption></figure><ul class=""><li id="e679" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">在95%的置信度下，电影的平均IMDB评级位于区间(6.45，6.63)。<br/>同样适用于Metascore x <strong class="je hi"> ∈ (59.71，63.59) </strong>。</li></ul><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/1c7be4ffc11d351627989a48d046ff66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*08MuMVXF1ajJAT9Ag5uXQQ.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">平均值。历年运行时间和发布次数</figcaption></figure><ul class=""><li id="5de1" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">这两者在过去几年里都有所增加(特别是在90年代初以后)。</li></ul><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/d1bd49f9ac0dfe4b8d450152edc173c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BMsc_FqTAtzm6z7UBx_vQ.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">预算与票房收入</figcaption></figure><ul class=""><li id="da6a" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">预算和票房略有正相关</li><li id="675c" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated"><em class="kb"> Bambi </em>的投资回报率最高，而<em class="kb">Meet the deedles</em>的投资回报率最低</li></ul><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/de834e92a0dc6e3841a4a647c32e27d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zU-Hl6nquIgHOJmUQbik8g.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">IMDB与Metascore</figcaption></figure><ul class=""><li id="8212" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">看起来Imdb的评级和元符号在不同的电影上是一致的。随着收视率的增加，我们也可以看到票房收入的增加。(更大的尺寸意味着更多的收藏)。</li><li id="e1b4" class="kh ki hh je b jf kq jj kr jn ks jr kt jv ku jz km kn ko kp bi translated">最终仪表板—</li></ul><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/ca7df61728a9264f2a88384a10062f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-UqNY7NSwnZ1vuw1_fUmg.png"/></div></div></figure><ul class=""><li id="6484" class="kh ki hh je b jf kc jj kd jn kj jr kk jv kl jz km kn ko kp bi translated">概述摘要</li></ul><figure class="kv kw kx ky fd lk"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="ed8c" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">在仪表盘<a class="ae ka" href="https://public.tableau.com/views/DisneyMovies_16148452251710/Story1?:language=en&amp;:display_count=y&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank">这里</a>有更多具有很强交互性的视觉效果和分析，我强烈建议您去看一看。</p></div><div class="ab cl ma mb go mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ha hb hc hd he"><h1 id="1a58" class="ie if hh bd ig ih mh ij ik il mi in io ip mj ir is it mk iv iw ix ml iz ja jb bi translated">结论</h1><p id="fd56" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">所以这只是一个有趣的可视化项目。在接下来的几天里，我会写更多的案例研究，让我们一起解决一个问题。希望你喜欢这篇文章。请在下面留下您的宝贵反馈或任何问题！。</p></div><div class="ab cl ma mb go mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ha hb hc hd he"><h2 id="d414" class="le if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">参考</h2><p id="61e1" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><a class="ae ka" href="https://www.youtube.com/channel/UCq6XkhO5SZ66N04IcPbqNcw" rel="noopener ugc nofollow" target="_blank">凯斯加利YT频道</a></p><p id="ce0d" class="pw-post-body-paragraph jc jd hh je b jf kc jh ji jj kd jl jm jn ke jp jq jr kf jt ju jv kg jx jy jz ha bi translated">让我们连接吧！<br/>  <a class="ae ka" href="https://www.linkedin.com/in/devansh-verma-609218148/" rel="noopener ugc nofollow" target="_blank">领英</a> <br/> <a class="ae ka" href="https://github.com/Dvboi" rel="noopener ugc nofollow" target="_blank"> Github </a></p></div></div>    
</body>
</html>