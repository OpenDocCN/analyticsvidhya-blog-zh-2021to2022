<html>
<head>
<title>Object Detection using YOLO v5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用YOLO v5的目标检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/object-detection-using-yolo-v5-33dbdc020622?source=collection_archive---------2-----------------------#2021-07-24">https://medium.com/analytics-vidhya/object-detection-using-yolo-v5-33dbdc020622?source=collection_archive---------2-----------------------#2021-07-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="15ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用样本数据集检测对象的步骤</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/63324b20359a3df8fc4bd1467e11c947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_Q95WaZ376HWypokyE4qA.png"/></div></div></figure><p id="a4f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一般来说，分类技术在自动车辆中没有太大帮助，因为它只预测图像中的一个对象，并且不给出该图像的位置。目标检测在自动驾驶车辆中非常重要，它可以检测场景中有哪些目标以及它们的位置。<a class="ae jo" href="https://arxiv.org/pdf/1506.02640.pdf" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"/></a><strong class="ig hi"/>(你只看一次)是Joseph Redmon等人作为一个提供类概率的回归问题，使用卷积神经网络(CNN)创建的高速实时物体检测算法。后来又经历了一些修改。为了进行预测，YOLO只需要一次通过CNN的前向传播。它输出带有相应边界框的对象。它广泛应用于自动驾驶车辆中，以检测场景中的对象。</p><p id="ce97" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本帖中，我们将使用AWS上COCO数据集(可定制)中的图像来设置和运行YOLO。</p><p id="b8ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤1 </strong>:设置权重&amp;偏差账户(如果你没有)</p><p id="1ec4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">登录<a class="ae jo" href="https://wandb.ai/" rel="noopener ugc nofollow" target="_blank"> wandb.ai </a>网站，复制以下内容:</p><ul class=""><li id="9c2b" class="jp jq hh ig b ih ii il im ip jr it js ix jt jb ju jv jw jx bi translated">来自wandb.ai/authorize<a class="ae jo" href="https://wandb.ai/authorize" rel="noopener ugc nofollow" target="_blank">的API密钥</a></li><li id="fac4" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated">团队名称来自<a class="ae jo" href="https://wandb.ai/settings" rel="noopener ugc nofollow" target="_blank">wandb.ai/settings</a>。默认团队名称将是用户id。</li></ul><p id="de42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤2 </strong>:创建AWS实例</p><ul class=""><li id="366f" class="jp jq hh ig b ih ii il im ip jr it js ix jt jb ju jv jw jx bi translated">创建实例时，选择“<strong class="ig hi">深度学习AMI (Ubuntu 18.04)版本47.0—AMI-01f 1096 e 6659d 38 fa</strong>”AMI，因为它具有深度学习任务所需的库。如果我们在“选择亚马逊机器映像(AMI)”步骤中搜索“<strong class="ig hi">深度学习</strong>，我们就可以找到这一点。</li><li id="3872" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated">为“实例类型”选择P3实例。实例类型p3.2xlarge就足够了。</li><li id="c396" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated">要节省成本，请在“配置实例”步骤下选择spot实例。</li></ul><p id="5875" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第三步:安装依赖项</p><p id="9718" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">登录AWS实例后，使用以下命令创建<strong class="ig hi"> conda环境</strong>并设置权重&amp; Bias环境变量:</p><pre class="jd je jf jg fd kd ke kf kg aw kh bi"><span id="7da5" class="ki kj hh ke b fi kk kl l km kn"># Create conda environment with name 'test'<br/>$ conda create -n test python=3.9.6 wandb</span><span id="59e9" class="ki kj hh ke b fi ko kl l km kn"># login to test environment<br/>$ conda activate test  </span><span id="d9af" class="ki kj hh ke b fi ko kl l km kn"># clone the latest yolov5 and install the required libraries<br/>$ git clone https://github.com/ultralytics/yolov5 <br/>$ cd yolov5<br/>$ pip install -r requirements.txt<br/> <br/># Set the Weights &amp; Bias environment</span><span id="5c71" class="ki kj hh ke b fi ko kl l km kn"># Key from <a class="ae jo" href="https://wandb.ai/authorize$" rel="noopener ugc nofollow" target="_blank">https://wandb.ai/authorize$</a><br/>export WANDB_API_KEY=337....4a8 </span><span id="5ce8" class="ki kj hh ke b fi ko kl l km kn"># Team name from <a class="ae jo" href="https://wandb.ai/settings" rel="noopener ugc nofollow" target="_blank">https://wandb.ai/settings</a><br/>$ export WANDB_ENTITY=user_team_name </span><span id="8a02" class="ki kj hh ke b fi ko kl l km kn"># Project name<br/>$ export WANDB_PROJECT=yolov5</span></pre><p id="4b47" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤4 </strong>:训练、Val和测试</p><pre class="jd je jf jg fd kd ke kf kg aw kh bi"><span id="d69a" class="ki kj hh ke b fi kk kl l km kn"># Train a model. By default, it uses data/coco128.yaml and runs for 300 epochs. Dataset is downloaded from  https://github.com/ultralytics/yolov5/releases/download/v1.0/coco128.zip (128 images under images/train2017 from coco128.zip)<br/>$ python train.py  <br/><br/># Validate a model for Precision, Recall and mAP (128 images under images/train2017 from coco128.zip).<br/>$ python val.py --weights yolov5s.pt    <br/><br/># There are two images. We can use our custom images.<br/>$ python detect.py --weights yolov5s.pt --source /home/ubuntu/yolov5/data/images</span></pre><p id="9e07" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤5 </strong>:查看W &amp; B网站上的图表和指标</p><p id="954d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">结果</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kp"><img src="../Images/2c0845085e0726e11c258902fbbd2e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LujHRCNMmXQnMLGj"/></div></div></figure><p id="f4ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">验证批次标签</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kq"><img src="../Images/d22db8cacafc409ad894873fcd92a0f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ASZt08KHLL4k1WvJ"/></div></div></figure><p id="2ac9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">验证预测标签</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kq"><img src="../Images/53c2c749b12f8d7702027d074d4b673c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Oq9CpswJLsLPR4as"/></div></div></figure><p id="6818" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">列车损失</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kr"><img src="../Images/c427dd69038b84824ac2098b23592d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-JUk7J9FTR0pjeOrTvIwg.png"/></div></div></figure><p id="c0d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">测试</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ks"><img src="../Images/e363aa1e032b15d3b3f059643a19a1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBAeGsawXdcgAW7UgB4gGQ.jpeg"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kq"><img src="../Images/415e184dd165490c980e220b9dfd27a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNmlBf-IAPm5UVMNBxr7Rg.jpeg"/></div></div></figure><p id="a6b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注:</strong>以上所有结果也在<strong class="ig hi"> yolov5\runs\detect\exp </strong>文件夹下</p><p id="d6c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">感谢</strong>阅读！请👏如果你喜欢这个帖子，请<strong class="ig hi">关注我</strong>，因为它<strong class="ig hi">鼓励我</strong>写更多！</p></div></div>    
</body>
</html>