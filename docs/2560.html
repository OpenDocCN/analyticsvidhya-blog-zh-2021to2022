<html>
<head>
<title>Azure percept (Intelligent Edge) with Azure Synapse Analytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有Azure Synapse分析的Azure percept(智能边缘)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-percept-intelligent-edge-with-azure-synapse-analytics-7d2bb2805445?source=collection_archive---------9-----------------------#2021-05-02">https://medium.com/analytics-vidhya/azure-percept-intelligent-edge-with-azure-synapse-analytics-7d2bb2805445?source=collection_archive---------9-----------------------#2021-05-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="9b23" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">如何将Edge AI与Azure Synapse Analytics集成</h1><h1 id="0400" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">用例</h1><ul class=""><li id="e5df" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">人工智能可以在Edge中用于评分或检测对象</li><li id="d3e2" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">在云中存储检测到的内容及其结果</li><li id="d4d4" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">帮助重新培训和帮助数据科学家微调模型</li><li id="cb7b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">帮助报告模型的结果</li><li id="5b33" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">通过分析从智能边缘创造价值</li></ul><h1 id="1b52" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">体系结构</h1><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es jz"><img src="../Images/e72a01efd0c6633e1b94dac02641ef82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4plBWRoTCgxJ-67cefqtQw.jpeg"/></div></div></figure><h1 id="fe9b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">建筑说明</h1><ul class=""><li id="fd5c" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">将Azure Percept用作AI @ Edge设备</li><li id="0e16" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">设备将部署模块来检测对象</li><li id="79a6" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">使用情况可能因具体使用案例而异</li><li id="dc71" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">我正在使用Azure流分析，它可以在Edge和cloud中使用</li><li id="cb1a" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">流分析将进行输入解析</li><li id="a483" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将数据存储在CSV或Parquet中</li><li id="822e" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将数据存储在Synapse workspace中—默认存储</li><li id="f16f" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">确保数据湖的唯一真实来源</li><li id="66d5" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">流分析中的代码，以获取模型评分数据</li></ul><h1 id="e4fe" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">设置Azure资源</h1><ul class=""><li id="2d1f" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">创建资源组</li><li id="9831" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">选择你所选择的地区</li><li id="8409" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">使用S1基础版创建Azure物联网中心</li><li id="c6ac" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">在云中创建流分析作业</li><li id="5013" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建Azure Synapse工作区帐户</li><li id="6769" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">遵循azure文档中的说明。</li><li id="ba26" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">确保您还设置了超级商务智能帐户</li></ul><h1 id="5c8c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">发展</h1><ul class=""><li id="5f6b" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">转到流分析，并将输入配置为物联网中心</li><li id="f721" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将输出配置为Azure synapse workspace ADLS第二代存储</li><li id="95d3" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">如下所示编写查询。</li><li id="4cc9" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">测试逻辑并开始流分析</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="da9f" class="kq if hh km b fi kr ks l kt ku">Select width, height, position_x, position_y, label, Confidence, timestamp, <br/>EventEnqueuedUtcTime, IoTHub.ConnectionDeviceId, IoTHub.EnqueuedTime <br/>into output <br/>from input</span></pre><ul class=""><li id="b194" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">模型输出标签及其边界框</li><li id="c2f1" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">信心也是用来做决定的</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es la"><img src="../Images/ace4b6a2b0ea7556934a545f9b91fa46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2Cp2V8nq032ZIONtkL3dw.jpeg"/></div></div></figure><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lb"><img src="../Images/987dc099ae4eec88ecd5234525064593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bbna7FDqzsLLzHPFh1XJtw.jpeg"/></div></div></figure><ul class=""><li id="7e03" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">验证文件是否已生成</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lc"><img src="../Images/415bb20e8f30dc3eadeace2d7dbef616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54FcEijRyrzHdxb6F8F56g.jpeg"/></div></div></figure><ul class=""><li id="ec60" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">下面是一个来自Percept output的JSON数据输出示例</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="c54b" class="kq if hh km b fi kr ks l kt ku">{<br/>    "width": "516",<br/>    "height": "260",<br/>    "position_x": "282",<br/>    "position_y": "312",<br/>    "label": "laptop",<br/>    "confidence": "0.549805",<br/>    "timestamp": "1615126558907404099",<br/>    "EventProcessedUtcTime": "2021-03-07T14:17:28.5049562Z",<br/>    "PartitionId": 2,<br/>    "EventEnqueuedUtcTime": "2021-03-07T14:15:58.2040000Z",<br/>    "IoTHub": {<br/>      "MessageId": "MSG_ID",<br/>      "CorrelationId": "CORE_ID",<br/>      "ConnectionDeviceId": "aicamera1",<br/>      "ConnectionDeviceGenerationId": "637504148641820944",<br/>      "EnqueuedTime": "2021-03-07T14:15:58.2150000Z",<br/>      "StreamId": null<br/>    }<br/>}</span></pre><ul class=""><li id="66c4" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在登录Azure Synapse Studio</li><li id="2a2b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建一个无服务器的sql查询来访问数据</li><li id="a41c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">下面是一个示例查询</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="f214" class="kq if hh km b fi kr ks l kt ku">SELECT<br/>    TOP 100 *<br/>FROM<br/>    OPENROWSET(<br/>        BULK 'https://storageaccount.dfs.core.windows.net/containername/santacruz/incoming/*/*/*/*.parquet',<br/>        FORMAT='PARQUET'<br/>    ) AS [result]</span></pre><ul class=""><li id="f6cb" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">从上方输出</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ld"><img src="../Images/6cfc033fa8641b9b135d613d027de97b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3rcF-5WG4B4hz1kkENqDA.jpeg"/></div></div></figure><ul class=""><li id="7cd7" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在，让我们将相同的数据加载到spark等大数据平台中</li><li id="4d14" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">火花允许我们进一步加工</li><li id="1e16" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">数据只存在于一个地方</li><li id="6df7" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">我们不会移动数据</li><li id="0e1c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建笔记本</li><li id="a330" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">以下是加载数据框的代码</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="29ee" class="kq if hh km b fi kr ks l kt ku">%%pyspark<br/>df = spark.read.load('abfss://containername@storageaccount.dfs.core.windows.net/santacruz/incoming/*/*/*/*.parquet', format='parquet')<br/>display(df.limit(10))</span></pre><ul class=""><li id="062c" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">这是输出</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es le"><img src="../Images/8ecaab68eb9eb60a4e3b3856c8b9e990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YH-HO0xrVL4Y_kYdSij9rw.jpeg"/></div></div></figure><ul class=""><li id="ee59" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">从这里我们可以得到任何类型的洞察力</li><li id="d30c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">现在让我们构建一个简单的报告</li><li id="af45" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">连接到电源bi</li><li id="fb72" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">转到synapse studio workspace并获取要连接的无服务器端点</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lf"><img src="../Images/2f8a2a0fd30d34683c2a57f6d7554074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdSTJ5Fie-iedj2AgabrPw.jpeg"/></div></div></figure><ul class=""><li id="02d6" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">提供视图</li><li id="01ed" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">在提供视图之前，在sql脚本中创建新视图</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="c15f" class="kq if hh km b fi kr ks l kt ku">create VIEW percept1 AS <br/>SELECT<br/>    *<br/>FROM<br/>    OPENROWSET(<br/>        BULK 'https://storageaccountname.dfs.core.windows.net/containername/santacruz/incoming/*/*/*/*.parquet',<br/>        FORMAT='PARQUET'<br/>    ) AS [result]</span></pre><ul class=""><li id="d4d6" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">然后提供查询</li></ul><pre class="ka kb kc kd fd kl km kn ko aw kp bi"><span id="02ba" class="kq if hh km b fi kr ks l kt ku">Select * from percept1;</span></pre><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lg"><img src="../Images/b61d27bd7c5ba34ee1de26a6ea960526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFj3Yb9AaK8wiwUstwWx9A.jpeg"/></div></div></figure><ul class=""><li id="dde4" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在应该可以看到数据了</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lh"><img src="../Images/7184570a139520b5691166d275d8678d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mmtOavT-L3Nvt3OxczMh-g.jpeg"/></div></div></figure><ul class=""><li id="34bc" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">加载数据</li><li id="e5dd" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建一个新报告，拖动几列来创建一个报告</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es li"><img src="../Images/05e403083427f8fe6b14cd39a8218b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5kav2umVK6T4syev1ubrJQ.jpeg"/></div></div></figure><ul class=""><li id="81a6" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">根据标签检测到的对象数量</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lj"><img src="../Images/d8569c4850d03855ecce01caf10efdab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PHE_A_kUAY-_nM3T8l_Zug.jpeg"/></div></div></figure><p id="f018" class="pw-post-body-paragraph lk ll hh je b jf kv lm ln jh kw lo lp jj lq lr ls jl lt lu lv jn lw lx ly jp ha bi translated">原文—<a class="ae lz" href="https://github.com/balakreshnan/AzurePercept/blob/main/Analytics/synapseint.md" rel="noopener ugc nofollow" target="_blank">azure percept/synapseint . MD at main balakreshnan/azure percept(github.com)</a></p></div></div>    
</body>
</html>