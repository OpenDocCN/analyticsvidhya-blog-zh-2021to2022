<html>
<head>
<title>Create a Microservice in 15 minutes flat!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">15分钟内创建一个微服务！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-a-microservice-in-15-minutes-flat-e57bbde1c980?source=collection_archive---------9-----------------------#2021-04-30">https://medium.com/analytics-vidhya/create-a-microservice-in-15-minutes-flat-e57bbde1c980?source=collection_archive---------9-----------------------#2021-04-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/17ff651642fa8bab63b9513d332aba43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mO5j0WEbBN2j3dLTFlqxbg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">照片由来自<a class="ae it" href="https://www.pexels.com/photo/group-of-people-in-a-street-market-2276796/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae it" href="https://www.pexels.com/@almapapi?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Krisztina Papp </a>拍摄</figcaption></figure><p id="fb29" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务就像Baazars:人们可以得到他们可能想要的一切，但每个商店只卖一种类型的物品:服装店卖衣服，水果店卖水果。集市本身并不是一个大商店，而是一些小商店的组合，每个小商店都出售专门的商品。现在，想象一下，如果每家商店都必须出售每样东西，那会有多混乱！没有一家商店能够专营。这降低了质量并带来了不必要的负担。</p><p id="6e3f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个想法也可以应用于软件。一个试图做所有事情的单一、庞大的代码库是无法专门化的。这降低了质量并带来了不必要的负担。每次更新，从变量名的改变到整个类的重写，都需要重新部署整个monolith。此外，众所周知，这些单一代码库很难扩展以响应实时流量。此外，任何一个模块的错误都会导致整个模块崩溃。</p><p id="3161" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们如何应对这些问题？进入微服务:执行小的特定功能的小的隔离容器。作为一个整体，微服务涵盖了整体代码库的所有功能。微服务提供粒度扩展，支持持续集成/部署，并简化扩展服务的维护。</p><p id="08e0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们将使用Python、Flask和Heroku在15分钟内创建我们自己的微服务——完全免费。</p><h2 id="6485" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">赫罗库</h2><p id="8bb5" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">您需要创建一个Heroku帐户。Heroku是一个云服务平台，类似于AWS和Google Cloud。我们将使用Heroku，因为它很容易建立，并提供了一个很好的免费层。注册后，Heroku会将你重定向到你的应用概述仪表板。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/385b47808780d4d5732115c459070e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fwXLt4FZgOyCImgd"/></div></div></figure><p id="a0b4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">按下“新建”下拉按钮，然后选择“新建应用”</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/f9057c1faf46da5ac728f9b8aac7eb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sblxP7JBuaJY7H_k"/></div></div></figure><p id="02b3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">输入项目名称(Heroku将在为您的微服务创建URL时使用此名称作为_.herokuapp.com的子域)。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/304be11543d4c71dd4f3c6923a56994a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ResrSnWccjFzyCVu"/></div></div></figure><p id="ec98" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们已经创建了Heroku应用程序。为了部署您的代码，Heroku将需要一个Github存储库，从那里它可以检索您的代码库。我已经创建了一个模板库，里面有你和Heroku运行你的微服务所需的一切，这里:<a class="ae it" href="https://github.com/grokwithrahul/Flask-Microservice-Template" rel="noopener ugc nofollow" target="_blank">https://github . com/grokwithrahul/Flask-Microservice-Template</a></p><p id="39df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">派生存储库，并将其重命名。</p><h2 id="690a" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">使用模板:</h2><p id="32ad" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">将作为您的微服务运行的python文件位于src/microservice.py。在该文件中，有两个函数:一个函数的URL为'/'，返回字符串“hello”。另一个允许你执行需要长时间运行的代码；不会导致赫罗库被绞死。您可以通过替换heavyProcess()下的代码来定义heavy_process。</p><h2 id="da15" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">链接到Heroku</h2><p id="1eed" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">到目前为止，我们已经创建了一个Heroku帐户和一个Heroku应用程序。还有，我们已经分叉了微服务模板。现在，是时候将Github库与Heroku链接起来了。</p><p id="aaa8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">导航至应用仪表板的部署选项卡。点击连接到Github。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/1cc071f4261dcea8b2461209d5800f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8V6xqMpnCi7IXwTp"/></div></div></figure><p id="434e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">登录GitHub帐户后，输入存储库的名称。按“连接”</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kx"><img src="../Images/7600bcd43f44f66668df7fbcf8fcaad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aCZicjt2hrp4R2KN"/></div></div></figure><p id="df5d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">连接存储库后，您可以根据需要启用自动部署。因此，每次提交都会自动部署在Heroku上。</p><p id="f427" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">要开始部署您的代码，向下滚动并按Manual Deploy。这将启动部署。</p><p id="8ec6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你有它！你已经建立了一个微服务。要访问它，您可以在应用程序仪表板中单击打开应用程序。这将带您到微服务的“/”URL，并启动与之相关的功能。</p><h2 id="4f38" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">了解微服务的优势</h2><p id="8ee5" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">现在我们的微服务已经启动并运行，我们可以检查它所提供的好处了。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ky"><img src="../Images/0ff2d273253f246477c3c47a9e1738bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BtrrWwFy86mGaXANbjz9AQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">资料来源:算法a</figcaption></figure><p id="c293" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务允许粒度扩展。运行单个任务的单个微服务几乎可以立即扩展，以响应增加的流量。这样，您只需要扩展您需要的功能——不像单片应用程序，您需要扩展整个程序。</p><p id="4cf9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务提供CI/CD。每个微服务都可以在开发后立即部署。要部署一个单一的应用程序，所有的团队都必须完成他们的项目，等待其他团队完成他们的项目，停止所有的工作，然后打包。</p><p id="6f2b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务易于维护。服务器故障不会影响整个应用程序。微服务允许您隔离故障和分离故障，允许您的主应用程序继续运行，即使其中一个功能出现故障。理解和调试微服务也更容易，因为它们的代码库更小。</p></div></div>    
</body>
</html>