<html>
<head>
<title>NLP: OCR, Language Translation, Text to Speech, Speech to Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NLP: OCR，语言翻译，文本到语音，语音到文本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/nlp-ocr-language-translation-text-to-speech-speech-to-text-6d8682e6e886?source=collection_archive---------8-----------------------#2021-01-21">https://medium.com/analytics-vidhya/nlp-ocr-language-translation-text-to-speech-speech-to-text-6d8682e6e886?source=collection_archive---------8-----------------------#2021-01-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/532f8219f9da72318a70c23488baf015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ozy5ULF695IfqQYIsgpBdQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图像<a class="ae iu" href="https://unsplash.com/photos/QBCS3iSKAyE?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="c740" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当你创建一个聊天机器人或任何其他NLP应用程序时，会遇到许多挑战，如从图像中获取文本、将语音转换为文本或文本转换为语音、语言翻译等。</p><p id="5d5d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们先睹为快，看看这些任务是如何轻松完成的。</p><p id="27c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">OCR-光学字符识别</strong></p><p id="0f93" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们经常需要从图片中提取文本，我们有一个库easyocr可以为您轻松完成这项工作。</p><p id="ce63" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个库支持各种语言，包括英语、印地语、法语、中文、卡纳达语、马拉雅拉姆语等等。</p><p id="adfa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它使用3个主要组件Resnet、迁移学习模型、序列标记(LSTM)和解码(CTC)。</p><p id="e35d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">更多细节，你可以通过它的<a class="ae iu" href="https://github.com/JaidedAI/EasyOCR" rel="noopener ugc nofollow" target="_blank">文档。</a></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f033" class="kc kd hi jy b fi ke kf l kg kh">pip install easyocr</span></pre><p id="8275" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">语言翻译</strong></p><p id="ec3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装谷歌翻译语言之间的翻译</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="94c1" class="kc kd hi jy b fi ke kf l kg kh">pip install google_trans_new</span></pre><p id="27e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">文本转语音</strong></p><p id="863f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装库谷歌文本到语音</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5803" class="kc kd hi jy b fi ke kf l kg kh">pip install gTTs</span></pre><p id="1575" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">导入以下库</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1603" class="kc kd hi jy b fi ke kf l kg kh">from google_trans_new import google_translator  <br/>from gtts import gTTS<br/>from IPython.display import Audio<br/>import matplotlib.pyplot as plt<br/>import cv2<br/>from pylab import rcParams<br/>from IPython.display import Image<br/>import easyocr</span></pre><p id="eed0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们目前正在使用英语和印地语的OCR，因此我们提到了这两种语言，更多您可以添加更多。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6b9a" class="kc kd hi jy b fi ke kf l kg kh">reader=easyocr.Reader(['hi','en'])</span></pre><p id="4d00" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我刚刚从谷歌选择了一个随机图片，并将其作为我的输入图像，它有英语和印地语文本都要检查。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6a54" class="kc kd hi jy b fi ke kf l kg kh">rcParams['figure.figsize'] = 8, 16<br/>file_name = "../input/hinditoenglish/HtE.png"<br/>Image(file_name)</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/993cf39eb53bb76cede0b105cccbd5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*2woBchRdhhEmjikC.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1c9e" class="kc kd hi jy b fi ke kf l kg kh">output = reader.readtext(file_name)<br/>output</span></pre><p id="1f2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这给出了:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c04e" class="kc kd hi jy b fi ke kf l kg kh">[([[89, 0], [399, 0], [399, 59], [89, 59]],<br/>  'Hidi to Egliah',<br/>  0.05413757637143135),<br/> ([[14, 44], [477, 44], [477, 135], [14, 135]],<br/>  'Story Traalation',<br/>  0.12739677727222443),<br/> ([[229, 121], [336, 121], [336, 163], [229, 163]],<br/>  'मेले से एक',<br/>  0.11104584485292435),<br/> ([[128, 128], [198, 128], [198, 154], [128, 154]],<br/>  'किसान',<br/>  0.47020599246025085),<br/> ([[328, 130], [414, 130], [414, 160], [328, 160]],<br/>  'सुंदर गाय',<br/>  0.1349133998155594),<br/> ([[90, 132], [130, 132], [130, 156], [90, 156]], 'एक', 0.928795337677002),<br/> ([[196, 132], [236, 132], [236, 156], [196, 156]], 'एक', 0.9367656111717224),<br/> ([[90, 154], [422, 154], [422, 184], [90, 184]],<br/>  'खरीदा और वह अपने गांव को लौट रहा',<br/>  0.010415691882371902),<br/> ([[89, 177], [411, 177], [411, 218], [89, 218]],<br/>  'था रास्ते में उसे एक डाकू ने देख लिया',<br/>  0.0011817723279818892),<br/> ([[90, 208], [396, 208], [396, 238], [90, 238]],<br/>  'वह गाय को लेना चाहता था इसलिए',<br/>  0.009780121967196465),<br/> ([[90, 234], [368, 234], [368, 264], [90, 264]],<br/>  'व किसान के पास गया और कहा',<br/>  0.018567530438303947)]</span></pre><p id="c9f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">选择一个文本，并尝试在坐标的帮助下在它周围制作一个边界，以查看它选择了正确的文本。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="27bc" class="kc kd hi jy b fi ke kf l kg kh">cordinates = output[4][0]<br/>x_min, y_min = [int(min(idx)) for idx in zip(*cordinates)]<br/>x_max, y_max = [int(max(idx)) for idx in zip(*cordinates)]<br/>image = cv2.imread(file_name)<br/>cv2.rectangle(image,(x_min,y_min),(x_max,y_max),(255,0,0),2)<br/>plt.imshow(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/0dabfe795521026efebd49a44a4eda97.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*PXBMj3dy0FbS0jrw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="e87b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">试图在每个文本上划分界限。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e98d" class="kc kd hi jy b fi ke kf l kg kh">bounds = reader.readtext(file_name, add_margin=0.55, width_ths=0.7, link_threshold=0.8, decoder='beamsearch',blocklist='=-')<br/>bounds</span></pre><p id="a044" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它给出的输出为:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="80a3" class="kc kd hi jy b fi ke kf l kg kh">[([[68, 0], [418, 0], [418, 78], [68, 78]],<br/>  ' Hindi to Engliah',<br/>  0.08436790853738785),<br/> ([[0, 9], [477, 9], [477, 170], [0, 170]],<br/>  'Stry Traulalion',<br/>  0.14103898406028748),<br/> ([[76, 112], [428, 112], [428, 174], [76, 174]],<br/>  'एक किसान एक मेले से एक सुंदर गाय',<br/>  0.19112536311149597),<br/> ([[78, 142], [434, 142], [434, 196], [78, 196]],<br/>  'खरीदा औ़र वह अपने गांव को लौट रहा',<br/>  0.07050563395023346),<br/> ([[75, 165], [425, 165], [425, 231], [75, 231]],<br/>  'था रास्ते में उसे एक डाकूने देखलिया',<br/>  0.0004027755931019783),<br/> ([[78, 196], [408, 196], [408, 250], [78, 250]],<br/>  'वहू गाय को लेना चाहर्ता था इसलिए',<br/>  0.031241701915860176),<br/> ([[77, 221], [381, 221], [381, 264], [77, 264]],<br/>  'वकिसान के पास गया और कहा',<br/>  0.02784109301865101)]</span><span id="5265" class="kc kd hi jy b fi kj kf l kg kh">import PIL<br/>from PIL import ImageDraw<br/>im=PIL.Image.open('../input/hinditoenglish/HtE.png')</span><span id="61e7" class="kc kd hi jy b fi kj kf l kg kh">def draw_boxes(image, bounds, color='yellow', width=2):<br/>    draw = ImageDraw.Draw(image)<br/>    for bound in bounds:<br/>        p0, p1, p2, p3 = bound[0]<br/>        draw.line([*p0, *p1, *p2, *p3, *p0], fill=color, width=width)<br/>    return image<br/><br/>draw_boxes(im, bounds)</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/4439961a8dba4ca0fd14fac4eac94239.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*II1Vcmc7C7PPY_lMR2j_Nw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="8ead" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从没有坐标的图像中只提取文本。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c28b" class="kc kd hi jy b fi ke kf l kg kh">text_list = reader.readtext(file_name, add_margin=0.55, width_ths=0.7, link_threshold=0.8, decoder='beamsearch',blocklist='=-', detail=0)<br/>text_list</span></pre><p id="5c5a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这段代码的输出如下:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7cc3" class="kc kd hi jy b fi ke kf l kg kh">[' Hindi to Engliah',<br/> 'Stry Traulalion',<br/> 'एक किसान एक मेले से एक सुंदर गाय',<br/> 'खरीदा औ़र वह अपने गांव को लौट रहा',<br/> 'था रास्ते में उसे एक डाकूने देखलिया',<br/> 'वहू गाय को लेना चाहर्ता था इसलिए',<br/> 'वकिसान के पास गया और कहा']</span></pre><p id="a343" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">分隔英语和印地语文本</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1a49" class="kc kd hi jy b fi ke kf l kg kh">text_hi=text_list[2] + " "+text_list[3] + " "+text_list[4] + " "+text_list[5] + " "+text_list[6] </span><span id="d835" class="kc kd hi jy b fi kj kf l kg kh">text_en=text_list[0] + " "+text_list[1]</span></pre><p id="8422" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">如果我们选择语言为“hi ”,文本将转换为印地语ascent中的语音</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f516" class="kc kd hi jy b fi ke kf l kg kh">ta_tts=gTTS(text_hi, lang='hi')<br/>ta_tts.save('trans.mp3')<br/>Audio('trans.mp3' , autoplay=True)</span></pre><p id="ea8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在英语ascent中，如果我们选择语言为“en ”,文本将转换为语音</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="98e5" class="kc kd hi jy b fi ke kf l kg kh">ta_tts=gTTS(text_en, lang='en')<br/>ta_tts.save('trans.mp3')<br/>Audio('trans.mp3' , autoplay=True)</span></pre><p id="b541" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以尝试用不同的语言来玩这个游戏，从中获得乐趣。</p><p id="1ca8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们想将<strong class="ix hj">印地语翻译成英语，谷歌翻译如下:</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="73fb" class="kc kd hi jy b fi ke kf l kg kh">translator = google_translator()<br/>text_en=translator.translate(text_hi, lang_tgt='en')<br/>print(text_en)</span></pre><p id="a4c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就给出了:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="34fa" class="kc kd hi jy b fi ke kf l kg kh">A farmer bought a beautiful cow from a fair and he was returning to his village, on the way he wanted to take a cow to see a robber, so went to the farmer and said</span></pre><p id="a54f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以用同样的方法翻译成不同的语言。</p><p id="b5c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">语音识别-语音转文本</strong></p><p id="a39a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将语音转换成文本需要一个名为PyAudio的库。</p><p id="09b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PyAudio为PortAudio提供了到python的绑定，PortAudio是跨平台的音频输入/输出库。使用PyAudio，您可以轻松地使用Python在各种平台上播放和录制音频。</p><p id="5169" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">只有当我们想要使用麦克风输入时，PyAudio才是必需的，否则它将返回一个错误。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4de9" class="kc kd hi jy b fi ke kf l kg kh">pip install PyAudio   # or conda install PyAudio</span></pre><p id="e4d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装用于执行语音识别的库，这是一个功能齐全且易于使用的Python语音识别库。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="0986" class="kc kd hi jy b fi ke kf l kg kh">pip install SpeechRecognition</span></pre><p id="cab8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为语音识别器导入下列库。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="bc7c" class="kc kd hi jy b fi ke kf l kg kh">import speech_recognition as sr<br/>import pyaudio</span></pre><p id="fa09" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行这段代码说点什么，然后看它转换成文本。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="031f" class="kc kd hi jy b fi ke kf l kg kh"># this will require PyAudio because it uses the Microphone class</span><span id="4edc" class="kc kd hi jy b fi kj kf l kg kh">import speech_recognition as sr     <br/>r = sr.Recognizer()<br/>with sr.Microphone() as source:          <br/>    audio = r.listen(source)                </span><span id="4730" class="kc kd hi jy b fi kj kf l kg kh">try:<br/>    print("You said " + r.recognize_google(audio))  <br/>    # recognize speech using Google Speech Recognition<br/>except LookupError:                    # if speech is unintelligible<br/>    print("Could not understand audio")</span></pre><p id="1b34" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个功能可以用在很多事情上，比如通过语音在谷歌或youtube上进行搜索。</p><p id="26a9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些是NLP应用程序中经常使用的函数。所有这些都可以在上面给出的库的帮助下以非常简单的方式完成。然而，如果有人想为社区的帮助而使图书馆变得更完美，他们可以这样做。</p><p id="5fc3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些功能可以在聊天机器人中使用，以支持不同的语言，添加语音功能，甚至从图像中检索文本以供进一步处理或获取信息。</p><p id="8f26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读！</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="8943" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ks">原载于2021年1月21日</em><a class="ae iu" href="https://www.numpyninja.com/post/nlp-ocr-language-translation-text-to-speech-speech-to-text" rel="noopener ugc nofollow" target="_blank"><em class="ks">【https://www.numpyninja.com】</em></a><em class="ks">。</em></p></div></div>    
</body>
</html>