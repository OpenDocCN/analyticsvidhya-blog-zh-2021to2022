<html>
<head>
<title>Some Errors and Solutions for Installing Caffe on Ubuntu 16.04</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ubuntu 16.04上安装Caffe的一些错误和解决方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/some-errors-and-solutions-for-installing-caffe-on-ubuntu-16-04-3e4eb6160ea?source=collection_archive---------16-----------------------#2021-04-22">https://medium.com/analytics-vidhya/some-errors-and-solutions-for-installing-caffe-on-ubuntu-16-04-3e4eb6160ea?source=collection_archive---------16-----------------------#2021-04-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="4f2e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://caffe.berkeleyvision.org/" rel="noopener ugc nofollow" target="_blank"> Caffe </a>，深度学习框架。这是一个伟大的框架，然而在安装过程中，它设法让我质疑生命的意义(LOL)。还有很多我认为没有包括在内的小错误，因为当我写这篇文章时，我的第一次安装经历已经过去了几个月。</p><p id="c9a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里是我遇到的一些错误，希望其中一些能帮助到阅读这篇文章的人。所有这些错误都发生在安装Caffe的“make all”过程中。</p><p id="10dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jd">澄清一下:我正在安装的CPU版本是Caffe，使用的OpenCV版本是2.4.10。如果您使用OpenCV 3+，情况可能会有所不同。</em></p><h1 id="0ade" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak"> 1)没有找到make:protocol:Command</strong></h1><p id="f187" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">完整的错误日志:</p><blockquote class="kh ki kj"><p id="e7ef" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">protocol src/caffe/proto/caffe . proto<br/>make:protocol:找不到命令<br/> Makefile:638:目标的配方。“build _ release/src/caffe/proto/caffe . Pb . cc”未能通过<br/>make:* * * *[。build _ release/src/caffe/proto/caffe . Pb . cc]错误127</p></blockquote><p id="3617" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解决方案:在终端中运行' sudo apt-get install libprotobuf-dev '。</p><p id="e389" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，再次“清除”和“全部清除”。</p><h1 id="39d0" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak"> 2)致命错误:boost/function.hpp:没有这样的文件或目录</strong></h1><p id="7349" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">完整的错误日志:</p><blockquote class="kh ki kj"><p id="7b32" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">CXX。包含的文件中的build _ release/src/caffe/proto/caffe . Pb . cc<br/>CXX src/caffe/solvers/SGD _ solver . CPP<br/>。/include/caffe/SGD _ solvers . HPP:7:0，<br/>来自src/caffe/solvers/SGD _ solver . CPP:4:<br/>。/include/caffe/solver.hpp:3:30:致命错误:boost/function.hpp:没有这样的文件或目录<br/>编译终止。<br/> Makefile:581:目标配方。' build _ release/src/caffe/solvers/SGD _ solver . o '未能通过<br/>make:* * * *[。build _ release/src/caffe/solvers/SGD _ solver . o]错误1</p></blockquote><p id="d1e3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解决方案:在终端中运行' sudo apt-get install-no-install-recommendes libboost-all-dev '。</p><p id="4e2d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，再次“清除”和“全部清除”。</p><h1 id="8156" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak"> 3)致命错误:cblas.h:没有这样的文件或目录</strong></h1><p id="6c64" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">完整的错误日志:</p><blockquote class="kh ki kj"><p id="dace" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">CXX。包含的文件中的build _ release/src/caffe/proto/caffe . Pb . cc<br/>CXX src/caffe/solvers/SGD _ solver . CPP<br/>。/include/caffe/util/math _ functions . HPP:11:0，<br/> from。/include/caffe/layer.hpp:12，<br/> from。/include/caffe/net.hpp:12，<br/>来自。/include/caffe/solver.hpp:7，<br/> from。/include/caffe/SGD _ solvers . HPP:7，<br/>from src/caffe/solvers/SGD _ solver . CPP:4:<br/>。/include/caffe/util/mkl _ alternate . HPP:14:19:致命错误:cblas.h:没有这样的文件或目录<br/>编译终止。Makefile:581:目标的配方。' build _ release/src/caffe/solvers/SGD _ solver . o '未能通过<br/>make:* * * *[。build _ release/src/caffe/solvers/SGD _ solver . o]错误1</p></blockquote><p id="dc64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解决方案:在终端中运行' sudo apt-get install lib atlas-base-dev '。</p><p id="1464" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，再次“清除”和“全部清除”。</p><h1 id="a8e6" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">4)找不到-lopencv_imgcodecs</h1><p id="cb8b" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">完整的错误日志:</p><blockquote class="kh ki kj"><p id="2de9" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">/usr/bin/ld:找不到-lopencv_imgcodecs <br/> collect2:错误:ld返回1退出状态<br/> Makefile:572:目标的配方。' build _ release/lib/lib caffe . so . 1 . 0 . 0-rc5 '未能通过<br/>make:* * * *[。build _ release/lib/lib caffe . so . 1 . 0 . 0-rc5]错误1</p></blockquote><p id="4221" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这实际上发生了，因为我使用OpenCV 2+。“opencv_imgcodecs”仅在OpenCV 3+中需要和可用。</p><p id="9521" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">对于OpenCV 2+用户:</strong></p><p id="28cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请确保“Makefile.config”文件中的“OPENCV_VERSION := 3”已被注释:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es kn"><img src="../Images/01eeb431fff59f5f01bb7cdfa00a0938.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*ErRFKNeFNXFjhVf-W3X4-A.png"/></div></figure><p id="5562" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，打开“Makefile”文件，按Ctrl+F检查库中是否有“opencv_imgcodecs ”,如下图所示。取出来应该就没事了。</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es kv"><img src="../Images/b2968e7d95b1eacbe015559419ac4c09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZADrdYyeN20Z7KovZnsviA.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">如果您碰巧包含了“opencv_imgcodecs ”,请删除它(对于OpenCV 2+)</figcaption></figure><h1 id="53e1" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">5) NVCC致命错误:不支持的GPU架构“compute_20”</h1><p id="754f" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">完整的错误日志:</p><blockquote class="kh ki kj"><p id="4a1c" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">NVCC src/caffe/solvers/adagrad _ solver . Cu<br/>nvcc致命:不支持的gpu架构' compute _ 20 '<br/>NVCC src/caffe/solvers/SGD _ solver . Cu<br/>nvcc致命:不支持的gpu架构' compute_20' <br/> Makefile:607:目标的配方'。' build _ release/cuda/src/caffe/solvers/rms prop _ solver . o '失败</p></blockquote><p id="5132" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，由于不支持“compute_20”，只需转到“<em class="jd"> Makefile.config </em>”文件，删除CUDA_ARCH的这两行:</p><blockquote class="kh ki kj"><p id="f562" class="ie if jd ig b ih ii ij ik il im in io kk iq ir is kl iu iv iw km iy iz ja jb ha bi translated">-gencode arch=compute_20，code = sm _ 20 \<br/>-gen code arch = compute _ 20，code=sm_21 \</p></blockquote><h1 id="0697" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">结论？</strong></h1><p id="4f69" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">好了，这就是我现在收集的所有错误。请告诉我，如果你遇到了这里没有提到的错误，我会在有空的时候尽力找到解决方法。干杯！</p><p id="428d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Caffe官方安装指南链接:<a class="ae jc" href="https://caffe.berkeleyvision.org/installation.html" rel="noopener ugc nofollow" target="_blank">https://caffe.berkeleyvision.org/installation.html</a></p></div></div>    
</body>
</html>