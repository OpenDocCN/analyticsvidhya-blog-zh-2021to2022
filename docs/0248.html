<html>
<head>
<title>Modelling Geometric Brownian Motion in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用python模拟几何布朗运动</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/modelling-geometric-brownian-motion-in-python-b65462cc2c1d?source=collection_archive---------5-----------------------#2021-01-10">https://medium.com/analytics-vidhya/modelling-geometric-brownian-motion-in-python-b65462cc2c1d?source=collection_archive---------5-----------------------#2021-01-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">科学的目的不是分析或描述，而是制造有用的世界模型。—爱德华·德·波诺</p><p id="c8e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Black和Scholes (1973)的开创性工作将几何布朗运动过程引入期权定价文献；它仍然是期权和衍生品估价的基准过程。虽然，几何布朗运动有它的缺点和来自金融现实的越来越多的经验证据；它是构建更好模型的良好基础。</p><p id="2102" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几何布朗运动是一个随机过程，如下式所示。</p><blockquote class="jd je jf"><p id="9c2f" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">重要假设:我们在等价的<a class="ae jk" href="http://www.cs.rpi.edu/~magdon/ps/journal/martingale.pdf" rel="noopener ugc nofollow" target="_blank">鞅测度</a>下操作</p></blockquote><p id="b63b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随机微分方程:</p><h1 id="0602" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">dSt = r*Stdt + σ*StdZt</h1><p id="3239" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">St:日期t的指数水平</p><p id="13df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">r:恒定无风险短期利率</p><p id="8853" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">σ:恒定波动性</p><p id="57cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">z:标准正态分布随机变量</p><p id="84a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用著名的蒙特卡罗模拟，近似求解上述随机微分方程。</p><p id="05ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们用python对流程进行编码，以查看流程的可用性，并构建可用的模型。我们首先需要建立几个模块，如获得标准的正态分布随机变量，常数无风险短期利率和通用模拟模块。</p><p id="51e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你熟悉python，构建这些小模块应该很容易，无论如何你可以参考Yves Hilpisch的《O'Reilly Python for Finance 》,在那里你可以学习这些模块以及更多。因此，我们创建一个函数，将提供的short rate转换成一个由日期和short_rate组成的二维数组。</p><p id="db5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们创建了另一个来生成所需形状的伪随机数(您可以使用numpy.random.standard_normal()方法轻松生成这些数字),您还可以更进一步，即时匹配随机数。</p><p id="e3b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们创建market_environment，以获得模拟所需的所有变量:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es ko"><img src="../Images/bd6cde27e9bfc68a21f6b367f688dedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*5x_2IgiLB6h57Dg7J6WDug.png"/></div></figure><p id="e1c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我制作了一个generic_simulation_module，因为我将继续模拟不同的模型。下一个模型(在几何布朗运动之后)将建立在近似动态规划(ADP)的基础上，这是一种非常有前途的获得最优路径的方法，因此感兴趣的人可以跟随。</p><p id="f88d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们收集所有变量值:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es kw"><img src="../Images/420c02a6f413f4a491a40916d3a07d41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*5nwAgj0hcaeOoA2lmTD13g.png"/></div><figcaption class="kx ky et er es kz la bd b be z dx translated">从market_environment类获取变量</figcaption></figure><p id="eb6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们根据提供的开始和结束日期生成一个time_grid:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lb"><img src="../Images/00e820a59c56a275e99f99483e8ddd05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*H0zy9El85YMTqGZJdLn4UA.png"/></div></figure><p id="877c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们返回将由我们的特定模拟器生成的路径(在这些情况下是几何布朗运动):</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lc"><img src="../Images/a8ddd7967e86916e41b7b754e7c83c4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*49nZJdE7PogdSwR4o8TJfw.png"/></div></figure><p id="7c75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们编写我们的几何布朗运动类:</p><p id="f1bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，像往常一样，我们使用__init__。虽然在这里我们使用<a class="ae jk" href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/" rel="noopener ugc nofollow" target="_blank">超级</a>方法，这确实有助于整体代码。和更新变量以比较不同模拟的更新函数。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es ld"><img src="../Images/974564700cfbc81d2df287d96570df33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*iPUY1izkZTo6AfPhGlxO6A.png"/></div></figure><p id="3fe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们生成路径，模拟几何布朗运动的差分方程:</p><p id="335f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">St = St exp((r-0.5 *σ)(t(m+1)-t(m))+σ* sqrt(t(m+1)-t(m))* Zt)</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/ed061e13d2f594917b439ca1874b0a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZFzIRzxnr1Jv0hwEoDmRNA.png"/></div></div></figure><p id="95eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个使用案例:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lj"><img src="../Images/a56c0442c9bf623ace1c428ba1636822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*2Qzy-Jxbr1f0krnqW7G7yQ.png"/></div></figure><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lk"><img src="../Images/43c79a9f7f398f7f144c692b255b4484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EJXcNDqwAZVrtYtq8WRWQ.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx translated">结果图</figcaption></figure><p id="599a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看出，该模型提供了不同的路径，这里展示了10000条路径中的15条。</p><p id="0075" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几何布朗运动仍然被广泛使用，并有助于理解估价。人们可以进一步调整模型，这对于任何类型的实际应用都是必要的。我将使用ADP来模拟更好的随机微分方程上的优化路径。</p></div></div>    
</body>
</html>