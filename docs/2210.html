<html>
<head>
<title>Facebook Prophet Algorithm in Time Series Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析中的脸书先知算法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/facebook-prophet-algorithm-in-time-series-analysis-90da4a7c1b16?source=collection_archive---------10-----------------------#2021-04-12">https://medium.com/analytics-vidhya/facebook-prophet-algorithm-in-time-series-analysis-90da4a7c1b16?source=collection_archive---------10-----------------------#2021-04-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="cc21" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">时间序列分析是一种处理趋势分析的统计分析。时间序列分析是使用跨越一段时间的时间序列数据来完成的。总之，它涉及到寻找你的因变量和时间之间的相关性。</p><p id="e8ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">脸书先知算法是Facebook设计的一种算法，是一种开源的时间序列预测算法。它通过找到最佳平滑线来构建模型，该最佳平滑线由以下各项表示:</p><p id="b686" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">y(t) = g(t) + s(t) + h(t) + ϵ</p><p id="b5bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其中:</p><p id="e8d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">g(t) =总体增长趋势</p><p id="1e71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">s(t) =年度季节性，周季节性</p><p id="837e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">h(t) =假日效应</p><p id="78cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这次演示中，我使用facebook prophet将数据分为单变量和多变量分析。</p><p id="78b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单变量分析处理一个变量，而多变量分析处理多个变量。</p><h1 id="461d" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">数据预处理:</h1><p id="8993" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在导入库并加载数据集之后，我执行了一些可视化操作，包括前10行、统计信息、它的信息以及检查空值。我解析了数据集中的日期时间，将其格式化为一个字符串。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kf"><img src="../Images/72c06360ea0b6316e66ecef3720f3c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*trgMSk_ZPKr6vJtj"/></div></div></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kr"><img src="../Images/3da6716ecb68a4b10e0be4f6e19c5f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x2S10Y7LSS1rUTYZ"/></div></div></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es ks"><img src="../Images/132b7bcc6ab8ef23684d4434931a9457.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*dMjAZY2G1O3uQNPW"/></div></div></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es kt"><img src="../Images/9c37475d420618082aa8a405097f73ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/0*cyDva7XpcoPsrnUz"/></div></figure><p id="36c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用向前填充方法，我填充了空值。</p><p id="0287" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我创建了另一个列，它是“全局有功功率”乘以1000，除以60，再减去“分表1到4”的乘积。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es ku"><img src="../Images/ca28c4f4f048c7608f5a92795a816346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2L7VQEfBlfYQH_ar"/></div></div></figure><p id="7a0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我创建了一个名为hpc_daily的变量，它是D的重采样，然后是一个hpc_index，它重置了hpc_daily索引，最后将列dt和全局有功功率分别重命名为ds和y。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kv"><img src="../Images/3d06d82f3593a6de497565bc43bae7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1MkXiW-9ohlsoeHC"/></div></div></figure><h1 id="f018" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">单变量分析:</h1><p id="2b1a" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我将数据集分为训练和测试。训练数据集的范围从2006年12月16日到2009年11月26日，而测试数据集在2009年11月26日之后。在我导入facebook prophet模型、实例化和训练该模型之后，我使用365天的测试数据作为预测。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es kw"><img src="../Images/54a8c44789988a6cde2939599793c058.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/0*1T5FikdVYSuzAYl2"/></div></figure><p id="4812" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">可视化:</strong></p><p id="a9cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我绘制了天气预报及其组成部分。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kx"><img src="../Images/4dde040e431874767c3214627e6e347e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AWy4LGpyuydW5lcV"/></div></div></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es ky"><img src="../Images/7b4d08654aeca2056ca1cfa4605435cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/0*wy81fXAjNV62A4z7"/></div></figure><h1 id="1746" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">多元:</h1><p id="a745" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">对训练和测试使用相同的分割并导入模型，我必须添加外部回归。这是因为该算法不能对训练数据中的一些点进行建模。</p><p id="9f93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我对模型进行定型后，预测如下所示:</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es kz"><img src="../Images/b3c907d1f818429031360de8ced7e614.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/0*2F1jas6v38Jms82-"/></div></figure><p id="766e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">绘制组件:</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es la"><img src="../Images/209c119d82c31538543d54e0e0dc296e.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/0*sgxG4z8W4pWOo7Fh"/></div></div></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lb"><img src="../Images/cae30c151ecd2af87feccc6c9f9e6a46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mPouerwHAIlKnSlw"/></div></div></figure><p id="354d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，使用其诊断进行交叉验证和性能指标，得分如下:</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lc"><img src="../Images/4a52c9f6c54a8f217fda3d951a4f131a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/0*B6LdMyS7UsXTheji"/></div></figure><h1 id="4d06" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">结论:</h1><p id="a984" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">这是我在Hamoye externship的第三模块项目之一。同样值得注意的是，两个模型都在两个独立的笔记本中，这是因为我不能在拟合模型后添加回归变量，因为这个过程应该在拟合之前进行。这是这个项目的<a class="ae ld" href="https://github.com/Nwosu-Ihueze/fb_prophet" rel="noopener ugc nofollow" target="_blank">回购</a>，你可以在<a class="ae ld" href="https://www.linkedin.com/in/rosemary-nwosu-ihueze/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。感谢您的阅读。</p></div></div>    
</body>
</html>