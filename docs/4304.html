<html>
<head>
<title>Exploring Google Speech Recognition along with Google Translate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索谷歌语音识别和谷歌翻译</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-google-speech-recognition-along-with-google-translate-7318f6349b94?source=collection_archive---------5-----------------------#2021-09-20">https://medium.com/analytics-vidhya/exploring-google-speech-recognition-along-with-google-translate-7318f6349b94?source=collection_archive---------5-----------------------#2021-09-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="5476" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">嗯，我们不能否认这样一个事实，自然语言处理使我们的生活变得更容易了，它的一些应用如语音到文本的对话或机器翻译有许多用途。</p><p id="d090" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">来吧，让我们一起探索作为“精灵”的谷歌如何能够满足我们的任何要求，你要求转换，他们得到了，你要求翻译，嘣，他们也得到了！</p><p id="7ad5" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">在本文中，我们将利用SpeechRecognition和Google Translate来开发一个程序，可以将你的诗句翻译成你想要的语言。很好，对吧？我想你可以用一种方式实现它，如果你的朋友没有看过《攻打泰坦》的话，他就可以理解牟信代鲁的意思，而不需要你在中间暂停这一集。</p><p id="a2df" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">首先，由于谷歌翻译的使用，显然需要一个GCP服务帐户，你可以查看我以前的文章，了解更多关于谷歌翻译API的详细信息。</p><p id="e271" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">所以工作流程将如下:- <br/> 1。语音到文本转换<br/> 2。机器翻译<br/> 3。通过文本到语音听出输出(可选)</p><h2 id="6b6d" class="jd je hh bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak"> <em class="ie">语音到文本转换</em> </strong></h2><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es jy"><img src="../Images/29fbc31e9750738f4d2c18a04d8911c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*_kxAvQr1X5OSr8zHIjPQxQ.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">语音转文本</figcaption></figure><ol class=""><li id="d6ec" class="kk kl hh ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated">必要的进口</li></ol><p id="87c6" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">下面列出了要为此安装的包，您可以在python中安装这些包。<br/> —演讲人识别</p><blockquote class="kt ku kv"><p id="3437" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">pip安装语音识别</p></blockquote><p id="1835" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">— PyAudio</p><blockquote class="kt ku kv"><p id="7fcd" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">安装PyAudio</p></blockquote><p id="171d" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">(注意:如果你有python 3.8，这将抛出错误，所以你可以用python 3.8版创建一个conda虚拟环境(我用的是相同的，它工作得很好))</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es la"><img src="../Images/94bfdeb6aba59f5bd0c49df6fa98723f.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*pGldbfZz0DW-Nsm3AsxvRg.png"/></div></figure><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es lb"><img src="../Images/5fe6e53def07bc9c13b980f108893c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*QZJrUJ2LrbN64N39MzpoYA.png"/></div></figure><p id="8a48" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">2.代码解释</p><p id="d30e" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">首先，我们将创建一个负责识别语音的识别器类的实例。<br/>现在，我们使用系统的麦克风(这就是为什么我们需要PyAudio ),但您可以使用音频文件(如。wav文件)来进行语音转换。目前，API支持的音频文件格式有Wav、AIFF、AIFF-C、FLAC。如果使用音频文件，将<br/>替换为sr.Microphone()作为信号源</p><blockquote class="kt ku kv"><p id="dbac" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">aud = Sr . audio file(' ABCD . wav ')<br/>以aud为源:</p></blockquote><p id="44ed" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">因此，如果您对说话但无法识别感到困惑，您可能需要使用list_microphone_names()方法检查系统的麦克风是否列出。<br/>你可以在任何你需要的时间内使用pause_threshold，这样这段时间内的沉默将被记录在你所说的句子的末尾。<br/>adjust _ for _ ambient _ noise(source)使用来自源(AudioSource实例)的音频动态调整能量阈值，以考虑环境噪声。<br/> audio=r.listen(source)记录来自源实例的短语，并返回一个AudioData实例(保存在audio变量中)。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/9592d13ad815645a28fe265ab03c2e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*8Ll3MLcXlukpyycaJBGmaA.png"/></div></div></figure><p id="43b6" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">此外，上面附加的代码片段是实际的语音到文本转换发生的地方。因此，这里我们使用的是recognize_google()方法，它是Google Web Speech API。如果您正在寻找一个离线工作的API，您可以调用recognize_sphinx()方法，它与CMU Sphinx引擎一起工作。<br/>在该方法中，传递listen()方法返回的audiodata，并在language属性中指定要用哪种语言将语音转换为文本。您可以在线查看SpeechRecognition支持哪些语言。</p><p id="4dd9" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated"><a class="ae lh" href="https://cloud.google.com/speech-to-text/docs/languages" rel="noopener ugc nofollow" target="_blank">语言支持</a></p><h2 id="5c83" class="jd je hh bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">使用谷歌翻译的机器翻译</h2><p id="f8de" class="pw-post-body-paragraph if ig hh ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc ha bi translated">1.必要的进口</p><blockquote class="kt ku kv"><p id="1169" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">pip安装谷歌云翻译<br/> pip安装谷歌oauth <br/> pip安装六</p></blockquote><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es ln"><img src="../Images/16a1dcc4885113f8b362c967c234e088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*PFCcDiiINVyJltz64a2sXQ.png"/></div></figure><p id="54d4" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">2.代码解释</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lo"><img src="../Images/945d3095d87b5d950a9908defb9bc5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JzoXU2Ro7Z7O497DKfH4mg.png"/></div></div></figure><p id="9058" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">将google cloud credentials json文件的名称作为文件名，作为参数传递给from_service_account_file()方法。</p><blockquote class="kt ku kv"><p id="d804" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">翻译_客户端=翻译。客户端(凭据=凭据)</p></blockquote><p id="620c" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">这里我们创建了一个Google Cloud Translate客户端对象，用于将文本翻译成目标语言。</p><blockquote class="kt ku kv"><p id="00b0" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">结果= translate _ client . translate(text，target_language=target)</p></blockquote><p id="0a82" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">translate()方法有两个参数，第一个是字节格式的文本，第二个是目标语言，即您希望文本转换成的语言。<br/>该方法返回的结果是一个由几个键-值对组成的字典，其中一个是translatedText，它包含目标语言的翻译文本。</p><h2 id="2739" class="jd je hh bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">文本到语音转换(可选)</h2><p id="7c42" class="pw-post-body-paragraph if ig hh ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc ha bi translated">现在，如果你想把你的结果说出来，你可以使用pyttsx3进行文本到语音的转换。</p><p id="2985" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">必要的进口</p><blockquote class="kt ku kv"><p id="af0b" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">pip安装pyttsx3</p></blockquote><p id="275a" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">代码解释</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es lp"><img src="../Images/5e0ed997092c9d771c8b24cc73fa6f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*7xs9rU-u7K1KIJv8ypP3Ag.png"/></div></figure><p id="0cc8" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">您需要做的第一件事是调用初始化连接的init()函数。</p><p id="9e27" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">您只需要为某个短语的文本到语音转换调用say()方法，并将文本作为参数传递。<br/> engine.runAndWait():这个函数将使系统中的语音听得见，如果你不写这个命令，那么你将听不到语音。</p><p id="f395" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">您可以尝试使用getProperty()方法来了解声音(速率、声音)等属性。</p><h1 id="7b4c" class="lq je hh bd jf lr ls lt jj lu lv lw jn lx ly lz jq ma mb mc jt md me mf jw mg bi translated">完整代码</h1><blockquote class="kt ku kv"><p id="fe26" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">导入speech_recognition as sr <br/>导入pyttsx3 <br/>从google.cloud导入datetime <br/>作为translate <br/>从google.oauth2导入service_account <br/>导入six</p><p id="6ebc" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">target='en' <br/>导入pyttsx 3<br/>engine = pyttsx 3 . init(' SAPI 5 ')</p><p id="d7ff" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">def speak(音频):<br/> engine.say(音频)<br/>engine . runandwait()<br/><br/>def trans(目标，文本):<br/><br/>credentials = service _ account。credentials . from _ service _ account _ file(filename = " credentials . JSON "，<br/>scopes =["<a class="ae lh" href="https://www.googleapis.com/auth/cloud-platform" rel="noopener ugc nofollow" target="_blank">https://www.googleapis.com/auth/cloud-platform</a>"])<br/>translate _ client = translate。client(credentials = credentials)<br/>if is instance(text，six . binary _ type):<br/>text = text . decode(" utf-8 ")<br/>#要翻译成resp。lang<br/>result = translate _ client . translate(text，target _ language = target)<br/><br/>translated _ text = result[" translated text "]</p><p id="2e23" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">返回结果["translatedText"]</p><p id="18ad" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc ha bi translated">r=sr.Recognizer() <br/>以sr.Microphone()为源:<br/>print(" Listening ")<br/>Sr . Microphone . list _ Microphone _ names()<br/>r . pause _ threshold = 1<br/>r . adjust _ for _ ambient _ noise(source)<br/>audio = r . listen(source)<br/>print()<br/>try:<br/>print(" recognize…)<br/>query = r . recognize _ Google(audio，language="fr-FR") <br/> print("打印format(query))<br/>trans _ text = trans(target，query) <br/> print("英语中它的意思是"，trans _ text)<br/>speak(trans _ text)<br/>Exception as e:<br/>print(e)<br/>speak("请再说一遍")</p></blockquote><h2 id="bc31" class="jd je hh bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">输出</strong></h2><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mh"><img src="../Images/af032605621ca41d54f684fcfb6b8796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXyAmbOEjigKdlbhQW-rBw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">输出</figcaption></figure><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es mi"><img src="../Images/33c762b0f76c21f39da73eda06882f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/1*yCLY0UJ2TuWcwk4ioHJezA.gif"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">尽情享受吧！你刚刚完成了。</figcaption></figure><p id="97a3" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">备案</p><p id="5370" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated"><a class="ae lh" rel="noopener" href="/analytics-vidhya/exploring-google-cloud-translate-api-for-machine-translation-in-python-ef60c123fc37">谷歌翻译详解</a></p><p id="a108" class="pw-post-body-paragraph if ig hh ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc ha bi translated">快乐学习！</p></div></div>    
</body>
</html>