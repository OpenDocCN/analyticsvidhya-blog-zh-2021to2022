<html>
<head>
<title>Machine learning, building Flutter UI widgets generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习，构建Flutter UI widgets生成器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-flutter-ui-widgets-generator-with-ml-8af0c1008f22?source=collection_archive---------13-----------------------#2021-08-14">https://medium.com/analytics-vidhya/building-flutter-ui-widgets-generator-with-ml-8af0c1008f22?source=collection_archive---------13-----------------------#2021-08-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2cf4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过使用Transformers &amp; PyTorch将自然英语句子转换成Flutter widgets代码</p><p id="fbe5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">能不能把我们简单的英文句子转换成一些UI代码？在没有一定知识的情况下，我们真的能得到一个工作代码吗？</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/440e06c4536d8a1c49a2a0ca13780477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpJjKN_QkwsuH6urUrla2A.jpeg"/></div></div></figure><p id="3eb8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个博客中，我们将做一个简单的实验。我们将使用<strong class="ig hi"> PyTorch </strong>和<strong class="ig hi"> Transformers </strong>架构来构建一个序列到序列模型，该模型将一个英语句子作为输入，并将其转换为Flutter UI小部件代码作为输出。</p><p id="0fd3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想了解更多关于变形金刚和Seq2sqe的内容，可以看看<a class="ae jo" href="https://arxiv.org/abs/1706.03762" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">【关注就是你所需要的】</strong> </a> <strong class="ig hi"> </strong>和这篇好听的<a class="ae jo" rel="noopener" href="/inside-machine-learning/what-is-a-transformer-d07dd1fbec04"> <strong class="ig hi">文章</strong> </a>。</p><p id="ae6d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在我们开始</strong>之前，这个实验的目标完全是为了研究目的，我们不会在当前阶段支持所有的Flutter小部件，而且我们使用一些定制的小部件而不是内置的小部件来使事情变得更容易。</p><h1 id="57b4" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">培训用数据</h1><p id="5f52" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我们有大约175000对句子和Flutter部件代码。该训练数据完全是自动生成的。它涵盖了一些Flutter的主要部件。</p><h2 id="e681" class="ks jq hh bd jr kt ku kv jv kw kx ky jz ip kz la kd it lb lc kh ix ld le kl lf bi translated">样本对:</h2><p id="6bb0" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated"><em class="lg">英语句子:“</em>创建一个有宽度值的容器”</p><p id="94d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lg">颤振代码:</em></p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="e8b6" class="ks jq hh li b fi lm ln l lo lp">Container(width:value,)</span></pre><p id="d609" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">句子将是我们模型的输入，而颤振代码将是输出。</p><p id="bf1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，既然属性是“宽度”，为什么我们有“值”而不是数字？<br/>由于我们有许多动态属性值，如颜色、宽度、高度、填充、对齐等……<br/>我们将对输入进行一些预处理，用关键字“Value”更改所有这些值，并将对模型的输出进行后处理，以获得真实值。<br/>所以会是这样的:<br/><em class="lg">“</em>创建一个宽度为24.0的容器”=&gt;<em class="lg">“</em>创建一个宽度值的容器”。</p><h1 id="f521" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">标记化</h1><p id="67f5" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">对于英语句子，我们将使用"<em class="lg"> Spacy </em>"作为输出标记器的输入标记器，我们将构建自己的自定义标记器。我们没有为Dart/Flutter找到合适的记号赋予器，所以我们现在将使用Python的默认<a class="ae jo" href="https://docs.python.org/3/library/tokenize.html" rel="noopener ugc nofollow" target="_blank">记号赋予器</a>，它将在以后被改变。</p><p id="f568" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用PyTorch的<a class="ae jo" href="https://torchtext.readthedocs.io/en/latest/data.html#torchtext.data.Field" rel="noopener ugc nofollow" target="_blank">torch text . data . field</a>:<br/>进行输入，我们将使用前面提到的Spacy，它默认在data中实现。田</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="d67c" class="ks jq hh li b fi lm ln l lo lp">Input = Field(tokenize = 'spacy',<br/>            init_token = '&lt;sos&gt;', <br/>            eos_token = '&lt;eos&gt;', <br/>            lower = True)</span></pre><p id="3f96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于输出，我们应该首先创建Python tokenize方法。</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="4608" class="ks jq hh li b fi lm ln l lo lp">from tokenize import tokenize, untokenize<br/>import io</span><span id="1349" class="ks jq hh li b fi lq ln l lo lp">def tokenize_flutter_code(str_code):<br/>    tokens = list(tokenize(io.BytesIO(str_code.encode('utf-8')).readline))<br/>    return [it.string for it in flutter_tokens]</span></pre><p id="1be2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们称之为“投掷输出场”:</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="3f65" class="ks jq hh li b fi lm ln l lo lp">Output = Field(tokeniz = tokenize_flutter_code ,<br/>               init_token = '&lt;sos&gt;',<br/>               eos_token = '&lt;eos&gt;',<br/>               lower = False)</span></pre><h2 id="6cf9" class="ks jq hh bd jr kt ku kv jv kw kx ky jz ip kz la kd it lb lc kh ix ld le kl lf bi translated">使用torchtext创建词汇</h2><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="8225" class="ks jq hh li b fi lm ln l lo lp">fields = [('Input', Input),('Output', Output)]</span><span id="fb1e" class="ks jq hh li b fi lq ln l lo lp">Input.build_vocab(train_data, max_size=10000, min_freq=2)</span><span id="c1d8" class="ks jq hh li b fi lq ln l lo lp">Output.build_vocab(train_data, max_size=10000, min_freq=2)</span></pre><h1 id="8bda" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">变压器模型</h1><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lr ls l"/></div></figure><h1 id="ece6" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">培训前流程</h1><p id="83c4" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我们将使用<a class="ae jo" href="https://torchtext.readthedocs.io/en/latest/data.html#torchtext.data.BucketIterator" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">PytorchText</strong><strong class="ig hi">bucket operator</strong></a><strong class="ig hi"/>从我们的数据集创建批处理。使用它将确保我们的输入具有相似的长度。具有相似长度输入的批次为变压器模型提供了大量增益。</p><p id="5d6d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将把数据集分成训练、验证和测试数据，</p><p id="34f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有组件准备就绪后，我们可以开始我们的培训过程。</p><p id="847f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以查看我的<a class="ae jo" href="https://github.com/TahaDouaji/English-to-Flutter-widget/blob/main/transformer_flutter.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>中完整的培训流程和代码，也可以查看我的<a class="ae jo" href="https://github.com/TahaDouaji/English-to-Flutter-widget" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>中完整的项目。</p><p id="7a7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">经过大约40个时代后，我们有了非常好的结果，我相信随着更大的数据集和更多的训练，我们可以有一个有趣的生成器。</p><h1 id="9ecc" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">查看样本结果:</h1><p id="0f47" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">输入:<em class="lg">“构建一个宽33、高44的容器”<br/> </em>输出:</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="e9b2" class="ks jq hh li b fi lm ln l lo lp">Container(width:33,height:44)</span></pre><p id="99b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入:<em class="lg">"写</em>一个带有" Hello "的文本，文本大小22 <em class="lg">在一行内"<br/> </em>输出:</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="e88d" class="ks jq hh li b fi lm ln l lo lp">Row(children:[ CustomText("Hello", textSize: 22)],)</span></pre><p id="1a71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入:<em class="lg">“用“my_img.jpg”和fit BoxFit创建</em>一个图像。<em class="lg">填充<br/>输出</em>:</p><pre class="jd je jf jg fd lh li lj lk aw ll bi"><span id="bfe9" class="ks jq hh li b fi lm ln l lo lp">Image.asset(<strong class="li hi">"</strong>my_img.jpg<strong class="li hi">"</strong>, fit: BoxFit.fill)</span></pre><p id="8ff0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在我的<a class="ae jo" href="https://github.com/TahaDouaji/English-to-Flutter-widget" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到更多的例子。</p><p id="4c2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们已经从一个有限的数据集中构建了一个简单的英文到Flutter UI widgets代码转换器。我们得到了非常好的结果。</p><h1 id="8794" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">参考</h1><div class="lt lu ez fb lv lw"><a href="https://github.com/TahaDouaji/ML-English-to-Flutter-widget" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hi fi z dy mb ea eb mc ed ef hg bi translated">GitHub-TahaDouaji/ML-English-to-Flutter-widget:一个表示变形金刚的机器学习项目…</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">在这个库中，我们将训练Seq2seq Transformer机器学习模型将自然英语句子转换成…</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">github.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk jm lw"/></div></div></a></div><div class="lt lu ez fb lv lw"><a href="https://github.com/aladdinpersson/Machine-Learning-Collection" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hi fi z dy mb ea eb mc ed ef hg bi translated">GitHub-aladdinpersson/Machine-Learning-Collection:学习ML、DL、PyTorch的资源…</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">在这个资源库中，您可以找到与机器学习相关的教程和项目。我试着让代码尽可能的清晰…</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">github.com</p></div></div><div class="mf l"><div class="ml l mh mi mj mf mk jm lw"/></div></div></a></div><div class="lt lu ez fb lv lw"><a href="https://towardsdatascience.com/building-a-python-code-generator-4b476eec5804" rel="noopener follow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hi fi z dy mb ea eb mc ed ef hg bi translated">构建Python代码生成器</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">使用Transformers将英文问题语句转换成Python代码。</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">towardsdatascience.com</p></div></div><div class="mf l"><div class="mm l mh mi mj mf mk jm lw"/></div></div></a></div></div></div>    
</body>
</html>