<html>
<head>
<title>Regression — Flight Price prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回归-航班价格预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/regression-flight-price-prediction-6771fc4d1fb3?source=collection_archive---------0-----------------------#2021-06-07">https://medium.com/analytics-vidhya/regression-flight-price-prediction-6771fc4d1fb3?source=collection_archive---------0-----------------------#2021-06-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2ae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器学习(ML)是对计算机算法的研究，它随着经验和数据的使用而改进。机器学习算法基于样本数据(训练数据)建立模型，并使用该模型进行预测或决策，而无需编程。</p><p id="1c9c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器学习算法有广泛的应用，如欺诈检测、电子邮件过滤等。机器学习的一个应用是在“航空业”，预测航班价格。影响航班价格的因素/特征多种多样——距离、飞行时间、经停次数等。这些因素有助于创建一个决定航班价格的模式，机器学习模型在这个模式上接受训练，以在未来做出预测，自动化这个过程，使这个过程更快。</p><h1 id="b3ea" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">问题陈述</h1><p id="0920" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">机票价格可能很难猜测，今天我们可能会看到一个价格，明天查看同一航班的价格，这将是一个不同的故事。</p><p id="9a7d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了解决这个问题，我们已经获得了2019年3月至6月期间各航空公司和各城市之间的机票价格，我们旨在使用这些价格建立一个模型，该模型使用各种输入特征预测航班价格。</p><h1 id="267b" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">数据集</h1><p id="add5" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">数据集链接—<a class="ae kf" href="https://github.com/dsrscientist/Data-Science-ML-Capstone-Projects" rel="noopener ugc nofollow" target="_blank">https://github . com/DSR scientist/Data-Science-ML-Capstone-Projects</a></p><p id="eeb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们这里有2个数据集—训练集和测试集。</p><p id="2154" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">训练集包含这些功能，以及航班的价格。它包含10683条记录、10个输入特征和1个输出列—“价格”。</p><p id="f759" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">测试集包含2671条记录和10个输入特征。需要在该集合中预测输出“价格”列。这里我们将使用回归技术，因为预测的输出将是一个连续的值。</p><p id="b75c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是数据集中可用要素的描述</p><p id="ad6a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.<strong class="ig hi">航空公司</strong>:航空公司的名称。</p><p id="c580" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.<strong class="ig hi">旅程日期</strong>:旅程的日期</p><p id="10f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.<strong class="ig hi"> Source </strong>:服务开始的来源。</p><p id="0f71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.<strong class="ig hi">目的地</strong>:服务结束的目的地。</p><p id="3dbb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.<strong class="ig hi">航线</strong>:航班到达目的地所走的航线。</p><p id="d945" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.<strong class="ig hi"> Dep_Time </strong>:旅程从源头开始的时间。</p><p id="6792" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">7.<strong class="ig hi">到达时间</strong>:到达目的地的时间。</p><p id="8383" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">8.<strong class="ig hi">持续时间</strong>:飞行总持续时间。</p><p id="2852" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">9.<strong class="ig hi"> Total_Stops </strong>:出发地和目的地之间的总停留次数。</p><p id="22ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">10.<strong class="ig hi">附加信息</strong>:关于航班的附加信息</p><p id="dab8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">11.<strong class="ig hi">价格</strong>:门票的价格</p><h1 id="25b4" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">文章的内容</h1><p id="5df2" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">本文解释了构建机器学习模型的完整过程。下面提到的是我们将在整个项目中经历的各个阶段-</p><p id="2f17" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.探索性数据分析和数据建模</p><p id="4d1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.异常值检测和偏斜度处理</p><p id="499f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.编码数据—标签编码器</p><p id="2a83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.缩放数据—标准缩放器</p><p id="feba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.拟合机器学习模型</p><p id="6c1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.所选模型的交叉验证</p><p id="2862" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">7.模型超调</p><p id="5847" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">8.保存最终模型并使用保存的模型进行预测</p><p id="4726" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，让我们开始探索我们的数据集，并开始建立一个预测模型。</p><h1 id="6da1" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">探索性数据分析和数据建模</h1><p id="1428" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们使用熊猫库加载训练数据集</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/10a7214bc0e481c494787c72a0e62607.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*FL8_Go43tP2lwO9qcXPc7g.png"/></div></figure><p id="5e18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一步是看看我们的数据样本——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/49a6ab55e6c54e13a671eeba4e496792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*43gyUON4JNTwQNjmXr1B8Q.png"/></div></figure><p id="ea6b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们首先确定了以下几点</p><p id="f2be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.Route列包含我们需要分离的城市列表，因为我们的数据集中有多个组合。</p><p id="a7ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.“到达时间”列附有日期，我们需要将其分开。这些都是航班在某个日期从出发地起飞，第二天到达目的地的情况。</p><p id="d2be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.持续时间是字符串格式，我们需要将其转换为整数类型。</p><p id="0a3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.“总停车次数”还添加了文本“停车次数”以及停车次数，某些列为“非停车”，我们需要将其转换为整数类型。</p><p id="20fe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们进一步探索数据集。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kp"><img src="../Images/beb60b9f990e375de625510e4435993c.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*725DSP82x9DX7o6XiRhdyA.png"/></div></figure><p id="6cb7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们运行data.info()命令，该命令为我们提供了关于每一列中存在的值的数量以及每一列的数据类型的信息。</p><p id="bac3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们发现所有的列都是“object”数据类型，只有“Price”列(输出)是整数类型。因为我们知道我们的列意味着什么，所以我们知道我们需要处理哪些列！</p><p id="b22c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们检查数据集中NaN (null)值的计数，结果得到以下结果</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kq"><img src="../Images/41dab5c19912cbd0418e8426b5ef6113.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*mSLmZc-Ddr22MpU-O7e_5g.png"/></div></figure><p id="729d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在“路线”列中缺少一个值，在“总停靠点”列中缺少一个值。我们将进一步有意义地替换丢失的值。</p><p id="5407" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在开始研究数据集中可用的列。我们要做的第一件事是创建分类列的列表，并检查这些列中存在的唯一值</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/8a66e9bd208cf91bdfda6b7e205d9c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*0Ec662FlKxbLjfBt_zGM0g.png"/></div></figure><p id="c57c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们观察到</p><ol class=""><li id="f80e" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb kw kx ky kz bi translated">航空公司列有12个唯一值- 'IndiGo '，'印度航空'，'印度航空'，' SpiceJet '，'多家航空公司'，' GoAir '，' Vistara '，'亚洲航空'，' Vistara Premium economy '，'印度航空商务'，'多家航空公司Premium economy '，' Trujet '。</li><li id="040e" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated">2.源列有5个唯一值-“班加罗尔”、“加尔各答”、“钦奈”、“德里”和“孟买”。</li><li id="307f" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated">3.目的地列有6个唯一值-'新德里'，'邦洛尔'，'科钦'，'加尔各答'，'德里'，'海德拉巴'。</li><li id="0467" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated">4.附加信息列有10个唯一值:“无信息”、“不含机上餐食”、“不含托运行李”、“1次短暂停留”、“无信息”、“1次长期停留”、“变更机场”、“商务舱”、“红眼航班”、“2次长期停留”。</li></ol><p id="32e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们拆分日期列以提取“日期”、“月份”和“年份”值，并将它们存储在数据帧的新列中。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lf"><img src="../Images/63c5d8db9848d4e8c2027183d8d397a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*4Izb3C2FXZktG1H5esgj_g.png"/></div></figure><p id="c628" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，我们拆分Route列来创建多个列，其中包含航班经过的城市。我们检查航班的最大停留次数，以确定最长航线的最大城市数</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/aca28971755a82513acfa44acad7ccc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*RfezTnn_y30R8bUI9mnEaQ.png"/></div></div></figure><p id="a3e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为站点的最大数量是4个，所以在任何特定的路线中最多应该有6个城市。我们在route列中拆分数据，并将所有城市名称存储在单独的列中——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ll"><img src="../Images/9739e60ae8f25eb8b2a57ced8bfb4db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*OTa-A9jVpFB3RjY5O58sbw.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lm"><img src="../Images/e18536691e263f9516832a5dbc60ddc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*hl0GzqKU87VyCyQOq3zb_A.png"/></div></div></figure><p id="6ea5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以类似的方式，我们拆分Dep_time列，并为出发小时和分钟创建单独的列</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ln"><img src="../Images/0daa44e211feffe3d8c49a14cfed51c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*33bIJcAq99noZwDeaG3cOg.png"/></div></figure><p id="38ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，为了将到达日期和到达时间分离，我们拆分了“到达时间”列，并创建了“到达日期”列。我们还拆分了时间，将其分为“到达时间小时”和“到达时间分钟”，类似于我们对“Dep_time”列所做的操作</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lo"><img src="../Images/7b0cda4a44d877870675b3de9be21aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*tq_IPRUh-3RD-2qrSvyGdQ.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lp"><img src="../Images/e1eaa922660ec18dc28ca3b157199f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*wzhyOVF5zmsYyoK86V6B0A.png"/></div></figure><p id="9516" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，我们将“持续时间”列分为“行程小时数”和“行程分钟数”</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lq"><img src="../Images/a1d62992c0ffa7e2e8b099f75b246cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*16KTikAkWBC69QWsFsJXpg.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lr"><img src="../Images/1a4e603fda5728a8a645fa76ffb1826d.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*dTu303ZpB4pYLH84btzs5w.png"/></div></figure><p id="90d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还处理“总停留次数”列，用0值替换直飞航班，并提取“总停留次数”列的整数部分</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ls"><img src="../Images/dcea45bc616557698a8a226056440dc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*-1R4dSSEY3myAt6Ctvw75A.png"/></div></figure><p id="887b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们继续到“Additional_info”列，在那里我们观察到有2个类别表示“No info ”,由于“No Info”中的“I”是大写字母，所以分为2个类别。我们将“无信息”替换为“无信息”,将其合并为一个类别——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lt"><img src="../Images/36b3b7066e66c28866fa73ecc8624507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*oiXx-Dz2ABpHtzwHfnfu0w.png"/></div></figure><p id="9bd5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在删除所有从中提取有用信息的列(原始列)。我们还删除了一些列，如“城市6”和“城市5”，因为这些列中的大部分数据是NaN(空)。结果，我们现在获得了20个不同的列，我们将把它们输入到ML模型中。但是首先，我们处理丢失的值，并研究列中的内容及其对航班价格的影响，以分离出最终列集的列表。</p><h1 id="83e2" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">替换丢失的值</h1><p id="4fdd" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">由于引入了新的列，我们在数据集中引入了许多NaN值，现在我们需要对其进行整理。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ko"><img src="../Images/aff0b69deec2692748b20c7d03295f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ZQ8TEl1oZbqCo3XLMgu9Fg.png"/></div></div></figure><p id="eb8c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们选择删除“城市”列，因为10683行中的9117个值包含NaN值。然后，我们打印出缺少“城市1”数据的行。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/4ef5bb9f902aa18d72447146e6efbbe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*aWsOW76bX0O-1r7jkE4xFQ.png"/></div></figure><p id="12af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们发现这是丢失“Route”的同一行。此行还将“Total_stops”作为NaN。我们将这一行中的城市1替换为“德尔”，将“城市2”替换为“COK”。我们在这里将“总停车次数”替换为0。</p><p id="dd73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们进一步用“无”替换“城市”中的“南”值，因为缺少“城市”的行没有任何停靠点，只有源和目的地。</p><p id="a4c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还用“日期”列中的值替换“到达日期”列中缺少的值，因为缺少的值是航班在同一天起飞和降落的值。</p><p id="c859" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还将“Travel_mins”中缺少的值替换为0，因为缺少的值表示行程时间仅按小时计算，没有额外的分钟。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/44acf0dbdc8522554163d1dafd44c88e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*I15dm80aWI45ns8BM1QJYQ.png"/></div></figure><p id="c412" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用上述步骤，我们成功地处理了数据中所有缺失的值。我们再次检查数据中的信息，发现数据集仍有多个列的数据类型为“object ”,而它应该是“int”—</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lu"><img src="../Images/7d884e29dbf20527b94d3a7d0989bd08.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*ZCcL0NU22M6zXmB_S5z6IQ.png"/></div></figure><p id="e481" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们试图改变所需列的数据类型</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/ab3c27099e643177970f81cf272132e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*YWasvS8fIiHko8-orNIkLA.png"/></div></figure><p id="8299" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在此步骤中，我们面临转换“Travel_hours”列的问题，即该列的数据为“5m”，这不允许将其转换为“int”。</p><p id="cd98" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们打印这一行来检查一次数据——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/be4dbfb32006b6e90d1f795584ffe224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*eV-wYw5FamSPV-MOvBv93w.png"/></div></figure><p id="a642" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据显示飞行时间是“5分钟”，这显然是错误的，因为飞机不可能在5分钟内从孟买-&gt;果阿-&gt;浦那-&gt;海德拉巴！(该航班的“总停留次数”为2)</p><p id="b27e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于该行中存在不正确的数据，我们选择删除该行。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/196796fa140543646b63840d87980233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*8H-frio7AiA0RVAZGCPA4w.png"/></div></figure><p id="769c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我们将“Travel_hours”列转换为“int”数据类型，操作成功完成。</p><p id="4eba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在有一个处理过的数据集，有10682行和19列(18个自变量和1个因变量)。</p><p id="0f59" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们创建分类列和数字列的单独列表，用于绘制和分析数据——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/e88b912559337bb9d062d1b5fb26dfb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*4gvz0SmxSSOFCZoxVQ8klw.png"/></div></figure><p id="e218" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用seaborn、matplotlib库继续绘制和分析数据——</p><p id="4bd1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">绘制分类数据的计数图–</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/e559fd618ca8ec6f9774414bd6032fea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*HU83lN4vpV4WbnW4gV7r_Q.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lv"><img src="../Images/71f4ff61ff6e0ac2a995191501c454ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDSGElVCZy_srd2vh5ARww.png"/></div></div></figure><p id="931a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用上面的图进行下面提到的观察——</p><p id="669b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">航空公司</strong></p><ul class=""><li id="b601" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">Jet Airways是最受欢迎的航空公司，排在第一位，其次是Indigo和AirIndia。</li><li id="306f" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">Vistara Premium economy、Trujet、Multiple carries premium economy和Jet airways的业务很低。</li></ul><p id="f29d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">来源</strong></p><ul class=""><li id="53b7" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班都是从德里起飞的</li><li id="cc38" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">钦奈的航班起飞次数最少</li></ul><p id="3274" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">目的地</strong></p><ul class=""><li id="bca8" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">最大数量的航班在科钦着陆</li><li id="2cf9" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">加尔各答接待航班的数量最少</li></ul><p id="ac3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">附加信息</strong></p><ul class=""><li id="a8ba" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">最大行数没有info作为值。</li><li id="7b6a" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">我们需要检查这个专栏如何影响价格</li></ul><p id="a5df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">城市1 </strong></p><ul class=""><li id="538c" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">城市1具有与源列相同的数据</li><li id="862b" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">“DEL”还有一个额外的值，在名称中有一个额外的空格，这个值非常低。我们将把这个和' DEL '合并。</li></ul><p id="f862" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">城市2 </strong></p><ul class=""><li id="cc44" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班都在孟买停留。</li><li id="62ef" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">有许多城市的停车次数很少。我们将检查带有1个停靠点的航班如何影响航班价格，以及是否与停靠地点有任何关系。</li></ul><p id="f491" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">城市</strong></p><ul class=""><li id="00a2" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班没有第二站</li><li id="ed24" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">如果有第二站，很有可能是科钦。</li></ul><p id="2917" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在绘制分布图来检查数字数据的分布</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lx"><img src="../Images/3a962655757a39913da6dc13f6cdab67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hLAGeIDgaP0zvW2wgOyfXA.png"/></div></div></figure><p id="7fe5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们从数字数据中得出以下观察结果——</p><p id="6bfb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">总停止次数</strong></p><ul class=""><li id="d315" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班的停靠站为1，停靠站为3和4的航班非常少</li></ul><p id="ea8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">日期</strong></p><ul class=""><li id="1e59" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">没有航班旅行的具体日期；所有日期的分布几乎相似</li></ul><p id="8169" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">月</strong></p><ul class=""><li id="e317" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">人们倾向于在四月少旅行</li><li id="94db" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">-五月和六月的航班数量较多，似乎人们会在假期旅行</li></ul><p id="c0eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">年</strong></p><ul class=""><li id="f2b6" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">此列只有2019作为值，可以删除</li></ul><p id="0d63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Dep_Time_Hour </strong></p><ul class=""><li id="b86f" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班倾向于在清晨起飞</li><li id="1156" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">16:00 - 23:00起飞的航班数量也很多，下午的航班数量较少。</li></ul><p id="36f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Dep_Time_Min </strong></p><ul class=""><li id="e586" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班整点起飞(分钟为00)</li></ul><p id="884c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">到达日期</strong></p><ul class=""><li id="d4f1" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">在大多数情况下，航班在同一天起飞和降落</li></ul><p id="4fcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">到达时间小时</strong></p><ul class=""><li id="598e" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班在晚上18:00-19:00左右到达目的地</li><li id="6e46" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">这似乎是因为大多数航班的起飞时间在早上，因此在晚上降落</li></ul><p id="558a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">最小到达时间</strong></p><ul class=""><li id="b543" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">这种分布是类似的，并没有给出任何专门的信息</li></ul><p id="1620" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">行驶时间</strong></p><ul class=""><li id="94ff" class="kr ks hh ig b ih ii il im ip kt it ku ix kv jb lw kx ky kz bi translated">大多数航班的旅行时间大约为2-3小时，这似乎是可以的，因为这些都是国内航班</li><li id="e293" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb lw kx ky kz bi translated">一些航班也有大约30个小时的时间，这可能是因为中间停站的数量</li></ul><p id="6b0b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">出行分钟</strong></p><p id="7917" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-数据被分割，不指向任何特定点</p><p id="f04a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">“价格”栏的分布</strong></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/0db5e301bee84d28298889e9f00611bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*JG4nJ4w9Qzupzk-4aqyhiQ.png"/></div></figure><p id="6138" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">price列包含最小值1759和最大值79512。大多数航班的价格范围在1759-20k之间，价格高于20k的航班数量很少。价格范围向右倾斜。</p><p id="334c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在将独立功能与“价格”列进行比较，以检查对“价格”的影响。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/11481ae5ca8e4d560d950394ddf80f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*EB6ASo0JE2DJ4_pa3XRAEQ.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lv"><img src="../Images/c4c52dc83bce8476e6771fe47a045afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnOBox7n_vf-raUEE9UVPA.png"/></div></div></figure><p id="5c83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们提出以下意见——</p><p id="c333" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">- Jet airways商务舱的价格最高，在5万到8万之间</p><p id="5b9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-所有高成本航班都从班加罗尔出发，其余航班的价格在3k-50k之间</p><p id="14ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-所有高成本航班的目的地都是德里，其余航班的价格在3k-50k之间</p><p id="85c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-如果航班是商务舱，其价格会很高</p><p id="1c31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-价格高的航班有1站，停在孟买</p><p id="d367" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-价格较高的两站航班经停德里。</p><p id="060e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">价格高于50k的数据就更少了。我们检查这些行一次–</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/400593cf63f1bab1e05d3bd7799fc71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*z4HPCypvgw5jk2Xa9K2VZg.png"/></div></figure><p id="270f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们观察到以下情况</p><p id="2d1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-我们观察到价格高的航班有8个。</p><p id="7695" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-这些航班中的大多数都是从同一条路线起飞的——BLR-&gt; BOM-&gt; DEL</p><p id="7b37" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-大多数航班属于商务舱</p><p id="20a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-所有的航班都有喷气航空公司。</p><p id="be0e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-所有这些航班都是在3月份起飞的</p><p id="b293" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在继续检查“价格”列与数字数据的关系</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/603d883467dded4491107225ce9f8bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*otjLF4tmN9F6M2ccdEaBww.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ly"><img src="../Images/f37cd60711df84858bdb0523a711e4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RyEnwDHNOSn_FEWqqLUwHg.png"/></div></div></figure><p id="4037" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们观察到</p><p id="3d4c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-随着止损次数的增加，价格范围缩小到一个更小的价格窗口(10k-22k)</p><p id="1bb8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-高价航班在月末会减少</p><p id="ad78" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-三月份的价格较高</p><p id="8d0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-随着旅行时间的增加，价格上涨，但航班数量减少。</p><p id="5323" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">经过上述分析，我们删除了不需要的栏目，我们认为这些栏目对航班价格没有影响。这些列包括' Dep_Time_Min '，' Arrival_Time_Min '，' Travel_mins '，' Year '，' City1 '。</p><p id="f536" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在有了最终的数据集，有10682行和14列(包括“价格”列)。</p><h1 id="800b" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">离群点检测</h1><p id="d1a5" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们现在绘制箱线图来检查数据中是否存在异常值</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lv"><img src="../Images/4b1ce72ed40605be0b66e9d552e221ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYe-WneE7ET53_MeEW6nDg.png"/></div></div></figure><p id="cca0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们得出以下结论</p><p id="4c6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-异常值出现在总时数、总停留次数和价格中</p><p id="f800" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-我们不会从总停靠点中移除异常值，因为价格受停靠点数量的影响</p><p id="b5b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">-我们不会删除高小时数的数据，小时数的增加显示了上图中为EDA绘制的价格模式。</p><h1 id="ff86" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">偏斜处理</h1><p id="8219" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们现在继续处理数据中的偏斜度，这允许我们将数据拟合为对称分布，这进一步允许我们的模型更好地学习。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/b0dd7a9c7a93e791b259160932685889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*KYuwMXblJMzlvpSzyqK59Q.png"/></div></figure><p id="7fb0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要处理“Travel_hours”列的偏斜度，考虑偏斜度的阈值为+/-0.5(我们不会转换“Price”列，因为它是我们的目标变量)。</p><p id="b1b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用对数变换方法来消除偏斜——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/459ec78c5fe1d4786b8f763ad271e590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*4cAScnsHWr813M0gPoD2tA.png"/></div></figure><p id="1552" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们已经成功地处理了数据中的偏态。我们现在将进行“编码”步骤。</p><h1 id="35d7" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">对分类数据进行编码</h1><p id="ba22" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在这一步中，我们对分类数据进行编码，将其转换为整数类型，因为该模型不适用于“字符串”数据。我们使用“标签编码器”来达到预期的效果——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/12c02566cf9743863c3ef92e6e558980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*r5Gs3gti2x4slHJEZ62_Xg.png"/></div></figure><p id="baff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们转换后的数据看起来像这样——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/ca513a269b6956d7fbc4ecc167e777b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*9TaWZA8MldKMcgCQ4rQNjg.png"/></div></figure><h1 id="f2e0" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">缩放数据</h1><p id="c7ea" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">下一步是使数据达到一个共同的尺度，因为有些列的值很小，有些列的值很大。这个过程很重要，因为相似尺度的值允许模型更好地学习。</p><p id="0c49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在此过程中使用标准定标器——</p><p id="6db1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="lz"> ' </em> </strong> <em class="lz">标准标度遵循标准正态分布(SND)。因此，它使平均值= 0，并将数据缩放到单位方差'</em></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/c64a0a6477df5e11f3772208702d1856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*lb_I4POUW8mr00G80cBPMg.png"/></div></figure><p id="8c69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们的缩放数据如下所示</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/0e7d40050bb15d3a7ac2e20c8cc24744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*o5_Ua09V3NG0zcekJuBzjw.png"/></div></figure><h1 id="12c9" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">拟合回归模型</h1><p id="9ebf" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们现在进行机器学习的主要步骤，拟合模型并预测输出。我们将数据拟合到多个回归模型中，以比较所有模型的性能，并选择最佳模型</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/21cd184e33b7f1b91349aad63fab0f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*u0v_rjp3brL2lzmgQhDxJw.png"/></div></figure><p id="52c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用下面提到的代码将数据拟合到ML模型中并预测输出——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/9394aefc2a2380a98076ce51d975d047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*SbQUEd8x8OIRLgNiuF0BGA.png"/></div></figure><p id="4198" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用K-Neighbors回归器获得了最好的分数，r2_score为81%。我们还利用该模型获得了平均绝对误差、平均平方误差和均方根误差(回归度量)的最小值。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ma"><img src="../Images/43d4ae8197961123cd9712032767a18f.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*IqkEg2OsmZ1IySWqpZMLmg.png"/></div></figure><p id="5af1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们尝试使用集合模型来检验我们的性能是否有所提高</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/ac301e742a05b48c7de1e351d58070d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*XVOtjv3gD0o9ZNdgzvvvmg.png"/></div></figure><p id="cd5b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们观察到以下情况</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mb"><img src="../Images/7e9bed5f59e0ccf0b0b2606ab6e7fb2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*uGX7F9wk9RdZyWGttvlipw.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mc"><img src="../Images/cb0e7f0595a7ea4e2fe8545b9a0d1e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*S8h95fYr6xDtKNYWYB4rVA.png"/></div></figure><p id="db2d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随机森林模型为我们提供了最好的准确性，R2分数为87%，但该模型对训练数据过度拟合。</p><p id="a344" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将尝试调整这个模型，以检查我们是否可以消除过度拟合。</p><p id="06a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该模型的平均绝对误差约为723，RMSE约为1607。</p><p id="549d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">梯度提升也给出了84%的分数，这比K-Neighbors更好，并且模型也没有过度拟合。</p><p id="2255" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该模型的平均绝对误差为～1234，RMSE为～1753(接近随机森林)</p><h1 id="8642" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">交互效度分析</h1><p id="5393" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们对我们的模型进行交叉验证，通过使用k-folds检查模型对新数据进行预测的能力，来检查模型是否有任何过度拟合的问题。我们测试了随机森林和梯度推进回归的交叉验证。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/22958fa1d59a256633aef4f3f34c330a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*9V1pwQf9xqmf22SDSL07pg.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/b36be2e27586e515b365d7b717a7c120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*uvg1qM5xsmEyUF1vwQnEuQ.png"/></div></figure><p id="0a8e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随机森林回归为我们提供了86%的交叉验证分数，梯度推进回归给出了82%的分数。我们将超调这两个模型，以检查我们的准确性是否提高。</p><h1 id="23aa" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">过度调整模型</h1><p id="19b5" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">GridSearch CV是一种使用不同参数组合来验证模型的技术，通过创建参数网格并尝试所有组合来比较哪个组合给出了最佳结果。我们在模型上应用网格搜索——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/7288af670c491aa03656c1241263da7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*_g95n2C9peAneO5z0sFxlg.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/cc88fbc4e056f2d5da2ec1a71afc36b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*6zWf5UBBDHILZonx-GivlA.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/596cb68eaef66b04d9693da753843578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*oCflYos12vmi0Nv32mz_ZQ.png"/></div></figure><p id="b282" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与给出82%准确度的随机森林回归器相比，梯度增强回归器接收的r2_score在过度调整后变得更好，为86%。MAE的值也降低了，表明我们能够调整我们的模型。</p><p id="37af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们选择梯度推进回归器作为我们的最终模型，使用最佳参数保存模型，并使用joblib创建模型对象。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/50a5a21eb9ee0a28ed647cbcacf8757c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*MIgqfKVjkLy7wcHXzI-93g.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/ee8c7e748c19a4ad9dc33fb3e8440830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*MaFSHbk-JT1rev3qUgNX0w.png"/></div></figure><h1 id="aa45" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">结论</h1><p id="9eaa" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们进一步测试使用joblib保存的对象，并创建预测值的数据框架</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/cec19f12d1e9406f25147cd0be5de4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*SGYoI9boMV1z-_vOJMI3XA.png"/></div></figure><p id="74e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们收到以下指标作为最终指标——</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es md"><img src="../Images/90d770aa76b751014fcc7cd67fe1991d.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*4SY_JXjBemPZx5G2Mv7a-g.png"/></div></figure><p id="e018" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们已经实现了87%的r2_score值，这意味着对于大多数行，我们实际上能够预测非常接近实际价格的值。下面附上我们得到的数据框架。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es me"><img src="../Images/2d2962167347c894bd888142ed1c6ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*8f0yrLn9YjCihZtRts8KmA.png"/></div></figure><p id="a85a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些是对训练数据的预测，但我们也有一个测试文件，我们需要预测其输出。</p><p id="4f66" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们加载测试文件，对测试数据应用所有的数据建模过程和操作，就像我们对训练数据所做的一样，然后使用保存的模型对象进行最终预测。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ko"><img src="../Images/c86da02673961f8b15e30d2134b83df1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*fRJp9mixM6lYpYTpNWifUw.png"/></div></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/7259a1f882c7da851743d83850f21f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*AQzwp8RvT4qrp5hVmTNwNA.png"/></div></figure><p id="9532" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，最后，我们成功地训练了我们的回归模型“梯度推进回归器”,以87%的r2_score预测价格的波动，并成功地完成了所需的任务。</p></div></div>    
</body>
</html>