<html>
<head>
<title>Visualize Geographic Data on Python using Scatter_mapbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Scatter_mapbox在Python上可视化地理数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/visualize-geographic-data-on-python-using-scatter-mapbox-86f54341af85?source=collection_archive---------8-----------------------#2021-03-31">https://medium.com/analytics-vidhya/visualize-geographic-data-on-python-using-scatter-mapbox-86f54341af85?source=collection_archive---------8-----------------------#2021-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7f482295e96340001ac3bde781d56758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iy3bH7D9mN6sIK4IJ7OFnA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:作者图片(冰川国家公园)</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="e8f8" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">在任何与数据科学相关的项目中，我们都会在数据可视化上花费大量时间。通常包括散点图、直方图、箱线图等。但是有没有想过，如果我们将这些数据在地理环境中可视化，也许会有助于绘制一些空间关系。如果我们幸运地拥有纬度和经度信息，我们可以使用现有的库，如<em class="jz"> geopandas </em>、<em class="jz"> plotly </em>等，相对快速地创建这样的图。</p><p id="7a37" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">在这篇文章中，我想讨论一个非常简单和有用的工具，叫做<em class="jz">'</em><strong class="jd hj"><em class="jz">scatter _ map box</em></strong><em class="jz">'</em>，它利用<em class="jz">纬度</em>和<em class="jz">经度</em>信息将点集数据绘制到地图中。本练习是线性回归项目探索性数据分析的一部分，使用了华盛顿金县地区的公开住房数据集。</p><p id="e1f7" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们将从导入必要的库开始:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/4c5c147f2af62889e67587d3248cecb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Qil4aeVB0nsFXdFgIfDziQ.png"/></div></figure><p id="cd22" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">简而言之，下面的代码片段提供了该工具的基本功能和参数。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/b72b4e1b35b46528f3ccfd7ab4f4aa5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*mJR-iklTRxpsK8Bhs2dRZA.png"/></div></figure><p id="e20d" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">以下示例显示了地图上的房屋位置。我们可以做的一件显而易见的事情是对每个点进行颜色编码，这将允许我们快速可视化任何特征的空间分布。例如，我们可以使用“价格”作为颜色属性来定位房价较高的区域。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/9a03d81c8545a43e0c967884e4985e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*LEMu9SLoSN-voFOrNyX7Qw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">用“价格”特征进行颜色编码的房屋位置</figcaption></figure><p id="ba53" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated"><strong class="jd hj"> <em class="jz">你能从上面的地图中注意到房价分布的模式吗？</em>T19】</strong></p><p id="244a" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">是的，人们可以观察到一些高价格的房子集中在北部和中部地区。</p><p id="4278" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">注意图例中的色标是连续的。对于任何数值数据集都是如此。如果我们有分类数据，我们将得到离散图例，如下例所示。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/8ec634740f862d5bc8ce449d4e258301.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*0pPIlJ4jnpVPh9J71eQa5w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">用“条件”特征编码的房屋位置颜色</figcaption></figure><p id="0342" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">scatter_mapbox参数不言自明。这个库中几乎没有简洁的功能。我发现其中一个特别有用的是<em class="jz">‘hover _ data’</em>参数。我们可以在这个参数中传递尽可能多的特性，这些特性在我们的pandas数据框架中是可用的，并且可以立即获得各个数据点的信息。我们还可以使用<em class="jz">‘size’</em>参数来反映数据点的值，即较大的符号代表较高的值。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/f46c1c33557d8572e8e7d6351e7a1238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*T153FcBDEqlg2HzQqSnO0g.png"/></div></figure><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/9c21e924d47370e23c82d861886a28a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*8ILVKcSu1lQj-y_fSWYz0g.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">房屋位置用“价格”特征进行颜色编码(尺寸参数也增加到20)</figcaption></figure><p id="d459" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">有一个很好的特性允许你在函数之外更新参数。注意，我们在底部有'<em class="jz"> fig.update_layout() </em>'命令。这个可以放在<strong class="jd hj"> px.scatter_mapbox() </strong>函数内部或者外部。例如:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/220541c41a7fee6cc48e6a68662be8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*jqWQF5u846xp50Bc0kdoNg.png"/></div></figure><p id="f841" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">最后，这个工具箱有一个限制，就是缺少对大范围地图的可访问性。目前，只有少数地图可供任何人使用。有一些整洁的底图可用，这将需要创建一个个性化的令牌。但在很大程度上，<em class="jz">“开放街道地图”</em>是我发现对我的目的最有用的，但它仍然没有视觉吸引力。</p><h2 id="25d9" class="kk kl hi bd km kn ko kp kq kr ks kt ku jm kv kw kx jq ky kz la ju lb lc ld le bi translated"><strong class="ak">总结</strong></h2><p id="f61d" class="pw-post-body-paragraph jb jc hi jd b je lf jg jh ji lg jk jl jm lh jo jp jq li js jt ju lj jw jx jy hb bi translated">使用地理坐标可视化数据时，scatter_mapbox是非常有用的工具。这也可以与<em class="jz">【geo pandas】</em>库结合使用，后者是另外一整章要讨论的。使用这个工具使我能够增强线性回归模型的特征工程。例如，从房价分布图中，我能够提取一个<em class="jz">“距离市中心的距离”</em>特征作为新特征之一，这有助于提高模型的可预测性。</p><p id="1e26" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated"><em class="jz">参考:</em><a class="ae lk" href="https://plotly.com/python/mapbox-layers/" rel="noopener ugc nofollow" target="_blank"><em class="jz">https://plotly.com/python/mapbox-layers/</em></a></p></div></div>    
</body>
</html>