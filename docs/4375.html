<html>
<head>
<title>How to Scrape Data from a Website using Python for Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者如何使用Python从网站上抓取数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-scrape-data-from-a-website-using-python-for-beginner-5c770a1fbe2d?source=collection_archive---------0-----------------------#2021-10-02">https://medium.com/analytics-vidhya/how-to-scrape-data-from-a-website-using-python-for-beginner-5c770a1fbe2d?source=collection_archive---------0-----------------------#2021-10-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数据科学领域，我们总是依赖于数据。有许多方法可以收集数据。众多来源之一是来自网站的数据。网站也可以是数据的第二来源，有许多这样的网站的例子，例如:数据聚合网站(例如。w<a class="ae jd" href="https://www.worldometers.info/" rel="noopener ugc nofollow" target="_blank">orldometer</a>)、新闻网站(例如美国消费者新闻与商业频道)、社交媒体(例如Twitter)、电子商务(例如。Shopee)，等等。这些网站非常有用，为他们提供了数据科学项目所需的数据。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/2fe3bdb15cd32c6a93badf47ce4d767b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*TbgzkAcH_5HXZwW7tmOgRg.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图1网络报废(<a class="ae jd" href="https://www.datasciencecentral.com/profiles/blogs/what-is-web-scraping-and-how-does-it-work" rel="noopener ugc nofollow" target="_blank">来源:数据科学中心，2020 </a></figcaption></figure><p id="2bff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如何收集数据呢？我们不能用手一个接一个地复制和粘贴，对吗？所以解决方案是使用Python。在Python中，有一个强大的库叫做BeautifulSoup和Selenium。数据科学家经常使用它们来收集多种格式的数据。在本节中，我们将首先介绍BeautifulSoup。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="2d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步。安装库</strong></p><p id="93f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要安装所需的库，例如:</p><ol class=""><li id="4250" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated">BeautifulSoup4</li><li id="a544" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">要求</li><li id="4fc6" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">熊猫</li><li id="e002" class="jx jy hi ih b ii kg im kh iq ki iu kj iy kk jc kc kd ke kf bi translated">lxml</li></ol><p id="69d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装一个库，您可以简单地使用<strong class="ih hj"> pip install [library name] </strong>或<strong class="ih hj">conda install[library name]</strong>进行安装，如果您使用的是Anaconda提示符。首先，我们要安装BeautifulSoup4。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kl"><img src="../Images/b038b2fb7666b0568163e4e4a1ff8baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*YMKFMIafVOyLOmW56Piq-g.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图2安装bs4</figcaption></figure><p id="ee91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们安装了<strong class="ih hj"> BeatifulSoup4 (bs4) </strong>之后，我们可以做的下一件事就是安装'<strong class="ih hj"> requests' </strong>。<strong class="ih hj">Requests’</strong>是一个库，如果我们想从他们的网站获取数据，它的任务是请求主机服务器的许可。然后，我们还需要安装<strong class="ih hj"> pandas </strong>来创建dataframe和<strong class="ih hj"> lxml </strong>来将HTML格式转换成Python友好的格式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es km"><img src="../Images/d7d568387e616453750cafa4d0c9ad68.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*vZ1tiO8efJVhyBgAEkPJFA.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图3安装“请求”</figcaption></figure><p id="d768" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤二。导入库</strong></p><p id="b862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在重要的库安装完成后，我们接下来要做的就是打开您最喜欢的环境。在本教程中，我们建议您使用Spyder 4.2.5，因为对于某些步骤，我们会遇到较长的输出，所以Spyder比Jupyter Notebook使用起来更舒适。</p><p id="9cc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，一旦我们打开Spyder，接下来我们可以做的就是导入所需的库:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="92ce" class="ks kt hi ko b fi ku kv l kw kx"># Import library<br/><strong class="ko hj">from</strong> bs4 <strong class="ko hj">import</strong> BeautifulSoup<br/><strong class="ko hj">import</strong> requests</span></pre><p id="3c43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步。选择页面</strong></p><p id="4636" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，我们将使用<a class="ae jd" href="https://webscraper.io/" rel="noopener ugc nofollow" target="_blank"> webscraper.io </a>。因为这个网站是用HTML制作的，所以更容易阅读代码，适合初学者。现在，在本节中，我们将抓取这一页:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es ky"><img src="../Images/b71e2b7cac4d5e52e37e9ff55716195e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vaign0q472vpBgn2xGxHyQ.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图Fig.4 Webscrapper.io</figcaption></figure><p id="5197" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个页面是一个电子商务网站的原型。在这个项目中，我们将收集计算机和笔记本电脑的数据，如产品名称、价格、描述和评论。</p><p id="1257" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步。请求许可</strong></p><p id="b007" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们选择了我们想要抓取的页面后，现在我们可以复制页面的URL并使用<strong class="ih hj">请求</strong>请求主机服务器允许我们从他们的站点获取数据。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="2c3c" class="ks kt hi ko b fi ku kv l kw kx"># Define URL<br/>url = ‘<a class="ae jd" href="https://webscraper.io/test-sites/e-commerce/allinone/computers/laptops'" rel="noopener ugc nofollow" target="_blank">https://webscraper.io/test-sites/e-commerce/allinone/computers/laptops'</a></span><span id="189b" class="ks kt hi ko b fi ld kv l kw kx"># Ask hosting server to fetch url<br/>requests.get(url)</span></pre><p id="8fd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果输出是<response>，这意味着服务器允许我们从他们的网站收集数据。为了验证我们可以在文本中定义request.get函数。</response></p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="8c67" class="ks kt hi ko b fi ku kv l kw kx">pages = requests.get(url)<br/>pages.text</span></pre><p id="59e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果运行这段代码，输出将是混乱的脚本代码，它对Python不友好。我们需要使用一个解析器，这样我们可以使它更具可读性。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="6af6" class="ks kt hi ko b fi ku kv l kw kx"># parser-lxml = Change html to Python friendly format<br/>soup = BeautifulSoup(pages.text, ‘lxml’)<br/>soup</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es le"><img src="../Images/f247f2050ce5272ebd9bbbba69d5a65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1DAbqR9M6AqdHEWdssBLSg.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图5使用Parse之前和之后</figcaption></figure><p id="87d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步。检查元件</strong></p><p id="847c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每个网络报废项目，我们建议你使用谷歌浏览器，因为它非常方便易用。现在我们将学习如何使用Chrome检查网站的脚本代码。首先，您需要右键单击您想要检查的页面，然后单击<strong class="ih hj">检查</strong>，之后您将看到:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lf"><img src="../Images/a8ac3ef1112d59a0b1f201b38f03c3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yj8qXtZO9MtxXj1WfJEvYg.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图6检查元件</figcaption></figure><p id="eeaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后可以点击<strong class="ih hj">选择页面中的一个元素进行检查。</strong>单击后，您会注意到，如果您将光标移动到页面的每个元素，元素菜单将为您提供所选元素的脚本信息。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lg"><img src="../Images/4c1025dcb32dfb98900120c14c709237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mv5t2JykbYzQLGdjp59CyA.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图7示例</figcaption></figure><p id="c695" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，如果我们将光标移动到<strong class="ih hj">测试点</strong>，该元素将通知您<strong class="ih hj">测试点</strong>位于标签<strong class="ih hj"> h1中。在Python中，如果你想检查一个网站的元素，你可以调用标签。标签的特点是总是以<strong class="ih hj"> &lt; </strong>为前缀，并且经常是紫色的。</strong></p><p id="745f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第六步。访问标签</strong></p><p id="37e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我们想使用Python访问<strong class="ih hj"> h1 </strong>的元素，我们可以简单地输入:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="608b" class="ks kt hi ko b fi ku kv l kw kx"># Access h1 tag<br/>soup.h1</span></pre><p id="877e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出将是:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="89e7" class="ks kt hi ko b fi ku kv l kw kx">soup.h1<br/>Out[11]: &lt;h1&gt;Test Sites&lt;/h1&gt;</span></pre><p id="6372" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不仅单行标签你还可以访问类标签，例如:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="6e4b" class="ks kt hi ko b fi ku kv l kw kx"># Access header tag<br/>soup.header</span><span id="72d6" class="ks kt hi ko b fi ld kv l kw kx"># Access div tag<br/>soup.div</span></pre><p id="7f0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记得之前定义好<strong class="ih hj"> soup </strong>，因为把HTML改成Python友好的格式很重要。</p><p id="02a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以从嵌套标签中访问特定标签。<strong class="ih hj">嵌套标签是指标签内的标签</strong>。例如标签<strong class="ih hj"> &lt; p &gt; </strong>位于标签<strong class="ih hj"> &lt;头&gt; </strong>内。但是当你从<strong class="ih hj"> &lt;头&gt; </strong>中访问一个特定的标签时，Python总是从第一个索引开始显示结果。稍后我们将学习如何从嵌套标签中访问多个标签。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="1a5e" class="ks kt hi ko b fi ku kv l kw kx"># Access string from nested tags<br/>soup.header.p</span></pre><p id="3f27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="d6a3" class="ks kt hi ko b fi ku kv l kw kx">soup.header.p<br/>Out[10]: &lt;p&gt;Web Scraper&lt;/p&gt;</span></pre><p id="effc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以从嵌套标签中的特定标签访问字符串。您可以简单地在代码中添加一个<strong class="ih hj">字符串</strong>。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="3040" class="ks kt hi ko b fi ku kv l kw kx"># Access string from nested tags<br/>soup.header.p<br/>soup.header.p.string</span></pre><p id="f4af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="4008" class="ks kt hi ko b fi ku kv l kw kx">soup.header.p<br/>soup.header.p.string<br/>Out[12]: ‘Web Scraper’</span></pre><p id="9dd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在我们了解了如何从嵌套标签中访问标签。所以接下来我们要学习的是如何访问标签中的属性。为此我们可以使用<strong class="ih hj"> attrs，</strong>这是<strong class="ih hj"/>beautiful soup的特性。<strong class="ih hj">属性</strong>的输出是一个字典。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="d669" class="ks kt hi ko b fi ku kv l kw kx"># Access ‘a’ tag in &lt;header&gt;<br/>a_start = soup.header.a<br/>a_start</span><span id="c9dd" class="ks kt hi ko b fi ld kv l kw kx"># Access only the attributes using attrs<br/>a_start.attrs</span></pre><p id="439e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="483f" class="ks kt hi ko b fi ku kv l kw kx">Out[16]: <br/>{‘data-toggle’: ‘collapse-side’,<br/> ‘data-target’: ‘.side-collapse’,<br/> ‘data-target-2’: ‘.side-collapse-container’}</span></pre><p id="e2f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以访问一个特定的属性，记住Python把属性当作一个字典，所以我们把<strong class="ih hj">数据切换</strong>、<strong class="ih hj">数据目标</strong>和<strong class="ih hj">数据目标-2 </strong>当作一个<strong class="ih hj">键</strong>。例如，现在我们将访问<strong class="ih hj">的数据目标</strong>:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="5744" class="ks kt hi ko b fi ku kv l kw kx">a_start[‘data-target’]</span></pre><p id="c1e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="6a3e" class="ks kt hi ko b fi ku kv l kw kx">a_start[‘data-target’]<br/>Out[17]: ‘.side-collapse’</span></pre><p id="25bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以添加一个新的属性，记住这些变化只会影响网站的局部，而不会影响网站本身的全局。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="41c0" class="ks kt hi ko b fi ku kv l kw kx">a_start[‘new-attribute’] = ‘This is the new attribute’<br/>a_start.attrs<br/>a_start</span></pre><p id="61b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="deba" class="ks kt hi ko b fi ku kv l kw kx">a_start[‘new-attribute’] = ‘This is the new attribute’<br/>a_start.attrs<br/>a_start<br/>Out[18]: <br/>&lt;a data-target=”.side-collapse” data-target-2=”.side-collapse-container” data-toggle=”collapse-side” new-attribute=”This is the new attribute”&gt;<br/>&lt;button aria-controls=”navbar” aria-expanded=”false” class=”navbar-toggle pull-right collapsed” data-target=”#navbar” data-target-2=”.side-collapse-container” data-target-3=”.side-collapse” data-toggle=”collapse” type=”button”&gt;<br/>...<br/>&lt;/a&gt;</span></pre><p id="d33f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第七步。访问标签的特定属性</strong></p><p id="2fb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经知道在一个标签中可以有许多子标签，例如，如果我们运行<strong class="ih hj"> soup.header.div </strong>在&lt; div &gt;下有许多子标签，记住我们只调用&lt; header &gt;下的&lt; div &gt;，所以&lt; header &gt;下的其他标签将不包括在内。</p><p id="b8dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="6fb8" class="ks kt hi ko b fi ku kv l kw kx">soup.header.div<br/>Out[26]: <br/>&lt;div class=”container”&gt;<br/>&lt;div class=”navbar-header”&gt;<br/>&lt;a data-target=”.side-collapse” data-target-2=”.side-collapse-container” data-toggle=”collapse-side” new-attribute=”This is the new attribute”&gt;<br/>&lt;button aria-controls=”navbar” aria-expanded=”false” class=”navbar-toggle pull-right collapsed” data-target=”#navbar” data-target-2=”.side-collapse-container” data-target-3=”.side-collapse” data-toggle=”collapse” type=”button”&gt;<br/>...<br/>&lt;/div&gt;</span></pre><p id="d25e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，正如我们看到的，一个标签下有许多属性，问题是如何只访问我们想要的属性。在BeautifulSoup中有一个函数叫做<strong class="ih hj">‘查找’</strong>和<strong class="ih hj">‘查找_全部’</strong>。为了更清楚，我们将向您展示如何使用这两种功能以及它们之间的区别。作为一个例子，我们将找到每个产品的价格。要识别什么是价格代码，你只需将光标移到价格指示器上。</p><p id="babf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">移动光标后，我们可以发现价格位于标签<strong class="ih hj"> h4 </strong>和类别<strong class="ih hj">右拉价格</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lh"><img src="../Images/0b689f54306cdf055a293cafa952c953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6B2qVp802ErQnJXIgAiZIw.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图8价格指数</figcaption></figure><p id="5dff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们想使用find搜索h4的字符串:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="f4a9" class="ks kt hi ko b fi ku kv l kw kx"># Searching specific attributes of tags<br/>soup.find(‘h4’, class_= ‘pull-right price’)</span></pre><p id="eafe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="42f4" class="ks kt hi ko b fi ku kv l kw kx">Out[28]: &lt;h4 class=”pull-right price”&gt;<strong class="ko hj">$295.99</strong>&lt;/h4&gt;</span></pre><p id="f2e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到<strong class="ih hj"> $295.99 </strong>是<strong class="ih hj"> h4 </strong>的属性(字符串)。但是如果我们使用find_all。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="8741" class="ks kt hi ko b fi ku kv l kw kx"># Using find_all<br/>soup.find_all(‘h4’, class_= ‘pull-right price’)</span></pre><p id="fb6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="4d02" class="ks kt hi ko b fi ku kv l kw kx">Out[29]: <br/>[&lt;h4 class=”pull-right price”&gt;$295.99&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$299.00&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$299.00&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$306.99&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$321.94&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$356.49&lt;/h4&gt;,<br/> ....<br/>&lt;/h4&gt;]</span></pre><p id="55bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你注意到<strong class="ih hj"> find </strong>和<strong class="ih hj"> find_all </strong>的区别了吗？</p><p id="de00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，你是正确的，<strong class="ih hj"> find </strong>是用于如果你想搜索特定的属性，因为它只产生一个结果。但是，如果您想收集大量数据(例如价格、产品名称、描述等)。)使用<strong class="ih hj"> find_all </strong>才是正道。</p><p id="8c65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以对find_all的结果进行切片，例如，在这种情况下，我们只想看到索引3到5。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="855f" class="ks kt hi ko b fi ku kv l kw kx"># Slicing the results of find_all<br/>soup.find_all(‘h4’, class_= ‘pull-right price’)[2:5]</span></pre><p id="1bfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="700e" class="ks kt hi ko b fi ku kv l kw kx">Out[32]: <br/>[&lt;h4 class=”pull-right price”&gt;$299.00&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$306.99&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$321.94&lt;/h4&gt;]</span></pre><p id="1f80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[!]记住在Python中索引从0开始，最后一个索引不包括在内</p><p id="1988" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第八步。使用过滤器</strong></p><p id="ee6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以找到多个标签:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="501d" class="ks kt hi ko b fi ku kv l kw kx"># Using filter to find multiple tags<br/>soup.find_all(['h4', 'a', 'p'])<br/>soup.find_all(['header', 'div'])<br/>soup.find_all(id = True) # class and id are special attribute so it can be written like this<br/>soup.find_all(class_= True)</span></pre><p id="cf6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为class和id是特殊属性，所以您可以写class_ and id而不是' class '或' id '</p><p id="51bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用过滤器，我们可以从网站上收集我们想要的数据，在本例中，我们想要收集名称、价格、评论和描述。所以我们需要先定义变量。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="c407" class="ks kt hi ko b fi ku kv l kw kx"># Filter by name<br/>name = soup.find_all(‘a’, class_=’title’)</span><span id="db15" class="ks kt hi ko b fi ld kv l kw kx"># Filter by price<br/>price = soup.find_all(‘h4’, class_ = ‘pull-right price’)</span><span id="8afa" class="ks kt hi ko b fi ld kv l kw kx"># Filter by reviews<br/>reviews = soup.find_all(‘p’, class_ = ‘pull-right’)</span><span id="c478" class="ks kt hi ko b fi ld kv l kw kx"># Filter by description<br/>description = soup.find_all(‘p’, class_ =’description’)</span></pre><p id="240c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按名称输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="64c2" class="ks kt hi ko b fi ku kv l kw kx">[&lt;a class=”title” href=”/test-sites/e-commerce/allinone/product/545" title=”Asus VivoBook X441NA-GA190"&gt;Asus VivoBook X4…&lt;/a&gt;,<br/> &lt;a class=”title” href=”/test-sites/e-commerce/allinone/product/546" title=”Prestigio SmartBook 133S Dark Grey”&gt;Prestigio SmartB…&lt;/a&gt;,<br/> &lt;a class=”title” href=”/test-sites/e-commerce/allinone/product/547" title=”Prestigio SmartBook 133S Gold”&gt;Prestigio SmartB…&lt;/a&gt;,<br/> ...<br/>&lt;/a&gt;]</span></pre><p id="46fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按价格输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="b88b" class="ks kt hi ko b fi ku kv l kw kx">[&lt;h4 class=”pull-right price”&gt;$295.99&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$299.00&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$299.00&lt;/h4&gt;,<br/> &lt;h4 class=”pull-right price”&gt;$306.99&lt;/h4&gt;,<br/> ...<br/> &lt;/h4&gt;]</span></pre><p id="7dc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">评审输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="2c44" class="ks kt hi ko b fi ku kv l kw kx">[&lt;p class=”pull-right”&gt;14 reviews&lt;/p&gt;,<br/> &lt;p class=”pull-right”&gt;8 reviews&lt;/p&gt;,<br/> &lt;p class=”pull-right”&gt;12 reviews&lt;/p&gt;,<br/> &lt;p class=”pull-right”&gt;2 reviews&lt;/p&gt;,<br/> ...<br/> &lt;/p&gt;]</span></pre><p id="4004" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按描述输出:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="9353" class="ks kt hi ko b fi ku kv l kw kx">[&lt;p class=”description”&gt;Asus VivoBook X441NA-GA190 Chocolate Black, 14", Celeron N3450, 4GB, 128GB SSD, Endless OS, ENG kbd&lt;/p&gt;,<br/> &lt;p class=”description”&gt;Prestigio SmartBook 133S Dark Grey, 13.3" FHD IPS, Celeron N3350 1.1GHz, 4GB, 32GB, Windows 10 Pro + Office 365 1 gadam&lt;/p&gt;,<br/> &lt;p class=”description”&gt;Prestigio SmartBook 133S Gold, 13.3" FHD IPS, Celeron N3350 1.1GHz, 4GB, 32GB, Windows 10 Pro + Office 365 1 gadam&lt;/p&gt;,<br/> ...<br/>&lt;/p&gt;]</span></pre><p id="4737" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第九步。过滤器的清洗输出结果</strong></p><p id="0242" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所看到的，输出的结果仍然是HTML格式，所以我们需要清理它，只得到字符串。为此，我们可以简单地使用<strong class="ih hj">文本</strong>功能。</p><p id="9ff6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">文本</strong>可以用来过滤HTML代码中的字符串，但是我们需要定义一个新的变量，例如:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="e1ee" class="ks kt hi ko b fi ku kv l kw kx"># Try to call price<br/>price1 = soup.find(‘h4’, class_ = ‘pull-right price’)<br/>price1.text</span></pre><p id="dabb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="d002" class="ks kt hi ko b fi ku kv l kw kx">Out[55]: ‘$295.99’</span></pre><p id="7d5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所看到的，输出结果只是代码中的字符串，但这还不够。下一步，我们将学习如何将所有字符串刮入列表中。</p><p id="81ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第十步。创建一个FOR循环，将字符串放入列表</strong></p><p id="1130" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是有趣的部分，要将所有字符串放入列表中，我们需要为循环创建一个。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="29c2" class="ks kt hi ko b fi ku kv l kw kx"># Create for loop to make string from find_all list<br/>product_name_list = []<br/>for i in name:<br/> name = i.text<br/> product_name_list.append(name)</span><span id="3269" class="ks kt hi ko b fi ld kv l kw kx">price_list = []<br/>for i in price:<br/> price = i.text<br/> price_list.append(price)<br/> <br/>review_list = []<br/>for i in reviews:<br/> rev = i.text<br/> review_list.append(rev)<br/> <br/>description_list = []<br/>for i in description:<br/> desc = i.text<br/> description_list.append(desc)</span></pre><p id="6438" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第十一步。从列表</strong>创建一个数据帧</p><p id="1004" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，我们创建了一个for循环，所有的字符串都添加到了列表中，所以最后一步是从列表中创建一个dataframe。为了创建一个数据框架，我们需要导入熊猫。</p><pre class="jf jg jh ji fd kn ko kp kq aw kr bi"><span id="4df4" class="ks kt hi ko b fi ku kv l kw kx"># Create dataframe<br/># Import library<br/>import pandas as pd</span><span id="0aea" class="ks kt hi ko b fi ld kv l kw kx">tabel = pd.DataFrame({‘Product Name’:product_name_list,<br/> ‘Price’: price_list,<br/> ‘Reviews’:review_list,<br/> ‘Description’:description_list})</span></pre><p id="edfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数据框架被创建之后，我们可以使用这些数据来做一个数据科学项目，我们可以把它放入机器学习，从中获得有价值的见解，或者任何东西。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es li"><img src="../Images/843440daf01a0d8f71b473f3898cc7a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2MoUbWu3eQYZh7Sn6Pk6w.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图9数据框</figcaption></figure><p id="d113" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我给出的教程，希望对你们有用，尤其是对正在学习网络抓取的人。下一个项目再见。</p></div></div>    
</body>
</html>