<html>
<head>
<title>Colab + Vs Code + GitHub + Jupyter (Perfect for Deep Learning)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Colab + Vs Code + GitHub + Jupyter(非常适合深度学习)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/colab-vs-code-github-jupyter-perfect-for-deep-learning-2b257ae94d01?source=collection_archive---------0-----------------------#2021-05-24">https://medium.com/analytics-vidhya/colab-vs-code-github-jupyter-perfect-for-deep-learning-2b257ae94d01?source=collection_archive---------0-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1d9c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Vs代码设置Google Colab远程机器|将您的本地存储库放到Colab上|使用端口转发从Colab内运行Jupyter Notebook</h2></div><h2 id="32c4" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak">读完这篇文章，你将能够做到以下几点(</strong>我已经展示了Linux中的教程，其他OS用户也可以采用<strong class="ak">)。</strong></h2><ol class=""><li id="5b69" class="jv jw hi jx b jy jz ka kb ji kc jm kd jq ke kf kg kh ki kj bi translated">你将不必仅仅依靠谷歌Colab托管的jupyter笔记本来访问他们的GPU、互联网速度和其他资源。您可以直接从Vs代码编辑器中访问这些资源(它的优势在于能够导航包含多个文件夹和相互依赖的代码文件的存储库)。这就像在本地机器上使用Vs代码导航功能、GUI等来访问Colab的计算一样。</li><li id="438d" class="jv jw hi jx b jy kk ka kl ji km jm kn jq ko kf kg kh ki kj bi translated">将您的本地文件推送到GitHub，然后克隆到Colab机器上。在Colab上开发和使用您的文件。在一天结束时，通过将更新的回购推回GitHub来保存您的工作。</li><li id="b0a2" class="jv jw hi jx b jy kk ka kl ji km jm kn jq ko kf kg kh ki kj bi translated">从Colab内部运行Jupyter notebook，它将托管在您本地机器的浏览器上。</li></ol><h2 id="8e31" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak">用Google Colab连接Vs代码</strong></h2><ol class=""><li id="1ed2" class="jv jw hi jx b jy jz ka kb ji kc jm kd jq ke kf kg kh ki kj bi translated">从<a class="ae kp" href="https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hj">这里</strong> </a>下载一个<strong class="jx hj"> Cloudflare </strong>二进制文件。从下载的zip文件中解压缩，并将二进制文件保存在您选择的任何合适的目录中。在我的例子中，二进制文件的位置是</li></ol><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="2379" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">“/home/&lt;username&gt;/Downloads/cloudflared”</strong></span></pre><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ld"><img src="../Images/f5335f24bbf7b92dd64143b999a36838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VXF3oVz6wTg7IwbDKoBlw.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">Cloudflare二进制文件</figcaption></figure><ol class=""><li id="7386" class="jv jw hi jx b jy lp ka lq ji lr jm ls jq lt kf kg kh ki kj bi translated">打开Vs代码，下载<strong class="jx hj"> Remote-SSH扩展</strong>。</li></ol><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/14ecbdfe4b0eb23672d5ddb0e74e6622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OiivbSisgMYAkHTiLanr_A.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">Vs代码中的远程SSH扩展</figcaption></figure><p id="a4ba" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">3.在Vs代码内部使用<strong class="jx hj"> (Ctrl + Shift + P) </strong>并键入<strong class="jx hj">远程配置文件</strong>。</p><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/b8e22fbfb9876e32c5b8fb362090e259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpG9vseahzfe20orEen6kQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">远程配置文件搜索</figcaption></figure><p id="97b8" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">现在选择文件名为</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="67db" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">‘/home/&lt;username&gt;/.ssh/config’ </strong></span></pre><p id="0225" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">并将下面的命令粘贴到文件中。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="46f9" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">Host *.trycloudflare.com<br/> HostName %h<br/> User root<br/> Port 22<br/> ProxyCommand &lt;PUT_THE_CLOUDFLARE_FILE_PATH_HERE&gt; access ssh --hostname %h</strong></span></pre><p id="be1a" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">4.您已经完成了设置Vs代码来访问Colab机器。现在去Google Colab，打开一个新的笔记本。要访问GPU <strong class="jx hj">，将运行时类型更改为GPU </strong>，并在笔记本中运行以下命令。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="0720" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">!pip install colab_ssh --upgrade</strong></span><span id="8b34" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">from colab_ssh import launch_ssh_cloudflared, init_git_cloudflared</strong></span><span id="c7e1" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">launch_ssh_cloudflared(password="mypassword")</strong></span></pre><p id="13cf" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">这将使您进入以下屏幕。</p><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es mj"><img src="../Images/7d4beec0eb492d801fd71ba9d34ed9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8po3W-MIsjbBES9AEE5PiA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">带有Cloudflare链接的Google Colab(复制到Vs代码中)</figcaption></figure><p id="3a32" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">5.复制<strong class="jx hj"> Vs代码远程SSH </strong>下的链接。打开Vs代码，键入<strong class="jx hj"> (Ctrl + Shift + P)。</strong>搜索<strong class="jx hj">遥控器:连接主机</strong>并按回车键。出现提示时粘贴复制的链接，如下所示，然后按回车键。</p><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/38cd5ba28ac40029067d086e799edb4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lb6tyhlDESScByV0-F1WOg.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">搜索远程:连接到主机</figcaption></figure><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/0f2ffa4e5f96d1b4a9beceb8a9616d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sLfY7000OqK9vOIroXh7MQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">粘贴Cloudflare URL</figcaption></figure><p id="c43c" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">6.提供您在colab中设置的密码。好了，您将能够从Vs代码终端访问机器。键入<strong class="jx hj"> nvidia-smi </strong>检查GPU配置。</p><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/3c20655129490bea78ce14e034e6b5d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wxmQ6FoePIcOcm8PHP7-HA.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">从Vs代码终端访问Colab GPU</figcaption></figure><p id="2b6d" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">我们完成了Colab与Vs代码的链接；) .</p><h2 id="8331" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">关于工作流的一些见解</h2><p id="5bc6" class="pw-post-body-paragraph lv lw hi jx b jy jz ij lx ka kb im ly ji mk ma mb jm ml md me jq mm mg mh kf hb bi translated">现在，您可以从Vs代码终端访问Colab GPU，这为您提供了与在本地机器上使用Vs代码时相同的灵活性。例如，如果你想访问包含你的DL项目的本地存储库中的文件，并使用Colab GPU运行它们，你所需要做的就是<a class="ae kp" href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/creating-a-new-repository" rel="noopener ugc nofollow" target="_blank">在GitHub </a>中创建一个私有存储库并<a class="ae kp" href="https://stackoverflow.com/questions/18842120/git-pushing-to-a-private-repo/18842197" rel="noopener ugc nofollow" target="_blank">推送到它</a>。然后<a class="ae kp" href="https://github.community/t/clone-private-repo/1371" rel="noopener ugc nofollow" target="_blank">可以从Vs代码终端克隆colab机器中的私有回购</a>。</p><p id="45ef" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">这使您可以在colab中访问您的文件，并且您可以使用Vs代码通过它的GUI无缝地在它们之间导航。完成一天的工作后，将您的更改推回GitHub。</p><figure class="kq kr ks kt fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lu"><img src="../Images/18bd014fcf3bb5236547625d19402070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgWAEeRE3lmhIC_sPyYQrw.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">所有可以从Vs代码访问的项目文件和文件夹</figcaption></figure><blockquote class="mn mo mp"><p id="d1bf" class="lv lw mq jx b jy lp ij lx ka lq im ly mr lz ma mb ms mc md me mt mf mg mh kf hb bi translated"><strong class="jx hj">提示</strong></p><p id="6e23" class="lv lw mq jx b jy lp ij lx ka lq im ly mr lz ma mb ms mc md me mt mf mg mh kf hb bi translated">问题1:有时由于互联网不稳定，我们会与Colab断开连接，当我们再次运行笔记本电脑时，Colab会给我们一台不同的机器。</p><p id="c7c5" class="lv lw mq jx b jy lp ij lx ka lq im ly mr lz ma mb ms mc md me mt mf mg mh kf hb bi translated">解决方案:为了确保我们即使在断开连接后也能在同一台机器上着陆，只需在colab中运行一个类似于<strong class="jx hj">的无限循环，同时True : pass </strong>。因为即使在我们断开连接后，colab也不是不活动的，所以我们将重新连接到同一台机器上。按照步骤4 &amp; 5获得一个新的链接，将Vs Code Editor连接回同一台colab机器。</p><p id="c96c" class="lv lw mq jx b jy lp ij lx ka lq im ly mr lz ma mb ms mc md me mt mf mg mh kf hb bi translated">问题2:有时Vs代码会与远程colab机器断开连接，并且无法再使用cloudflare生成的链接与之通信。</p><p id="e0c0" class="lv lw mq jx b jy lp ij lx ka lq im ly mr lz ma mb ms mc md me mt mf mg mh kf hb bi translated">解决方案:按照步骤4和5获得一个新链接，以连接回colab。</p></blockquote><h2 id="bc70" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">在Colab上安装miniconda |设置终端以识别conda |从Colab内访问jupyter笔记本</h2><p id="0925" class="pw-post-body-paragraph lv lw hi jx b jy jz ij lx ka kb im ly ji mk ma mb jm ml md me jq mm mg mh kf hb bi translated">1.要在colab上安装miniconda并激活终端，使其能够识别conda，请运行以下命令:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="94da" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">wget </strong><a class="ae kp" href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank"><strong class="kv hj">https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</strong></a></span><span id="fea0" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">sh Miniconda3-latest-Linux-x86_64.sh -b</strong></span><span id="2f94" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">export PATH="/root/miniconda3/bin:${PATH}"</strong></span><span id="9d26" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">conda init</strong></span></pre><p id="1a70" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">重启终端，conda将为您的colab机器启用。</p><p id="d4e1" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">2.使用以下命令创建并激活一个环境，以便开始您的项目。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="2bdd" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">conda create -y -n envname python=3.7</strong></span><span id="5966" class="ix iy hi kv b fi mi la l lb lc"><strong class="kv hj">conda activate envname</strong></span></pre><p id="fd96" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">3.在安装任何东西之前，确保使用这里提到的<a class="ae kp" href="https://anaconda.org/conda-forge/google-colab" rel="noopener ugc nofollow" target="_blank">命令</a>安装<strong class="jx hj"> google-colab </strong>包。google-colab包是运行jupyter notebook所必需的，并且还安装了一个兼容的<strong class="jx hj"> </strong> ipykernel <strong class="jx hj"> </strong>版本。</p><p id="3a44" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">4.要在Jupyter笔记本中激活conda环境，请运行以下命令。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="0c9f" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">python -m ipykernel install --user --name=envname</strong></span></pre><p id="855f" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">5.现在最后运行下面提到的命令来激活jupyter笔记本。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="bcad" class="ix iy hi kv b fi kz la l lb lc"><strong class="kv hj">jupyter notebook --ip 127.0.0.1 --port 8888</strong></span></pre><p id="e061" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">该命令在IP= 127.0.0.1上托管笔记本，这是必要的，因为jupyter笔记本通常托管的默认IP(127 . 0 . 0 . 0)已经用于托管Google Colab笔记本。Vs代码在后端自动进行端口转发，将colab机器的端口映射到我们的本地机器。</p><p id="9e87" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">现在你应该可以从colab中访问你的jupyter笔记本了；) .</p><p id="4a1e" class="pw-post-body-paragraph lv lw hi jx b jy lp ij lx ka lq im ly ji lz ma mb jm mc md me jq mf mg mh kf hb bi translated">这就是本教程的全部内容。希望它能派上用场，让深度学习变得更加有趣和轻松。请给我的第一个媒体博客点个赞，并对❤.的任何疑问发表评论</p></div></div>    
</body>
</html>