<html>
<head>
<title>Pandas — EDA: Smart Way to replace NaN</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫——EDA:取代NaN的明智之举</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pandas-eda-smart-way-to-replace-nan-554aedc0b5b6?source=collection_archive---------1-----------------------#2022-02-21">https://medium.com/analytics-vidhya/pandas-eda-smart-way-to-replace-nan-554aedc0b5b6?source=collection_archive---------1-----------------------#2022-02-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="45c2" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">在本文中，我展示了一个小技巧来替换数据集中的空值/缺失值。这是EDA的一部分。</h2></div><p id="de0d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">许多分析师习惯于放弃NaN，或者用变量均值或其他统计度量来代替所有NaN。然而，这并不总是正确的方法。</p><p id="d216" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在下面的例子中，我选择了数据集，其中一些列有NaN值，我已经展示了如何用mean替换NaN。等一下！！这不是专栏的全部意思。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/6f9bd6bcdb3812c3ee3af295468cfd60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KpkXv7ofTFiW5Fz2"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">在<a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ki" href="https://unsplash.com/@towfiqu999999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Towfiqu barb huya</a>拍摄的照片</figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="dee6" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里，我只选择了基本工资变量来替换NaN。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kq"><img src="../Images/1fd48b8ef79edeb346df2be1d38d8c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5gaz9NNEbgfIWVJYM8itfA.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图1</figcaption></figure><p id="9453" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，某个特定特征中缺失值的总数如下所示。基薪变量中有609个NaN。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es kr"><img src="../Images/ef03304ef1ff9a6d5eea9a5661b06449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*HDwDuRoiba1UgDRtyhm3nQ.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图2</figcaption></figure><p id="7508" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，一种选择是用变量的平均值66325.44代替NaN。然而，这里我们展示了用mean替换NaN的方法，但是是针对特定的JobTitle。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ks"><img src="../Images/36d15f1986acb9eeff3df8eee4df7787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*ThQQV7lihsNRL8OvW2vGbw.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图3</figcaption></figure><p id="b3b0" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从总经理到出纳员，总共有2154个独特的职位名称。现在，例如，如果我们用平均值[特征平均值]替换总经理基本工资的缺失值，或者用平均值[特征平均值]替换出纳基本工资的缺失值。这将是不公正和虚假的。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kt"><img src="../Images/ecd6d591d84edfd371a45a29eaa16923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o7i35nBduhXTKMil2ISkOQ.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图4</figcaption></figure><p id="0c86" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">因此，在这个方法中，我们展示了用平均值替换缺失值的技术，但是是针对特定的职位。也就是说，总经理的平均值仅适用于基本工资的职称为总经理的缺失值。</p><p id="a195" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">和方法如下所示，</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kq"><img src="../Images/fa13b0e5aafb9bc5b608c77be3d84a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Ggyq9ROLXnEMCgSfN8wxw.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图5</figcaption></figure><p id="c93f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里，在下面的方法中，我们使用了groupby()和transform()函数来替换NaN。</p><pre class="jt ju jv jw fd ku kv kw kx aw ky bi"><span id="f593" class="kz la hh kv b fi lb lc l ld le">sal[‘BasePay’] = sal[‘BasePay’].fillna(sal.groupby(“JobTitle”)[‘BasePay’].transform(‘mean’))</span></pre><p id="72f8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，在用NaN代替BasePay后，您可以看到平均值的明显差异，即从66325.44变为66287.40</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lf"><img src="../Images/29666110f4ee9b1fd658b7d6d41fe08b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*h3TqyVe0j87nRAPyG_Qo6w.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图6</figcaption></figure><p id="1a6f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但是，仍然有8个值丢失！怎么会？</p><p id="f3fd" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这些缺失的值来自数据，而JobTitel中没有提供这些数据(参见第一个屏幕截图)</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lg"><img src="../Images/67fbaa7a926ef1a2cdb4b3706b3adfe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*2dhOvwuORt5Beqz7l00mhg.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图6</figcaption></figure><p id="f7df" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，在这种情况下，我们不是替换丢失的值，而是删除整个行。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es lh"><img src="../Images/941fcb89194283721511fce2192ce4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RvLL-FEhTPoA0R2wBrDfuQ.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx translated">屏幕截图7</figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="4bb8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">完整代码— <a class="ae ki" href="https://github.com/RutvijBhutaiya/NaN-Replacement-/blob/main/NaN%20Replacement.ipynb" rel="noopener ugc nofollow" target="_blank">点击这里</a></p><div class="li lj ez fb lk ll"><a href="https://github.com/RutvijBhutaiya/NaN-Replacement-" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">GitHub-rutvijbhutaya/NaN-替换-</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz kc ll"/></div></div></a></div></div></div>    
</body>
</html>