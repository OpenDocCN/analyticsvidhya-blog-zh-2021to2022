<html>
<head>
<title>Azure Data factory retrieve token from Azure AD using OAUTH 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure数据工厂使用OAUTH 2.0从Azure AD检索令牌</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-data-factory-retrieve-token-from-azure-ad-using-oauth-2-0-9a3ed3f55013?source=collection_archive---------0-----------------------#2021-01-21">https://medium.com/analytics-vidhya/azure-data-factory-retrieve-token-from-azure-ad-using-oauth-2-0-9a3ed3f55013?source=collection_archive---------0-----------------------#2021-01-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="f32c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">使用OAUTH v2.0使用Azure数据工厂从Azure AD获取令牌</h1><h1 id="01f3" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">用例</h1><ul class=""><li id="bfa8" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">能够使用Azure AD验证服务主体访问并获取令牌</li><li id="e2ee" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">令牌通常像每小时或配置的时间一样刷新</li><li id="2f7c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">安全的ADF管道访问可在计划和自动化时获取动态令牌</li></ul><h1 id="345c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">先决条件</h1><ul class=""><li id="dba9" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">Azure帐户</li><li id="cf18" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建资源组</li><li id="7f65" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建存储帐户</li><li id="a631" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建Azure数据工厂</li><li id="3468" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建新管道</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es jz"><img src="../Images/640b25364b38aa31d5ae860953727a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EXx7_t7FK_ktTXON.jpg"/></div></div></figure><ul class=""><li id="4663" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">进入“活动”菜单，然后进入“常规”</li><li id="31b3" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">拖放WEB活动</li><li id="d588" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">获取Azure AD oauth端点的URL</li></ul><pre class="ka kb kc kd fd kq kr ks kt aw ku bi"><span id="161f" class="kv if hh kr b fi kw kx l ky kz"><a class="ae la" href="https://login.microsoftonline.com/tenantid/oauth2/v2.0/token" rel="noopener ugc nofollow" target="_blank">https://login.microsoftonline.com/tenantid/oauth2/v2.0/token</a></span></pre><ul class=""><li id="23db" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">选择方法作为发布</li><li id="cd64" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建标题</li></ul><pre class="ka kb kc kd fd kq kr ks kt aw ku bi"><span id="364f" class="kv if hh kr b fi kw kx l ky kz">Content-Type: application/x-www-form-urlencoded</span></pre><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lb"><img src="../Images/51737fbde5d9995ecfe95735a1577e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XcDduBT4xMG27ZZw.jpg"/></div></div></figure><ul class=""><li id="107f" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">在正文中使用下面的格式。</li><li id="50f5" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">请替换客户id、客户密码、tenantid</li></ul><pre class="ka kb kc kd fd kq kr ks kt aw ku bi"><span id="3159" class="kv if hh kr b fi kw kx l ky kz">tenant=tenantid&amp;client_id=objectid(applicationid)&amp;client_secret=clientsecret&amp;grant_type=client_credentials&amp;scope=https://graph.microsoft.com/.default</span></pre><ul class=""><li id="b99f" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">接下来创建一个变量</li><li id="c491" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">点击画布的空白部分，添加一个新变量</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lc"><img src="../Images/b23e150b1bc3e509e57c77162623ff4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VxZlfubyjyZwvM-w.jpg"/></div></div></figure><ul class=""><li id="fe9a" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">创建一个变量名作为令牌</li><li id="266b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">没有任何拖欠</li><li id="9c76" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">现在拖放设置变量活动</li><li id="4b2c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">输出变量以访问从上次登录获得的令牌</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ld"><img src="../Images/db23a3754bfd67b0fb3a80dfc3cd631e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x_tMHaolFSRbBcFo.jpg"/></div></div></figure><pre class="ka kb kc kd fd kq kr ks kt aw ku bi"><span id="ac73" class="kv if hh kr b fi kw kx l ky kz">@activity('Token').output.access_token</span></pre><ul class=""><li id="e8f0" class="jc jd hh je b jf kl jh km jj kn jl ko jn kp jp jq jr js jt bi translated">全部保存并发布</li><li id="320c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">发布后，单击添加触发器并立即运行</li><li id="5eb8" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">转到监视器并查看更新</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es le"><img src="../Images/ebf9ac08627bf2543d4a33db89c9b8a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*08i9M680HRifsXpi.jpg"/></div></div></figure><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lf"><img src="../Images/a8df6e9fb918b971d879d67fccd8a791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NNnVOr-sJ2WXxrQ7.jpg"/></div></div></figure><pre class="ka kb kc kd fd kq kr ks kt aw ku bi"><span id="286d" class="kv if hh kr b fi kw kx l ky kz">@variables('token')</span></pre></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><p id="c120" class="pw-post-body-paragraph ln lo hh je b jf kl lp lq jh km lr ls jj lt lu lv jl lw lx ly jn lz ma mb jp ha bi translated"><em class="mc">最初发表于</em><a class="ae la" href="https://github.com/balakreshnan/Accenture/blob/master/GDN/ADFAzuerADtoken.md" rel="noopener ugc nofollow" target="_blank"><em class="mc">【https://github.com】</em></a><em class="mc">。</em></p></div></div>    
</body>
</html>