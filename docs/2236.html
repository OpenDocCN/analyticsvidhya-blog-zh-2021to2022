<html>
<head>
<title>Copying in Python (with examples)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中复制(带示例)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/copying-in-python-with-examples-5706c86699e6?source=collection_archive---------10-----------------------#2021-04-13">https://medium.com/analytics-vidhya/copying-in-python-with-examples-5706c86699e6?source=collection_archive---------10-----------------------#2021-04-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="b399" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">理解python中的浅层和深层拷贝</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/97566177a2ebb3ac2a8627383826c8dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mza967FmDV8owd18"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">一张展示随机python代码的图片</figcaption></figure><p id="3485" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">当我在python上工作时，我试图通过使用' = '操作符将一个列表复制到一个新变量中。在做了一些改变后，我知道这不是我们在python中的正确做法。</p><p id="27ea" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">几秒钟后，我浏览了多篇文章，理解了用python复制数据时使用的两个术语:<strong class="jo hi"> <em class="ki">浅层和深层复制。</em> </strong></p><p id="f940" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">=操作符并不复制对象，它只是创建一个新的变量并共享原始变量的引用。</p><p id="2d77" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi">注意</strong>:下面使用的所有例子都取自<a class="ae kj" href="https://www.python-engineer.com/courses/advancedpython/20-copy/" rel="noopener ugc nofollow" target="_blank"> python-engineer </a>和<a class="ae kj" href="https://www.programiz.com/python-programming/shallow-deep-copy" rel="noopener ugc nofollow" target="_blank"> programiz </a>。</p><pre class="ix iy iz ja fd kk kl km kn aw ko bi"><span id="f504" class="kp kq hh kl b fi kr ks l kt ku">list_a = [1, 2, 3, 4, 5]<br/>list_b = list_a<br/><br/>list_a[0] = -10</span><span id="06a6" class="kp kq hh kl b fi kv ks l kt ku">print(list_a)<br/>print(list_b)</span></pre><p id="6ef2" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">我们一定想知道<strong class="jo hi"> print(list_a) </strong>将<em class="ki">输出</em> [-10，2，3，4，5]，因为我们对list_a[0] = -10做了更改，所以1被替换为-10。那么我们是绝对正确的。</p><p id="8a0b" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">但另一方面，如果我们也在想<strong class="jo hi"> print(list_b) </strong>会<em class="ki">输出</em>【1，2，3，4，5】那么这次我们就完全错了。</p><p id="5bf9" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这里所发生的是在做list_b = list_a，它只创建了一个新的变量与<em class="ki">相同的引用</em>。因此，修改一个会影响另一个。两者都将<em class="ki">输出</em>与[-10，2，3，4，5]相同的值。</p></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><p id="9416" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">实际上，有时您可能希望保持原始值不变，只修改新值，反之亦然。在Python中，有两种创建副本的方法:</p><ol class=""><li id="d002" class="ld le hh jo b jp jq js jt jv lf jz lg kd lh kh li lj lk ll bi translated">浅拷贝</li><li id="9a06" class="ld le hh jo b jp lm js ln jv lo jz lp kd lq kh li lj lk ll bi translated">深层拷贝</li></ol><p id="c10d" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">为了使这些复制工作，我们使用了<code class="du lr ls lt kl b">copy</code>模块。</p><p id="c313" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">使用这个模块非常简单。</p><pre class="ix iy iz ja fd kk kl km kn aw ko bi"><span id="f48d" class="kp kq hh kl b fi kr ks l kt ku">import copy</span><span id="047a" class="kp kq hh kl b fi kv ks l kt ku">copy.copy(x) # for shallow copy<br/>copy.deepcopy(x) # for deep copy</span></pre><p id="3db5" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi">就是这样！</strong></p><p id="b8cf" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">让我们用几个例子来理解一下。</p><ul class=""><li id="a23a" class="ld le hh jo b jp jq js jt jv lf jz lg kd lh kh lu lj lk ll bi translated"><strong class="jo hi">浅拷贝:</strong>浅拷贝创建了一个新的对象，它存储了原始元素的引用。所以，浅层拷贝不会创建嵌套对象的拷贝，相反，它只是拷贝嵌套对象的引用。这意味着复制过程本身不会递归或创建嵌套对象的副本。</li></ul><p id="2b24" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">我的list_a只有1级深，因此改变list_b不会影响list_a。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lv"><img src="../Images/674f5cd39b7cf05154f97709cb2c28e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D1iOkvnDyiCDcJfSmR_V1w.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">浅层复制— 1级深度</figcaption></figure><p id="8838" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">但是对于嵌套对象，在第2层或更深的层上修改会影响其他层！</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lw"><img src="../Images/ce4d1314e22809f4b98792e2dcd889ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNZ6-LgXehjYoEJFySnCCw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">浅复制— 2级或更多级深</figcaption></figure><ul class=""><li id="934c" class="ld le hh jo b jp jq js jt jv lf jz lg kd lh kh lu lj lk ll bi translated"><strong class="jo hi">深度复制:</strong>深度复制创建一个新对象，并递归地添加原始元素中存在的嵌套对象的副本。</li></ul><p id="9412" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">深层副本创建原始对象及其所有嵌套对象的独立副本。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lx"><img src="../Images/c54ec8d48383af17058dd1e17e101f2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZ2x-BLu56C1MOw1pr-ECg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">深度复制</figcaption></figure><p id="7d9c" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">如果你在评论中遇到任何困难，请告诉我。</p></div></div>    
</body>
</html>