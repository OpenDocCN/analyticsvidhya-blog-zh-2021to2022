<html>
<head>
<title>Compiling Phd Opportunities using python and sending it to my email</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python汇编博士机会并将其发送到我的电子邮件</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/compiling-phd-opportunities-using-python-and-sending-it-to-my-email-8a5f253db0c9?source=collection_archive---------5-----------------------#2021-05-26">https://medium.com/analytics-vidhya/compiling-phd-opportunities-using-python-and-sending-it-to-my-email-8a5f253db0c9?source=collection_archive---------5-----------------------#2021-05-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/></div><div class="ab cl ie if go ig" role="separator"><span class="ih bw bk ii ij ik"/><span class="ih bw bk ii ij ik"/><span class="ih bw bk ii ij"/></div><div class="ha hb hc hd he"><p id="5289" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在本教程中，我们将编写一个python脚本来抓取findphd.com某个特定领域的博士机会，将其编译成报告并发送到我的电子邮件中。</p></div><div class="ab cl ie if go ig" role="separator"><span class="ih bw bk ii ij ik"/><span class="ih bw bk ii ij ik"/><span class="ih bw bk ii ij"/></div><div class="ha hb hc hd he"><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jj"><img src="../Images/fe98587539939feac7efb057262d73a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jDk3IXjpTeb2nrD2"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated">安德烈·亨特在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="9202" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="f6cb" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">我最近完成了我的机械工程学士学位，我希望进入研究生院学习机器人或自主系统。我生活的一部分。</p><p id="aaf7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我生活的另一部分是我喜欢写代码，所以我在看使用python的网络编程教程，他们教我使用python发送电子邮件。</p><p id="58e3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">所以我想，为什么不在网上搜索一下，看看机器人和自主系统领域目前的博士机会，然后写一份报告，发到我的邮箱里。它可以像一件日常的事情。</p><p id="47ad" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">因此，在本教程中，我们将构建一个脚本来抓取机器人和自主系统领域的博士机会，将其编译为报告，然后发送到我的邮箱。</strong></p><p id="8ea1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我正在使用这个特殊的项目<strong class="in hi">findaphd.com</strong>网站。我发现这个网站更有前途，当我搜索我的研究生院学习的特定选择时。</p><p id="0f41" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">虽然如果你像我一样积极地寻找奖学金和资助，你会订阅无数的电子邮件给你更新。但这只是针对你的区域和眼睛，所以没有过滤。</p><h2 id="876f" class="ld kb hh bd kc le lf lg kg lh li lj kk iw lk ll ko ja lm ln ks je lo lp kw lq bi translated">背景研究</h2><p id="6de1" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">这里是findaphd.com如何寻找任何不熟悉它的人，它有一个搜索框，你在里面输入你的研究关键词，它会显示结果。</p><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lr"><img src="../Images/1eb225b587918454a49e363103ea8dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FZo7nGDw51L4FE3KFLapg.png"/></div></div></figure><p id="74d5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">做了一些初步研究，我发现了这些:</p><ol class=""><li id="f403" class="ls lt hh in b io ip is it iw lu ja lv je lw ji lx ly lz ma bi translated">当你搜索一个特定的关键词和非欧盟学生(因为我是非欧盟学生)时的网址看起来是这样的:</li></ol><pre class="jk jl jm jn fd mb mc md me aw mf bi"><span id="ccd7" class="ld kb hh mc b fi mg mh l mi mj">https://www.findaphd.com/phds/non-eu-students/?01w0&amp;Keywords=autonomous&amp;PG=4</span></pre><p id="90e2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">术语是这样的，关键字搜索值被附加到查询的Keywords={your keyword}处，并且在这种情况下查询PG=4表示页码4。因此，我可以抓取该网站使用这个网址为我的特定关键字搜索</p><p id="5ee7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">2.稍微检查了一下网页，发现每个结果都在有<strong class="in hi"> resultsRow的class属性。</strong>虽然我们还需要做进一步的清理才能得到标题、大学和描述。</p><p id="31f1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> Python包我们将使用</strong> : <strong class="in hi">请求</strong>(用于发出url请求)<strong class="in hi"> beautifulsoup4 </strong>(用于抓取)<strong class="in hi"> smtplib </strong>(用于设置smtp服务器)<strong class="in hi"> email </strong>(用于编写要发送的电子邮件)</p><h2 id="1f45" class="ld kb hh bd kc le lf lg kg lh li lj kk iw lk ll ko ja lm ln ks je lo lp kw lq bi translated">我们走吧。</h2><h1 id="9905" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第一步:网络抓取</h1><p id="bb97" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">这是我们将要抓取的url的结构。</p><pre class="jk jl jm jn fd mb mc md me aw mf bi"><span id="e922" class="ld kb hh mc b fi mg mh l mi mj">https://www.findaphd.com/phds/non-eu-students/?01w0&amp;Keywords={keyword_param}&amp;PG={pageNumber_param}</span></pre><p id="48e5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> keyword_param </strong>:是我们希望找到博士机会的关键字。在我的例子中<strong class="in hi">自治</strong>显示了更多的搜索。</p><p id="7ede" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> pageNumber_param </strong>:是从1开始的页码，根据可用的搜索结果增长。知道哪个页面在范围之内是很棘手的，但是我们稍后会解决它。现在我们默认<strong class="in hi"> pageNumber_param </strong>为1。</p><h2 id="f543" class="ld kb hh bd kc le lf lg kg lh li lj kk iw lk ll ko ja lm ln ks je lo lp kw lq bi translated">我们在做什么？</h2><p id="ccac" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">请求url并使用Beautiful soup解析它。然后使用web浏览器的检查工具，我们得到了<em class="mk">标题</em>、<em class="mk">描述</em>、<em class="mk">大学</em>和<em class="mk">链接以阅读更多内容</em>。使用我们已经获得的名字，我们使用漂亮的soup api来为我们的代码获得那些值。</p><p id="b815" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这是代码:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="3bf6" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第5–20行</strong>:请求url并解析到BeautifulSoup。第5行的参数化url和第6、7行的参数。标题是为了帮助我们像真正的客户端(例如web浏览器)一样发出请求。</p><p id="1c60" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第20 — 33行</strong>:根据css类名和html属性选择不同的分部。在第32行，我意识到如果没有主机url(<strong class="in hi">https://www.findaphd.com</strong>)，read more的URL链接是不完整的，因此是第33行。</p><p id="4bbc" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第35–36行</strong>:使用了从第3行导入的类I，这是一种使它更简洁的方法，并将其附加到机会列表中——变量。这个类看起来是这样的:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="c89f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">就个人而言，我会把它放在一个名为<strong class="in hi"> generate_opportunities </strong>的函数中，这个函数的类名是<strong class="in hi"> PhdBot </strong>。所以它看起来有点像这样:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="bafb" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">所以我们现在已经完成了机会方面的工作。</p><h1 id="4dea" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤二:构建HTML电子邮件</h1><p id="9c87" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">我们将构建发送给我们的HTML电子邮件。请记住，HTML电子邮件将包含一个项目名称列表的报告，大学，描述和链接阅读更多。</p><p id="ae2f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请注意，纯文本邮件是一种选择，但如果可以的话，我真的很喜欢让事情看起来很美。</p><p id="8e00" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">因此，我寻找了一个简单的电子邮件模板来使用，并在使用它来构造要发送给我们的电子邮件之前进行了测试。</p><p id="5c9b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">以下是电子邮件模板:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="0bdf" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> Ps:我已经从这里显示的代码中移除了css样式，完整的html文件可以在这里</strong><a class="ae jz" href="https://github.com/mrsimi/phd_opportunities/blob/master/index.html" rel="noopener ugc nofollow" target="_blank"><strong class="in hi"/></a><strong class="in hi">找到。</strong></p><p id="be3c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="mk">原模板是codepen上的</em> <a class="ae jz" href="https://codepen.io/reallygoodemails/pen/PpLpEK" rel="noopener ugc nofollow" target="_blank"> <em class="mk">这里的</em> </a> <em class="mk">。</em></p><p id="97a8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我将用我从第一步的机会列表中生成的报告替换<strong class="in hi"> email_to_replace </strong>文本。</p><p id="f038" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们已经有了一个模板，现在让我们将机会列表转换成html内容。</p><p id="652d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在这里，向PhdBot类添加一个函数:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="0d95" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">基本上，我们正在从机会列表中的每一项构建一个<strong class="in hi"> div </strong> (html语法)。</p><p id="0214" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第5–11行</strong>:我们用所有的css样式和占位符定义了div的结构，用于在python中的字符串格式中插入变量。</p><p id="4cf2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第12行</strong>:我们使用python中的字符串格式插入标题、大学、描述和链接。然后我们把它们连接在一起。变量<strong class="in hi"> html_content </strong>帮助我们做到了这一点。</p><p id="3441" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第15行</strong>:我们正在返回内容，并使用replace函数清除一些转义序列。</p><p id="4fca" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第17–18行</strong>:我们正在读取html模板(index.html)</p><p id="7ad3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第20–21行</strong>:我们正在用整个生成的正文替换'<strong class="in hi"> email_to_replace </strong>'值。</p><h2 id="8313" class="ld kb hh bd kc le lf lg kg lh li lj kk iw lk ll ko ja lm ln ks je lo lp kw lq bi translated">瞧，我们有了要发送的电子邮件！！！</h2><p id="434c" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">接下来…</p><h1 id="dcde" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤三:发送电子邮件</h1><p id="3714" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">为此，我们需要访问一个电子邮件帐户来发送邮件。密码和用户名。正在使用的库是<strong class="in hi"> smtplib。在我的例子中，我为这个特殊的用例设置了一个gmail。这将是发件人的电子邮件，我的主要电子邮件将是收件人的电子邮件。</strong></p><p id="cec8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">但是有一点。若要允许脚本从一个电子邮件帐户向另一个帐户发送电子邮件，您需要打开“允许访问不安全的应用程序”。于是在登录发件人的邮箱账户时使用了这个链接【https://www.google.com/settings/security/lesssecureapps】<a class="ae jz" href="https://www.google.com/settings/security/lesssecureapps" rel="noopener ugc nofollow" target="_blank"><strong class="in hi"/></a></p><p id="ac2d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">代码:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="874a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这是我们添加到<strong class="in hi"> PhdBot </strong>类中的一个方法。</p><p id="7ee9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">该函数接受收件人的电子邮件、主题和邮件正文。</p><p id="9ad1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">第6 -9行:我们设置主题，from和to</p><p id="4e93" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">第15行</strong>:我们将MIME文本设置为一个html对象，然后将它附加到<strong class="in hi">第17行</strong></p><p id="7b25" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">然后在<strong class="in hi">第20–25行</strong>:我们使用ssl通过安全连接将电子邮件从发件人发送到收件人。</p><p id="ca40" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你已经达到这个阶段，恭喜你。</p><p id="7e06" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">尝试立即发送电子邮件至。你的<strong class="in hi"> main.py </strong>应该是这样的:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="0415" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在这一点上，我们</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="86b4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这里有一个<a class="ae jz" href="https://github.com/mrsimi/phd_opportunities.git" rel="noopener ugc nofollow" target="_blank">链接</a>[【https://github.com/mrsimi/phd_opportunities.git】]到完整的代码。</p><h1 id="0bff" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="7fb6" class="pw-post-body-paragraph il im hh in b io ky iq ir is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ha bi translated">在本教程中，我们已经成功地抓取了一个网站，挑选出我们想要的各个部分，将其编译成电子邮件格式并发送出去。这一点我们可以扩展到其他几个领域。我们可以选择每个单独的部分，并在此基础上进行构建。开心就好，把它拆开，留下评论或问题。</p><p id="b33f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">编码快乐！！</p></div></div>    
</body>
</html>