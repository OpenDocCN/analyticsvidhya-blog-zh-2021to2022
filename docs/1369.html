<html>
<head>
<title>Access Fitbit Data via API through Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Postman经由API访问Fitbit数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/access-fitbit-data-via-api-through-postman-5730e2dc2890?source=collection_archive---------1-----------------------#2021-02-26">https://medium.com/analytics-vidhya/access-fitbit-data-via-api-through-postman-5730e2dc2890?source=collection_archive---------1-----------------------#2021-02-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e4e5909875133d26b4cdcc72032a86f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MyrKUvX9iW0IJ_zEWf9WaA.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">亚当·伯基特在<a class="ae it" href="https://unsplash.com/s/photos/fitbit?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a363" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于那些对通过API轻松访问Fitbit数据感兴趣的人来说，本指南是为你准备的。为了简单起见，我在<a class="ae it" href="https://www.postman.com" rel="noopener ugc nofollow" target="_blank"> Postman中构建了一个集合，这是一个API开发的协作平台</a>。这使得在完成最初的几个步骤后访问您的数据变得非常容易。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h2 id="a354" class="jz ka hh bd kb kc kd ke kf kg kh ki kj jf kk kl km jj kn ko kp jn kq kr ks kt bi translated">步骤1-创建一个Fitbit帐户</h2><p id="3bb5" class="pw-post-body-paragraph iu iv hh iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr ha bi translated">在<a class="ae it" href="http://accounts.fitbit.com" rel="noopener ugc nofollow" target="_blank">accounts.fitbit.com</a>创建一个Fitbit账户。</p><h2 id="0d54" class="jz ka hh bd kb kc kd ke kf kg kh ki kj jf kk kl km jj kn ko kp jn kq kr ks kt bi translated">步骤2 —注册占位符应用程序</h2><p id="de23" class="pw-post-body-paragraph iu iv hh iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr ha bi translated">一旦你创建了你的Fitbit账户，登录<a class="ae it" href="http://dev.fitbit.com" rel="noopener ugc nofollow" target="_blank">dev.fitbit.com</a>并“注册一个应用”。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kz"><img src="../Images/d673e0f4365a455b5cab96fb97c85f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJeDugeBQZxcoatfnFcSnA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">将鼠标悬停在“管理”选项卡上，然后单击“注册应用程序”按钮。</figcaption></figure><p id="1328" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">你不需要有一个应用程序</strong>，你可以为需要注册的字段插入虚拟数据，在下面的例子中，我用我的网站<a class="ae it" href="https://www.anthonywestmoreeland.com" rel="noopener ugc nofollow" target="_blank">https://www.anthonywestmoreland.com</a>为任何网址字段。<strong class="iw hi">唯一的要求是在“回调URL”字段中插入“</strong><a class="ae it" href="http://localhost" rel="noopener ugc nofollow" target="_blank"><strong class="iw hi">http://localhost</strong></a><strong class="iw hi">”。</strong></p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es le"><img src="../Images/4a2290496e98282886412b02f3438296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ikIFGJ1ZIzQtYwclKN4vmQ.png"/></div></div></figure><p id="718e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">保存您的新应用程序，并<strong class="iw hi">保存您在此步骤中创建的客户端ID和密码</strong>。</p><h2 id="2a78" class="jz ka hh bd kb kc kd ke kf kg kh ki kj jf kk kl km jj kn ko kp jn kq kr ks kt bi translated">步骤3 — Base64编码您的客户端ID和密码</h2><p id="1eda" class="pw-post-body-paragraph iu iv hh iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr ha bi translated">Fitbit API身份验证流程使用基本身份验证来访问您数据。为了简单起见，让我们跳过所有这一切意味着什么，并获得编码的令牌。</p><p id="2191" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用步骤2中的客户机ID和客户机密码，用冒号将凭证组合起来；所以最终结果将是clientId:clientSecret。</p><blockquote class="lf"><p id="77f4" class="lg lh hh bd li lj lk ll lm ln lo jr dx translated">将凭据与冒号(clientId:clientSecret)结合起来，并使用base64编码器来创建您的基本身份验证令牌。</p></blockquote><p id="ff37" class="pw-post-body-paragraph iu iv hh iw b ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn lt jp jq jr ha bi translated">去<a class="ae it" href="https://www.base64encode.org" rel="noopener ugc nofollow" target="_blank">https://www.base64encode.org</a>，粘贴你的综合凭证，点击编码按钮。您将需要保留这个base64编码的令牌来进行api请求。</p><h2 id="50ed" class="jz ka hh bd kb kc kd ke kf kg kh ki kj jf kk kl km jj kn ko kp jn kq kr ks kt bi translated">步骤4-获取您的Fitbit代码</h2><p id="df5c" class="pw-post-body-paragraph iu iv hh iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr ha bi translated">Fitbit认证流程也需要一个代码来访问您的数据。您需要您的客户ID来访问此代码。复制以下URL并在您看到INSERT_CLIENT_ID_HERE 的位置插入您的clientId，然后粘贴到您之前登录Fitbit帐户的同一浏览器的地址栏中。</p><blockquote class="lu lv lw"><p id="b8f8" class="iu iv lx iw b ix iy iz ja jb jc jd je ly jg jh ji lz jk jl jm ma jo jp jq jr ha bi translated">【https://www.fitbit.com/oauth2/authorize?response_type=code】&amp;CLIENT _ ID =<strong class="iw hi">INSERT _ CLIENT _ ID _ HERE</strong>T31】redirect _ uri = http://localhost&amp;scope = activity % 20 nutrition % 20 heart rate % 20 location % 20 nutrition % 20 profile % 20 settings % 20 sleep % 20 social % 20 weight</p></blockquote><p id="b5b8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦你用你的代码导航到URL，并按下回车键，它可能会返回“它工作了！”在网页上(Chrome)或者不在网页上(Safari)。你需要的是导航栏中的新网址，应该是这样的:<a class="ae it" href="http://localhost/?code=a50bf0001d5dd7af04c0229c7052f760a9b1bd45#_=_" rel="noopener ugc nofollow" target="_blank"> http://localhost/？code = a 50 BF 0001d 5d 7 af 04 c 0229 c 7052 f 760 a 9 B1 BD 45 # _ = _</a>。</p><p id="d9e9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">你会需要那个在=之后开始，在#之前结束的代码，所以从上面来看，代码是:</strong><a class="ae it" href="http://localhost/?code=a50bf0001d5dd7af04c0229c7052f760a9b1bd45#_=_" rel="noopener ugc nofollow" target="_blank"><strong class="iw hi">a 50 BF 0001 D5 DD 7 af 04 c 0229 c 7052 f 760 a 9 B1 BD 45</strong></a><strong class="iw hi">。</strong></p><h2 id="0f26" class="jz ka hh bd kb kc kd ke kf kg kh ki kj jf kk kl km jj kn ko kp jn kq kr ks kt bi translated">步骤5-使用Postman访问您的数据</h2><p id="edd7" class="pw-post-body-paragraph iu iv hh iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr ha bi translated">一旦您有了base64编码的凭证<em class="lx">(步骤3) </em>和Fitbit代码<em class="lx">(步骤4) </em>，您就可以使用<a class="ae it" href="https://www.postman.com" rel="noopener ugc nofollow" target="_blank"> Postman </a>，一个用于API开发的协作平台。</p><p id="18b3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">复制下面的链接来导入我的Postman Fitbit Web API集合，<a class="ae it" href="https://learning.postman.com/docs/getting-started/importing-and-exporting-data/#converting-postman-collections-from-v1-to-v2" rel="noopener ugc nofollow" target="_blank">在这里你会找到一个通过链接导入集合</a>的操作指南。</p><blockquote class="lu lv lw"><p id="8369" class="iu iv lx iw b ix iy iz ja jb jc jd je ly jg jh ji lz jk jl jm ma jo jp jq jr ha bi translated"><a class="ae it" href="https://www.getpostman.com/collections/e1a89c9ea43d6b280410" rel="noopener ugc nofollow" target="_blank">https://www.getpostman.com/collections/e1a89c9ea43d6b280410</a></p></blockquote><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mb"><img src="../Images/02c893d96253a39c4270a9156f65e8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFpP6gA8aZ3pu8tv9fT3TA.png"/></div></div></figure><p id="26fc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦你打开了集合，你将需要<a class="ae it" href="https://learning.postman.com/docs/sending-requests/variables/" rel="noopener ugc nofollow" target="_blank">设置全局环境变量</a>。<strong class="iw hi">将您的代码插入合适的fitbit_code和base64_Id_Secret当前值字段并保存。</strong></p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mc"><img src="../Images/4c825a11945f1e231ddc67514b927999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1Ka5hqwh2u6fy1jWCoCLQ.png"/></div></div></figure><p id="2324" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">保存好新的全局环境变量后，打开集合底部的“Fitbit授权码授权流”并按下发送按钮。</strong>响应将是200 OK，您将在响应正文的Postman底部看到“access_token”、“refresh_token”和其他返回的参数。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es md"><img src="../Images/742f1872e5491b5a4f9c68a2c44b61b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f84WoFLjC6gVfq8Huko_JQ.png"/></div></div></figure><p id="7b6e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个集合自动将access_token和refresh_token保存到全局环境变量中。完成后，您将能够对不同的Fitbit API端点进行后续调用。</p><p id="bafb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="lx">请注意有许多全球环境变量。每个</em> <a class="ae it" href="https://dev.fitbit.com/build/reference/web-api/explore/" rel="noopener ugc nofollow" target="_blank"> <em class="lx"> Fitbit API端点</em> </a> <em class="lx">都有唯一的参数来过滤返回的数据。您可以轻松地更改全局环境变量并保存以正确过滤您的数据。</em></p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="ac95" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最后，默认情况下，access_token持续8小时。如果您的工作时间超过这个时间，您可以返回到“Fitbit授权码授权流”，在查询参数中将grant_type更改为refresh_token，并在value字段中输入{{refresh_token}}以刷新您的访问。</p><p id="f415" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">希望这有助于其他人通过API访问他们的Fitbit数据，而不必拼凑一个解决方案！</p></div></div>    
</body>
</html>