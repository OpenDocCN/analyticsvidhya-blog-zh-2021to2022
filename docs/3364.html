<html>
<head>
<title>Troubleshooting virtual environment setup with Windows 10 and VSCode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Windows 10和VSCode对虚拟环境设置进行故障排除</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/troubleshooting-virtual-environment-setup-with-windows-10-and-vscode-fdd99fdf4d66?source=collection_archive---------7-----------------------#2021-06-27">https://medium.com/analytics-vidhya/troubleshooting-virtual-environment-setup-with-windows-10-and-vscode-fdd99fdf4d66?source=collection_archive---------7-----------------------#2021-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最近我的主电脑(Linux)坏了。所以，与此同时，我使用了我另一台安装了VSCode的电脑(Windows 10)。老实说，我在Windows中使用VSCode在虚拟环境中构建应用程序时遇到了困难。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6c9a72356d0c9ab23a84be6097dcaa7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qsahpt2kqQ6e8iM5lqfZNg.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">亚历克斯·丘马克在<a class="ae jt" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="41fc" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">什么是虚拟环境？</strong></h1><p id="b43b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">可能你们大多数人已经知道什么是虚拟环境，但是对于那些不知道的人来说。下面是一个快速且有希望清晰的解释。python虚拟环境是一个隔离的环境，其中您使用与其余应用程序隔离的解释器、库和脚本。</p><p id="13c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想更深入的可以查看这篇<a class="ae jt" href="https://towardsdatascience.com/why-you-should-use-a-virtual-environment-for-every-python-project-c17dab3b0fd0" rel="noopener" target="_blank">帖</a>。</p><h1 id="7d84" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">让我们把手弄脏吧！！</h1><p id="cd63" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在Windows 10中创建虚拟环境与Linux发行版略有不同。</p><p id="d047" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我将创建一个测试文件夹，我将在其中构建我的虚拟环境。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="dd09" class="lc jv hi ky b fi ld le l lf lg">C:\Users\Amin\Desktop&gt;mkdir Test &amp;&amp; cd Test</span></pre><p id="bebb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们建立虚拟环境。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="5c19" class="lc jv hi ky b fi ld le l lf lg">C:\Users\Amin\Desktop\Test&gt;python -m venv .env</span></pre><p id="6e58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您输入。您应该会看到类似这样的内容。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="dbce" class="lc jv hi ky b fi ld le l lf lg">C:\Users\Amin\Desktop\Test&gt;cd .env<br/>Directorio de C:\Users\Amin\Desktop\Test\.env</span><span id="5264" class="lc jv hi ky b fi lh le l lf lg">25/06/2021  22:12    &lt;DIR&gt;          .<br/>25/06/2021  22:12    &lt;DIR&gt;          ..<br/>25/06/2021  22:12    &lt;DIR&gt;          Include<br/>25/06/2021  22:12    &lt;DIR&gt;          Lib<br/>25/06/2021  22:12                95 pyvenv.cfg<br/>25/06/2021  22:13    &lt;DIR&gt;          Scripts<br/>               1 archivos             95 bytes<br/>               5 dirs  722.514.280.448 bytes libres</span></pre><p id="fcd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们必须激活虚拟环境。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="7108" class="lc jv hi ky b fi ld le l lf lg">C:\Users\Amin\Desktop\Test\.env&gt; cd ..<br/>C:\Users\Amin\Desktop\Test&gt; .env\Scripts\activate.bat</span></pre><p id="0846" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦虚拟环境被激活，我们安装的所有软件包都将安装在虚拟环境中。</p><p id="0813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是事情开始变得混乱的地方。</p><p id="c80c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我尝试pip安装pandas时，我得到以下错误:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/498e6a16ee585364e223c9f423cb6e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_a-qgewuY8yrws-kQwl7w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">自己做的截图</figcaption></figure><p id="1af5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过谷歌导航，我找到了这两个解决方案:</p><ol class=""><li id="a346" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">添加以下环境路径:</li></ol><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="40ec" class="lc jv hi ky b fi ld le l lf lg">D:\Anaconda3 <br/>D:\Anaconda3\Scripts<br/>D:\Anaconda3\Library\bin</span></pre><p id="efd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不知道如何添加环境路径，请查看<a class="ae jt" href="https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/" rel="noopener ugc nofollow" target="_blank"> post </a>。</p><p id="24d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.更新pip。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="0201" class="lc jv hi ky b fi ld le l lf lg">python -m pip install --upgrade pip</span></pre><p id="6a49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我添加了环境路径，但它不起作用。然后我试着从Windows cmd更新pip包，也不行。</p><p id="bc55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后做了一点试验，我找到了问题的解决方案，我从Anaconda提示符下更新了pip包:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="1d42" class="lc jv hi ky b fi ld le l lf lg">C:\Users\Amin\Desktop\Test&gt;.env\Scripts\activate.bat<br/>(.env)C:\Users\Amin\Desktop\Test&gt;cd .env<br/>(.env)C:\Users\Amin\Desktop\Test\.env&gt;cd Scripts<br/>(.env)C:\Users\Amin\Desktop\Test\.env\Scripts&gt;python.exe -m pip install --upgrade pip</span></pre><p id="640d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它修复了我的错误，之后我就可以安装熊猫了。</p><p id="5549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">构建了虚拟环境并安装了我需要的所有包之后，是时候编码了。我喜欢从终端打开VSCode，这样它会打开你正在处理的文件夹。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="ff3c" class="lc jv hi ky b fi ld le l lf lg">(.env) C:\Users\Amin\Desktop\Test&gt;code .<br/></span></pre><p id="fedc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以在项目文件夹中创建python文件。</p><p id="b342" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时，VSCode会使用不同于虚拟环境中保存的python解释器。要获得正确的解释器，按Ctrl+Shift+p，命令Pallert将打开。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/5964cd00548c0634bd3e799992d7313f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xOgzSWwYpeGvxcOZHU24zA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">自己做的截图</figcaption></figure><p id="bd31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后点击<em class="lt">“Python:Select Interpreter”</em>，会显示解释器列表。您必须在虚拟环境文件夹(在我们的例子中是. env)中查找包含该路由的文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/706ec65757b39fec6a0e65ae28e2a53c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Saq8VIXFXkXpigOGSC-qg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">自己做的截图</figcaption></figure><p id="6411" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你找不到它(像我一样)或者你想使用位于另一个文件夹中的虚拟环境，你将不得不手动添加python解释器路径。</p><p id="dd1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按Ctrl+Shift+p，然后在搜索栏上输入<em class="lt">‘工作空间’</em>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/0252b3a1737e89ba3118a12d52ebc529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnPAPhd5JOezsiUIs69Dpg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">自己做的截图</figcaption></figure><p id="cd68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<em class="lt">“打开工作区设置(JSON)”</em>。它将打开一个JSON文件，然后编写以下内容:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="7203" class="lc jv hi ky b fi ld le l lf lg">"python.defaultInterpreterPath": ".env/Scripts/python.exe"</span></pre><p id="eb24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编辑:以前是<em class="lt"> "python.pythonPath "，</em>，现在被替换为<em class="lt">" python . defaultinterpreterpath "</em>:</p><p id="e031" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> <em class="lt">虚拟环境名称</em> </strong>中输入你分配给你的虚拟环境的名称。</p><p id="ea44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您已经准备好在虚拟环境中构建您的应用程序了。</p><h1 id="b679" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">使其可复制</strong></h1><p id="fa86" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当您构建了您的应用程序后，您可以使用下面的命令来获取requirement.txt文件。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="f7a4" class="lc jv hi ky b fi ld le l lf lg">(.env) C:\Users\Amin\Desktop\Test&gt;pip freeze &gt; requirements.txt</span></pre><p id="1b93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它将保存您所有的项目依赖项，所以下次您需要重新创建您的环境时，您只需运行以下命令。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="c655" class="lc jv hi ky b fi ld le l lf lg">pip install -r requirements.txt</span></pre><p id="b354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它将安装您的所有项目需求。</p></div></div>    
</body>
</html>