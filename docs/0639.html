<html>
<head>
<title>Create your own newsletter from any source with python — Part 1 (Web Scraping)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python从任何来源创建自己的时事通讯——第1部分(网络搜集)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-your-own-newsletter-from-any-source-with-python-part-1-web-scraping-445e6c9e1d75?source=collection_archive---------10-----------------------#2021-01-25">https://medium.com/analytics-vidhya/create-your-own-newsletter-from-any-source-with-python-part-1-web-scraping-445e6c9e1d75?source=collection_archive---------10-----------------------#2021-01-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="dfbd" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">时事通讯有时很烦人，但也很有用:想象一下，如果你能在一封你控制的电子邮件中获得你真正关心的任何事情的更新。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6a34ac48ab0f1dd62a7c5e2a68d7ecfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iu4Fc7_3E_V1HOqZDxCy1g.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">由<a class="ae jn" href="https://unsplash.com/@tinamosquito?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·特里普科维奇</a>在<a class="ae jn" href="https://unsplash.com/s/photos/post?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6f79" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这正是这个分成两部分的小教程的目的:在第一部分中，我们将学习如何制作一个网页抓取器，从任何网站上抓取和过滤信息。在<strong class="jq hj">第2部分</strong>中，我们将了解如何使用收集到的数据创建时事通讯，并通过电子邮件发送给你自己或你的订户/朋友。</p><blockquote class="kk kl km"><p id="99dc" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">如果你正在寻找本教程的第2部分，请点击链接:<a class="ae jn" rel="noopener" href="/analytics-vidhya/create-your-own-newsletter-from-any-source-with-python-part-2-the-newsletter-ed21cd47c788">https://medium . com/analytics-vid hya/create-your-own-newsletter-from-any-source-with-python-part-2-the-newsletter-ed 21 CD 47 c 788</a></p><p id="f401" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">完整的代码可以在这里找到:<a class="ae jn" href="https://github.com/fabiom91/python-newsletter_tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/fabiom91/python-newsletter_tutorial</a></p></blockquote><h1 id="765a" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">卷筒纸刮刀</h1><p id="56b2" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">对于web scraper，我们将使用两个非常有用的Python库:<code class="du lo lp lq lr b">requests</code>和<code class="du lo lp lq lr b">beautifulsoup</code>:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="ab04" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们继续之前，我们必须看看我们从目标网站上搜集到了什么，在我的例子中:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/cc8f0ed327d674d0bda5abc9f4da8ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPvUpaCOqxJP_UzRqNBSjw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">我的头要爆炸了。🤯</figcaption></figure><p id="7745" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我知道，它看起来一点也不漂亮，但请记住，一旦你提取了你需要的数据，你就不必再看它了。在我的例子中，我已经从上面的截图中看出，一篇文章的链接包含了它的标题。</p><p id="1089" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">假设我想获得所有关于<em class="kn">隐私的文章。</em>我们可以试试这个:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/68c820e9e27998b2a2c7899700a53efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsLoaMTgtA7NUqI-UPpu4g.png"/></div></div></figure><p id="95b4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如你所看到的，仍然有很多废话，但我们可以开始识别一些网址。让我们通过只提取“href”标签之间的字符串来清理这个问题。为此，我们首先必须找到每个“href”元素的位置:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="8cbd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦我们知道了每个“href”元素的位置，我们就可以得到内容:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/a723110a2d466dd214bb412872bc6a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kSLVuxVXhR2wr0c0EdYZcg.png"/></div></div></figure><p id="6cc8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">还没有完全实现，但是我们可以清楚地看到，如果我们丢弃查询参数(所有跟在“？”后面的参数))，我们在搜索中只有一个URL，所以让我们来理清一下:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="f8a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">完美！你可能已经注意到，到目前为止我所说的“URL”实际上是一个相对路径，它缺少域名等。要解决这一问题，我们只需查看发布在中墙中的任何文章，就可以看到完整的URL是通过在相对路径前面加上墙URL来构成的:</p><pre class="iy iz ja jb fd lw lr lx ly aw lz bi"><span id="536f" class="ma ks hi lr b fi mb mc l md me"><a class="ae jn" href="https://fabiom91.medium.com/reclaim-your-privacy-by-distancing-from-facebook-and-google-691006136b5" rel="noopener">https://fabiom91.medium.com/reclaim-your-privacy-by-distancing-from-facebook-and-google-691006136b5</a></span></pre><p id="fce9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">假设我对关于<em class="kn">隐私</em>和<em class="kn">数据分析</em>的文章感兴趣，我可以得到标题中包含一些关键词如“数据”或“隐私”等的所有文章。为了搜索所有包含所选关键字的链接，我可以使用<strong class="jq hj">正则表达式(Regex) </strong>:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="2a9b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">既然我们已经看到了如何提取文章的URL，我们可能希望从文章中获取更多信息来填充我们的新闻稿。为此，我们可以将刚才使用的相同过程应用于每个文章URL。</p><p id="ae76" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本例中，我们希望提取:</p><ul class=""><li id="edf5" class="mf mg hi jq b jr js ju jv jx mh kb mi kf mj kj mk ml mm mn bi translated">文章标题</li><li id="7267" class="mf mg hi jq b jr mo ju mp jx mq kb mr kf ms kj mk ml mm mn bi translated">文章副标题(第一段)</li><li id="5c92" class="mf mg hi jq b jr mo ju mp jx mq kb mr kf ms kj mk ml mm mn bi translated">文章图片(如果有)</li></ul><p id="5bab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过分析每篇文章的源代码，我发现标题总是在第一个“h1”标签中，而作为图像，我们可以在标题后的“img”标签中使用第一个。根据副标题，我将使用文章的第一段“p ”:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/67afd9b34f9f1cf285cbe2cfa5db2493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1SdecljnELbK9ghv70w1yA.gif"/></div></div></figure><p id="a80d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于这个例子，我们将只使用这些数据，但如果你感兴趣，你可以抓取不同的网站，然后将所有数据组合在一个单一的新闻稿中。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/dcebfdff06f850070d329773f756b73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ccDfOSBUBiYbyHBhkhujRw.png"/></div></div></figure></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><p id="2081" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">祝贺您完成了本教程的第1部分。要学习如何用收集到的数据制作时事通讯，以及如何自动发送给你自己或你的朋友，请点击这里查看本教程的第二部分</p><blockquote class="kk kl km"><p id="e212" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/analytics-vidhya/create-your-own-newsletter-from-any-source-with-python-part-2-the-newsletter-ed21cd47c788">https://medium . com/analytics-vid hya/create-your-own-newsletter-from-any-source-with-python-part-2-the-newsletter-ed 21 CD 47 c 788</a></p></blockquote></div></div>    
</body>
</html>