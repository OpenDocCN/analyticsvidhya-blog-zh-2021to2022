<html>
<head>
<title>How to Make Your Own Private Virtual Assistant Powered by Machine Learning in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python制作自己的机器学习驱动的私人虚拟助手</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/privacy-virtual-assistant-powered-by-machine-learning-in-python-32578e0d56be?source=collection_archive---------1-----------------------#2021-07-11">https://medium.com/analytics-vidhya/privacy-virtual-assistant-powered-by-machine-learning-in-python-32578e0d56be?source=collection_archive---------1-----------------------#2021-07-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="4f72" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="b092" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如今，人工智能正被用于许多不同的领域，从无人驾驶汽车和智能机器人，到艺术创作或为计算机设计微芯片。我们都熟悉谷歌助手、亚马逊Alexa、Siri、Cortana等助手……这些都是由机器学习驱动的，有很多东西在幕后给出适当的响应。使用语音识别，他们首先理解你说的话，并将其转换成文本，然后解释和检索答案，最后将答案告诉用户。</p><p id="4a69" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">尽管有这么多我们可以使用的助手，但我一直想知道如何才能制作自己的助手，因为我可以与它共享我的所有个人信息，而不用担心隐私，创建我自己的回复，并添加我自己的功能，所有这些都是为我定制的。</p><p id="a9ea" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在本文中，我将向您展示如何开始用Python语言制作自己的由机器学习驱动的助手。我们将创建一个意图分类器，然后我们将添加我们的助手可以根据用户的意图执行的功能。然后，我们将为我们的助手添加语音识别和文本到语音转换功能。</p><p id="82a1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">所以让我们开始吧！</p><h1 id="fd89" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">入门指南</h1><p id="a3ba" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在我们开始之前，您需要安装Python 3。我们还需要一些软件包，如Scikit-Learn，但我们会在需要时安装它们。您还必须了解基本的Python概念，如函数、类等。</p><p id="cc72" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">首先，为助手创建一个文件夹，其中包含项目文件和子文件夹。然后，让我们创建一个名为<em class="kg"> main.py </em>的文件，我们将在其中为我们的助手创建一个类。您也可以添加自己的自定义变量。你也可以给它起任何你喜欢的名字。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><h1 id="40ed" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">意图分类</h1><p id="3c40" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了让我们的助手理解用户想要什么，我们必须创建一个意图分类器。意图分类是文本数据的自动分类，并且意图分类器自动分析文本(用户所说的)并将它们分类成“意图”。比如是问候，还是用户在问天气？</p><p id="fe2e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这就是机器学习，特别是文本分类算法将被使用的地方。它将接受用户输入，并对用户的意图进行分类。您可以使用您喜欢的任何文本分类算法，但是对于本文，我将使用使用Scikit学习库的朴素贝叶斯分类器。</p><p id="edaf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用以下命令安装scikit-learn。</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="2d72" class="kt ig hi kp b fi ku kv l kw kx">pip install scikit-learn</span></pre><p id="1a3d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们还将使用pandas来读取包含训练数据的csv文件。使用以下命令安装它:</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="4fa6" class="kt ig hi kp b fi ku kv l kw kx">pip install pandas</span></pre><p id="f8dc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">接下来，创建一个名为intent_classification的子文件夹，创建一个名为<em class="kg"> data.csv </em>的文件。这些数据将用于训练我们的意图分类器。你可以添加任何你想要的数据，只是要确保逗号后面不要有空格。第一行将包含列名(文本和意图)。这里有一个例子-</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="1e2d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这只是一个示例，您可以随意添加自己的数据来增加模型的准确性并对其进行自定义。</p><p id="9179" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，我们将创建意图分类器。首先，创建一个名为intent_classification.py的新文件，我们将在其中创建我们的intent分类器类。我将向您展示如何创建一个朴素贝叶斯分类器来对文本主题进行分类。朴素贝叶斯是一个分类器(在这个例子中是对文本进行分类)，它使用贝叶斯定理来确定概率(在这个例子中，文本是某个类的概率)。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="d5a3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">意图分类到此为止！现在，让我们转到main.py文件并添加功能。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="1d8e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在Assistant类中创建一个名为reply的新函数，它接受一个参数<em class="kg">文本</em>。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><h1 id="2b4c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">添加功能</h1><p id="e94f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">基于这个意图，我们现在可以执行一个函数。您可以添加自己的函数，但我将显示一个函数，它将获取当前天气。</p><p id="ccaf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我将使用OpenWeatherMap来获取天气数据。首先，你必须去https://openweathermap.org/api的<a class="ae ky" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank"/>，创建一个账户，并获得一个密钥。然后，使用以下命令安装名为PyOWM的python包:</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="7483" class="kt ig hi kp b fi ku kv l kw kx">pip install pyowm</span></pre><p id="ca29" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在主项目目录中创建一个名为assistant_functions的新文件夹，并创建一个名为weather.py的新文件。</p><p id="9dc7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在那里，创建一个名为get_weather的函数</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="4e79" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后，通过在main.py的开头添加以下内容，可以将该函数导入main.py</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="05ac" class="kt ig hi kp b fi ku kv l kw kx">from assistant_functions.weather import get_weather</span></pre><p id="9c78" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在main.py的Assistant类的reply函数中，添加一个包含不同意图的函数的字典。然后，添加代码来调用基于意图的函数，回复函数应该看起来像这样</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="39a0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以通过调用reply函数并将文本作为参数传递来测试它。您还可以创建更多的函数，并以类似的方式添加它们。</p><p id="7400" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要测试回复功能，请将以下内容添加到main.py的底部:</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="419f" class="kt ig hi kp b fi ku kv l kw kx">assistant.reply(”weather”)</span></pre><h1 id="690f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">添加文本到语音和语音识别</h1><p id="54aa" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">接下来将是我们的助手的文本到语音和语音识别功能。</p><p id="3d12" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们将使用pyttsx3进行文本语音，您可以使用</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="26db" class="kt ig hi kp b fi ku kv l kw kx">pip install pyttsx3</span></pre><p id="3786" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，我们将导入pyttsx3并创建一个speaking函数，该函数接受一个文本参数并使用pyttsx3说出它。</p><p id="5603" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">首先，更新main.py中的Assistant __init__函数，以避免多次初始化语音引擎:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="2cf1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后在类中添加一个speaking函数，名为<strong class="jf hj"> say() </strong>:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="87ce" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">返回到回复函数，不要打印()，而是使用self.say()</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="e121" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">接下来，我们将使用语音识别库添加一个函数来监听，我们可以使用以下命令来安装它:</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="a5e9" class="kt ig hi kp b fi ku kv l kw kx">pip install SpeechRecognition</span></pre><p id="ca3d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">你可能还需要安装py audio—<a class="ae ky" href="https://pypi.org/project/PyAudio/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/PyAudio/</a></p><p id="fcb4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<em class="kg"> main.py中，</em>我们将首先导入语音识别，然后更新__init__函数:</p><pre class="kh ki kj kk fd ko kp kq kr aw ks bi"><span id="c568" class="kt ig hi kp b fi ku kv l kw kx">import speech_recognition as sr</span></pre><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="cc74" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，我们将在助手类中创建一个名为listen()的新函数。<em class="kg">超时</em>参数是在放弃并抛出异常之前等待短语开始的最大秒数。短语时间限制是在短语停止侦听之前允许其继续的最大秒数。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><h1 id="466b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">添加一个循环来监听和回复</h1><p id="4e97" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最后一步是在Assistant类中创建main()函数。我们将添加一个循环来监听用户输入，然后调用回复函数。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="ad4f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在我们可以创建Assistant类的一个对象，并调用main()函数:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="e057" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">等到它打印出听力再开始说话。试着说“天气”，它会告诉你温度。您可以添加更多响应其他意图(如问候)的函数。</p><h1 id="2f81" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="f904" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这就是你如何用Python制作自己的助手。请随意将您自己的自定义功能添加到您的助手中，并使其成为您自己的功能！如果你想看我的助手项目，这里有我的GitHub库的链接—<a class="ae ky" href="https://github.com/reybahl/Assistant" rel="noopener ugc nofollow" target="_blank">https://github.com/reybahl/Assistant</a>。</p><p id="c89d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">谢谢你的阅读，我希望你喜欢它！</p></div></div>    
</body>
</html>