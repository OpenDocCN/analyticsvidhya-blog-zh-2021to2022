<html>
<head>
<title>Data science for street art</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">街头艺术的数据科学</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-science-for-street-art-7d11cb23dc81?source=collection_archive---------3-----------------------#2021-08-02">https://medium.com/analytics-vidhya/data-science-for-street-art-7d11cb23dc81?source=collection_archive---------3-----------------------#2021-08-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1e51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的爱好之一是绘画，随着时间的推移，我对街头艺术和涂鸦产生了兴趣。最近在我的家乡城市塔林有很多合法绘画的机会——所以我喜欢观察城市空间如何变得更加丰富多彩，并不时地参与其中。</p><p id="de25" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">隐藏在视野之外的是你在规划一幅新壁画时需要做的所有准备工作——想出一个概念，画一个(通常是数字的)草图，规划预算和资源——最重要的是，绘画。创建数字作品时，您可以从数百万种颜色和任何画布尺寸中进行选择。当用喷漆画一幅真正的壁画时，你必须从市场上大约200种颜色中选择——越少越实用——并且知道该买多少。</p><p id="75f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那么必须做些什么呢？</p><ul class=""><li id="d61e" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">计算出颜色的数量——如果你有渐变，这并不容易。</li><li id="1f2a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">计算每种颜色所占的面积——大多数教程都展示了令人讨厌的巫术，在Photoshop中用直方图来计算每种颜色的像素比率。</li><li id="3210" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">App stores有工业画师的App，但我见过的那些都不处理不规则和多色的形状。</li><li id="e884" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">一幅甚至带有大胆的平面颜色的数字草图会有来自绘画、导出时的压缩、发送信使的伪像——这产生了带有随机颜色的像素。</li><li id="2abf" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">最后，最好不仅能知道图片上有哪些颜色，还能知道哪些油漆(喷漆罐)与它们最匹配。</li></ul><p id="9935" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我决定为此开发一个应用程序。结果发现这里面有有趣的复杂性。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jq"><img src="../Images/297c8d5e99eb5aafdad50fdbfc8f1486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LWVbcqHmKHgEQh-_P23E4g.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">我为自己和朋友创建的应用程序。</figcaption></figure><h1 id="96c5" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">数颜色</h1><p id="1110" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">让我们首先导入我们将使用的所有内容。您可能需要安装软件包。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="bd7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们加载上图中看到的图像，看看它有多大:</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="fb99" class="lq kh hh lm b fi lr ls l lt lu">Width: 4000 / Height: 934<br/>Pixels: 3736000<br/>RGB pixel sample:<br/>[[ 36 182 169]<br/> [ 27 173 160]<br/> [ 20 166 153]]</span></pre><p id="c68e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一个想法是检查像素(矩阵中的行)并计算唯一的计数。让我们试一试。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="3d3f" class="lq kh hh lm b fi lr ls l lt lu">Unique RGB colors: 149521</span></pre><p id="3c5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">结果我们会得到15万种独特的颜色！这就是在Procreate/Photoshop中用画笔绘画，导出到JPG并发送Facebook Messenger对你的图片所做的事情。不是一条路可走。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lv"><img src="../Images/412a58905330e0078c0e0fdb940e20b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*i920rvXUEy0rS0rQ9MHUog.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">大多数颜色占用一个像素。</figcaption></figure><h1 id="3674" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">使聚集</h1><p id="1052" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">让我们试着去掉大部分颜色。为此，我们需要进行某种聚类。该任务的理想选择是DBSCAN算法，它不需要预先知道簇的数量，而是自己发现它。它要求的是什么组成一个聚类(最小点数)和打破一个聚类(点之间的最大距离)。</p><p id="82ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">DBSCAN的缺点，或者至少是它的scikit-learn实现，是它在大型数据集上非常慢(O(n))。所以我们先试着修整一下像素阵列。</p><ul class=""><li id="7113" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">让我们去掉太小的颜色(小于总面积的0.001)</li><li id="3661" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">此外，让我们删除重复项，因为如果我们将每个聚类的最小点数设置为1，它会显著减小数据集的大小，而不会影响DBSCAN的性能。</li></ul><p id="91f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，最终我们只剩下一组足够重要的独特RGB颜色(≥0.1%)。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="964f" class="lq kh hh lm b fi lr ls l lt lu">Min pixels per color: 3736<br/>Unique significant colors: 61</span></pre><p id="5265" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与我们之前拥有的15万种颜色相比，只有61种颜色听起来已经是一种福气了。但还是太多了，还是把太相似的颜色聚类在一起吧。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="42bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们使用3D空间中R、G、B点之间的欧几里德距离作为邻近度量来对颜色进行聚类。结果就是你在下面看到的11种颜色。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lw"><img src="../Images/b0de47c11cc4d050bfe6e456fa17add4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z-_zXNVYzRWExMmY-Aekng.png"/></div></div></figure><p id="ae50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们通过使用<a class="ae lx" href="https://en.wikipedia.org/wiki/Color_difference#CIEDE2000" rel="noopener ugc nofollow" target="_blank"> Delta-E CIELAB2000 </a>作为距离度量来尝试对颜色进行聚类。CIELAB2000是一个颜色空间，旨在描述人类如何感知颜色和颜色变化。Delta-E是一个相当复杂的函数，它计算空间中颜色之间的距离。多年来，它经历了多次修改，被认为是人类感知差异的最准确的表达。</p><p id="77e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">结果就是你在原图上看到的9种颜色。对于不同的图像(例如，有或没有梯度)，你应该调整阈值，我们在这里设置为12。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lw"><img src="../Images/65f48e8db5c6405c59a917d21d15e65b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6MADX98dbOMYaOz12hlPw.png"/></div></div></figure><h1 id="9471" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">RGB上为什么用Delta-E CIE2000而不是欧几里得？</h1><p id="9423" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">对于简单的情况，仅仅计算3D RGB空间中的欧几里德距离就足以获得颜色之间的近似差异。但是对于像为绘画选择正确的色调这样微妙的用例，您很快就会不可避免地发现，这种差异不是您的人类感知所希望的。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es ly"><img src="../Images/f3783ac6d689f0579f4b107b1d0213cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*AvdT9_EK4XZYvkjBgKG24w.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">颜色感知的非线性</figcaption></figure><p id="ed77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们用一个例子来说明:</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lz"><img src="../Images/5ceac74fe5e4c36341faf58de5a61ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*iCDV9focuOMfffmIaCpznA.png"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lz"><img src="../Images/249131d1618b601a53c9d8444fbef2c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*OwoH5Vw3YJMuixRHu6QkPw.png"/></div></figure><p id="f775" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们看到两幅图像的欧几里德RGB大致相同，但第一幅图像的delta-E要大得多。为什么？因为红色和绿色色调之间的感觉差异大于较暗和较亮的绿色色调之间的感觉差异。如果你想一想，那么当你画一件艺术品时，你可能会被原谅把暗绿色和浅绿色误认为是树，但是画红色的树会很奇怪。</p><figure class="jr js jt ju fd jv"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lz"><img src="../Images/e8cb9ace5892ea27ba1be8199d1f1007.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*9DnThWeaiZvwPSdwClXi8w.png"/></div></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lz"><img src="../Images/8c51efa6c2fd76a828f99e99269ed9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*Vq9hIV7P3CvQHqqmQ4h4HQ.png"/></div></figure><p id="b4a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一个例子，同样的欧几里德RGB距离，但显然很难注意到两种黑色(深灰色)的区别，但如果你把蓝绿色换成蓝绿色，效果就会很明显。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ma"><img src="../Images/7cd9c0521cd884b962a002204fc9523f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sf9LAVBCP6EjAhnnHW6yCw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">一小部分蒙大拿MTN-94系列喷漆</figcaption></figure><p id="7e40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你有许多相似的色调，这些细微的差别就变得特别重要，比如我们用作例子的那幅画——你需要从油漆供应商提供的油漆中选择最匹配的油漆。</p></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><p id="4b9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至于我的应用程序，我想添加的下一件事可能是一个自适应距离阈值，也可以有效地处理复杂梯度的图像。总的来说，有趣的是，即使是像从图片中计算颜色这样简单的任务，也可能涉及科学和数学理论——并最终成为许多人已经在解决的问题。</p></div></div>    
</body>
</html>