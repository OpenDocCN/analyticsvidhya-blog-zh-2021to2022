<html>
<head>
<title>Top 10 Python Tricks for your Job</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">适合您工作的10大Python技巧</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/top-10-python-tips-for-your-job-dc2e11bcae4?source=collection_archive---------20-----------------------#2021-02-04">https://medium.com/analytics-vidhya/top-10-python-tips-for-your-job-dc2e11bcae4?source=collection_archive---------20-----------------------#2021-02-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6bde" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">将这些片段添加到您的代码中并升级！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/dc3e1dd63393ec1e2b82e7729487f235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zY8C8h8ob_Rdr5iW"/></div></div></figure><p id="6ff7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你问任何一个Python程序员关于Python的优势，他会说简洁和高可读性是最有影响力的。Python努力让开发人员对其更简单、更简洁的语法感到满意。</p><p id="2102" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">极客们注意了！在这篇文章中，我整理了一些我发现的技巧。</p><h2 id="56bb" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">提示#1范围词典</h2><p id="cbeb" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">最新版本的python不支持范围字典。但是这里有一个技巧</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="8d26" class="kf kg hi lg b fi lk ll l lm ln">class RangeDict(dict):<br/>    def __getitem__(self, item):<br/>        if not isinstance(item, range):<br/>            for key in self:<br/>                if item in key:<br/>                    return self[key]<br/>            raise KeyError(item)<br/>        else:<br/>            return super().__getitem__(item)</span></pre><p id="0d3f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要使用它，创建一个像这样的范围字典—</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="2bb2" class="kf kg hi lg b fi lk ll l lm ln">sample_dict = RangeDict({<br/>    range(200,500): 20,<br/>    range(100,200):10,<br/>    range(0,100):5<br/>})</span><span id="7bb0" class="kf kg hi lg b fi lo ll l lm ln">print(sample_dict[30]) #5</span></pre><h2 id="9622" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧#2并行处理</h2><p id="441a" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">根据可以并行化的任务，并行处理可以奇迹般地加快执行速度。</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="72e3" class="kf kg hi lg b fi lk ll l lm ln">import concurrent.futures</span><span id="df34" class="kf kg hi lg b fi lo ll l lm ln">with concurrent.futures.ProcessPoolExecutor() as executer:<br/>    executer.map(&lt;function_name&gt;, &lt;args&gt;, chunksize=&lt;int&gt;)</span></pre><p id="9649" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">或者</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="a151" class="kf kg hi lg b fi lk ll l lm ln">results = []<br/>with concurrent.futures.ProcessPoolExecutor() as executer:<br/>    results_map = executer.map(&lt;function_name&gt;, &lt;args&gt;, chunksize=&lt;int&gt;)<br/>    for res in results_map:<br/>        results.append(res)</span></pre><p id="4b0a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">另一个关于类的例子—</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="7083" class="kf kg hi lg b fi lk ll l lm ln">import concurrent.futures<br/><br/><br/>class Concurrent:<br/><br/>    @staticmethod<br/>    def execute_concurrently(function, kwargs_list):<br/>        results = []<br/>        with concurrent.futures.ProcessPoolExecutor() as executor:<br/>            for _, result in zip(kwargs_list, executor.map(function, kwargs_list)):<br/>                results.append(result)<br/>        return results</span></pre><p id="e59f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是如果你想在像AWS lambda这样的无服务器环境中使用它，应该使用线程池——</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="995a" class="kf kg hi lg b fi lk ll l lm ln">import concurrent.futures<br/><br/><br/>class Concurrent:<br/><br/>    @staticmethod<br/>    def execute_concurrently(function, kwargs_list):<br/>        results = []<br/>        with concurrent.futures.ThreadPoolExecutor(max_workers=10) as executor:<br/>            futures = [executor.submit(function, kwargs) for kwargs in kwargs_list]<br/>        for future in concurrent.futures.as_completed(futures):<br/>            results.append(future.result())<br/>        return results</span></pre><p id="38d5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">参考—<a class="ae lp" href="https://github.com/mozilla-services/remote-settings-lambdas/pull/103/commits/e124220bf1f395f3cbcbe9ae98e75ad20a389c5b" rel="noopener ugc nofollow" target="_blank">https://github . com/Mozilla-services/remote-settings-lambdas/pull/103/commits/e 124220 BF 1 f 395 F3 CBC be 9 AE 98 e 75 ad 20 a 389 C5 b</a></p><p id="b4fc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当长程序运行时，你可以拿一个咖啡杯四处逛逛，并在程序完成时通过系统铃声得到通知！</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="8b78" class="kf kg hi lg b fi lk ll l lm ln">import winsound<br/>winsound.PlaySound("SystemExit", winsound.SND_ALIAS)</span></pre><h2 id="16ce" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧#3数据帧值计数()作为字典</h2><p id="b3c4" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">你们一定都使用过这个value_counts方法来检查或评估结果。但是，下面是如何将这个值用作其他内容的字典。</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="7f6c" class="kf kg hi lg b fi lk ll l lm ln">var = df[col].value_counts()<br/>dict(zip(var.keys().tolist(), var.tolist()))</span></pre><h2 id="ff21" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧4转置一个2D阵列</h2><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="ac39" class="kf kg hi lg b fi lk ll l lm ln">arr = [['x1', 'y1', 'z1'],['x2', 'y2', 'z2']]<br/>print(list(zip(*arr)))</span></pre><h2 id="24a9" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">提示#5破解excel文件的密码</h2><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="b64d" class="kf kg hi lg b fi lk ll l lm ln">from xlrd import *<br/>import win32com.client<br/>import pandas as pd</span><span id="33b8" class="kf kg hi lg b fi lo ll l lm ln">xl = win32.com.client.Dispatch("Excel.Application")<br/>filename, password = r'path to xlsx file', 'password'<br/>xlwb = xl.Workbooks.Open(filename, False, True, None, password)<br/>df = pd.DataFrame(list(xlwb.heets(1).Range("A1:D5").Value))<br/>print(df)</span></pre><h2 id="ccf6" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧#6从剪贴板创建数据帧，并为测试生成虚拟数据</h2><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="25f3" class="kf kg hi lg b fi lk ll l lm ln">pd.read_clipboard()</span><span id="1a40" class="kf kg hi lg b fi lo ll l lm ln">###########################</span><span id="24dd" class="kf kg hi lg b fi lo ll l lm ln">pd.util.testing.N = 10 #rows<br/>pd.util.testing.K = 5 #columns<br/>pd.util.testing.makeDataFrame()</span></pre><h2 id="b700" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧7将多个文件解压到一起</h2><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="060c" class="kf kg hi lg b fi lk ll l lm ln">import os, zipfile<br/>dir_name = os.path.abspath('input_files)<br/>for item in os.listdir(os.chdir(dir_name)):<br/>    if item.endswith(".zip"):<br/>        file_path = os.path.abspath(item)<br/>        zipfile.ZipFile(file_path).extractall(os.path.join(dir_name, os.path.abspath(file_path.split('.')[0])))<br/>        os.remove(os.path.abspath(item)) ## comment this line if you do not want the original zip files to be removed after extraction</span></pre><h2 id="e274" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧#8宇宙魔方OCR和Poppler</h2><p id="cf02" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">关于宇宙魔方OCR库的细节可以在这里找到——https://github.com/UB-Mannheim/tesseract/wiki<a class="ae lp" href="https://github.com/UB-Mannheim/tesseract/wiki" rel="noopener ugc nofollow" target="_blank"/></p><p id="64ac" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面将为python开发安装包装器</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="8d24" class="kf kg hi lg b fi lk ll l lm ln">pip install tesseract</span></pre><p id="96fe" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">关于波普勒的细节可以在这里找到——(也应该添加到路径)【https://blog.alivate.com.au/poppler-windows T4】</p><p id="9aa7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">其他OCR库包括<em class="lq"> camelot-py、tabula-py、EasyOCR </em></p><h2 id="6827" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">技巧9安装python包时跳过SSL验证</h2><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="f7e5" class="kf kg hi lg b fi lk ll l lm ln">pip install — trusted-host pypi.org — trusted-host files.pythonhosted.org</span></pre><h2 id="f244" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">提示#10 Conda环境覆盖</h2><p id="6292" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">有时，如果环境存在于您的系统中，或者作为在执行主程序之前设置环境的脚本的一部分，您可能需要覆盖它。</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="008b" class="kf kg hi lg b fi lk ll l lm ln">conda create --force -y --nae py_env_cmbs --file python\&lt;conda_env.yaml or txt&gt;</span></pre><h2 id="26fb" class="kf kg hi bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz bi translated">附加提示按指定顺序排列字典键</h2><p id="93c1" class="pw-post-body-paragraph jj jk hi jl b jm la ij jo jp lb im jr js lc ju jv jw ld jy jz ka le kc kd ke hb bi translated">在处理JSON对象时，这个技巧非常方便。</p><pre class="iy iz ja jb fd lf lg lh li aw lj bi"><span id="e974" class="kf kg hi lg b fi lk ll l lm ln">original_dict = {'key3':'value3','key1':'value1','key2':'value2'}<br/>order_keys = ['key1','key2','key3']<br/>ordered_dict = {k:original_dict[k] for k in order_keys}<br/>print(ordered_dict)</span></pre></div></div>    
</body>
</html>