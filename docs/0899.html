<html>
<head>
<title>Getting Started With Oracle Hierarchical Queries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle分层查询入门</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-with-oracle-hierarchical-queries-d687ebecde5b?source=collection_archive---------9-----------------------#2021-02-05">https://medium.com/analytics-vidhya/getting-started-with-oracle-hierarchical-queries-d687ebecde5b?source=collection_archive---------9-----------------------#2021-02-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fe6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我们将通过例子学习如何编写oracle分层查询</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="f641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据:</strong>下面是我们将用来理解分层查询的数据</p><div class="jk jl jm jn fd ab cb"><figure class="jo jp jq jr js jt ju paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/3546a71bf21c40605b3bc16fd392ab89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*E9EnkE6INJi-z2NBzLVW2Q.png"/></div></figure><figure class="jo jp kb jr js jt ju paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/368cae2a35adacd5c1f3ca5a2c84c34d.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*HP8azhgp49H0SX_nMI7jhg.png"/></div></figure></div></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="eefb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">树/层次结构的几个术语:</strong></p><p id="2c38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">根</strong>——层级中的第一个节点/点被称为根，在这种情况下，汽车是我们的根。</p><p id="76dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">子节点</strong>——每个节点的下级被称为子节点，就像四轮车、两轮车是机动车的子节点一样。</p><p id="5026" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">父</strong> —机动车是四轮车的父&amp;像这样的两轮车是轿车&amp;卡车的父</p><p id="aac8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">级别</strong> —根是1级，根的子代是2级，孙代是3级，依此类推。</p><p id="f780" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">叶子</strong> —没有子节点的数据点/节点称为叶子，如富士自行车、捷安特自行车、Tata Altroz等等。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="3958" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">定义关系</strong></p><p id="ee60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等级制度就是两点之间的关系。每个数据点都应该连接到另一个类似的父子关系。所以在编写层次查询之前，你需要知道的第一件事是你的数据点之间的关系。</p><p id="4a30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用的数据有两列<em class="kc">汽车_移动</em> &amp; <em class="kc">类别</em>。如果您查看表格格式的数据&amp;树形视图，您一定会发现行的<em class="kc">类别</em>列应该等于父行的<em class="kc"> AUTO_MOBILE </em>列，以创建分层视图。既然我们已经定义了数据点之间的关系。是时候在我们的查询中表示相同的内容了。因此，我们将使用术语<strong class="ih hj"> CONNECT BY </strong> &amp;来定义关系，以引用我们将使用<strong class="ih hj"> PRIOR的父行。</strong>请参考下面的查询</p><figure class="jk jl jm jn fd jp er es paragraph-image"><div class="er es kd"><img src="../Images/a05900fc9664511ce424940c079e3563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*5VcY89DEAPb5Z5LmJ4JpOg.png"/></div></figure><p id="56ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你看到上面的结果，这是部分好的，但不是一个适当的层次结构，因为你可能已经观察到，我们得到了自行车，汽车的多个记录&amp;可能也是其他记录。因为在使用connect by子句后，每一行都认为自己是层次结构的根&amp;我们将获得该特定数据点的每一个可能关系的每一行，例如，一个自行车记录认为自己是根，第二个两轮车的子记录认为自己是根，第三个汽车的孙子记录认为自己是根。有时这可能是您的要求，但这里我们将创建具有单一根的层次结构，即机动车辆。</p><p id="8367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们必须使我们的层次适当的汽车作为根。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="d118" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">定义层次的起点:</strong></p><p id="c963" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一切都有起点，我们的等级制度也是如此。只是它还不知道罢了。所以我们必须在查询中使用一个名为<strong class="ih hj"> START WITH的子句来告诉它。</strong></p><p id="be34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过查看数据，你可以知道机动车是我们的根&amp;因为它的<em class="kc">类别</em>是空的。这将是我们的开始条件，即<strong class="ih hj">类别为空</strong></p><figure class="jk jl jm jn fd jp er es paragraph-image"><div class="er es ke"><img src="../Images/e44c2327fd4d9772c4bce346374ec820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*2cQpdYEQkK30PAt1hGuHFA.png"/></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="4b85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">显示电平</strong></p><p id="3510" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我前面提到的，每个数据点/节点在层次中都有自己的级别。因此，为了在查询结果中显示级别，我们可以使用如下所示的level伪列。</p><figure class="jk jl jm jn fd jp er es paragraph-image"><div class="er es kf"><img src="../Images/a6599f3ad90301c5dd5166a0f8445b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*7mObSEH_1VRj8SBDOggp5g.png"/></div></figure><p id="5930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以看到每个数据点/节点的级别。请参考我们数据部分的树形图，并与此数据进行比较，以清楚了解水平。</p><p id="1bea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这三个子句足以开始使用层次查询。我将在下一篇文章中介绍一些其他层次化子句/函数。</p><p id="18c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不断学习，不断分享</p></div></div>    
</body>
</html>