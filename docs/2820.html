<html>
<head>
<title>Automate Cowin Vaccine slots Availablity using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python自动化Cowin疫苗槽可用性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automate-cowin-vaccine-slots-availablity-using-python-6c76aa61a901?source=collection_archive---------19-----------------------#2021-05-18">https://medium.com/analytics-vidhya/automate-cowin-vaccine-slots-availablity-using-python-6c76aa61a901?source=collection_archive---------19-----------------------#2021-05-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ce99" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">读者你好！</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/d53c0116050f80cd0c0a3e5fcfc1bd7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jBfzXvLJDk9BucIcdF_yw.png"/></div></div></figure><p id="5c16" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望你们都平安在家。不要走出你的房子，除非有适当的预防措施，绝对必要。</p><p id="e1f3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">冠状病毒病例与日俱增。第二次浪潮在许多地区造成了非常严重的影响。接种疫苗非常重要。但是，得到一个位置似乎几乎是不可能的。甚至我也不能得到一个。所以我试图想出一个可能的更好的主意，如果你了解我，你现在一定知道我是一个python爱好者，所以我试图自动化该槽的可用性。</p><p id="b486" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，在这篇博文中，我将告诉你如何自动化疫苗空位的可用性，并在空位可用时得到通知。我们将看到python中的实现。</p><p id="88fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了方便起见，您可以使用代码，它可以在我的GitHub库中找到。尽可能地传播这篇文章，这样每个人都可以得到关于空位的通知，我们都可以接种疫苗。</p><p id="0a09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jo" href="https://github.com/ayushi7rawat/Ultimate-Python-Resource-Hub" rel="noopener ugc nofollow" target="_blank">查看python的终极资源库</a>。发现有用就掉颗星！有什么要补充的吗？开个PR就一样了！</p><p id="3333" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以参考我的YouTube视频教程来看一个工作教程，以便更好地理解和一步一步的指导。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="jp jq l"/></div></figure><h1 id="5d37" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">这个博客将会涵盖什么</h1><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="6d9d" class="ku js hh kq b fi kv kw l kx ky">1. What is Web Scraping?<br/>2. The Web-Scaping Process and its Uses.<br/>3. What is Coronavirus and CoWin?<br/>4. How to Automate vaccine slots availability</span></pre><p id="0299" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kz">我们开始吧！</em></p><h1 id="a315" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">什么是Web报废？：</h1><h1 id="e262" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">介绍</h1><p id="76c6" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">如果你曾经从一个网站上复制并粘贴信息，你已经完成了与任何网页抓取器相同的功能，只是在微观的手动范围内。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lf"><img src="../Images/4fddc84df32874cc16a995e691590eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EPciddE89kWRGaSZ"/></div></div></figure><p id="8c6f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Web抓取，也称为web数据提取，是从网站检索或“抓取”数据的过程。收集这些信息，然后将其导出为对用户更有用的格式。无论是电子表格还是API。</p><p id="ffbc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里需要考虑两个要点:</p><ol class=""><li id="9150" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb ll lm ln lo bi translated">始终保持尊重，并试图获得许可刮，不要轰炸一个网站与刮请求，否则，您的IP地址可能会被封锁！</li><li id="7da4" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">请注意，网站经常变化，这意味着您的代码可能会从正常工作到完全崩溃。</li></ol><h1 id="490c" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">流程:三个简单的步骤</h1><ol class=""><li id="e233" class="lg lh hh ig b ih la il lb ip lu it lv ix lw jb ll lm ln lo bi translated">请求网页作出回应</li><li id="3f03" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">借助美汤和<code class="du lx ly lz kq b">lxml</code>解析提取</li><li id="0acf" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">将熊猫的数据下载并导出到excel</li></ol><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ma"><img src="../Images/601cdc8493e2b8815abb1cba9e06a8ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JQbyIQc2fsYAeAAd"/></div></div></figure><h1 id="1dc9" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">其用途:</h1><p id="94fe" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">它可以服务于几个目的，最受欢迎的是投资决策，竞争对手监测，新闻监测，市场趋势分析，评估财产价值，估计租金收益，政治和运动，等等。</p><p id="e80a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想进一步了解它。我在这里附上<a class="ae jo" href="https://en.wikipedia.org/wiki/Web_scraping" rel="noopener ugc nofollow" target="_blank">维基百科</a>链接。你可以看看。</p><h1 id="2af6" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">什么是冠状病毒？</h1><p id="e6ba" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">我不认为冠状病毒需要介绍，但以防万一，如果有人不知道，冠状病毒疾病(新冠肺炎)是一种由新发现的冠状病毒引起的传染病。</p><p id="5caf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">新冠肺炎病毒主要通过患者咳嗽或打喷嚏时的唾液或鼻涕传播</p><p id="e22b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想进一步了解它。我在这里附上<a class="ae jo" href="https://en.wikipedia.org/wiki/Coronavirus" rel="noopener ugc nofollow" target="_blank">维基百科</a>链接。你可以看看。</p><h1 id="1940" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">CoWin是什么？</h1><p id="d4c8" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">在全民免疫计划下，几年来，印度一直使用一个名为eVIN(电子疫苗情报网络)的疫苗情报系统，CoWIN是eVIN的延伸。CoWIN代表Covid疫苗情报工作。</p><blockquote class="mb mc md"><p id="f889" class="ie if kz ig b ih ii ij ik il im in io me iq ir is mf iu iv iw mg iy iz ja jb ha bi translated">它是疫苗接种的门户，也是疫苗接种运动的支柱。</p></blockquote><h1 id="642b" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">数据源</h1><p id="c10a" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">我们将利用cowin官方网站。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mh"><img src="../Images/0d26a972c7edc6d35245efc25fd1a226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MGEFi6faSDUfChII"/></div></div></figure><h1 id="b474" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">使用的模块:</h1><h2 id="1146" class="ku js hh bd jt mi mj mk jx ml mm mn kb ip mo mp kf it mq mr kj ix ms mt kn mu bi translated">请求模块:</h2><ul class=""><li id="c3d8" class="lg lh hh ig b ih la il lb ip lu it lv ix lw jb mv lm ln lo bi translated">使用请求库来获取页面。</li><li id="1f1b" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">如果您有防火墙阻止Python，这可能会失败。</li><li id="90b4" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">有时，如果第一次失败，您需要运行两次。</li></ul><p id="b906" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您已经熟悉了<em class="kz">冠状病毒和Cowin </em>，并掌握了<em class="kz"> Web报废和请求模块的基本知识，</em>我们可以前进到<em class="kz">编码部分。</em></p><h1 id="1332" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">该编码了！</h1><p id="1fad" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">你可以在我的<a class="ae jo" href="https://github.com/ayushi7rawat/CoWin-Vaccine-Notifier" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中找到所有代码。发现有用就掉颗星。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mw"><img src="../Images/2661a730e7e0888d52c15af5b402b1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R9LamERcYmo6qcnE"/></div></div></figure><p id="dfbe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kz">先来了解一下这个！</em></p><p id="5951" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了访问Python库，需要将其安装到Python环境中</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="9ee1" class="ku js hh kq b fi kv kw l kx ky">pip install requests</span></pre><p id="eba2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们需要将包导入到python脚本中。使用以下命令来完成此操作。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="904d" class="ku js hh kq b fi kv kw l kx ky">import requests</span><span id="150d" class="ku js hh kq b fi mx kw l kx ky">from datetime import datetime, timedelta<br/>import time</span><span id="d680" class="ku js hh kq b fi mx kw l kx ky">import json</span></pre><p id="f06b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们已经导入了库，让我们继续。</p><p id="1e0e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们显示一条欢迎信息。同样，我们将使用<code class="du lx ly lz kq b">print</code>方法。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="08c6" class="ku js hh kq b fi kv kw l kx ky">print("Starting search for Covid vaccine slots!")</span></pre><p id="4292" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们设置一些基本参数，</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="6769" class="ku js hh kq b fi kv kw l kx ky">age = 52<br/>pinCodes = ["462003"]<br/>print_flag = 'Y'<br/>num_days = 2</span></pre><ul class=""><li id="9f37" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb mv lm ln lo bi translated">老虎机分为两类，45岁以上和18岁以上。现在让我们从<code class="du lx ly lz kq b">Age 45+</code>开始，你可以根据你的需要来设置。</li><li id="6a2d" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">您可以根据<code class="du lx ly lz kq b">Pincode</code>或<code class="du lx ly lz kq b">District</code>进行搜索。因为我们正在寻找附近可用的插槽，所以我使用了Pin码。您也可以传递多个pin码，在列表中用<code class="du lx ly lz kq b">commans</code>分隔。</li><li id="007f" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">我们只想检查接下来两天的空位，这里我们将<code class="du lx ly lz kq b">num_days</code>设为<code class="du lx ly lz kq b">2</code>。</li><li id="a21e" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">最后，将标志值设置为<code class="du lx ly lz kq b">y</code>。</li></ul><p id="9425" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们利用<code class="du lx ly lz kq b">datetime</code>方法来计算今天的日期。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="cd49" class="ku js hh kq b fi kv kw l kx ky">actual = datetime.today()</span><span id="95e0" class="ku js hh kq b fi mx kw l kx ky">#output:<br/>2021-05-13 13:35:24.396612</span></pre><p id="7c38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，运行一个循环将其转换为列表格式。我们将利用<code class="du lx ly lz kq b">timedelta</code>方法将其转换成列表格式</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="39ee" class="ku js hh kq b fi kv kw l kx ky">list_format = [actual + timedelta(days=i) for i in range(num_days)]</span><span id="1455" class="ku js hh kq b fi mx kw l kx ky">#Output:<br/>[datetime.datetime(2021, 5, 13, 13, 39, 18, 496330), datetime.datetime(2021, 5, 14, 13, 39, 18, 496330)]</span></pre><p id="8d82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将再次运行一个循环来从列表中获取日期，我们将利用<code class="du lx ly lz kq b">strftime</code>方法来这样做。注意，我们以<code class="du lx ly lz kq b">date-month-year</code>格式存储日期。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="b2f3" class="ku js hh kq b fi kv kw l kx ky">actual_dates = [i.strftime("%d-%m-%Y") for i in list_format]</span><span id="6286" class="ku js hh kq b fi mx kw l kx ky">#Output:<br/>['13-05-2021', '14-05-2021']</span></pre><p id="88df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，我们将运行一个while循环来获取插槽的详细信息。首先让我们将计数器设置为零。</p><p id="5792" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里再介绍两个循环:</p><ul class=""><li id="a4b5" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb mv lm ln lo bi translated">一个是为了获取每个pin码的细节。</li><li id="8f91" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">第二步是获取给定pin码中每个日期的详细信息。</li></ul><p id="7762" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，为了获得请求，让我们定义URL。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="9c24" class="ku js hh kq b fi kv kw l kx ky">URL = "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode={}&amp;date={}".format(pinCode, given_date)</span></pre><p id="68a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您注意到，我已经使用字符串格式在URL本身中添加了参数。我们在这里传递两个参数，<code class="du lx ly lz kq b">pincode</code>和<code class="du lx ly lz kq b">date</code>。每当内部循环运行时，这个URL将被调用，相应的日期和pin码将作为每个案例的参数被传递。</p><p id="134f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，为了得到请求，让我们定义一下<code class="du lx ly lz kq b">header</code>。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="db36" class="ku js hh kq b fi kv kw l kx ky">header = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36'}</span></pre><p id="72ca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦完成，让我们调用<code class="du lx ly lz kq b">requests</code>，我们将使用<code class="du lx ly lz kq b">get</code>方法。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="d102" class="ku js hh kq b fi kv kw l kx ky">result = requests.get( URL, headers=header)</span></pre><p id="7b3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们的响应存储在结果中。让我们试着打印出来。我们将利用<code class="du lx ly lz kq b">text</code>方法进行同样的操作。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="ea6d" class="ku js hh kq b fi kv kw l kx ky">print(result.text)</span><span id="c84b" class="ku js hh kq b fi mx kw l kx ky">#OUTPUT:</span><span id="989f" class="ku js hh kq b fi mx kw l kx ky">{"centers":[{"center_id":691508,"name":"Navin Girls HSS Tulsi Nagar 18","address":"1250 Tulsi Nagar HOSPITAL","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"b63ce111-23dd-4d4e-9f1c-c97073c57a52","date":"13-05-2021","available_capacity":0,"min_age_limit":18,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":570554,"name":"SAHTI Vaishali Kotra <br/>KNK","address":"Govt. Higher Sec. Kamla Nehru Girls School Teenshed TT Nagar","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"93144388-6dca-4f7c-9aba-ecd5b120fa94","date":"13-05-2021","available_capacity":215,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":592476,"name":"25 Battalion Campus BhadBhada","address":"25th Battalion Bhadbhada Bhopal","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"b857cd10-b46f-404f-a5de-81032b667e46","date":"13-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":570591,"name":"GHMC- Ward 29 Office 18","address":"Pandit Khushilal Sharma Parisar","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"5bcd92b4-a476-4c47-a203-3e96179e5beb","date":"13-05-2021","available_capacity":0,"min_age_limit":18,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":609392,"name":"Govt School Nayabasera 18","address":"NAYABASERA SANJEEVANI","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"60306cc5-15a4-4195-876a-2889676631c0","date":"13-05-2021","available_capacity":0,"min_age_limit":18,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":561924,"name":"Saraswati Shisu Mandir Sch Cov","address":"Saraswati Shishu Mandir School Shivaji Nagar Bhopal Madhya Pradesh India","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"e1f4f7a1-42d5-4f58-934b-ed031fc3e7c0","date":"13-05-2021","available_capacity":137,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":591027,"name":"CD RAJ BHAVAN CVX","address":"RAJ BHAVAN BHOPAL","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"52de668d-5526-4e09-8c41-f34c1912302d","date":"13-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":667429,"name":"CD Vallabh Bhawan CVX","address":"Vallabh Bhawan Bhopal","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"e8202c2d-b545-401c-b266-8bf9102687e2","date":"13-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":561310,"name":"Govt Kanya School Nehru Nagar","address":"Govt Kanya School Nehru Nagar","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"85a85c27-cabd-4058-b902-7b0bf457cb44","date":"13-05-2021","available_capacity":114,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":636442,"name":"CD VIDHAN SABHA COVISHIELD","address":"VIDHAN SABHA","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"6010b80f-a818-4cf5-ad67-90a0cb49f1d6","date":"13-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":611640,"name":"Kopal HSS Nehru Nagar18","address":"Kopal HSS Nehru Nagar Bhopal","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"b4a74e1f-cc5b-498a-b92d-25bf5c3bc072","date":"13-05-2021","available_capacity":0,"min_age_limit":18,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":639426,"name":"BANGANG WARD 25 CVX","address":"SANJEEVNI BANGANGA","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"17:00:00","fee_type":"Free","sessions":[{"session_id":"def621bf-2e3e-4514-a605-9debd696d8ef","date":"13-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVAXIN","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-05:00PM"]}]},{"center_id":636455,"name":"JAHANGIRABAD SANJEEVANI","address":"JAHANGIRABAD","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"18:00:00","fee_type":"Free","sessions":[{"session_id":"a58f02b7-a252-4daf-a541-b7ddf9bae21c","date":"19-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-06:00PM"]}]},{"center_id":627202,"name":"CD Sewaniya Gaud","address":"CD Sewaniya Gaud","state_name":"Madhya Pradesh","district_name":"Bhopal","block_name":"PHANDA","pincode":462003,"lat":23,"long":77,"from":"09:00:00","to":"18:00:00","fee_type":"Free","sessions":[{"session_id":"80130fd2-483a-4bb7-876a-9f2130484994","date":"19-05-2021","available_capacity":0,"min_age_limit":45,"vaccine":"COVISHIELD","slots":["09:00AM-11:00AM","11:00AM-01:00PM","01:00PM-03:00PM","03:00PM-06:00PM"]}]}]}</span></pre><p id="6f5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该数据是非结构化的。因此，我们将在这里使用<code class="du lx ly lz kq b">json</code>。让我们将数据转换成<code class="du lx ly lz kq b">json</code>文件。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="c397" class="ku js hh kq b fi kv kw l kx ky">if result.ok:<br/>    response_json = result.json()</span></pre><p id="a5ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，为了检索每个中心的信息，我们将运行一个相同的循环。最初，让我们将<code class="du lx ly lz kq b">flag</code>设置为<code class="du lx ly lz kq b">false</code></p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="040f" class="ku js hh kq b fi kv kw l kx ky">flag = False<br/>if response_json["centers"]:            <br/>    if(print_flag.lower() =='y'):<br/>        for center in response_json["centers"]:</span></pre><p id="674b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们显示并验证每个中心的数据</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="594e" class="ku js hh kq b fi kv kw l kx ky">print(center)</span><span id="ce33" class="ku js hh kq b fi mx kw l kx ky">#OUTPUT:</span><span id="301b" class="ku js hh kq b fi mx kw l kx ky">{'center_id': 691508, 'name': 'Navin Girls HSS Tulsi Nagar 18', 'address': '1250 Tulsi Nagar HOSPITAL', 'state_name': 'Madhya Pradesh', 'district_name': 'Bhopal', 'block_name': 'PHANDA', 'pincode': 462003, 'lat': 23, 'long': 77, 'from': '09:00:00', 'to': '17:00:00', 'fee_type': 'Free', 'sessions': [{'session_id': 'b63ce111-23dd-4d4e-9f1c-c97073c57a52', 'date': '13-05-2021', 'available_capacity': 0, 'min_age_limit': 18, 'vaccine': 'COVAXIN', 'slots': ['09:00AM-11:00AM', '11:00AM-01:00PM', '01:00PM-03:00PM', '03:00PM-05:00PM']}]}</span></pre><p id="de8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们终于可以检索每个会话的信息了。我们将应用检查参数作为我们之前保存的参数。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="cc80" class="ku js hh kq b fi kv kw l kx ky">for session in center["sessions"]:<br/>    if (session["min_age_limit"] &lt;= age and session["available_capacity"] &gt; 0 ):</span></pre><p id="2e94" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果它将我们的条件分层，让我们显示结果。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="8e7b" class="ku js hh kq b fi kv kw l kx ky">print('Pincode: ' + pinCode)<br/>print("Available on: {}".format(given_date))<br/>print("\t", center["name"])<br/>print("\t", center["block_name"])<br/>print("\t Price: ", center["fee_type"])<br/>print("\t Availablity : ", session["available_capacity"])</span><span id="2191" class="ku js hh kq b fi mx kw l kx ky">if(session["vaccine"] != ''):<br/>    print("\t Vaccine type: ", session["vaccine"])<br/>    print("\n")</span></pre><p id="df36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后还是让计数器加一吧。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="3405" class="ku js hh kq b fi kv kw l kx ky">counter += 1</span></pre><p id="787a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们来看看边缘情况:</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="5d4d" class="ku js hh kq b fi kv kw l kx ky">if(counter == 0):<br/>    print("No Vaccination slot avaliable!")<br/>else:<br/>    print("Search Completed!")</span></pre><p id="c232" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，让我们实时同步数据。</p><pre class="jd je jf jg fd kp kq kr ks aw kt bi"><span id="18fd" class="ku js hh kq b fi kv kw l kx ky">dt = datetime.now() + timedelta(minutes=3)</span><span id="3929" class="ku js hh kq b fi mx kw l kx ky">while datetime.now() &lt; dt:<br/>    time.sleep(1)</span></pre><p id="de8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看输出，让我们与实际网站进行比较。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es my"><img src="../Images/4622c013c746b5e64a52d20be545000e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/0*dp-M2h2MfYAMO0i0"/></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mz"><img src="../Images/f87a80961d029d340c5a1bea61bdc109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pIyu1W7F6jFvITrZ"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es na"><img src="../Images/ea99d8daccf554ebdaf789de6cef7d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LYiMpCpfSEd-4EXy"/></div></div></figure><p id="f984" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就这样，结束了！您可以将脚本托管在服务器上，以便在您附近有空位时得到通知。你可以在我的<a class="ae jo" href="https://github.com/ayushi7rawat/CoWin-Vaccine-Notifier" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>找到所有代码。发现有用就掉颗星。</p><p id="d51e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">很简单，不是吗？希望这篇教程有所帮助。我强烈推荐你去看看YouTube上的视频，别忘了订阅我的频道。</p><p id="e5ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我写关于职业、博客、编程和生产力的文章，如果你对此感兴趣，请与你的朋友和关系人分享这篇文章。你也可以订阅我的时事通讯，在我每次写东西的时候得到更新！</p><p id="3f13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谢谢你的阅读，如果你已经到目前为止，请喜欢这篇文章，它会鼓励我写更多这样的文章。请分享您的宝贵建议，感谢您的真诚反馈！</p><p id="a7d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我很乐意在推特 | <a class="ae jo" href="https://www.linkedin.com/in/ayushi7rawat/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与你联系。</p><p id="8bc2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你绝对应该看看我的其他博客:</p><ul class=""><li id="a5b7" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/python-39-all-you-need-to-know" rel="noopener ugc nofollow" target="_blank"> Python 3.9:你需要知道的一切</a></li><li id="84cb" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/the-ultimate-python-resource-hub" rel="noopener ugc nofollow" target="_blank">终极Python资源枢纽</a></li><li id="1346" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/github-cli-10-all-you-need-to-know" rel="noopener ugc nofollow" target="_blank"> GitHub CLI 1.0:您需要知道的一切</a></li><li id="e71e" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/become-a-better-programmer" rel="noopener ugc nofollow" target="_blank">成为更好的程序员</a></li><li id="8069" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/how-to-make-your-own-google-chrome-extension-1" rel="noopener ugc nofollow" target="_blank">如何制作自己的谷歌Chrome扩展</a></li><li id="d543" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://ayushirawat.com/create-your-own-audiobook-from-any-pdf-with-python" rel="noopener ugc nofollow" target="_blank">使用Python从任何pdf创建您自己的有声读物</a></li><li id="39a5" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated">你很重要，你的心理健康也很重要！</li></ul><h1 id="c76c" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">资源:</h1><ul class=""><li id="c736" class="lg lh hh ig b ih la il lb ip lu it lv ix lw jb mv lm ln lo bi translated"><a class="ae jo" href="https://apisetu.gov.in/public/marketplace/api/cowin#/Appointment%20Availability%20APIs/calendarByPin" rel="noopener ugc nofollow" target="_blank">https://API setu . gov . in/public/market place/API/cowin #/Appointment % 20 avail ability % 20 APIs/calendar bypin</a></li><li id="8850" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://www.cowin.gov.in/home" rel="noopener ugc nofollow" target="_blank">cowin.gov.in/home</a></li><li id="7133" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb mv lm ln lo bi translated"><a class="ae jo" href="https://pypi.org/project/requests/" rel="noopener ugc nofollow" target="_blank">pypi.org/project/requests</a></li></ul><p id="8099" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我的下一篇博客文章中再见，保重</p></div></div>    
</body>
</html>