<html>
<head>
<title>Convert Machine Learning model Into Website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将机器学习模型转换成网站</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/convert-machinelearning-model-into-website-e966f79487c2?source=collection_archive---------11-----------------------#2021-07-01">https://medium.com/analytics-vidhya/convert-machinelearning-model-into-website-e966f79487c2?source=collection_archive---------11-----------------------#2021-07-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a8b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，我想说的是，如果你读过我的关于垃圾邮件分类器的文章，这篇文章真的帮了你很多，在这篇文章中，我解释了所有与垃圾邮件分类器相关的术语。在那篇文章中，我举了一个如何将机器学习模型转换成网站的例子。在这里，我们要将带有朴素贝叶斯的垃圾邮件分类器转换成网站。<br/>以下是链接:-</p><p id="dee4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://medium.com/p/a51b8c6290d4/edit" rel="noopener">https://medium.com/p/a51b8c6290d4/edit</a></p><p id="a804" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里，我们将把机器学习模型转换成一个网站，在那里我们接收一封输入邮件，并返回一个输入邮件是垃圾邮件还是垃圾邮件的结果。这是如何工作的，这完全取决于我们在电子邮件垃圾分类器的朴素贝叶斯算法的帮助下训练的逻辑。</p><p id="1ad0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，在朴素贝叶斯算法的帮助下，我们之前训练了我们的机器学习模型。因此，为了预测邮件是垃圾邮件还是火腿的结果。我们需要两样东西</p><ol class=""><li id="1a42" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">word_dict帮助我们统计所有单词在输入邮件中出现的次数，所以我们需要导出word_dict。</li><li id="077f" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">其次，分类器对象(在我们的例子中，分类器是clf)存储所有的逻辑，无论电子邮件是垃圾邮件还是垃圾邮件，因此我们也导出这个分类器对象，即clf。</li></ol><p id="fd40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我们目标是将这两样东西(word_dict和存储在clf中的分类器对象)从Jupiter Notebook文件导出到PyCharm以构建一个网站:- <br/>这里您可以看到我们如何使用Pickle将这两样东西(word_dict和存储在clf中的分类器对象)从Jupiter Notebook文件导出到PyCharm。</p><p id="cbe8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面的代码是在你训练你的模型的同一个Jupiter笔记本上完成的，我们一步一步地看我们如何导出:-</p><ol class=""><li id="1319" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">首先我们用<strong class="ig hi">进口泡菜</strong>进口泡菜</li><li id="416a" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">接下来，我们使用语法- <br/> <strong class="ig hi"> pickle.dump(clf，open('models.pkl '，' WB ')</strong>以写二进制模式将clf序列化到名为<strong class="ig hi"> 'models.pkl' </strong>的文件中</li><li id="ccf6" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">接下来，我们使用语法-<br/><strong class="ig hi">pickle . dump(word_dict，open('myStrings.pkl '，' WB ')</strong>以写二进制模式将word _ dict序列化到另一个文件<strong class="ig hi"> 'myStrings.pkl' </strong></li></ol><p id="7905" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">*现在打开您的PyCharm，创建一个名为“电子邮件-垃圾邮件-分类器”的目录，在该目录中创建一个python文件名“app ”,扩展名为py，并在电子邮件-垃圾邮件-分类器目录中创建另一个目录，即模板，在模板中创建另一个文件“index.html”。</p><p id="443f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在进入Jupiter笔记本，复制两个文件<strong class="ig hi">‘models . pkl’和‘mystrings . pkl’</strong>，它们存储在Jupiter笔记本文件所在的同一目录中，然后将这些文件粘贴到PyCharm的Email-spam-Classifier目录中。</p><p id="d6ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们要研究PyCharm:-</p><p id="82d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用flask来建立我们的网站，如果你不知道如何使用Flask，不要担心，在我们的情况下，我们将做一个简单的网站，我们只使用Flask的基本功能。</p><p id="5582" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先在PyCharm中打开你的app.py文件，为了使用Flask，我们首先在这个命令的帮助下安装Flask:-<br/><strong class="ig hi">pip在payCharm的终端中安装flask </strong>。</p><p id="09c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在使用flask import flask<br/>T5<strong class="ig hi">命令在app.py文件中导入Flask现在创建一个变量app，它将等于Flask类的(__name__)。<br/>语法:- <strong class="ig hi"> app=Flask(__name__) </strong></strong></p><p id="5864" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在是时候在app.py文件中导入那个pickle文件“mystrings.pkl”和' models.pkl '了，所以在<strong class="ig hi"> app=Flask(__name__) </strong>之后你写这个代码<br/><strong class="ig hi">word _ dict = pickle . load(open(" mystrings . pkl "，" Rb "))<br/>clf = pickle . load(open(' models . pkl '，' Rb ')</strong></p><p id="f4a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们创建一个装饰器，并为该装饰器附加一个函数，该函数返回用于渲染index.html文件index.html文件，我们使用从flask导入的render_template。<br/>语法:-<br/><strong class="ig hi">@ app . route('/')<br/>def home():<br/><em class="jr"/>return render _ template(' index . html ')<em class="jr">#本行需要一个tab。</em>T24】</strong></p><p id="7205" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我们运行我们的应用程序。<br/>语法:-<br/><strong class="ig hi">if _ _ name _ _ = = " _ _ main _ _ ":<br/>app . run(debug = True)<em class="jr">#这行代码需要一个制表符。</em> </strong></p><p id="99b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们将在index.html中制作一个表单，它接受用户的输入并显示输出。</p><p id="8536" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">index.html</strong></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/e44c4cf648bfd72a840efe40c11f91ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZnrD10Jjaaq9dA_I4Uirw.png"/></div></div></figure><p id="043e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这张图片中，您可以看到我们有一个表单，它的方法是POST，操作是“/predict ”,这意味着您的请求是通过POST发送的，操作显示在提交表单后谁被触发，这意味着用户在表单中输入的数据由app.py文件的predict函数接收。</p><p id="0f40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，html正在发送数据，即输入的电子邮件到预测函数，现在在预测函数中，我们在请求方法的帮助下获取电子邮件，因为我们将从flask导入请求。在predict函数中导入之后，我们获取电子邮件并存储在一个名为new_email的变量中。<br/>语法:-<strong class="ig hi">new _ email = request . form . get(' email ')</strong></p><p id="7d87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们拆分新邮件，检查新邮件中出现的所有单词的出现次数，并存储在一个名为sample <br/>的列表中，然后将该列表转换为Numpy数组，如下所示</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ke"><img src="../Images/6b8b598747d07bdcaf86a34530808c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*jtm0DQVNYI63ptwr8YYLYw.png"/></div></figure><p id="ed4f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我们将新电子邮件传递给分类器，该分类器预测新电子邮件是垃圾邮件还是垃圾邮件。然后使用变量将结果发送到index.html，最后将结果呈现到网页中。</p><p id="46be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是预测函数的代码</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es kf"><img src="../Images/26493666a885319a1d962afdd09e774c.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*sGk8AzB0fkIX0I_dbAzuKw.png"/></div></figure><p id="cd3d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在预测结果后，在变量“label”<br/>内发送回index.html，然后在index.html我们检查label的值并根据条件显示结果。请看下文，了解更多:-</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es kg"><img src="../Images/9c6048f569b1f19573e3062bc65dfce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*YAHRDJLBd4CSArx4S8TZ6Q.png"/></div></figure><p id="ba4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你也可以在上面index.html的图片中看到这段代码。</p></div></div>    
</body>
</html>