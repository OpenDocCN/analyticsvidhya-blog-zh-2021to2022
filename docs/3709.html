<html>
<head>
<title>Scraping Twitter data using â€œtweepyâ€ &amp; Twitter API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨â€œtweepyâ€å’ŒTwitter APIæŠ“å–Twitteræ•°æ®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/scraping-twitter-data-using-tweepy-8005d7b517a3?source=collection_archive---------0-----------------------#2021-07-19">https://medium.com/analytics-vidhya/scraping-twitter-data-using-tweepy-8005d7b517a3?source=collection_archive---------0-----------------------#2021-07-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a918" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ”¶é›†æœ€è¿‘150ç¯‡çŸ³æºªå¤§å­¦Twitterå¸–å­å’ŒæŸ¥è¯¢â€œNepalâ€çš„Twitteræœç´¢ç»“æœï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®å¸§ä¸­ï¼Œç„¶åå­˜å‚¨åˆ°ä¸€ä¸ªCSVæ–‡ä»¶ä¸­ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f4dbed0f779477c58462c4a001ab291d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I--qVWnLlC_A73W6XmNPZQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">å¢å…‹Â·åˆ‡ç‘Ÿåœ¨<a class="ae jn" href="https://unsplash.com/s/photos/twitter-posts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</figcaption></figure><h2 id="be60" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">é¦–å…ˆï¼Œ</h2><p id="ba34" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><strong class="ko hj">è·å¾—å¼€å‘è€…è®¿é—®æƒé™ï¼Œå¹¶è®°å½•æ‚¨çš„ä»¤ç‰Œå’Œå¯†é’¥:</strong></p><p id="691e" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">æˆ‘ä»¬éœ€è¦è®¿é—®Twitter APIï¼Œä»¥ä¾¿ä»Twitteræ”¶é›†æˆ‘ä»¬éœ€è¦çš„æ•°æ®ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦è·å¾—è®¿é—®æƒé™ï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨Twitterå¼€å‘è€…é—¨æˆ·ä¸­åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºæ¥å®Œæˆã€‚å¥½å§ï¼Œæ—¢ç„¶ä½ è¯•å›¾è·å¾—Twitteræ•°æ®ï¼Œä½ çŸ¥é“ä½ åº”è¯¥æœ‰ä¸€ä¸ªTwitterè´¦æˆ·ã€‚</p><ol class=""><li id="40db" class="lk ll hi ko b kp lf ks lg jz lm kd ln kh lo le lp lq lr ls bi translated">è®¿é—®<a class="ae jn" href="https://developer.twitter.com/en/apply-for-access" rel="noopener ugc nofollow" target="_blank">å¼€å‘è€…çš„Twitterç½‘ç«™</a>å¹¶ç”³è¯·ä¸€ä¸ªå¼€å‘è€…è´¦æˆ·ã€‚ç”³è¯·è·å¾—æ‰¹å‡†éœ€è¦å‡ ä¸ªå°æ—¶åˆ°ä¸€å¤©çš„æ—¶é—´ã€‚</li><li id="5944" class="lk ll hi ko b kp lt ks lu jz lv kd lw kh lx le lp lq lr ls bi translated">ä¸€æ—¦è·å¾—æ‰¹å‡†ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§æ­¤å¤„çš„è¯´æ˜<a class="ae jn" href="https://developer.twitter.com/en/docs/apps/overview" rel="noopener ugc nofollow" target="_blank">åœ¨å¼€å‘ç¯å¢ƒä¸­åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œä½†å¦‚æœæ‚¨ç¯é¡¾å››å‘¨ï¼Œå¯ä»¥éå¸¸ç›´è§‚åœ°ç¯é¡¾å››å‘¨å¹¶ç‚¹å‡»ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®APIäº†ã€‚</a></li><li id="1e4f" class="lk ll hi ko b kp lt ks lu jz lv kd lw kh lx le lp lq lr ls bi translated">ä¸ºäº†è®¿é—®APIï¼Œä½ éœ€è¦4ä¸ªä¸åŒçš„ä»¤ç‰Œâ€”â€”ç§˜å¯†å¯†é’¥ï¼Œä½ å¯ä»¥åœ¨ä½ çš„å¼€å‘è€…ç¯å¢ƒä¸­çš„é¡¹ç›®å’Œåº”ç”¨éƒ¨åˆ†çš„â€œå¯†é’¥å’Œä»¤ç‰Œâ€æ ‡ç­¾ä¸­æ‰¾åˆ°ã€‚</li></ol><h2 id="5d92" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">ä»å¼€å‘äººå‘˜é—¨æˆ·æ”¶é›†è¿™äº›ä¿¡æ¯</h2><p id="2bc4" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">APIå¯†é’¥:â€œABCDâ€</p><p id="3e1e" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">APIå¯†é’¥:â€œMNOPâ€</p><p id="7514" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">è®¿é—®ä»¤ç‰Œ:â€œXYZâ€</p><p id="0c6f" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">è®¿é—®ä»¤ç‰Œå¯†ç :â€œPQRâ€</p><p id="66f6" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">æ­¥éª¤1: </strong>å®‰è£…&amp;å¯¼å…¥å¿…è¦çš„åº“å’ŒåŒ…</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="ebb1" class="jo jp hi lz b fi md me l mf mg"># pip install tweepy<br/># pip install pandas</span><span id="87bf" class="jo jp hi lz b fi mh me l mf mg">import tweepy<br/>from tweepy import OAuthHandler<br/>import pandas as pd<br/>import time</span></pre><p id="27c7" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">æ­¥éª¤2: </strong>ä½¿ç”¨Twitterå¼€å‘è€…åº”ç”¨ç¨‹åºä¸­çš„ä¿¡æ¯å¹¶æ”¶é›†æ•°æ®</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="4d09" class="jo jp hi lz b fi md me l mf mg">consumer_key = "ABCD"<br/>consumer_secret = "MNOP"<br/>access_token = "XYZ"<br/>access_token_secret = "PQR"</span><span id="a73e" class="jo jp hi lz b fi mh me l mf mg">auth = tweepy.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(access_token, access_token_secret)<br/>api = tweepy.API(auth, wait_on_rate_limit=True)</span></pre><h1 id="aae9" class="mi jp hi bd jq mj mk ml ju mm mn mo jy io mp ip kc ir mq is kg iu mr iv kk ms bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ”¶é›†ç”¨æˆ·åæœç´¢çš„æ•°æ®</h1><p id="9a43" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">è®©æˆ‘ä»¬ä¸ºæœ¬æ•™ç¨‹æ”¶é›†150ä¸ªå¸–å­ä¿¡æ¯</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="21e9" class="jo jp hi lz b fi md me l mf mg">username = 'sbu'<br/>count = 150</span></pre><p id="9f17" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">åˆ›å»ºç”¨äºå­˜å‚¨æ¨æ–‡ä¿¡æ¯çš„æ•°æ®æ¡†</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="1f31" class="jo jp hi lz b fi md me l mf mg">df_user_tweets = pd.DataFrame()</span><span id="37b2" class="jo jp hi lz b fi mh me l mf mg">try:     <br/>    # Creation of query method using appropriate parameters<br/>    tweets =    tweepy.Cursor(api.user_timeline,id=username).items(count)<br/> <br/>    <br/>    # Pulling information from tweets iterable object and adding relevant tweet information in our data frame<br/>    for tweet in tweets:<br/>        df_user_tweets = df_user_tweets.append(<br/>                          {'Created at' : tweet._json['created_at'],<br/>                                       'User ID': tweet._json['id'],<br/>                              'User Name': tweet.user._json['name'],<br/>                                        'Text': tweet._json['text'],<br/>                     'Description': tweet.user._json['description'],<br/>                           'Location': tweet.user._json['location'],<br/>             'Followers Count': tweet.user._json['followers_count'],<br/>                 'Friends Count': tweet.user._json['friends_count'],<br/>               'Statuses Count': tweet.user._json['statuses_count'],<br/>         'Profile Image Url': tweet.user._json['profile_image_url'],<br/>                         }, ignore_index=True)<br/>except BaseException as e:<br/>    print('failed on_status,',str(e))<br/>    time.sleep(3)</span></pre><p id="4b2e" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">ç¬¬ä¸‰æ­¥:ç»“æœ</strong></p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="4050" class="jo jp hi lz b fi md me l mf mg">df_user_tweets.shape</span><span id="ab45" class="jo jp hi lz b fi mh me l mf mg">(150, 10)</span><span id="4898" class="jo jp hi lz b fi mh me l mf mg">df_user_tweets.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="ab fe cl mt"><img src="../Images/ca2864cbd919c3f4d345686532bd7ff8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*MDydKQKMM82RyKzaf3ffcQ.png"/></div></figure><h1 id="a15b" class="mi jp hi bd jq mj mk ml ju mm mn mo jy io mp ip kc ir mq is kg iu mr iv kk ms bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åœ¨æŸäº›æ–‡æœ¬æœç´¢ä¸ŠæŠ“å–æ¨æ–‡</h1><p id="62c7" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><strong class="ko hj">å†æ¬¡ï¼Œæˆ‘ä»¬é‡å¤æ­¥éª¤2 &amp;æ­¥éª¤3 </strong></p><p id="cae4" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">ä¸ºæ¨æ–‡ä¿¡æ¯åˆ›å»ºæ•°æ®æ¡†</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="8f84" class="jo jp hi lz b fi md me l mf mg">df_query_based_tweets = pd.DataFrame()</span><span id="c3b0" class="jo jp hi lz b fi mh me l mf mg">text_query = 'nepal'<br/><br/>try:<br/>    # Creation of query method using appropriate parameters<br/>    tweets = tweepy.Cursor(api.search,q=text_query).items(count)<br/><br/>    # Pulling information from tweets iterable object and adding relevant tweet information in our data frame<br/>    for tweet in tweets:<br/>        df_query_based_tweets = df_query_based_tweets.append(<br/>                          {'Created at' : tweet._json['created_at'],<br/>                                       'User ID': tweet._json['id'],<br/>                              'User Name': tweet.user._json['name'],<br/>                                        'Text': tweet._json['text'],<br/>                     'Description': tweet.user._json['description'],<br/>                           'Location': tweet.user._json['location'],<br/>             'Followers Count': tweet.user._json['followers_count'],<br/>                 'Friends Count': tweet.user._json['friends_count'],<br/>               'Statuses Count': tweet.user._json['statuses_count'],<br/>         'Profile Image Url': tweet.user._json['profile_image_url'],<br/>                         }, ignore_index=True)<br/>except BaseException as e:<br/>    print('failed on_status,',str(e))<br/>    time.sleep(3)</span></pre><p id="2a5e" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">ç»“æœ:</strong></p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="9e1b" class="jo jp hi lz b fi md me l mf mg">df_query_based_tweets.shape</span><span id="b843" class="jo jp hi lz b fi mh me l mf mg">(150, 10)</span><span id="735a" class="jo jp hi lz b fi mh me l mf mg">df_query_based_tweets.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="ab fe cl mt"><img src="../Images/3a35d2efd290639692b270c7fe389119.png" data-original-src="https://miro.medium.com/v2/format:webp/1*iVFzmn9tytqJ2rE-8Ps0uw.png"/></div></figure><p id="53a9" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">å¦‚æœä½ å¯¹ä»Twitter APIè·å–å…¶ä»–ä¿¡æ¯æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç‚¹å‡»æŸ¥çœ‹<a class="ae jn" href="https://developer.twitter.com/en/docs/twitter-api/v1/data-dictionary/object-model/tweet" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="0da0" class="mi jp hi bd jq mj mk ml ju mm mn mo jy io mp ip kc ir mq is kg iu mr iv kk ms bi translated">å°†æ•°æ®å­˜å‚¨åœ¨CSVæ–‡ä»¶ä¸­</h1><p id="6707" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">æˆ‘æ­£åœ¨ä»¥CSVæ ¼å¼å­˜å‚¨ç”¨æˆ·â€œSBUâ€å’ŒæŸ¥è¯¢æœç´¢â€œå°¼æ³Šå°”â€çš„ç»“æœçš„æœ€è¿‘150æ¡tweetæ•°æ®ã€‚</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="e9e2" class="jo jp hi lz b fi md me l mf mg">df_user_tweets.to_csv('/Users/nilsonchapagain/Desktop/Blogs/data/sbu_twitter_posts.csv', index=False)</span><span id="0cc9" class="jo jp hi lz b fi mh me l mf mg">df_query_based_tweets.to_csv('/Users/nilsonchapagain/Desktop/Blogs/data/nepal_twitter_news.csv', index=False)</span></pre><h2 id="5bd3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">è°¢è°¢ä½ çœ‹æˆ‘çš„å¸–å­ã€‚æˆ‘å¸Œæœ›ä½ å­¦åˆ°äº†ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿*ğŸ™Œ ğŸ‰</h2></div></div>    
</body>
</html>