<html>
<head>
<title>A simple Day and Night strategy using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的简单日夜策略</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-simple-day-and-night-strategy-using-python-a36c18578161?source=collection_archive---------2-----------------------#2021-06-24">https://medium.com/analytics-vidhya/a-simple-day-and-night-strategy-using-python-a36c18578161?source=collection_archive---------2-----------------------#2021-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cfcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在股票交易中，交易者总是有策略的。策略是我们交易时遵循的一套规则，以最小化风险和最大化利润。这有助于成为一个更有纪律的交易者，并且总是带着计划进入市场。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/7b4248b306eae92ca8a0ff4c43a9c6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*YXlV7R5xb4jrLs8DDfK4Bw.png"/></div></figure><p id="2122" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将介绍其中一种交易策略——日夜交易策略，并向您展示使用python实现该策略的算法。</p><p id="4603" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日夜策略是基于这样一种理论，即股票价格的主要变动发生在一夜之间，而不是在交易时间。</p><p id="1ee7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下策略之所以有效，是因为有证据表明，市场的开市和收盘对短期价格走势、交易量和波动性有影响。</p><p id="60b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将用python实现一个计算股票隔夜回报率的计算机程序。在这里，我们将测试我们对亚马逊和苹果股票的策略。</p><p id="766b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个程序中，你输入你想投资亚马逊和苹果的金额，还输入投资日期。该计划给你每天的利润或损失，直到当前日期，最后告诉你当前的投资价值和总利润。</p><p id="9ba1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这仅用于教育目的。</p><p id="6c27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的代码可以在这里找到。</p><div class="jm jn ez fb jo jp"><a href="https://github.com/momo-senpai/Day-NightStrategy" rel="noopener  ugc nofollow" target="_blank"><div class="jq ab dw"><div class="jr ab js cl cj jt"><h2 class="bd hj fi z dy ju ea eb jv ed ef hh bi translated">莫莫-森派/日间-夜间战略</h2><div class="jw l"><h3 class="bd b fi z dy ju ea eb jv ed ef dx translated">算法交易策略。在GitHub上创建一个帐户，为momo-senpai/Day-NightStrategy开发做出贡献。</h3></div><div class="jx l"><p class="bd b fp z dy ju ea eb jv ed ef dx translated">github.com</p></div></div><div class="jy l"><div class="jz l ka kb kc jy kd jj jp"/></div></div></a></div><p id="4045" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过下面的6个步骤，你可以为自己建立一个日夜策略实施算法</p><p id="a949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">制定策略的指令:</strong></p><p id="c680" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是执行隔夜策略的步骤:</p><p id="5fb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步</strong>:首先我们将为这段代码导入必要的模块。使用的模块有:</p><ol class=""><li id="cfe4" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">熊猫:用于创建数据框</li><li id="1a0e" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">Yfinance:用于访问股票数据</li><li id="8dd0" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">日期时间:用于访问日期和时间</li></ol><p id="042e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在您的系统上安装这些模块，请使用pip安装程序。</p><p id="5de3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在导入模块。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="8e3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2 </strong>:现在我们将接受用户输入的投资金额和投资日期。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/45142a8cb2b1f2f0ebe593f8993f8201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*37dZjNZhz5AF7_Mg1BR1ZQ.png"/></div></figure><p id="fa30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步</strong>:我们会下载亚马逊和AAPL从投资之日到当前日期的股票数据。为了下载数据，我们使用:</p><p id="e463" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">yf.download(ticker，start_date，end_date)其中ticker是股票的符号，对于亚马逊是AMZN，对于苹果是AAPL。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="4a05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据会是这样的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/433cfca47acebdf8e400c820e6844e6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*p4twweyEu_mgnVBv"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/aaf796084682affc0f8a11eb9399c241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*KohRiRvFRlMshZ3s"/></div></figure><p id="dcb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步</strong>:清理数据。对于这种策略，我们只需要股票的开盘价和收盘价。因此，我们将删除所有其他列。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/39bfcbd85286c921f9d19fceabba2ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*Ncg8dtELY76EwCBd-xOeLg.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">删除不必要的列后的数据</figcaption></figure><p id="042b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5 </strong>:现在我们将计算每一天的隔夜回报率百分比。计算隔夜回报的逻辑是用前一天的收盘价减去当天的开盘价。所以是:</p><p id="aeb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(打开—上一页。收盘)/上一周。关闭* 100</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lc"><img src="../Images/b7b40086a00ecd7d34b348bcbf93c687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*bAo4R1ixwkvMr8BBUoF2Gw.png"/></div></figure><p id="fa64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这里shift(-1)用于获取前一个值。</p><p id="04e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第六步</strong>:最后一步是计算每天的盈亏，当前投资价值，总利润%。并将其打印到输出中。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="eebc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">最终输出:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ld"><img src="../Images/c924b49278518156302af65ecd61519d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*4UkEqhQKJRJIeU57n_15VQ.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">亚马逊的最终输出</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es le"><img src="../Images/fa36d84ec7332d40ac695b57215db12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*g6QXyQmu6RWSA0gBd36rcA.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">苹果公司的最终产量</figcaption></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="82ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">性能分析</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lm"><img src="../Images/0936fd0d45ea0d8d33fad4ca2bb85cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5RY89bkpf0QeH3_3sEle1Q.png"/></div></div></figure><p id="ea0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上表可以看出，无论是苹果还是亚马逊，昼夜策略都比简单的长期持有策略(即购买并永远持有)带来了更好的回报。你可以使用这种策略，在收市前买入，第二天开市时卖出</p><p id="4c7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在⅞案例中，日夜策略击败了长期持有策略，在更长的时间框架内可以获得更好的回报。这再次证明了大多数股票价格变动都是在一夜之间发生的。虽然这是一个伟大的战略，但它仍然有一些缺点。</p><p id="1c71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">利弊:</p><p id="3446" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种策略的一些优点是:</p><ul class=""><li id="797b" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc lr kk kl km bi translated">它不受市场时间波动的影响。</li><li id="2a84" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">在营业时间，动量和流动性都很高，所以交易没有困难。</li><li id="5e43" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">资本面临短期风险。</li></ul><p id="a682" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种策略的一些缺点包括:</p><ul class=""><li id="659b" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc lr kk kl km bi translated">受财务报告的影响很大。</li><li id="4d86" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">不能免于新闻引起的价格变化。</li></ul><p id="a00f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以通过以下方式改进这一战略:</p><ul class=""><li id="aff4" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc lr kk kl km bi translated">把周末作为回报的一个因素。</li><li id="6b76" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">考虑到新闻和财务报告的变化。</li><li id="c369" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">使用订单数据进行回溯测试。</li></ul><p id="8138" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有许多其他算法交易策略非常容易理解和实施，类似于日夜策略。其中一些包括:</p><ul class=""><li id="2f6d" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc lr kk kl km bi translated">基于趋势的策略:根据确定的趋势进行交易。</li><li id="81b0" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">套利交易:利用不同市场的价格差异。</li><li id="a2cf" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc lr kk kl km bi translated">均值回归:基于价格波动后回到均值的理论。</li></ul><p id="7b03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读。希望这篇文章对你有所帮助，也希望它能给你一个模板，让你将来学习和编写自己的策略。</p></div></div>    
</body>
</html>