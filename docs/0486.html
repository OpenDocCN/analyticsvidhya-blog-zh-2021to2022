<html>
<head>
<title>Performing Exploratory Data Analysis in Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中执行探索性数据分析。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/performing-exploratory-data-analysis-in-python-45b6ad37fc41?source=collection_archive---------8-----------------------#2021-01-18">https://medium.com/analytics-vidhya/performing-exploratory-data-analysis-in-python-45b6ad37fc41?source=collection_archive---------8-----------------------#2021-01-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8500" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">探索性数据分析是对数据进行初步调查的过程，以发现模式，发现异常值，并用汇总统计数据和图形表示来测试假设。<br/>分享一下我对这个概念的理解。我将举一个贷款接受数据集的例子，并使用python来研究它。</p><h2 id="33da" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数据描述</h2><p id="aba8" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">从Analytics Vidhya网站下载数据。以下URL包含训练和测试CSV数据。</p><p id="89fb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网址:<a class="ae kc" href="https://datahack.analyticsvidhya.com/contest/practice-problem-loan-prediction-iii/" rel="noopener ugc nofollow" target="_blank">https://data hack . analyticsvidhya . com/contest/practice-problem-loan-prediction-iii/</a></p><p id="7bf2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上述链接中提供的数据集是Dream Housing Finance company提供的，该公司负责在城市、半城市和农村地区发放房屋贷款。</p><p id="226c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它由以下变量组成:性别、婚姻状况、教育程度、受抚养人人数、申请人收入、共同申请人收入、贷款金额(千)、信用记录、唯一贷款ID、自营职业状态、贷款金额期限(月)、财产面积、贷款状态(如果贷款获得批准，则为Y else N)。</p><p id="d53b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">训练csv数据</strong>包含贷款状态变量(目标变量)和用于训练我们的模型的其他变量。</p><p id="3a4d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">测试csv数据</strong>不包含贷款状态变量(目标变量)，因为模型将应用于该数据来预测贷款状态。</p><h2 id="b1ce" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">影响贷款接受决策的因素</h2><p id="2975" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">所有贷款人都有自己的标准，但在批准贷款申请时，主要考虑这些因素</p><ul class=""><li id="1360" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated"><strong class="ig hi">家庭收入:</strong>较高的家庭收入增加了贷款获批的机会。</li><li id="f2ef" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated"><strong class="ig hi">信用记录:</strong>有及时偿还债务记录的申请人获得批准的可能性更大。</li><li id="08e7" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated"><strong class="ig hi">贷款金额:</strong>贷款金额越低，审批率越高。</li><li id="23b7" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated"><strong class="ig hi">债务偿还:</strong>每月债务偿还额较低的申请人，其申请获得批准的概率较高。</li><li id="f543" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">教育:个人更高的资历增加了获得高薪工作的可能性。因此，导致更高的收入和增加贷款批准的机会。</li><li id="0b3f" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated"><strong class="ig hi">被赡养人</strong>:家庭中被赡养人的数量越少，贷款获批的几率越大。</li></ul><h2 id="4871" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">在Jupyter笔记本中加载数据集</h2><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="58fe" class="jc jd hh kw b fi la lb l lc ld">#Importing Libraries <br/>import pandas as pd<br/># Loading the train and test dataset <br/>traindf = pd.read_csv("C:\\Users\\welcome\\Desktop\\MLProjects\\Loan Prediction\\train_ctrUa4K.csv")<br/>testdf = pd.read_csv("C:\\Users\\welcome\\Desktop\\ML Projects\\Loan Prediction\\test_lAUu6dG.csv")</span></pre><h2 id="445c" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">探索训练数据集</h2><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="da90" class="jc jd hh kw b fi la lb l lc ld"># In the train dataset there are 614  rows and 13 columns <br/>traindf.shape<br/><strong class="kw hi">(614, 13)</strong></span><span id="387c" class="jc jd hh kw b fi le lb l lc ld"># In the test dataset there are 367  rows and 12 columns <br/>testdf.shape<br/><strong class="kw hi">(367,12</strong>)</span><span id="4d63" class="jc jd hh kw b fi le lb l lc ld"># Features in the Train Dataset<br/>columns = traindf.columns<br/>print(columns)<br/><strong class="kw hi">Index(['Loan_ID', 'Gender', 'Married', 'Dependents', 'Education',<br/>       'Self_Employed', 'ApplicantIncome', 'CoapplicantIncome',    'LoanAmount','Loan_Amount_Term', 'Credit_History', 'Property_Area', 'Loan_Status'])</strong></span><span id="b282" class="jc jd hh kw b fi le lb l lc ld"># Data Type and number of observations in each column<br/>traindf.info()<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 614 entries, 0 to 613<br/>Data columns (total 13 columns):<br/> <strong class="kw hi">#   Column             Non-Null Count  Dtype  <br/>---  ------             --------------  -----  <br/> 0   Loan_ID            614 non-null    object <br/> 1   Gender             601 non-null    object <br/> 2   Married            611 non-null    object <br/> 3   Dependents         599 non-null    object <br/> 4   Education          614 non-null    object <br/> 5   Self_Employed      582 non-null    object <br/> 6   ApplicantIncome    614 non-null    int64  <br/> 7   CoapplicantIncome  614 non-null    float64<br/> 8   LoanAmount         592 non-null    float64<br/> 9   Loan_Amount_Term   600 non-null    float64<br/> 10  Credit_History     564 non-null    float64<br/> 11  Property_Area      614 non-null    object <br/> 12  Loan_Status        614 non-null    object <br/>dtypes: float64(4), int64(1), object(8)</strong></span><span id="81c7" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">#There are three data types in the train data set - Float, Integer and Object</strong></span><span id="2cd3" class="jc jd hh kw b fi le lb l lc ld">#Categorical Columns in the train dataset are features with data type object<br/><strong class="kw hi">Gender,Married,Dependents,Education,Self_Employed,Property_Area,LoanStatus</strong></span><span id="9c1e" class="jc jd hh kw b fi le lb l lc ld"># Numerical Columns in the train dataset are features with datatype float and integer <br/><strong class="kw hi">ApplicantIncome,CoapplicantIncome,LoanAmount,LoanAmount_term,CreditHistory</strong></span><span id="99af" class="jc jd hh kw b fi le lb l lc ld"># There are also missing values in <strong class="kw hi">Gender, married,Dependents,Self Employed,Loan Amount, Loan Amount Term and Credit History features.</strong></span></pre><h2 id="a424" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">分析数据集中的变量</h2><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ebb3" class="jc jd hh kw b fi la lb l lc ld">#Checking the proportion of Approved Loan Applications in the data<br/>#68% of the loan applications in the train data got approved while 31% applications were rejected.</span><span id="d056" class="jc jd hh kw b fi le lb l lc ld">traindf['Loan_Status'].value_counts(normalize = True)<br/><strong class="kw hi">Y    0.687296<br/>N    0.312704</strong><br/>Name: Loan_Status, dtype: float64</span><span id="4ff8" class="jc jd hh kw b fi le lb l lc ld"># Plotting the Loan Status bar chart<br/>traindf['Loan_Status'].value_counts(normalize = True).plot.bar()</span></pre><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lf"><img src="../Images/d1b4aaa20a654db03574c9feb0c1b070.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*160zSp2jGhIsSHdC1G0E5Q.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx translated"><strong class="bd je">图1:贷款申请批准率</strong></figcaption></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="a717" class="jc jd hh kw b fi la lb l lc ld"># Analyzing the categorical variables in the data</span><span id="8813" class="jc jd hh kw b fi le lb l lc ld">categorical_columns = ['Gender', 'Married', 'Dependents', 'Education','Self_Employed','Property_Area','Loan_Status','Credit_History']</span><span id="2123" class="jc jd hh kw b fi le lb l lc ld">for j in categorical_columns : <br/>     a = traindf[j].value_counts(normalize = True)<br/>     b = a*100<br/>     print(b)</span><span id="3fdf" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Output :</strong></span><span id="b828" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Male      80.0<br/>Female    18.0<br/>Name: Gender, dtype: float64</strong></span><span id="8c01" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Yes    65.0<br/>No     35.0<br/>Name: Married, dtype: float64</strong></span><span id="efc8" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">0     56.0<br/>1     17.0<br/>2     16.0<br/>3+     8.0<br/>Name: Dependents, dtype: float64</strong></span><span id="f7c2" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Graduate        78.0<br/>Not Graduate    22.0<br/>Name: Education, dtype: float64</strong></span><span id="0392" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">No     85.910653<br/>Yes    14.089347<br/>Name: Self_Employed, dtype: float64</strong></span><span id="4528" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Semiurban    37.947883<br/>Urban        32.899023<br/>Rural        29.153094<br/>Name: Property_Area, dtype: float64</strong></span><span id="c8a0" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Y    68.729642<br/>N    31.270358<br/>Name: Loan_Status, dtype: float64</strong></span><span id="e91c" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">1.0    84.219858<br/>0.0    15.780142<br/>Name: Credit_History, dtype: float64</strong></span></pre><ul class=""><li id="2f12" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">在训练数据集中，80%的申请者是男性，18%是女性。</li><li id="ce1d" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">在培训数据中，65%的申请人已婚。</li><li id="9a3b" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">56%的申请人没有家属。</li><li id="f638" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">百分之七十八的申请者是毕业生。</li><li id="2c56" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">14%的申请者是个体经营者</li><li id="1533" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">85%的申请人已经按时偿还了贷款。</li><li id="ed9e" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">大多数申请者来自半城市地区(38%)，其次是城市地区(33%)。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="6184" class="jc jd hh kw b fi la lb l lc ld"># Finding mean and median of the numerical columns<br/>for j in numerical_columns :<br/>    print (j ,round(traindf[j].mean(),2),round(traindf[j].median(),2))<br/>                   <strong class="kw hi">Mean</strong>      <strong class="kw hi">Median<br/>ApplicantIncome    5403.46   3812.5<br/>CoapplicantIncome  1621.25   1188.5<br/>LoanAmount         146.41    128.0<br/>Loan_Amount_Term   342.0     360.0</strong></span><span id="648f" class="jc jd hh kw b fi le lb l lc ld"># Plotting the Distribution of the Numerical Variables in the dataset</span><span id="c51f" class="jc jd hh kw b fi le lb l lc ld">numerical_columns = ['ApplicantIncome', 'CoapplicantIncome', 'LoanAmount','Loan_Amount_Term']</span><span id="a735" class="jc jd hh kw b fi le lb l lc ld">for idx,num_col in enumerate(numerical_columns):<br/>    sns.displot(x= num_col,data=traindf,bins=20,kde= True)<br/>    plt.show()</span></pre><ul class=""><li id="2671" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">申请人收入的分布是右偏的，申请人收入的中位数是5403。</li><li id="e85c" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">共同申请人收入的分布是右偏的，共同申请人收入的中位数是1621。</li><li id="6f94" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">贷款金额的分布(000 ')是右偏的，贷款金额的中位数是12.8万。</li><li id="fb31" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">贷款期限分布呈左偏，贷款期限中位数为30年。</li></ul><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es ln"><img src="../Images/eb7fbe24991a23de5b3318751e5a80c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*FXh_NU7AQJGqE_UpraM1Wg.png"/></div></figure><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es ln"><img src="../Images/05402bfdaa01d66c402d1dbec4a68325.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*6yCNStP1A8aVj_1j5fSlyw.png"/></div></figure><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es ln"><img src="../Images/94873b101fa9f51817fa4ecd26417f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*FRdBNAPT05rjd5ykQf8ZfA.png"/></div></figure><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es ln"><img src="../Images/4ffe899bd48316e0af8454deb866e553.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*y6XUWioS9l8JciI2xTQ5vg.png"/></div></figure><h2 id="482c" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数据集中变量与目标变量(贷款状态)的关系</h2><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="72eb" class="jc jd hh kw b fi la lb l lc ld">categorical_columns1 = ['Gender', 'Married', 'Dependents', 'Education', 'Self_Employed', 'Property_Area','Credit_History']<br/>for i in categorical_columns1 :<br/>    j = pd.crosstab(traindf['Loan_Status'],traindf[i],normalize = 'columns')<br/> print(j)<br/> j.plot(kind = 'bar', stacked = False, figsize = (6,6))</span><span id="247a" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Gender         Female      Male<br/>Loan_Status                    <br/>N            0.330357  0.306748<br/>Y            0.669643  0.693252</strong></span><span id="e6a2" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># The approval rate of both the genders is almost the same</strong></span><span id="7547" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Married</strong>           <strong class="kw hi"> No</strong>      <strong class="kw hi">Yes</strong><br/><strong class="kw hi">Loan_Status                   <br/>N            0.370892  0.28392<br/>Y            0.629108  0.71608</strong></span><span id="31b3" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># The approval rate of married applicants is more vis-a-vis unmarried applicants</strong></span><span id="44ea" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Dependents          0         1         2        3+<br/>Loan_Status                                        <br/>N            0.310145  0.352941  0.247525  0.352941<br/>Y            0.689855  0.647059  0.752475  0.647059</strong></span><span id="8a61" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># The approval rate is the highest for applicants with two dependents followed by applicants with no - dependency.</strong></span><span id="2057" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Education    Graduate  Not Graduate<br/>Loan_Status                        <br/>N            0.291667       0.38806<br/>Y            0.708333       0.61194</strong></span><span id="fa42" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># The approval rate for Graduates is higher vis-a-vis applicants with no graduation.</strong></span><span id="e589" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Self_Employed     No       Yes<br/>Loan_Status                   <br/>N              0.314  0.317073<br/>Y              0.686  0.682927<br/># The approval rate of self- employed applicants is the same as non- self employed applicants.</strong></span><span id="a4a0" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Property_Area     Rural  Semiurban     Urban<br/>Loan_Status                                 <br/>N              0.385475    0.23176  0.341584<br/>Y              0.614525    0.76824  0.658416<br/># The applicants with the property in Semi-Urban has the highest approval rate.</strong></span><span id="b0b1" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Credit_History       0.0       1.0<br/>Loan_Status                       <br/>N               0.921348  0.204211<br/>Y               0.078652  0.795789</strong></span><span id="3100" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># High Approval rate of applicants with good credit history.</strong></span></pre><ul class=""><li id="dc5c" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">男性的贷款批准率略高于女性。</li><li id="a175" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">已婚申请者比其他人有更高的支持率。</li><li id="512d" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">有两个受抚养人的申请人的批准率最高，其次是没有受抚养人的申请人。</li><li id="d8bd" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">毕业生的批准率比没有毕业的申请者多。</li><li id="a0b5" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">个体户的批准率与非个体户相同。</li><li id="ce19" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">在半城市地区拥有房产的贷款申请人的批准率最高。</li><li id="b09f" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">具有良好信用记录的申请人的批准率比其他人高。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="91fa" class="jc jd hh kw b fi la lb l lc ld">numerical_columns = ['ApplicantIncome', 'CoapplicantIncome', 'LoanAmount','Loan_Amount_Term']<br/>for idx,m in enumerate(numerical_columns):<br/>    plt.subplot(222)<br/>    a = traindf.groupby('Loan_Status')[m].median()<br/>    print(a)<br/>    a.plot.bar(title = m)<br/>    plt.show()</span><span id="1cf3" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Loan_Status<br/>N    3833.5<br/>Y    3812.5<br/>Name: ApplicantIncome, dtype: float64</strong></span><span id="49af" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Loan_Status<br/>N     268.0<br/>Y    1239.5<br/>Name: CoapplicantIncome, dtype: float64</strong></span><span id="3886" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Loan_Status<br/>N    129.0<br/>Y    126.0<br/>Name: LoanAmount, dtype: float64</strong></span><span id="9c7a" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi">Loan_Status<br/>N    360.0<br/>Y    360.0<br/>Name: Loan_Amount_Term, dtype: float64</strong></span></pre><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lo"><img src="../Images/68e5ce2daaa389afcfa5bd196f65dcd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*Vr1IbvNy6FzQqc48exI3Pg.png"/></div></figure><ul class=""><li id="76d3" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">具有批准贷款状态的贷款申请人具有较高的共同申请人收入中位数。</li><li id="240f" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">从申请人收入一栏得出的推论并不重要。</li><li id="c705" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">具有批准贷款状态的贷款申请人申请的贷款金额比具有拒绝状态的申请人申请的贷款金额稍低。</li></ul><p id="a5a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，为申请人收入、共同申请人收入和贷款额变量创建箱可以帮助从数据中获得有意义的见解。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="72b3" class="jc jd hh kw b fi la lb l lc ld"><strong class="kw hi"># Plotting the Applicant Income and Loan Amount after creating bins</strong><br/>import numpy as np<br/>from numpy import nanpercentile<br/>analysiscolumns = ['ApplicantIncome', 'LoanAmount']<br/>for idx, i in enumerate(analysiscolumns):<br/>    a = int(traindf[i].min())<br/>    b = int(nanpercentile(traindf[i],25))<br/>    c = int(nanpercentile(traindf[i],50))<br/>    d = int(nanpercentile(traindf[i],75))<br/>    e = int(traindf[i].max())<br/>    bins = [a,b,c,d,e] <br/>    group = ['Low','Average', 'High','Very High']<br/>    j = pd.cut(traindf[i],bins , labels = group)<br/>    r =  pd.crosstab(traindf['Loan_Status'],j,normalize = 'columns')<br/>    r.plot(kind = 'bar', stacked = False, figsize = (6,6),title = i)<br/>    print(r)</span><span id="612b" class="jc jd hh kw b fi le lb l lc ld"><strong class="kw hi"># Plotting the CoApplicant Income after creating bins<br/></strong>import numpy as np<br/>from numpy import nanpercentile<br/>analysis = ['CoapplicantIncome']<br/>for idx, i in enumerate(analysis):<br/>    a = int(traindf[i].min())<br/>    c = int(nanpercentile(traindf[i],50))<br/>    d = int(nanpercentile(traindf[i],75))<br/>    e = int(traindf[i].max())<br/>    bins = [a,c,d,e] <br/>    group = ['Low','Medium','High']<br/>    j = pd.cut(traindf[i],bins , labels = group)<br/>    r =  pd.crosstab(traindf['Loan_Status'],j,normalize = 'columns')<br/>    r.plot(kind = 'bar', stacked = True, figsize = (6,6),title = i)<br/>    print(r)</span></pre><ul class=""><li id="4083" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">申请人的收入不影响贷款批准率(见下图)。</li><li id="e4f2" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">申请更高贷款金额的申请人面临更高的拒绝率。</li><li id="3c5e" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">低共同申请人收入的申请人被拒率最少(是无效结论。因此，尝试合并申请人和共同申请人的收入作为总收入)。</li></ul><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lf"><img src="../Images/1008541c9a83433352f4cbec772d8310.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*5EdG4IYUR-n28A5zt5Ovbg.png"/></div></figure><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lf"><img src="../Images/a523cdf2519f119f5c4ee9f238116d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*6w3dRm9rODJDOvfP2bnxYQ.png"/></div></figure><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lf"><img src="../Images/d73b74c702431f11071ffe047424bdc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*lveWEYM9huRh8CljSTx1Tw.png"/></div></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="43d2" class="jc jd hh kw b fi la lb l lc ld"><strong class="kw hi"># Plotting the Total Household Income after creating bins<br/></strong>traindf['Total Household Income'] = traindf['ApplicantIncome']+ traindf['CoapplicantIncome']</span><span id="ab36" class="jc jd hh kw b fi le lb l lc ld">import numpy as np<br/>from numpy import nanpercentile<br/>analysiscolumns = ['Total Household Income']<br/>for idx, i in enumerate(analysiscolumns):<br/>    a = int(traindf[i].min())<br/>    b = int(nanpercentile(traindf[i],25))<br/>    c = int(nanpercentile(traindf[i],50))<br/>    d = int(nanpercentile(traindf[i],75))<br/>    e = int(traindf[i].max())<br/>    bins = [a,b,c,d,e] <br/>    group = ['Low','Average', 'High','Very High']<br/>    j = pd.cut(traindf[i],bins , labels = group)<br/>    r =  pd.crosstab(traindf['Loan_Status'],j,normalize = 'columns')<br/>    r.plot(kind = 'bar', stacked = False, figsize = (6,6),title = i)<br/>    print(r)</span></pre><ul class=""><li id="2779" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">高收入申请者的批准率是所有收入群体中最高的。但是对于收入非常高的申请人来说是最低的。(这个结果是违反直觉的)。</li></ul><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lp"><img src="../Images/1d26614483ebdd36f1b3d41ac8f4c71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*0lkcKMaUBVg2rK3WORbUVA.png"/></div></figure><h2 id="e031" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">使用贷款状态特征检查数据集中数值变量之间的相关性</h2><p id="587e" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">检查数据集中数字变量与贷款状态特征的相关性。贷款状态列中的“Y”和“N”被替换为1和0。为了直观显示这种相关性，我们使用了热图。颜色越深表示变量之间的相关性越高。</p><p id="d1b9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在支付每月债务付款后的家庭总收入变量被创建，以查看它是否影响贷款批准率，与我们的预期不同，该变量与贷款批准率无关。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="0364" class="jc jd hh kw b fi la lb l lc ld">traindf['Monthly Loan payment'] =traindf['LoanAmount']/traindf['Loan_Amount_Term']</span><span id="589c" class="jc jd hh kw b fi le lb l lc ld">traindf['Total Household Income after debt repayments'] = traindf['Total Household Income']-traindf['Monthly Loan payment']</span><span id="1ddf" class="jc jd hh kw b fi le lb l lc ld">traindf[‘Loan_Status’].replace([‘Y’,’ N’],[1,0], inplace = True)import seaborn as sns<br/>matrix = traindf.corr()<br/>f, ax = plt.subplots(figsize=(10, 12))<br/>sns.heatmap(matrix, vmax=.8, square=True, cmap=”BuPu”,annot=True)<br/></span></pre><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es lq"><img src="../Images/96b2af61dac74b3fa81634d80e8ef6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*_5jWsCX5PNa8sixZRkyw8g.jpeg"/></div></figure><ul class=""><li id="4c9e" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">申请人收入和家庭收入之间的高度正相关。</li><li id="c23b" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">贷款金额与申请人收入呈正相关。</li><li id="47e2" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">贷款金额与家庭收入正相关。</li><li id="c039" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">批准的贷款状况和良好的信用记录之间的正相关关系。</li><li id="8a08" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">贷款批准率与家庭总收入、贷款期限、贷款金额、共同申请人收入和每月债务偿还后剩余的总收入没有相关性。</li></ul><h2 id="0d64" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">结论</h2><p id="e074" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">在本文中，我们研究了贷款接受数据集，并对其结构和特性有了较高的理解。点击💚如果你喜欢这篇文章。有问题可以写在下面的评论区，我会尽力解答。</p></div></div>    
</body>
</html>