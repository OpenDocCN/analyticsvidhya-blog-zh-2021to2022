<html>
<head>
<title>How To Generate MFCC From Audio. — ML For Lazy 2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从音频生成MFCC？— ML代表懒惰2021</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-generate-mfcc-from-audio-ml-for-lazy-2021-42c2fdfa208?source=collection_archive---------8-----------------------#2021-05-27">https://medium.com/analytics-vidhya/how-to-generate-mfcc-from-audio-ml-for-lazy-2021-42c2fdfa208?source=collection_archive---------8-----------------------#2021-05-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="015f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MFCCs在音频处理和语音识别系统中非常重要。假设你想让一台机器对音频声音进行分类，使用MFCCs，并得到令人着迷的结果。</p><p id="3812" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">想学习我们如何使用python来完成这个复杂的任务，并在音频处理和分类任务中获得最佳结果。那么，让我们来了解一下什么是MFCC以及如何获得它们的基本概念。</em>T3】</strong></p><h1 id="a3b6" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">什么是MFCC</h1><p id="6b92" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">MFCC，梅尔频率倒谱系数的首字母缩写。当我们处理音频和音频处理技术时，它们非常重要。只要考虑它们，你的音频中最好的，你的音频所代表的最好的。</p><p id="fd3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然完整的形式和缩写看起来紧张和复杂，但它是如此简单的概念，易于理解。</p><p id="cce9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我试着让你理解这个“看起来像火”的概念。打个比方，你在课堂上学习，你有一个激发学生玩某种游戏的计划，比如足球。不，你每天都在讲课，持续10天，在第10天结束时，学生们开始加入俱乐部，开始踢足球。那些学生受到激励，加入了进来。</p><p id="a229" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在你的演讲中，你说了一些有趣的事情和一些奇怪的事情。加入俱乐部的学生只考虑那些在现实世界中影响他们的积极因素。而那些没有加入的人拿着怪异的东西，决定不加入。</p><p id="01a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们都考虑了那些对他们影响最大，或者说对他们最重要，对他们最有用，最有利于他们做出决定的问题。</p><p id="073d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以同样的方式，MFCC是系数，即从所有音频数据中重要的一些数值，并且只取重要的和具有最大值的部分。这些系数对音频特征贡献最大。它们会极大地影响音频样本，并且是音频样本中的重要值之一。</p><p id="f930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在，让我们看看同一个</strong>的技术部分。</p><p id="4358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MFCC系数包含关于不同光谱带中变化率的信息。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/fccbc2dc869625e0fce938b338bb33c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/0*jOZ6pUMjTgHJmgp_.png"/></div></figure><h1 id="29df" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">要获得MFCC，我们遵循以下步骤:</h1><h2 id="226f" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">→对信号进行傅里叶变换</h2><h2 id="681a" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">→使用三角形重叠窗口或余弦重叠窗口将功率映射到mel标度</h2><h2 id="f660" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">→每个mel频率下的功率记录</h2><h2 id="c974" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">→对mel对数幂进行DCT——离散余弦变换</h2><h2 id="790b" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">→MFCC是合成光谱的振幅</h2><p id="0aae" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">由于我们不需要详细了解这些过程，这些过程将由库来处理。所以记住他们的名字而不是别的。这些可能会给你一个想法，当我们得到这些系数时，实际上在幕后发生了什么。</p><h1 id="c171" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">它们代表了什么？</h1><p id="2785" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">如上所述，我们按照上述步骤从音频信号中提取MFCCs。由于我们采用傅立叶变换，它们包含了不同光谱带中速率变化的信息。</p><blockquote class="ld le lf"><p id="5c43" class="if ig jd ih b ii ij ik il im in io ip lg ir is it lh iv iw ix li iz ja jb jc hb bi translated">如果MFCCs为正值，那么大部分频谱能量存在于低频。如果MFCCs为负值，大多数频谱能量集中在高频。</p></blockquote><p id="a193" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当处理声音和MFCCs时，低阶系数包含关于源-滤波器传递函数的频谱形状的大部分信息。</p><p id="00a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">技术方面的东西已经够多了。让我们编写python代码，并使用一些库从音频信号中提取这些MFCCs。</p><h1 id="2ca7" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">MFCC应用</h1><p id="7c83" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">MFCCs通常用作<a class="ae lj" href="https://en.wikipedia.org/wiki/Speech_recognition" rel="noopener ugc nofollow" target="_blank">语音识别</a>系统中的<a class="ae lj" href="https://en.wikipedia.org/wiki/Features_(pattern_recognition)" rel="noopener ugc nofollow" target="_blank">功能</a>，例如自动将音频翻译成文本的系统以及其他各种语音识别系统。语音识别系统有着广泛的应用，在当今世界，它是深度学习的主要分支之一，机器学习。它正在为世界的自动化系统和语言处理系统做出贡献。</p><p id="a3d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个常见的应用是在<a class="ae lj" href="https://en.wikipedia.org/wiki/Music_information_retrieval" rel="noopener ugc nofollow" target="_blank">音乐信息检索</a>系统中，包括<a class="ae lj" href="https://en.wikipedia.org/wiki/Genre" rel="noopener ugc nofollow" target="_blank">流派</a>分类、音频相似性测量、重音分类等等。这些是我在我的项目中用于口音分类的相同特征。</p><h2 id="4013" class="kp jf hi bd jg kq kr ks jk kt ku kv jo iq kw kx js iu ky kz jw iy la lb ka lc bi translated">考虑的重点。</h2><p id="adb0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">当数据中存在噪声时，MFCCs不是非常有效，因此我们需要在自动语音识别系统中归一化它们的值，以减少噪声对数据的影响。</p><h1 id="a3ec" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">如何获得MFCC值</h1><p id="afb0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">获得这些MFCCs，然后使用它们似乎很乏味。别担心。我们有一些库，我们可以用它们来获得MFCCS并轻松地使用它们。</p><p id="5cae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Librosa是其中一个库，在处理音频方面非常流行。T13】</p><p id="3241" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> Scipy是另一个，是一个主要的包，用于各种用途，也带音频。</em> </strong></p><p id="6f8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用Librosa来获得这些MFCCs。那么，让我们开始吧。</p><h1 id="42a0" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">如何获得MFCC光谱图并绘制它们？</h1><p id="2160" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">首先，让我们导入所有需要的库，然后我们会看到我们需要进一步做什么。希望你知道所有库的用途。由于我在本教程中不太使用Numpy和Pandas，所以我喜欢将它们保留在我的脚本中。它给我一种工作的感觉。</p><pre class="ki kj kk kl fd lk ll lm ln aw lo bi"><span id="fee7" class="kp jf hi ll b fi lp lq l lr ls">import numpy as np import pandas as pd import librosa as lb import librosa.display import matplotlib.pyplot as plt</span></pre><p id="360e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入库之后，我创建了两个列表来存储音频数据和它们的采样率。虽然不是必需的，但我需要对这些值做进一步的处理，所以我使用了它们。</p><p id="84a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我有一个CSV文件，其中包含音频文件的名称及其对应的类。因此，让我们导入CSV文件，然后进一步工作。</p><pre class="ki kj kk kl fd lk ll lm ln aw lo bi"><span id="c9c1" class="kp jf hi ll b fi lp lq l lr ls">csvPath = "path to csv" metadata = pd.read_csv(csvPath) metadata.head()</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lt"><img src="../Images/a0210b6e44c2b6ec97956eae8792704c.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/0*pY_BSwpBcWIO7Rx9.png"/></div></figure><pre class="ki kj kk kl fd lk ll lm ln aw lo bi"><span id="cb49" class="kp jf hi ll b fi lp lq l lr ls">audioData = [] <br/>srate = [] <br/>for index, row in metadata.iterrows(): <br/>filename = "Path to the file" data, sampleRate = lb.load(filename)         audioData.append(data) <br/>srate.append(sampleRate) <br/>plt.figure(figsize=(10,3)) <br/>lb.display.waveplot(data, sampleRate)</span></pre><p id="6b06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用'<em class="jd"> Iterrows()' </em>,对数据集(即pandas dataframe)中的行逐一进行迭代，并对每一行逐一执行操作。在这里，我使用列'<em class="jd"> file_name' </em>加载数据集中的所有文件，并从数据集中提取音频数据和每个音频文件的采样率。为了使波形可视化，我使用了librosa的“<strong class="ih hj"><em class="jd">display . wave plot()</em></strong>”，以获得音频图像的感觉。由于我在整个数据集中使用了循环的<em class="jd">，我将获得数据集中所有音频文件的波形。</em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lu"><img src="../Images/2e0998c2ee3582cb1e90cd8847d3aa97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yT3by1Mcf2cP19vM.png"/></div></div></figure><p id="5ddc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们使用zip函数迭代我创建的列表。</p><p id="f1a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> a —音频数据，s —采样率</em> </strong></p><p id="6153" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要得到MFCC特征，我们需要做的就是调用librosa的<strong class="ih hj"><em class="jd">【feature . MFCC</em></strong>】,给它音频数据和相应的音频信号的采样率。现在，在打印出MFCC后，我们将会看到类似数字阵列的东西。</p><pre class="ki kj kk kl fd lk ll lm ln aw lo bi"><span id="fe8f" class="kp jf hi ll b fi lp lq l lr ls">for a, s in zip(audioData, srate):<br/> mfcc = librosa.feature.mfcc(y=a, sr=s) <br/>print(mfcc)</span></pre><p id="3897" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们正在使用列表，所以我们将逐个获得所有音频样本的MFCCs。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lz"><img src="../Images/8b52920a9a901902149d506693cb81e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u4PLdpdYmI9wtuzu.png"/></div></div></figure><p id="099b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以做一件事，那就是在一个特定的范围内调整这些MFCC。让我们这样做吧，划船。</p><pre class="ki kj kk kl fd lk ll lm ln aw lo bi"><span id="1e05" class="kp jf hi ll b fi lp lq l lr ls">for a, s in zip(audioData, srate): <br/>mfcc = librosa.feature.mfcc(y=a, sr=s) <br/>mfccScaled = np.mean(mfcc.T, axis=0) <br/>print(mfccScaled) plt.plot(mfccScaled, 'g') <br/>plt.show()</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ma"><img src="../Images/ad23c8e1c152045d0cbb3fd7793356d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/0*PtVevr_BL_pPycZt.png"/></div></figure><h1 id="6be7" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">最后的想法</h1><p id="2779" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在这篇博文中，我们看到了如何使用librosa库并获得MFCC特性。这是从音频数据中提取重要特征的一种方式，主要用于音频处理系统和其他自动语音系统。</p><p id="c961" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，轮到您动手编写这个简单而重要的教程了。所以，起来开始编码，享受学习吧。</p><p id="96b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这个帖子，分享它，给它👍并在下方留言评论。</p><p id="a7c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想看我以前的帖子，那么看看这个关于<a class="ae lj" href="https://mlforlazy.in/masters-project-my-first-day/" rel="noopener ugc nofollow" target="_blank">硕士项目的帖子，我的第一天。</a></p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es mb"><img src="../Images/c7f320d289302c43eef459be8a7fb1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:192/0*dDzzJTidth2Je8qv"/></div></figure><p id="7e3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是一名来自克什米尔的计算机科学研究生。在这些日子里，我转向传播关于机器学习的信息，这是我的激情和未来的研究。目的是让人们了解和理解机器和深度学习本身的基本概念，这些概念对该领域的进一步成功至关重要。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="df47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">原载于2021年5月27日</em><a class="ae lj" href="https://mlforlazy.in/how-to-generate-mfcc-from-audio/" rel="noopener ugc nofollow" target="_blank"><em class="jd">https://mlforlazy . in</em></a><em class="jd">。</em></p></div></div>    
</body>
</html>