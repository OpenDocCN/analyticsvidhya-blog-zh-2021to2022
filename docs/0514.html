<html>
<head>
<title>A/B Testing: Simple explanation of Maths behind</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B测试:简单解释背后的数学</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-b-testing-simple-explanation-of-maths-behind-a3b2f059e619?source=collection_archive---------9-----------------------#2021-01-19">https://medium.com/analytics-vidhya/a-b-testing-simple-explanation-of-maths-behind-a3b2f059e619?source=collection_archive---------9-----------------------#2021-01-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/19ce347220a855482ae6da07ccf7ed65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yWeU2b11BT7Ld5SEgTJr5w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片作者。</figcaption></figure><h1 id="a55c" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">简介</strong></h1><p id="4bff" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在将数据科学解决方案或任何功能更新集成到产品中之前，假设测试或A/B测试是至关重要的一步。这基本上是一种统计方法，用来衡量我们试图在产品中添加/更新的功能的影响。</p><p id="0971" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">根据维基百科，</p><p id="a44b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><em class="kv"> A/B测试是一种比较单个变量两个版本的方法，通常通过测试受试者对变量A和变量B的反应，确定两个变量中哪个更有效。A/B测试包括统计假设测试的应用。</em></p><p id="b9c3" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">由于A/B测试是一种测试，它应该有三个基本组成部分，因为它们在任何类型的测试中，一个需要测试的指标/变量，一个执行测试的方法和一个评估结果/通过标准的方法。</p><p id="7233" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">例如，如果我们试图添加一个功能，将提高点击率，那么我们将比较两个版本，A和B的点击率变量。版本A中的变量值与当前产品一致，版本B中的变量值与产品的更新版本一致。</p><h1 id="9fe2" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">待测变量</strong></h1><p id="2e0a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">测试变量/指标应量化新功能的性能，如更新网站的点击率、推荐页面的成功支付等。</p><p id="0a1b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们可以从两个版本的用户样本集中测量变量的样本值。版本A是与原产品相同的样品组，这个组称为控制组。版本B是更新产品的样本集，这个组称为目标组。</p><p id="f30a" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">就统计假设检验而言，零假设是指新特性对变量没有任何影响。另一个假设是，新特性将对变量产生影响，换句话说，由于新特性，版本B的值将偏离版本A的值。我们需要根据实际情况具体说明这两个假设。</p><h1 id="6355" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">执行测试的方式</h1><p id="16b4" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">我们可以比较两个版本的值并声明结果吗？不尽然！假设版本B给出了更好的值。我们仍然不能宣布版本B是赢家(拒绝零假设)，因为我们不知道变量的改善是偶然的(可能我们很幸运)还是新产品确实有影响，因为我们只是从总体中抽取了一个样本。</p><p id="e840" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">那么我们实际上是如何进行测试的呢？答案是，如果我们以某种方式知道我们试图测量的变量的实际总体分布，那么我们可以推断出变量至少与版本b中测量的一样极端的可能性。这种概率可以帮助我们决定结果是否是偶然的。这种可能性被称为统计假设检验的<strong class="ju hj"> p值</strong>。p值越低，版本B值受新功能影响的可能性就越大。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/1ba5583fd7ee4dadd1518f2ca0b51e43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gRRjzhzJZqwlcq0m05CP2w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="e582" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">假设零假设为真，我们要计算B&gt;A的概率P(B&gt;A |零假设)。</p></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><p id="98f0" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">但问题是我们永远不知道变量的总体分布，所以我们不能只计算可能性。<a class="ae li" href="https://en.wikipedia.org/wiki/Central_limit_theorem" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hj">中心极限定理</strong> </a>此时来拯救我们了。</p><p id="7dbf" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">中心极限定理指出，如果样本容量变大，样本均值的抽样分布接近正态分布。也就是说，如果我们从总体中抽取大量相同大小的样本，无论总体分布如何，如果每个样本的大小都很大(大于30的样本大小就足够大)，这些样本的均值分布(这称为样本均值的抽样分布)将是正态分布。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/44c6225083d4ff2f36972db1fd83ca5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AWaBgL-ppQrDHCIwJN90nw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="c2cc" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">检查下面的模拟，实际人口不正常，但样本均值的抽样分布是。根据上述等式验证平均值和标准偏差。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/8ec49390fdd59fb9813b80d7ca19a1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZJUOev44nt6I5H7v8bzHA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片作者，生成自<a class="ae li" href="http://onlinestatbook.com/stat_sim/sampling_dist/index.html" rel="noopener ugc nofollow" target="_blank">http://onlinestatbook.com/stat_sim/sampling_dist/index.html</a></figcaption></figure><p id="ad54" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">例如，如果我们从用户群体中抽取100个用户，每个用户抽取1000个样本，并计算每1000个样本的变量平均值(样本平均值)，那么这些平均值的分布(样本平均值的采样分布)将是正态分布。这个正态分布的平均值是总体平均值的近似值。</p><p id="b84d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">由于我们不知道人口分布，我们也不知道人口的标准差。因此，我们不能直接计算样本平均值的抽样分布的标准偏差(也称为平均值的标准误差),但我们可以使用下面的公式来估计它。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/d130bb92455f5a003c3c606bfc593e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JyIfGLEdLfj1Sp4iQWO27g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h1 id="3521" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">评估结果/通过标准的方式</h1><p id="2736" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">由于我们现在知道样本均值的抽样分布是正态分布，我们还可以计算我们在版本B中测量的值的似然性。一种方法是计算A和B之间的偏差的似然性，这就是A-B分布的似然性。</p><p id="ccf1" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">版本A和版本B的样本均值的抽样分布为:</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/e19b6f8f8b3f1a86e2aac43ccd8313b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6SVIirB8UGoMVNB4PjAS9Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="22a5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">由于A和B是独立的，A-B也将遵循正态分布，</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/a1610ebe5462dbb0ee314d75acc72f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WuHUPZNsUYduDSeKJfqNKQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="9f7e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">根据零假设和标准误差的估计，</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/4cf5a1b264eafc22f442629e1d805492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFFZz0vATlCdCOqEq5DF4A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="2385" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">A-B是以零为中心的正态分布。我们可以通过使用z-score来计算版本A和版本B值中观察到的差异的可能性。</p><p id="c42b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">z-score表示一个数据点距离(分布的)平均值有多少标准差。一旦我们有了z值，我们就可以使用z表来计算该数据点的p值。如果样本小于30，我们用类似的方法使用t表。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/bdcb317fbfe878e17175b463933ce880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F9mkvymwWsi4osca.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自维基百科(<a class="ae li" href="https://en.wikipedia.org/wiki/Standard_score" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Standard_score</a>)</figcaption></figure><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/5eb5dbafb6191a0c0b19e907e513ee90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Pje_3XabWCoHPUrZ0pm9A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="2055" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">一旦我们从z表或t表中获得了相应的p值，我们就可以设置一个阈值来接受或拒绝零假设。这个阈值称为显著性水平，用α表示。5%的Alpha在行业中被广泛使用。这意味着如果p值小于5%，那么我们将拒绝零假设。5%的α对应于95%的显著性水平。</p><p id="52cc" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这意味着我们只拒绝无效假设，</p><p id="f663" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">p(B &gt; A |零假设)<alpha/></p></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><p id="8521" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">Consider the following example,</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/6aeec8bc924ef67b5167da4ef5fc553d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q1tpt9GrNYyx378HFi7_Qw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Image by author</figcaption></figure><p id="23e6" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">As the sample size is less than 30, we will use t-table,</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/1584738dc600bd5e242f2aa08d5c08ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JcfzCA6BxuXkWKBDxzP9Mw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Image by author</figcaption></figure><p id="61bb" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">If the alpha is 5%, we can not reject null hypothesis in this case.</p><p id="15f0" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">P(B&gt;A |零假设)&gt; 5%为观察病例。这意味着在版本B中观察到的值实际上不是一个罕见的事件，这可以在原始群体中观察到，这是旧版本。</p><p id="6d47" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><strong class="ju hj"> <em class="kv">参考文献</em> </strong></p><div class="lo lp ez fb lq lr"><a href="http://onlinestatbook.com/stat_sim/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">模拟</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">编辑描述</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">onlinestatbook.com</p></div></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://en.wikipedia.org/wiki/Central_limit_theorem" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">中心极限定理</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">在概率论中，中心极限定理(CLT)确定，在许多情况下，当独立随机…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">en.wikipedia.org</p></div></div><div class="ma l"><div class="mb l mc md me ma mf io lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://en.wikipedia.org/wiki/Standard_score" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">标准分数</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">在统计学中，标准分数是标准偏差的数量，原始分数的值(即，一个…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">en.wikipedia.org</p></div></div><div class="ma l"><div class="mg l mc md me ma mf io lr"/></div></div></a></div><figure class="kx ky kz la fd ij"><div class="bz dy l di"><div class="mh mi l"/></div></figure></div></div>    
</body>
</html>