<html>
<head>
<title>A Deeper Dive into Univariate Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更深入的单变量分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/intro-to-univariate-analysis-de75454b4719?source=collection_archive---------16-----------------------#2021-03-21">https://medium.com/analytics-vidhya/intro-to-univariate-analysis-de75454b4719?source=collection_archive---------16-----------------------#2021-03-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="205e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我在之前的文章<a class="ae jc" rel="noopener" href="/analytics-vidhya/univariate-bivariate-and-multivariate-analysis-8b4fc3d8202c">单变量、双变量和多变量分析简介</a>中提到的，本文将更深入地探讨不同的分析。我们将使用一个Kaggle数据集，澳大利亚的<a class="ae jc" href="https://www.kaggle.com/jsphyg/weather-dataset-rattle-package?select=weatherAUS.csv" rel="noopener ugc nofollow" target="_blank">雨</a>，来进行我们的分析。</p><h2 id="eccf" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">单变量摘要</h2><p id="13b4" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">单变量分析只分析一个变量。进行单变量分析的最常见方法是检查数值变量的集中趋势和分类变量的频率分布。</p><h2 id="4861" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">开始吧</h2><ul class=""><li id="53bb" class="kd ke hh ig b ih jy il jz ip kf it kg ix kh jb ki kj kk kl bi translated">下载数据集</li><li id="5a01" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">导入必要的包</li><li id="2a60" class="kd ke hh ig b ih km il kn ip ko it kp ix kq jb ki kj kk kl bi translated">读入文件</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="98c1" class="jd je hh kw b fi la lb l lc ld">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/><br/><br/># changing display options to increase the number of columns and rows viewable<br/>pd.set_option('display.max_columns', 300)<br/>pd.set_option('display.max_rows', 200)</span><span id="9f00" class="jd je hh kw b fi le lb l lc ld">df = pd.read_csv('weatherAUS.csv')<br/>df.head()</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/7e0212ebccb17bf45fbabacde367dd17.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qeJqYVOyUZNzWJfhRHk6eQ.png"/></div></figure><p id="d451" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用。info()方法，我们可以看到每个特性的计数和数据类型。</p><p id="b86c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该数据集由145，460个观察值(行)和23个特征(列)组成。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="5e7f" class="jd je hh kw b fi la lb l lc ld">df.info()</span><span id="eaf0" class="jd je hh kw b fi le lb l lc ld">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 145460 entries, 0 to 145459<br/>Data columns (total 23 columns):<br/>Date             145460 non-null object<br/>Location         145460 non-null object<br/>MinTemp          143975 non-null float64<br/>MaxTemp          144199 non-null float64<br/>Rainfall         142199 non-null float64<br/>Evaporation      82670 non-null float64<br/>Sunshine         75625 non-null float64<br/>WindGustDir      135134 non-null object<br/>WindGustSpeed    135197 non-null float64<br/>WindDir9am       134894 non-null object<br/>WindDir3pm       141232 non-null object<br/>WindSpeed9am     143693 non-null float64<br/>WindSpeed3pm     142398 non-null float64<br/>Humidity9am      142806 non-null float64<br/>Humidity3pm      140953 non-null float64<br/>Pressure9am      130395 non-null float64<br/>Pressure3pm      130432 non-null float64<br/>Cloud9am         89572 non-null float64<br/>Cloud3pm         86102 non-null float64<br/>Temp9am          143693 non-null float64<br/>Temp3pm          141851 non-null float64<br/>RainToday        142199 non-null object<br/>RainTomorrow     142193 non-null object<br/>dtypes: float64(16), object(7)<br/>memory usage: 25.5+ MB</span></pre><p id="3983" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们看到“日期”列和“位置”列包含所有145，460个观测值，但是其余的特征都是缺失的观测值。根据分析的目标和您所拥有的领域知识，您将不得不处理空值。出于本文的目的，我将把空值转换为0。</p><p id="f725" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">快速浏览数据集的方法是使用<a class="ae jc" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.describe.html" rel="noopener ugc nofollow" target="_blank">。</a>形容()方法在熊猫身上的运用。</p><p id="3b83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该方法提供了数据集中所有数值数据的摘要。如下图所示，它显示了每个特征的计数、平均值、标准偏差、最小值、25%、50%和75%百分比，最后是最大值。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="2189" class="jd je hh kw b fi la lb l lc ld">df.describe() #before replacing all null values to 0</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/a10cca3d4fe35449816679e6929682b1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*OfY764l3zCZEl9GHSn9GhA.png"/></div></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="3357" class="jd je hh kw b fi la lb l lc ld">df.fillna(0, inplace = True) <br/># inplace = True replaces all null values in the same dataset.<br/># by default, to prevent errors, pandas will create a copy of the dataset where <br/># all null values are filled if inplace=True is not specified.</span></pre><p id="b8d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们再次检查空值。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="bc33" class="jd je hh kw b fi la lb l lc ld">df.info()<br/># there are no more null values in the dataframe</span><span id="348f" class="jd je hh kw b fi le lb l lc ld">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 145460 entries, 0 to 145459<br/>Data columns (total 23 columns):<br/>Date             145460 non-null object<br/>Location         145460 non-null object<br/>MinTemp          145460 non-null float64<br/>MaxTemp          145460 non-null float64<br/>Rainfall         145460 non-null float64<br/>Evaporation      145460 non-null float64<br/>Sunshine         145460 non-null float64<br/>WindGustDir      145460 non-null object<br/>WindGustSpeed    145460 non-null float64<br/>WindDir9am       145460 non-null object<br/>WindDir3pm       145460 non-null object<br/>WindSpeed9am     145460 non-null float64<br/>WindSpeed3pm     145460 non-null float64<br/>Humidity9am      145460 non-null float64<br/>Humidity3pm      145460 non-null float64<br/>Pressure9am      145460 non-null float64<br/>Pressure3pm      145460 non-null float64<br/>Cloud9am         145460 non-null float64<br/>Cloud3pm         145460 non-null float64<br/>Temp9am          145460 non-null float64<br/>Temp3pm          145460 non-null float64<br/>RainToday        145460 non-null object<br/>RainTomorrow     145460 non-null object<br/>dtypes: float64(16), object(7)<br/>memory usage: 25.5+ MB</span></pre><p id="2fcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设我只对阿尔伯里感兴趣，想知道那里的最低和最高温度。首先，我需要分离出阿尔伯里的所有观察数据，然后进行分析。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="5a65" class="jd je hh kw b fi la lb l lc ld"># this function checks for "Albury" in the "Location" column and returns a boolean. <br/>df["Location"]=="Albury" <br/># this function returns a dataframe where the the "Location" is "Albury". <br/>df[df["Location"]=="Albury"]</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/fb28843271b8d6cea50bd41fda685f91.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9HW_MNOyY76ZPCPLH3cTxQ.png"/></div></figure><p id="11b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我现在将指定一个名为albury_df的变量作为只包含Albury city的数据帧</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="83b8" class="jd je hh kw b fi la lb l lc ld">albury_df = df[df["Location"]=="Albury"]</span></pre><p id="6f7a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如前所述，我们只对阿尔伯里记录的最低和最高温度感兴趣。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="38a9" class="jd je hh kw b fi la lb l lc ld">lowest = albury_df["MinTemp"].min()<br/>highest = albury_df["MaxTemp"].max()<br/><br/>print(lowest, highest)</span><span id="b3f1" class="jd je hh kw b fi le lb l lc ld">output: -2.8 44.8</span></pre><p id="1048" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是您也可以使用。describe()方法来查看关于这些特性的更多信息。</p><p id="5e7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以看到MinTemp和MaxTemp的最低值和最高值。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="6acb" class="jd je hh kw b fi la lb l lc ld">albury_df.describe()</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/9bf7f716aba33fb81df5346e543afd91.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2V8Jj98s2G6ezPaeuzWmcA.png"/></div></figure><p id="8d3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，如果你只对最小温度的分布或频率感兴趣，你可以使用柱状图、箱线图、紫线图或分布图。我个人比较喜欢violinplot，但是使用的不多。我写过一篇关于<a class="ae jc" rel="noopener" href="/analytics-vidhya/a-violin-is-better-f7068129a14">为什么violinplot应该更常用</a>的文章。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="9247" class="jd je hh kw b fi la lb l lc ld">sns.violinplot(x="MinTemp", data=albury_df)</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/9838c69d20f03e50ec950534e9b0daf4.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2dxACy0uEAX1Gi5CGOWxDQ.png"/></div></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="57f4" class="jd je hh kw b fi la lb l lc ld">sns.distplot(albury_df["MinTemp"])<br/># here you can see the distribution of the MinTemp.<br/># y-axis represents the percentage</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/e505e518d74f847ff0b207bd26a63598.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Qr2z0isLrV3x4Y5eTqTHog.png"/></div></figure><p id="3171" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们来看看分类变量。我们会看风阵风。这里我们将使用计数图，因为方向的数量有限。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="eeeb" class="jd je hh kw b fi la lb l lc ld">fig, ax = plt.subplots(figsize = (10,8))<br/>sns.countplot(x="WindGustDir", data=albury_df)</span></pre><figure class="kr ks kt ku fd lf er es paragraph-image"><div class="ab fe cl lg"><img src="../Images/711b5ecb6120df5e19632be72c68c59b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*GaHi91nKfGR5JzMwBaew3Q.png"/></div></figure><p id="65aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有很多方法可以美化它，让它看起来更像样。可以在本文的<a class="ae jc" href="https://dorjeys3.medium.com/matplotlib-quick-and-pretty-enough-to-get-you-started-5f425b55132f" rel="noopener">上找到启动代码。</a></p><p id="a5b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一种简单查看数字分布的方法是创建熊猫的数据透视表。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="44b5" class="jd je hh kw b fi la lb l lc ld">duplicates = albury_df.pivot_table(index= ["WindGustDir"], aggfunc="size")<br/>print(duplicates)</span><span id="53b8" class="jd je hh kw b fi le lb l lc ld">WindGustDir<br/>0       32<br/>E      122<br/>ENE    149<br/>ESE    113<br/>N      165<br/>NE     157<br/>NNE    151<br/>NNW    152<br/>NW     166<br/>S       60<br/>SE     279<br/>SSE    206<br/>SSW     55<br/>SW     120<br/>W      505<br/>WNW    375<br/>WSW    233<br/>dtype: int64</span></pre><p id="d47c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如在<a class="ae jc" rel="noopener" href="/analytics-vidhya/univariate-bivariate-and-multivariate-analysis-8b4fc3d8202c">单变量、双变量和多变量分析简介</a>中提到的，单变量分析是三种分析中最简单的。它提供了基本信息，但也提供了某个功能的关键信息。只要看一下上面的表格和数字，我们就可以肯定大部分阵风来自西方。我们还知道阿尔伯里市记录的最低和最高温度。</p><p id="d01c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下一篇文章中，我们将着眼于双变量分析，并深入研究可用于进行分析的不同方法。</p><p id="fffc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请随时查看我的<a class="ae jc" href="https://dorjeysherpa.com/" rel="noopener ugc nofollow" target="_blank">网站</a>。它包含了我参与的所有项目和博客。</p></div></div>    
</body>
</html>