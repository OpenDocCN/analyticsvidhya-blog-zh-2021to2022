<html>
<head>
<title>Deploying your Angular app on Firebase using Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Github Actions在Firebase上部署Angular应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-your-angular-app-on-firebase-using-github-actions-b2167af8e0e6?source=collection_archive---------12-----------------------#2021-01-30">https://medium.com/analytics-vidhya/deploying-your-angular-app-on-firebase-using-github-actions-b2167af8e0e6?source=collection_archive---------12-----------------------#2021-01-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/27c5d96a584e0cdf14bebddc7ec68cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*D6GQetcniO9h-1bhFadUsg.jpeg"/></div></figure><p id="80f9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">对于任何Angular开发人员，无论是业余爱好者还是专家，在为他们的项目寻找廉价(或免费)的托管解决方案时，Firebase Hosting是您可以获得的最佳解决方案之一——它是免费的，部署过程非常简单。在本帖中，我们将看看当你使用Github动作将代码推送到Github时，如何将Angular应用程序自动部署到Firebase主机中。</p><p id="c9c5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">先介绍一下。<strong class="in hi"> Angular </strong>(不是AngularJS)，一个UI框架，由谷歌的优秀人员开发和维护，用Typescript编写，由微软的一些优秀人员开发(既然你在这里，我假设你已经知道了)。<strong class="in hi"> Firebase </strong>是谷歌提供的一系列云解决方案，有一个相当不错的免费层，提供的服务包括但不限于静态网站托管、实时数据库、存储等。最后，Github——保存版本控制代码的一站式解决方案，目前由微软所有。并且<strong class="in hi"> Github Actions </strong>是一项服务，它允许你在与你的存储库交互时执行自动化功能，比如推送提交。解决了这个问题，让我们开始吧。</p><h1 id="198a" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建角度应用程序</h1><p id="9d75" class="pw-post-body-paragraph il im hh in b io kh iq ir is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji ha bi translated"><em class="km">【如果您的应用已经就绪，请随意跳过本部分】</em></p><p id="250b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">假设您已经在系统中设置了NodeJS、npm和Angular CLI(查看<a class="ae kn" rel="noopener" href="/@ashwinsathyan19/setting-up-your-new-mac-for-mean-stack-development-152aaf927133?sk=b914a29ece2d8d9f66866418f092c2a2">这篇</a>文章中的一些提示)，您可以通过在终端/命令提示符下运行以下命令来创建您的新应用程序。</p><p id="e5e3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><code class="du ko kp kq kr b">ng new my-angular-app</code></p><p id="bf65" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在，继续构建您的应用程序。</p><h1 id="3a7f" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">在项目中初始化Firebase</h1><p id="1457" class="pw-post-body-paragraph il im hh in b io kh iq ir is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji ha bi translated">接下来，我们需要在项目中初始化Firebase。首先，进入<a class="ae kn" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>并使用你的谷歌账户登录。在那里，创建一个新项目——向导会帮助您完成这个任务。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ks"><img src="../Images/e87d74844eb2a0f2866f61f82b7710f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EqLo10lOZ1D2luTOy4XZ7Q.png"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx translated">你可以随意命名你的项目</figcaption></figure><p id="9aaa" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">创建项目后，您将被带到项目仪表板。这里，在左侧菜单中，点击项目概述旁边的齿轮图标，并从上下文菜单中选择<strong class="in hi">项目设置</strong>。进入项目设置页面后，在常规选项卡中，向下滚动到您的应用部分，将Firebase添加到您的应用中，然后选择<strong class="in hi"> Web </strong>选项</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/1c8d54c68806905b4376726be4f55e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*tdlgzJLYpkIRfIM-PKcoNQ.png"/></div><figcaption class="lb lc et er es ld le bd b be z dx translated">将Firebase添加到您的Web应用程序</figcaption></figure><p id="5677" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">一旦您成功注册了您的web应用程序，您将获得Firebase配置。在进行必要的格式更改以创建有效的JSON对象后，复制该文件并将其添加到Angular应用程序的<em class="km"> environment.ts </em>文件中。一旦你完成了，你的<em class="km"> environment.ts </em>文件应该是这样的:</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="lg lh l"/></div></figure><blockquote class="li lj lk"><p id="7da4" class="il im km in b io ip iq ir is it iu iv ll ix iy iz lm jb jc jd ln jf jg jh ji ha bi translated">注意:不要忘记将firebaseConfig对象复制到<strong class="in hi">环境.产品文件</strong>中</p></blockquote><p id="8b7e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">要在您的项目中初始化Firebase，我们可以使用Firebase CLI。如果您还没有安装，可以通过在终端中运行以下命令来完成:</p><pre class="kt ku kv kw fd lo kr lp lq aw lr bi"><span id="120b" class="ls jk hh kr b fi lt lu l lv lw">npm in -g firebase-tools</span></pre><p id="ff96" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">安装完成后，运行以下命令</p><pre class="kt ku kv kw fd lo kr lp lq aw lr bi"><span id="9e2e" class="ls jk hh kr b fi lt lu l lv lw">firebase init</span></pre><p id="34ea" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">按照CLI中的提示启用托管。出现提示时，您可能希望将配置启用为SPA。一旦这一步完成，项目现在就为Firebase托管初始化了。</p><h1 id="ba5d" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">输入Github</h1><p id="02b2" class="pw-post-body-paragraph il im hh in b io kh iq ir is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji ha bi translated">我们几乎完成了项目结束时所需的工作。现在，我们必须在Github中做一些基础工作。首先，创建一个新的回购协议，并给它一个你选择的名字。一旦进入，切换到<strong class="in hi">设置</strong>选项卡，并在其中切换到<strong class="in hi">机密</strong>子部分。这里，我们需要保存Github在部署期间认证Firebase所需的令牌。</p><p id="ac36" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">但是首先，我们需要生成这样一个令牌。为此，我们可以使用Firebase CLI。在终端中运行以下命令来生成您的令牌</p><pre class="kt ku kv kw fd lo kr lp lq aw lr bi"><span id="499d" class="ls jk hh kr b fi lt lu l lv lw">firebase login:ci</span></pre><p id="76cd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您的浏览器窗口将会打开，要求您登录。使用您用来登录Firebase的帐户。登录成功后，关闭浏览器窗口。如果您检查终端，您会看到已经为您生成了一个令牌。复制这个令牌。我们很快就会用到它。</p><p id="9952" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">回到Github，点击新的存储库密码。将其命名为FIREBASE_TOKEN，将值设置为您复制的令牌，并保存它。如果操作得当，你的屏幕看起来会像这样</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lx"><img src="../Images/5d8f00170616c1425850ffb32da96329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4aoQI_cLDpO13zmymB2HQ.png"/></div></div></figure><p id="d97d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在，是时候定义将应用程序自动部署到Github的动作了。切换到Actions选项卡，在这里点击链接<strong class="in hi">自行设置工作流</strong>。这将打开一个编辑器窗口，并打开一个文件<em class="km"> main.yml </em>。用下面的代码替换文件的内容。确保自<em class="km">以来保持对齐和缩进。yml </em>文件的执行严格依赖于缩进。</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="lg lh l"/></div><figcaption class="lb lc et er es ld le bd b be z dx translated">猪拉丁，没那么多</figcaption></figure><h1 id="caba" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">好吧，那些拉丁猪是怎么回事？</h1><p id="7577" class="pw-post-body-paragraph il im hh in b io kh iq ir is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji ha bi translated">如果你曾经写过任何数量的代码，那可能不全是猪拉丁。不过，还是让我们来研究一下吧。首先，如果你已经注意到了，我们保留了文件中已经存在的代码，只是增加了一些我们这边的代码，特别是从<em class="km"> deploy开始的部分。</em></p><p id="926e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们在这里所做的基本上是</p><ol class=""><li id="b557" class="ly lz hh in b io ip is it iw ma ja mb je mc ji md me mf mg bi translated">定义了一个名为<em class="km"> deploy </em>的新作业。在这种情况下，该项目以及作业下的所有其他项目，即<em class="km">构建</em>，将在满足部分的<em class="km">中定义的条件时执行；也就是说，代码被推或者拉请求被合并到我们的存储库的主分支中。</em></li><li id="3574" class="ly lz hh in b io mh is mi iw mj ja mk je ml ji md me mf mg bi translated"><em class="km"> deploy </em>设置为首先从master签出代码，并使用我们选择的节点版本——在本例中是14.15。</li><li id="57fe" class="ly lz hh in b io mh is mi iw mj ja mk je ml ji md me mf mg bi translated">接下来，我们使用npm install安装项目的所有依赖项，因为node_modules没有被推送到repo中。</li><li id="ee78" class="ly lz hh in b io mh is mi iw mj ja mk je ml ji md me mf mg bi translated">一旦安装了软件包，我们就运行一个脚本来构建我们的应用程序用于生产。我在我的项目的<em class="km"> package.json </em>文件中定义了一个名为buildProd的脚本，如下所示<br/><em class="km">" build prod ":" ng build—prod "</em></li><li id="7709" class="ly lz hh in b io mh is mi iw mj ja mk je ml ji md me mf mg bi translated">构建过程成功后，我们使用Girhib Actions Marketplace中的<a class="ae kn" href="https://github.com/w9jds/firebase-action" rel="noopener ugc nofollow" target="_blank"> this </a>操作将应用程序部署到firebase。我们将deploy指定为要完成的任务，并需要传递令牌来对其进行身份验证，这是我们从之前存储在repo中的Secret中获取的，作为<em class="km"> secret。FIREBASE_TOKEN </em>，类似于在节点环境中访问环境变量的方式。</li></ol><p id="cb03" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">仅此而已。当您推送代码或合并拉取请求时，这个repo现在设置为将应用程序构建并部署到Firebase中。通过将您的代码推送到您的Github repo来测试这一点。等待操作运行。现在，如果您从Firebase Hosting dashboard浏览到托管URL，您将看到您的应用程序启动并运行！</p></div><div class="ab cl mm mn go mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ha hb hc hd he"><p id="a7a5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你喜欢那个帖子，请鼓掌表示你的支持。更多此类帖子，请关注我。编码快乐！</p></div><div class="ab cl mm mn go mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ha hb hc hd he"><blockquote class="mt"><p id="cc8d" class="mu mv hh bd mw mx my mz na nb nc ji dx translated">有兴趣和我就这个故事或Angular、Typescript和Javascript进行一对一的交谈吗？前往<a class="ae kn" href="https://www.hiretheauthor.com/ashwinSathian" rel="noopener ugc nofollow" target="_blank">雇佣作者</a>让我们连线！</p></blockquote></div></div>    
</body>
</html>