<html>
<head>
<title>Using Spotify data to find the happiest emo song</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Spotify数据寻找最快乐的emo歌曲</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-spotify-data-to-find-the-happiest-emo-song-20e37fdf9eb?source=collection_archive---------18-----------------------#2021-01-17">https://medium.com/analytics-vidhya/using-spotify-data-to-find-the-happiest-emo-song-20e37fdf9eb?source=collection_archive---------18-----------------------#2021-01-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/c53afc3588808da21425964fa832fed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Pm61axp4Z3Tj_NQj"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">乌列尔·索伯兰斯在<a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a328" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我最近发现了查理·汤普森的<a class="ae it" href="https://www.rdocumentation.org/packages/spotifyr/versions/1.0.0" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi"> spotifyr </strong> </a> <strong class="iw hi"> </strong>包，它提供了一种使用统计编程语言r分析Spotify数据的简单方法。许多人用这个包做了一些有趣的事情，例如<a class="ae it" href="https://caitlinhudon.com/2017/12/22/blue-christmas/" rel="noopener ugc nofollow" target="_blank">凯特琳·胡顿搜索最令人沮丧的圣诞歌曲</a>和<a class="ae it" href="https://www.rcharlie.com/blog/fitter-happier/" rel="noopener ugc nofollow" target="_blank">查理·汤普森自己搜索最令人沮丧的电台司令歌曲</a>。受到这些分析的启发，作为一个自称上辈子是emo小子的人，我决定用它来尝试和寻找最快乐的emo歌曲。</p><p id="c598" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你想自己尝试使用spotifyr，你可以按照Charlie Thompson网站上的说明进行安装。(在撰写本文时，spotifyr并没有托管在CRAN上，所以我从Github安装了它。)</p><p id="57b3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我这个项目的所有代码都可以在这里找到<a class="ae it" href="https://github.com/cw-data/happiest-emo" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="913f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">请注意，一些歌曲标题包含潜在的冒犯性语言！</em></p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h1 id="913c" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">哪些歌？</h1><p id="7285" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">这个项目的第一个挑战是找出应该考虑哪些歌曲。为了避免任何关于什么应该或不应该被贴上emo标签的争论，我让Spotify决定，只收录了他们80首歌曲的“<a class="ae it" href="https://open.spotify.com/playlist/37i9dQZF1DX9wa6XirBPv8?si=sY6rNtoBTom8TbdxERo__Q" rel="noopener ugc nofollow" target="_blank"> Emo Forever </a>”播放列表中的歌曲。虽然这不是一个全面的列表，但它给了我一个相当有代表性的样本，这些样本是2000年代和2010年代初这一流派全盛时期相对知名的emo流行歌曲。</p><p id="ed89" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过复制播放列表的Spotify URI(位于Spotify应用程序的“共享”菜单中)并使用get_playlist_tracks功能，可以使用Spotify yr获取播放列表中的歌曲。</p><h1 id="950f" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">音乐极性</h1><p id="6c0b" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">在后台，Spotify上的每首歌曲都有各种相关属性。除了熟悉的音乐特征，如调和速度，这些还包括对音轨情绪的更多主观测量。这些算法生成的指标纯粹基于音轨的音频特征，而不是歌词(尽管Spotify对音轨的具体属性保密)。</p><p id="40fc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这种分析的两个最相关的属性是<strong class="iw hi">化合价</strong>和<strong class="iw hi">能量</strong>。根据<a class="ae it" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener ugc nofollow" target="_blank">的官方文件</a>，价测量<em class="js">“一首曲目所传达的音乐积极性”</em>，而能量<em class="js">“代表强度和活动的感性测量”</em>。两者都在0到1的范围内测量。</p><p id="6625" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个图说明了不同价和能量值的歌曲的整体情绪，以及一些众所周知的例子。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es li"><img src="../Images/ad4b61b9b362924db059c041173ec246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*KBNDKJtuMmdNGIC2xuw8Qg.png"/></div></figure><p id="0894" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">(这篇文章中的这些例子和对四个象限的描述归功于Miriam Quick。)</p><p id="305e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最快乐的歌曲位于该网格的右上象限，因此为了量化播放列表中每个曲目的“音乐极性”，我计算了其(<em class="js">价，能量</em>)坐标与(0，0)的距离:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es ln"><img src="../Images/395946a9629388ea43c545288a2e29c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*N01SP_z49EOKwofvzVEnoA.png"/></div></figure><p id="6930" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后我就按照这个尺度安排了播放列表。这是排名前五的歌曲:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es lo"><img src="../Images/c34a24e37f1fda8161452ff66f7d5807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*GuETCY-FTnnhjxxoqhgmaA.png"/></div></figure><p id="17a2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">底部5:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/e91b218a105c0b2c3cd650e3a4605619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*88Cyi7mx_mNOq3mRrhGwwg.png"/></div></div></figure><p id="c84d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">中间的</em>是我所知道的最快乐的歌曲，仍然被普遍认为是“emo ”,在开始这个项目之前，我预测它会得分很高，所以我很高兴看到它在这里占据首位。与此同时,<em class="js">取消铃声,</em>的极性得分比播放列表中的其他歌曲低得多。如果我们也考虑歌词呢？</p><h1 id="9bf2" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">抒情的极性</h1><p id="21ed" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">spotifyr与<a class="ae it" href="https://cran.r-project.org/web/packages/genius/index.html" rel="noopener ugc nofollow" target="_blank"> genius </a> <strong class="iw hi"> </strong>软件包配合良好，该软件包通过R. genius的genius_lyrics函数获取艺术家和曲目标题并返回其歌词。</p><p id="6ae2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我首先清理数据，删除一些曲目名称中的标点符号，并编辑一些非唯一的艺术家姓名(如Aiden，他碰巧与一名意大利说唱歌手同名)。该函数有时会随机返回NA值，所以我编写了一个快速包装器函数，让它尝试多次，如果仍然失败，就发出警告放弃。</p><p id="6ab6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦我导入了播放列表中歌曲的歌词，我就使用<a class="ae it" href="https://cran.r-project.org/web/packages/qdap/index.html" rel="noopener ugc nofollow" target="_blank"> qdap </a>包中的<a class="ae it" href="https://www.rdocumentation.org/packages/qdap/versions/2.4.3/topics/polarity" rel="noopener ugc nofollow" target="_blank">极性</a>函数来执行近似情感分析。该功能识别一段文本中的正面或负面单词，然后查看每个单词周围的单词簇，以识别它是被否定(例如“不好”)还是被放大(例如“非常好”)。大致来说，正簇的密度越高，文本的整体极性得分就越高(可以是正的，也可以是负的)。</p><p id="438a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是5首歌词最积极向上的歌曲:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es lq"><img src="../Images/10dde38f4034224a5771d5acf3079db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*MDVT0V-nkM0eeVxALWc-FQ.png"/></div></figure><p id="5697" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最消极的5个:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/8fb8e76854e1c7fc255079df80250b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*32DJx4W7im8WepvEw6wVxg.png"/></div></div></figure><p id="746c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是我个人最喜欢的歌曲之一<em class="js">的强劲表现，充满爱的光辉</em>，这首歌讲述了一对夫妇在大屠杀期间的决心，尽管它的主题黑暗，但却令人振奋。我对水下的<em class="js">车</em>不太熟悉，但鉴于合唱的歌词是</p><blockquote class="ls lt lu"><p id="f82a" class="iu iv js iw b ix iy iz ja jb jc jd je lv jg jh ji lw jk jl jm lx jo jp jq jr ha bi translated">我在水下的汽车里消磨时间，回想我忘了告诉你这个<br/>我不在乎你离开和抛弃我，更痛苦的是我仍然会为你而死</p></blockquote><p id="1d47" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">…那么这似乎相当准确。</p><h1 id="f2b1" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">结合一切</h1><p id="2096" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">在计算了音乐和歌词的积极度之后，是时候尝试将它们合并成一个积极度的通用衡量标准了。这在本质上是困难的——这两种积极性的衡量标准相当随意，衡量尺度也不同，不同的人受音乐和歌词的影响程度也不同，所以这是一个主观决定。因此，我尝试了几种不同的方法来组合它们，旨在选择一种相对简单的方法，最符合我自己对歌曲积极性的看法。</p><p id="8d7b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我决定的措施如下。首先，我将音乐极性除以√2(音乐极性的最大可能值),并采用抒情极性的标准逻辑函数,从而将两个测量值映射到0和1之间。然后我从(0，0)找到了变换后的<em class="js">(音乐极性，抒情极性</em>)坐标的距离。</p><p id="4bfd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是前五名:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/45462f159f6451b053091c9bae558f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BuR8xwN3YpZ1mKMxPu6fYg.png"/></div></div></figure><p id="3f85" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">底部5:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/9383dbf894452326a81bdd1604a65816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cs3zd5j2tPnm1oNUOKPjrw.png"/></div></div></figure><p id="526e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">尽管前五名中的其他作品具有更高的音乐极性得分，但凭借其高音乐和抒情极性的结合，<em class="js">因爱情的荣耀而活着</em>获得了整体最高分。同时<em class="js">取消钟声</em>以最低的整体极性得分结束，因为它的音乐极性极低，尽管有适度高的抒情极性。</p><h1 id="5464" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">扩充字典</h1><p id="a453" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">qdap的极性得分取决于所使用的积极和消极词汇的“字典”。默认字典是一组相当通用的单词，它不一定适合所有的上下文。例如，如果你想分析tweets中的文本，你会想扩充默认字典，使其包含网络俚语。有没有歌词中经常出现的词没有收录在qdap的默认词典中？</p><p id="b513" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了回答这个问题，我计算了每个词在歌曲歌词中总共出现的次数，然后使用dplyr的anti_join函数来识别qdap的默认词典中缺少哪些词，并按频率对结果进行排序。有一些有趣的遗漏:</p><ul class=""><li id="3fea" class="ma mb hh iw b ix iy jb jc jf mc jj md jn me jr mf mg mh mi bi translated">“down”这个词一共出现了167次，出现在各种否定短语中，比如“看不起”、“脸朝下趴在地板上”和“让你失望”</li><li id="7dcd" class="ma mb hh iw b ix mj jb mk jf ml jj mm jn mn jr mf mg mh mi bi translated">“好吧”这个词出现了59次——鉴于这种类型，感觉好吧是相当积极的，在这种情况下，这可以被认为是一个积极的词</li></ul><p id="e15c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在扩充字典使得“down”被认为是一个否定词而“alright”被认为是一个肯定性词之后，按总体极性排列的前5首歌曲如下:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/8ca87fb2ebb5d17960368203d77d674b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gbQ5yvll31u4pQ_G_d9Qg.png"/></div></div></figure><p id="7c98" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">一切正常</em>拔得头筹，这并不十分令人惊讶！这表明了极性计算的局限性——这首歌是关于与焦虑和强迫症斗争的，尽管你告诉人们一切都不太好，显示了qdap无法察觉讽刺。(这也让我觉得《动感城市》的原声音乐和《T2:我的化学罗曼史》在谈论他们的问题时有着非常不同的方式。)</p><p id="2155" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">与此同时，排名后5位的人基本保持不变:</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/e4d729b841e4e11c602c4170053b570a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UbhyE5rXTNFXxDjC4YUKJQ.png"/></div></div></figure><p id="6b19" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">总的来说，我认为基于默认字典的计算更准确地反映了歌曲的实际积极性。也许需要调整一些参数，这样这些词就不会有太大的影响。</p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h1 id="9e31" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">未来的想法</h1><p id="2c33" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">这是我目前的分析范围，但我希望在未来探索一些途径:</p><ul class=""><li id="fdad" class="ma mb hh iw b ix iy jb jc jf mc jj md jn me jr mf mg mh mi bi translated"><strong class="iw hi">更多歌曲</strong>——我在这里只考虑了一小部分相当主流的emo流行歌曲，但emo及其相关子类别仍在蓬勃发展(我个人是Pinegrove、Hotelier和Foxing等的忠实粉丝)。在这个项目的未来迭代中，考虑更广泛的emo定义和不太知名的歌曲会很有趣。</li><li id="a159" class="ma mb hh iw b ix mj jb mk jf ml jj mm jn mn jr mf mg mh mi bi translated">一个更准确的积极性指标——如上所述，我最终使用的音乐和歌词相结合的积极性指标相当随意。如果能进一步了解人们如何受到音乐和抒情因素的影响，从而得出一个更可靠的衡量标准，那就太好了。</li></ul></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="873a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">你觉得最幸福的emo歌曲是哪一首？请在回复中告诉我。我也很乐意听到你对这篇文章的想法和反馈，如果你喜欢，请分享！</em></p></div></div>    
</body>
</html>