<html>
<head>
<title>Docker for data science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学码头工人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/docker-for-data-science-442299c5203c?source=collection_archive---------0-----------------------#2021-06-11">https://medium.com/analytics-vidhya/docker-for-data-science-442299c5203c?source=collection_archive---------0-----------------------#2021-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f62e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为什么docker在数据科学中很重要？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/fe186dbe8822c27b929dfbfc3c8ccfe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lp2HR8T-miRjM84n_4RZkQ.png"/></div></div></figure><p id="6f9d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我之前的帖子中，我写了关于<a class="ae kf" rel="noopener" href="/analytics-vidhya/understanding-mlops-5f0a425c68b0">理解MLOPS </a>的文章，但是为了成为机器学习操作的大师，你需要理解docker以及为什么它在数据科学中很重要。</p><p id="f0d6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">曾经开发了一个机器学习模型，然后更换了笔记本电脑，却发现你的代码正在崩溃，你不断地遇到无限的“导入错误”语句或“找不到模块”。有时，这可能是一个版本错误，因为您试图在不同的python包版本上运行您的代码。解决这个问题的方法是Docker。</p><p id="d961" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们开始之前。查看我在这里写的更多数据科学相关的文章，也可以在medium上跟随我获得更多有趣的教程。</p><h1 id="df3b" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">那么Docker是什么？</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/2bdb3fe47db6656e7352de72bbca7235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tbdg0MRwh_uQ0iHXd0hHhg.png"/></div></div></figure><p id="219d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Docker是一个创建和部署隔离环境的工具，用于运行应用程序及其依赖项。基本上，Docker通过将代码及其所有依赖项放在一个<a class="ae kf" href="https://blog.netapp.com/blogs/containers-vs-vms/#:~:text=Virtual%20machines%20and%20containers%20differ,to%20run%20multiple%20OS%20instances." rel="noopener ugc nofollow" target="_blank">容器</a>中，使得在其他具有不同操作系统的机器上编写和运行代码变得容易。</p><p id="7d23" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个容器使代码独立于操作系统。</p><p id="e298" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你需要熟悉的码头术语</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/c953d4334b8df5f33e1a6ce51f258f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0_PEyEuVOG6vZnuh_QDbdA.png"/></div></div></figure><p id="f961" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> Docker容器</strong> —容器是一个图像的可运行实例。您可以使用Docker API或CLI创建、启动、停止、移动或删除容器。</p><p id="e5d8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> Docker image </strong>是一个只读模板，包含一组用于创建可以在Docker平台上运行的容器的指令。</p><p id="bb67" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> Dockerfile </strong> —一个Dockerfile包含了从下载docker镜像到设置环境设置docker容器的所有代码。您可以将其视为描述您想要运行的系统的完整操作系统安装。</p><h2 id="eccd" class="la kh hi bd ki lb lc ld km le lf lg kq js lh li ks jw lj lk ku ka ll lm kw ln bi translated">为什么docker在数据科学中很重要？</h2><p id="8b81" class="pw-post-body-paragraph jj jk hi jl b jm lo ij jo jp lp im jr js lq ju jv jw lr jy jz ka ls kc kd ke hb bi translated">在Docker容器中运行ML模型有很多好处:</p><ul class=""><li id="60e2" class="lt lu hi jl b jm jn jp jq js lv jw lw ka lx ke ly lz ma mb bi translated"><strong class="jl hj">再现性</strong>:一旦你测试了你的容器化应用程序，你就可以把它部署到Docker正在运行的任何其他系统上，并且你可以确信你的应用程序将会像你测试它的时候一样运行。</li><li id="8aa2" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke ly lz ma mb bi translated"><strong class="jl hj">敏捷性</strong>:容器提供的可移植性和性能优势可以帮助您使您的开发过程更加敏捷和灵敏。它增强了您的持续集成和持续交付过程</li><li id="2053" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke ly lz ma mb bi translated"><strong class="jl hj">可移植性:</strong>这意味着从本地开发转移到超级计算集群很容易。您可以避免设置麻烦。</li></ul><h1 id="9161" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">Docker入门</strong></h1><h2 id="596b" class="la kh hi bd ki lb lc ld km le lf lg kq js lh li ks jw lj lk ku ka ll lm kw ln bi translated">安装Docker</h2><p id="5895" class="pw-post-body-paragraph jj jk hi jl b jm lo ij jo jp lp im jr js lq ju jv jw lr jy jz ka ls kc kd ke hb bi translated">要在你的设备上安装Docker，使用<a class="ae kf" href="https://www.docker.com/get-started" rel="noopener ugc nofollow" target="_blank">Docker官方网站</a>并为你的机器安装正确的版本。要确保安装成功，请尝试运行以下命令:</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="f162" class="la kh hi mi b fi mm mn l mo mp">docker version</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/59ea8ace8e46c778bf92a76faf67a95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlxxxPaJnUbpH_eFwshZpg.png"/></div></div></figure><h2 id="05db" class="la kh hi bd ki lb lc ld km le lf lg kq js lh li ks jw lj lk ku ka ll lm kw ln bi translated">熟悉基本命令</h2><p id="819d" class="pw-post-body-paragraph jj jk hi jl b jm lo ij jo jp lp im jr js lq ju jv jw lr jy jz ka ls kc kd ke hb bi translated">虽然docker命令很宽泛，但是您可以从这些docker命令开始。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mr"><img src="../Images/82fffedd4b403f378c8dc45efd4f3204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e7dB2OniMlCZPn_OWgiR9Q.png"/></div></div></figure><h2 id="9623" class="la kh hi bd ki lb lc ld km le lf lg kq js lh li ks jw lj lk ku ka ll lm kw ln bi translated">建立码头工人形象</h2><p id="d24e" class="pw-post-body-paragraph jj jk hi jl b jm lo ij jo jp lp im jr js lq ju jv jw lr jy jz ka ls kc kd ke hb bi translated">您将构建一个flask应用程序，在浏览器屏幕上返回一个数字的平方。<strong class="jl hj">目标是将你的应用放入docker容器</strong>。</p><p id="1920" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">创建一个简单的烧瓶应用程序“app.py”</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="3c97" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你需要创建一个<strong class="jl hj"> <em class="mu"> requirements.txt </em> </strong>文件。列出您的应用程序所需的所有依赖项的文件。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="7976" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">接下来您需要做的是创建一个docker文件。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="8f71" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">文档分类</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="4406" class="la kh hi mi b fi mm mn l mo mp">FROM python:3.7-slim</span></pre><p id="eb68" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是基础图像，是应用程序的核心。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="422e" class="la kh hi mi b fi mm mn l mo mp">COPY . /app</span></pre><p id="2e69" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下一个任务是将目录中的所有文件复制到docker映像中。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="a743" class="la kh hi mi b fi mm mn l mo mp">WORKDIR /app</span></pre><p id="01c5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将工作目录设置为/app。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="c119" class="la kh hi mi b fi mm mn l mo mp">RUN pip3 install -r /app/requirements.txt</span></pre><p id="ce65" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">安装您的应用程序依赖项。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="8e24" class="la kh hi mi b fi mm mn l mo mp">ENTRYPOINT ['python3']</span></pre><p id="9a1f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，将入口点设置为“python3”。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="620f" class="la kh hi mi b fi mm mn l mo mp">CMD ['app.py']</span></pre><p id="6f4c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，运行app.py文件</p><p id="f60e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下一件事是建立你的码头工人形象。回想一下，docker映像是一个只读模板，它包含一组用于创建可以在Docker平台上运行的容器的指令。</p><p id="319b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从您的终端，运行<strong class="jl hj"> docker build — help </strong>来获得您需要的参数列表。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="f2de" class="la kh hi mi b fi mm mn l mo mp"><strong class="mi hj">$ docker build -t simpleflask .</strong></span></pre><p id="7462" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从您的终端运行<strong class="jl hj"> docker run— help </strong>来获得您需要的参数列表。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="61dd" class="la kh hi mi b fi mm mn l mo mp"><strong class="mi hj">$ docker run -d -p 5000:5000 &lt;docker_image_id&gt;</strong></span></pre><ul class=""><li id="3f1b" class="lt lu hi jl b jm jn jp jq js lv jw lw ka lx ke ly lz ma mb bi translated">-p表示端口。5000:5000意味着您将系统上的端口5000暴露给docker。本质上，这意味着在您的本地系统上运行这个之后，您的容器将可以通过<code class="du mv mw mx mi b"><a class="ae kf" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>访问</li><li id="48cf" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke ly lz ma mb bi translated">-d标志意味着您希望以守护模式(后台)运行它。</li><li id="5f3f" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke ly lz ma mb bi translated"><strong class="jl hj">&lt;docker _ image _ id&gt;</strong>这里是simpleflask。因为这是构建时的名称。</li></ul><p id="51bb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">检查处于活动状态的码头集装箱</p><p id="a2da" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">运行<strong class="jl hj"> <em class="mu"> docker -ps a </em> </strong></p><p id="8246" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在docker容器是活动的，您可以通过使用requests、postman或curl来调用您的API。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="c581" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">结果将是传递的数字。</p><h1 id="89b6" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">最佳实践的提示和技巧</h1><ol class=""><li id="bd8a" class="lt lu hi jl b jm lo jp lp js my jw mz ka na ke nb lz ma mb bi translated">始终确保您使用的是最有效的基础映像。例如，在Python3的情况下，选择<em class="mu">苗条克星</em>或<em class="mu">拉伸克星</em>。他们有充分的支持，并与大多数DS和ML库很好地合作。</li><li id="8df1" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated">使用<strong class="jl hj">标签</strong>提供重要信息，如使用技巧和关于应用程序和所需库以及如何使用它们的额外信息。</li><li id="7fef" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated">拆分运行命令，使其更具可读性。把所有需要的库放在一个requirments.txt文件中以保持有序。</li><li id="98ac" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated">只安装<strong class="jl hj">必需的</strong>包。这使得构建和运行映像更加高效。</li><li id="8a81" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated">显式忽略文件<em class="mu">以避免安全风险(将它们添加到。忽略文件)。</em></li><li id="accf" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated"><strong class="jl hj">避免</strong>添加数据，从数据库或云中提取数据(使用绑定挂载)，但不要在映像中硬编码。</li><li id="006e" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated">如果您从Docker开始，并且想要一个<em class="mu">标准项目模板</em>，请使用<a class="ae kf" href="https://drivendata.github.io/cookiecutter-data-science/" rel="noopener ugc nofollow" target="_blank"> CookieCutter数据科学</a>或<a class="ae kf" href="https://github.com/docker-science/cookiecutter-docker-science" rel="noopener ugc nofollow" target="_blank"> CookieCutter docker科学</a>项目模板。</li></ol><h2 id="9f88" class="la kh hi bd ki lb lc ld km le lf lg kq js lh li ks jw lj lk ku ka ll lm kw ln bi translated">包装它</h2><p id="8df6" class="pw-post-body-paragraph jj jk hi jl b jm lo ij jo jp lp im jr js lq ju jv jw lr jy jz ka ls kc kd ke hb bi translated">现在，你已经用Docker建立了一个隔离的、可复制的、可移植的和令人敬畏的ML工作空间。</p><p id="2eaf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Docker对于新手来说可能很复杂，也很有挑战性，但是坚持练习并熟悉重要的命令是很重要的。</p><p id="a3cb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我没有提到docker卷映射和docker容器注册。但是如果你需要更高级的docker，你可以试试这个<a class="ae kf" href="https://jstobigdata.com/docker/advanced-docker-tutorial/" rel="noopener ugc nofollow" target="_blank"> <em class="mu">链接</em> </a>。</p><p id="4f03" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我希望这篇文章对您有用，如果您有任何问题或反馈，请通过</p><ul class=""><li id="68de" class="lt lu hi jl b jm jn jp jq js lv jw lw ka lx ke ly lz ma mb bi translated">推特:@ akinwhande</li><li id="1831" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke ly lz ma mb bi translated">领英:<a class="ae kf" href="https://www.linkedin.com/in/akinwande-komolafe-49166b147/" rel="noopener ugc nofollow" target="_blank">阿金万德</a></li></ul><p id="9eea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">也可以在Medium上关注我，从我这里获取更多有趣的内容。</p></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><p id="5f9f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">参考文献</strong></p><ol class=""><li id="5e1b" class="lt lu hi jl b jm jn jp jq js lv jw lw ka lx ke nb lz ma mb bi translated"><a class="ae kf" href="https://dagshub.com/blog/setting-up-data-science-workspace-with-docker/" rel="noopener ugc nofollow" target="_blank">https://dagshub . com/blog/setting-up-data-science-workspace-with-docker/</a></li><li id="009e" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated"><a class="ae kf" href="https://towardsdatascience.com/docker-made-easy-for-data-scientists-b32efbc23165" rel="noopener" target="_blank">https://towards data science . com/docker-made-easy-for-data-scientists-b 32 efbc 23165</a></li><li id="e333" class="lt lu hi jl b jm mc jp md js me jw mf ka mg ke nb lz ma mb bi translated"><a class="ae kf" href="https://towardsdatascience.com/getting-started-with-docker-for-data-scientists-a2ed505e2a09" rel="noopener" target="_blank">https://towards data science . com/getting-started-with-docker-for-data-scientists-a2ed 505 e2a 09</a></li></ol></div></div>    
</body>
</html>