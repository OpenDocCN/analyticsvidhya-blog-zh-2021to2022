<html>
<head>
<title>Intel OpenVINO on Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Colab上的英特尔OpenVINO</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/intel-openvino-on-google-colab-20ac8d2eede6?source=collection_archive---------6-----------------------#2021-07-15">https://medium.com/analytics-vidhya/intel-openvino-on-google-colab-20ac8d2eede6?source=collection_archive---------6-----------------------#2021-07-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7565" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">英特尔的OpenVINO发行版使<strong class="ih hj"> <em class="jd">人工智能推理</em> </strong>变得快速而简单。推理基本上是模型获得了所有教育(训练)并需要通过基于其能力推断新信息来炫耀的阶段。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/0971412ac4a65d113bd7b1a81cad10ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Kp1rC8GLbFk-Zltb.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来源:<a class="ae ju" href="https://software.intel.com/content/www/us/en/develop/tools/openvino-toolkit.html" rel="noopener ugc nofollow" target="_blank">https://software . Intel . com/content/www/us/en/develop/tools/open vino-toolkit . html</a></figcaption></figure><p id="7b9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenVINO框架使得跨各种架构的推断和部署变得非常容易。更多关于框架的<a class="ae ju" href="https://software.intel.com/content/www/us/en/develop/tools/openvino-toolkit.html" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="30f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将教你如何在Google Colab上测试OpenVINO的能力。</p><h1 id="7c13" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">一般来说，使用OpenVINO的步骤是:</h1><p id="7db9" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">—使用来自<a class="ae ju" href="https://github.com/IntelAI/models" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">英特尔模型动物园</strong> </a> <strong class="ih hj"> </strong>的<strong class="ih hj"> <em class="jd">预训练模型</em> </strong>或使用您自己的<strong class="ih hj"> <em class="jd">模型(构建)</em> </strong></p><p id="bea8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—使用推理引擎生成xml和bin文件(优化)</p><p id="53bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—使用您首选的环境进行部署</p><h1 id="ede9" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用Google Colab部署</h1><p id="4f68" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">首先，我们将关注第三步。这里，<strong class="ih hj">假设</strong>您已经有了xml和bin文件。我在我的存储库中添加了一些用于英特尔预训练模型的xml和bin文件。请随意使用:<a class="ae ju" href="https://github.com/jojo96/intel-openvino-colab/tree/main/models" rel="noopener ugc nofollow" target="_blank">https://github . com/jojo 96/Intel-open vino-colab/tree/main/models</a></p><p id="3a41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">安装库:</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ky"><img src="../Images/2a75e67747b40e9f6c2d5132d86a882c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NvJ6iPhWGJTxBwp06jxbzA.png"/></div></div></figure><p id="3c53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">进行必要的导入:</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kz"><img src="../Images/a199783d254a0cab2381f1f49545e0b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9E8VsFVJNAazOgT9SRFHng.png"/></div></div></figure><p id="85f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">获取可执行网络:</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es la"><img src="../Images/aa41d2928099e245a5e2dd9fd8067190.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxDL4UCJcruq07PjbcHwPQ.png"/></div></div></figure><p id="1251" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">推断时间:</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lb"><img src="../Images/2f367159ff0a32225e7857c073cda99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qt_e39jLWhkCHXLpDcFX2A.png"/></div></div></figure><p id="0d83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> TLDR </strong> &gt; &gt;使用本笔记本:<a class="ae ju" href="https://github.com/jojo96/intel-openvino-colab/blob/main/notebooks/AllModels.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">https://github . com/jojo 96/Intel-open vino-colab/blob/main/notebooks/all models . ipynb</strong></a></p><h1 id="8529" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">一些使用案例:</h1><p id="613a" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">这里用到的所有xml和bin文件都可以在我的repo:<a class="ae ju" href="https://github.com/jojo96/intel-openvino-colab/tree/main/models" rel="noopener ugc nofollow" target="_blank">https://github . com/jojo 96/Intel-open vino-colab/tree/main/models</a></p><p id="9311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">年龄检测示例:</strong></p><p id="7b90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">年龄-性别-识别-零售-0013 </strong>:这种经过预先训练的英特尔模型能够检测出[18–75]年龄组的人。下面的代码片段决定了<em class="jd">一个人的年龄。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lc"><img src="../Images/f61ddf0a955d19c3a7e464da391d9331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5m9rphOANGXcTN6AItUM_Q.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来源:<a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel/age-gender-recognition-retail-0013" rel="noopener ugc nofollow" target="_blank">https://github . com/openvinotoolkit/open _ model _ zoo/tree/master/models/Intel/age-gender-recognition-retail-0013</a></figcaption></figure><pre class="jf jg jh ji fd ld le lf lg aw lh bi"><span id="1e62" class="li jw hi le b fi lj lk l ll lm">#age detection age-gender-recognition-retail-0013</span><span id="6034" class="li jw hi le b fi ln lk l ll lm">en = load_IR_to_IE('age.xml')</span><span id="a62b" class="li jw hi le b fi ln lk l ll lm">import cv2<br/>image = cv2.imread('age1.png')<strong class="le hj">#input image for age prediction</strong><br/>resized = cv2.resize(image, (62,62), interpolation = cv2.INTER_AREA)</span><span id="19c7" class="li jw hi le b fi ln lk l ll lm">from torchvision import transforms<br/>tran = transforms.ToTensor()  # Convert the numpy array or PIL.Image #read image to (C, H, W) Tensor format and /255 normalize to [0, #1.0]<br/>img_tensor = tran(resized)<br/>img_tensor = img_tensor.unsqueeze_(0)</span><span id="5bd9" class="li jw hi le b fi ln lk l ll lm">res = synchronous_inference(en, img_tensor)<br/>cv2_imshow(cv2.imread('age1.png'))<strong class="le hj">#input image for age prediction</strong><br/>print("age is:"+str(round(res['age_conv3'][0][0][0][0]*100)))</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lo"><img src="../Images/353ed6b0e244f5961f7a5f1d19d20ea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DimvRcf9rxYAtessj2vyw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">输出</figcaption></figure><p id="ea19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">情感检测示例(型号:</strong> <a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel/emotions-recognition-retail-0003" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">情感-识别-零售-0003 </strong> </a> <strong class="ih hj"> ): </strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lp"><img src="../Images/e228694d52dbcde071a0f81dbfa022cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBuKJRRVVFtoQsgrDjAQGA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来源:<a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel/emotions-recognition-retail-0003" rel="noopener ugc nofollow" target="_blank">https://github . com/openvinotoolkit/open _ model _ zoo/tree/master/models/Intel/emotions-recognition-retail-0003</a></figcaption></figure><pre class="jf jg jh ji fd ld le lf lg aw lh bi"><span id="45cc" class="li jw hi le b fi lj lk l ll lm">#emotion detection emotions-recognition-retail-0003</span><span id="fad6" class="li jw hi le b fi ln lk l ll lm">en = load_IR_to_IE('<strong class="le hj">emo.xml</strong>')</span><span id="91bc" class="li jw hi le b fi ln lk l ll lm">import cv2<br/>image = cv2.imread('angry.jpg')<strong class="le hj">#input image for emotion prediction</strong><br/>resized = cv2.resize(image, (64,64), interpolation = cv2.INTER_AREA)</span><span id="396e" class="li jw hi le b fi ln lk l ll lm">from torchvision import transforms<br/>tran = transforms.ToTensor()  # Convert the numpy array or PIL.Image #read image to (C, H, W) Tensor format and /255 normalize to [0, #1.0]<br/>img_tensor = tran(resized)<br/>img_tensor = img_tensor.unsqueeze_(0)</span><span id="a030" class="li jw hi le b fi ln lk l ll lm">res = synchronous_inference(en, img_tensor)<br/>cv2_imshow(cv2.imread('angry.jpg'))<strong class="le hj">#input image for emotion #prediction</strong></span><span id="545b" class="li jw hi le b fi ln lk l ll lm">print(res)</span></pre><p id="2331" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果:包含5个情感概率浮点数的数组，顺序为:(<strong class="ih hj"> 0:中性，1:快乐，2:悲伤，3:惊讶，4:愤怒</strong>)</p><p id="0d5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">车辆检测示例(型号:</strong> <a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel/vehicle-attributes-recognition-barrier-0039" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">车辆-属性-识别-护栏-0039 </strong> </a> <strong class="ih hj"> ): </strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lq"><img src="../Images/360677ed9c987c65a40d2ffdc4b83f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MF1uTjMVEuMiCNfHgzRIw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">来源:<a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel/vehicle-attributes-recognition-barrier-0039" rel="noopener ugc nofollow" target="_blank">https://github . com/openvinotoolkit/open _ model _ zoo/tree/master/models/Intel/vehicle-attributes-recognition-barrier-0039</a></figcaption></figure><pre class="jf jg jh ji fd ld le lf lg aw lh bi"><span id="c53a" class="li jw hi le b fi lj lk l ll lm">#vehicle detection</span><span id="2db7" class="li jw hi le b fi ln lk l ll lm">en = load_IR_to_IE('vehicle.xml')</span><span id="18a4" class="li jw hi le b fi ln lk l ll lm">import cv2<br/>image = cv2.imread('truck.jpg')<strong class="le hj">#input image for vehicle prediction</strong><br/>resized = cv2.resize(image, (72,72), interpolation = cv2.INTER_AREA)</span><span id="0740" class="li jw hi le b fi ln lk l ll lm">from torchvision import transforms</span><span id="7e81" class="li jw hi le b fi ln lk l ll lm">tran = transforms.ToTensor() <br/>img_tensor = tran(resized)<br/>img_tensor = img_tensor.unsqueeze_(0)</span><span id="ba6c" class="li jw hi le b fi ln lk l ll lm">res = synchronous_inference(en, img_tensor)cv2_imshow(cv2.imread('truck.jpg'))<strong class="le hj">#input image for #vehicle prediction</strong></span><span id="c6bb" class="li jw hi le b fi ln lk l ll lm">print(res)</span></pre><p id="b4fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击此处查看整个笔记本:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><h1 id="60c1" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">奖金</h1><p id="f006" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">耶！你已经走到这一步了。一份小礼物🍀</p><p id="05a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，下面的笔记本可以用于从<a class="ae ju" href="https://github.com/openvinotoolkit/open_model_zoo/tree/master/models/intel" rel="noopener ugc nofollow" target="_blank">英特尔模型动物园</a>的模型生成xml和bin文件。有一个完整的例子展示了xml和bijn文件的生成和预测。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="2ae3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">参考资料:这里很多代码都是由</em><a class="ae ju" href="https://github.com/alihussainia/openvino-colab" rel="noopener ugc nofollow" target="_blank"><em class="jd">https://github.com/alihussainia/openvino-colab</em></a>修改改编而来</p></div></div>    
</body>
</html>