<html>
<head>
<title>🛒 How to Run Sales Revenue Analysis and Forecasting With R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🛒如何用r运行销售收入分析和预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-run-sales-revenue-analysis-and-forecasting-with-r-48b1aa89adc1?source=collection_archive---------7-----------------------#2021-06-30">https://medium.com/analytics-vidhya/how-to-run-sales-revenue-analysis-and-forecasting-with-r-48b1aa89adc1?source=collection_archive---------7-----------------------#2021-06-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e5508e9069523d12aeef669a233ec0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UI4W23y_8lzssgdf"/></div></div></figure><p id="a3e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我可能会是第一百万个写这篇文章的博主。然而，这是不可能否认的:数据驱动的决策对于每个希望提高生活和商业效率、生产力和回报的个人或组织来说都是必不可少的。</p><p id="3725" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">怎么会？让我们考虑一个简单的例子:一个典型的书商通常知道其最后顾客的以下事实:他们买了哪些书，花了多少钱。另一方面，亚马逊等大数据驱动的零售商让他们的在线客户在一次购买中产生大量线索:</p><ul class=""><li id="e65f" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">他们在找什么。</li><li id="731a" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">他们如何浏览网站。</li><li id="484b" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">他们是否以及在多大程度上被促销、特定的页面布局、评论等等所吸引。</li></ul><p id="9f81" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我相信没有必要告诉你如何更有效地赢得客户。</p><p id="26a4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你猜怎么着？你不需要成为价值1.69万亿美元的公司的<a class="ae kc" href="https://finance.yahoo.com/quote/AMZN/" rel="noopener ugc nofollow" target="_blank">来操纵数据和产生有意义的见解，以做出更好的决策。我将试图通过分析谷歌商品商店的数据来证明这一点，将它们转化为“可管理”的东西。对产量进行初步分析后，我们将设法做些预测。这里的指导性问题将是:哪个用户来源将带来更多的收入？</a></p><h1 id="acbb" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">初始化</h1><p id="290c" class="pw-post-body-paragraph ip iq hh ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">我们将使用谷歌商品商店，因为它友好地通过遵循这个指南来分享所有的统计数据和网络分析。在R中，将需要下面的库。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="f6ac" class="lp ke hh ll b fi lq lr l ls lt">library(readxl)<br/>library(tidyverse)<br/>library(dplyr)<br/>library(tidyr)<br/>library(fpp)<br/>library(astsa)<br/>library(lubridate)<br/>library(tsutils)<br/>library(smooth)</span></pre><h1 id="5ea6" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">收藏品</h1><p id="4e27" class="pw-post-body-paragraph ip iq hh ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">我的目标是有一个Excel文件，报告2019年和2020年每个来源每天获得的用户数量和收入。例如，我们想知道2019年1月20日的付费营销带来了200名用户，赚了140美元。为此，让我们转到收购部分，创建一个2019年和2020年电子商务目标的报告，其中第二维是日期。结果应该是这样的。</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/834068377eb4a0464e3335793b915a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3QXKw_az-pKP6qad"/></div></div></figure><p id="0bc4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们利用R来修复这个表。为此，我们将导入表，正确设置列的格式，过滤列并获得一个干净的数据集。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="5d08" class="lp ke hh ll b fi lq lr l ls lt"># Import the dataset, Factor the channels and convert column date<br/>X2020 &lt;- read_excel("2020.xlsx", sheet = 2)<br/>X2020$`Default Channel Grouping` &lt;-<br/>  as.factor(X2020$`Default Channel Grouping`)<br/>X2020$Data &lt;- as.Date(X2020$Data, format = "%Y%m%d")<br/>X2020$Data &lt;- format(X2020$Data, "%Y-%m")<br/>X2020 &lt;- X2020 %&gt;%<br/>  group_by(`Default Channel Grouping`, Data) %&gt;%<br/>  summarise_if(is.numeric, sum)</span><span id="bfd8" class="lp ke hh ll b fi lv lr l ls lt"># Select few columns and rename them<br/>X2020 &lt;- X2020 %&gt;%<br/>  select(c(`Default Channel Grouping`, Data, Utenti, Entrate, Transazioni))<br/>colnames(X2020) &lt;-<br/>  c("channel", "date", "users", "revenue", "transactions")</span><span id="33d6" class="lp ke hh ll b fi lv lr l ls lt"># create a first dataframe spreading the row values to the columns values<br/>revenues1 &lt;- X2020 %&gt;%<br/>  select(channel, date, users) %&gt;%<br/>  spread(channel, users, fill = 0)</span><span id="5fa7" class="lp ke hh ll b fi lv lr l ls lt"># create a second dataframe with daily revenues<br/>revenues2 &lt;- X2020 %&gt;%<br/>  group_by(date) %&gt;%<br/>  summarise(sum = sum(revenue))</span><span id="a6ab" class="lp ke hh ll b fi lv lr l ls lt"># create a third dataframe with daily number of transactions<br/>revenues3 &lt;- X2020 %&gt;%<br/>  group_by(date) %&gt;%<br/>  summarise(trans = sum(transactions))</span><span id="4233" class="lp ke hh ll b fi lv lr l ls lt"># combine the two dataframe<br/>revenues_final &lt;- inner_join(revenues1, revenues2, "date")<br/>revenues_final &lt;- inner_join(revenues_final, revenues3, "date")</span></pre><p id="74cb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">值得注意的是，我们需要使用spread函数将列值转换成类别。这就是我们在生成最终数据帧之前将数据帧分成三份的原因。</p><h1 id="90a1" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">首次分析</h1><p id="ef5a" class="pw-post-body-paragraph ip iq hh ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">现在我们的数据框架看起来更好，我们可以开始检查收入方面的最佳渠道。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="8ca1" class="lp ke hh ll b fi lq lr l ls lt"># simple average of revenue<br/>X2020a &lt;- X2020 %&gt;%<br/>  group_by(channel, date) %&gt;%<br/>  summarise(a = mean(users), b = mean(revenue), c = mean(transactions))</span></pre><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/64a5822de71a01cdd647648bdea61bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iX10MJW_9LO8yRyQ"/></div></div></figure><p id="d011" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">可以说，数据已经开始变得有用了！</p><h1 id="4fc2" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">预报</h1><p id="6acf" class="pw-post-body-paragraph ip iq hh ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">另一个了解谷歌商品商店将会发生什么的想法是应用<a class="ae kc" href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/HoltWinters" rel="noopener ugc nofollow" target="_blank">霍尔特温特方法</a>来预测未来事件。Holt的双参数模型也称为线性指数平滑，是一种用于预测数据趋势的常用平滑模型。霍尔特的模型有三个独立的方程，它们共同产生最终的预测。第一个是基本平滑方程，直接调整前一期趋势的最后平滑值。趋势本身通过第二个等式随时间更新，其中趋势表示为最后两个平滑值之间的差。最后，第三个等式用于生成最终预测。霍尔特的模型使用两个参数，一个用于整体平滑，另一个用于趋势平滑方程。</p><p id="16fb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了将它应用于所有八个流量源，我们将编写如下循环。请注意，我们在循环的中间生成了一个将两年分为12个月的时间序列。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="135a" class="lp ke hh ll b fi lq lr l ls lt">channels &lt;-<br/>  c(<br/>    "Affiliates",<br/>    "Direct",<br/>    "Display",<br/>    "Organic Search",<br/>    "Paid Search",<br/>    "Referral",<br/>    "Social",<br/>    "(Other)"<br/>  )</span><span id="95c7" class="lp ke hh ll b fi lv lr l ls lt"># model generation<br/>for (i in 1:8) {<br/>  X2020i &lt;- filter(X2020, channel == channels[i])<br/>  ts &lt;-<br/>    ts(<br/>      X2020i$revenue,<br/>      start = c(2019, 1),<br/>      end = c(2020, 12),<br/>      frequency = 12<br/>    )<br/>  fit1 &lt;- hw(ts, seasonal = "additive", h = 12)<br/>  summary(fit1)<br/>  plot(fit1)<br/>  decomp &lt;- decomp(ts, outplot = 1)<br/>}</span></pre><p id="d349" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于它们中的每一个，我们将有下面的图，向我们展示随后的趋势。</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/f9cf30e60fe8069b5108dd59d54f1b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*45xTDpsBLatCY_jQ"/></div></div></figure><p id="6a75" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总体趋势如下:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/e2cb375661ab9af8dea9be3d787fdf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ig2ZC1DpGYOuydUk"/></div></div></figure><h1 id="a6e9" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">总结</h1><p id="7bac" class="pw-post-body-paragraph ip iq hh ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">根据预测和已经收集的数据，2021年的预期月收入和渠道分配如下:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/1eab0350c075505586767817c36861f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NlefLYGq68A72-JG"/></div></div></figure><blockquote class="lw lx ly"><p id="22e7" class="ip iq jn ir b is it iu iv iw ix iy iz lz jb jc jd ma jf jg jh mb jj jk jl jm ha bi translated"><em class="hh">你有没有尝试过根据过去的观察来预测一些数据？怎么样？</em></p></blockquote></div></div>    
</body>
</html>