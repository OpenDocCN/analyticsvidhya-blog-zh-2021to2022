<html>
<head>
<title>Lamport Time: Distributed Computing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">兰波特时代:分布式计算</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/lamport-time-distributed-computing-6919c71593de?source=collection_archive---------3-----------------------#2022-02-06">https://medium.com/analytics-vidhya/lamport-time-distributed-computing-6919c71593de?source=collection_archive---------3-----------------------#2022-02-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f80a537ba0af22dd7d0eae72788c7f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WSEePtBQ5Zwgfupi2dQTAw.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">资料来源:联合国人类住区规划署</figcaption></figure><p id="8e6a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我不想直截了当地谈论兰波特时间及其重要性，而是想澄清一件重要的事情。如今，大多数时候，当我们听到术语<strong class="iv hi"> distributed </strong>时，我们开始想到为客户提供多种服务的大规模公司，如亚马逊、沃尔玛、脸书、谷歌等。</p><p id="412f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">大多数时候，我们是对的，因为分布式计算很大程度上是隐藏的。然而，为了记录在案，这里是我们心爱的堆栈溢出的定义:</p><p id="3a36" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">分布式计算</strong>是指多个计算单元连接起来完成一项共同的任务。</p><p id="d87f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一个<strong class="iv hi">分布式系统</strong>由一组自治计算机组成，通过网络和分布式中间件连接，使计算机能够协调它们的活动并共享系统资源，因此用户将该系统视为一个单一的集成计算设施。</p><p id="eaec" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">把分布式计算想象成更侧重于算法的分布式计算，而把分布式系统想象成设计高可用性系统的一种方式。</p><p id="bda5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有了这些差异，我们可以开始关注为什么全球时间对分布式计算很重要，以及将全球时间分配给这些不同的计算节点有什么困难。</p><p id="d4d4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">真正的分布式计算集群由运行在物理上分离的节点上的多个进程组成，这些节点没有公共内存和物理时钟。这些节点使用具有不可预测的传输延迟的消息相互通信，这使得很难实现全局状态和时间。</p><p id="3594" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们可以改天再离开全球之州。让我们仔细看看全球时间方面。为什么为这些物理上分离的节点设置一个全局时间很困难呢？因为它们在物理上是分离的，所以它们没有一个公共的时钟。此外，维护一个全局时钟也是不可行的，因为在消息传输中会出现意外和不可预测的延迟。</p><p id="bc38" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">那么，有什么解决办法呢？嗯，我们有一个逻辑时钟的概念，这听起来可能很奇怪，但实际上是一个简单的计数方法，为一个事件(物理节点上发生的事情)分配一个数字。在分布式系统中，我们最感兴趣的是事件的顺序，我们并不真正需要一个时钟，我们只需要一个方法在整个系统的全局视图上对事件进行排序。</p><p id="e9fa" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一种这样的方法是Lamport时间或Lamport逻辑时钟。</p><p id="9d72" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Lamport逻辑时钟通过使用一个简单的计数器来维护事件的顺序，每当事件发生时，该计数器以任意数字递增。</p><p id="7a2b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果我们必须为运行多个进程的单个节点设想这种情况，我们可以为每个进程保留一个计数器，每当一个进程从另一个进程接收消息时，我们可以简单地从当前和接收的计数器中取最大值，并将该计数器设置为该事件的时间戳。同一进程上的事件可以由进程本身按顺序递增。</p><p id="5258" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是一个示例代码:</p><figure class="js jt ju jv fd ii"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="72c4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">同样，如果将相同的方法扩展到分布式计算集群上的多个节点。每个向另一个节点传递消息的节点都可以附带一个代表其当前时间戳的计数器。另一方面，接收节点可以使用计数器将其与当前时间戳进行比较。这个新节点上的事件的时间戳将是它自己的计数器的最大值并被接收。</p><p id="a02c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">下面是发送和接收消息函数的示例代码:</p><figure class="js jt ju jv fd ii"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="7da9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">请注意，为了简化起见，我认为节点使用Rest APIs传递消息，但是，在计算集群上，节点使用API进行交互的可能性很小，因为消息可能会丢失或出现意外延迟。</p><p id="22cf" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你想看完整的示例代码，可以在<a class="ae jy" href="https://github.com/rahulbaghel159/distributed_computing" rel="noopener ugc nofollow" target="_blank">https://github.com/rahulbaghel159/distributed_computing</a>上找到。</p></div></div>    
</body>
</html>