<html>
<head>
<title>How making my own open source package saved me tones of time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作我自己的开源包是如何节省我大量时间的</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-making-my-own-open-source-package-saved-me-tones-of-time-848a77f77b82?source=collection_archive---------8-----------------------#2021-08-05">https://medium.com/analytics-vidhya/how-making-my-own-open-source-package-saved-me-tones-of-time-848a77f77b82?source=collection_archive---------8-----------------------#2021-08-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/042aba9586a07ade8613b1a9b88df038.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*GaIHNsJJsUeHtRvkvaJT4w.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">自有资源</figcaption></figure><p id="bf40" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">包是许多开源语言的核心。例如，在CRAN in R中，您可以找到已经发布的17898个包和超过200，000个Python包。</p><p id="f87a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些数字并没有包括github中所有非常有用的包。我花了很多时间用R和Python编程，但是有一些特定的项目我更喜欢用R。</p><p id="936c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我几乎所有的心理测量项目都是用R编写的，因为我觉得在那个主题上它比Python更成熟一点，而且我也非常习惯它。</p><p id="fc35" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我经常遇到的一个大麻烦是，有时我找不到非常具体的分析，这些分析正变得流行和高度。其中一个是综合可靠性(CR)指数，另一个是在验证性因子分析(CFA)框架中提取的非常常见的平均方差(AVE)(Kline，2016)。</p><p id="7d01" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因为这两种分析在很多书中都有，所以我想我可以找到一个非常简单的函数来执行这两种分析。我大错特错了！</p><p id="fcc8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因为我曾经在R中使用lavaan包进行所有围绕结构方程模型(SEM)的分析，所以我开始手动计算CR和AVE。</p><p id="c177" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我是怎么做到的？</p><p id="fb2c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我在R中创建了一个简单的函数，并在我正在处理的脚本中运行它。大概是这样的:</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="8d01" class="jw jx hh js b fi jy jz l ka kb"># Manually had to hard code the values <br/>cargas1 &lt;- abs(c(0.67,0.66,0.69,0.59))<br/>errorv1 &lt;- abs(c(0.55,0.57,0.52,0.66))</span><span id="cc92" class="jw jx hh js b fi kc jz l ka kb"># Created the functions for composite reliability </span><span id="5cf9" class="jw jx hh js b fi kc jz l ka kb">comp.rel &lt;- function(x,y) {  operacion &lt;- (sum(x) * sum(x))/(sum(x) * sum(x) + sum(y))  return(operacion)} </span><span id="f9bc" class="jw jx hh js b fi kc jz l ka kb">comp.rel(cargas1,errorv1)</span><span id="5ff6" class="jw jx hh js b fi kc jz l ka kb"># Manually had to hard code the values</span><span id="8653" class="jw jx hh js b fi kc jz l ka kb">cargas2 &lt;- abs(c(0.30,0.54,0.54))<br/>errorv2 &lt;- abs(c(0.91,0.71,0.71))</span><span id="73b2" class="jw jx hh js b fi kc jz l ka kb"># Created the functions for AVE</span><span id="64b3" class="jw jx hh js b fi kc jz l ka kb">ave &lt;- function(x) {  operacion &lt;- sum(x^2)/length(x)  return(operacion)}</span><span id="a74e" class="jw jx hh js b fi kc jz l ka kb">ave(cargas1)</span></pre><p id="3682" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种解决方案在许多方面都不是最理想的:</p><ol class=""><li id="4f25" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm ki kj kk kl bi translated">它是硬编码的，因此如果将来我想部署它，可能会给团队带来巨大的麻烦。</li><li id="5038" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">这很混乱，因为我不得不复制粘贴新创建的函数，有时我没有找到它们，我不得不重写它们。</li><li id="9f6e" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">对我和检查我的代码的人来说，阅读起来很困难，因为没有好的解释或自述文件，很难理解这些数字。</li></ol><p id="f63c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这样的例子不胜枚举…</p><p id="b24e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">推出</strong><a class="ae kr" href="https://github.com/jsaraviadrago/bluegrafir" rel="noopener ugc nofollow" target="_blank"><strong class="ir hi">bluegrafir</strong></a><strong class="ir hi">套餐</strong></p><p id="4db4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这发生在几年前，有一天我对这种情况感到厌倦。所以我决定自己做一个包放在github里。bluegrafir是以我的两只猫(blue和grafito)命名的，旨在提供一种简单的方法来执行这些和其他功能。</p><p id="157e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总的来说，它是一个整洁的表，连续变量的线性变换，平均方差提取和验证性因素分析(CFA)的综合可靠性的实施。</p><p id="a1c3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，制作自己的软件包非常有趣，它真的让我的工作更有效率。为了制作这个包，我不得不真正深入lavaan包的内部工作，构造函数，测试它们并制作文档。这真的帮我解决了一些主要问题，让我的工作更有效率。例如:</p><ol class=""><li id="3f31" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm ki kj kk kl bi translated">我发现所有需要计算CR和AVE的值都在一个深lavaan对象中，因此我可以从那里提取它，而不是硬编码它们。</li><li id="d2fa" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">要打开这个函数，我不需要再次创建它，我只需要通过<a class="ae kr" href="https://github.com/jsaraviadrago/bluegrafir" rel="noopener ugc nofollow" target="_blank"> bluegrafir </a>包调用它。</li><li id="2292" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">我创建了一个非常详细的自述文件，所以如果有人想知道这些函数和包到底做了什么，他们可以在那里阅读。</li></ol><p id="0786" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外…</p><p id="82b8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.我的团队开始使用这个包，所以我们没有“传递函数”,而且每个人都知道这个分析是关于什么的，以及它是如何完成的。所以更容易得到可重复的结果，因为我们都执行相同的代码。</p><p id="3b4e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">5.我的团队开始有更多的时间，因为我们可以减少手动任务的时间，并将时间更多地用在创造性的事情上，例如解决业务问题。</p><p id="b7c7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了使包有组织，有一些blue_something函数和其他graph_functions函数。所有的blue _ functions都专注于线性变换和图表中的grafi_ in。我决定这样做，这样在包的名字和它的功能之间就有了一条连贯的思路。CR和AVE有不同的名字，因为它们是用来计算不同的东西的。像“testthat”、“devtools”和“roxygen”这样的包是创建、测试和使用这些包的基础。</p><p id="c2d5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想查看包裹，你可以点击这里(<a class="ae kr" href="https://github.com/jsaraviadrago/bluegrafir" rel="noopener ugc nofollow" target="_blank"> bluegrafir </a>)。</p><p id="9cec" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">简单回顾一下</strong></p><ol class=""><li id="6d19" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm ki kj kk kl bi translated">制作你自己的包是非常有趣的，你可以学到很多关于制作包的细节，并迫使你学习好的编码实践。</li><li id="3440" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">创建自己的包帮助我提高了工作效率。它有助于减少硬编码、低效编码和与团队成员交流编码。</li><li id="18e4" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">创建一个包有助于所有团队减少手动任务，将它用在更有价值的事情上，并增加可重复结果和部署的可能性。</li></ol><p id="f390" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">就是这样！希望这篇文章激励你制作自己的包！谁知道呢？也许你可以个性化它，给它一个很棒的名字和标志。</p><p id="6a84" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">编码快乐！</p><p id="1acf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">参考</strong></p><p id="7214" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">克莱恩河(2016年)。<em class="ks">结构方程建模原理与实践。第四版</em>。纽约:吉尔福德出版社。</p></div></div>    
</body>
</html>