<html>
<head>
<title>Morse Code Translator Detect Blinks — Python, OpenCV, MediaPipe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">莫尔斯电码转换器检测闪烁——Python、OpenCV、MediaPipe</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/morse-code-translator-with-python-opencv-and-mediapipe-886e3bd973c5?source=collection_archive---------2-----------------------#2021-06-15">https://medium.com/analytics-vidhya/morse-code-translator-with-python-opencv-and-mediapipe-886e3bd973c5?source=collection_archive---------2-----------------------#2021-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b5f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2021年6月15日</p><p id="6d79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大家好，</p><p id="882e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">距离我上一次发布教程已经有一段时间了，或者说是一般的东西。基本上生活发生了，我决定不分享，而不是分享低质量的内容。今天，我将带你完成一个计算机视觉项目，它将你的实时视频输入转换成莫尔斯字母表，这样你就可以忽短忽长地眨眼来写信息。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/75b6f7c2a83d440ef01bb70fad88ccf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wNOCRw3jApGkw9sFmM298g.gif"/></div></div></figure><p id="32d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该项目的源代码是<a class="ae jo" href="https://github.com/eren23/mediapipe--morsecode-translator" rel="noopener ugc nofollow" target="_blank">这里</a>，我也用<a class="ae jo" href="https://www.youtube.com/watch?v=V9bzew8A1tc&amp;t=141s" rel="noopener ugc nofollow" target="_blank">这个</a>牛逼教程作为锅炉板开始，如果你想了解更多关于计算机视觉应用你可以从我发布的链接查看频道所有者的频道。所以，事不宜迟，让我们开始吧。</p><p id="a13e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为开始，我想解释一下MediaPipe库，“MediaPipe为直播和流媒体提供开源的跨平台、可定制的ML解决方案。”这个定义来自他们自己的<a class="ae jo" href="https://mediapipe.dev/" rel="noopener ugc nofollow" target="_blank">网站</a>，并且简单明了地解释了你可以用这个库做什么，他们提供了几个可以在不同平台上运行的其他解决方案，我将在以后的不同帖子中解释它们。我们今天将使用的功能称为“面部网格”，这个解决方案为我们提供了一个面部标志地图，其中包含了可以在人脸上看到的最重要的468个标志。使用该地图，我们将计算面部某些特定点之间的比率，利用该信息，我们将检测相机上的人是否眨眼。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jp"><img src="../Images/8e73c7a1e6e39fcc52f5daf96548f390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0aCYE2juG_EIaeaY.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">面部标志</figcaption></figure><p id="071d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面的图片中，你可以看到我之前提到的观点，通过这种方式访问人脸的标志，你可以进行各种与面部表情相关的检测，另一个很酷的内置库是<a class="ae jo" href="https://github.com/TadasBaltrusaitis/OpenFace" rel="noopener ugc nofollow" target="_blank"> OpenFace </a>你也可以查看该库。</p><p id="2d8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了能够检测眼睛是否眨眼，我们使用代表“眼睛纵横比”的“耳朵”比率来计算眼睛的“耳朵”值，我们需要访问一个人面部的6个标志。你可以从链接<a class="ae jo" href="https://hackaday.io/project/27552-blinktotext/log/68360-eye-blink-detection-algorithms" rel="noopener ugc nofollow" target="_blank">这里</a>看到“耳”是如何计算的，以及我们需要哪些地标。</p><p id="91f1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们继续编码部分；首先，我们需要进口我们需要的东西。我还定义了一个函数来调整帧的大小。我们首先定义一个先前的时间变量来检测稍后的FPS，然后为了定义绘图对象以便我们可以在界标之间绘图，我们创建FaceMesh对象，最后我们编辑我们的绘图规范。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ju"><img src="../Images/62d2ad4e6a45cfd905e951d7d2d7b5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/0*zpQYL0oJdaJoeiQy.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">进口和实用工具</figcaption></figure><p id="aa6c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我们定义2个数组来保存旧的ear值，1个数组来保存字母，1个bool来保存长信号，1个数组来保存闪烁持续时间，1个数组来保存不闪烁的容限，1个数组来保存闪烁的容限，1个字符串来保存Morse代码字符串，最后一个数组来保存找到的字母。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jv"><img src="../Images/b91ed1b66456a212b707bbc8a50105b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/0*qCJCsXL3tfVgn5X2.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">变量</figcaption></figure><p id="5eae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">保存莫尔斯字母表的字典。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jw"><img src="../Images/892b4c80f2b4850da8ef64c35d5be6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:290/format:webp/0*9xgSuyCbSwAqlt0M.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">莫尔斯电码字母表</figcaption></figure><p id="7f3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们项目的主循环，读取源图像，将输入放大50%，从OpenCV的BGR转换为RGB，因为这种形式需要从MediaPipe获得，然后我们通过获取当前时间并用当前时间和先前时间的差除以1来计算FPS。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jx"><img src="../Images/173ad7673cbc610f5cc3ca2a6290d8fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/0*YuhRVZI7U8yIJTGs.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">主循环、FPS计算、图像准备</figcaption></figure><p id="b516" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果每个界标都有界标，首先画出界标之间的连接，然后计算耳值。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jy"><img src="../Images/11dc19261540d501e262f3e244c495fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nmY28saVmpoYnAml.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">EAR值计算</figcaption></figure><p id="c21d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果计数大于10，则使其为零，否则递增1。如果以前的ear数组长于10，则用新的ear值更改当前元素，并使long check为真。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jz"><img src="../Images/4cf9b1e845f9d6f90ad64bc74cfe4404.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/0*vOm47bSjTkKQQcnR.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">旧耳朵比较</figcaption></figure><p id="6806" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果是long，并且当前ear值为9个旧ear值，则检查保持，检测闪烁并在else内将“blinkedFor”增加1，如果闪烁长于0.8秒，则将其计为L(长)，否则计为S(短)，否则将未闪烁时间增加1，如果未闪烁持续时间长于2秒(FPS的2倍)，如果我们在MorseCode中找到的字母，则将其添加到字母数组，如果不只是清除数组。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ka"><img src="../Images/3bd8a2174ce72444aec98cec66364508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/0*2K_bzQhPGYeOku32.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">主莫尔斯电码检查</figcaption></figure><p id="99e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，最后把找到的数组，变成字符串，然后放到页面上，一个小小的惊喜，如果文本中有我女朋友的名字(Ece ),它会自动把❤加到末尾。:D</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es kb"><img src="../Images/b9750a03de388a7dc3e6c5f39e51db4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*tXUrhaQQDFTduEmR.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">展示结果</figcaption></figure><p id="fa7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就这些了，我希望这个教程简单易懂并且有趣。这次我会继续定期发布，没有时间限制，希望下次能见到你。:)</p></div><div class="ab cl kc kd go ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ha hb hc hd he"><p id="def1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kj">最初发表于</em><a class="ae jo" href="https://blog.akbuluteren.com/blog/morse-code-translator-using-camera-feed-and-blinks" rel="noopener ugc nofollow" target="_blank"><em class="kj">【https://blog.akbuluteren.com】</em></a><em class="kj">。</em></p></div></div>    
</body>
</html>