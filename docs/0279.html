<html>
<head>
<title>Getting battery status using Cordova !</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cordova获取电池状态！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-battery-status-using-cordova-28c4832c40c0?source=collection_archive---------36-----------------------#2021-01-10">https://medium.com/analytics-vidhya/getting-battery-status-using-cordova-28c4832c40c0?source=collection_archive---------36-----------------------#2021-01-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="294c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两个<strong class="ig hi"> <em class="jc">插件使用Cordova获取电池状态</em> </strong>，第一个叫做<a class="ae jd" href="https://www.npmjs.com/package/phonegap-plugin-battery-status" rel="noopener ugc nofollow" target="_blank">phonegap-plugin-battery-status</a>，第二个叫做<a class="ae jd" href="https://www.npmjs.com/package/cordova-plugin-battery-status" rel="noopener ugc nofollow" target="_blank">Cordova-plugin-battery-status</a>。</p><h1 id="f0c8" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">phonegap-插件-电池-状态</h1><p id="1e49" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated"><code class="du kh ki kj kk b">phonegap-plugin-battery-status</code>插件被弃用，但<strong class="ig hi"> <em class="jc">仍在工作</em> </strong>。</p><p id="0a22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以用<strong class="ig hi"> <em class="jc">来获取</em> </strong>的信息，比如电池是否正在充电:<code class="du kh ki kj kk b">onchargingchange</code>，电池的电量是多少:<code class="du kh ki kj kk b">onlevelchange</code>，设备充电还有多少时间:<code class="du kh ki kj kk b">onchargingtimechange</code>，设备放电还有多少时间:<code class="du kh ki kj kk b">ondischargingtimechange</code>。最后两个信息只能在android上获得。</p><p id="b172" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建演示应用程序:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="b08f" class="kt jf hh kk b fi ku kv l kw kx">$ cordova create demo-pg-battery-status com.twiserandom.mobileapps.demo.pgBatteryStatus "Pg Battery Status" <br/>$ cd demo-pg-battery-status<br/>$ cordova platform add ios<br/>$ cordova platform add android<br/>$ cordova plugin add phonegap-plugin-battery-status</span></pre><p id="3028" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编辑<code class="du kh ki kj kk b">www/index.html</code>如下所示:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="1e97" class="kt jf hh kk b fi ku kv l kw kx">&lt;!DOCTYPE html&gt;</span><span id="8882" class="kt jf hh kk b fi ky kv l kw kx">&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="utf-8"&gt;<br/>        &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: <a class="ae jd" href="https://ssl.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://ssl.gstatic.com</a> 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"&gt;<br/>        &lt;meta name="format-detection" content="telephone=no"&gt;<br/>        &lt;meta name="msapplication-tap-highlight" content="no"&gt;<br/>        &lt;meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover"&gt;<br/>        &lt;meta name="color-scheme" content="light dark"&gt;<br/>        &lt;title&gt;Demo Phonegap Plugin Battery Status&lt;/title&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;div class="app"&gt;<br/>            &lt;div id="console"&gt;<br/>                &lt;h1&gt;Battery Status&lt;/h1&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        &lt;script src="cordova.js"&gt;&lt;/script&gt;<br/>        &lt;script src="js/index.js"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="295c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并编辑<code class="du kh ki kj kk b">www/js/index.js</code>，看起来像这样:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="c4b0" class="kt jf hh kk b fi ku kv l kw kx">document.addEventListener('deviceready', onDeviceReady, false);</span><span id="20d8" class="kt jf hh kk b fi ky kv l kw kx">function onDeviceReady() {<br/>    let console = document.getElementById("console");<br/>    function logStatusObject(){<br/>        console.innerHTML += `&lt;p&gt;level: ${this.level}&lt;/p&gt;`;<br/>        console.innerHTML += `&lt;p&gt;charging: ${this.charging}&lt;/p&gt;`;<br/>        console.innerHTML += `&lt;p&gt;chargingTime: ${this.chargingTime}&lt;/p&gt;`;<br/>        console.innerHTML += `&lt;p&gt;dischargingTime: ${this.dischargingTime}&lt;/p&gt;`;<br/>        console.innerHTML += "&lt;hr/&gt;"; }<br/>    navigator<br/>        .getBattery()<br/>        .then(<br/>            function (battery) {<br/>                battery.onchargingchange = logStatusObject;<br/>                battery.onlevelchange = logStatusObject;<br/>                battery.onchargingtimechange = logStatusObject;<br/>                battery.ondischargingtimechange = logStatusObject;<br/>            }); }</span></pre><p id="f403" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行，应用程序使用:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="6540" class="kt jf hh kk b fi ku kv l kw kx">$ cordova emulate android</span></pre><p id="726a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并检查使用插件获得的状态消息。</p><div class="kl km kn ko fd ab cb"><figure class="kz la lb lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/16a8d8f607e3fd2c05652111252d94a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*h1F2sjsBGUoHNVr00-3v5Q.png"/></div></figure><figure class="kz la lm lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/6d520b02e1e501962a6846d754d8b129.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*s1On4G1Z1Y9m4OUYFglsIg.png"/></div></figure><figure class="kz la ln lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/55e9e75cae442b89f506a1cfcc26b924.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*ORWxYDObJqrNopXQvMCQ1A.png"/></div></figure></div><h1 id="c85d" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">科尔多瓦-插件-电池-状态</h1><p id="6f52" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">该插件可用于<strong class="ig hi"> <em class="jc">获取关于</em> </strong>的信息，当电池达到临界水平:<code class="du kh ki kj kk b">batterycritical</code>，或低水平:<code class="du kh ki kj kk b"> batterylow</code>，当电池电量变化:<code class="du kh ki kj kk b">batterystatus</code>，或当手机正在被插入或拔出:<code class="du kh ki kj kk b">batterystatus</code>。</p><p id="966e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建应用程序:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="87c7" class="kt jf hh kk b fi ku kv l kw kx">$ cordova create demo-cp-battery-status com.twiserandom.mobileapps.demoCpBatteryCtatus  "Demo Cp Battery Status"<br/>$ cd demo-cp-battery-status<br/>$ cordova platform add ios<br/>$ cordova platform add android<br/>$ cordova plugin add cordova-plugin-battery-status</span></pre><p id="7634" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编辑<code class="du kh ki kj kk b">www/index.html</code>如下所示:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="3342" class="kt jf hh kk b fi ku kv l kw kx">&lt;!DOCTYPE html&gt;</span><span id="3f0a" class="kt jf hh kk b fi ky kv l kw kx">&lt;html&gt;</span><span id="53d0" class="kt jf hh kk b fi ky kv l kw kx">&lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta http-equiv="Content-Security-Policy"<br/>        content="default-src 'self' data: gap: <a class="ae jd" href="https://ssl.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://ssl.gstatic.com</a> 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"&gt;<br/>    &lt;meta name="format-detection" content="telephone=no"&gt;<br/>    &lt;meta name="msapplication-tap-highlight" content="no"&gt;<br/>    &lt;meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover"&gt;<br/>    &lt;meta name="color-scheme" content="light dark"&gt;<br/>    &lt;title&gt;Demo Cordova Plugin Battery Status&lt;/title&gt;<br/>&lt;/head&gt;</span><span id="6067" class="kt jf hh kk b fi ky kv l kw kx">&lt;body&gt;<br/>    &lt;div class="app"&gt;<br/>        &lt;div id="console"&gt;<br/>            &lt;h1&gt;Battery Status&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="cordova.js"&gt;&lt;/script&gt;<br/>    &lt;script src="js/index.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;</span><span id="ab3b" class="kt jf hh kk b fi ky kv l kw kx">&lt;/html&gt;</span></pre><p id="24e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编辑<code class="du kh ki kj kk b">www/js/index.js</code>如下所示:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="f62e" class="kt jf hh kk b fi ku kv l kw kx">document.addEventListener('deviceready', onDeviceReady, false);</span><span id="fd8b" class="kt jf hh kk b fi ky kv l kw kx">function onDeviceReady() {<br/>    let console = document.getElementById("console");<br/>    function logStatusObject(status){<br/>        console.innerHTML += `&lt;p&gt;level: ${status.level}&lt;/p&gt;`;<br/>        console.innerHTML += `&lt;p&gt;isPlugged: ${status.isPlugged}&lt;/p&gt;`;<br/>        console.innerHTML += "&lt;hr/&gt;"; }<br/>    window.addEventListener("batterystatus", logStatusObject, false);<br/>    window.addEventListener("batterylow", logStatusObject, false);<br/>    window.addEventListener("batterycritical", logStatusObject, false); }</span></pre><p id="206d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行，应用程序使用:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="ac54" class="kt jf hh kk b fi ku kv l kw kx">$ cordova emulate android</span></pre><div class="kl km kn ko fd ab cb"><figure class="kz la lo lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/fbc8077bc1a3b23e2c9c0eae9272da59.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*dZvLK9uxHsHvjIs9dN3lYA.png"/></div></figure><figure class="kz la lp lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/aafcdcb7f3844537fbaf20044e2b3ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*BYlT1kDRgjrvZsC7i-x1TA.png"/></div></figure><figure class="kz la lb lc ld le lf paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><img src="../Images/9b65228d940f150be7768f986b7ed46b.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*96U4GqlOl15O4tS1zcgGkw.png"/></div></figure></div><h1 id="1752" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">获取电池读数可以用来跟踪用户活动吗？</h1><p id="57bc" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">嗯<strong class="ig hi"> <em class="jc">很可能，通过使用差分分析</em> </strong>，在一定程度上可以知道用户在做什么。</p><p id="7dbd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jd" href="https://scholar.google.com/scholar?as_ylo=2017&amp;q=Energy++Consumption++in++Smartphones&amp;hl=en" rel="noopener ugc nofollow" target="_blank">研究</a>了一部手机会消耗多少电池，<a class="ae jd" href="https://core.ac.uk/download/pdf/146499153.pdf" rel="noopener ugc nofollow" target="_blank">基于</a>用户正在做的事情。例如，<em class="jc">如果他在</em>看电影，那么电池消耗率是这样，如果他在听音乐，那么电池消耗率是这样，如果他在使用社交媒体，那么就是这样…</p><p id="58c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">给定所做的研究，可以基于 电池电量的变化率<strong class="ig hi"> <em class="jc">进行分析，当电话被插入或拔出时，利用一定程度的知识来构建用户一直在做什么。</em></strong></p></div><div class="ab cl lq lr go ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ha hb hc hd he"><p id="cf8a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">原载于2021年1月10日https://twiserandom.com</em><a class="ae jd" href="https://twiserandom.com/cordova/getting-battery-status-using-cordova/" rel="noopener ugc nofollow" target="_blank"><em class="jc"/></a><em class="jc">。</em></p></div></div>    
</body>
</html>