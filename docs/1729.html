<html>
<head>
<title>4 ways to add variables or values into Python strings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Python字符串中添加变量或值的4种方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/4-ways-to-add-variables-or-values-into-python-strings-860082cf8461?source=collection_archive---------4-----------------------#2021-03-15">https://medium.com/analytics-vidhya/4-ways-to-add-variables-or-values-into-python-strings-860082cf8461?source=collection_archive---------4-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时，需要在字符串中包含变量或非字符串数据类型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3b66379a6833d1ae48d08d5f5e6c2376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSLSkNj-pteXwQlLU-UO8A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">f弦的“你好，世界”</figcaption></figure><p id="5c11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。逗号</strong></p><p id="b273" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最常见的方法是用逗号分隔字符串和变量，如下所示。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="621f" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; name = “John”</span><span id="1052" class="jy jz hi ju b fi ke kb l kc kd">&gt;&gt;&gt; age = 16<br/>&gt;&gt;&gt; height = 1.72<br/>&gt;&gt;&gt; print(“Name:”, name, “; Age:”, age, “; Height:”, height, “m”)</span><span id="ddfc" class="jy jz hi ju b fi ke kb l kc kd">Name: John ; Age: 16 ; Height: 1.72 m</span></pre><p id="8eda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这并没有提供很多定制输出的能力，并且仍然保持一切良好。我们还需要注意，在输出字符串中，每个逗号分隔都是一个“空格”。</p><p id="f8bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以做得更好。</p><p id="2bd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。%运算符</strong></p><p id="4d31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个古老的学校方法，但你仍然会经常看到它。事实上，我也经常使用它。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="b301" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; print(“Name: %s; Age: %d; Height: %fm” % (name, age, height))</span><span id="eba1" class="jy jz hi ju b fi ke kb l kc kd">Name: John; Age: 16; Height: 1.720000m</span></pre><p id="a2b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这给了我们更多的灵活性，但是有两个主要的限制。</p><p id="f736" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.您不能包含任何数据类型，如列表、日期时间等</p><p id="1306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.%s代表字符串，%d代表整型，%f代表浮点型。你不能把一个人错当成另一个人。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="e829" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; print(“Name: %s; Age: %f; Height: %dm” % (name, age, height))</span><span id="8d9e" class="jy jz hi ju b fi ke kb l kc kd">Name: John; Age: 16.000000; Height: 1m</span></pre><p id="90a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的例子中，没有错误，因为数据类型是可转换的。</p><p id="73ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，python自动将必要的数据类型转换为输入。</p><p id="b0c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，有一些浮点数，例如“infinity”不能转换成int。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="fc4c" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; import math<br/>&gt;&gt;&gt; math.inf<br/>inf<br/>&gt;&gt;&gt; int(math.inf)<br/>Traceback (most recent call last):<br/>File “&lt;stdin&gt;”, line 1, in &lt;module&gt;<br/>OverflowError: cannot convert float infinity to integer</span><span id="fc4b" class="jy jz hi ju b fi ke kb l kc kd">&gt;&gt;&gt; print(“Infinity %s” % math.inf)<br/>Infinity inf</span><span id="d32b" class="jy jz hi ju b fi ke kb l kc kd">&gt;&gt;&gt; print(“Infinity %f” % math.inf)<br/>Infinity inf</span><span id="19a2" class="jy jz hi ju b fi ke kb l kc kd">&gt;&gt;&gt; print(“Infinity %d” % math.inf)<br/>Traceback (most recent call last):<br/>File “&lt;stdin&gt;”, line 1, in &lt;module&gt;<br/>OverflowError: cannot convert float infinity to integer</span></pre><p id="5193" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当%运算符有多个参数时，它必须是一个元组。最后，您可以指定一个浮点数的长度，如下所示(点后跟小数位数)。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="a86b" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; print(“Name: %s; Age: %d; Height: %.1fm” % (name, age, height))</span><span id="0e19" class="jy jz hi ju b fi ke kb l kc kd">Name: John; Age: 16; Height: 1.7m</span></pre><p id="a648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。字符串格式化方法</strong></p><p id="893d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python string有一个格式方法，可以让你插入任何数据类型。它非常类似于%运算符(用“{}”替换了“%s”或“%d”或“%f ”),但更好。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="2367" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; print(“Name: {}; Age: {}; Height: {}m”.format(name, age, height))</span><span id="e450" class="jy jz hi ju b fi ke kb l kc kd">Name: John; Age: 16; Height: 1.72m</span></pre><p id="5aba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">格式方法更好，因为</p><p id="df7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.您不必确定数据类型。</p><p id="ec34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.您可以插入任何数据类型。</p><p id="c641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.您可以通过索引重复使用某个值。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="03ef" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; from datetime import datetime</span><span id="0703" class="jy jz hi ju b fi ke kb l kc kd">&gt;&gt;&gt; print(“{} test scores in a list {} on {}”.format(name, [23, 25.5, 28], datetime.now()))</span><span id="85f6" class="jy jz hi ju b fi ke kb l kc kd">John test scores in a list [23, 25.5, 28] on 2021–03–15 13:30:39.754769</span><span id="ebe6" class="jy jz hi ju b fi ke kb l kc kd"># Indexing like a list<br/>&gt;&gt;&gt; print(“{0} is {3}. {0} loves {1}, {2} and {0}”.format(name, ‘Harry Potter’, ‘ice cream’, age))</span><span id="813a" class="jy jz hi ju b fi ke kb l kc kd">John is 16. John loves Harry Potter, ice cream and John</span><span id="aeb1" class="jy jz hi ju b fi ke kb l kc kd"># Another form of index<br/>&gt;&gt;&gt; print("{fname} {lname} is {age}".format(age=16, fname="John", lname="Snow"))</span><span id="cd17" class="jy jz hi ju b fi ke kb l kc kd">John Snow is 16</span></pre><p id="91aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一个索引示例还说明了format方法中的值可以表示为key=value对的列表。</p><p id="c14f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。f弦</strong></p><p id="f753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个有吸引力的选项是格式化字符串(f-string)。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="32ff" class="jy jz hi ju b fi ka kb l kc kd">&gt;&gt;&gt; print(f”{name} is {age}, and today is {datetime.now().strftime(‘%Y-%m-%d’)}”)</span><span id="738c" class="jy jz hi ju b fi ke kb l kc kd">John is 16, and today is 2021–03–15</span></pre><p id="95b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主要的优点是，它让你很容易知道一个值在哪里，我只是认为它看起来🆒 😎。但是缺点是</p><p id="ac55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.它需要python&gt;=3.6。你必须确定这一点以避免错误。</p><p id="6cfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.表达式部分不能包含反斜杠(在` {}`内)。</p><p id="5895" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.第二点也意味着你不能在没有语法错误的情况下包含“”。</p><p id="19fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之:</p><ul class=""><li id="1fad" class="kf kg hi ih b ii ij im in iq kh iu ki iy kj jc kk kl km kn bi translated">格式方法是我认为最好的方法。</li><li id="3812" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc kk kl km kn bi translated">f弦很酷，非常酷😎。但要求python≥3.6</li><li id="7846" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc kk kl km kn bi translated">%格式还不错</li><li id="a699" class="kf kg hi ih b ii ko im kp iq kq iu kr iy ks jc kk kl km kn bi translated">方法1非常适合快速操作。</li></ul></div></div>    
</body>
</html>