<html>
<head>
<title>Sampling Methods in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中的取样方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sampling-methods-in-r-b3c92e580c57?source=collection_archive---------2-----------------------#2021-05-24">https://medium.com/analytics-vidhya/sampling-methods-in-r-b3c92e580c57?source=collection_archive---------2-----------------------#2021-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bcda40a93ec200ff0e076d3707d83c46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXDsFu0j8wcxwLKzPTTK7g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">保罗·伯格梅尔在<a class="ae iu" href="https://unsplash.com/s/photos/stadium-seats?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="393b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">什么是采样？</strong></p><p id="a04f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们有一个规模为N的总体，样本只不过是从该总体中提取的数据的子集。选择样本的过程称为抽样。</p><p id="22b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">为什么要采样？</strong></p><p id="27bb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">取样可用于以下任何两种情况</p><ol class=""><li id="c47b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">当无法获得全部人口数据时</li></ol><p id="9133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我们可能不得不使用可用的数据样本来对整个总体进行推断。</p><p id="7db7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.当人口数据太大时</p><p id="6360" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我们可以使用以下任何一种抽样技术从总体中抽取样本，从而可以做出进一步的推断。</p><p id="dc86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">注:</strong>确保选择理想的样本很重要，因为不正确的样本可能导致与总体不相关的推断。</p><p id="d3ea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">采样方法:</strong></p><p id="3518" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">取样方法分为两大类</p><ol class=""><li id="f1c8" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">概率抽样</li><li id="a2b2" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">非概率抽样</li></ol><p id="f480" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">概率抽样:</strong></p><p id="171e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种抽样中，样本是随机选择的，每个样本都有一个已知的被选中概率。</p><p id="0d90" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">概率抽样进一步分为</p><ol class=""><li id="fdbe" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">简单随机抽样</li><li id="1116" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">系统抽样</li><li id="71e1" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">分层抽样</li><li id="cf46" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">巢式抽样法</li></ol><h2 id="5588" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated"><strong class="ak"> 1。简单随机抽样:</strong></h2><p id="99af" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">随机抽样是最流行和最常用的抽样方法之一。在简单的随机抽样中，总体中的每个案例都有相等的概率被抽样选中。</p><p id="008c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以通过顺序标记所有病例并生成均匀随机数以从总体中选择病例来获得随机样本。</p><p id="c115" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以使用sample()函数生成R中的简单随机样本，如下所示。</p><p id="5fc4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">示例函数定义如下</p><p id="56c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">样本(x，size，replace = FALSE，prob = NULL)</p><p id="b223" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从数字1到10的大小为10的样本可以如下生成。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="b607" class="kh ki hi lm b fi lq lr l ls lt">&gt; sample(1:10,10)</span><span id="1471" class="kh ki hi lm b fi lu lr l ls lt">[1] 8 2 9 10 3 7 6 5 1 4</span></pre><p id="67e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如上图所示，<strong class="ix hj"> </strong>样本默认是不替换生成的，即曾经被抽样的项目不会再次被抽样。可以通过将替换参数设置为TRUE来创建替换样本，如下所示。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="85d5" class="kh ki hi lm b fi lq lr l ls lt">&gt; sample(1:10, replace=T)</span><span id="445f" class="kh ki hi lm b fi lu lr l ls lt">[1] 8 8 8 9 3 5 3 2 10 7</span></pre><p id="b789" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们在上面的示例中看到的，8在示例中重复了三次，3重复了两次。</p><p id="b270" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">理想情况下，在随机抽样中，所有项目被选中的概率相等(在上面的例子中p = 0.1in)。但是在sample()方法中，我们还可以为样本中要选择的项目分配概率。</p><p id="e9b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们有一个包含两个项目(红色、绿色)的列表，默认情况下，红色和绿色都有50% (p=0.5)的机会被选中。假设我们在样本中需要更多的红色而不是绿色，这可以通过使用样本()中的“prob”参数来实现，如下所示</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="83e4" class="kh ki hi lm b fi lq lr l ls lt">&gt; sample(c(“red”,” green”),10,replace=T,prob=c(0.6,0.4))</span><span id="0806" class="kh ki hi lm b fi lu lr l ls lt">[1] “red” “red” “red” “red” “red” “red” “green” “red” “green”</span><span id="eb7d" class="kh ki hi lm b fi lu lr l ls lt">[10] “red”</span></pre><p id="e776" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如我们所见，样本中红色比绿色多，因为红色被选中的概率(p=0.6)比绿色(p=0.4)高。</p><h2 id="971d" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">2.系统取样:</h2><p id="46c8" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">系统抽样用于人口数据是有序列表或按时间排列的情况。例如，为了分析一家商店在所有星期天的平均销售额，可以通过选择一周中所有第7天(星期天)的平均销售额数据包括在样本中来使用系统抽样。</p><p id="a1b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即，在系统抽样中，以固定的时间间隔从总体数据中选择个体。为了从大小为p的总体中创建大小为n的样本，将固定的区间(k)作为p/n</p><p id="581f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即k=p/n</p><p id="108d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即，对于规模为1000的人群，为了创建规模为100 (1000/100)的样本，可以从任何随机起点选择每10个项目包括在样本中。</p><p id="9bad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们看看如何在R中创建一个系统样本，</p><p id="d221" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">R中的系统样本:</strong></p><p id="04e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了在R中创建一个系统样本，使用了“教学采样”包的S.SY()函数。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="3812" class="kh ki hi lm b fi lq lr l ls lt">install.packages("TeachingSampling")  <br/>library(TeachingSampling)<br/>P &lt;- c("Mon-8", "Tues-4", "Wed-4", "Thurs-6", "Fri-7","Sat-45","Sun-34","Mon-21", "Tues-11","Wed-34","Thurs-16","Fri-10","Sat-17","Sun-19")<br/>#systematic sample from a population of 14 with every 2nd included from the populaion P<br/>systematic_sample &lt;- S.SY(14,2)<br/>systematic_sample<br/>P[systematic_sample]<br/>&gt; P[systematic_sample]<br/>[1] "Mon-8"    "Wed-4"    "Fri-7"    "Sun-34"   "Tues-11"  "Thurs-16" "Sat-17"</span></pre><p id="f4d0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用上面的R代码，从包含14天期间内一周中所有日子的销售量的总体P中，我们创建了一个系统样本，其中仅包含隔日售出的销售量。</p><p id="56ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注:系统抽样比简单的随机抽样更容易实施。然而，在系统抽样中，并非每个项目都有同等的机会被选中，因此许多项目可能永远不会被选中。此外，如果总体具有周期性趋势，则系统样本的有效性取决于周期性区间和系统抽样区间之间的关系。</p><h2 id="b82d" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">3.分层抽样:</h2><p id="6a7c" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">在分层抽样中，根据一些最能描述整个人口的共同因素，如年龄、性别、收入等，将人口分成更小的子群。这样形成的群体被称为地层。</p><p id="b8be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，为了分析男性和女性用户每天发送消息所花费的时间量，可以将阶层视为男性和女性用户，并且可以使用随机抽样来选择男性和女性阶层中的项目。</p><p id="08b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注:与随机抽样相比，分层抽样给出了精确的估计值，但最大的缺点是它需要了解人口的适当特征(其细节并不总是可用的)，并且很难决定根据哪些特征进行分层。</p><p id="4fec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">R中分层抽样:</strong></p><p id="28bb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">使用dplyr </strong></p><p id="a47e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看如何使用iris数据集创建分层样本，每个物种有3个样本。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="1ce0" class="kh ki hi lm b fi lq lr l ls lt">library(dplyr)<br/>set.seed(1)<br/>iris %&gt;%<br/>  group_by (Species) %&gt;%<br/>  sample_n(., 3)</span><span id="e003" class="kh ki hi lm b fi lu lr l ls lt">Sepal.Length Sepal.Width Petal.Length Petal.Width    Species<br/>1          4.3         3.0          1.1         0.1     setosa<br/>2          5.7         3.8          1.7         0.3     setosa<br/>3          5.2         3.5          1.5         0.2     setosa<br/>4          5.7         3.0          4.2         1.2 versicolor<br/>5          5.2         2.7          3.9         1.4 versicolor<br/>6          5.0         2.3          3.3         1.0 versicolor<br/>7          6.5         3.0          5.2         2.0  virginica<br/>8          6.4         2.8          5.6         2.2  virginica<br/>9          7.4         2.8          6.1         1.9  virginica</span></pre><h2 id="57ed" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">使用strata():</h2><p id="8209" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">上述相同的分层样本也可以使用取样包的strata函数创建，如下</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="1c7d" class="kh ki hi lm b fi lq lr l ls lt">library(sampling)  <br/>stratas = strata(iris, c("Species"),size = c(3,3,3), method = "srswor")<br/>stratas</span><span id="dc01" class="kh ki hi lm b fi lu lr l ls lt">Species ID_unit   Prob Stratum</span><span id="9459" class="kh ki hi lm b fi lu lr l ls lt">17      setosa      17 0.06       1</span><span id="1a74" class="kh ki hi lm b fi lu lr l ls lt">24      setosa      24 0.06       1</span><span id="0336" class="kh ki hi lm b fi lu lr l ls lt">45      setosa      45 0.06       1</span><span id="f5f8" class="kh ki hi lm b fi lu lr l ls lt">65  versicolor      65 0.06       2</span><span id="e58b" class="kh ki hi lm b fi lu lr l ls lt">79  versicolor      79 0.06       2</span><span id="24c0" class="kh ki hi lm b fi lu lr l ls lt">95  versicolor      95 0.06       2</span><span id="a386" class="kh ki hi lm b fi lu lr l ls lt">114  virginica     114 0.06       3</span><span id="f299" class="kh ki hi lm b fi lu lr l ls lt">116  virginica     116 0.06       3</span><span id="db39" class="kh ki hi lm b fi lu lr l ls lt">128  virginica     128 0.06       3</span></pre><p id="60e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意:在上面的函数中，方法代表了在地层中选择单个样本的方法。一般使用以下方法。</p><p id="f0a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没有替换的简单随机抽样</p><p id="033e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">简单随机抽样替换</p><p id="504f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">泊松-泊松抽样</p><p id="e13a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">系统-系统取样</p><h2 id="60cd" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated"><strong class="ak"> 4。整群抽样:</strong></h2><p id="217c" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">如果人口数据本质上是地理数据，或者根据人口统计、习惯、背景等在人口中有一些预定义的群体，则通常使用整群抽样。</p><p id="785b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在整群抽样中，首先将总体分成称为群的小组，然后选择随机群来创建样本。</p><p id="2912" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果样本中包含了所选类别的所有元素，则称之为单阶段整群抽样；如果样本中包含了从每个类别中随机选择的元素，则称之为两阶段整群抽样。</p><p id="2bd4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，假设一个组织想要分析一种药物在美国的副作用，在这种情况下，可以先将整个人口划分为几个城市(其中每个城市的数据都包含该药物对所有患者的副作用的详细信息),然后随机选择这些城市中的患者纳入样本，从而执行两阶段整群抽样。</p><h2 id="2346" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">R中的整群抽样:</h2><p id="078e" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">为了执行整群抽样，我们使用了SDaA包中的小学教师工作量数据集。工作量数据集包含不同地区不同学校教师的工作量详细信息，如工作时间、准备时间等。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8cc8" class="kh ki hi lm b fi lq lr l ls lt">install.packages(“SDaA”)<br/>library(SDaA)<br/>data(“teachers”)<br/>&gt; head(teachers)</span><span id="6494" class="kh ki hi lm b fi lu lr l ls lt">   dist school hrwork size preprmin assist</span><span id="60ee" class="kh ki hi lm b fi lu lr l ls lt">1 large     12  35.00   26      210      0</span><span id="c281" class="kh ki hi lm b fi lu lr l ls lt">2 large     12  35.00   18       75      0</span><span id="df59" class="kh ki hi lm b fi lu lr l ls lt">3 large     12  35.00   27      300      0</span><span id="82a2" class="kh ki hi lm b fi lu lr l ls lt">4 large     12  34.60   34       90      0</span><span id="3eb5" class="kh ki hi lm b fi lu lr l ls lt">5 large     12  33.75   30      180      0</span><span id="9c5a" class="kh ki hi lm b fi lu lr l ls lt">6 large     12  35.00   27      300      0</span><span id="658d" class="kh ki hi lm b fi lu lr l ls lt">#list of all the school_ids <br/>&gt; unique(teachers[,2])<br/>[1] 12 13 20 21 22 36 38 41 11 30 31 32  4 23  7 15 16 28 29  6  2 18 19 33 34  1  8  9  3 24 25</span><span id="a534" class="kh ki hi lm b fi lu lr l ls lt">#creating a cluster sample with 7 randomly selected clusters.<br/>#Here we have formed clusters using the school variable.Hence each cluster contains the workload data of 7 randomly selected schools.<br/>set.seed(123456)<br/>cl=cluster(teachers,clustername=c("school"),size=7,method="srswor")<br/>cl_data = getdata(teachers, cl)</span><span id="9d26" class="kh ki hi lm b fi lu lr l ls lt">&gt; head(cl_data)</span><span id="c654" class="kh ki hi lm b fi lu lr l ls lt">dist hrwork size preprmin assist school ID_unit      Prob</span><span id="038e" class="kh ki hi lm b fi lu lr l ls lt">260 sm/me  30.00    9       NA      0      1     260 0.2258065</span><span id="250f" class="kh ki hi lm b fi lu lr l ls lt">243 large  35.00   20      225    600     18     243 0.2258065</span><span id="78bd" class="kh ki hi lm b fi lu lr l ls lt">244 large  35.00   16       90    300     18     244 0.2258065</span><span id="311f" class="kh ki hi lm b fi lu lr l ls lt">19  large  37.50   25      180      0     20      19 0.2258065</span><span id="49e9" class="kh ki hi lm b fi lu lr l ls lt">18  large  38.75   24      240      0     20      18 0.2258065</span><span id="b2c0" class="kh ki hi lm b fi lu lr l ls lt">17  large  38.35   24      120      0     20      17 0.2258065</span><span id="4303" class="kh ki hi lm b fi lu lr l ls lt">#list of the randomly selected schools<br/>&gt; unique(cl_data[,6])</span><span id="7a3d" class="kh ki hi lm b fi lu lr l ls lt">[1]  1 18 20 25 28 31 41</span><span id="dddb" class="kh ki hi lm b fi lu lr l ls lt">#count of workload details within each school clusters<br/>&gt; table(cl_data$school)<br/>8 12 16 21 28 34 38<br/>5 13 24  7 18  7 10<br/></span><span id="a415" class="kh ki hi lm b fi lu lr l ls lt">#random sampling of clusters with a sample size of 5, so that each cluster contains 5 randomly selected workload details per school cluster.<br/>cl_sam &lt;- cl_data %&gt;% group_by(school) %&gt;% sample_n(size = 5)</span><span id="2ec0" class="kh ki hi lm b fi lu lr l ls lt">#Each of the 7 clusters have 5 randomly selected workload data.<br/>&gt; table(cl_sam$school)<br/>8 12 16 21 28 34 38<br/>5  5  5  5  5  5  5</span></pre><p id="b328" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用上面的R代码，我们创建了7个随机簇，每个簇包含一个特定学校的工作量数据。以5的样本大小进一步随机采样聚类。因此，对于每个选定的学校集群，每个集群有5个工作量数据。</p><h2 id="50d2" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">分层抽样和整群抽样的区别:</h2><p id="2e23" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">分层抽样和整群抽样的主要区别在于，在整群抽样中，组/群自然出现，如城市、地区等，这些选择的群元素作为一个整体用于抽样，例如，对于工作量数据，最初选择了7个学校群，这些群的所有元素单独用于进一步抽样。也就是说，只有7所学校的工作量数据被用于抽样调查，而忽略了其余学校的工作量细节。</p><p id="7d19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，在分层抽样中，群体(在这种情况下是阶层)最初并不存在，来自每个阶层的元素被选择包括在样本中。例如，对于上述iris，样本中包含了三个可用物种中每个物种的3个元素，没有一个物种像整群抽样一样被整体忽略。</p></div></div>    
</body>
</html>