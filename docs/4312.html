<html>
<head>
<title>Performance metrics for classification</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类的性能指标</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/performance-metrics-for-classification-fd358c153894?source=collection_archive---------6-----------------------#2021-09-21">https://medium.com/analytics-vidhya/performance-metrics-for-classification-fd358c153894?source=collection_archive---------6-----------------------#2021-09-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/ee03ad47f7d14648127d68095c8f2c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jLnnI8d8QzPiYgf1"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">凯文·Ku在<a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="30c6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本文中，我们将研究常用的分类性能指标。让我们了解一下什么是机器学习中的分类问题。分类是一种监督学习算法。它可以被定义为一种将一组给定的数据分成多个类别的方法。这些类通常被称为目标或标签。例如，我们希望将电子邮件分为垃圾邮件和非垃圾邮件两类。这被认为是一个分类问题，我们将预测一封电子邮件是否是垃圾邮件。</p><p id="babd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，让我们继续讨论最常用的分类性能指标。</p><h2 id="dedd" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated"><strong class="ak">精度</strong></h2><p id="e641" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">准确度被定义为所有正确分类的数据点与总数据点的比率。</p><p id="be34" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">准确度=正确预测数/预测总数。</p><p id="016f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当您的数据接近平衡时，这是一个很好的衡量标准，这意味着所有的类标签都平等地出现在数据集中。在不平衡数据集的情况下，通过简单地将所有数据点分类为多数类，很容易实现高精度。因此，如果您的数据不平衡，就不应该使用精确度。</p><h2 id="ad36" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">混淆矩阵</h2><p id="17e0" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">在理解混淆矩阵之前，让我们先看看真阳性、假阳性、真阴性和假阴性。</p><p id="8cf9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">真阳性(TP) </strong> -可以解释为属于阳性类，被模型归类为阳性类。</p><p id="132a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">假阳性(FP)</strong>——可以解释为属于阴性类，被模型归类为阳性类。</p><p id="16b3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">真阴性(TN) </strong> -可以解释为属于阴性类，被模型归类为阴性类。</p><p id="7d3c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">假阴性(FN)</strong>——可以解释为属于阳性类，被模型归类为阴性类。</p><p id="7f2c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">混淆矩阵只不过是一个二维表格。实际和预测，两个维度都有TP、FP、TN和FN。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es ks"><img src="../Images/329520456a00e3bb68803a700986e847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*nwpBzyESuiuHFjEhID7k8A.png"/></div></figure><p id="e540" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于性能良好的模型，对角线元素即TP和TN应该是高的，非对角线元素即FP和FN应该是低的。混淆矩阵提供了一个关于哪些类被正确或不正确地分类，以及模型所犯的所有错误的详细描述。</p><h2 id="daea" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">精确度和召回率</h2><p id="b9b0" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">精确度定义为所有预测阳性点中正确分类阳性的分数。</p><p id="f9c9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">回忆被定义为正确分类的积极点在所有实际积极点中所占的比例。</p><p id="f084" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">精度= TP/TP+FP</p><p id="2e42" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">召回= TP/TP+FN</p><p id="725d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在某些情况下，精确度比回忆更重要，而在其他情况下，反之亦然。</p><p id="1cd0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">比方说，我们必须将电子邮件分类为垃圾邮件或非垃圾邮件。我们不希望我们的任何重要电子邮件被发送到垃圾邮件文件夹，而任何垃圾邮件仍然可以放在主文件夹中。因此，在这种情况下，FP的成本大于FN的成本。因此，这里精确比回忆更重要。</p><p id="39cf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们再举一个例子。让我们做一个Covid诊断测试。我们不希望任何阳性病例不被发现，而如果一些阴性病例被显示为阳性，那么它的危害就小得多。因此，在这种情况下，FN的成本大于FP的成本。所以回忆比精确重要得多。</p><h2 id="0c17" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">F1分数</h2><p id="f10f" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">当我们想要在精确度和召回率之间取得平衡时，F1分数是需要的。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es kx"><img src="../Images/0c7012edafa58399ccebed831abb30c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*UArdmYnX-1gQxHD5YXnhbA.png"/></div></figure><p id="603e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它是精确率和召回率的调和平均值，因此考虑了误报和漏报。此外，如果我们有一个班级不平衡，F1分数是一个很好的衡量标准。</p><p id="ef12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在让我们来看看F1分数的两个不同变量。</p><p id="5be6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">宏观F1得分</strong> -宏观F1得分也称为宏观平均F1得分。它给予所有类别标签同等的权重。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es ky"><img src="../Images/71c338c75ba69b49f9627125c56e9ecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*uOifOg7RpuGyttbQ6i_v9A.png"/></div></figure><p id="6dca" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">其中I是类/标签索引，N是类的数量。</p><p id="c686" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它可以解释为类别/标签F1分数的平均值。对于只在普通类上表现良好而在稀有类上表现不佳的模型，它将是低的。这是F1分数的默认汇总方法。</p><p id="9f7a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">微观F1得分</strong> -微观F1得分也称为微观平均F1得分。它衡量所有班级的综合贡献的F1分数。当计算F1分数时，我们将不同组的所有单个真阳性、假阳性和假阴性相加，并从总和中计算微精度和微召回。最后，我们计算微精度和微召回的调和平均值，这为我们提供了微F1分数。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es kz"><img src="../Images/df334d1b0f196fa66eaf27a6e35a554b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*LyD5LQbJJwf3PzlmZtwCQA.png"/></div></figure><p id="56af" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微观平均更加强调数据中的共同标签，因为它对每个样本给予同样的重视。</p><p id="d549" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们用一个例子来了解一下微F1的分数。</p><p id="39d6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">(TP1)=12 <br/> (FP1)=9 <br/> (FN1)=3</p><p id="559f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">那么精度(P1)和召回(R1)将是57.14和80</p><p id="4fdc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于不同的数据集，系统的</p><p id="e676" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">(TP2)=50 <br/> (FP2)=23 <br/> (FN2)=9</p><p id="0747" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">那么精确度(P2)和召回率(R2)将是68.49和84.75</p><p id="9124" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，使用微平均方法的系统的平均精度和召回率是</p><p id="c19d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微平均精度=(TP1+TP2)/(TP1+TP2+FP1+FP2)=(12+50)/(12+50+9+23)= 0.6596<br/>微平均召回率=(TP1+TP2)/(TP1+TP2+FN1+FN2)=(12+50)/(12+50+3+9)= 0.8378</p><p id="9324" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微F1得分= 2 * 0.6596 * 0.8378/0.6596+0.8378 = 0.737</p><h2 id="ba92" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">AUC-ROC</h2><p id="48e5" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">这是在各种阈值设置下对分类问题的性能测量。它告诉我们我们的模型可以区分多少给定的类。</p><p id="d938" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">AUC-ROC值的范围从0到1。它越接近1，我们的模型就越能准确地预测正类为正类，负类为负类。ROC(接收机工作特性曲线)描绘了两个主要参数:</p><p id="1517" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">真实阳性率</p><p id="9d6a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">假阳性率</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es la"><img src="../Images/3ba0cbd7d1f5b0c17e3a65a7409ded43.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*NLygRt-_rtrLp0DiK7r9LQ.png"/></div></figure><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es lb"><img src="../Images/7680705c1214a38d800951819dc13374.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*EvwsVAaSCcdB4pAVmepXmw.png"/></div></figure><p id="198c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">ROC曲线绘制了TPR对不同阈值的FPR。降低阈值会将更多的项目分类为阳性，因此假阳性会增加，而如果我们提高阈值，则会将更多的项目分类为阴性，因此假阴性会增加。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es lc"><img src="../Images/4fb47ffd83f8bb6013998e7b54f14aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*QtChAgLQmcaozGQGWRNwHQ.png"/></div></figure><p id="a243" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们来看看AUC。它代表ROC曲线下的面积，测量整个ROC曲线下的面积。它提供了跨所有可能的分类阈值的综合性能度量。一个优秀的模型的AUC接近1，这意味着它具有良好的可分性。一个差模型的AUC为0，这意味着它具有最差的可分性度量，即它在重复结果。在另一种情况下，如果AUC为0.5，则意味着该模型无论如何都没有类别分离能力。</p><p id="b98c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们已经介绍了分类的主要指标。如果您喜欢阅读，请关注我<a class="ae it" href="https://vaishali4175.medium.com/" rel="noopener">此处</a>了解更多数据科学内容，也可以在Linkedin上与我联系，我们很乐意与您谈论数据世界。</p><p id="5e41" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">感谢阅读。</p></div></div>    
</body>
</html>