<html>
<head>
<title>CDR data analysis — Location approximation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CDR数据分析—位置近似值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/cdr-data-analysis-location-approximation-18fe00e616fe?source=collection_archive---------6-----------------------#2021-02-06">https://medium.com/analytics-vidhya/cdr-data-analysis-location-approximation-18fe00e616fe?source=collection_archive---------6-----------------------#2021-02-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/63398bb8a760f615399e2232827aa0c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A15KhbPU0Pv5lcLhWSFRXA.jpeg"/></div></div></figure><p id="93fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能想知道CDR数据分析是什么意思。<strong class="is hj">通话</strong> <strong class="is hj">明细</strong> <strong class="is hj">记录</strong>数据最初是电信公司用来监控用户的使用情况。许多研究人员和开发人员试图通过分析呼叫记录、手机信号塔数据记录和消息数据记录等数据集的组合，将这些数据用于许多新的研究项目。当涉及到客户行为时，数据科学家使用各种库和工具来最大化分析数据过程的效率，这些数据在行业中具有很高的价值。</p><h1 id="4b93" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Python数据分析库和工具简介</h1><p id="bc78" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">就数据科学和数据分析而言，Python是世界上使用最广泛的编程语言之一。因此，这种语言具有可读性很强的编码方法，完成某项任务所需的行数最少，从而节省了时间。</p><p id="4015" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有许多基于Python语言的数据分析工具。但是，在分析呼叫详细记录(CDR)数据的过程中，需要一些工具和库。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/d945fd02d4fae55f0ebd3192d0e450da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qePzd2m_uIPvsozXYh89CQ.png"/></div></div></figure><h2 id="bfe8" class="kw jp hi bd jq kx ky kz ju la lb lc jy jb ld le kc jf lf lg kg jj lh li kk lj bi translated">Numpy</h2><p id="c8fe" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Numpy(数值python)包用于Python矢量化数据的科学计算。使用该库可以实现数学和逻辑运算、向量形状的创建和操作、与线性代数相关的运算。</p><p id="9c2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用numpy代替普通python数组和对象的一些优点是，</p><ul class=""><li id="ebd5" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">使用固定大小数组的numpy数组最小化内存使用。</li><li id="d58c" class="lk ll hi is b it lt ix lu jb lv jf lw jj lx jn lp lq lr ls bi translated">由于矢量化数组和多维数组操作以及数据过滤操作，最大限度地减少了花费在数据分析过程上的时间。</li></ul><p id="962e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Numpy代码库:<a class="ae ly" href="https://github.com/numpy/numpy" rel="noopener ugc nofollow" target="_blank">https://github.com/numpy/numpy</a></p><p id="2140" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">numpy(PyPI):<a class="ae ly" href="https://pypi.org/project/numpy/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/numpy/</a></p><p id="e910" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Numpy库需要使用pip命令安装到python工作环境中。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="6025" class="kw jp hi ma b fi me mf l mg mh">pip install numpy</span></pre><p id="7d29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运筹学</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="5b25" class="kw jp hi ma b fi me mf l mg mh">pip3 install numpy</span></pre><p id="18ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后必须将其导入python工作环境。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="265f" class="kw jp hi ma b fi me mf l mg mh">import numpy as np</span></pre><p id="af8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有基于numpy的分析都可以使用“np”别名来执行。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="153e" class="kw jp hi ma b fi me mf l mg mh">np_arr = np.array(list)</span></pre><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/f10fcc419ab742ba5d9b24040251f8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yu6tHUs6u02zKdFguhpT0g.png"/></div></div></figure><h2 id="3327" class="kw jp hi bd jq kx ky kz ju la lb lc jy jb ld le kc jf lf lg kg jj lh li kk lj bi translated">熊猫</h2><p id="37ee" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Pandas (Python数据分析)库是一个快速、强大、灵活、广泛使用的开源数据分析工具，为Python语言编写，用于数据操作和分析。</p><p id="5669" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">熊猫官网:<a class="ae ly" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/</a></p><p id="d14c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">熊猫代码库:<a class="ae ly" href="https://github.com/pandas-dev/pandas" rel="noopener ugc nofollow" target="_blank">https://github.com/pandas-dev/pandas</a></p><p id="3d54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">熊猫(PyPI):<a class="ae ly" href="https://pypi.org/project/pandas/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/pandas/</a></p><p id="5421" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pandas库需要使用pip命令安装到python 3工作环境中。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="bae7" class="kw jp hi ma b fi me mf l mg mh">pip install pandas</span></pre><p id="d374" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后它必须被导入到python工作环境中。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="4d2c" class="kw jp hi ma b fi me mf l mg mh">Import pandas as pd</span></pre><p id="374e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pandas能够读取csv、tsv、xlsx、json类型的文件，并使用内置二维数据结构的数据帧处理数据。同样，图书馆使用熊猫系列，一维数组可以存储任何类型的数据。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="abdb" class="kw jp hi ma b fi me mf l mg mh">pd.read_csv(“filename”) # read csv files <br/>pd.read_json(“filename”) # read json files</span></pre><p id="a172" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用vanilla python构建的数据对象可以转换为pandas数据帧或序列，然后可以与库提供的数据分析功能一起使用。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="d95d" class="kw jp hi ma b fi me mf l mg mh">pd.DataFrame(list)<br/>pd.Series(list)</span></pre><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/e562ea2e1a8063e95eddae41a8b2f295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mk_DNuApAOfsZPNbLW22g.png"/></div></div></figure><h2 id="7db1" class="kw jp hi bd jq kx ky kz ju la lb lc jy jb ld le kc jf lf lg kg jj lh li kk lj bi translated">袋狸</h2><p id="7817" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Bandicoot是一个开源的python CDR数据分析工具，它包含许多内置函数来分析给定的手机元数据。该库能够在使用<a class="ae ly" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>前端框架构建的用户界面中可视化用户数据。</p><p id="dba1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">bandicoot主要致力于提供分析个人用户数据的功能，这些数据可以分类为个人特征、空间特征和社交网络。每个类别包含一组可以使用用户对象访问的功能。</p><p id="f62f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Bandicoot官网:【https://cpg.doc.ic.ac.uk/bandicoot/ T2】</p><p id="1906" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Bandicoot代码库:【https://github.com/computationalprivacy/bandicoot T4】</p><p id="5d25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">bandicoot(PyPI):<a class="ae ly" href="https://pypi.org/project/bandicoot/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/bandicoot/</a></p><p id="cdcb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Bandicoot库需要使用pip命令安装到python工作环境中。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="5d0a" class="kw jp hi ma b fi me mf l mg mh">pip install bandicoot</span></pre><p id="24ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后必须将其导入python工作环境。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="c7bb" class="kw jp hi ma b fi me mf l mg mh">import bandicoot as bc</span></pre><h1 id="df3b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">库在位置逼近过程中的使用</h1><p id="2807" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">常见的CDR数据文件有txt、csv、json、xlsx等文件类型。数据分析工具必须能够读取上述文件类型，以便处理相关数据。</p><p id="7990" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不同的库在数据分析过程中提供不同类型的功能。并且通过组合两个或更多库的不同功能，我们可以实现我们想要的所需CDR分析功能。</p><p id="6ac5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">说到numpy库，它并不是专门为CDR数据分析过程开发的，它提供了许多功能，如从文件中读取数据和写入文件，将数据数组转换为numpy数组，以及处理n维数组。</p><ul class=""><li id="808e" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">使用genfromtxt()方法打开csv文件</li></ul><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="e6bd" class="kw jp hi ma b fi me mf l mg mh">Numpy_array = np.genfromtxt(“file.csv”, <br/>                            delimiter = “,”, <br/>                            skip_header=1)</span></pre><ul class=""><li id="d115" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">另存为txt和csv文件</li></ul><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="34d9" class="kw jp hi ma b fi me mf l mg mh">np.savetxt(“file.txt”, np_array)<br/>np.savetxt(“file.csv”, np_array)</span></pre><ul class=""><li id="767c" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">将列表转换为numpy数组</li></ul><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="55aa" class="kw jp hi ma b fi me mf l mg mh">np_array = np.array(python_list)</span></pre><ul class=""><li id="359e" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">将numpy数组转换为列表</li></ul><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="13a1" class="kw jp hi ma b fi me mf l mg mh">python_list = np_array.tolist()</span></pre><ul class=""><li id="dbc7" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">根据条件筛选数组中的项目。</li></ul><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="8a8f" class="kw jp hi ma b fi me mf l mg mh">arr_user1  = arr[arr == user1_number]</span></pre><p id="7ad5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管numpy是python中处理n维数组的有效方法，但对于处理包含不同数据类型(例如int和String)的数组，该库并不是一个好的解决方案。</p><p id="49a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，Pandas库内置了在同一数组中处理不同数据类型的功能。在读取给定的文件后，数据将被处理并转换成数据帧。此外，数据打印、列删除、行过滤、数据帧追加、数据帧合并、切片和连接是Pandas库提供的其他重要功能。</p><p id="eb3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于Bandicoot，该库能够读取不同类型的数据文件、清理数据、处理丢失的数据，并计算给定用户的家庭位置。然而，该库的一个缺点是，数据文件必须是特定的格式。示例数据文件在bandicoot <a class="ae ly" href="https://cpg.doc.ic.ac.uk/bandicoot/demo/" rel="noopener ugc nofollow" target="_blank">演示</a>教程中提供。</p><h1 id="80db" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">选择合适的数据集</h1><p id="bf44" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">选择合适的数据集是位置计算过程中的一个重要部分。当计算数据以获得家庭和工作地点的近似值时，以下两个数据集是必不可少的。</p><h2 id="6387" class="kw jp hi bd jq kx ky kz ju la lb lc jy jb ld le kc jf lf lg kg jj lh li kk lj bi translated">呼叫数据集</h2><p id="4ebe" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当选择呼叫数据集文件时，用户、时间戳和天线id列是必不可少的，因为需要用户手机号码来识别相关用户，时间戳根据用户的工作开始时间、工作结束时间对记录进行分类，天线id获得记录的相关纬度和经度。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/8d4920250198135f342f77d22c1b92b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PcyDA3XUCQetSOYGjtGdYA.png"/></div></div><figcaption class="ml mm et er es mn mo bd b be z dx translated">示例呼叫数据集文件的图像</figcaption></figure><h2 id="b0ad" class="kw jp hi bd jq kx ky kz ju la lb lc jy jb ld le kc jf lf lg kg jj lh li kk lj bi translated">天线数据集</h2><p id="e64e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">选择天线数据集文件时，纬度和经度列是必不可少的，因为位置是使用纬度和经度计算的。此外，天线id应该包括在数据文件中，因为每个呼叫记录都与一个天线id相关联。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/5e64491c80aec61c8a6ac748af6c0cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*9bDy5FNHtq3gioQ4qQ8CsQ.png"/></div><figcaption class="ml mm et er es mn mo bd b be z dx translated">天线数据集文件示例的图像</figcaption></figure><h1 id="160d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">接近用户的家和工作地点</h1><p id="469c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">以下方法可用于计算使用Pandas的选定用户的大致家庭和工作位置。</p><p id="5065" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过使用read_csv("filename ")方法读取csv文件来获取呼叫和天线数据帧</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="e55b" class="kw jp hi ma b fi me mf l mg mh">call_df = pd.read_csv("calls.csv")<br/>antenna_df = pd.read_csv("antennas.csv")</span></pre><p id="8fad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过使用drop(array_of_col_names)方法删除列来获取经过筛选的相关数据框。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="6c2c" class="kw jp hi ma b fi me mf l mg mh">c_drop = ["direction", "duration", "cost"]<br/>call_df.drop(c_drop, inplace=True, axis=1)</span></pre><p id="ac87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为用户定义用户联系号码、工作开始时间和工作结束时间。根据定义的时间段计算家庭和工作地点。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="c485" class="kw jp hi ma b fi me mf l mg mh">user1_no = 7123456789<br/>work_start_time = 7    #7am<br/>work_end_time = 19     #7pm</span></pre><p id="a49e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在计算中，如果用户在工作，则work _ start _ time &lt; = timestamp &lt; work _ end _ time。同样，如果上述陈述为假，则用户在家。</p><p id="5fe5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据所选用户联系号码过滤呼叫数据框的行，并获取与用户相关的所有记录，如user1_call_records_df。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="d652" class="kw jp hi ma b fi me mf l mg mh">filter1 = call_df[call_df['user']==user1_no ]<br/>filter2 = call_df[call_df['other']==user1_no ]<br/>user1_call_records_df = filter1.append(filter2)</span></pre><p id="022e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过基于相同的antenna_id对两个数据帧对象进行交集/内部连接，将呼叫和天线数据帧连接起来。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="73f9" class="kw jp hi ma b fi me mf l mg mh">call_antenna_df = pd.concat([user1_call_records_df, antenna_df], axis=1, join='inner')</span></pre><p id="a0fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用给定的工作开始和结束时间检查时间戳，如果用户通话记录时间在工作时间段内，则返回“真”，否则返回“假”。该方法可以根据添加的csv文件中的时间戳列而有所不同。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="5b5f" class="kw jp hi ma b fi me mf l mg mh">def check_timestamp_for_work(timestamp):<br/>    day = timestamp.day<br/>    time = timestamp.time<br/>    if day &gt; 5:<br/>        return False<br/>    else:<br/>        if work_end_time &gt;= time.hour &gt; work_start_time:<br/>            return True<br/>        else:<br/>            return False</span></pre><p id="92a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用call_antenns_df数据帧计算家庭和工作位置。在下面的函数中，具有最大记录计数的地理位置是针对家庭和工作位置分别计算的，并以[latitude，longitude]的形式返回一个数组。</p><pre class="ks kt ku kv fd lz ma mb mc aw md bi"><span id="034e" class="kw jp hi ma b fi me mf l mg mh">def compute_home_location(call_antenna_df):<br/>    location_dict = {}<br/>    for record in call_antenna_df.itertuples():<br/>        at_home = not(check_timestamp_for_work(record.timestamp))<br/>        if at_home:<br/>            location =       <br/>                    str(record.latitude)+","+str(record.longitude)<br/>            if location in location_dict:<br/>                location_dict[location] += 1<br/>            else:<br/>                location_dict[location] = 1<br/>    if len(location_dict) &gt; 0:<br/>        latitude, longitude = map(float, max(location_dict, <br/>                                  key=location_dict.get).split(','))<br/>        home = [latitude, longitude]<br/>        return home<br/>    return []<br/></span><span id="9e45" class="kw jp hi ma b fi mq mf l mg mh">def compute_work_location(call_antenna_df):<br/>    location_dict = {}<br/>    for record in call_antenna_df.itertuples():<br/>        at_home = check_timestamp_for_work(record.timestamp)<br/>        if at_home:<br/>            location = str(record.latitude)+ ","                            <br/>                                           +str(record.longitude)<br/>            if location in location_dict:<br/>                location_dict[location] += 1<br/>            else:<br/>                location_dict[location] = 1<br/>    if len(location_dict) &gt; 0:<br/>        latitude, longitude = map(float, max(location_dict, <br/>                                  key=location_dict.get).split(','))<br/>        home = [latitude, longitude]<br/>        return home<br/>    return []<br/></span><span id="4938" class="kw jp hi ma b fi mq mf l mg mh">home_location = compute_home_location(call_antenna_df)<br/>work_location = compute_work_location(call_antenna_df)</span></pre><p id="3059" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">位置的准确性随着所选用户的数据文件中的记录数量的增加而增加。</p><p id="1523" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果数据量较大，并且数据计算过程需要大量时间，numpy库可以帮助最小化时间。</p><p id="7dfb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，你可以用<a class="ae ly" href="https://pandas.pydata.org/docs/development/index.html#development" rel="noopener ugc nofollow" target="_blank"> Pandas </a>和<a class="ae ly" href="https://cpg.doc.ic.ac.uk/bandicoot/demo/" rel="noopener ugc nofollow" target="_blank"> Bandicoot </a>库进行编码，并分析数据文件以找到各种用户模式，如用户出行和天线周围的人口。此外，您可以使用python数据可视化库，如<a class="ae ly" href="https://pypi/project/matplotlib/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>、<a class="ae ly" href="https://pypi/project/folium/" rel="noopener ugc nofollow" target="_blank">folio</a>来可视化结构化数据。</p></div></div>    
</body>
</html>