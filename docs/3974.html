<html>
<head>
<title>Latest 6 top ways to tune Amazon Redshift Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调优亚马逊红移性能的6大最新方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/latest-6-top-ways-to-tune-amazon-redshift-performance-193090ad2570?source=collection_archive---------10-----------------------#2021-08-14">https://medium.com/analytics-vidhya/latest-6-top-ways-to-tune-amazon-redshift-performance-193090ad2570?source=collection_archive---------10-----------------------#2021-08-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c690" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Amazon Redshift是一个非常受欢迎的PB级大规模并行数据仓库，它提供了一个开放的标准JDBC/ODBC驱动程序接口，供用户直接与现有的商业智能工具对接，并重用现有的分析和查询方法。这篇简短的指南更多的是优化Amazon Redshift性能的简单提示，并为各种优化方法提供深入的分析和操作指导。</p><h1 id="0728" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">首先，查询吞吐量比查询并发性更重要</h1><p id="43ab" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">配置并发(比如内存管理)可以通过自动WLM和查询优先级队列优先级机制，将并发能力引入到Amazon Redshift的内部机器学习模型中。这使得自动化流程能够为大规模生产集群中的特定工作负载分配更多资源。这种方法是为了最大化吞吐量，并确保亚马逊红移集群可以在特定的时间内完成特定量的工作，例如实现每分钟300次查询或每小时处理1500条SQL语句。因此，建议充分利用并发机制来提高吞吐量，因为吞吐量是一种核心性能指标，对集群用户有直接影响。</p><p id="187e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了通过优化自动WLM设置来最大化吞吐量，Amazon Redshift中的并发扩展功能还可以将集群的吞吐量扩展到原始集群固有吞吐量的10倍。亚马逊红移目前将10倍设置为吞吐量的软限制。联系客户团队调整限额。</p><h1 id="6423" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">第二，使用亚马逊红移JDBC或ODBC驱动</h1><p id="64c1" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">Amazon Web Services建议您使用Amazon红移JDBC或ODBC驱动程序来提高性能。每个驱动程序对应于各种可选配置，可以进一步调整以控制语句使用量和结果集中的具体行数。</p><h1 id="5255" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">第三，使用自动化功能</h1><p id="2fd7" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">Amazon Redshift增加了许多自动化功能，为SET DW提供100%的信息支持，将表维护纳入Amazon Web Services服务职责(不再由用户承担)，并采用更智能的默认设置增强开箱即用的性能。即使表任务随时间变化，Amazon Redshift Advisor也会继续监视集群，寻找各种优化机会。Amazon Web Services还发布了一个量化Amazon Redshift性能的基准测试解决方案，以轻松再现性能测试结果。</p><p id="c80b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">自动化功能还进一步降低了使用Amazon Redshift的门槛。这有助于加快生产速度，并更好地监控红移吞吐量。</p><h1 id="b90a" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">第四，利用RA3节点和亚马逊红移频谱实现计算和存储资源的自主扩展</h1><p id="201e" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">亚马逊红移托管存储将调整计算资源的数量，而不会被存储容量问题分散注意力。此外，并发扩展允许我们根据实际需要调整整个集群中的其他计算资源。亚马逊红移频谱使用亚马逊简单存储服务(亚马逊S3)提供的几乎无限的存储容量来支持按需计算层。它的容量可以达到主集群容量的10倍，并且它现在提供了支持物化视图的选项。补充工具有助于独立扩展计算和存储资源。</p><h1 id="85bd" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">第五，使用暂停和恢复功能来优化使用成本</h1><p id="6843" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">现在，所有亚马逊红移集群都可以使用暂停和恢复功能。对于按需创建的群集，群集暂停操作将停止对每秒计算的服务计费。通过暂停和恢复功能，保留的实例集群可以定义特定的访问时间，或者将数据集冻结在特定的时间点。</p><h1 id="9b6b" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">第六，使用物化视图获得预先计算的结果</h1><p id="ed1d" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">物化视图可以极大地提高高度重复、可预测的分析工作负载的查询性能，包括仪表板中的查询、商业智能工具和数据处理操作，如提取、加载和转换(ELT)。数据工程师可以轻松地创建和维护一组包括物化视图的高效数据处理管道，同时将性能优势无缝扩展到各种数据分析和商业智能工具。</p><p id="d293" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，物化视图还适用于需要重复执行且结果可预测的查询操作。应用程序可以查询物化视图中保留的预计算数据，而不必对大型表重复执行资源密集型查询。</p><p id="ade9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当基表中的数据发生变化时，可以发出Amazon Redshift SQL语句“refresh materialized view”来刷新物化视图。发出refreshing语句后，您的物化视图将包含与常规视图相同的数据内容。刷新有两种具体形式:增量刷新和完全刷新(重新计算)。Amazon Redshift还会在完成最后一次物化视图刷新后，尽可能地增量刷新基表中发生变化的数据。</p><p id="5202" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了演示它是如何工作的，我们可以创建一组样本模式来存储每个事务记录。创建一个物化视图SQL语句来连接两个表中的记录，从而构建一个物化视图，然后汇总特定的事务记录。</p><pre class="kf kg kh ki fd kj kk kl km aw kn bi"><span id="468c" class="ko jd hh kk b fi kp kq l kr ks">CREATE MATERIALIZED VIEW xxx AS <br/> (<br/> SELECT xxx<br/> FROM table_a, table_b<br/> WHERE table_a.store_id = table_b.id<br/> GROUP BY xxx<br/> );</span></pre><p id="e2af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，这组物化视图可以像常规视图或表一样被查询。当基础基表中的数据发生变化时，实体化视图不能自动反映这些变化。根据需要，可以使用刷新实体化视图SQL命令将基表中的更改反映到实体化视图中的数据。</p><pre class="kf kg kh ki fd kj kk kl km aw kn bi"><span id="537f" class="ko jd hh kk b fi kp kq l kr ks">REFRESH MATERIALIZED VIEW city_sales;</span></pre><p id="74bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还可以将物化视图的优势扩展到亚马逊S3数据湖和其他联邦数据源中的外部数据。使用物化视图，外部表和Amazon红移表中的SELECT语句可以更容易地存储、管理和引用预先计算的结果。基于此，所有引用物化视图的后续查询都会运行得更快，因为它们使用存储在Amazon Redshift中的预先计算的结果，而不需要实际访问外部表。您还可以利用这一点来减少重复访问外部数据源的操作成本，并确保只有在明确需要刷新物化视图时才执行这种高成本的访问。</p><h1 id="78dc" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">结论</h1><p id="dd4a" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">总之，Amazon Redshift已经发布了更多增强的功能，并且还集成了一些工具，可以帮助优化Redshift的性能。随着数据量和速度的增加，确保维持甚至优化查询效率和吞吐量变得更加重要。这些技巧有助于任何数据工程师或数据科学家拓展使用红移管理PB级数据仓库的界限。</p></div></div>    
</body>
</html>