<html>
<head>
<title>Employee Survey Analysis using the Gini Index Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基尼指数函数的员工调查分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/employee-survey-analysis-using-the-gini-index-function-5d9989686e17?source=collection_archive---------3-----------------------#2021-08-07">https://medium.com/analytics-vidhya/employee-survey-analysis-using-the-gini-index-function-5d9989686e17?source=collection_archive---------3-----------------------#2021-08-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/67971c8bcbc0f95d2e7bcb4634410009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vy_6jBcz5NlkOkso.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">图像显示一条横幅，上面写着“我们听到了”。途经<a class="ae hu" href="https://unsplash.com/@jontyson" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/@jontyson</a></figcaption></figure><div class=""/><div class=""><h2 id="9089" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">基于Python的将基尼指数函数应用于员工调查数据的方法</h2></div><p id="6ed5" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">虽然基尼指数函数(又名基尼不纯函数)通常用于决策树算法<strong class="jo hy"/>【1】的实现中，但是它在该应用之外的用途并没有得到广泛的重视。本文展示了一个Python程序，该程序反复应用基尼指数函数来查找员工调查答复之间的关联强度。</p><p id="6b7e" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hy">为什么使用基尼指数函数？</strong></p><p id="fcd7" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因为基尼函数是一种分类工具，而不是统计工具，所以在员工调查方面，它比皮尔逊和其他统计函数有重要优势。统计工具测量成对变量之间的依赖强度；因此，它们的有效性取决于原始数据的获取。然而，为了保护受访者的匿名性，原始员工调查数据并不总是可用的。事实上，许多公开的员工调查数据集只包含汇总数据。[2] [3].相比之下，基尼指数函数不需要原始数据；它可以用来发现群体的总体属性之间的关联，这种处理群体数据的能力保护了调查受访者的匿名性。</p><p id="3317" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hy">了解基尼指数</strong></p><p id="e5c5" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">要了解基尼指数函数如何重新用于员工调查，我们必须首先了解它在决策树中是如何工作的。在决策树中，基尼指数函数通过对树的每个分支应用一个规则来构造决策树，直到它到达出现数据分布的叶节点。该规则可以被认为是一个筛子，通过将数据分类到叶节点中的类别来净化数据。数据分配得越公平，据说就越不纯。如果规则提纯了数据，那么分支的杂质应该低于根的杂质；换句话说，分支节点中的数据分布应该比根节点中的<em class="ki">更少</em>公平(并且在这个意义上更纯粹)。[4]</p><p id="80a2" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">下面是一个典型的决策树节点，它应用了左分支=男性，右分支=女性的规则:</p><figure class="kk kl km kn fd hj er es paragraph-image"><div class="er es kj"><img src="../Images/d48d07a829f7581f7c2322559303822b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*DXrcnh6DnqR3NmAZLzBNkg.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">以性别为根、经理/员工为分支的决策树节点</figcaption></figure><p id="fa3d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">基尼指数是对节点上任何感兴趣的属性的杂质的度量，由下式给出:</p><p id="7aba" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">2 *<em class="ki">p</em>*(1-<em class="ki">p</em>0&lt;T14】pT19】1。。。。。。。。。。。。。。。。。。。。.1)</p><p id="8c55" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">其中<em class="ki"> p </em>是节点或分支处感兴趣的属性的比例。</p><p id="8f45" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，上图中根节点的基尼指数为:</p><p id="5406" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">2*55/100*(1–55/100) = 0.495</p><p id="0d5b" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">等式1)产生了在基尼系数函数的许多讨论中看到的马蹄形曲线。需要调整系数2，因为否则最大值是0.25，并且按照惯例，基尼系数最大值是0.5。</p><p id="cb9c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">具有两个分支的节点的基尼系数仅仅是它们各自基尼系数的加权和:</p><p id="3be7" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">2 *[<em class="ki">r</em>*<em class="ki">p</em>*(1-<em class="ki">p</em>)+(1-<em class="ki">r</em>)*<em class="ki">q</em>*(1-<em class="ki">q</em>)】0&lt;<em class="ki">p</em>&lt;1，0 &lt; <em class="ki"> q </em> &lt; 1，0 &lt; <em class="ki"> r </em> &lt; 1。。。。。。。。。。。.2)</p><p id="6673" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">其中:</p><p id="82fc" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> p </em>是给定的感兴趣财产在左分支中的比例，<br/> <em class="ki"> q </em>是同一感兴趣财产在右分支中的比例，<br/> <em class="ki"> r </em>是左分支的相对权重。</p><p id="88a0" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">不幸的是，等式2)是一条四维曲线，所以即使在三维空间也无法绘制。然而，我们可以通过将<em class="ki"> r </em>固定在0.5和0.1并使用matplotlib绘制结果曲线来了解它的样子。曲线呈凸起状，而不是马蹄形，如下所示。请注意，凸起的峰值出现在0.5处，尽管这在60度视角下可能不清楚。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div class="er es ko"><img src="../Images/d002f632964b3c3cf239475d3ffd5e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*-JStq8jI2ieREsHgw5XHBQ.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">r = 0.5时方程2的曲线)</figcaption></figure><figure class="kk kl km kn fd hj er es paragraph-image"><div class="er es ko"><img src="../Images/34a199663435c625332e253b318b8249.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*eZtA4FZ3ANKRm2tqZOQL-g.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">r = 0.1时方程2的曲线)</figcaption></figure><p id="7c1f" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，当根节点处的经理/工人属性由两个分支节点处的男性/女性属性限定时，为了计算根节点处的基尼指数，我们有:</p><p id="7ab7" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">p = 18/55</p><p id="c027" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> q </em> = 9/45</p><p id="1e79" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> r </em> = 55/100</p><p id="b592" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，代入等式2)，我们看到根节点的合格基尼指数将为:</p><p id="1c64" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">2*[55/100*18/55*(1–18/55) + (1–55/100)*9/45*(1–9/45)] = 0.386</p><p id="fe52" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">等式2)可以应用于另一组相关的数据，让我们决定性与成为经理的关系有多密切。</p><p id="52f4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">让我们假设我们使用一个基于教育水平的根节点来代替性，比如说中学教育和高中教育，如下图所示。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div class="er es kj"><img src="../Images/c8fd523ce248c30d3c91c761c11bb18a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*bBSTlQOWg8-23rWSscbc5Q.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">以教育为根、经理/员工为分支的决策树节点</figcaption></figure><p id="d42c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">通过观察可以看出，当教育属性出现在根节点中时，分支比性属性出现在根节点中时要“纯净”得多，这反映在低得多的基尼指数中:</p><p id="dad6" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">2*[31/100*24/31*(1–24/31) + (1–31/100)*3/69*(1–3/69)] = 0.166</p><p id="52a1" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，基于这一分析中使用的伪数据，决定将是管理地位更多地取决于教育水平，而不是性别。</p><p id="7dfd" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hy">将基尼指数函数应用于员工调查</strong></p><p id="3f35" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">现在让我们考虑如何转换等式2 ),以便为员工调查中的任何两个问题提供基尼指数。在这种情况下，两个调查问题可能是:</p><p id="ccd2" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">Q01:你是经理吗</p><p id="08f7" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">问题02:你是男性吗？</p><p id="8554" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这是两个简单的问题，不会出现在任何实际的调查中，但仍然符合我们的目的，正如我们将看到的。出于调查分析的目的，我们将做出的决定是分支节点是否足够纯净，以表明问题之间的关联。</p><p id="a6f2" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">下表总结了出现在带有性根节点的决策树分支中的聚合数据。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kp"><img src="../Images/b4638c90ca17591ada752749f8e10ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9PHFHYB8Zs8fbBaKvFJODQ.png"/></div></div></figure><p id="f88c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">敏锐的读者可能会想，为什么我们忽略了根节点中感兴趣的属性的比例。如我们将在下面的推导中所示，只有分支节点的纯度是重要的，并且事实上，根节点的选择与基尼系数的值无关:</p><p id="e95f" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">如果我们让<em class="ki"> Y </em> =是并且<em class="ki"> N </em> =否，这将产生四个参数:</p><p id="92d0" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> YY </em> = 18，<em class="ki"> YN </em> = 3，<em class="ki"> NY </em> = 9，<em class="ki"> NN </em> = 36</p><p id="0beb" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，推导任何两个调查问题的基尼指数方程的第一步是将方程2)转换成利用这四个参数的方程，这并不困难。</p><p id="14d4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> p = YY/(YY + YN) </em></p><p id="ae2e" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki">p—</em>1<em class="ki">= YN/(YY+YN)</em></p><p id="64d4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki"> q = NY/(NY + NN) </em></p><p id="a352" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki">q—</em>1<em class="ki">= NN/(NY+NN)</em></p><p id="a282" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki">r =(YY+YN)/(YY+YN+NY+NN)</em></p><p id="2cd1" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="ki">r—</em>1<em class="ki">=(NY+NN)/(YY+YN+NY+NN)</em></p><p id="85ea" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此通过替换和简化，等式2)变成:</p><p id="95ef" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">基尼指数= 2<em class="ki">/(YY+YN+NY+NN)*【YY * YN/(YY+YN)+NY * NN/(NY+NN</em>)】</p><p id="f708" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3)</p><p id="2ad8" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">等式3)提供了给定出现在分支节点中的总分数的任意两个问题的关联的基尼指数。</p><p id="5561" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">当我们用这些分支节点参数尝试等式3)时，我们看到它给出了与等式2)相同的结果，其中也出现了根节点参数:</p><p id="c1de" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">2/(18+37+9+36) * [18 * 37/(18+37) + 9 * 36/(9+36)] = 0.386</p><p id="703d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因为基尼函数是一种分类工具，所以总分数必须是二元属性的计数(例如，是与否)。如果响应是标量而不是二进制的，则在计算总分数之前，需要将响应转换成二进制属性，例如高于平均值(<em class="ki"> A </em>)对低于平均值(<em class="ki"> B </em>)，在这种情况下，等式3)变为:</p><p id="ba51" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">基尼系数= 2/(<em class="ki">AA+a b+ BA+BB)*【AA * AB/(AA+AB)+BA * BB/(BA+BB)</em>]</p><p id="3578" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4)</p><p id="6850" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这是一些来自员工调查的标量伪数据。让我们试试方程式4)吧。列标题是员工组的缩写；如PS =心理服务，CL =文书。这些数据由这些组中员工的五点李克特分数的平均值组成。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kq"><img src="../Images/92a0003a47530d5750950b34e4c6aa22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KXp1l67htwF4RUcB6PJipg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">来自员工调查的李克特总分</figcaption></figure><p id="9843" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因为，如上所述，基尼指数与属性而不是标量值一起工作，我们需要将分数转换为属性指标。这可以通过如果分数高于平均值则分配布尔值1，如果分数低于平均值则分配布尔值0来实现。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kr"><img src="../Images/7022cda07bb99c52b1b4083a39a3ec49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfnqBGsSABtxXQMY8WGM4A.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">李克特分数转换为布尔值。1 =高于平均值，0 =低于平均值</figcaption></figure><p id="2e42" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">然后，可以对数据文件运行以下Python代码，以评估每对问题的基尼指数。</p><pre class="kk kl km kn fd ks kt ku kv aw kw bi"><span id="6a7f" class="kx ky hx kt b fi kz la l lb lc"># Imports<br/>import pandas as pd <br/>import numpy as np</span><span id="4d86" class="kx ky hx kt b fi ld la l lb lc">#Read Datafile<br/>datafile='YourBooleanEmployeeSurveyData.xlsx'<br/>df = pd.read_excel(datafile, 0)<br/>df = df.dropna(how='all')<br/>df.set_index('Question', inplace=True)</span><span id="036e" class="kx ky hx kt b fi ld la l lb lc"># Define inverse Boolean df<br/>df_crib = df.astype(int) # Prepare for conversion to bool<br/>df_boolean_crib = df_crib.astype(bool) # Bool is required for inversion</span><span id="a743" class="kx ky hx kt b fi ld la l lb lc">df_crib_inv = ~df_boolean_crib</span><span id="d2ef" class="kx ky hx kt b fi ld la l lb lc"># Create a square template of zeros with question names as rows and columns</span><span id="eaad" class="kx ky hx kt b fi ld la l lb lc">columnsNamesArr = df_crib.transpose().columns.values<br/>arr_len_int=len(columnsNamesArr)<br/>zeros=np.zeros((arr_len_int,arr_len_int),dtype=np.int)<br/>template = pd.DataFrame(zeros,columns=columnsNamesArr)<br/> <br/># Insert column with question names<br/>template.insert(loc=0, column='Question', value=columnsNamesArr)<br/>template.sort_values(by='Question', inplace=True)<br/>template.set_index("Question",inplace=True)</span><span id="5648" class="kx ky hx kt b fi ld la l lb lc"># Create copies of the template to fill with counts of correlated responses</span><span id="f803" class="kx ky hx kt b fi ld la l lb lc"># A is above mean and B is below mean</span><span id="094d" class="kx ky hx kt b fi ld la l lb lc">def get_named_templates(template, list_of_names):<br/>    results = []<br/>    for c,value in enumerate(list_of_names):<br/>    tmp = template.copy() tmp.name = value results.append(tmp)<br/>    return results</span><span id="4a52" class="kx ky hx kt b fi ld la l lb lc">list_of_names = ['AA', 'AB', 'BA', 'BB']<br/>[AA, AB, BA, BB] = get_named_templates(template, list_of_names)</span><span id="75ed" class="kx ky hx kt b fi ld la l lb lc"># Take dot product of rows and columns</span><span id="d4bd" class="kx ky hx kt b fi ld la l lb lc">def dot_fill_row(df,row):<br/>    for column in range(len(template)):<br/>        if df.name == 'AA':<br/>           df.iat[row,column] = np.dot(np.array(df_crib.iloc[row , : ]).astype(int),np.array(df_crib.iloc[column, : ]).astype(int))<br/>        elif df.name == 'AB':<br/>           df.iat[row,column] = np.dot(np.array(df_crib.iloc[row , : ]).astype(int),np.array(df_crib_inv.iloc[column, : ]).astype(int))<br/>         elif df.name == 'BA':<br/>           df.iat[row,column]=np.dot(np.array(df_crib_inv.iloc[row , : ]).astype(int),np.array(df_crib.iloc[column, : ]).astype(int))<br/>          elif df.name == 'BB':<br/>            df.iat[row,column]=np.dot(np.array(df_crib_inv.iloc[row , : ]).astype(int),np.array(df_crib_inv.iloc[column, : ]).astype(int))<br/>    return</span><span id="6b6f" class="kx ky hx kt b fi ld la l lb lc">def dot_fill_all(df):<br/>    for row in range(df_crib.shape[0]):<br/>        dot_fill_row(df,row)<br/>    return df</span><span id="93f6" class="kx ky hx kt b fi ld la l lb lc">AA = dot_fill_all(AA)<br/>AB = dot_fill_all(AB)<br/>BA = dot_fill_all(BA)<br/>BB = dot_fill_all(BB)</span><span id="a223" class="kx ky hx kt b fi ld la l lb lc"># Create symmetrical AB and BA matrices<br/># The dot_fill_row function fills top and bottom AB and BA triangles with complementary values<br/># This code corrects so that values across the diagonal are the same for matching indices</span><span id="e98f" class="kx ky hx kt b fi ld la l lb lc">UABBot = np.tril(np.array(AB), k=0)<br/>UABUpp = np.triu(np.array(AB), k=0)<br/>UBABot = np.tril(np.array(BA), k=0)<br/>UBAUpp = np.triu(np.array(BA), k=0)<br/>BAarr = UABUpp+UBABot<br/>ABarr = UABBot+UBAUpp</span><span id="4e31" class="kx ky hx kt b fi ld la l lb lc">AB=pd.DataFrame(data=ABarr,index=columnsNamesArr,columns=columnsNamesArr)<br/>BA=pd.DataFrame(data=BAarr,index=columnsNamesArr,columns=columnsNamesArr)0</span><span id="f72c" class="kx ky hx kt b fi ld la l lb lc"># Gini formula: 2/N[AAxAB/(AA+AB)+BBxBA/(BB+BA)<br/># Apply formula and set cells that are above the maximum Gini score to blank</span><span id="2910" class="kx ky hx kt b fi ld la l lb lc">def gini(TT,TB,BT,BB):<br/>    topscore = (2/(TT+TB+BT+BB))*np.multiply(TT,TB)/(TT+TB)<br/>    botscore = (2/(TT+TB+BT+BB))*np.multiply(BT,BB)/(BT+BB)<br/>    score = topscore+botscore<br/>    return score</span><span id="f9b7" class="kx ky hx kt b fi ld la l lb lc">score = gini(AA,AB,BA,BB)</span><span id="127a" class="kx ky hx kt b fi ld la l lb lc"># Set acceptable gini index to 0.37</span><span id="7b81" class="kx ky hx kt b fi ld la l lb lc">df_score=score.applymap(lambda x: np.where(x&lt;=0.37,round(x,3) , ''))<br/>np.fill_diagonal(df_score.values, '')</span><span id="fd50" class="kx ky hx kt b fi ld la l lb lc"># Write results to Excel file</span><span id="091a" class="kx ky hx kt b fi ld la l lb lc">writer = pd.ExcelWriter("YourResults.xlsx", engine='xlsxwriter')<br/>df_score.to_excel(writer,sheet_name='Ginis')<br/>writer.save()<br/>writer.close() # Close writer</span></pre><p id="b4b4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">该程序生成四个临时表，如下所示:</p><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es le"><img src="../Images/ff9c0c83e87359062631443417c479ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfwDVRe7y-pHYJWzNno4pg.png"/></div></div></figure><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lf"><img src="../Images/962460f147f54a47a7d571395326a200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4Bq-6O7Ugv93ncX7sz5FA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">显示点积结果的临时表格</figcaption></figure><p id="5384" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">最终结果如下表所示。基尼系数临界值为0.37，因此只出现两个基尼系数值。这些值足够小，可以指示Q01和Q03之间的关联，以及Q02和Q05之间跨不同员工组的关联。有趣的是，快速检查中期表可以发现，Q02和Q05之间的关联是非常负的，大多数计数出现在BA和AB中。</p><figure class="kk kl km kn fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lg"><img src="../Images/bfc0dc071b5389f3cd49cbd2067a10f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4NxxLyOWmql0Lm9dShpFw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">基尼系数为0.37的相关问题</figcaption></figure><p id="a7dc" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">如何看待这些结果？</p><p id="9043" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">尽管有这些迷人的结果，但意识到它们的局限性是很重要的。首先，它们不具有通过使用需要访问原始数据的统计函数如Pearson可能实现的有效性；第二，与可用于发现普遍适用的相关性的统计有效方法不同，这些结果仅表明在进行调查的特定组织内感兴趣的关联。事实上，如果任何结果与普遍接受的人类绩效管理模型相冲突，这将是拒绝它们的一个很好的理由。</p><p id="62e4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">Q02和Q05之间强烈的负相关关系表明，应尽一切努力减少组织团体中Q02和Q05响应分数的差异。这将有助于确保所有群体享有同样公平和公正的工作条件。</p><p id="be81" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">就Q01和Q03而言，虽然关联性较弱，但这种关系的强度确实表明，如果一个群体在Q01和Q03中的回答分数都较低，则可以通过将其中一个回答视为原因的指示，而将另一个回答视为结果的指示，来努力提高这些分数。因此，例如，如果Q01表示对更多协作的偏好，而Q05表示相信工作组内存在重要知识的倾向，那么增加工作组内对知识的意识可能会增加对协作的偏好。</p><p id="2ca5" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">最后，这些结果通过与员工和组织工作小组的经理一起工作，为下一阶段的探索和确认提供了指导。事实上，如果这篇文章引起了足够的兴趣，我计划写一篇后续文章，展示如何进一步完善从基尼系数分析中获得的结果，以提供明确的指导，说明优先问题在哪里，以及哪些员工群体最需要干预。</p><p id="f087" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hy">参考文献</strong></p><p id="3ac8" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">[1] Eligijus Bujokas，<a class="ae hu" href="https://towardsdatascience.com/decision-tree-algorithm-in-python-from-scratch-8c43f0e40173" rel="noopener" target="_blank">Python中的决策树算法从无到有</a> (2021)，走向数据科学</p><p id="6de5" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">[2]美国人事管理局，<a class="ae hu" href="https://www.opm.gov/fevs/public-data-file/" rel="noopener ugc nofollow" target="_blank">联邦雇员观点调查</a> (2020)</p><p id="889a" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">[3]加拿大政府，<a class="ae hu" href="https://open.canada.ca/data/en/dataset/4301f4bb-1daa-4b50-afab-d1193b5d2284" rel="noopener ugc nofollow" target="_blank">公共服务雇员调查</a> (2020)</p><p id="5fd6" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">[4] Arif R，<a class="ae hu" href="https://medium.datadriveninvestor.com/the-basics-of-decision-trees-e5837cc2aba7" rel="noopener ugc nofollow" target="_blank">决策树的基础知识</a> (2020)，数据驱动投资者</p></div></div>    
</body>
</html>