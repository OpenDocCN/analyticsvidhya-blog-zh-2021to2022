<html>
<head>
<title>FastAPI: The Modern Age API Framework For Pythonista</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">FastAPI:python ista的现代API框架</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fastapi-the-modern-age-api-framework-for-pythonista-4b2cd1e6652?source=collection_archive---------0-----------------------#2021-07-18">https://medium.com/analytics-vidhya/fastapi-the-modern-age-api-framework-for-pythonista-4b2cd1e6652?source=collection_archive---------0-----------------------#2021-07-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="cee7" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">用Python构建和托管一个生产就绪的API</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/be89ec65b95b34165b05243375b02a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Xd1Cx1nKpuAeGwnVVU5ZA.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">《闪电侠》作者<a class="ae jm" href="https://www.dccomics.com/" rel="noopener ugc nofollow" target="_blank"> DCcomic </a></figcaption></figure><p id="3567" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">Web APIs对于现代企业的运营已经变得越来越重要。随着公司越来越依赖数据，数据通信的重要性也在不断增长。随着数据技术的不断涌现，我们需要一个快速、高性能、健壮的框架来构建我们的API。</p><h1 id="eb1a" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">为什么是<strong class="ak"> FastAPI？</strong></h1><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lb"><img src="../Images/1d9f63a1d0109ab759d37530a55a8b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du7p50wS_fIsaC_lR18qsg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">【https://fastapi.tiangolo.com/ T4】</figcaption></figure><p id="94db" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><strong class="jp hi"> FastAPI，</strong>一个现代的，快速的(高性能的)，用Python 3.6+构建API的web框架。它的性能可以与NodeJS和Go相提并论，被认为是目前最快的Python框架之一。像微软、网飞、优步等科技巨头已经开始用FastAPI库构建他们的API。该框架旨在优化体验，以便我们可以编写简单的代码来构建默认情况下具有最佳实践的生产就绪型API。事不宜迟，让我们学习如何使用FastAPI构建一个健壮的API解决方案。</p><h1 id="c859" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">文章摘要</h1><ol class=""><li id="aa31" class="lc ld hh jp b jq le jt lf jw lg ka lh ke li ki lj lk ll lm bi translated">问题陈述</li><li id="b94c" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">安装和设置</li><li id="ed43" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">“你好，世界”呼叫FastAPI</li><li id="d863" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">整合数据库</li><li id="5761" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">构建真实世界的API</li><li id="0e84" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">FastAPI Swagger UI</li><li id="1df8" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">在云上托管它</li><li id="d84e" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">结论</li></ol><h1 id="f14c" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">问题陈述</h1><p id="e967" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">今天我们将为<strong class="jp hi">零售业构建和部署一个API，</strong>拥有零售产品的数据。API将能够，</p><ol class=""><li id="eb32" class="lc ld hh jp b jq jr jt ju jw lv ka lw ke lx ki lj lk ll lm bi translated">向数据库添加数据</li><li id="74ca" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">更新现有数据(这将包括将数据标记为已更新以及数据更新的时间)</li><li id="e408" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">从数据库中删除数据</li><li id="1582" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki lj lk ll lm bi translated">通过调用唯一id来查看数据</li></ol><p id="5c28" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们今天要用的数据库是MongoDB。我们将探索MongoDB Atlas来将数据库连接到我们的API。</p><h1 id="b54e" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">安装和设置</h1><p id="638f" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">从创建虚拟环境开始总是好的。使用pip3创建虚拟环境并安装FastAPI。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="fec4" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ pip3 install fastapi</strong></span></pre><p id="2095" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们还需要一个ASGI服务器用于生产，比如<a class="ae jm" href="https://www.uvicorn.org/" rel="noopener ugc nofollow" target="_blank">uvicon</a>。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="36ed" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ pip3 install uvicorn</strong></span></pre><p id="ae0a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">稍后，我们需要一个MongoDB驱动程序来连接我们的API和数据库。为此，我们就用<a class="ae jm" href="https://motor.readthedocs.io/en/stable/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi">电机</strong> </a>驱动。Motor为MongoDB提供了一个基于协程的API，它支持<a class="ae jm" href="https://docs.python.org/3/library/asyncio.html" rel="noopener ugc nofollow" target="_blank"> asyncio </a>。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="f92f" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ pip install motor</strong></span></pre><p id="61c3" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们需要一个Python的DNS工具包，它可以支持几乎所有的记录类型。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="d17c" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ pip install dnspython</strong></span></pre><p id="9718" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这些都是我们使用python3创建完整的高性能API所需的依赖项。</p><h1 id="b50b" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">你好，世界呼叫FastAPI</h1><p id="6b49" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">首先，我们将使用<em class="mi"> FastAPI </em>创建一个“hello world”应用程序，并使用<em class="mi">uvicon服务器</em>运行它。这将让你很快了解一切是如何工作的。</p><p id="cd11" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">使用以下内容创建文件<code class="du mj mk ml lz b">app.py</code>:</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="432a" class="md kk hh lz b fi me mf l mg mh">from fastapi import FastAPI<br/><br/>app = FastAPI()<br/><br/>@app.get("/")<br/>async def root():<br/>    return {"message": "Hello World"}</span></pre><p id="4147" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">使用以下命令运行服务器:</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="de5d" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ uvicorn app:app -- reload</strong></span></pre><p id="5219" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在<a class="ae jm" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">打开您的浏览器http://127.0.0.1:8000/ </a></p><p id="8f08" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">您将看到JSON响应如下:<code class="du mj mk ml lz b">{"message": "Hello World"}</code></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mm"><img src="../Images/8305c49a7b8d88b605085428c892adeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*_QiWPqaOeqOy8-vpNxAN2g.png"/></div></figure><p id="6cf0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">JSON响应是从FastAPI应用程序中的函数返回的同一字典。</p><p id="61dd" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">您也可以在<a class="ae jm" href="http://localhost:8000/docs" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/docs</a>查看交互式API文档:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mm"><img src="../Images/b54880f998064168ce2771d4be48c5b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*6GnxyYds-VIzhBU4oMaXvg.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated"><a class="ae jm" href="http://localhost:8000/docs" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/docs</a></figcaption></figure><h1 id="e302" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">将应用程序集成到数据库中</h1><p id="3057" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">到目前为止很清楚，我们使用MongoDB作为我们的数据库，让我告诉你我们将使用市场上最先进的云数据库服务，<a class="ae jm" href="https://www.mongodb.com/cloud/atlas/efficiency?utm_source=google&amp;utm_campaign=gs_apac_india_search_core_brand_atlas_desktop&amp;utm_term=%2Bmongo%20%2Bdb%20%2Batlas&amp;utm_medium=cpc_paid_search&amp;utm_ad=b&amp;utm_ad_campaign_id=12212624347&amp;gclid=CjwKCAjwos-HBhB3EiwAe4xM9wC3-xjOERrId6ylD-TBAJcnoWc4eNmjd_o3WMs-StnuFS-INn3zOxoCBNgQAvD_BwE" rel="noopener ugc nofollow" target="_blank"><strong class="jp hi">MongoDB Atlas</strong></a><strong class="jp hi">。</strong></p><ol class=""><li id="f197" class="lc ld hh jp b jq jr jt ju jw lv ka lw ke lx ki lj lk ll lm bi translated">让我们用默认的512MB配置在MongoDB Atlas中创建一个集群。并将其命名为“<em class="mi"> FasterAPI </em>”。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mn"><img src="../Images/538aee568e13f8d12747cf2873633f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*xC2LNBNQeTMGmsKdMwgioA.png"/></div></figure><p id="0e37" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">2.为了将数据库连接到我们的应用程序，我们将借助MongoDB Compass。让我们使用在创建集群期间设置的配置来连接它。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mo"><img src="../Images/65e0aaf8dd36485ab47c084a36cd25c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*gp9kPWsu0XPQBddIUgI6eg.png"/></div></figure><p id="21e3" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">3.用MongoDB指南针连接。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mp"><img src="../Images/a6e419a64fadff5eb49609092940a0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*zXnI4S3s5H7A7PIGJ_3TUg.png"/></div></figure><h1 id="1e0c" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">构建真实世界API</h1><p id="6c55" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">为了构建一个真实的零售API，我们将使用一些基本的HTTP功能，这些功能被称为<strong class="jp hi"> CRUD </strong>操作。CRUD代表创建、读取、更新和删除，这是四种基本的数据库操作。</p><p id="6c17" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">使用FastAPI，我们可以使用4种预定义的方法创建、读取、更新和删除数据库中的数据。</p><ul class=""><li id="a884" class="lc ld hh jp b jq jr jt ju jw lv ka lw ke lx ki mq lk ll lm bi translated"><code class="du mj mk ml lz b">@app.get()</code></li><li id="b8a5" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki mq lk ll lm bi translated"><code class="du mj mk ml lz b">@app.post()</code></li><li id="eca1" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki mq lk ll lm bi translated"><code class="du mj mk ml lz b">@app.put()</code></li><li id="6346" class="lc ld hh jp b jq ln jt lo jw lp ka lq ke lr ki mq lk ll lm bi translated"><code class="du mj mk ml lz b">@app.delete()</code></li></ul><p id="8466" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这个HTTP功能应该在<strong class="jp hi"> app </strong>实例下执行，它是类<code class="du mj mk ml lz b">FastAPI</code>的一个实例。这将是创建我们的API的主要交互点。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="8806" class="md kk hh lz b fi me mf l mg mh">app = FastAPI()</span></pre><p id="aea9" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这是同一个<em class="mi">应用</em>，它在我们使用<code class="du mj mk ml lz b">uvicorn app:app --reload</code>运行时启动API</p><p id="7b53" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">定义一个抽象的<a class="ae jm" href="https://pydantic-docs.helpmanual.io/usage/schema/" rel="noopener ugc nofollow" target="_blank">模式</a>来表示数据应该如何存储在数据库中，这是一个很好的实践。在Pydantic中，让我们定义一个模式来将我们的数据存储到MongoDB。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="4385" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在上面的代码中，我们定义了一个名为<code class="du mj mk ml lz b">Items</code>的Pydantic Schema，它定义了与类型相关的所有字段。<em class="mi"> schema_helper </em>函数将帮助<strong class="jp hi"> CRUD </strong>操作数据映射为一个字典，其中包含零售参数，即SKU、品牌名称、标题、缩略图、可用价格和MRP。</p><p id="bef3" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">耶！下面的脚本是我们构建API所需要的全部，我们已经定义了CRUD功能和模式。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mr ms l"/></div></figure><h1 id="6e20" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">FastAPI Swagger UI</h1><p id="2a3e" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">FastAPI提供web用户界面。由于该框架是基于OpenAPI的，因此还有许多选项有待探索，但是让我们来看看该框架最常见和最重要的特性。</p><p id="c6eb" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">切换到<a class="ae jm" href="http://localhost:8000/docs" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/docs</a>与FastAPI swagger交互。</p><h2 id="0e0b" class="md kk hh bd kl mt mu mv kp mw mx my kt jw mz na kv ka nb nc kx ke nd ne kz nf bi translated">发布方法:</h2><p id="c37f" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">我们将使用POST方法创建一个数据输出集合，</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="25de" class="md kk hh lz b fi me mf l mg mh">{“sku”: “NI114D0EY-Q11”,<br/> “brand_name”: “Nike Sportswear”,<br/> “title”: “AIR MAX 2090 UNISEX — Trainers — black/wolf grey/black/anthracite”},<br/> “thumbnail”: “<a class="ae jm" href="https://img01.ztat.net/article/spp-media-p1/9866ece8595630bfbc16501686540429/9c6d5c0c4ab14091b9714501865dcd66.jpg" rel="noopener ugc nofollow" target="_blank">https://img01.ztat.net/article/spp-media-p1/9866ece8595630bfbc16501686540429/9c6d5c0c4ab14091b9714501865dcd66.jpg</a>",<br/> “available_price”: “£55.99”,<br/> “mrp”: “£59.99”<br/>}</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ng"><img src="../Images/3998f5ce8f657cc6ef777c91bfa93b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yjIwEytq2Wzr2WIJ5xbrVA.gif"/></div></div></figure><h2 id="31ce" class="md kk hh bd kl mt mu mv kp mw mx my kt jw mz na kv ka nb nc kx ke nd ne kz nf bi translated">获取方法:</h2><p id="c8e6" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">通过将id作为输入来获取更新的数据。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ng"><img src="../Images/ef8387cbafd22ca480915d02301fa9f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gR3IYKYqhLplo-k6uoYifg.gif"/></div></div></figure><h2 id="12a4" class="md kk hh bd kl mt mu mv kp mw mx my kt jw mz na kv ka nb nc kx ke nd ne kz nf bi translated">PUT方法:</h2><p id="23ad" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">更新数据。这里，如果我们使用Post方法更新数据，2个字段将被添加到数据字段中，</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="3a70" class="md kk hh lz b fi me mf l mg mh">1. “update”: True</span><span id="d7e9" class="md kk hh lz b fi nh mf l mg mh">2. “updated_time”: &lt;Time when the data was updated&gt;</span></pre><h2 id="14ab" class="md kk hh bd kl mt mu mv kp mw mx my kt jw mz na kv ka nb nc kx ke nd ne kz nf bi translated">删除方法:</h2><p id="356c" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">使用Id字段从集合中删除记录。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ni"><img src="../Images/9df2f31e00fda73a3d13c49c9c67c257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wPQOs53TPC_6FZqzN-D7kQ.gif"/></div></div></figure><h1 id="d7e3" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">在云上托管API:</h1><p id="e4ef" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">最后，让我们将API部署到Heroku中。</p><p id="1513" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><a class="ae jm" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi"> Heroku </strong> </a>是一个平台即服务(PaaS)，使开发者能够完全在云中构建、运行和操作应用。</p><p id="a07a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">要在生产环境中部署它，将您的所有需求收集到一个requirements.txt文件中。</p><pre class="ix iy iz ja fd ly lz ma mb aw mc bi"><span id="6023" class="md kk hh lz b fi me mf l mg mh"><strong class="lz hi">$ pip freeze &gt; requirements.txt</strong></span></pre><p id="4db7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">请确保<em class="mi"> uvloop </em>和<em class="mi"> httptools </em>是您的需求文件的一部分。</p><p id="8bf7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">API网址:<a class="ae jm" href="https://retail-fastapi.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://retail-fastapi.herokuapp.com/</a></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ni"><img src="../Images/87926fa170a8732fe8c0f8a7401c9675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*43nrDWy1a8Yylu3R97RepA.gif"/></div></div></figure><p id="d1b4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">太好了！</p><p id="9ebd" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">请随意在<a class="ae jm" href="https://github.com/ishritam/FastAPI" rel="noopener ugc nofollow" target="_blank">这个库</a>中使用我用来创建这个API的代码。</p><h1 id="585f" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">结论:</h1><p id="7bc1" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated">恭喜您，您的第一个带有FastAPI的生产就绪API已经上线。我希望它是容易的和有帮助的。请随意将这篇FastAPI文章作为参考，尝试并构建一些令人惊叹的web APIs。</p><p id="866e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我希望这篇文章能激发您在生产中构建和托管API。</p><p id="125d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">下次我会在另一个很酷的话题上看到你。在那之前，</p><p id="1202" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">保持安全..！不断学习..！</p><h1 id="2b15" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">感谢您的阅读！</h1><p id="aaeb" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw ls jy jz ka lt kc kd ke lu kg kh ki ha bi translated"><a class="ae jm" rel="noopener" href="/@shritam">通过Medium </a>关注我的最新动态。😃</p></div></div>    
</body>
</html>