<html>
<head>
<title>Movie Recommender System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电影推荐系统</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/movie-recommender-system-3ac889cb09fd?source=collection_archive---------1-----------------------#2021-10-13">https://medium.com/analytics-vidhya/movie-recommender-system-3ac889cb09fd?source=collection_archive---------1-----------------------#2021-10-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/ed99e4d71a5f28421f62139712435048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1oCQF_OuIxJbrClffal-Kg.jpeg"/></div></div></figure><div class=""/><p id="38b8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用<a class="ae jo" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> python </a>，<a class="ae jo" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> Numpy </a>，<a class="ae jo" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>，<a class="ae jo" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>，<a class="ae jo" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>，<a class="ae jo" href="https://ipywidgets.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> ipywidgets </a></p><p id="6441" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个<strong class="is hu">推荐系统</strong>，或者一个<strong class="is hu">推荐系统</strong>(有时用一个同义词如平台或引擎代替‘系统’)，是<a class="ae jo" href="https://en.wikipedia.org/wiki/Information_filtering_system" rel="noopener ugc nofollow" target="_blank">信息过滤系统</a>的一个子类，它试图预测用户对一个项目的“评分”或“偏好”。</p><p id="3e76" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">推荐系统被用于各种领域，通常公认的例子采取视频和音乐服务的播放列表生成器、在线商店的产品推荐器、或者社交媒体平台的内容推荐器和开放网络内容推荐器的形式。这些系统可以使用单一输入(如音乐)或跨平台的多个输入(如新闻、书籍和搜索查询)来运行。也有针对特定主题的流行推荐系统，如餐馆和网上约会。推荐系统也被开发来探索研究文章和专家、合作者和金融服务。</p><h1 id="4b9d" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">问题陈述:</strong></h1><p id="f2ab" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">根据用户喜欢的相似流派和电影进行分析和基本推荐。</p><p id="2156" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将关注的一些要点包括:</p><p id="5547" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●电影的盈利能力</p><p id="535a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●基于语言的总量分析</p><p id="7b85" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●不同流派的总收入和利润比较，</p><p id="bfdc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●基于演员、电影、流派的推荐系统。</p><p id="8b03" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个项目将帮助我们理解这些因素之间的相互关系。</p><h1 id="015a" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">导入库:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="1bc0" class="lb jq ht kx b fi lc ld l le lf"># lets import the basic Libraries</span><span id="dbdc" class="lb jq ht kx b fi lg ld l le lf">import numpy as np</span><span id="5aef" class="lb jq ht kx b fi lg ld l le lf">import pandas as pd</span><span id="fbe2" class="lb jq ht kx b fi lg ld l le lf"># for data visualization</span><span id="8ae0" class="lb jq ht kx b fi lg ld l le lf">import matplotlib.pyplot as plt</span><span id="7e9a" class="lb jq ht kx b fi lg ld l le lf">import seaborn as sns</span><span id="a639" class="lb jq ht kx b fi lg ld l le lf"># for jupyter notebook widgets</span><span id="6815" class="lb jq ht kx b fi lg ld l le lf">#import ipywidgets as widgets</span><span id="3b4d" class="lb jq ht kx b fi lg ld l le lf">#from ipywidgets import interact</span><span id="16c5" class="lb jq ht kx b fi lg ld l le lf">#from ipywidgets import interact_manual</span><span id="f407" class="lb jq ht kx b fi lg ld l le lf"># for Interactive Shells</span><span id="482a" class="lb jq ht kx b fi lg ld l le lf">from IPython.display import display</span><span id="411b" class="lb jq ht kx b fi lg ld l le lf"># setting up the chart size and background</span><span id="43d2" class="lb jq ht kx b fi lg ld l le lf">plt.rcParams['figure.figsize'] = (16, 8)</span><span id="5e83" class="lb jq ht kx b fi lg ld l le lf">plt.style.use('fivethirtyeight')</span></pre><h1 id="a857" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">加载数据集:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="cbf2" class="lb jq ht kx b fi lc ld l le lf"># lets read the dataset</span><span id="1342" class="lb jq ht kx b fi lg ld l le lf">data = pd.read_csv('movie_metadata.csv')</span></pre><h1 id="999c" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">数据的形状:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="2878" class="lb jq ht kx b fi lc ld l le lf"># lets check the shape</span><span id="0379" class="lb jq ht kx b fi lg ld l le lf">print(data.shape)</span></pre><p id="3e8d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个数据集中总共有5043行和28列。</p><h1 id="2545" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">关于数据集的信息:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="4d69" class="lb jq ht kx b fi lc ld l le lf"># lets check the column wise info</span><span id="5523" class="lb jq ht kx b fi lg ld l le lf">data.info()</span></pre><p id="fd31" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到这个数据集中有很多空值。所以我们必须删除这些空值。</p><h1 id="ec1e" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">缺失值插补:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="afa9" class="lb jq ht kx b fi lc ld l le lf">round(100*(data.isnull().sum()/len(data.index)), 2)</span></pre><p id="d6cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们检查数据集中缺失值百分比较高的行。</p><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lh"><img src="../Images/e77163f21a0ff2ec4e2b4b919caef587.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*DjepFpZZVIpkpd0KGwJO1w.png"/></div></figure><p id="7825" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为“gross”和“budget”列有大量NaN值，所以使用</p><p id="9ca8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“isnan”NumPy的函数以及一个否定“~”</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="c506" class="lb jq ht kx b fi lc ld l le lf">data = data[~np.isnan(data['gross'])]</span><span id="a0d1" class="lb jq ht kx b fi lg ld l le lf">data = data[~np.isnan(data['budget'])]</span></pre><p id="5fdb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们再次按列检查缺失的值。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="4d26" class="lb jq ht kx b fi lc ld l le lf">data.isnull().sum()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es li"><img src="../Images/6459104378b76b31815075d35ee13c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*6Bl4Qs7E063M1z7tPEp_6g.png"/></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="9a05" class="lb jq ht kx b fi lc ld l le lf"><br/>data = data[data.isnull().sum(axis=1) &lt;= 2]</span><span id="3480" class="lb jq ht kx b fi lg ld l le lf">data.isnull().sum()</span></pre><p id="27f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的代码保留了Null之和小于2的行。</p><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lj"><img src="../Images/9e2fbb71ccaddbd67ac658cc82467b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*k8P5wcYwYIZjNPLGzL7J4w.png"/></div></figure><p id="066a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所知，我们不能使用统计值来估算演员姓名的缺失值，所以我们将用“未知”来替换演员姓名。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="8134" class="lb jq ht kx b fi lc ld l le lf">data['actor_2_name'].fillna('Unknown Actor', inplace = True)</span><span id="098b" class="lb jq ht kx b fi lg ld l le lf">data['actor_3_name'].fillna('Unknown Actor', inplace = True)</span></pre><p id="f6a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为我们估算了所有缺失值，所以让我们检查数据集中缺失值的总数。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="bf42" class="lb jq ht kx b fi lc ld l le lf">data.isnull().sum().sum()</span></pre><p id="ae94" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们终于有了零空值。</p><h1 id="b012" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">特征工程:</h1><p id="00aa" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">让我们将总额和预算从美元转换为百万美元，以便于我们的分析。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="d183" class="lb jq ht kx b fi lc ld l le lf">data['gross'] = data['gross']/1000000</span><span id="5be5" class="lb jq ht kx b fi lg ld l le lf">data['budget'] = data['budget']/1000000</span></pre><h1 id="2cf4" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">计算电影利润:</h1><p id="7487" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">● <strong class="is hu">预算:</strong>是制片人制作一部电影所花费的金额，包括制作、选角和广告费用。</p><p id="31ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">● <strong class="is hu">毛:</strong>是制作方通过在影院上映自己的电影，向电视、OTT平台如Prime、Hulu、Disney+Hotstar、网飞等出售卫星版权而赚取的金额。</p><p id="f710" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">● <strong class="is hu">利润:毛—预算，</strong></p><p id="5b5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用这个公式来计算有史以来最赚钱的电影。</p><p id="00a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们使用预算和总额创建一个利润列。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="498e" class="lb jq ht kx b fi lc ld l le lf">data['Profit'] = data['gross'] - data['budget']</span></pre><p id="d82a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们也查一下十大赚钱电影的名字。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="f709" class="lb jq ht kx b fi lc ld l le lf">data[['Profit','movie_title']].sort_values(by = 'Profit', ascending  = False).head(10)</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lk"><img src="../Images/a2d066f38ede0778c9a94ba7e4469cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*cuDmgFisUlgiHzCPVGeQgA.png"/></div></figure><p id="4e1f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过查看上面的结果，我们可以很容易地分析出有一些重复。所以我们必须删除这些重复的内容。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6c39" class="lb jq ht kx b fi lc ld l le lf">lets print the no. of rows before removing Duplicates</span><span id="a905" class="lb jq ht kx b fi lg ld l le lf">print("No. of Rows Before Removing Duplicates: ",data.shape[0])</span><span id="2ccc" class="lb jq ht kx b fi lg ld l le lf"># so lets remove all the duplicates from the data</span><span id="49e0" class="lb jq ht kx b fi lg ld l le lf">data.drop_duplicates(subset = None, keep = 'first', inplace = True)</span><span id="fd4f" class="lb jq ht kx b fi lg ld l le lf"># lets print the no. of rows after removing Duplicates</span><span id="c273" class="lb jq ht kx b fi lg ld l le lf">print("No. of Rows After Removing Duplicates: ",data.shape[0])</span></pre><p id="a593" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">去重前行数:<strong class="is hu"> 3888 </strong></p><p id="8863" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">删除重复后的行数:<strong class="is hu"> 3853 </strong></p><h1 id="e2e8" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">利润最高的10部电影:</h1><p id="d66b" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">让我们再来看看十大赚钱电影。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="0c4a" class="lb jq ht kx b fi lc ld l le lf">data[['movie_title','Profit']].sort_values(by = 'Profit', ascending  = False).head(10)</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es ll"><img src="../Images/c2f6311377258a6c318d57154789750c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*Ci8V0n4CD-N7LuDf7ZSTcw.png"/></div></figure><h1 id="d9ab" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">操作持续时间和语言列:</h1><p id="e768" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">让我们检查语言列中的值。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="64ce" class="lb jq ht kx b fi lc ld l le lf">data['language'].value_counts()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lm"><img src="../Images/3f98a891ecfb122fe200202be5661cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*udro3D_UHuh7gZ0YikzF5w.png"/></div></figure><p id="1070" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">查看上面的输出，我们可以很容易地观察到，在3500部电影中，只有150部电影是其他语言的。所以最好只保留英语和外语两种语言。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="7844" class="lb jq ht kx b fi lc ld l le lf">def language(x):</span><span id="f504" class="lb jq ht kx b fi lg ld l le lf">if x == 'English':</span><span id="49fd" class="lb jq ht kx b fi lg ld l le lf">return 'English'</span><span id="b527" class="lb jq ht kx b fi lg ld l le lf">else:</span><span id="16d4" class="lb jq ht kx b fi lg ld l le lf">return 'Foreign'</span><span id="741a" class="lb jq ht kx b fi lg ld l le lf"># lets apply the function on the language column</span><span id="e1b2" class="lb jq ht kx b fi lg ld l le lf">data['language'] = data['language'].apply(language)</span><span id="90ba" class="lb jq ht kx b fi lg ld l le lf"># lets check the values again</span><span id="0803" class="lb jq ht kx b fi lg ld l le lf">data['language'].value_counts()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/2d69c79c97f4cddc9a0b29c136ba360f.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*IPPcxOpq3kpfrQ_HDAVdNg.png"/></div></figure><p id="2634" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">电影的时长变化不大，但我们知道大多数用户要么喜欢看长电影，要么喜欢看短电影。我们可以把电影分为两类，即短片和长片。让我们定义一个对电影时长进行分类的函数。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6c3f" class="lb jq ht kx b fi lc ld l le lf">def duration(x):</span><span id="a5e4" class="lb jq ht kx b fi lg ld l le lf">if x &lt;= 120:</span><span id="c2e4" class="lb jq ht kx b fi lg ld l le lf">return 'Short'</span><span id="3bc5" class="lb jq ht kx b fi lg ld l le lf">else:</span><span id="1ea8" class="lb jq ht kx b fi lg ld l le lf">return 'Long'</span><span id="d9b9" class="lb jq ht kx b fi lg ld l le lf"># lets apply this function on the duration column</span><span id="1da4" class="lb jq ht kx b fi lg ld l le lf">data['duration'] = data['duration'].apply(duration)</span><span id="e13d" class="lb jq ht kx b fi lg ld l le lf"># lets check the values of Duration column</span><span id="6ff3" class="lb jq ht kx b fi lg ld l le lf">data['duration'].value_counts()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lo"><img src="../Images/f151cd3c76d92dac018ea2295a0b3551.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*vv753Ni9rJX2ur_6hZB_1g.png"/></div></figure><p id="3e6b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们也检查一下“流派”列中的值。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="f62a" class="lb jq ht kx b fi lc ld l le lf">data['genres'].value_counts()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lp"><img src="../Images/3c82573bd1169666088acfe006154de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*hcF6qnYBorSsK52LFq4b8g.png"/></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="27fa" class="lb jq ht kx b fi lc ld l le lf">data['genres'].str.split('|')[0]</span></pre><p id="1ed5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">['动作'，'冒险'，'幻想'，'科幻']</p><p id="886c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以从上面的输出中看到，大多数电影都有很多类型，一部电影可以有这么多类型，所以我们保留四种类型。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="c1a0" class="lb jq ht kx b fi lc ld l le lf">data['Moviegenres'] = data['genres'].str.split('|')</span><span id="9a99" class="lb jq ht kx b fi lg ld l le lf">data['Genre1'] = data['Moviegenres'].apply(lambda x: x[0])</span><span id="9ecb" class="lb jq ht kx b fi lg ld l le lf"># Some of the movies have only one genre. In such cases, assign the same genre to 'genre_2' as well</span><span id="adb9" class="lb jq ht kx b fi lg ld l le lf">data['Genre2'] = data['Moviegenres'].apply(lambda x: x[1] if len(x) &gt; 1 else x[0])</span><span id="ccb5" class="lb jq ht kx b fi lg ld l le lf">data['Genre3'] = data['Moviegenres'].apply(lambda x: x[2] if len(x) &gt; 2 else x[0])</span><span id="e46c" class="lb jq ht kx b fi lg ld l le lf">data['Genre4'] = data['Moviegenres'].apply(lambda x: x[3] if len(x) &gt; 3 else x[0])</span><span id="ebf2" class="lb jq ht kx b fi lg ld l le lf"># lets check the head of the  data</span><span id="7afe" class="lb jq ht kx b fi lg ld l le lf">data[['genres','Genre1','Genre2','Genre3','Genre4']].head(5)</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es lq"><img src="../Images/0c2f51f517ad4cdcfa3940092044975e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*cCE8ZYmkdeHUdYwA7N4CWQ.png"/></div></figure><h1 id="a28f" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">数据可视化:</h1><h2 id="0413" class="lb jq ht bd jr lr ls lt jv lu lv lw jz jb lx ly kd jf lz ma kh jj mb mc kl md bi translated">计算社交媒体受欢迎程度:</h2><p id="7ad8" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">决定社交媒体受欢迎程度的重要因素包括:</p><p id="6a9f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●为电影投票的人数。</p><p id="c35a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●观影人数。</p><p id="7dbf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●电影页面上脸书喜欢的人数。</p><p id="f708" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">利用这些指标，我们想出了一个公式来计算这些电影在社交媒体上的受欢迎程度。</p><p id="344d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">(电影评论人数/电影投票人数)*脸书点赞数。</strong></p><p id="f1a5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了计算一部电影的受欢迎程度，我们可以合计投票用户数、评论用户数和脸书点赞数。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="667f" class="lb jq ht kx b fi lc ld l le lf">data['Social_Media_Popularity'] = (data['num_user_for_reviews']/</span><span id="3dcb" class="lb jq ht kx b fi lg ld l le lf">data['num_voted_users'])*data['movie_facebook_likes']</span><span id="ceba" class="lb jq ht kx b fi lg ld l le lf"># lets also check the Top 10 Most Popular Movies on Social Media</span><span id="abf8" class="lb jq ht kx b fi lg ld l le lf">x = data[['movie_title','Social_Media_Popularity']].sort_values(by = 'Social_Media_Popularity',</span><span id="585b" class="lb jq ht kx b fi lg ld l le lf">ascending = False).head(10).reset_index()</span><span id="dac1" class="lb jq ht kx b fi lg ld l le lf">print(x)</span><span id="322e" class="lb jq ht kx b fi lg ld l le lf">sns.barplot(x['movie_title'], x['Social_Media_Popularity'], palette = 'magma')</span><span id="f1c7" class="lb jq ht kx b fi lg ld l le lf">plt.title('Top 10 Most Popular Movies on Social Media', fontsize = 20)</span><span id="4cc9" class="lb jq ht kx b fi lg ld l le lf">plt.xticks(rotation = 90, fontsize = 14)</span><span id="b658" class="lb jq ht kx b fi lg ld l le lf">plt.xlabel(' ')</span><span id="3a2c" class="lb jq ht kx b fi lg ld l le lf">plt.show()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es me"><img src="../Images/20a1ef83107bdfc693e192b173949e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TP2hZuAOg3vHtQXe_V-8Pw.png"/></div></div></figure><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/efa97635dbf3020450830c1597e2950a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjCXKYyElXI4sHdJvhEqDg.png"/></div></div></figure><p id="da69" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们来比较一下总量和流派。</p><p id="9cbe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先对类型进行分组，并获得该类型电影的最大、最小和平均总值。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="9dd4" class="lb jq ht kx b fi lc ld l le lf">data[['Genre1','gross',]].groupby(['Genre1']).agg(['max','mean','min']).plot(kind = 'line', color = ['red','black','blue'])</span><span id="1057" class="lb jq ht kx b fi lg ld l le lf">plt.title('Which Genre is Most Bankable?', fontsize = 20)</span><span id="845d" class="lb jq ht kx b fi lg ld l le lf">plt.xticks(np.arange(17), ['Action', 'Adventure', 'Animation', 'Biography', 'Comedy', 'Crime',</span><span id="9c8b" class="lb jq ht kx b fi lg ld l le lf">'Documentary', 'Drama', 'Family', 'Fantasy', 'Horror', 'Musical',</span><span id="8dd5" class="lb jq ht kx b fi lg ld l le lf">'Mystery', 'Romance', 'Sci-Fi', 'Thriller', 'Western'], rotation = 90, fontsize = 15)</span><span id="7089" class="lb jq ht kx b fi lg ld l le lf">plt.ylabel('Gross', fontsize = 15)</span><span id="5477" class="lb jq ht kx b fi lg ld l le lf">plt.xlabel(' ',)</span><span id="29c9" class="lb jq ht kx b fi lg ld l le lf">plt.show()</span><span id="409c" class="lb jq ht kx b fi lg ld l le lf">print('The Most Profitable Movie from each Genre')</span><span id="972b" class="lb jq ht kx b fi lg ld l le lf">display(data.loc[data.groupby(data['Genre1'])['Profit'].idxmax()][['Genre1',</span><span id="1a56" class="lb jq ht kx b fi lg ld l le lf">'movie_title','gross']].style.background_gradient(cmap = 'copper'))</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mg"><img src="../Images/7a70ff0a6f107b933b5200197f3a1567.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*HQAdQvNR5CcnQfmR4qAwOQ.png"/></div></div></figure><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/d173123492ba7881479c5a088dc722bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWboJrPmMGQzVSvJ0J_ItA.png"/></div></div></figure><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mi"><img src="../Images/7d333da234801da057052d628f5e1cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*MbJ8-l9j4LckcveZqF8byA.png"/></div></figure><h1 id="7593" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">票房最赚钱的年份:</strong></h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="d5ad" class="lb jq ht kx b fi lc ld l le lf">data['title_year'] = data['title_year'].astype('int')</span><span id="a0eb" class="lb jq ht kx b fi lg ld l le lf">print('Most Profitable Years in Box Office')</span><span id="90b5" class="lb jq ht kx b fi lg ld l le lf">display(data[['title_year','language','Profit']].groupby(['language',</span><span id="6a21" class="lb jq ht kx b fi lg ld l le lf">'title_year']).agg('sum').sort_values(by = 'Profit',</span><span id="939e" class="lb jq ht kx b fi lg ld l le lf">ascending = False).head(10).style.background_gradient(cmap = 'Greens'))</span><span id="f369" class="lb jq ht kx b fi lg ld l le lf"># lets plot them</span><span id="dd7a" class="lb jq ht kx b fi lg ld l le lf">sns.lineplot(data['title_year'], data['Profit'], hue = data['language'])</span><span id="6100" class="lb jq ht kx b fi lg ld l le lf">plt.title('Time Series for Box Office Profit for English vs Foreign Movies', fontsize = 20)</span><span id="1100" class="lb jq ht kx b fi lg ld l le lf">plt.xticks(fontsize = 18)</span><span id="1b4a" class="lb jq ht kx b fi lg ld l le lf">plt.xlabel(' ')</span><span id="a165" class="lb jq ht kx b fi lg ld l le lf">plt.show()</span><span id="9b31" class="lb jq ht kx b fi lg ld l le lf">print("Movies that Made Huge Losses")</span><span id="88e2" class="lb jq ht kx b fi lg ld l le lf">display(data[data['Profit'] &lt; -2000][['movie_title',</span><span id="7b63" class="lb jq ht kx b fi lg ld l le lf">'language','Profit']].style.background_gradient(cmap = 'Reds'))</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mj"><img src="../Images/f0dc86318ef6a9c087302f96025e8574.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*r444WCjP8Mb7ppnn2CABZw.png"/></div></figure><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/1d573185e1ac1d78f4baff9b1861cd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4UvcPZ9uAd57UXvePOYA_A.png"/></div></div></figure><h2 id="8d56" class="lb jq ht bd jr lr ls lt jv lu lv lw jz jb lx ly kd jf lz ma kh jj mb mc kl md bi translated">亏损巨大的电影:</h2><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es ml"><img src="../Images/121da95f6150fa65d957cc3ea64989f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*zH_MDiqAJF8AG2vJwhu05w.png"/></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="65cd" class="lb jq ht kx b fi lc ld l le lf">display(data[data['duration'] == 'Long'][['movie_title', 'duration', 'gross',</span><span id="2631" class="lb jq ht kx b fi lg ld l le lf">'Profit']].sort_values(by = 'Profit',ascending = False).head(5).style.background_gradient(cmap = 'spring'))</span><span id="c459" class="lb jq ht kx b fi lg ld l le lf">display(data[data['duration'] == 'Short'][['movie_title', 'duration', 'gross',</span><span id="b417" class="lb jq ht kx b fi lg ld l le lf">'Profit']].sort_values(by = 'Profit',ascending = False).head(5).style.background_gradient(cmap = 'spring'))</span><span id="c6d7" class="lb jq ht kx b fi lg ld l le lf">sns.barplot(data['duration'], data['gross'], hue = data['language'], palette = 'spring')</span><span id="cd30" class="lb jq ht kx b fi lg ld l le lf">plt.title('Gross Comparison')</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mm"><img src="../Images/63e57bb41756f2d5a45cd1dee0cf0ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*n0HNBgQ6q-5VZ8sIz8W7SA.png"/></div></figure><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mn"><img src="../Images/dc8998a08c3035d9615f1165be666925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*esNDizN__A6VIciEQ8AT2A.png"/></div></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="3831" class="lb jq ht kx b fi lc ld l le lf">print("Average IMDB Score for Long Duration Movies is {0:.2f}".format(data[data['duration'] == 'Long']['imdb_score'].mean()))</span><span id="4508" class="lb jq ht kx b fi lg ld l le lf">print("Average IMDB Score for Short Duration Movies is {0:.2f}".format(data[data['duration'] == 'Short']['imdb_score'].mean()))</span></pre><p id="bad6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">长时长电影的平均IMDB评分为<strong class="is hu"> 7.06。</strong></p><p id="105a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">短时长电影的平均IMDB评分为<strong class="is hu"> 6.28。</strong></p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="736b" class="lb jq ht kx b fi lc ld l le lf">print("\nHighest Rated Long Duration Movie\n",</span><span id="91cd" class="lb jq ht kx b fi lg ld l le lf">data[data['duration'] == 'Long'][['movie_title','imdb_score']].sort_values(by = 'imdb_score', ascending = False).head(1))</span><span id="544c" class="lb jq ht kx b fi lg ld l le lf">print("\nHighest Rated Short Duration Movie\n",</span><span id="91d5" class="lb jq ht kx b fi lg ld l le lf">data[data['duration'] == 'Short'][['movie_title','imdb_score']].sort_values(by = 'imdb_score', ascending = False).head(1))</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mo"><img src="../Images/bf4cd695a81b22430186b0ebd4a3e4a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*wobQp5iLf8KgDaEGQScFLw.png"/></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="265c" class="lb jq ht kx b fi lc ld l le lf">sns.boxplot(data['imdb_score'], data['duration'], palette = 'copper')</span><span id="b573" class="lb jq ht kx b fi lg ld l le lf">plt.title('IMDB Ratings vs Gross', fontsize = 20)</span><span id="7f51" class="lb jq ht kx b fi lg ld l le lf">plt.xticks(rotation = 90)</span><span id="17e5" class="lb jq ht kx b fi lg ld l le lf">plt.show()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mp"><img src="../Images/7bddf33e80d79403fb371946ce1fd8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EMchNzdmNMw4qtBfpzzOeQ.png"/></div></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="d1fd" class="lb jq ht kx b fi lc ld l le lf">pd.set_option('max_rows', 3000)</span><span id="0791" class="lb jq ht kx b fi lg ld l le lf">@interact</span><span id="b99d" class="lb jq ht kx b fi lg ld l le lf">def show_movies_more_than(column='imdb_score', score=9.0):</span><span id="a0ec" class="lb jq ht kx b fi lg ld l le lf">x = data.loc[data[column] &gt; score][[ 'title_year','movie_title',</span><span id="e40a" class="lb jq ht kx b fi lg ld l le lf">'director_name',</span><span id="9247" class="lb jq ht kx b fi lg ld l le lf">'actor_1_name',</span><span id="6b33" class="lb jq ht kx b fi lg ld l le lf">'actor_2_name',</span><span id="220e" class="lb jq ht kx b fi lg ld l le lf">'actor_3_name',</span><span id="4f9f" class="lb jq ht kx b fi lg ld l le lf">'Profit',</span><span id="f505" class="lb jq ht kx b fi lg ld l le lf">'imdb_score',</span><span id="8049" class="lb jq ht kx b fi lg ld l le lf">]]</span><span id="23b6" class="lb jq ht kx b fi lg ld l le lf">x = x.sort_values(by = 'imdb_score', ascending = False)</span><span id="8a04" class="lb jq ht kx b fi lg ld l le lf">x = x.drop_duplicates(keep = 'first')</span><span id="b8e1" class="lb jq ht kx b fi lg ld l le lf">return x</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mq"><img src="../Images/d3a281d57ec6f050bb08a08279de33e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71-nIBB0hOymEfyEJ-TVmA.png"/></div></div></figure><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="dd03" class="lb jq ht kx b fi lc ld l le lf">pd.set_option('max_rows', 30000)</span><span id="2ef4" class="lb jq ht kx b fi lg ld l le lf">@interact</span><span id="e3e9" class="lb jq ht kx b fi lg ld l le lf">def show_articles_more_than(column=['budget','gross'], x=1000):</span><span id="2165" class="lb jq ht kx b fi lg ld l le lf">return data.loc[data[column] &gt; x][['movie_title','duration','gross','Profit','imdb_score']]</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mr"><img src="../Images/b27f34c3c76f02db70f9aad7606cd2ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*4VeeEf9S4UBmDO4aB3Qi8Q.png"/></div></figure><h1 id="66ed" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">基于语言推荐电影:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="d5ce" class="lb jq ht kx b fi lc ld l le lf">def recommend_lang(x):</span><span id="1e0a" class="lb jq ht kx b fi lg ld l le lf">y = data[['language','movie_title','imdb_score']][data['language'] == x]</span><span id="91fb" class="lb jq ht kx b fi lg ld l le lf">y = y.sort_values(by = 'imdb_score', ascending = False)</span><span id="cb78" class="lb jq ht kx b fi lg ld l le lf">return y.head(15)</span><span id="4804" class="lb jq ht kx b fi lg ld l le lf">recommend_lang('Foreign')</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es ms"><img src="../Images/7477e22bc19f25cb8e048bbff7d82762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*WYg31z5OS-Kcrlx2AzGZHg.png"/></div></figure><h1 id="5936" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">根据演员推荐电影:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="f94f" class="lb jq ht kx b fi lc ld l le lf">def recommend_movies_on_actors(x):</span><span id="4736" class="lb jq ht kx b fi lg ld l le lf">a = data[['movie_title','imdb_score']][data['actor_1_name'] == x]</span><span id="7195" class="lb jq ht kx b fi lg ld l le lf">b = data[['movie_title','imdb_score']][data['actor_2_name'] == x]</span><span id="01db" class="lb jq ht kx b fi lg ld l le lf">c = data[['movie_title','imdb_score']][data['actor_3_name'] == x]</span><span id="ee66" class="lb jq ht kx b fi lg ld l le lf">a = a.append(b)</span><span id="b02d" class="lb jq ht kx b fi lg ld l le lf">a = a.append(c)</span><span id="0ef7" class="lb jq ht kx b fi lg ld l le lf">a = a.sort_values(by = 'imdb_score', ascending = False)</span><span id="a428" class="lb jq ht kx b fi lg ld l le lf">return a.head(15)</span><span id="29b4" class="lb jq ht kx b fi lg ld l le lf">recommend_movies_on_actors('Leonardo DiCaprio')</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mt"><img src="../Images/f4b57c3cc79b62169fd5f8de1ff486d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*tw2I0l0fwFVq4zF8H1qv7g.png"/></div></figure><h1 id="8834" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">推荐相似的流派:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="0829" class="lb jq ht kx b fi lc ld l le lf">from mlxtend.preprocessing import TransactionEncoder</span><span id="8d27" class="lb jq ht kx b fi lg ld l le lf">x = data['genres'].str.split('|')</span><span id="bbeb" class="lb jq ht kx b fi lg ld l le lf">te = TransactionEncoder()</span><span id="e8b0" class="lb jq ht kx b fi lg ld l le lf">x = te.fit_transform(x)</span><span id="1506" class="lb jq ht kx b fi lg ld l le lf">x = pd.DataFrame(x, columns = te.columns_)</span><span id="b198" class="lb jq ht kx b fi lg ld l le lf"># lets check the head of x</span><span id="7ce2" class="lb jq ht kx b fi lg ld l le lf">x.head()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/5a380197d0f9e35d6d137db96eeb7138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ipdhcMgRCd_jNl-PoNbjiA.png"/></div></div></figure><p id="720c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们将这些数据转换成布尔值，以便进行计算。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="2640" class="lb jq ht kx b fi lc ld l le lf">genres = x.astype('int')</span><span id="0a52" class="lb jq ht kx b fi lg ld l le lf">genres.head()</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/add13fd3df82b6ac1344f0c3129ad768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aAttpVpLjXH-d1lwSFrsaQ.png"/></div></div></figure><h2 id="2db7" class="lb jq ht bd jr lr ls lt jv lu lv lw jz jb lx ly kd jf lz ma kh jj mb mc kl md bi translated">制作用于获得相似流派的推荐引擎:</h2><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="5213" class="lb jq ht kx b fi lc ld l le lf">def recommendation_genres(gen):</span><span id="b3f6" class="lb jq ht kx b fi lg ld l le lf">gen = genres[gen]</span><span id="1667" class="lb jq ht kx b fi lg ld l le lf">similar_genres = genres.corrwith(gen)</span><span id="a289" class="lb jq ht kx b fi lg ld l le lf">similar_genres = similar_genres.sort_values(ascending=False)</span><span id="a04e" class="lb jq ht kx b fi lg ld l le lf">similar_genres = similar_genres.iloc[1:]</span><span id="e7e8" class="lb jq ht kx b fi lg ld l le lf">return similar_genres.head(3)</span><span id="2e75" class="lb jq ht kx b fi lg ld l le lf">recommendation_genres('Documentary')</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mv"><img src="../Images/adcf9382dd3fd3fc6e4b47af8b0851de.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*ZJo5pkvSPjO6jV2x6zhaIA.png"/></div></figure><h1 id="8541" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">推荐类似电影:</h1><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="94d0" class="lb jq ht kx b fi lc ld l le lf">def recommendation_movie(movie):</span><span id="d093" class="lb jq ht kx b fi lg ld l le lf">movie = x[movie+'\xa0']</span><span id="6baa" class="lb jq ht kx b fi lg ld l le lf">similar_movies = x.corrwith(movie)</span><span id="4a37" class="lb jq ht kx b fi lg ld l le lf">similar_movies = similar_movies.sort_values(ascending=False)</span><span id="dd76" class="lb jq ht kx b fi lg ld l le lf">similar_movies = similar_movies.iloc[1:]</span><span id="7805" class="lb jq ht kx b fi lg ld l le lf">return similar_movies.head(20)</span><span id="9f1c" class="lb jq ht kx b fi lg ld l le lf"># lets test on some results</span><span id="0152" class="lb jq ht kx b fi lg ld l le lf">recommendation_movie('Shutter Island')</span></pre><figure class="ks kt ku kv fd hk er es paragraph-image"><div class="er es mw"><img src="../Images/4b2e1aec672f312b7d0be07f09982d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*nJD9i3kkjp4t17kmfuyMyg.png"/></div></figure><h1 id="b773" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Github链接:</h1><div class="hh hi ez fb hj mx"><a href="https://github.com/pinaki1889/movie_recommender.git" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hu fi z dy nc ea eb nd ed ef hs bi translated">GitHub-pinaki 1889/电影_推荐者</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">在GitHub上创建一个帐户，为pinaki1889/movie_recommender的开发做出贡献。</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">github.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl hp mx"/></div></div></a></div><h1 id="dfc7" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">关键要点:</h1><p id="7bb4" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在完成一个项目后，分析关键外卖是非常重要的。因此，让我们讨论一下主要的要点</p><p id="0483" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●理解缺失值处理</p><p id="30ad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●如何执行特征工程</p><p id="cb24" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●如何根据要求对数据进行操作。</p><p id="2b67" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●如何根据内容进行推荐</p><p id="adce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">●如何根据相似度进行推荐。</p><figure class="ks kt ku kv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nm"><img src="../Images/44c7747b6cb2f9fd2e33a87ec6c9342a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ZQEWxoWCcE5CJDnjSkT8w.jpeg"/></div></div></figure></div></div>    
</body>
</html>