<html>
<head>
<title>Virtual environments in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python中的虚拟环境</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/virtual-environments-in-python-186cbd4a1b94?source=collection_archive---------12-----------------------#2021-01-08">https://medium.com/analytics-vidhya/virtual-environments-in-python-186cbd4a1b94?source=collection_archive---------12-----------------------#2021-01-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/1aacbf358c34741f7f4e52f6595dfc2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*wigcg2cOMdiqq3y2Qrgk2w.png"/></div></figure><p id="e635" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在开始了解虚拟环境到底是什么以及它如何让我们的生活变得更容易之前，让我们来看看在开发一个简单的python项目时可能会遇到的一些事情。</p><p id="afa4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">一个python项目可能依赖于几个第三方库来实现您的业务目标。您可以使用名为pip的python包管理器来管理所有这些额外的包/依赖项。</p><p id="9ba8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">要检查您的pip版本，您可以-</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="3d0b" class="js jt hh jo b fi ju jv l jw jx">python -m pip --version</span></pre><p id="58fa" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您可以使用pip -中的install命令来安装软件包</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="6fde" class="js jt hh jo b fi ju jv l jw jx">python -m pip install package-name</span></pre><p id="fa7b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">默认情况下，pip总是安装任何软件包的最新版本(直到提到该软件包的特定版本)，并且还会安装所需软件包的任何依赖项</p><p id="fcb3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">到目前为止，一切似乎都很顺利，那么你为什么还要进一步阅读这篇文章呢？</p><h1 id="708f" class="jy jt hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">问题是</h1><p id="7c34" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">如果在开发这个运行在python 2上的项目(项目A)的同时，您也开始开发另一个运行在python 3上的python项目(项目B ),那会怎么样呢？</p><p id="d318" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">项目A和项目B可能都需要一个库(lib A)来实现它们的目标，但是在python 2上运行的项目A可能与lib A的不同版本兼容，而项目B (python 3)可能与其他版本兼容。</p><p id="96a5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">即使您的多个项目使用相同的python版本，也可能会出现这样的情况:为任何新项目更新依赖项版本可能会破坏现有项目的功能。</p><p id="b2ba" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">由于默认情况下，系统上的每个项目都将从相同的目录编写和使用第三方包，这带来了一个挑战，因为它可能会破坏您的任何一个项目的功能。</p><h1 id="0942" class="jy jt hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">进入虚拟环境</h1><p id="de65" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">来自https://docs.python.org/的官方文件称-</p><blockquote class="lb lc ld"><p id="5023" class="il im le in b io ip iq ir is it iu iv lf ix iy iz lg jb jc jd lh jf jg jh ji ha bi translated">虚拟环境是一种Python环境，其中安装的Python解释器、库和脚本与其他虚拟环境中安装的解释器、库和脚本以及(默认情况下)安装在“系统”Python(即作为操作系统的一部分安装的系统)中的任何库相隔离。</p></blockquote><p id="a77e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">上面的定义很简单，可以理解为虚拟环境只是为您提供一个隔离的地方来管理项目的依赖关系，这样它们就不会干扰安装在任何其他虚拟环境中或安装在您的系统上的库。</p><p id="e607" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您可以简单地为您从事的每个项目创建一个虚拟环境。</p><h1 id="e68a" class="jy jt hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">使用虚拟环境</h1><p id="895d" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">虽然有不同的模块可以用来创建一个虚拟环境，但在本文中我们将讨论<strong class="in hi"> virtualenv(python 2) </strong></p><h2 id="5b62" class="js jt hh bd jz li lj lk kd ll lm ln kh iw lo lp kl ja lq lr kp je ls lt kt lu bi translated">1)安装virtualenv</h2><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="4a63" class="js jt hh jo b fi ju jv l jw jx">python -m pip install virtualenv</span></pre><p id="d6f0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">上面的命令将安装软件包virtualenv，你可以通过<code class="du lv lw lx jo b">python -m virtualenv --version</code>来验证版本</p><h2 id="c98e" class="js jt hh bd jz li lj lk kd ll lm ln kh iw lo lp kl ja lq lr kp je ls lt kt lu bi translated">2)创建虚拟环境</h2><p id="f326" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">您可以使用命令创建一个虚拟环境</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="19ff" class="js jt hh jo b fi ju jv l jw jx">python -m virutalenv venv</span></pre><p id="e7e7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">上面的命令将创建一个名为venv的目录，其中包含运行python项目所需的所有文件。您安装的所有第三方软件包将仅存储在此目录中。</p><p id="c10a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您还可以为任何想要的python版本创建虚拟环境。如果您在创建虚拟环境时没有指定任何python版本，那么它将使用您的系统正在使用的默认python版本。</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="fdea" class="js jt hh jo b fi ju jv l jw jx">python -m virtualenv -p python3 venv</span></pre><p id="e0c4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">上面的命令创建了一个使用python 3执行的虚拟环境。</p><h2 id="9583" class="js jt hh bd jz li lj lk kd ll lm ln kh iw lo lp kl ja lq lr kp je ls lt kt lu bi translated">3)激活虚拟环境</h2><p id="b7a2" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">一旦创建了虚拟环境，就需要激活它。这可以使用命令-</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="a9fd" class="js jt hh jo b fi ju jv l jw jx">source venv/bin/activate</span></pre><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ly"><img src="../Images/34b4e072c9cc3c955bbff4c974aaa08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gxkpoaz9fjdV5-KOCCJ5Rw.png"/></div></div></figure><p id="e025" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">激活虚拟环境后，您将开始在左侧看到当前虚拟环境的名称。这表明您的虚拟环境当前处于活动状态。您现在可以使用pip安装您的软件包，它们将仅安装在此虚拟环境中，而不是系统范围内。</p><p id="4727" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">激活脚本将您的shell设置为使用python可执行文件和安装在此虚拟环境中的其他第三方包</p><h2 id="3188" class="js jt hh bd jz li lj lk kd ll lm ln kh iw lo lp kl ja lq lr kp je ls lt kt lu bi translated">4)现在有什么不同？</h2><p id="4e1f" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">如果您在激活的虚拟环境中运行命令<code class="du lv lw lx jo b">which python</code></p><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es md"><img src="../Images/aa9dcc1155ac17a874ab2d4db4d75087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pxL2LSgbxtjfJaMigZ2wwA.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><strong class="bd jz">虚拟环境激活</strong></figcaption></figure><p id="c969" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这表明该环境使用的python解释器只存在于该虚拟环境中，而不是默认的系统python解释器</p><p id="75b6" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果我在全局环境中运行相同的<code class="du lv lw lx jo b">which python</code>命令-</p><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mi"><img src="../Images/59637c4d952da9e8f073d16c6a26b5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fyrQtusAa8eEAa2w6rh87Q.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><strong class="bd jz">未激活虚拟环境</strong></figcaption></figure></div><div class="ab cl mj mk go ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ha hb hc hd he"><p id="2d6f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你在你激活的虚拟环境中运行命令<code class="du lv lw lx jo b">pip list</code></p><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mq"><img src="../Images/32208e81376a0a69fcba28fa5ddd7f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O5RBLbet7dHB-T0io31BLQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><strong class="bd jz">虚拟环境激活</strong></figcaption></figure><p id="9470" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这显示了您在这个虚拟环境中通过pip安装的包。</p><p id="7658" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在我的全局环境中运行相同的命令将会给出我在系统范围内安装的所有包</p><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mr"><img src="../Images/9d9fe64780fd6bbd9d6159a1e7763aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gTr_Gkc0UsoWq0Ej5kGOZw.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><strong class="bd jz">未激活虚拟环境</strong></figcaption></figure><p id="b36e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这些包及其版本独立于您在虚拟环境中安装的内容，这是这些虚拟环境向您承诺的隔离。</p><p id="e8a8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您对虚拟环境中的包所做的任何更改(无论有多少)都不会更新/操作安装在系统范围内或其他虚拟环境中的包，因此您可以开发多个项目，而不会遇到任何依赖冲突问题。</p><h2 id="800f" class="js jt hh bd jz li lj lk kd ll lm ln kh iw lo lp kl ja lq lr kp je ls lt kt lu bi translated">5)停用虚拟环境</h2><p id="6314" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">当你完成你的工作时，你可以简单地在你当前激活的虚拟环境中输入<code class="du lv lw lx jo b">deactivate</code>，然后你就可以离开了</p><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ms"><img src="../Images/f630126deca61ae34ac9ba1176160f54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G3VXYUzWoqYL7ohQ7mlcJQ.png"/></div></div></figure><h1 id="fc2b" class="jy jt hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论-</h1><figure class="jj jk jl jm fd ii er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mt"><img src="../Images/8ef5d46d9ac4c2968233f0eb54d12171.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBDnWbhgEEjvQgnABe_ZgA.jpeg"/></div></div></figure><p id="a321" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">所以当有人问你“虚拟环境kab使用karna启动karoge？”时，不要像Guddu Bhaiya一样。立即开始使用它们。</p></div></div>    
</body>
</html>