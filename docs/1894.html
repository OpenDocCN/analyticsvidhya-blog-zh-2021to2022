<html>
<head>
<title>Generating APK — React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生成APK —反应自然</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/generating-apk-react-native-aedacee1fef9?source=collection_archive---------8-----------------------#2021-03-24">https://medium.com/analytics-vidhya/generating-apk-react-native-aedacee1fef9?source=collection_archive---------8-----------------------#2021-03-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="aade" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用React Native CLI来生成apk。</p><p id="7fff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，我们需要确保项目成功运行，没有任何错误。然后，生成私有签名密钥，为React本机应用程序生成apk。</p><p id="4d4e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第一步:</strong></p><p id="7ec4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以使用项目目录上的keytool生成一个私有签名密钥，如下所示:</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="0320" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">sudo keytool -genkey -v -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</strong></span></pre><p id="d8a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以把<strong class="ig hi"> <em class="jr"> your_key_name </em> </strong>改成任何我们想要的名字，还有<strong class="ig hi"> <em class="jr"> your_key_alias </em> </strong>。该命令通过以下方式提示我们:</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="9136" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">Enter your keystore password: 12345</strong></span><span id="72ab" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">Re-enter new password: 12345</strong></span><span id="1188" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is your first and last name? [unknown]: Samir Khanal</strong></span><span id="564b" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is the name of your organizational unit? [unknown]: XYZ</strong></span><span id="4f9e" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is the name of your organization? [unknown]: XYZ</strong></span><span id="d149" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is the name of your city or Locality? [unknown]: XYZ</strong></span><span id="34c6" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is the name of your State or Province? [unknown]: XYZ</strong></span><span id="7333" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">What is the two-letter country code for this unit? [unknown]: XX</strong></span></pre><p id="d65d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它使用上述凭证生成一个名为my-release-key.keystore的文件。</p><p id="5f01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第二步:</strong></p><p id="98ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们将上面生成的文件(<strong class="ig hi">my-release-key . keystore</strong>)复制到项目文件夹中的<strong class="ig hi"> android/app </strong>目录。</p><p id="1683" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第三步:</strong></p><p id="b3d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们应该编辑文件<strong class="ig hi">Android/gradle . properties</strong>并添加以下内容:</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="3ccf" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">MYAPP_UPLOAD_STORE_FILE=my-upload-key.keystore</strong></span><span id="3782" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">MYAPP_UPLOAD_KEY_ALIAS=my-key-alias</strong></span><span id="547b" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">MYAPP_UPLOAD_STORE_PASSWORD=*****</strong></span><span id="72b6" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">MYAPP_UPLOAD_KEY_PASSWORD=*****</strong></span></pre><p id="bef3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们应该用之前设置的正确的密钥库密码替换<strong class="ig hi">* * * * * *</strong>。</p><p id="fa08" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤4: </strong></p><p id="14d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们应该在我们的项目文件夹中编辑<strong class="ig hi">Android/app/build . gradle</strong>文件，并在<strong class="ig hi"> buildTypes </strong>的最后一行<strong class="ig hi"> defaultConfig{ … } </strong>和“<strong class="ig hi">signing config signing configs . release</strong>之后添加<strong class="ig hi"> signingConfigs </strong>，如下所示。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="68b5" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">...</strong></span><span id="9457" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">android {</strong></span><span id="502d" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi"> ...</strong></span><span id="bf65" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">  defaultConfig { ... }</strong></span><span id="e85d" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">  signingConfigs {</strong></span><span id="2f4b" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">    release {</strong></span><span id="2f9f" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {</strong></span><span id="79d8" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      storeFile file(MYAPP_UPLOAD_STORE_FILE)</strong></span><span id="20d2" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      storePassword MYAPP_UPLOAD_STORE_PASSWORD</strong></span><span id="a27a" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      keyAlias MYAPP_UPLOAD_KEY_ALIAS</strong></span><span id="f954" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      keyPassword MYAPP_UPLOAD_KEY_PASSWORD</strong></span><span id="e87a" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      }</strong></span><span id="8022" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">    }</strong></span><span id="62c4" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">  }</strong></span><span id="4e94" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi"> buildTypes {</strong></span><span id="1a89" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">   release {</strong></span><span id="4d38" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      ...</strong></span><span id="6857" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      signingConfig signingConfigs.release</strong></span><span id="7489" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">      }</strong></span><span id="fe4b" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">   }</strong></span><span id="bb0f" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">}</strong></span><span id="449d" class="jl jm hh jh b fi js jo l jp jq"><strong class="jh hi">...</strong></span></pre><p id="571f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，进入我们项目的<strong class="ig hi"> android/ </strong>目录并运行，</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="d288" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">./gradlew assembleRelease</strong></span></pre><p id="76a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将在<strong class="ig hi">Android/app/build/outputs/apk/release/</strong>目录下生成一个<strong class="ig hi"> apk </strong>文件。</p><p id="8aef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这样，我们得到了React原生项目的一个<strong class="ig hi"> apk </strong>文件，我们可以在google play-store中发布或与其他人共享。</p><p id="acf4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献:</strong></p><p id="65d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jt" href="https://reactnative.dev/docs/signed-apk-android" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jr">https://reactnative.dev/docs/signed-apk-android</em></strong></a></p></div></div>    
</body>
</html>