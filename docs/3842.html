<html>
<head>
<title>Process Azure Cognitive Services API using Data Factory — Text Analytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用数据工厂处理Azure认知服务API文本分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/process-azure-cognitive-services-api-using-data-factory-text-analytics-717c04104bd8?source=collection_archive---------2-----------------------#2021-07-31">https://medium.com/analytics-vidhya/process-azure-cognitive-services-api-using-data-factory-text-analytics-717c04104bd8?source=collection_archive---------2-----------------------#2021-07-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="92bc" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">仅批处理</h1><h1 id="fd01" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">步伐</h1><ul class=""><li id="dc96" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">创建Azure数据工厂</li><li id="5ae1" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">获取Azure SQL的表名和凭据</li><li id="1d2c" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">Azure SQL将是数据源输入</li><li id="16a6" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">输出也将保存在Azure SQL中</li><li id="4250" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建新管道</li><li id="8a65" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">获取查找活动</li><li id="7a37" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">创建选择查询</li></ul><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="4e23" class="ki if hh ke b fi kj kk l kl km">SELECT TOP (1000) * FROM [dbo].[tblconnstr]</span></pre><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kn"><img src="../Images/8c2cfff86e2f9ffe4fa9bd2b9249a0e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B6s_Pw9WHWVqeXX4.jpg"/></div></div></figure><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="0f31" class="ki if hh ke b fi kj kk l kl km">@activity('Web1').output.documents</span></pre><ul class=""><li id="f75b" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在把叉子拿来</li><li id="6bab" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">配置项目</li></ul><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="3852" class="ki if hh ke b fi kj kk l kl km">@activity('Lookup1').output.value</span></pre><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es la"><img src="../Images/582e6fa0e8a3b253b35019e871de7208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DS9965fhTfDN0gjK.jpg"/></div></div></figure><ul class=""><li id="c87c" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在我们可以为每个人活动了</li><li id="9e11" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">配置web活动以访问认知服务并获取结果</li></ul><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lb"><img src="../Images/509d355a82eabd77af892a84ec0deefb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j9wssdUEjy_nle_5.jpg"/></div></div></figure><ul class=""><li id="208f" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">web请求的正文</li><li id="25bb" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">项目()。是要提取的列名</li></ul><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="c895" class="ki if hh ke b fi kj kk l kl km">@concat('{<br/>        "documents": [<br/>            {<br/>                "language": "en",<br/>                "id": "',concat(item().id, concat('", "text": "', concat(item().connstr,'"<br/>            }<br/>        ]<br/>    }'))))</span></pre><ul class=""><li id="20a4" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">使用存储过程活动处理输出并存储在Azure SQL中</li><li id="4b55" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将实际数据作为存储过程的参数输入进行处理</li></ul><pre class="jz ka kb kc fd kd ke kf kg aw kh bi"><span id="96b4" class="ki if hh ke b fi kj kk l kl km">@string(activity('Web1').output.documents)<br/>@item().id</span></pre><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lc"><img src="../Images/cad81f19b8a96a29024121e5d2cdde18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hu0ddVQPQEADLd3H.jpg"/></div></div></figure><ul class=""><li id="f46d" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">运行调试，看看是否工作</li></ul><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ld"><img src="../Images/ab4aa528e2e95286bb2381f6be74edf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U55I_G_7IvYph7R7.jpg"/></div></div></figure><ul class=""><li id="4173" class="jc jd hh je b jf kv jh kw jj kx jl ky jn kz jp jq jr js jt bi translated">现在检查数据库，看看文本分析输出是否存储在Azure SQL数据库中</li></ul><figure class="jz ka kb kc fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es le"><img src="../Images/0cb278fbe6ad19006b6cb75620b88d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iHIc7yl1PAMZKQr3.jpg"/></div></div></figure><p id="5d81" class="pw-post-body-paragraph lf lg hh je b jf kv lh li jh kw lj lk jj ll lm ln jl lo lp lq jn lr ls lt jp ha bi translated">原文—<a class="ae lu" href="https://github.com/balakreshnan/Samples2021/blob/main/cogsvc/Batchprocesstextapi.md" rel="noopener ugc nofollow" target="_blank">samples 2021/batchprocesstextapi . MD at main balakreshnan/samples 2021(github.com)</a></p></div></div>    
</body>
</html>