<html>
<head>
<title>Pandas: Part Two</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫:第二部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pandas-part-two-2973075d6484?source=collection_archive---------14-----------------------#2021-01-29">https://medium.com/analytics-vidhya/pandas-part-two-2973075d6484?source=collection_archive---------14-----------------------#2021-01-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="ab90" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">预览数据、检查数据类型、更改数据类型和选择特定数据</h2></div><p id="c9b8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">好的，在我的PANDAmonium文章中，我们介绍了导入pandas以及两种类型的数据结构，那么我们从这里开始做什么呢？很好的问题，很高兴你问了。现在你已经知道了数据结构和如何导入它们，让我们确保你知道如何查看你上传的数据。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es js"><img src="../Images/0be96344cff30941bf6ac729053d6213.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*c-gKt88feaoUV_lQxjXadg.jpeg"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">图片来自unsplash via <a class="ae ke" href="https://unsplash.com/@djmle29n" rel="noopener ugc nofollow" target="_blank"> @djmle29n </a></figcaption></figure><h1 id="80d5" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated"><strong class="ak">预览数据:</strong></h1><p id="6a1b" class="pw-post-body-paragraph iw ix hh iy b iz kx ii jb jc ky il je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated"><strong class="iy hi"> df.head() </strong> —这允许您查看数据帧的前五行。如果我在括号里插入一个数字，那么这就是可见的行数。请注意，第一个表下面显示了df.head()，其中显示了五行。(记住在python中我们从零开始计数！)第二个表我在括号里加了一个2，所以只显示了两行。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lc"><img src="../Images/12f2cedb044bf24429c9fb75b17a8731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*Ife6MG7hq9_-bQc1-QFBPw.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><p id="af05" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi"> df.tail() </strong> —与df.head非常相似的是df.tail，它不是显示数据的开头，而是显示结尾。同样的规则也适用。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ld"><img src="../Images/ff97526e93a34a012436b95de7ca1b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RyC-md_xz5kZoWs29Nlm-A.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><h1 id="eddb" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">检查数据类型:</h1><p id="19af" class="pw-post-body-paragraph iw ix hh iy b iz kx ii jb jc ky il je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">检查列的数据类型有两种常用方法:df.dtypes和df.info()。请查看以下内容，找出主要差异，并提供更多信息。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es li"><img src="../Images/be0a3406377e06c8daaab305f3bbbb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*r_TuQwxR3iMuFNJhrNcgkw.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><p id="7a60" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注意，df.dtypes严格地只提供数据类型。如果我刚刚开始研究我的数据，df.info()可能是一个更好的选择。info提供了RangeIndex、总列数、每列中非空的数量、每列的数据类型以及内存使用情况。这是许多有价值的信息，可以帮助我更全面地了解我的数据。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lj"><img src="../Images/08e8b77f308fb6cb7b3baa82c90b56ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i9JnhHgZqo6fuZ36"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">图片来自<a class="ae ke" href="https://unsplash.com/@rossf" rel="noopener ugc nofollow" target="_blank"> @rossf </a>的unsplash pic</figcaption></figure><h1 id="e467" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">更改数据类型:</h1><p id="e8cc" class="pw-post-body-paragraph iw ix hh iy b iz kx ii jb jc ky il je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">有许多不同的策略可以用来改变数据类型。假设我有一个数据框架，其中的AnswerText列回答了问题“你的年龄是多少？”在这里，每个人都用数字输入他们的年龄，因此将我的数据保存为int64比将其保存为对象要有用得多。在下图中，你可以看到第一个age.info()将AnswerText显示为一个对象。然后我跑了</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="f9ce" class="lp kg hh ll b fi lq lr l ls lt">age.AnswerText = age.AnswerText.astype(‘int64’)</span></pre><p id="2c2d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将整个AnswerText列转换为不同的dtype，如最后一个age.info()所示。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lu"><img src="../Images/3b64766a44ca10cbd1c585c35a7902bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQNhPo4-AzQqqc4jDSCkqA.png"/></div></div></figure><p id="61e3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">的。astype方法可用于数据帧的系列或单个列。要一次更改多列，格式应该是</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="ab5f" class="lp kg hh ll b fi lq lr l ls lt">df.astype({"column1": np.float64, "column2": object})</span></pre><p id="0b48" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">___________________________________________________________________</p><p id="1ea5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果您不确定使用df.convert_dtypes()将数据转换成什么，这将是一个非常有用的工具。该函数将数据转换为最佳选项。转换一维对象数组或标量的其他方法是使用以下方法之一:</p><p id="43b2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi"> to_datetime </strong>:用于将对象转换为datetime。转换为datetime列非常有用，因为它允许我们执行不同的操作，如果日期是字符串，这是不可能的。如果您不确定您当前的数据是什么，记得使用df.info()查看一下。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="cc23" class="lp kg hh ll b fi lq lr l ls lt">pd.to_datetime(obj_to_convert)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lv"><img src="../Images/78ac6953b0d4e9223503f7466524a758.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*t341vXs-fmvkLhUmFpozCQ.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><p id="1aea" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="lw">* *有关to_datetime的更多信息，请点击</em> <a class="ae ke" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html" rel="noopener ugc nofollow" target="_blank"> <em class="lw">此处</em> </a> <em class="lw">。</em></p><p id="678e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">___________________________________________________________________</p><p id="b0b9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi"> to_timedelta </strong>:用于将参数从可识别的timedelta格式转换为timedelta类型。使用to_timedelta，您可以更具体地将单位标识为天、小时、分钟、秒，一直到纳秒。这在确定非常具体的时间长度时非常有用。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="8aa9" class="lp kg hh ll b fi lq lr l ls lt">pd.to_timedelta(obj_to_convert, unit)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lx"><img src="../Images/140ea621d80131279a31dddbac0933ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8K8eWCoUaYVA6uoGxv6grQ.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><p id="5cdc" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="lw">* *有关to_timedelta的更多信息，请点击</em> <a class="ae ke" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_timedelta.html" rel="noopener ugc nofollow" target="_blank"> <em class="lw">此处</em> </a> <em class="lw">。</em></p><p id="214f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">___________________________________________________________________</p><p id="08cf" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">to_numeric:将参数转换为数字类型。(通常是浮点64或整数64)</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="a6ee" class="lp kg hh ll b fi lq lr l ls lt">pd.to_numeric(arg_to_convert)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ly"><img src="../Images/b8e623f890037a9bd0cc1e746326818c.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*llH_u0hZOkO5Ew1BTBMNsw.png"/></div></figure><p id="26aa" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">pandas numeric可用于将标量、列表、元组、一维数组或序列转换为float64或int64，具体取决于给定的数据。需要指出的一点是，如果您的数据是十进制形式，使用to_numeric会将舍入到最接近的整数。</p><p id="3525" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="lw">* *欲了解更多关于to_numeric的信息，请点击</em> <a class="ae ke" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_numeric.html" rel="noopener ugc nofollow" target="_blank"> <em class="lw">此处</em> </a> <em class="lw">。</em></p><p id="8728" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="lw">参考文献:[1 </em></p><h1 id="3999" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">选择特定数据:</h1><p id="e452" class="pw-post-body-paragraph iw ix hh iy b iz kx ii jb jc ky il je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">1.<strong class="iy hi">按列选择:</strong>使用心理健康数据集<a class="ae ke" href="https://www.kaggle.com/anth7310/mental-health-in-the-tech-industry" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>我可以选择我想要查看的特定行，方法是使用:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="177b" class="lp kg hh ll b fi lq lr l ls lt">One Column:<br/>df["col_name"]</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lz"><img src="../Images/6394674076255271083d5a0a9f28403d.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*cZ8lHHD5u1EvJA0H_ndcfg.png"/></div></figure><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="b41d" class="lp kg hh ll b fi lq lr l ls lt">Two or More Columns:<br/>df["col_name", "other_name"]</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ma"><img src="../Images/656f8c90ea753a730c902a6ba5e19901.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*tthWrPZW1bYit9GplGHmSA.png"/></div></figure><p id="db40" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">2.<strong class="iy hi">选择特定行:</strong>有多个选项可用于选择数据集中的特定信息。也许我只想获取QuestionID为2的行。我可以通过使用</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="4cba" class="lp kg hh ll b fi lq lr l ls lt">df[df["column_name"] == "answer"]</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mb"><img src="../Images/a9ceeb36f2d100b5d2cf59a0fce3d3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*gw7tLwnBadwN79KIebsfIg.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">我的电脑截图</figcaption></figure><p id="6286" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">除了使用等号，我还可以指定大于(&gt;)，小于(</p><p id="a8a6" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">___________________________________________________________________</p><p id="3983" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Another useful function is pandas <strong class="iy hi">)。isin </strong>。也许我需要抓住第二、五和七个问题。这些都是非常随机的数字，如果没有. isin的帮助可能很难提取。代码与上面非常相似，但我添加的不是等号。isin([然后是所需的数字])]</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mc"><img src="../Images/f847473c8f499afc7eaff17a2de1c566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B2sdufFs0-TSpZ-ObMuZAg.png"/></div></div></figure><p id="4ec5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用isin的一个技巧是使用波浪号操作符(~)，它基本上将方法从isin切换到isNOTin。为此，我们只需在第二个df前面添加tildae(键盘的左上角)。看出区别了吗？</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es md"><img src="../Images/1681a0dd889297be98e1cfaead4aa5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8xvhSbw60EL8Y501xN00fw.png"/></div></div></figure><p id="ecac" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我现在已经抓取了数据集中的所有内容，除了第二、第五和第七个问题。</p><p id="b6d2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">3.<strong class="iy hi">利用。loc或。iloc </strong></p><p id="ab94" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">。loc </strong>用于通过标签或布尔数组访问一组行和列。在这个例子中，我创建了一个名为df1的新数据集，这个数据帧包含了三种水果的信息，包括它们的颜色和数量。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es me"><img src="../Images/b759700fd7a1086d6a7a564dd3ea851a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*O3Tb3GsSbvAiS27U4BrFOQ.png"/></div></figure><p id="5648" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用。我可以使用标签描述来选择特定的列。为了只选择我想要的信息，我可以输入df1.loc["label"]。让我们用樱桃来测试一下:</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mf"><img src="../Images/e5c32e538029755574e7254f32d33add.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/format:webp/1*a59w-wN4GKx2a9MqDqmg6Q.png"/></div></figure><p id="944e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果我想只选择商店中的樱桃和橙子数量，我可以更进一步，添加。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mg"><img src="../Images/84d3665df77a950ef77d774523faf186.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*fnTLhcMeYPsj7cex2q-iLA.png"/></div></figure><p id="df7d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">* *有关的更多信息。loc查看熊猫文档<a class="ae ke" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><p id="b63f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">___________________________________________________________________</p><p id="bfac" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">。iloc </strong>正在通过步进位置选择一系列行和/或列。也许我想看到个人对我的一个问题的回答的一个小的子样本。要做到这一点。iloc I将根据索引位置选择行。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mh"><img src="../Images/3e0afe82b5bdb6b88d20e6ed707f631d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*yfjSSR1r3GuT-5XdjAOE2Q.png"/></div></figure><p id="3a6e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里我选择了第五到第九行索引。当输入数字后。第一个数字是数据开始的行，最后一个数字是信息将到达的行，但不包括该行。更详细地说，假设我只关心AnswerText、SurveyID和UserID。我可以加上。iloc也只选择特定的列。0:3表示我想要第一、第二和第三列的数据。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mi"><img src="../Images/f76d2f8bdc2c66650c2c56df587835f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*SRAxdWSv6M4BLCVIylmAkA.png"/></div></figure><p id="cc5f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就这样，我得到了想要的行和列。作为另一个增加的技巧，如果您知道您想要除了前五行之外的所有行，您可以编写df.iloc[5:]不要在冒号后面添加一个数字，这意味着转到末尾。这就是我们的第二个熊猫帖子！如果您有任何问题或要求，请随时联系我们！</p><p id="505f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">参考资料:</p><p id="eba7" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">[1]—<a class="ae ke" href="https://pandas.pydata.org/docs/user_guide/basics.html#dtypes" rel="noopener ugc nofollow" target="_blank">https://pandas . pydata . org/docs/user _ guide/basics . html # dtypes</a></p></div></div>    
</body>
</html>