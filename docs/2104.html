<html>
<head>
<title>Identifying, Cleaning and replacing outliers | Titanic Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">识别、清理和替换离群值|泰坦尼克号数据集</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/identifying-cleaning-and-replacing-outliers-titanic-dataset-20182a062893?source=collection_archive---------1-----------------------#2021-04-05">https://medium.com/analytics-vidhya/identifying-cleaning-and-replacing-outliers-titanic-dataset-20182a062893?source=collection_archive---------1-----------------------#2021-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8278" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用稳健概念处理异常值</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d8c94d9c516982ab8ed1dc3cabd956f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vun5NeqcHs3ic-LIo-SznQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">shutterstock.com</figcaption></figure><p id="3d24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di"> O </span>离群值是数据中与数据的主要样本差异极大的值，离群值的存在会显著降低可预测模型的性能和准确性。</p><p id="8b1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">衡量机器学习模型有多好取决于数据有多干净，离群值的存在可能是数据收集过程中出现错误的结果，但其中一些极值可能是有效和合法的。例如，将罗纳尔多或梅西的进球得分与其他普通球员进行比较，将道恩·强森和瑞安·雷诺兹等顶级演员的收入与其他演员进行比较，我们可以清楚地看到这是不可比的，差距将非常显著。</p><p id="8c2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在数据分析过程中，该分数和收入可能会显示为异常值，这就是为什么需要对数据进行更广泛和深入的分析，以找出并区分极端值和异常值。</p><p id="161e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用titanic数据集来识别、清理和替换异常值。现在，让我们探索我们的数据，并做一些基本的数据预处理。</p><p id="b38a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入库</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="cdd9" class="kh ki hi kd b fi kj kk l kl km">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span></pre><p id="62ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读取数据集</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="d62d" class="kh ki hi kd b fi kj kk l kl km">df=pd.read_csv('titanic.csv')<br/>df.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/324803ddcc4ca2b4308a0e11c169eccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*32vq9w6Ic6hDFlJtjN8K8g.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由Magtech Digital Hub提供</figcaption></figure><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="9050" class="kh ki hi kd b fi kj kk l kl km">df.dtypes</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ko"><img src="../Images/fce67a5e5e59cca50a9c9d421c53d719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*iCsx_3yjz0w0LonGNV6K7A.jpeg"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由Magtech Digital Hub提供</figcaption></figure><p id="0234" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看统计详细信息</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="7706" class="kh ki hi kd b fi kj kk l kl km">df.describe()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/a565169ccdfd833f8025c29734777612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sgEDzeE4rKh3OWAqAe2sGw.jpeg"/></div></div></figure><p id="6217" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">缺失值的百分比</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="033c" class="kh ki hi kd b fi kj kk l kl km">missing_values=df.isnull().sum()<br/>missing_values[missing_values&gt;0]/len(df)*100</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kq"><img src="../Images/ae122abaf68dc2f6b5951bd25a03da07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*bZ4opSsuSUC7lz7nXcn-uQ.jpeg"/></div></figure><p id="d089" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可视化缺失的值</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="8ed9" class="kh ki hi kd b fi kj kk l kl km">sns.heatmap(df.isnull(),yticklabels=False,cbar=False</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kr"><img src="../Images/c8626852c4dc77f5ae7879faf63ce6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*k6APoWX2M74V0ja_rPuV_A.jpeg"/></div></figure><p id="ca34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除不相关的列</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="8f27" class="kh ki hi kd b fi kj kk l kl km">df.drop(['PassengerId','Name','Ticket','Cabin'],axis=1,inplace=True)<br/>df.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/2f22e382145f89f6c7698bcf254e930e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7VDv7bKcf1k90F0m12c3-A.jpeg"/></div></div></figure><p id="2214" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">缺失值的填充</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="9024" class="kh ki hi kd b fi kj kk l kl km">df['Age']=df['Age'].fillna(df['Age'].mode()[0])</span><span id="8c14" class="kh ki hi kd b fi kt kk l kl km">df['Embarked']=df['Embarked'].fillna(df['Embarked'].mode()[0])<br/></span></pre><p id="e2b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码行中，我们检查了数据类型、缺失值，并删除了一些不相关的列，并用这些列(Age，Embarked)的最频繁(mode)值填充缺失值。</p><h2 id="b8f0" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated">异常值识别</h2><p id="5bf4" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">有不同的方式和方法来识别异常值，但是我们将只使用一些最流行的技术:</p><ul class=""><li id="60b1" class="ls lt hi ih b ii ij im in iq lu iu lv iy lw jc lx ly lz ma bi translated">形象化</li><li id="1e29" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">歪斜</li><li id="4538" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">四分位间距</li><li id="150a" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">标准偏差</li></ul><h2 id="7669" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated"><strong class="ak">可视化</strong></h2><p id="e1aa" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">可以使用不同的可视化方法来检测异常值，我们将使用:</p><ul class=""><li id="c5f7" class="ls lt hi ih b ii ij im in iq lu iu lv iy lw jc lx ly lz ma bi translated">箱线图</li><li id="6fcb" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">柱状图</li></ul><h2 id="9b96" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated">箱线图</h2><p id="59a2" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">boxplot是一个用于识别异常值的可视化工具，它显示统计观测值的分布，其主体分为四个部分；最低值和最高值(最小值和最大值)、25个百分点(第一个四分位数(Q1))、中间值(第50个百分点)、第75个百分点(第三个四分位数(Q3))。</p><p id="2946" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">异常值出现在箱线图的最小值和最大值之上或之下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/c1366037b853216c4cd873f3f2828345.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*n_2_Icep644OkokWg0UIxQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">towarsdatascience.com</figcaption></figure><p id="c723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码行绘制了“Fare”变量的箱线图。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="dfa6" class="kh ki hi kd b fi kj kk l kl km">sns.boxplot(df['Fare'],data=df)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/a536b36da674031453be95e06a9f60d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*SXQ1h4x7e4gYY8YV7YGjjg.jpeg"/></div></figure><p id="9c0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的方框图中，用箭头表示的黑色圆点表示变量中存在极值。</p><h2 id="1d97" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated">柱状图</h2><p id="a346" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">为了可视化数值变量的分布，直方图显示了这些变量分布的方向，异常值将出现在数据的整体分布之外。如果直方图向右倾斜或向左倾斜，则表明存在极值或异常值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mi"><img src="../Images/da39ecaa0eef416668f65f5e07874d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*F3Nb8vhhxP2VdUy8ehDWaw.png"/></div></figure><p id="534e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码绘制了“Fare”变量的直方图。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="dde6" class="kh ki hi kd b fi kj kk l kl km">df['Fare'].hist()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/f74b68c41f05c2130fefff8c40eea7f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*ZQ7z07ChJ6AHKKN2OvwkcA.jpeg"/></div></figure><p id="6994" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的直方图来看，直方图似乎分布在左侧，这也表明存在异常值。</p><h2 id="dd4e" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated"><strong class="ak">偏斜度</strong></h2><p id="fbc7" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">对于正态分布，偏斜值应在-1到1的范围内，任何偏离该值的重大变化都可能表明存在异常值。</p><p id="6c12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码打印了“Fare”变量的偏斜度值。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="22e5" class="kh ki hi kd b fi kj kk l kl km">print('skewness value of Age: ',df['Age'].skew())<br/>print('skewness value of Fare: ',df['Fare'].skew())</span></pre><p id="4480" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Out[ ]:</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="e898" class="kh ki hi kd b fi kj kk l kl km">skewness value of Age: 0.6577529069911331<br/>skewness value of Fare: 4.787316519674893</span></pre><p id="c2a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于正态分布，偏斜值应在-1到1的范围内，任何偏离该值的重大变化都表明存在极值或异常值。</p><p id="a964" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的代码来看，4.78的“Fare”偏斜值显示变量被正确地偏斜，表明存在异常值。</p><h2 id="4ae5" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated"><strong class="ak">四分位距(IQR) </strong></h2><p id="a082" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">四分位数范围是统计离差的度量，计算为第75个和第25个百分点之间的差值。四分位数将数据集分成四个相等的部分。分隔各部分的值称为第一、第二和第三四分位数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mk"><img src="../Images/d6e86c8c59fc98cf049f8ad684c2a88c.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/0*VwJg7xtr-H2Iox5r.jpg"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">ScienceDirect.com</figcaption></figure><p id="d398" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此代码显示了“票价”变量的四分位范围值。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="5407" class="kh ki hi kd b fi kj kk l kl km">Q1=df['Fare'].quantile(0.25)<br/>Q1=df['Fare'].quantile(0.75)<br/>IQR=Q3-Q1</span></pre><p id="80a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Out[]:</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="35ae" class="kh ki hi kd b fi kj kk l kl km">23.0896</span></pre><p id="6d96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码打印了异常值，并分别设置了“Fare”变量的第25和第75个百分位数，这也将用于异常值处理过程中的下限和上限。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="79b7" class="kh ki hi kd b fi kj kk l kl km">Q1 = df['Fare'].quantile(0.25)<br/>Q3 = df['Fare'].quantile(0.75)<br/>IQR = Q3 - Q1<br/>whisker_width = 1.5</span><span id="e44c" class="kh ki hi kd b fi kt kk l kl km">Fare_outliers = df[(df['Fare'] &lt; Q1 - whisker_width*IQR) | (df['Fare'] &gt; Q3 + whisker_width*IQR)]</span><span id="b3db" class="kh ki hi kd b fi kt kk l kl km">Fare_outliers.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/3f89e7d64a5ae833ae6a623b5b0c0e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SelETqaMVqAA9pWg-tDSA.jpeg"/></div></div></figure><h2 id="4dd9" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated"><strong class="ak">标准差</strong></h2><p id="15cc" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">标准差衡量一组值相对于数据平均值的变化量和离差，它显示数据的可变性分布。</p><p id="051b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">高标准偏差表示值高度分散，而低标准偏差表示值的变化或分散较低。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/f1eea8310622a6dc082d03732300ddff.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*V7QMkcunIei1vODXRDCr1A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">维基百科(一个基于wiki技术的多语言的百科全书协作计划ˌ也是一部用不同语言写成的网络百科全书ˌ 其目标及宗旨是为全人类提供自由的百科全书)ˌ开放性的百科全书</figcaption></figure><p id="0495" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码打印了异常值</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="b966" class="kh ki hi kd b fi kj kk l kl km">fare_mean = df['Fare'].mean()<br/>fare_std = df['Fare'].std()<br/>low= fare_mean -(3 * fare_std)<br/>high= fare_mean + (3 * fare_std)<br/>fare_outliers = df[(df['Fare'] &lt; low) | (df['Fare'] &gt; high)]<br/>fare_outliers.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mm"><img src="../Images/a957cbda855713a305ee2ee132a1623c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*T6t_qAEUQ_x_FaP3foxYqA.jpeg"/></div></figure><h2 id="cedf" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated"><strong class="ak">异常值处理</strong></h2><ul class=""><li id="6816" class="ls lt hi ih b ii ln im lo iq mn iu mo iy mp jc lx ly lz ma bi translated">地板和顶盖。</li><li id="c23f" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">修剪。</li><li id="49ce" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">用平均值、中值、众数或其他值替换异常值。</li></ul><h2 id="a32e" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated">地板和顶盖</h2><p id="80bf" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">在这种基于分位数的技术中，我们将对较低值进行下限(例如第25个百分位数)处理，对较高值进行上限(例如第75个百分位数)处理。这些百分点值将用于基于分位数的下限和上限。</p><p id="8b7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码通过删除“Fare”变量中低于第25个百分点和高于第75个百分点的所有值来删除异常值。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="0b2a" class="kh ki hi kd b fi kj kk l kl km">Q1 = df['Fare'].quantile(0.25)<br/>Q3 = df['Fare'].quantile(0.75)<br/>IQR = Q3 - Q1<br/>whisker_width = 1.5<br/>lower_whisker = Q1 -(whisker_width*IQR)<br/>upper_whisker = Q3 + whisker_width*IQR)<br/>df['Fare']=np.where(df['Fare']&gt;upper_whisker,upper_whisker,np.where(df['Fare']&lt;lower_whisker,lower_whisker,df['Fare']))</span></pre><p id="7800" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以使用箱线图或其他异常值识别方法来检查是否仍然存在异常值。</p><p id="08d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的箱线图显示不存在异常值。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="17ab" class="kh ki hi kd b fi kj kk l kl km">sns.boxplot(df['Fare'],data=df)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mq"><img src="../Images/875c07da10b270ab6d22103249208c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*4T8-_DeW9mGob_jNzUcA-Q.jpeg"/></div></figure><p id="3e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在将两个箱线图与异常值处理前后的箱线图进行比较。</p><div class="je jf jg jh fd ab cb"><figure class="mr ji ms mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/b49c53a5724ac05e8dbe3a72d019a15b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*eLGXSPhthW2dwuVwg5xOqg.jpeg"/></div></figure><figure class="mr ji mx mt mu mv mw paragraph-image"><img src="../Images/ddc695af5b339a48f2c1adae50090e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*7OtcVhR-V08doFBWAMlxVw.jpeg"/></figure></div><p id="c8e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">修剪</strong></p><p id="235f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个方法中，我们删除了所有的异常值，下面的代码行为所有的数据点创建了一个索引并删除了索引值。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="2761" class="kh ki hi kd b fi kj kk l kl km">Q1 = df['Fare'].quantile(0.10)<br/>Q3 = df['Fare'].quantile(0.90)<br/>IQR = Q3 - Q1<br/>whisker_width = 1.5<br/>lower_whisker = Q1 - (whisker_width*IQR)<br/>upper_whisker = Q3 + (whisker_width*IQR)<br/>index=df['Fare'][(df['Fare']&gt;upper_whisker)|(df['Fare']&lt;lower_whisker)].index</span><span id="4a04" class="kh ki hi kd b fi kt kk l kl km">df.drop(index,inplace=True)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es my"><img src="../Images/b978fd5c1691ecf24d335e383162a982.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*WRTwmWLAJcDqSFvEqvUZ3A.jpeg"/></div></figure><p id="fd08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将两个箱线图与异常值处理之前和之后的箱线图进行比较，我们仍然观察到有几个极值可能是新生成的。</p><div class="je jf jg jh fd ab cb"><figure class="mr ji mz mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/0a637540c36124e1dced75a7c9bc6250.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*gkxZ_wvawJAHVYZQPhXu7w.jpeg"/></div></figure><figure class="mr ji na mt mu mv mw paragraph-image"><img src="../Images/b978fd5c1691ecf24d335e383162a982.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*WRTwmWLAJcDqSFvEqvUZ3A.jpeg"/></figure></div><p id="b945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用平均值、中值、众数或其他值替换异常值</strong></p><p id="8fb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种技术中，我们用众数代替极值，您可以使用中值或平均值，但建议不要使用平均值，因为它很容易受到异常值的影响。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nb"><img src="../Images/b53b77eb2959abd3de85985f7c17f154.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*owFYFjjNW1eg8KqBN-4T7w.jpeg"/></div></figure><p id="b294" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在还将两个箱线图与异常值处理前后的箱线图进行比较。</p><div class="je jf jg jh fd ab cb"><figure class="mr ji nc mt mu mv mw paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/a2910ca2e50ea934e9a003b629d5b8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*vAMeiqjkrSQgVh9j4wRZvA.jpeg"/></div></figure><figure class="mr ji nd mt mu mv mw paragraph-image"><img src="../Images/b6f3e42ae93c60f64197e73b19f84699.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*CvOSYFsXsLYpzablcFbV0A.jpeg"/><figcaption class="jp jq et er es jr js bd b be z dx ne di nf ng translated">magtech dihub</figcaption></figure></div><h1 id="9ce8" class="nh ki hi bd ku ni nj nk ky nl nm nn lc no np nq lf nr ns nt li nu nv nw ll nx bi translated">结论</h1><p id="7d91" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">在这篇博客中，您已经掌握了一些简单的概念和异常值识别的不同方法，这些方法使用了不同的技术，如可视化、偏斜度、四分位距(IQR)和标准差，以及清理异常值的不同方法，如修剪、铺地板和加盖，以及用平均值、中值或模式替换异常值，您可以应用这些方法来成功识别异常值。</p><h2 id="d064" class="kh ki hi bd ku kv kw kx ky kz la lb lc iq ld le lf iu lg lh li iy lj lk ll lm bi translated">参考</h2><p id="ae3a" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">[1]维基百科，inter quartile _ range<em class="ny">(2012年5月)，https://en.wikipedia.org/wiki/Interquartile_range</em><a class="ae nz" href="https://en.wikipedia.org/wiki/Interquartile_range" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>