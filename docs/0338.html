<html>
<head>
<title>Untold recipe for Web Scraping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络抓取的未知配方</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/untold-recipe-for-web-scraping-77493e4213c4?source=collection_archive---------25-----------------------#2021-01-12">https://medium.com/analytics-vidhya/untold-recipe-for-web-scraping-77493e4213c4?source=collection_archive---------25-----------------------#2021-01-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c798" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">出于本教程的目的，我们将跟随<a class="ae jc" href="https://en.e-podroznik.pl/" rel="noopener ugc nofollow" target="_blank"> en.e-podroznik.pl </a>网站进行演示。本文展示的技术是独立于编程语言的，可以在任何支持Web抓取的编程语言中使用。</p><p id="a325" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">很多时候，你要寻找的数据已经摆在面前，你不需要进入HTML xpaths、CSS选择器来提取这些数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d2ac94c36240f28dff54cd75f3e6eb4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJjYaeQieqtkY1MS3VrZaQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">网页抓取配方</figcaption></figure><p id="c8d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，让我们快速浏览一下我们今天的目标网站及其数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/684fdac080dfd7f3f6b6862c88245626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oghS-FR6CzeMxmc02zzQUw.png"/></div></div></figure><p id="bf9f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天大多数网站都有搜索栏或其他输入栏的自动完成功能。</p><p id="35e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设我们对Autocomplete中作为建议返回的数据感兴趣，就像上面的例子一样。</p><p id="eb31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在很多情况下，你所要做的就是检查Inspect下的Network选项卡，查看网站发出的请求，以获取你想要的数据。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/e99a3373174c9c9216c6dc6459c8379d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhfSUvkDCwmlIFlXNjnzeA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">分析网络选项卡</figcaption></figure><p id="7863" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要遵循的步骤:</p><ol class=""><li id="6587" class="jv jw hh ig b ih ii il im ip jx it jy ix jz jb ka kb kc kd bi translated">按Ctrl + Shift + I或F12在浏览器中输入Inspect。</li><li id="3405" class="jv jw hh ig b ih ke il kf ip kg it kh ix ki jb ka kb kc kd bi translated">切换到Inspect中的Networks选项卡，然后刷新页面。</li></ol><p id="d0ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您会注意到在页面加载时有很多请求。</p><p id="65cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">分析每个请求的预览，以检查任何这些请求中是否存在感兴趣的数据。为了避免在分析每个请求时浪费大量时间，试着过滤掉明显的请求，如广告、图像文件、谷歌跟踪请求等。</p><p id="ee55" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最好的情况是数据是JSON格式，就像上面的例子一样。</p><p id="7303" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在分析Headers选项卡，在我们的程序中复制请求。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/acdc92d29d733b676856188cea3c9bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BmDoZUMtHTJhKhpSpcZgQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">请求标题</figcaption></figure><p id="58d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里复制请求的要点是。</p><ol class=""><li id="4438" class="jv jw hh ig b ih ii il im ip jx it jy ix jz jb ka kb kc kd bi translated">请求URL</li><li id="c774" class="jv jw hh ig b ih ke il kf ip kg it kh ix ki jb ka kb kc kd bi translated">请求方法</li><li id="6d33" class="jv jw hh ig b ih ke il kf ip kg it kh ix ki jb ka kb kc kd bi translated">格式数据</li></ol><p id="5047" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这种提取有用数据的技术并不局限于这个自动完成的例子，还可以用于其他各种实例，我们将在后续的文章中讨论这些实例。</p><p id="818e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我最喜欢的编程语言中的请求复制如下所示。</p><h1 id="0a79" class="kk kl hh bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">计算机编程语言</h1><p id="2bb8" class="pw-post-body-paragraph ie if hh ig b ih li ij ik il lj in io ip lk ir is it ll iv iw ix lm iz ja jb ha bi translated">代码:</p><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="7c93" class="ls kl hh lo b fi lt lu l lv lw">#importing modules<br/>import requests<br/>import json</span><span id="6538" class="ls kl hh lo b fi lx lu l lv lw">#url and form_data here are as per the above example.<br/>url = 'https://www.e-podroznik.pl/public/suggest.do'<br/>form_data = {"query" : "Lo", "type" : "AUTO", "requestKind" : "SOURCE", "countryCode" : "gb", "forcingCountryCode" : "true"} </span><span id="0e48" class="ls kl hh lo b fi lx lu l lv lw">response = requests.post(url, data = form_data)<br/><br/>json_data = json.loads(response.text)<br/>#json_data holds the data in Dictionary for our use.</span></pre><p id="3fa7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/d1f7cc744e8c9d495bf972bb29c76bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFr6qHtoHFSHeFwXlMiQxQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">JSON格式的必需数据。</figcaption></figure></div></div>    
</body>
</html>