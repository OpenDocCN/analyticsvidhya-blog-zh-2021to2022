<html>
<head>
<title>Create Profile Page using Microsoft Graph API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Microsoft Graph API创建个人资料页面</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-profile-page-using-microsoft-graph-api-280f57149f09?source=collection_archive---------28-----------------------#2021-01-10">https://medium.com/analytics-vidhya/create-profile-page-using-microsoft-graph-api-280f57149f09?source=collection_archive---------28-----------------------#2021-01-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie if ig"><p id="2a09" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">Microsoft Graph是一个RESTful web API，使您能够访问Microsoft云服务资源。注册应用程序并获得用户或服务的身份验证令牌后，您可以向Microsoft Graph API发出请求。</p></blockquote><p id="259a" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">先决条件</strong>:</p><p id="fd8e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">【azure主动订阅</p><p id="955a" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">熟悉将微软认证库或<code class="du jj jk jl jm b">msal</code>集成到应用程序中(可选)</p><p id="c350" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><a class="ae jn" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app" rel="noopener ugc nofollow" target="_blank">向微软身份平台注册的应用程序</a></p><p id="5756" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">从<a class="ae jn" href="https://github.com/VMoose/Msal_Active-Directory" rel="noopener ugc nofollow" target="_blank">这里</a>下载或克隆启动代码。</p><p id="3e2a" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">第一步:</strong>开始，打开<strong class="ik hi"><em class="ij">config . p</em></strong><em class="ij">y</em>文件，在那里输入应用客户端ID、客户端密码和redirect_path。<a class="ae jn" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app" rel="noopener ugc nofollow" target="_blank"> <strong class="ik hi">这个</strong> </a>应该可以帮你入门。</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jo"><img src="../Images/43e6bc845cfa85e9c15ce88b74eea842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WAHrOHuesXIvEmU8DK-COQ.png"/></div></div></figure><p id="ea41" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">步骤2: </strong>在本地运行应用程序。如果一切顺利，您应该能够看到:</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/b1c4dccd7f46b0a27bc0c7ba2fca183f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GstgwRRA9r7zL2ViAikxEw.png"/></div></div></figure><p id="8b36" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">在尝试登录Microsoft时，您应该看到:</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/f518982116ee36b99723fad51bb31bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfrqpiDY8bZX8iATLp0gHw.png"/></div></div></figure><p id="837e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">步骤3 </strong>:来自Azure active directory的认证令牌保存在缓存中，可以通过在<strong class="ik hi"> views.py </strong>中添加以下函数从缓存中提取</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kc"><img src="../Images/301757102748faf70a28c8dfed417c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4hsOK9YYy90dufTUUNzMg.png"/></div></div></figure><p id="1466" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">第四步:</strong>在<strong class="ik hi"> config.py </strong>中添加变量，从Microsoft Graph API中获取用户信息。</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kd"><img src="../Images/0083d7d4f645cac76f5c9c1d9b24a7b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJGtqZ7xlJz3DyChRSYCFw.png"/></div></div></figure><p id="6f75" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">第五步</strong>:将此函数粘贴到<strong class="ik hi"> views.py </strong>中，从API中获取数据</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ke"><img src="../Images/754ffaff9748e98f2e0715d681cd0ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZ1Hc1Uj0wPNYaWTX-6Siw.png"/></div></div></figure><p id="b456" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">步骤6 </strong>:使用下面的函数将图形API中的图像保存到本地</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kd"><img src="../Images/e6f2c95f584da5c786566758ce700921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a7xLRLNEfN0WMNpl6YHRMw.png"/></div></div></figure><p id="f4a1" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">第7步</strong>:将数据传递给<strong class="ik hi">索引模板</strong>，登录后显示。</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ke"><img src="../Images/ccf81bab7fd4200df76fb1ef3c82dd34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfL6SfNQwOwViAXAf4Dd3g.png"/></div></div></figure><p id="52be" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">第八步</strong>:显示<strong class="ik hi">指标模板</strong>中的数据</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ke"><img src="../Images/407ea596bf7b26c2356851407695887c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xopu8kw5hM3mkzp3dglSfA.png"/></div></div></figure><p id="4df1" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">最终的输出应该是这样的</p><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kf"><img src="../Images/c0be9877e29ace1189bdf56a3ff1bdc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i67biOpGJdMYzgu81WluZg.png"/></div></div></figure><p id="8def" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">有用链接:</strong></p><ol class=""><li id="f2d8" class="kg kh hh ik b il im ip iq jg ki jh kj ji kk jf kl km kn ko bi translated"><a class="ae jn" href="https://developer.microsoft.com/en-us/graph/graph-explorer" rel="noopener ugc nofollow" target="_blank">https://developer.microsoft.com/en-us/graph/graph-explorer</a>—了解更多关于图形API的信息</li><li id="53e9" class="kg kh hh ik b il kp ip kq jg kr jh ks ji kt jf kl km kn ko bi translated">从<a class="ae jn" href="https://github.com/VMoose/Msal_Active-Directory" rel="noopener ugc nofollow" target="_blank">这里</a>下载或克隆完整的代码。</li></ol></div></div>    
</body>
</html>