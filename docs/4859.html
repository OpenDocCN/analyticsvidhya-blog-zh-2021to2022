<html>
<head>
<title>Case Study: Optimization in Python Using Gekko</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">案例研究:使用Gekko优化Python</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/optimization-b26b098061f8?source=collection_archive---------0-----------------------#2022-05-08">https://medium.com/analytics-vidhya/optimization-b26b098061f8?source=collection_archive---------0-----------------------#2022-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hg hh ez fb hi hj er es paragraph-image"><div class="ab fe cl hk"><img src="../Images/562b9d0663791c0328ce404b4a36a3d0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Mc7NKO4F44Zd-5Cl9NBMjg.jpeg"/></div></figure><div class=""/><div class=""><h2 id="25e6" class="pw-subtitle-paragraph im ho hp bd b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd dx translated">问题范围</h2></div><figure class="je jf jg jh fd hj er es paragraph-image"><div class="ab fe cl hk"><img src="../Images/cf1770172e46a56f2d103b1c0074d1f3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*duluoxAVg9Uy9aO2Nt1Tzg.png"/></div></figure><p id="d7ea" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在，让我们深入了解一下，在上述暗示的条件下，通过制造适当的产品单位来最大限度地提高产品销售的最佳解决方案是什么！</p><p id="8f15" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">第一，进口‘盖柯’。如果您还没有安装它——pip从终端安装gekko，如下所示:</p><figure class="je jf jg jh fd hj er es paragraph-image"><div class="ab fe cl hk"><img src="../Images/f21e7474a769596523246f8e67021bba.png" data-original-src="https://miro.medium.com/v2/format:webp/1*rvnMC6inaJ9zBE2w_dL8cw.png"/></div></figure><p id="3b0f" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">接下来，将包导入到您的笔记本中，并调用模型实例。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="40eb" class="kj kk hp kf b fi kl km l kn ko">from gekko import gekko</span><span id="a830" class="kj kk hp kf b fi kp km l kn ko">#Create model instance<br/>m = gekko()</span></pre><p id="f3b9" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">让我们从指定变量开始:-</p><ul class=""><li id="72dd" class="kq kr hp jk b jl jm jo jp jr ks jv kt jz ku kd kv kw kx ky bi translated">片剂_单位:生产的片剂数量</li><li id="38cc" class="kq kr hp jk b jl kz jo la jr lb jv lc jz ld kd kv kw kx ky bi translated">smartph_units:生产的智能手机数量。</li></ul><p id="6339" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">此外，根据合计工厂生产时间和产品销售额，我们还需要2个变量</p><ul class=""><li id="1394" class="kq kr hp jk b jl jm jo jp jr ks jv kt jz ku kd kv kw kx ky bi translated">prod _ constr:这指定了每个产品的数量(单位数*生产时间)</li><li id="c0ec" class="kq kr hp jk b jl kz jo la jr lb jv lc jz ld kd kv kw kx ky bi translated">total_sales:公司将获得的最大销售金额</li></ul><p id="8a85" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们将在下面的模型方程中加入这些变量，以便更好地理解目的。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="a389" class="kj kk hp kf b fi kl km l kn ko">#Initiate variables<br/>tablet_units = m.Var(value=1)<br/>smartph_units = m.Var(value=1)<br/>prod_constr = m.Var()<br/>total_sales = m.Var()</span><span id="8f46" class="kj kk hp kf b fi kp km l kn ko">#Production time to create each product type<br/>tablet_time = 1.5<br/>smartph_time = 2</span><span id="f452" class="kj kk hp kf b fi kp km l kn ko">#Sale price of each product stored as a constant value<br/>tablet_price = 900<br/>smartph_price = 1100</span></pre><p id="8e08" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在，假设所有的产品都卖出去了，让我们来计算数学约束。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="5a9b" class="kj kk hp kf b fi kl km l kn ko">#Minimum units the stores need for each product<br/>m.Equation(tablet_units&gt;=500)<br/>m.Equation(smartph_units&gt;=200)</span><span id="2a39" class="kj kk hp kf b fi kp km l kn ko">&lt;gekko.gekko.EquationObj at 0x184f83a4220&gt;</span></pre><p id="4448" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">上述约束是根据商店需要的最小产品数量计算的。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="4346" class="kj kk hp kf b fi kl km l kn ko">#Production constraint<br/>m.Equation(prod_constr== (tablet_units*tablet_time)+(smartph_units*smartph_time))<br/>m.Equation(prod_constr&lt;=2999.5)</span><span id="3cd4" class="kj kk hp kf b fi kp km l kn ko">&lt;gekko.gekko.EquationObj at 0x184f83a4730&gt;</span></pre><p id="a907" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">生产约束规定了在最大可能工厂生产时间内生产每件产品所花费的总时间。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="543e" class="kj kk hp kf b fi kl km l kn ko">#Total sales <br/>m.Equation(total_sales==(tablet_units*tablet_price)+(smartph_units*smartph_price))</span><span id="4305" class="kj kk hp kf b fi kp km l kn ko">&lt;gekko.gekko.EquationObj at 0x184f83a4e50&gt;</span></pre><p id="df71" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">最后但也是最重要的一点是，计算每个存储产品的总销售额，以计算公司销售额最大化的目标。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="450b" class="kj kk hp kf b fi kl km l kn ko">#Setting the objective function<br/>m.Obj(-total_sales)<br/>m.options.SOLVER = 1</span></pre><p id="7022" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">注意:目标函数默认设置为最小化，因此我们指定'-total_sales '，因为我们的目标是最大化。</p><p id="6e94" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">m.options.SOLVER:将求解器设置为APOPT以获得整数解，因为我们应该将产品单位设置为整数。</p><p id="8465" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们现在都准备好了！还是叫解决方案吧！</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="bc08" class="kj kk hp kf b fi kl km l kn ko">m.solve()</span><span id="14fd" class="kj kk hp kf b fi kp km l kn ko">apm 45.114.158.17_gk_model0 &lt;br&gt;&lt;pre&gt; ----------------------------------------------------------------<br/> APMonitor, Version 1.0.1<br/> APMonitor Optimization Suite<br/> ----------------------------------------------------------------<br/> <br/> <br/> --------- APM Model Size ------------<br/> Each time step contains<br/>   Objects      :            0<br/>   Constants    :            0<br/>   Variables    :            7<br/>   Intermediates:            0<br/>   Connections  :            0<br/>   Equations    :            6<br/>   Residuals    :            6<br/> <br/> Number of state variables:              7<br/> Number of total equations: -            5<br/> Number of slack variables: -            3<br/> ---------------------------------------<br/> Degrees of freedom       :             -1<br/> <br/> * Warning: DOF &lt;= 0<br/> ----------------------------------------------<br/> Steady State Optimization with APOPT Solver<br/> ----------------------------------------------<br/> <br/> Iter    Objective  Convergence<br/>    0 -6.70000E+05  2.99950E+03<br/>    1 -1.72412E+06  0.00000E+00<br/>    2 -1.77970E+06  2.22045E-16<br/>    3 -1.77970E+06  2.22045E-16<br/>    4 -1.77970E+06  2.22045E-16<br/> Successful solution<br/> <br/> ---------------------------------------------------<br/> Solver         :  APOPT (v1.0)<br/> Solution time  :   1.290000000153668E-002 sec<br/> Objective      :   -1779700.00000000     <br/> Successful solution<br/> ---------------------------------------------------</span></pre><h2 id="81ab" class="kj kk hp bd le lf lg lh li lj lk ll lm jr ln lo lp jv lq lr ls jz lt lu lv lw bi translated">最终解决</h2><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="d6b7" class="kj kk hp kf b fi kl km l kn ko">print('Total Tablet Units :' + str(tablet_units.value))<br/>print('Total Smartphone Units:' +str(smartph_units.value))<br/>print('Maximized total sales:' + str(total_sales.value))</span><span id="791d" class="kj kk hp kf b fi kp km l kn ko">Total Tablet Units :[1733.0]<br/>Total Smartphone Units:[200.0]<br/>Maximized total sales:[1779700.0]</span></pre><p id="4896" class="pw-post-body-paragraph ji jj hp jk b jl jm iq jn jo jp it jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">正如我们所看到的，最佳解决方案是生产1733台平板电脑和200部智能手机，以在业务问题的特定约束下获得1779700美元的优化销售额。</p></div></div>    
</body>
</html>