<html>
<head>
<title>Column Sorting with Custom Field in Google Data Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Data Studio中带有自定义字段的列排序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/column-sorting-with-custom-field-in-google-data-studio-c3234bacb1a9?source=collection_archive---------0-----------------------#2021-09-02">https://medium.com/analytics-vidhya/column-sorting-with-custom-field-in-google-data-studio-c3234bacb1a9?source=collection_archive---------0-----------------------#2021-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9e95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好。在这个故事中，我将解释如何在Data Studio中对分类数据进行排序。比如逐日排序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3e53f1fff31420a31df33a7d733625a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndeogcJteHc2CF1iH5ddzA.png"/></div></div></figure><p id="e94e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用Python的seaborn包中的tips数据集。您可以从<a class="ae jp" href="https://docs.google.com/spreadsheets/d/1JecQoiuBy9iXXd8mg6Bztqk2LKIfEqmcG-meicEg1tY/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>或<a class="ae jp" href="https://github.com/mwaskom/seaborn-data/blob/master/tips.csv" rel="noopener ugc nofollow" target="_blank">这里</a>访问数据集。</p><p id="24e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个故事中，问题是把日子按正确的顺序放在x轴上。如果您尝试创建一个条形图并使用日列对日进行排序，那么您会发现问题，日列的值将被随机化。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5014a130b0c6c94d682b7ffe5e0ba3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLd8BKLZh0ii5V3z6pIY9A.png"/></div></div></figure><p id="6312" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不知道Google Data Studio是什么，我可以告诉你它简直就是Google的免费数据可视化工具。你可以从<a class="ae jp" href="https://support.google.com/datastudio/answer/6283323?hl=en" rel="noopener ugc nofollow" target="_blank">这里</a>获得更多信息。</p><h1 id="ccea" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">让我们从谷歌数据工作室开始</h1><p id="1dec" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我将前往<a class="ae jp" href="https://datastudio.google.com/" rel="noopener ugc nofollow" target="_blank"> Data Studio </a>并点击“创建空白报告”按钮。之后，我选择谷歌电子表格作为数据源。我正在将小费数据集上传到我的电子表格中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/6621d71b19e56e7620b1c5a3094ae2b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7-K2wGboveNk2iFVwjzmg.png"/></div></div></figure><p id="d8ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您启动报告时，Data Studio会添加一个与您的数据相关的简单表格，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/3fbfc918123025171028efeb02d4cd29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2Ee6OUTNH43vrHLVsrENw.png"/></div></div></figure><p id="f213" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我要对报告做些小改动。我将删除表格，更改报告样式并添加标题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/34240078f1aa8d3bfad9ea03d828298d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbDruFNWYdi1Yqoudlo70w.png"/></div></div></figure><h2 id="6273" class="ku jr hi bd js kv kw kx jw ky kz la ka iq lb lc ke iu ld le ki iy lf lg km lh bi translated">创建图表</h2><p id="6dd3" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">现在，我将通过单击“Add a chart”下拉菜单来添加一个条形图。我会选择堆积柱形图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/137e08d5717e98af61182fd111b9c22c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GAJ-WoXo_8ulx58BQYjLlw.png"/></div></div></figure><p id="06e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建图表后，我将设置维度和指标。你可以在右边栏看到我设置的指标和维度。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/879607caeca05087fd74c62b63a1929c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7VoOx7vBJqM7OwpiLmaGvw.png"/></div></div></figure><p id="5f4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我想强调一点。正如我们从上面的图片中看到的，我为排序设置了日列。但是我们现在在这个图表上看到的并不是正确的排序。在这种情况下，我们应该使用“自定义字段”。我们将使用谷歌应用程序脚本创建一个自定义字段。实际上，在这个故事中，我不会深究Google Apps脚本，我只会介绍Apps脚本中的“Case”结构。如果你愿意，你可以从<a class="ae jp" href="https://developers.google.com/apps-script" rel="noopener ugc nofollow" target="_blank">这里</a>获得更多关于应用程序脚本的信息。</p><h2 id="b12a" class="ku jr hi bd js kv kw kx jw ky kz la ka iq lb lc ke iu ld le ki iy lf lg km lh bi translated">创建自定义字段</h2><p id="194b" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我将单击右侧边栏中的“添加字段”按钮。我将把这个代码块，给这个字段命名为“排序日列”并保存。现在，我们为应用程序脚本创建了一个公式。</p><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="febf" class="ku jr hi lj b fi ln lo l lp lq">CASE  <br/>  WHEN day = 'Thur' THEN 1  <br/>  WHEN day = 'Fri' THEN 2  <br/>  WHEN day = 'Sat' THEN 3  <br/>  WHEN day = 'Sun' THEN 4  <br/>  ELSE 0 <br/>END</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/ed34360baee75c895c795996219e25e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2I9PCoUClWqaOeAmnn6vQw.png"/></div></div></figure><p id="f09d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我们在case块中创建了条件语句。如果日期变量是“星期四”,公式将返回1，如果是“Fri ”,将返回2，依此类推。我们将它设置为排序字段。图表将使用此字段对变量进行排序。是的，我们已经按照我们想要的分类了。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/b4375f7af57dd50ef6bc21dffaad1e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQVFz57NpMa3zfXuyjjBmA.png"/></div></div></figure><p id="083e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你喜欢它，它是有帮助的。</p><p id="8561" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">亲切的问候。</p></div></div>    
</body>
</html>