<html>
<head>
<title>Your Top 100 Songs 2020 in Python and Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python和Plotly版2020年100首热门歌曲</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/your-top-100-songs-2020-in-python-and-plotly-2e803d7e2990?source=collection_archive---------9-----------------------#2021-03-04">https://medium.com/analytics-vidhya/your-top-100-songs-2020-in-python-and-plotly-2e803d7e2990?source=collection_archive---------9-----------------------#2021-03-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="3191" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">我查看了Spotify去年生成的“2020年你最喜欢的歌曲”播放列表，并把它放到了Python中。这是我到目前为止发现的关于我的音乐品味。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/d38c80b8bae3b3f0fe8e5deab64944e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0-z41d6BZeFLzqvs"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">在<a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jm" href="https://unsplash.com/@mohammadmetri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mohammad Metri </a>拍摄的照片</figcaption></figure><p id="82ee" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi kj translated"><span class="l kk kl km bm kn ko kp kq kr di"> Y </span>你可能会注意到，在年底，你的朋友会把他们那一年在Spotify上的顶级艺术家和热门歌曲发布到他们的社交媒体上。我做到了。不管你是喜欢你朋友的音乐品味(还是觉得你朋友没品味)，你都忍不住到处看到#SpotifyWrapped。</p><p id="551f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你从未使用过Spotify，也不熟悉#SpotifyWrapped，基本上，它是Spotify在每年年底发布的一项功能，向你展示一年中最难忘的聆听时刻。此外，他们还生成了一个全年播放次数最多的歌曲的播放列表。去年它被称为“2020年你的最佳歌曲”。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ks"><img src="../Images/1edf5e0b2974fedd77582e4c67fb85e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RZgsdVLw3jJmDypMEdgk-w.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">Spotify为每位用户创建了一个播放列表，其中包含全年播放次数最多的100首歌曲。</figcaption></figure><h1 id="5aaf" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">我的Spotify打包了</h1><p id="7224" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">老实说，除了我喜欢世界上最著名的乐队<a class="ae jm" href="https://en.wikipedia.org/wiki/The_Beatles" rel="noopener ugc nofollow" target="_blank"><em class="lq"/></a>和我听了太多伤感的&amp;醇厚的音乐之外，我不认为我听的音乐有什么可夸耀的。大概吧。至少，这是我目前为止的假设。这是Spotify去年对我的发现。</p><div class="ix iy iz ja fd ab cb"><figure class="lr jb ls lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/7cfad2dc1083c933f211f3f32c56467a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*3N-Bkmjq0gsTXCEn4FZ6JQ.jpeg"/></div></figure><figure class="lr jb ls lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/160bc793c2b685867d7c468a6cad5911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*HLIkE88qdwBrw75CMU3-Fw.jpeg"/></div><figcaption class="ji jj et er es jk jl bd b be z dx lx di ly lz translated">2020年我的Spotify顶级艺术家和歌曲</figcaption></figure></div><p id="bbaa" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">甲壳虫乐队是我最喜欢的艺术家，这可能并不奇怪；自从五六年前我发现它们以来，它们一直都是这样。</p><p id="d08f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我实际上发现非常有趣的事实是，尽管是我的顶级艺术家，他们的歌曲没有占据我的前五名歌曲的任何位置。我的猜测是，尽管我听了很多Fab Four乐队的歌，但我没有重复听过任何一首特定的歌。我光明正大地听完了他们的全部唱片。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ma"><img src="../Images/8cac5d960c6dc81967c601a863182ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYAl_eSHQXo9eM_xy-mq6Q.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">"帅哥们来了。"—鲍勃·博尼斯档案馆的甲壳虫乐队</figcaption></figure><p id="d269" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">所以，我的#SpotifyWrapped说够了。让我们进入我将播放列表放入Python的要点。</p><h1 id="a9f1" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">代码和数据</h1><p id="9f62" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">只是提醒一下，我已经在Github上放了一个笔记本，里面包含了这里展示的所有代码。可以自己下载试试。链接在本文末尾，所以向下滚动到底部。</p><p id="4570" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">另外，快速说明一下，你在2020年12月的收听活动不包括在Spotify Wrapped或“你的2020年热门歌曲”播放列表中。所以，即使我玩了很多<a class="ae jm" href="https://www.youtube.com/watch?v=EXLgZZE072g" rel="noopener ugc nofollow" target="_blank"><em class="lq"/></a><em class="lq"/>和<a class="ae jm" href="https://www.youtube.com/watch?v=fF3Q24CX2C4" rel="noopener ugc nofollow" target="_blank"> <em class="lq">麦卡特尼三世</em> </a>，它们也不算，因为那两张专辑是12月才发行的。</p><h2 id="623a" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">使用Spotify API</h2><p id="ebe2" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">我使用了一个名为<a class="ae jm" href="https://spotipy.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"><em class="lq">Spotify库来访问他们的API。这是一个用于Spotify Web API的轻量级Python库。有了Spotify，你可以完全访问Spotify平台提供的所有音乐数据。您可以按照文档中的步骤在您的环境中安装它。</em></a></p><p id="b1d4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在我们开始之前，您必须通过访问这个<a class="ae jm" href="https://developer.spotify.com/dashboard/applications" rel="noopener ugc nofollow" target="_blank"> Spotify开发者仪表板</a>获得自己的客户端ID，并创建一个应用程序(您必须先登录)。我把我的应用程序命名为“音乐分析”。如果你点击它，你会被引导到一个页面，在那里你可以为你的应用程序复制你的客户端ID和客户端密码。</p><div class="ix iy iz ja fd ab cb"><figure class="lr jb mp lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/7442a37201a3dd51a23ae707f67ade59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*NNpuBf7Yqfs5QThOhNw7Sg.png"/></div></figure><figure class="lr jb mq lt lu lv lw paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/d1b732ce0994877dad22f27f6af8871f.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*Cl8c3xULItYBi4iU3HIFfg.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx mr di ms lz translated">Spotify开发者仪表板</figcaption></figure></div><p id="3ee6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在我们开始工作之前还有一件事。你必须获得你的Spotify播放列表URI，你可以通过进入你的Spotify桌面应用程序并复制它，如下图所示。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mt"><img src="../Images/a5256db7518b7a16cce38fc2c7601e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQS6AAt7T7_uU-q0MhB0WA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">从Spotify桌面获取“2020年你最喜欢的歌曲”播放列表的URI</figcaption></figure><p id="bb64" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我希望到目前为止你觉得事情很容易。现在我们已经有了我们的<em class="lq">客户端id、客户端秘密</em>和Spotify播放列表URI，我们可以直接进入代码了。开始了。</p><h2 id="a032" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">获取数据</h2><p id="a674" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">首先，你需要设置你的变量。你必须用你之前得到的URI替换播放列表URI，用你自己的替换CLIENT_ID和CLIENT_SECRET。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="4e2e" class="mb ku hh mv b fi mz na l nb nc">import spotipy<br/>from spotipy.oauth2 import SpotifyClientCredentials</span><span id="d608" class="mb ku hh mv b fi nd na l nb nc">playlist_uri = 'spotify:playlist:37i9dQZF1EMh2NooMxxxxx'<br/>spotify = spotipy.Spotify(client_credentials_manager=SpotifyClientCredentials(CLIENT_ID, CLIENT_SECRET))</span></pre><p id="a35c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">然后下面的代码将获取您的播放列表数据。您获得的数据将是JSON格式的，因此为了便于阅读，我们将其转换为pandas数据框。你会看到一个包含一行的数据框，它是你的播放列表的数据。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="ab29" class="mb ku hh mv b fi mz na l nb nc">import pandas as pd</span><span id="70bf" class="mb ku hh mv b fi nd na l nb nc">playlist = spotify.playlist(playlist_uri)<br/>pd.json_normalize(playlist)</span></pre><p id="df8c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">记住只是你的播放列表数据，而不是播放列表中每首歌的数据。为此，我们必须用下面的代码获取每个项目(歌曲/音轨，如果你想调用它的话)。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="f1c6" class="mb ku hh mv b fi mz na l nb nc">playlist_items = spotify.playlist_items(playlist_uri)<br/>playlist_items</span></pre><p id="6b92" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">上面的结果仍然是JSON格式的，所以让我们将它转换成一个数据框，并更改它们的几个列名，以便于阅读。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="4ef6" class="mb ku hh mv b fi mz na l nb nc">df = pd.json_normalize(playlist_items['items'])<br/>filter_cols = [col for col in df if col.startswith('track')]<br/>df = df[filter_cols]<br/>df.columns = [col.replace("track.","") for col in df]<br/>df.head()</span></pre><p id="4ea9" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果您愿意，可以将此数据框保存为CSV文件，这样您就不需要在每次打开代码时再次运行代码从Spotify获取数据。</p><p id="cc81" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果您想知道该数据框中有哪些数据，可以查看它们的列。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ne"><img src="../Images/543457a6318d5ad3d3799e90f5e83942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vyFq2zHmzbcoYsWtwERMKg.png"/></div></div></figure><p id="dacd" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">正如你在上面的截图中看到的，这个数据框包含了该曲目的专辑信息(专辑名称、专辑艺人、发行日期)、曲目本身信息(曲目时长、曲目名称、流行度等)以及其他相关信息。</p><p id="3ce1" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">下面就来看看我的前10首歌吧。艺术家的数据有点棘手，因为他们仍然在JSON中，但这里有曲目名称和专辑名称。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nf"><img src="../Images/c0c700eb9a01d1394515778006133283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zyFojXzXdNFQoMIIK6tAg.png"/></div></div></figure><p id="0cfc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你没有注意到，歌曲是按照你的播放频率排序的。所以一首歌的排名/位置越高，意味着你播放它的次数比位置较低的歌多。在这种情况下，我播放<strong class="jp hi">女士A </strong>(第一位)的《<a class="ae jm" href="https://www.youtube.com/watch?v=rbFj2t9d7Z8" rel="noopener ugc nofollow" target="_blank">如果我永远忘不了你</a>怎么办》比我播放<strong class="jp hi">英格丽德·安德烈斯</strong>(第四位)<a class="ae jm" href="https://www.youtube.com/watch?v=j_A8Zjwr9m0" rel="noopener ugc nofollow" target="_blank">比我的心多</a>。顺便说一下，这两首歌都很棒！</p><p id="b182" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在我们来看看艺术家们的数据。就像我之前说的，这很棘手，因为它在JSON中。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ng"><img src="../Images/79d83785a5741f271f576fedd94e8587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCYGZTrAVIFsZXMpDB1IKQ.png"/></div></div></figure><p id="f00b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">有两个选项，您可以从“album.artists”列获取艺术家的信息，也可以从“artists”列获取。正如你在上面的截图中看到的，它们略有不同。《放逐》这首歌属于泰勒·斯威夫特的《民间传说》专辑，但这首歌本身也有本·艾弗的特色。这就是为什么在“album.artists”一栏中，你只能看到泰勒的名字，但在“artists”一栏中，你还能看到Bon Iver的名字。</p><p id="b236" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">出于简单的原因，我将获得艺术家的信息，但只有主要的艺术家，这是首先提到的。在上面的例子中，这意味着我将只得到泰勒斯威夫特，而离开邦艾弗。我将获得每个艺术家的追随者数量、音乐流派和受欢迎程度的信息。你通过收集每个艺术家的URI来做到这一点。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="e765" class="mb ku hh mv b fi mz na l nb nc">data = []</span><span id="d174" class="mb ku hh mv b fi nd na l nb nc">for a in df['artists']:<br/>    result = pd.json_normalize(a)<br/>    name = result['name']<br/>    uri = result['uri']<br/>    <br/>    artist_info = spotify.artist(uri[0])<br/>    followers = artist_info['followers']['total']<br/>    genres = artist_info['genres']<br/>    popularity = artist_info['popularity']<br/>    <br/>    data.append((name[0], followers, genres, popularity))<br/>    <br/>df1 = pd.DataFrame(data, columns = ('artist', 'followers', 'genres', 'artist_popularity'))</span></pre><p id="6e83" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在，您可以为播放列表中的每个艺术家获得一个整洁的数据框。我还会添加一些关于每首歌的名字和受欢迎程度的信息。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="7e38" class="mb ku hh mv b fi mz na l nb nc">df1['song'] = df['name']<br/>df1['song_popularity'] = df['popularity']</span></pre><p id="84c8" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你可能会看到有几位艺术家多次出现在播放列表上(泰勒·斯威夫特、甲壳虫乐队及其独唱、平克·弗洛伊德和奎恩当然也是)。我想要一个包含艺术家等级的数据框，没有重复的信息。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="8aae" class="mb ku hh mv b fi mz na l nb nc">df1['rank'] = range(1, len(df1)+1)<br/>unique_artists = df1[['artist', 'followers', 'rank', 'artist_popularity']].drop_duplicates(subset=['artist'], keep='first')<br/>unique_artists</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nh"><img src="../Images/2f4055fcdd5b832cb8260780fe72b13d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*osLUMenrrI7ov5-K3VrUoQ.png"/></div></div></figure><p id="a154" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">好了，我们已经得到了我们需要的数据，现在让我们做有趣的部分！可视化！</p><h1 id="74ad" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">阴谋营救！</h1><p id="9005" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">最近工作的时候，我一直在和<a class="ae jm" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi">一起玩</strong> </a>，我想让别人知道这个库有多棒。以前，我是Matplotlib的多年用户。一开始，向Plotly的转变很令人困惑，但我最终习惯了。希望你自己试用后也会喜欢。</p><h2 id="4870" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">我听的艺人有多少粉丝？</h2><p id="d21f" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">我的第一张图是关于我的顶级艺术家的追随者数量。你可能会想，我是听当红艺人的还是听不出名的？嗯，答案就在这里。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="67d3" class="mb ku hh mv b fi mz na l nb nc">import plotly.express as px<br/>import plotly.offline as pyo <br/>pyo.init_notebook_mode()</span><span id="9952" class="mb ku hh mv b fi nd na l nb nc">fig = px.scatter(unique_artists, y="followers", text="artist",<br/>                 hover_name="artist")<br/>fig.update_layout({"title": "Followers of Artists on My Spotify Top 100",<br/>                   "xaxis": {"title":"artists"},<br/>                   "yaxis": {"title":"Artist's Followers"}})</span><span id="9c10" class="mb ku hh mv b fi nd na l nb nc">fig.update_traces(textposition='top center')<br/>fig.update_traces(marker=dict(size=10, color='forestgreen',<br/>                              line=dict(width=2,color='DarkSlateGrey')),<br/>                  selector=dict(mode='markers'))<br/>fig.show()<br/>fig.write_image("pics/followers.png",format="png", width=1000, height=600, scale=3)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ni"><img src="../Images/b62354caf2030b41820594a835999804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgzNSW_pvsHZUHk_fdhjCg.png"/></div></div></figure><p id="b98b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我听的大部分艺人粉丝都不到500万，只有极少数粉丝超过1000万。更多的追随者并不总是等于受欢迎，但你可以知道哪些艺术家更受欢迎。</p><h2 id="7c75" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">流派分布怎么样？</h2><p id="0201" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">我对上述问题的初步猜测是，我可能没有听足够多的不同音乐流派。我倾向于坚持古典摇滚和乡村音乐，因为我有时会有点过于柔和圆润。</p><p id="2527" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">您将每个艺术家的所有流派收集到一个列表中，如下面的代码所示。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="9a17" class="mb ku hh mv b fi mz na l nb nc">genres =[]<br/>for row in df1['genres']:<br/>    for r in row:<br/>        genres.append(r)<br/>genres = pd.Series(genres)</span></pre><p id="5938" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">图来了。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="7f07" class="mb ku hh mv b fi mz na l nb nc">import plotly.graph_objs as go</span><span id="ac60" class="mb ku hh mv b fi nd na l nb nc">top_genres = genres.value_counts().nlargest(20)</span><span id="500d" class="mb ku hh mv b fi nd na l nb nc">fig = go.Figure([go.Bar(x=top_genres.values, <br/>                        y=top_genres.index,<br/>                        orientation='h',<br/>                        text=top_genres.values, <br/>                        textposition='outside',<br/>                        marker_color='rebeccapurple')])<br/>fig.update_layout(title_text='Most Frequent Music Genres Found on My Spotify Top 100',<br/>                  yaxis=dict(autorange="reversed")<br/>)<br/>fig.show()<br/>fig.write_image("pics/most-genres.png",format="png", width=1000, height=600, scale=2)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/e951f8713f5db94d538a7b8a69172577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6vCVn5vLNTrNc3LfsDxNw.png"/></div></div></figure><p id="9d8c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我还试着用同样的数据做了一个单词云。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="aba3" class="mb ku hh mv b fi mz na l nb nc">import matplotlib.pyplot as plt<br/>from collections import Counter<br/>from wordcloud import WordCloud<br/>%matplotlib inline<br/>    <br/>genre_counter = Counter(genres)</span><span id="03a8" class="mb ku hh mv b fi nd na l nb nc">wordcloud = WordCloud(width = 2500, height = 1500, random_state=10, background_color='black', colormap='Set2').generate_from_frequencies(genre_counter)<br/>plt.figure(figsize=(25, 15))<br/>plt.imshow(wordcloud) <br/>plt.axis("off")</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nk"><img src="../Images/54b86db4be27624e6bd4794349d92e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sVQk11aMLnDq9g6r0gOkWg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">我最常听的流派，从经典摇滚，流行，到男孩乐队和好莱坞</figcaption></figure><p id="037a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">谈到Spotify提供的音乐流派，他们的数据科学家创建了一个很酷的网站，可以分解和探索每种音乐流派。看看everynoise.com的<a class="ae jm" href="http://everynoise.com/" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="43d2" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">我的前100名里哪些艺人的歌最多？</h2><p id="ea98" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">我们已经知道我的头号艺人是披头士，但是他们的歌有多少真的在我的前100名里？</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="314a" class="mb ku hh mv b fi mz na l nb nc">a = df1['artist'].value_counts().nlargest(10)</span><span id="49c4" class="mb ku hh mv b fi nd na l nb nc">fig = go.Figure([go.Bar(x=a.index, <br/>                        y=a.values, <br/>                        text=a.values, <br/>                        textposition='auto',<br/>                        marker_color='seagreen')])<br/>fig.update_layout(title_text='Artists with Most Songs on My Top 100')<br/>fig.show()<br/>fig.write_image("pics/most-songs.png",format="png", width=1000, height=600, scale=2)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/9f1e9907c830dd4ddc65b52f06489f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qqau_bW2_KCmpvSkrolbzg.png"/></div></div></figure><p id="7cfe" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">显然，<strong class="jp hi">泰勒·斯威夫特</strong>用16首歌统治了我的播放列表！同时，甲壳虫乐队在我的播放列表中只有四首歌曲。但是考虑到约翰·列侬和保罗·麦卡特尼每人都有五首歌(更不用说翅膀了)，我想可以肯定地说我真的离不开那些来自利物浦的男孩，嗯？</p><h2 id="a090" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">这些歌曲有多受欢迎？</h2><p id="964c" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">下一张图，我想知道我听过的前10位歌手的歌曲有多受欢迎。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="bc87" class="mb ku hh mv b fi mz na l nb nc">a_idx = df1['artist'].value_counts().nlargest(10).index<br/>artist_album = df1[df1['artist'].isin(a_idx)]</span><span id="9525" class="mb ku hh mv b fi nd na l nb nc">fig = px.scatter(artist_album, x="artist", y="song_popularity",<br/>                hover_data=["song", "song_popularity"])<br/>fig.update_layout({"title": "Song Popularity from 10 Artists",<br/>                   "xaxis": {"title":"artists", "tickangle":-30},<br/>                   "yaxis": {"title":"popularity (0-100)"}})</span><span id="5b34" class="mb ku hh mv b fi nd na l nb nc">fig.update_traces(marker=dict(size=10, color='lightseagreen',<br/>                              line=dict(width=2,color='DarkSlateGrey')),<br/>                  selector=dict(mode='markers'))</span><span id="dd1c" class="mb ku hh mv b fi nd na l nb nc">fig.show()<br/>fig.write_image("pics/song-popularity.png",format="png", width=1000, height=600, scale=2)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/0bc21473d0e3c3f81cbeff056ef5d8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbnSri1cB50YL9hMQe2pxg.png"/></div></div></figure><p id="cb26" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">当谈到泰勒·斯威夫特的音乐时，我显然倾向于只听他们最受欢迎的歌曲，我承认我可能比其他人更喜欢听《情人》和《T21》。对于女王和女士，我倾向于听他们更受欢迎的歌曲，虽然我也会探索一下他们不太受欢迎的歌曲。</p><p id="1ad8" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">然而，当谈到愚人花园乐队或T2时，我听的歌曲范围更广。比如关于麦卡特尼的音乐，我相信大多数人都听说过麦卡特尼I的代表作《T4》【也许我很惊讶】，但似乎没有多少人知道麦卡特尼II的《T6】瀑布(这首歌的流行度评分不到30)。我知道我参加派对要迟到了，因为我去年才发现那首好歌！</p><p id="026a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">与此同时，在<strong class="jp hi">平克·弗洛伊德</strong>那条线上下边的那个小点，就是“<a class="ae jm" href="https://www.youtube.com/watch?v=SPBfx4_WT-w" rel="noopener ugc nofollow" target="_blank">朱丽亚的梦</a>”。我不知道这首歌不是真的受欢迎，相对于上面的另外两个点，“<a class="ae jm" href="https://www.youtube.com/watch?v=hjpF8ukSrvk" rel="noopener ugc nofollow" target="_blank">希望你在这里</a>”和“<a class="ae jm" href="https://www.youtube.com/watch?v=zz8frWcmthA" rel="noopener ugc nofollow" target="_blank">墙里的另一块砖，Pt。2”</a>。我发现有趣的是，我听的歌曲和我听的Pink Ployd的歌曲之间真的有很大的差距。</p><h2 id="70a5" class="mb ku hh bd kv mc md me kz mf mg mh ld jw mi mj lf ka mk ml lh ke mm mn lj mo bi translated">我最喜欢的音乐年份是哪一年？</h2><p id="4ba9" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">现在我们要做一个图表，把我听得最多的歌曲的发行年份可视化。</p><p id="2ace" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你需要先从专辑发行日期中得到年份，然后列出它们。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="4ff2" class="mb ku hh mv b fi mz na l nb nc">df['release_year'] = pd.to_datetime(df['album.release_date']).dt.year<br/>by_year = df['release_year'].value_counts()<br/>idx = list(range(min(by_year.index), max(by_year.index)+1))<br/>s = by_year.reindex(idx, fill_value=0)</span></pre><p id="e56a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">接下来，我们将这些数据放入条形图中。</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="f782" class="mb ku hh mv b fi mz na l nb nc">fig = go.Figure([go.Bar(x=s.index, <br/>                        y=s.values,<br/>                        marker_color='indianred')])<br/>fig.update_layout(title_text='Top Songs from Each Year')<br/>fig.show()<br/>fig.write_image("pics/release-year.png",format="png", width=1000, height=600, scale=2)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/1b8532999856f43b8dec181f0a539f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8DvC_5Mzh59JLVeGNts4g.png"/></div></div></figure><p id="3c61" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这是我喜欢向我的朋友指出的地方，他们经常指责我只听老歌，他们错了。我的前100首播放列表中的大多数歌曲都是2020年的。总之，尽管我喜欢经典和老歌，我也听了很多新歌。</p><p id="674b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">为了简单起见，我还会做一个条形图，不是按年，而是按十年，因为毕竟我们喜欢用那个十年的音乐来定义时间，对吗？</p><pre class="ix iy iz ja fd mu mv mw mx aw my bi"><span id="81f5" class="mb ku hh mv b fi mz na l nb nc">df['decade'] = df['release_year'].apply(lambda x: int(np.floor(x / 10) * 10))<br/>d = df['decade'].value_counts().sort_index()</span><span id="c556" class="mb ku hh mv b fi nd na l nb nc">fig = go.Figure([go.Bar(x=d.index, <br/>                        y=d.values, <br/>                        text=d.values, <br/>                        textposition='auto',<br/>                        marker_color='indianred')])<br/>fig.update_layout(title_text='Top Songs from Each Decade')<br/>fig.show()<br/>fig.write_image("pics/release-decade.png",format="png", width=1000, height=600, scale=2)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/9599cbbb900ee9efd02a131181a028de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JMyh-TK1LT8MwYDKaHANcA.png"/></div></div></figure><p id="e57c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">当你把数据按十年分类时，你会发现我的前100首歌大多是从2000年开始的。我得告诉我的朋友，我的音乐品味还没那么老。</p><p id="8787" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">只是有点吹毛求疵，一些新的歌曲翻唱可能会有翻唱发行的年份，而不是歌曲的原始年份。例如，<strong class="jp hi">保罗·麦卡特尼</strong>的《美丽的夜晚》最初是在1997年从专辑<em class="lq">燃烧的馅饼</em>中发布的，但这首歌在2020年的重制中被重新发布。这首特别的歌曲被列为2020年的歌曲。但是，这种情况很少发生，所以我可以忽略它。大部分2010年代和2020年代的歌曲确实来自那几十年。</p><p id="ae50" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我认为我在本文中向您展示的代码和图表已经足够了。希望你从中找到一些有帮助的东西。</p><h1 id="9386" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">结论</h1><p id="caf6" class="pw-post-body-paragraph jn jo hh jp b jq ll ii js jt lm il jv jw ln jy jz ka lo kc kd ke lp kg kh ki ha bi translated">从这篇文章中我实际上可以得出的结论是，我需要听和探索更多的音乐流派！Spotify是我发现新艺术家和流派的一个很好的工具，我很喜欢它。我希望在2021年，你也能发现许多伟大的歌曲，并与他们一起创造新的，伟大的回忆。#SpotifyWrapped2021再见！</p></div><div class="ab cl nl nm go nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ha hb hc hd he"><p id="3ef6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你可以点击下面我的Github链接，查看并下载我在本文中使用的全部代码。</p><div class="ns nt ez fb nu nv"><a href="https://github.com/catris25/myspotify-top100-2020" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab dw"><div class="nx ab ny cl cj nz"><h2 class="bd hi fi z dy oa ea eb ob ed ef hg bi translated">catris25/myspotify-top100-2020</h2><div class="oc l"><h3 class="bd b fi z dy oa ea eb ob ed ef dx translated">通过在GitHub上创建一个帐户，为catris25/myspotify-top100-2020开发做出贡献。</h3></div><div class="od l"><p class="bd b fp z dy oa ea eb ob ed ef dx translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj jg nv"/></div></div></a></div></div></div>    
</body>
</html>