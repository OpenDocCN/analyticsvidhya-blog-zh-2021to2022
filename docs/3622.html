<html>
<head>
<title>How to Deal with Missing Values?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">价值观缺失怎么处理？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-deal-with-missing-values-600b70b79918?source=collection_archive---------12-----------------------#2021-07-13">https://medium.com/analytics-vidhya/how-to-deal-with-missing-values-600b70b79918?source=collection_archive---------12-----------------------#2021-07-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/b810d2cae39e650847c02f0a51607257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0mr2Bbm5gqni6hW9.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae hu" href="https://www.displayr.com/deal-missing-values-cluster-analysis/" rel="noopener ugc nofollow" target="_blank">图片来自Displayr博客</a></figcaption></figure><div class=""/><p id="29fc" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">回答关于如何处理缺失值的可怕问题</em></p><p id="2e43" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di"> W </span> <strong class="iw hy"> hy </strong>我们到底需要处理数据中缺失的值吗？为什么我们需要担心这个？模型不会忽略它们吗？</p><p id="600c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当建立机器学习模型时，我们需要意识到数据中存在的空值和缺失值，因为在大多数情况下，模型不知道如何处理它们，并将导致问题或错误。</p><p id="a574" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js">熊猫</em> </strong>为我们提供了一种使用<em class="js">快速检查缺失值的方法。isna() </em>方法，使用<em class="js">删除列。dropna() </em>方法，并用。<em class="js"> fillna() </em>法。</p><figure class="kc kd ke kf fd hj"><div class="bz dy l di"><div class="kg kh l"/></div></figure><figure class="kc kd ke kf fd hj"><div class="bz dy l di"><div class="kg kh l"/></div></figure><figure class="kc kd ke kf fd hj"><div class="bz dy l di"><div class="kg kh l"/></div></figure><h1 id="e5d7" class="ki kj hx bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated"><strong class="ak">使用Scikit-learn的SimpleImputer处理缺失值</strong></h1><blockquote class="lg"><p id="9443" class="lh li hx bd lj lk ll lm ln lo lp jr dx translated">“SimpleImputer是scikit-learn的一个软件包，可以使用常数值或列平均值、中值，甚至最常见的值，对缺失值进行静态插补。”</p></blockquote><p id="37b4" class="pw-post-body-paragraph iu iv hx iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">简单估算逻辑</p><p id="13b3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"><em class="js">simple imputr的</em> </strong>逻辑真的很简单。它取该列的平均值，并用结果对其进行估算。在下面的示例中，它将取C列中所有值的平均值，这些值是；1 + 2 + 9 + 20.这里，缺少的值将是8。</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lv"><img src="../Images/a074c9147c08041ce40d9a610f5f4474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdEm4c6EH6v4avpbxrh3XQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae hu" href="https://www.data-science-infinity.com/" rel="noopener ugc nofollow" target="_blank">安德鲁·琼斯的《数据科学无限》</a></figcaption></figure><p id="819a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它通过使用<strong class="iw hy"><em class="js">simple imputr()</em></strong>方法实现，该方法采用以下参数:</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lw"><img src="../Images/f188be1a3b8099bbc2a1afc1141fb106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPIlBjCsz_JjydLoctLNBA.png"/></div></div></figure><p id="318f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">详见</em> <a class="ae hu" href="https://scikit-learn.org/stable/modules/impute.html#impute" rel="noopener ugc nofollow" target="_blank"> <em class="js">用户指南</em> </a>。</p><figure class="kc kd ke kf fd hj"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="0708" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在第15行和第18行中，它是单独运行的。但是有一个使用<em class="js">的scikit-learn方法。fit_transform </em>可以同时进行拟合和变换，如第24行所示。</p><p id="67a2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js">注意</em> </strong> : <strong class="iw hy">仅在训练数据上使用</strong> <em class="js"> fit_transform </em>，因为您希望您的插补规则基于您的训练数据。如果您分别在训练和测试数据集中使用插补规则，您最终会得到不同的插补规则，这意味着您的训练和测试结果不完全可比。如果您想要对测试数据和新数据使用相同的逻辑或规则，请分别使用fit和transform。</p><h1 id="bb9e" class="ki kj hx bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated"><strong class="ak">使用Scikit-learn的KNNImputer处理缺失值</strong></h1><blockquote class="lg"><p id="c809" class="lh li hx bd lj lk ll lm ln lo lp jr dx translated">“scikit-learn库中的KNNImputer使用k-nearest-neighbors算法，通过利用在其他可用的数值特征上看起来相似的其他数据点来动态地估算缺失的数值。</p><p id="6887" class="lh li hx bd lj lk ll lm ln lo lp jr dx translated">它假设其他看起来相似的数据点将对丢失的值给出更好的估计。"</p></blockquote><p id="6e11" class="pw-post-body-paragraph iu iv hx iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated"><strong class="iw hy"> KNNImputer的逻辑</strong></p><p id="6b27" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">与简单估算器不同，<strong class="iw hy"> <em class="js"> KNNImputer的</em> </strong>逻辑会考虑其他数字列的值。在前面的同一个例子中，<em class="js"> KNNImputer </em>不仅从列C中获取值，还将从列A和列B中获取值。</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lv"><img src="../Images/a074c9147c08041ce40d9a610f5f4474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdEm4c6EH6v4avpbxrh3XQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae hu" href="https://www.data-science-infinity.com/" rel="noopener ugc nofollow" target="_blank">安德鲁·琼斯的《数据科学无限》</a></figcaption></figure><p id="26df" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在引擎盖下发生的是，它根据它们的值绘制空间中的值。(<em class="js">见下图</em>)</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lx"><img src="../Images/62a9b12fd229c84a6fc2c1a344b4455a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hhccj-x5OF9hpSUnh6Ccfw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae hu" href="https://www.data-science-infinity.com/" rel="noopener ugc nofollow" target="_blank">安德鲁·琼斯的《数据科学无限》</a></figcaption></figure><p id="147d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">左图绘制了来自第3行第A列和第3行第b列的数据点。它还记录了C列的值，即图上的9，并对所有数据进行了相同的处理，如右图所示。</p><p id="d84e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">根据您为k值指定的内容，该算法将查找k个最近邻，并对c列取平均值来估计缺失值。</p><p id="8d90" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果我们用k值为4。它将取4个最近的数据点，并对其进行平均，以获得缺失值(* <em class="js">见下图左图)</em>如果我们使用值为2的k，它将取两个最近的数据点(* <em class="js">见下图右图</em>)。</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lx"><img src="../Images/732e5e2c73c567d587004b9f2c49cf7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGAjEYr0rdZO4yL21lEF3w.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae hu" href="https://www.data-science-infinity.com/" rel="noopener ugc nofollow" target="_blank">安德鲁·琼斯的《数据科学无限》</a></figcaption></figure><p id="a173" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js">中的<strong class="iw hy"><em class="js">k</em></strong>k-nearest-neighbors</em></strong>表示我们要评估的邻居的数量，以猜测丢失数据点的值可能是多少。</p><p id="e93c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">关于如何给k赋值或决定给k赋什么值，有很多问题。在Scikit-learn中，默认值是5，但您可以根据需要将它更改为任何值。该算法用于插补目的的前提是，数据点越接近，越有可能更好地代表未知或缺失值。因此，您在右图中看到的值14.5可能比左图中的值8更适合估算，因为它使用的数据点在其他要素或数据列中更相似。</p><p id="693a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js"> KNNImputer() </em> </strong>方法采用以下参数:</p><figure class="kc kd ke kf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ly"><img src="../Images/739e6872e0b7325739047a12814958de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9zj4YpxtUVUCdYt9m1Pmw.png"/></div></div></figure><p id="c8c8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">详见</em> <a class="ae hu" href="https://scikit-learn.org/stable/modules/impute.html#knnimpute" rel="noopener ugc nofollow" target="_blank"> <em class="js">用户指南</em> </a> <em class="js">。</em></p><figure class="kc kd ke kf fd hj"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="8044" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js">注</em> </strong>:一般来说，如果您不只是删除包含缺失值的行并尝试估算缺失值，我建议尝试上面讨论的<em class="js"> Scikit-learn </em>方法之一来进行估算，而不是仅仅使用<em class="js"> Pandas </em>，因为<em class="js"> Pandas </em>没有拟合和转换方法。</p></div><div class="ab cl lz ma go mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ha hb hc hd he"><p id="e0cb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy"> <em class="js">参考文献:</em> </strong></p><p id="96a7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">要了解更多关于数据科学的信息，请点击下面的链接查看安德鲁·琼斯的《数据科学无限》:</p><div class="hg hh ez fb hi mg"><a href="https://data-science-infinity.teachable.com/?affcode=716157_jcwmqdhh" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab dw"><div class="mi ab mj cl cj mk"><h2 class="bd hy fi z dy ml ea eb mm ed ef hw bi translated">数据科学无限</h2><div class="mn l"><h3 class="bd b fi z dy ml ea eb mm ed ef dx translated">以正确的方式学习正确的内容，并提供无限的支持和指导，我致力于帮助您成为一名…</h3></div><div class="mo l"><p class="bd b fp z dy ml ea eb mm ed ef dx translated">data-science-infinity.teachable.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu ho mg"/></div></div></a></div></div></div>    
</body>
</html>