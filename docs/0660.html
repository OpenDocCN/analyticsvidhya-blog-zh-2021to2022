<html>
<head>
<title>Create a simple blog website in django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在django创建一个简单的博客网站</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-a-simple-blog-website-in-django-f091bb1d718c?source=collection_archive---------0-----------------------#2021-01-26">https://medium.com/analytics-vidhya/create-a-simple-blog-website-in-django-f091bb1d718c?source=collection_archive---------0-----------------------#2021-01-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="5533" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是时候把我的文学博客转换成科技博客了。我受到了我的如何创建股票相关矩阵的启发，它得到了你们很多人的回应。因此，让我们开始一个多部分的技术博客系列！</p><p id="1463" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了实现这个目标，我使用了Django，这是一个构建在Python之上的可扩展web框架，对此我已经很熟悉了。这篇文章是写给有相似目标的人的，他们不熟悉Django、Python和/或web框架，正在寻找项目来适应我们所处的新现实。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="30c1" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">设置</h1><p id="d533" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">我们将设置Django、您的项目目录和您的虚拟环境。您将需要以下版本的以下内容:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="e1f1" class="kv jk hh kr b fi kw kx l ky kz">pipenv (version 2019.11.26)<br/>python (version 3.7.5)</span></pre><p id="f5be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在这里下载pipenv <a class="ae la" href="https://pipenv-fork.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">。如果您正在进行一系列全新的安装，您可以在这里下载Python </a><a class="ae la" href="https://www.python.org/downloads/release/python-365/" rel="noopener ugc nofollow" target="_blank">和pip(为Python安装软件包的软件包处理程序)</a><a class="ae la" href="https://pip.pypa.io/en/stable/installing/" rel="noopener ugc nofollow" target="_blank">这里下载</a>。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="d24a" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">安装DJANGO</h1><p id="8938" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">这将使用那个版本的Python把那个版本的Django安装到您的虚拟环境中。</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="2a17" class="kv jk hh kr b fi kw kx l ky kz">pipenv --python 3.6.5 install django==3.0.6</span></pre></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="cce0" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">建立姜戈</h1><p id="c228" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">在CMD上导航到您想要创建项目的位置，并在那里输入以下命令:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="38d3" class="kv jk hh kr b fi kw kx l ky kz">django-admin startproject Project_Name</span></pre><p id="46fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在终端中导航到该文件夹，然后按<code class="du lb lc ld kr b">ls</code>确认您在正确的位置。您应该会看到Django项目中的一个关键文件<code class="du lb lc ld kr b">manage.py</code>。</p><p id="9998" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行以下命令来迁移变更，这是在Django中同步项目文件的必要命令:<code class="du lb lc ld kr b">python manage.py migrate</code>。您应该在终端中看到一堆文件正在提交。现在不要担心那个。下一次运行<code class="du lb lc ld kr b">python manage.py runserver</code>使其启动并运行。</p><p id="b1b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该在终端中看到URL是<a class="ae la" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000/ </a>。在您的浏览器中，亲自查看您的项目已初始化！您应该会看到这个默认屏幕:</p><figure class="km kn ko kp fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es le"><img src="../Images/282b3a76a5e7b233b2b8e352931fc2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cchpX6MY2LpwXzHg.png"/></div></div></figure><p id="16af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你看到它起作用了，你就可以定制你的项目了！如果你没有看到，请评论，我会回答你的任何问题。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="5299" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建超级用户</h1><p id="89e5" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">你需要创建一个管理员用户来使用Django Admin来管理你的博客文章等等。在终端中，运行以下命令并按照提示创建该用户:</p><p id="f5ad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lb lc ld kr b">python manage.py createsuperuser</code>。</p><p id="e0f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该看到您的用户帐户已成功创建。现在，在服务器运行的情况下，导航到<a class="ae la" href="http://127.1.000.8000/admin" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/Admin</a>，登录并查看管理视图。</p><p id="6701" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">成功登录后，您应该会看到以下内容:</p><figure class="km kn ko kp fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es le"><img src="../Images/3b880fb6ca72ba349547988923621c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IRfaKtlrlYnZKLW-.png"/></div></div></figure></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="f9e2" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">运行在不同的端口上</h1><p id="ce79" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">如果您想要更改服务器的端口，那么您需要将它作为命令行参数传递:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="ec3a" class="kv jk hh kr b fi kw kx l ky kz">$ python manage.py runserver 1602</span></pre><p id="16a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">IP地址也是如此:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="441d" class="kv jk hh kr b fi kw kx l ky kz">$ python manage.py runserver 0:8000</span></pre><p id="3ee6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将在IP地址0.0.0.0上运行</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="6416" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建第一个应用程序</h1><p id="7471" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">好的，我们是在这里上应用程序开发课程吗，不好意思，但是这些是我们在Django的术语。Django的工作基于应用程序的概念，你可以把它看作是你网站内部的微功能。在一个完全构建的项目中，你网站的博客可能就是这样一个应用。你想让应用程序能够理想地跨项目即插即用，这样你就可以回收代码。这样，假设将来你创建了另一个网站，你希望一个完整的博客能够弹出到网站的一个子域中。</p><p id="c51e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">也就是说，我将假设您想要以下应用程序作为默认:一个主页(博客文章列表视图)和一个关于页面。实际上,“关于”视图是一个更加静态的视图，不一定需要动态更新，但有一天可能会！运行以下命令来创建这些应用程序。</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="5b7f" class="kv jk hh kr b fi kw kx l ky kz">python manage.py startapp blog<br/></span></pre></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="ea58" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">创建视图</h1><p id="1141" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">让我们写第一个视图。你需要打开你家<code class="du lb lc ld kr b">/</code>目录下的<code class="du lb lc ld kr b">views.py</code>文件。让我们创建一个简单的视图如下:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="3dc6" class="kv jk hh kr b fi kw kx l ky kz">from django.http import HttpResponsedef index(request):<br/>    return HttpResponse("Welcome to home page.")</span></pre><p id="1e0c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了调用视图，我们需要将它映射到一个URL。让我们创建一个新文件(<code class="du lb lc ld kr b">urls.py</code>)，并放入以下代码:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="9d23" class="kv jk hh kr b fi kw kx l ky kz">from django.urls import pathfrom . import viewsurlpatterns = [<br/>    path('', views.index, name='index'),<br/>]</span></pre><p id="6c3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们已经为blog应用程序设置了URL，但是它没有连接到主Django应用程序。因此，让我们进入主<code class="du lb lc ld kr b">urls.py</code>文件，如下所示:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="fab7" class="kv jk hh kr b fi kw kx l ky kz">from django.contrib import admin<br/>from django.urls import include, pathurlpatterns = [<br/>    path('blog/', include('blog.urls')),<br/>    path('admin/', admin.site.urls),<br/>]</span></pre><p id="2077" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们已经将一个视图连接到了URL，您可以在浏览器中查看它了。只需重新运行开发服务器即可:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="c074" class="kv jk hh kr b fi kw kx l ky kz">$ python manage.py runserver</span></pre><p id="954d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在浏览器中转到<a class="ae la" href="http://localhost:8000/blog/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/blog/</a>，您应该会看到文本“欢迎来到主页”。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="b03b" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">模型</h1><p id="d106" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">我们将为博客应用程序定义模型。我们将创建一个模型，并将其标记为“文章”或“博客文章”(您可以自行决定)。Python类代表了这些概念。编辑<code class="du lb lc ld kr b">blog/models.py</code>文件，如下所示:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="da17" class="kv jk hh kr b fi kw kx l ky kz">from django.db import modelsclass Post(models.Model):<br/>    title= models.CharField(max_length=200)<br/>    content= models.CharField()<br/>    pub_date = models.DateTimeField('date published')</span></pre><p id="2192" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以看到每个类都继承了<code class="du lb lc ld kr b">Model</code>的类。每个模型都有几个类变量，每个类变量代表模型中的一个数据库字段。要获得更多关于<code class="du lb lc ld kr b">Model</code>类的信息，我建议你参考<a class="ae la" href="https://docs.djangoproject.com/en/3.1/intro/tutorial02/" rel="noopener ugc nofollow" target="_blank">Django官方文档。</a></p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="e38b" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">激活模型</h1><p id="46f3" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">这一小段模型代码给了Django很多信息。有了它，Django可以:</p><ul class=""><li id="8224" class="lm ln hh ig b ih ii il im ip lo it lp ix lq jb lr ls lt lu bi translated">为此应用程序创建数据库架构。</li><li id="e0de" class="lm ln hh ig b ih lv il lw ip lx it ly ix lz jb lr ls lt lu bi translated">创建一个Python数据库访问API来访问<code class="du lb lc ld kr b">Post</code>对象。</li></ul><p id="b7ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要进行迁移，只需运行以下命令:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="f5d0" class="kv jk hh kr b fi kw kx l ky kz">$ python manage.py makemigrations blog</span></pre><p id="65ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该会看到类似如下的输出:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="108b" class="kv jk hh kr b fi kw kx l ky kz">Migrations for 'blog':<br/>  blog/migrations/0001_initial.py<br/>    - Create model Post</span></pre><p id="23ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过运行<code class="du lb lc ld kr b">makemigrations</code>，您告诉Django您已经对您的模型做了一些更改。</p><p id="e4ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要最后一次迁移数据库，运行<code class="du lb lc ld kr b">migrate</code>命令，如下所示:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="1218" class="kv jk hh kr b fi kw kx l ky kz">$ python manage.py migrate <br/></span></pre></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h2 id="91ce" class="kv jk hh bd jl ma mb mc jp md me mf jt ip mg mh jx it mi mj kb ix mk ml kf mm bi translated">模板和视图</h2><p id="0a8e" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">Django作为一个框架利用了<a class="ae la" href="https://www.javatpoint.com/django-mvt" rel="noopener ugc nofollow" target="_blank">模型视图模板(MVT) </a>软件设计模式。在那个链接中有更多的细节，但是基本上当你访问一个URL时，Django会检查匹配那个URL的模式，以及它需要什么样的模板和模型来呈现给浏览器。它用模型的数据呈现模板(想想页面结构)。</p><h1 id="39ac" class="jj jk hh bd jl jm mn jo jp jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg bi translated">如何创建您的模板</h1><p id="081e" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">首先，在<code class="du lb lc ld kr b">blog/views.py</code>中创建一个新视图:</p><pre class="km kn ko kp fd kq kr ks kt aw ku bi"><span id="5448" class="kv jk hh kr b fi kw kx l ky kz">def post(request, post_id):<br/>    return HttpResponse("You're looking at post %s." % question_id)</span></pre><p id="9446" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在配置<code class="du lb lc ld kr b">urls.py</code>来使用这个视图:</p><figure class="km kn ko kp fd lf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="2874" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<code class="du lb lc ld kr b">/blog/&lt;post_id&gt;/</code>查看您的浏览器。如果您在管理面板中添加了帖子，将会显示此ID。现在，让我们创建一个真正显示博客文章的视图。在<code class="du lb lc ld kr b">blog/views.py</code>中，我们添加以下代码:</p><figure class="km kn ko kp fd lf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="7d5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是这里有一个问题:页面的设计在视图中是硬编码的。为了纠正这一点，我们将创建一个模板。首先，在您的<code class="du lb lc ld kr b">blog</code>目录中创建一个名为<code class="du lb lc ld kr b">templates</code>的目录。姜戈会在那里寻找模板。</p><p id="8df7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将以下代码放入名为<code class="du lb lc ld kr b">index.html</code>的模板中:</p><figure class="km kn ko kp fd lf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="6b1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们更新<code class="du lb lc ld kr b">blog/views.py</code>中的<code class="du lb lc ld kr b">index</code>视图，以使用模板:</p><figure class="km kn ko kp fd lf"><div class="bz dy l di"><div class="ms mt l"/></div></figure></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="2f52" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">结论</h1><p id="c9e9" class="pw-post-body-paragraph ie if hh ig b ih kh ij ik il ki in io ip kj ir is it kk iv iw ix kl iz ja jb ha bi translated">我希望你能从这本初学者指南中学到很多，用Python在Django中设置一个简单的web应用程序。我写这篇文章的目的是向您介绍Python中Django的基础知识，从而增强您的好奇心并从那里开始尝试。</p><p id="6016" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">欢迎在评论中留下你的想法。谢谢，祝编码愉快！</p></div></div>    
</body>
</html>