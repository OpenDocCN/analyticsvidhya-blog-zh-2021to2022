<html>
<head>
<title>A Beginners Guide to MicroPython</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MicroPython初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-beginners-guide-to-micropython-d91132532da2?source=collection_archive---------6-----------------------#2021-02-18">https://medium.com/analytics-vidhya/a-beginners-guide-to-micropython-d91132532da2?source=collection_archive---------6-----------------------#2021-02-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f5a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jc translated">近年来，ython的人气激增。如今，从开发运维到统计分析到数据科学，甚至在桌面软件中，它都被广泛使用。但是很长一段时间以来，Python在一个领域的使用明显缺失。从事微控制器工作的专业人员还没有采用这种语言。<strong class="ig hi"> MicroPython </strong>吸引了来自其他平台的专业人士和爱好者，他们看到了这种语言的潜力和便利。这些开发者可能来自更成熟的平台，像Arduino，Raspberry pi。许多人开始意识到使用<strong class="ig hi"> MicroPython </strong>，以及一起指定Python和MicroPython的好处，不仅仅是为了快速原型和更快的上市时间。</p><p id="0900" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如今，微控制器无处不在，从你的手机到你的办公室桌面，从家用电器到宇宙火箭。到处都在为你的设备增加智能和控制。它们将CPU、内存和IO压缩到一个通用芯片中，而不是需要一整板的芯片来协同执行任务。为了让它们工作，固件代码被闪存或烧录到内存中。微控制器早在Micropython出现之前就已经存在了，但是为什么有人会从他们的传统编程转向Micropython呢？为了得到这些答案，我们先来看看什么是Micropython。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/693bb509812ed24318ff60545a722622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhtG4A0pDbL0eOu1T32edA.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">(图片来源-<a class="ae kb" href="https://github.com/micropython/micropython" rel="noopener ugc nofollow" target="_blank">https://github.com/micropython/micropython</a>)</figcaption></figure><h1 id="a92c" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">微丝体</h1><p id="6588" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">虽然我们很多人都知道python是一种解释型的、面向对象的、具有动态语义的高级编程语言。MicroPython是对<strong class="ig hi"> Python 3 </strong>编程语言的一种精简而高效的利用，它包括Python标准库的一个小子集，并被优化为在微控制器和受限环境中运行。</p><p id="a52b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MicroPython是一个完整的Python编译器和运行时，运行在裸机上。您会得到一个交互式提示(<strong class="ig hi"> REPL </strong>)来立即执行命令，并能够从内置文件系统运行和导入脚本。REPL有历史，外壳，标签完成，自动缩进和粘贴模式，为一个伟大的用户体验。</p><p id="8284" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MicroPython充满了高级特性，比如交互式提示、任意精度整数、闭包、列表理解、生成器、异常处理等等。它旨在与普通Python兼容，并允许您轻松地将代码从桌面转移到微控制器或嵌入式系统。</p><h2 id="d1e2" class="lg kd hh bd ke lh li lj ki lk ll lm km ip ln lo kq it lp lq ku ix lr ls ky lt bi translated">它给传统习俗带来了什么好处？ </h2><p id="53db" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated"><strong class="ig hi"> <em class="lf">首先是</em> </strong>，该语言比竞争语言更容易被初学者和专业人士理解。它对于小型项目来说速度很快，对于工业用例来说足够强大。你可以从学习基础知识到做真正的工作，而且要快。</p><p id="27cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="lf">秒</em> </strong>，Python允许快速反馈。这是通过交互式输入命令并使用REPL获得响应来实现的。您甚至可以调整代码并立即运行，而不是重复代码-编译-上传-执行的循环。</p><p id="2a38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="lf">第三个</em> </strong>，外面庞大的Python代码和经验库支持，意味着作为Python程序员，你可以更快更轻松地做一些事情。</p><p id="a08d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MicroPython采用了许多先进的编码技术和技巧来保持紧凑的尺寸，同时仍然具有全套的特性。使用MicroPython并不需要成为Python专家，它的语法简洁易学，非常适合初学者。</p><h1 id="2b17" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">哪个硬件支持MicroPython</h1><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lv"><img src="../Images/5191477668b19b4ec99cd0b4a4a5786a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAZO16AVnsh-MxH36mHrnw.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">(图片来源—<a class="ae kb" href="https://store.micropython.org/product/PYBv1.1H" rel="noopener ugc nofollow" target="_blank">https://store.micropython.org/product/PYBv1.1H</a>)</figcaption></figure><ul class=""><li id="9e4a" class="lw lx hh ig b ih ii il im ip ly it lz ix ma jb mb mc md me bi translated"><strong class="ig hi"> Pyboard — </strong>首款Micropython主板完全支持语言和硬件外设。该板带有运行在其上的MicroPython，因此您可以通过任何额外的设置开始使用代码。</li><li id="5013" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">ESP8266—</strong>Micropython支持流行的<em class="lf"> ESP8266 </em>控制器。您可以访问ADC、wifi、PWM、GPIOs、I2C/ SPI等外设。通过webREPL，您可以使用web浏览器对ESP8266进行编码。</li><li id="e8e0" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">Teensy 3 . x—</strong>Teensy设备拥有一些对Mircropython的早期访问。虽然这个端口与其他板相比不太成熟，但您可以访问基本的GPIOs。</li><li id="d9d6" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi"> Raspberry Pi PICO — </strong>最近推出的PICO板为MicroPython提供了广泛的支持。MicroPython的Pico端口包括用于访问低级芯片专用硬件的模块。要开始使用Micropython使用Pico，请查看<a class="ae kb" rel="noopener" href="/analytics-vidhya/how-to-set-up-and-program-raspberry-pi-pico-58f5c75c382a"><em class="lf">https://medium . com/analytics-vid hya/how-to-set-up-and-program-raspberry-pi-Pico-58 F5 c 75 c 382 a</em></a></li></ul><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mk"><img src="../Images/833fe99f0ed33417880ce582d311839d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTxpt3jR-0PP3Gb_XpLbtA.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">(图片来源—<a class="ae kb" rel="noopener" href="/analytics-vidhya/how-to-set-up-and-program-raspberry-pi-pico-58f5c75c382a">https://medium . com/analytics-vid hya/how-to-set-up-and-program-raspberry-pi-pico-58 F5 c 75 c 382 a</a>)</figcaption></figure><h1 id="90ad" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">MicroPython工作流</h1><p id="6fc8" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">对于使用控制器，工作流本质上包括在IDE中编写代码，并将其烧录到控制器的内存中。有了Micropython，情况就不同了。</p><h2 id="103e" class="lg kd hh bd ke lh li lj ki lk ll lm km ip ln lo kq it lp lq ku ix lr ls ky lt bi translated">获得MicroPython REPL提示</h2><p id="c49c" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">REPL代表读取评估打印循环，是您可以在控制器上访问的交互式MicroPython提示符的名称。使用REPL是迄今为止测试代码和运行命令最简单的方法。您可以使用<a class="ae kb" href="https://www.putty.org/" rel="noopener ugc nofollow" target="_blank"> Putty </a>终端来运行get这个提示符。</p><p id="4f1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两种方法可以访问REPL:</p><ul class=""><li id="9a26" class="lw lx hh ig b ih ii il im ip ly it lz ix ma jb mb mc md me bi translated"><strong class="ig hi">使用串口连接:</strong>通过UART串口有线连接。</li></ul><p id="a3e3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，要在Mac上获得串行REPL，您可以编写:</p><pre class="jm jn jo jp fd ml mm mn mo aw mp bi"><span id="1d24" class="lg kd hh mm b fi mq mr l ms mt">$ screen /dev/tty.wchusbserial1430 115200</span></pre><ul class=""><li id="f98f" class="lw lx hh ig b ih ii il im ip ly it lz ix ma jb mb mc md me bi translated"><strong class="ig hi">使用WebREPL: </strong>这是带WiFi的主板的一个选项。</li></ul><pre class="jm jn jo jp fd ml mm mn mo aw mp bi"><span id="9aa2" class="lg kd hh mm b fi mq mr l ms mt"><strong class="mm hi">import</strong> <strong class="mm hi">webrepl_setup</strong></span></pre><p id="ff77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你得到提示，你就可以开始实验了。您可以像在Python交互式会话中一样输入命令。MicroPython将运行您输入的代码并打印结果。</p><p id="a833" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以尝试以下命令:</p><pre class="jm jn jo jp fd ml mm mn mo aw mp bi"><span id="c863" class="lg kd hh mm b fi mq mr l ms mt">&gt;&gt;&gt; print("hello Pico")<br/>  hello Pico</span></pre><h2 id="6feb" class="lg kd hh bd ke lh li lj ki lk ll lm km ip ln lo kq it lp lq ku ix lr ls ky lt bi translated">命令行工具和ide</h2><p id="a199" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">在MicroPyhton中编写代码的另一个简单方法是使用一些命令行工具，比如用于python的<a class="ae kb" href="https://thonny.org/" rel="noopener ugc nofollow" target="_blank"> Thonny IDE </a>。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mu"><img src="../Images/f2047ebb11e6358e4568e7e8d214b0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2fL74kdQX_-ER0lzZdelA.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">Thonny IDE的外壳窗口</figcaption></figure><p id="c506" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Thonny内置了Python 3.7，因此只需要一个简单的安装程序，您就可以开始学习编程了。最初的用户界面去掉了所有可能让初学者分心的功能。</p></div><div class="ab cl mv mw go mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ha hb hc hd he"><h1 id="21ef" class="kc kd hh bd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz bi translated">创建和部署您的代码</h1><p id="1561" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">为了执行您的代码，在大多数情况下，您将创建<code class="du nh ni nj mm b">.py</code>文本文件，并在您的MicroPython设备上执行它们。虽然有些设备具有实时处理功能，但有些设备需要将<code class="du nh ni nj mm b">.py</code>文件刻录到内存中。</p><h2 id="ce9a" class="lg kd hh bd ke lh li lj ki lk ll lm km ip ln lo kq it lp lq ku ix lr ls ky lt bi translated">第一个程序(板载LED)</h2><p id="eb63" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">MicroPython包含了<code class="du nh ni nj mm b">machine</code>模块，更具体地说是用于访问和使用GPIO管脚的<code class="du nh ni nj mm b">machine.Pin</code>类。</p><p id="f37a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在命令行中复制给定的代码:</p><pre class="jm jn jo jp fd ml mm mn mo aw mp bi"><span id="c05a" class="lg kd hh mm b fi mq mr l ms mt">from machine import Pin<br/>led = Pin(25, Pin.OUT)<br/>led.on()</span></pre><p id="b575" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当你按下回车键时，你将会看到pico的LED灯亮起</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es nk"><img src="../Images/c70175d1df7c16e57434e2808355f56f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ih2wPFa2wrqKfAmsykzwig.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">资料来源- Aniket Arya</figcaption></figure><h2 id="0a9e" class="lg kd hh bd ke lh li lj ki lk ll lm km ip ln lo kq it lp lq ku ix lr ls ky lt bi translated">ADC(温度读数)</h2><p id="a6dd" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">Pico附带的温度传感器连接到称为ADC或模数转换器的几个特殊引脚之一。标准GPIO引脚和ADC引脚的区别在于，GPIO引脚仅支持高电平和低电平两种状态，而ADC引脚支持一系列值，具体取决于引脚上施加的输入电压。</p><p id="276d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du nh ni nj mm b">machine</code>模块提供了<code class="du nh ni nj mm b">ADC()</code>类来处理ADC引脚。以下代码可用于从MicroPython shell读取温度传感器:</p><pre class="jm jn jo jp fd ml mm mn mo aw mp bi"><span id="cca3" class="lg kd hh mm b fi mq mr l ms mt">from machine import ADC<br/>from machine import Pin<br/>from utime import sleep</span><span id="a372" class="lg kd hh mm b fi nl mr l ms mt">led = Pin(25, Pin.OUT)<br/>temp_sensor = ADC(4)       //ADC pin<br/>temperature = temp_sensor.read_u16() //to read tempearture<br/>to_volts = 3.3 / 65535  //converting to 0 - 3.3v<br/>temperature = temperature * to_volts<br/>celsius_degrees = 27 - (temperature - 0.706) / 0.001721 //converting in celcius<br/>while True:<br/>    print("Temperature is")<br/>    print(celsius_degrees)<br/>    led.on()<br/>    sleep(1)<br/>    led.off()<br/>    sleep(1)</span></pre><p id="80a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">执行此代码时，您会注意到温度读数和LED每<em class="lf">秒</em>闪烁一次。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es nm"><img src="../Images/27ee53246e2f58ee84f70121b6301ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uwh5Q-KEMmDG0VI-HyNUGw.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">外壳上打印的温度读数</figcaption></figure></div><div class="ab cl mv mw go mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ha hb hc hd he"><h1 id="d598" class="kc kd hh bd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz bi translated">结论</h1><p id="b06a" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">你从来没有想过嵌入式系统编程会如此容易。在传统语言中，你必须牺牲很多功能。但是使用python，你可以提取所有的功能，并在硬件中压缩代码。在本文中，您了解了MicroPython的特性及其在pico上的一些代码。</p><p id="2057" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MicroPython正在继续发展，越来越多的控制器支持它。开发人员和爱好者总是在添加新的代码、工具、项目和教程。对于MicroPython开发人员来说，这是一个激动人心的时刻。</p><p id="4189" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望这是对MicroPython的有趣而简单的介绍，以及在Pico微控制器上开始使用MicroPython。</p><p id="b36b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我将发布更多的程序和MicroPython的特性。</p></div></div>    
</body>
</html>