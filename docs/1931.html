<html>
<head>
<title>The donuts code &amp; the math behind</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">甜甜圈代码和背后的数学</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-donuts-code-the-math-behind-6d473eaec61d?source=collection_archive---------1-----------------------#2021-03-27">https://medium.com/analytics-vidhya/the-donuts-code-the-math-behind-6d473eaec61d?source=collection_archive---------1-----------------------#2021-03-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="edfb" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">油炸圈饼代码</h1><p id="1f1a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">旋转的“甜甜圈”最近引起了一些关注，它是由令人惊叹的安迪·斯隆创造的。难怪，你的终端上有一个飞行甜甜圈？你可以在c语言中找到下面的代码。“像素”是ASCII字符<code class="du kb kc kd ke b">.,-~:;=!*#$@</code>,它说明了表面的照明值，但我将在下面一步一步地解释数学。</p><p id="f83c" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">你可以在我的博客上关注这篇关于人工智能/数据科学的文章</p><p id="df85" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated"><strong class="jf hj">任务:</strong></p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kl"><img src="../Images/77a0707f798df2e883afa8613ebb6a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*ABgQRoSOxyHksOEo.gif"/></div></figure><p id="d662" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">步伐</p><ol class=""><li id="a564" class="kt ku hi jf b jg kf jk kg jo kv js kw jw kx ka ky kz la lb bi translated">创建一个以R2为中心，以R2为半径的圆</li></ol><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lc"><img src="../Images/ef6e327405f2abee4dd5c1451c5d772b.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/0*uieoURWR2E1iy_j8.png"/></div></figure><p id="c0ee" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">2.创建一个在Y轴上旋转的圆环(“甜甜圈”)</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ld"><img src="../Images/6d9bb2903ac5c2e362f6416667cf8ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/0*ZUVaKHMiySKapuyK.png"/></div></figure><p id="1e73" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">3.现在，我们需要围绕X和Z轴旋转，这样它看起来就像在屏幕上浮动和旋转。基本上，一个飞行甜甜圈。为什么不呢？</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es le"><img src="../Images/abb0e61677c83f3523b47ac19562e02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/0*MhyjKKHIQ6839FrZ.png"/></div></figure><p id="d068" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">4.那么，如何将这个3D物体映射到2D ie终端屏幕上呢？</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lf"><img src="../Images/10e93cc70ac51e0a4584c1ed0e793362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/0*pWq3WBB73sjTC74Z.png"/></div></figure><p id="c9a0" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">代码中的每个字符对应于我们终端上的一个像素。但是，怎么遮阳呢？为此，我们计算表面法线和光线方向的点积。这将说明屏幕上会有多亮和多暗。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/004f10e98e543707be567ec56bf298e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0sWvVuZYI1oBWxgy.png"/></div></div></figure><p id="54a1" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">点积的输出将是:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ll"><img src="../Images/bb362a49891df08d8dd3ebf276253012.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/0*bjtGyo2_9I7rbv7D.png"/></div></figure><p id="94c2" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated">5.最后，你将点积的结果(步骤4)映射到这些字符上来调整光线。就是这样！</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lm"><img src="../Images/34a3c35dd9bf462750af31a05a9fe965.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/0*yqC4esHHJDJSPlUy.png"/></div></figure><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ln"><img src="../Images/da41df0664b09ce456667a2985b507da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OCj_olrm9hqOG5sn.png"/></div></div></figure><p id="09c5" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated"><strong class="jf hj">代码</strong></p><pre class="km kn ko kp fd lo ke lp lq aw lr bi"><span id="a892" class="ls ig hi ke b fi lt lu l lv lw">#include &lt;stdio.h&gt;<br/>#include &lt;math.h&gt;<br/>#include &lt;string.h&gt;<br/>#include &lt;unistd.h&gt;</span><span id="bd7d" class="ls ig hi ke b fi lx lu l lv lw">int main() {<br/>    float A = 0, B = 0;<br/>    float i, j;<br/>    int k;<br/>    float z[1760];<br/>    char b[1760];<br/>    printf("\x1b[2J");<br/>    for(;;) {<br/>        memset(b,32,1760);<br/>        memset(z,0,7040);<br/>        for(j=0; j &lt; 6.28; j += 0.07) {<br/>            for(i=0; i &lt; 6.28; i += 0.02) {<br/>                float c = sin(i);<br/>                float d = cos(j);<br/>                float e = sin(A);<br/>                float f = sin(j);<br/>                float g = cos(A);<br/>                float h = d + 2;<br/>                float D = 1 / (c * h * e + f * g + 5);<br/>                float l = cos(i);<br/>                float m = cos(B);<br/>                float n = sin(B);<br/>                float t = c * h * g - f * e;<br/>                int x = 40 + 30 * D * (l * h * m - t * n);<br/>                int y= 12 + 15 * D * (l * h * n + t * m);<br/>                int o = x + 80 * y;<br/>                int N = 8 * ((f * e - c * d * g) * m - c * d * e - f * g - l * d * n);<br/>                if(22 &gt; y &amp;&amp; y &gt; 0 &amp;&amp; x &gt; 0 &amp;&amp; 80 &gt; x &amp;&amp; D &gt; z[o]) {<br/>                    z[o] = D;<br/>                    b[o] = ".,-~:;=!*#$@"[N &gt; 0 ? N : 0];<br/>                }<br/>            }<br/>        }<br/>        printf("\x1b[H");<br/>        for(k = 0; k &lt; 1761; k++) {<br/>            putchar(k % 80 ? b[k] : 10);<br/>            A += 0.00004;<br/>            B += 0.00002;<br/>        }<br/>        usleep(30000);<br/>    }<br/>    return 0;<br/>}</span></pre><p id="44a3" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo kh jq jr js ki ju jv jw kj jy jz ka hb bi translated"><strong class="jf hj">学分</strong></p><ul class=""><li id="23f1" class="kt ku hi jf b jg kf jk kg jo kv js kw jw kx ka ly kz la lb bi translated">查看安迪·斯隆的博客文章，了解更多关于数学的细节:<a class="ae kk" href="https://www.a1k0n.net/2011/07/20/donut-math.html" rel="noopener ugc nofollow" target="_blank">博客文章:“甜甜圈数学:甜甜圈. c如何工作”安迪·斯隆的博客文章</a></li><li id="1fb6" class="kt ku hi jf b jg lz jk ma jo mb js mc jw md ka ly kz la lb bi translated">查看Alex Friedman的快速解释和代码:<a class="ae kk" href="https://www.youtube.com/watch?v=DEqXNfs_HhY" rel="noopener ugc nofollow" target="_blank">甜甜圈形状的C代码，生成一个3D旋转甜甜圈</a></li></ul></div></div>    
</body>
</html>