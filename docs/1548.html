<html>
<head>
<title>Real Estate Market, Web-Scrapping and EDA using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">房地产市场、网络报废和使用Python的EDA</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/apartment-market-web-scrapping-and-eda-using-python-a9eacf6d64e2?source=collection_archive---------12-----------------------#2021-03-07">https://medium.com/analytics-vidhya/apartment-market-web-scrapping-and-eda-using-python-a9eacf6d64e2?source=collection_archive---------12-----------------------#2021-03-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="4e0c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jc translated">在本指南中，我们将了解阿尔巴尼亚地拉那的房地产市场。本文将介绍使用python进行web报废的指南，并执行探索性数据分析，从而从原始数据中提取有价值的见解。</p><p id="818f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大约5520套公寓(待售和出租)的数据来自21世纪不动产的网站。这些数据是21世纪的财产，只能在获得授权的情况下获取(我有授权)，这项研究的目的纯粹是教育，所以请合乎道德地使用本指南，并在删除其他网站的数据时始终请求授权。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/41bfcdef18eaeb976babde962e6fd232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4b16GkYfm2-d8DmF3kuK4A.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">地拉那的回忆</strong></figcaption></figure><blockquote class="kc kd ke"><p id="2d15" class="ie if kf ig b ih ii ij ik il im in io kg iq ir is kh iu iv iw ki iy iz ja jb ha bi translated">你不是沧海一粟。你是整个海洋中的一滴水。鲁米</p></blockquote></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="0618" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">数据采集</strong></h2><p id="a1c1" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">在我们开始网络报废过程之前，让我们快速浏览一下将从中提取公寓数据的网站。这里可以找到<a class="ae lp" href="https://www.century21albania.com/en/properties?display=grid&amp;type=Apartment&amp;city=Tirana&amp;page=1" rel="noopener ugc nofollow" target="_blank">这里</a>。我们感兴趣的财产类型“公寓”和城市“地拉那”。应用过滤器后，每个页面的属性如下所示12个属性，共有460个页面(到目前为止),我们将使用python脚本逐一查看这些页面以提取数据。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lq"><img src="../Images/981f8346ec2f499721f3e15a78b33a46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jpl-bTwKjee7WrwKSdGqTA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">21世纪网站外观</strong></figcaption></figure><p id="c3ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面列出了每个公寓需要提取的信息(如果存在的话)。我们将演示为一个单独的房产提取这些信息的过程，然后展示通过所有页面上的所有房产的代码(460*12 = 5520套公寓)。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es lr"><img src="../Images/e101715577b616761abc23e348b14b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*pfnlX2oO4ITHcp6CflelGw.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">每个属性所需的信息</strong></figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="6648" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">进口</strong></p><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="9dc2" class="kq kr hh lt b fi lx ly l lz ma"># Requests is an elegant and simple HTTP library for Python<br/><strong class="lt hi">import requests</strong><br/># pandas is a powerful open source data analysis tool<br/><strong class="lt hi">import pandas as pd </strong><br/># Beautiful Soup is a library for Data Scrapping<br/><strong class="lt hi">from bs4 import BeautifulSoup</strong><br/># tqdm package to have a progressive bar during data extraction<br/><strong class="lt hi">from tqdm import tqdm</strong><br/># Numpy is a package for scientific computing of arrays<br/><strong class="lt hi">import numpy as np</strong><br/># A module which contains statistical functions<br/><strong class="lt hi">from scipy import stats</strong><br/># Opens the passed URL in a browser<br/><strong class="lt hi">import webbrowser</strong><br/># String Manipulation<br/><strong class="lt hi">import re</strong></span><span id="0ef6" class="kq kr hh lt b fi mb ly l lz ma"># Plotting Packages<br/><strong class="lt hi">import matplotlib.pyplot as plt<br/>from pyecharts.charts import Bar<br/>from pyecharts import options as opts<br/>import seaborn as sns</strong></span></pre><p id="4b42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">拆网</strong></p><p id="b3c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先我们进入网页，右键点击&gt; inspect，显示源代码。将光标移过页面元素，找到包含我们数据的属性元素，它有一个类<em class="kf">“col-LG-3 col-MD-4 property”。</em></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mc"><img src="../Images/d2dbf7a1e0e4acce230bad108226bc91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fk1XxYg-Wx044uE3emm79A.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">检查元素以发现属性元素的类别</strong></figcaption></figure><p id="610f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，为了获得这个属性元素的源代码，我们在请求中传递网页的链接，并确保您也传递这些头。然后，将内容(<strong class="ig hi"> r </strong>包含整个页面的源代码)传递给<strong class="ig hi"> BeautifulSoup </strong>，同时我们指定元素<strong class="ig hi">【div】</strong>和类<strong class="ig hi"><em class="kf">【col-LG-3 col-MD-4 property】、</em> </strong>，从而创建<strong class="ig hi"> properties、</strong>一个包含每个属性元素源代码的列表。我们可以通过打印列表的长度和第一个元素的内容来改变它。</p><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="cace" class="kq kr hh lt b fi lx ly l lz ma"><strong class="lt hi">r = requests.get</strong>(<strong class="lt hi">f"</strong><a class="ae lp" href="https://www.century21albania.com/en/properties?display=grid&amp;type=Apartment&amp;city=Tirana&amp;page=1" rel="noopener ugc nofollow" target="_blank">https://www.century21albania.com/en/properties? display=grid&amp;type=Apartment&amp;city=Tirana&amp;page=1</a><strong class="lt hi">"</strong>, <br/>                  <strong class="lt hi">headers={</strong>'User-agent': 'Mozilla/5.0 <br/>                           (X11; Ubuntu; <br/>                            Linux x86_64; rv:61.0)   <br/>                            Gecko/20100101 Firefox/61.0'<strong class="lt hi">})</strong></span><span id="f37c" class="kq kr hh lt b fi mb ly l lz ma"><strong class="lt hi">properties = BeautifulSoup(r.content,</strong> "html.parser")<strong class="lt hi">.find_all(</strong>"div", {"class":"col-lg-3 col-md-4 property"<strong class="lt hi">})</strong></span></pre><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es md"><img src="../Images/57217b1a26e4d2c8b96d86e27ef3860e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mhez2NvJH9iV-gY95Ea0MA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">列表中第一个属性对应的源代码</strong></figcaption></figure><p id="2f87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上面显示了与列表的第一个属性相对应的部分代码，同时还有一些突出显示的元素，如卡的<strong class="ig hi">属性URL、价格、标题</strong>和<strong class="ig hi">地址</strong>。让我们提取这些信息:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es me"><img src="../Images/16a473458638169eff5dd3e5dec40e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgIpqYnzBLrGc7SAtLNveQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">提取物业URL、价格、标题和地址</strong></figcaption></figure><p id="75f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们首先创建一个空列表来存储所需的信息，然后遍历之前创建的属性列表，并通过在find方法上输入适当的类名来提取信息。例如，为了提取URL，我们找到link <strong class="ig hi"> "a" </strong>类型的所有HTML元素，并获取第二个元素，因为第二个链接对应于特定的属性元素。类似地，我们使用<strong class="ig hi"> class="card-title" </strong>定位价格元素<strong class="ig hi"> class="text-primary mb-2 "，</strong> title元素，使用<strong class="ig hi">" class = card-subtitle mt-1m b-0 text-muted "，</strong>定位地址元素，然后我们<strong class="ig hi"> </strong>提取这些段落的文本。使用<em class="kf">尝试排除</em>可防止信息缺失时出错。</p><p id="a781" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，要获得其余信息，我们必须使用之前获得的酒店URL访问每个特定的酒店网页。比如这个<a class="ae lp" href="https://www.century21albania.com/en/property/870255/apartament-11-per-shitje-te-21-dhjetori-bond39474.html" rel="noopener ugc nofollow" target="_blank">房产</a>，我们会提取代理商的信息:<strong class="ig hi">卖家</strong>(姓名)<strong class="ig hi">邮箱</strong>和<strong class="ig hi">电话</strong>号码，在带有<strong class="ig hi">“class = card card-list”的卡片下。</strong></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mf"><img src="../Images/18e2c657cc9628e3c9bda92605db27b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-b6L7HEK2wU78LMXwmLYg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">卖家卡</strong></figcaption></figure><p id="da26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于每个物业，我们将提取给定的详细信息<strong class="ig hi">总面积</strong>、<strong class="ig hi">内部面积</strong>、<strong class="ig hi">卧室、浴室</strong>、<strong class="ig hi">类型、状态、可用性、网站视图、文档、客厅、楼层</strong>和<strong class="ig hi">土地面积</strong>，在<strong class="ig hi">“class = card-body col-MD-12”下。</strong></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mg"><img src="../Images/c8d1c3f7d22e071adf5f5d459b3a8b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WnEFl8eAYcTUS5A9v2NfpQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">详细的房产信息</strong></figcaption></figure><p id="b3d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是整个脚本，使我们能够从第1页移动到第460页，并为每一页提取12个属性的信息。首先，我们获取属性卡元素，然后获取属性URL，我们移动到该URL并提取代理的信息和详细的属性特征。然后我们从主页面中提取价格、标题和地址。我们使用<strong class="ig hi"> tqdm </strong>包来可视化带有进度条的for循环，这需要一个多小时才能完成。我们把数据放在数据框里。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mh"><img src="../Images/e2a39e3f6139a37ae5aa4c31b6168d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lDem5RtBwy96pKiEw3fWDw.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mi"><img src="../Images/a09a2ca56c937cf4e510a4c2e4e0497c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-hNm9DjPbKb1cowr_eXu6A.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mi"><img src="../Images/2e3e7484b2a0b3cc9ca77e7c2302b8f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONYgHQhouAsojL193c9woQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">报废网页脚本</strong></figcaption></figure><p id="c070" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们把数据放在一个数据帧上，它看起来像这样:</p><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="e8eb" class="kq kr hh lt b fi lx ly l lz ma"># Convert the list of uneven dictionaries to Pandas Dataframe<br/><strong class="lt hi">df = pd.DataFrame.from_records(all_properties)</strong></span></pre><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mj"><img src="../Images/028090e6423793777c64825dc9bc6655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ke2nwDUZWKMTHBUB3GjTw.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">DF的前五条记录</strong></figcaption></figure><p id="6635" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据良好的实践重命名列，现在我们准备开始清理和探索性数据分析。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mk"><img src="../Images/0e2add8e662efa1393ac49395fb20a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*WIuiHj37Sl_rBN64i4H4HQ.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb"> DF栏目</strong></figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="21c1" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">EDA和清洗</h2><h2 id="53f3" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">房产网址</strong></h2><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ml"><img src="../Images/74e79ccde6d2b98b9fbd61aeacad6fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tE_uzYi70Lg66KEjiaxRmQ.png"/></div></div></figure><h2 id="d5b6" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">代理</strong></h2><p id="6cea" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我们可以看到公司有<strong class="ig hi"> 210个唯一代理</strong>。我们可以通过房产数量来直观显示排名前20位的代理商。顶级代理商在平台上有149套房产待售或出租。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mm"><img src="../Images/4522abb2df0e8651d54d131715887c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q74wyBsGR35uzMvdIN8wdw.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mn"><img src="../Images/690060804f1c1ab2d73aa501c3613aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJ9pPeCQ-bwJ1FDtyhBNEQ.png"/></div></div></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mo"><img src="../Images/b9bf6855792a642615cae43ce695de2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VmG5GcklqWQb6IUMHOJJEg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">按物业数量排名的前20名代理商</strong></figcaption></figure><h2 id="f62f" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">电子邮件</strong></h2><p id="32b2" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">正如您在数据框中看到的，电子邮件字段是加密的。这是因为它们属于<strong class="ig hi"> class="cf_email" </strong>类型，这意味着电子邮件受CloudFlare保护。我们需要应用如下的解密函数:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mp"><img src="../Images/246c54a9d51588532ca141f17274b217.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*gwHa22Mt6l_idMHukEQe9Q.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">解密功能</strong></figcaption></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mq"><img src="../Images/21e94261b1a224a670d16de05381c0a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*PuBYSW0ndUoO6mVoC8dK0Q.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">解密前后的邮件</strong></figcaption></figure><h2 id="326e" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">电话号码</strong></h2><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mr"><img src="../Images/c1568236e9f9cf670de988cd078d554a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GdLSi9cck3DKR6JFhNOIbg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">电话号码数值计数</strong></figcaption></figure><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="9b69" class="kq kr hh lt b fi lx ly l lz ma"># To convert the data to uniform format we remove the '+' sign<br/><strong class="lt hi">df['phone'] = df['phone'].str.replace('+','')</strong></span></pre><h2 id="d408" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">价格</h2><p id="fc7b" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我们需要删除额外的符号，并将金额从字符串转换为整数。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es ms"><img src="../Images/d98971160e0d1bb9f9a354d4569d4f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*1CyDeD8BDe-denQzz24Bbg.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">清洁价格栏</strong></figcaption></figure><h2 id="db58" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">标题</strong></h2><p id="5036" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">使用标题描述，我们可以使用它来分割出租公寓和出售公寓的数据集，为此，我们有两个函数来控制标题是否包含单词“<strong class="ig hi">出租</strong>或“<strong class="ig hi">出售</strong>”以及每个类别的同义词。我们添加两个用0或1编码的列，这取决于公寓是否属于该类别。删除属于这两个类别或不属于这两个类别的行(因为既有公寓出租也有公寓出售)，我们只剩下<strong class="ig hi"> 5'185 </strong>属性<strong class="ig hi">。</strong></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mt"><img src="../Images/31125719274e0c46d179195ccfeeb5ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*RbOYVc68y3DBW10TAclRGA.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">租售</strong></figcaption></figure><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="f21a" class="kq kr hh lt b fi lx ly l lz ma"># Drop rows where the apartment is for sale and for rent or with a ambigious title:<br/><strong class="lt hi">df = df.drop(df[(df['sale'] == 1) &amp; (df['rent']== 1)].index)<br/>df = df.drop(df[(df['sale'] == 0) &amp; (df['rent']== 0)].index)<br/>df = df.reset_index(drop=True)</strong></span></pre><h2 id="a478" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">地址</strong></h2><p id="eb3e" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我们删除了特殊字符，去掉了尾随空格。然后，我们可以说明哪些区域有更多公寓可供出售/出租。我们可以看到“<em class="kf">唐·博斯科</em>”的公寓报价更高，其次是“<em class="kf">弗雷斯库</em>”一个拥有许多新住宅建筑的区域。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mu"><img src="../Images/c2cdc685f4fe12db0ebc7e3fd9c551b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_pJhrO9ZlF4vC8DedvsyQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">各区公寓数量(前10) </strong></figcaption></figure><h2 id="83c1" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">总面积</strong></h2><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mv"><img src="../Images/380ac1e30cf741f48cf9c7871785be02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*tR3-Lf1aOIU7M5VUyRCWVA.png"/></div></figure><p id="1a8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们看到公寓的平均总面积是105.9平方米。下面我们通过将公寓分成50-170平方米的几个部分来展示它们的总面积:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mo"><img src="../Images/ad79f1293de9c50255a8736372b05516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9-s81oGdPgskvV1uBo7Eg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">按总面积计算的公寓</strong></figcaption></figure><h2 id="668b" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">内部区域</strong></h2><p id="3134" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我们删除非数字字符，并将字符串转换为浮点型。所有公寓的室内总面积为457，774平方米。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mw"><img src="../Images/8737aff970933fae0fa0e92c1a694eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*3dnT9p9OiF6mi_DCGbKD6w.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">清洁内部区域</strong></figcaption></figure><h2 id="1bb5" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated"><strong class="ak">浴池</strong></h2><p id="5465" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">如下图所示，我们可以通过浴室的数量来统计公寓的数量，我们看到57%(2823套公寓)有一间浴室。有一处房产有133间浴室，在检查后，我们发现这是代理人误闯的。因此，我们删除了像这样有问题的行。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es mx"><img src="../Images/35b1b9c907060fb9aefe79a22d2d322c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*c46XthQJWfo7IFr0EDhmgQ.png"/></div></figure><h2 id="a847" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">状态</h2><p id="06b4" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">在根据公寓的状态对其进行适当排列后，我们对两个主要类别进行编码，即“<strong class="ig hi">新的</strong>”和“<strong class="ig hi">用过的</strong>”。大多数公寓<strong class="ig hi"> 66% </strong>是新建的，因为地拉那市的建筑业在过去几年非常活跃。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es my"><img src="../Images/08c4a97a5c09188cb6476a1a53d73c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*_L2MvH8OuBS32TvVl9btXg.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">按状态分类的公寓</strong></figcaption></figure><h2 id="e625" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">有效性</h2><p id="c70c" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">如果我们将数据按可用性进行分类，并按出租或出售进行分组，我们可以看到<strong class="ig hi"> 17% (889) </strong>的公寓已售出，在<strong class="ig hi">2212</strong>套可用公寓中，<strong class="ig hi"> 1581套(71%) </strong>用于出售而非出租。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mz"><img src="../Images/c6083cf03cbcdbcd98448eae4b5b7b43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gCbDIDRqXZ1ylG-ldUmfQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">租售对比</strong></figcaption></figure><h2 id="a3c7" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">网站访问量</h2><p id="de23" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">如上图，从网站浏览量的分布来看，公众对租房更感兴趣。在<strong class="ig hi">2266995个</strong>总浏览量中，大部分<strong class="ig hi"> 59% </strong>指向出租公寓。下图显示了网站访问量排名靠前的代理。我们可以看到，尽管代理人"<em class="kf"> Oltion Lulja </em>"只有107套公寓，相比之下"<em class="kf"> Eriola Kurti </em>"有147套公寓，他仍然设法获得了更多关于其房产的意见。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mo"><img src="../Images/3dd9a08bf7634b746abef96654fee4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NEhI48yzfe9R12RmUjXgw.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">代理商的网站浏览量</strong></figcaption></figure><h2 id="3821" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">证明文件</h2><p id="0463" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">这一栏提供了关于财产所有权证书的信息。这是相当数量的公寓，其中26%没有任何信息(很可能表明缺乏财产文件)</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es na"><img src="../Images/7f9da6e812ae98105e239c0a1201cda9.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*sV4MzXn64p0wmT1TbjHMzg.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">抵押状态</strong></figcaption></figure><h2 id="bdf5" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">地板</h2><p id="120f" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">这一栏包含公寓的楼层数。一层以上的公寓数量为<strong class="ig hi">3602</strong>，这表明所提供的公寓大多位于高层住宅建筑上，也说明了城市建筑高度方面的平均景观。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es mo"><img src="../Images/9b4cc7c1908958b30914006360483a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5xeckLaMh0KlxecUtjcrA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated"><strong class="bd kb">公寓的楼层</strong></figcaption></figure><h2 id="eea5" class="kq kr hh bd kb ks kt ku kv kw kx ky kz ip la lb lc it ld le lf ix lg lh li lj bi translated">价格</h2><p id="cdda" class="pw-post-body-paragraph ie if hh ig b ih lk ij ik il ll in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">平均公寓售价为<strong class="ig hi"> 105，792欧元，</strong>而50%的公寓价格在<strong class="ig hi"> 75，000欧元和<strong class="ig hi"> 130，000欧元之间。</strong>有一些异常值，我们可以删除如下:</strong></p><pre class="jm jn jo jp fd ls lt lu lv aw lw bi"><span id="b45d" class="kq kr hh lt b fi lx ly l lz ma"># Remove Price which is two standard deviations away, basically top 5 percent, outliers. 2390 Left<br/><strong class="lt hi">df_sale = df_sale[(np.abs(stats.zscore(df_sale['price'])) &lt; 2)]</strong></span><span id="bf2a" class="kq kr hh lt b fi mb ly l lz ma"># Remove The lower Outliers, 2374 Left<br/><strong class="lt hi">df_sale = df_sale[df_sale['price']&gt;20000]</strong></span></pre><div class="jm jn jo jp fd ab cb"><figure class="nb jq nc nd ne nf ng paragraph-image"><img src="../Images/8d129eb29fcebcb8a8fd618c90642def.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*DdzMp-Ln314qSUP46sMevQ.png"/></figure><figure class="nb jq nh nd ne nf ng paragraph-image"><img src="../Images/47d19e211998d6ef5577638885060c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*rlgcnK6KhHP20U0KoXHDpQ.png"/></figure></div><p id="e4da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是关于数据提取和探索性数据分析的简单指南。如果你需要帮助或有问题或需要完整的代码，给我写信！</p><p id="5f09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">谢谢:)</strong></p></div></div>    
</body>
</html>