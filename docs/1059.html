<html>
<head>
<title>Recreating Python Dictionaries from Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头开始重新创建Python字典</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/recreating-python-dictionaries-from-scratch-e646b3515943?source=collection_archive---------8-----------------------#2021-02-12">https://medium.com/analytics-vidhya/recreating-python-dictionaries-from-scratch-e646b3515943?source=collection_archive---------8-----------------------#2021-02-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/464b18187973483b80b2aebc09fc58a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*xhUxYhj03ZI76Snx_8UUVQ.png"/></div></figure><p id="0cbd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">想知道怎么做吗？！嗯，那就继续看……:)</p><p id="5dc2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">众所周知，<em class="jj"> Python字典</em>是一种用于存储键值对的数据结构；其中“密钥”用于存储和检索存储的“值”。例如，这里有一个字典，用于存储和检索一个班级中学生的标记；</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="0992" class="jt ju hh jp b fi jv jw l jx jy"># Creating a dictionary<br/>result = <br/>{<br/>  'A' : '20',<br/>  'B' : '15',<br/>  'C' : '10'<br/>}<br/>result</span><span id="e068" class="jt ju hh jp b fi jz jw l jx jy"># Retrieving the marks using key value(here, name)<br/>result['A']</span><span id="6913" class="jt ju hh jp b fi jz jw l jx jy"># Add a new value<br/>result['Z'] = '9'</span><span id="6cca" class="jt ju hh jp b fi jz jw l jx jy"># Update existing value<br/>result['A'] = '11'</span><span id="e418" class="jt ju hh jp b fi jz jw l jx jy"># View the updated dictionary<br/>result</span><span id="ace9" class="jt ju hh jp b fi jz jw l jx jy"># View all the names and marks stored in result using a <!-- -->for<!-- --> loop<br/>for name in result:<br/>    print('Name:', name, ', Marks:', result[name])</span></pre><p id="d330" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">还在疑惑？这是如何工作的？预读…:)</p><ul class=""><li id="f4ce" class="ka kb hh in b io ip is it iw kc ja kd je ke ji kf kg kh ki bi translated">Python中的字典是使用一种叫做<strong class="in hi"> <em class="jj">哈希表</em> </strong>的数据结构实现的。</li><li id="d8b4" class="ka kb hh in b io kj is kk iw kl ja km je kn ji kf kg kh ki bi translated">哈希表使用一个列表/数组来存储键值对，并使用一个<em class="jj">哈希函数</em>来确定用于存储或检索与给定键相关联的数据的索引。</li></ul><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="4b3b" class="jt ju hh jp b fi jv jw l jx jy">MAX_HASH_TABLE_SIZE = 4096</span><span id="d70f" class="jt ju hh jp b fi jz jw l jx jy">class HashTable:<br/>    def __init__(self, max_size=MAX_HASH_TABLE_SIZE):<br/>        self.data_list = [None] * max_size<br/>        <br/>    def get_valid_index(self, key):<br/>        hash('key')<br/>        <br/>    def __getitem__(self, key):<br/>        idx = get_valid_index(self.data_list, key)<br/>        kv = self.data_list[idx]<br/>        return None if kv is None else kv[1]<br/>    <br/>    def __setitem__(self, key, value):<br/>        idx = get_valid_index(self.data_list, key)<br/>        self.data_list[idx] = (key, value)     <br/>    <br/>    def __iter__(self):<br/>        return (x for x in self.data_list if x is not None)<br/>    <br/>    def __len__(self):<br/>        return len([x for x in self])<br/>    <br/>    def __repr__(self):<br/>        from textwrap import indent<br/>        pairs = [indent("{} : {}".format(repr(kv[0]), repr(kv[1])), '  ') for kv in self]<br/>        return "{\n" + "{}".format(',\n'.join(pairs)) + "\n}"<br/>    <br/>    def __str__(self):<br/>        return repr(self)</span></pre><p id="e0c3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">实现上述函数后，我们可以创建Python字典，如下所示→</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="7f76" class="jt ju hh jp b fi jv jw l jx jy"># Create a hash table<br/>table = HashTable()</span><span id="2252" class="jt ju hh jp b fi jz jw l jx jy"># Insert some key-value pairs<br/>table['a'] = 1<br/>table['b'] = 34</span><span id="52c6" class="jt ju hh jp b fi jz jw l jx jy"># Retrieve the inserted values<br/>table['a'] == 1 and table['b'] == 34</span><span id="acd7" class="jt ju hh jp b fi jz jw l jx jy"># Update a value<br/>table['a'] = 99</span><span id="4de7" class="jt ju hh jp b fi jz jw l jx jy"># Check the updated value<br/>table['a'] == 99</span><span id="11cc" class="jt ju hh jp b fi jz jw l jx jy"># Get a list of key-value pairs<br/>list(table) == [('a', 99), ('b', 34)]</span><span id="59a0" class="jt ju hh jp b fi jz jw l jx jy">table<br/>&gt;&gt;<br/>{<br/>  'a' : 99,<br/>  'b' : 34<br/>}</span></pre><p id="0090" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">还有<strong class="in hi"> <em class="jj">搞定</em> </strong>！Python中的字典数据结构是从零开始成功创建的:)</p></div></div>    
</body>
</html>