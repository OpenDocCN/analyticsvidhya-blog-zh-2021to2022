<html>
<head>
<title>A Glance to ElasticSearch in the era of Analytics and Machine Learning:</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析和机器学习时代的弹性搜索一瞥:</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-glance-to-elasticsearch-in-the-era-of-analytics-and-machine-learning-541d5c95c250?source=collection_archive---------4-----------------------#2021-06-20">https://medium.com/analytics-vidhya/a-glance-to-elasticsearch-in-the-era-of-analytics-and-machine-learning-541d5c95c250?source=collection_archive---------4-----------------------#2021-06-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ef5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">什么是弹性搜索？</strong></p><p id="2244" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">想象一下这样一种情况，我有大量万亿字节大小的数据，我需要在其中搜索一个特定的术语。</p><p id="c1a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当然，我必须为此使用工具。但遗憾的是，市面上的搜索引擎大多不是开源的。</p><p id="be49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里弹性搜索开始出现。</p><p id="c6d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">弹性搜索是一个全文搜索、易于扩展的企业级分析引擎，适用于所有类型的数据，如文本、数字、地理空间、结构化和非结构化数据。它可以通过RESTful web服务接口访问，并使用无模式JSON (JavaScript对象符号)文档来存储数据。它是独立于平台的，这使得用户能够以非常高效的方式和非常高的速度从非常大量的数据中进行搜索。它支持各种用例，如允许用户轻松搜索任何门户网站，收集和分析日志数据，构建商业智能仪表板以快速分析和可视化数据。</p><p id="c705" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">概念和组成:</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/bae48b4fcc08916b556bca8f47411272.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*shhEVf4bQ-41bFnuKVsijg.png"/></div></figure><p id="8d18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jk">图1:弹性搜索概念(来源:W3学校)</em></p><p id="49ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">集群:</strong>集群是一个或多个节点(服务器)的集合，这些节点一起保存全部数据，并提供跨所有节点的联合索引和搜索功能，这些节点应该用唯一的名称来标识。默认情况下，它是“elasticsearch”。“集群命名”是强制性的，因为通过其名称可以将节点设置为加入集群。我们不应该在不同的环境中重用相同的集群名称，否则我们可能会以节点加入错误的集群而告终。例如，我们可以将各个集群分别命名为logging-dev、logging-stage和logging-prod，分别用于开发、登台和生产集群。</p><p id="e4c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">节点:</strong>节点是我们集群中的一个单独的服务器，数据可以存储在这里，它参与了集群的索引和搜索功能，这也应该用一个名称来标识。如果我们不想要默认的，我们可以定义任何我们想要的节点名。独特的“节点命名”对于管理非常重要，我们需要确定网络中的哪些服务器对应于Elasticsearch集群中的哪些节点。主节点管理整个集群。</p><p id="c33e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">索引:</strong>索引是具有某种相似特征的文档的集合。在单个集群中，我们可以根据需要定义任意多的索引。索引相当于关系数据库的模式。Elasticsearch不是直接搜索文本，而是搜索索引。所以，它支持快速搜索响应。与检索类似，通过扫描书籍后面的索引，书籍中的页面与关键字相关，而不是搜索书籍每页的每个单词。这种类型的索引称为“倒排索引”，因为它将以页面为中心的数据结构(page- &gt; words)转换为以关键字为中心的数据结构(word- &gt; pages)。Elasticsearch支持倒排索引，为此它使用Apache Lucene来创建和管理这个倒排索引。</p><p id="4529" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">类型:</strong>类型是存储索引映射的Elasticsearch元对象。</p><p id="e5eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">别名:</strong>别名是对一个Elasticsearch索引的引用，它可以映射到多个索引。</p><p id="485f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">文档:</strong>文档是可以被索引的基本信息单元，可以用JavaScript Object Notation (JSON)格式表示。连接查询返回父行和子行。</p><p id="1240" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">碎片和副本:</strong> Elasticsearch提供了将索引细分为多个碎片的能力。当我们创建一个索引时，我们必须定义我们想要的碎片数量。每个碎片都是一个全功能的独立“索引”，可以驻留在集群中的任何节点上。Elasticsearch允许我们将索引碎片的一个或多个副本制作成所谓的副本碎片，简称副本。创建索引后，我们可以随时动态地更改副本的数量，但是一旦配置好，就不能更改碎片的数量。</p><p id="63a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> REST API: </strong>客户端使用REST API通过http方法(GET、POST、PUT、DELETE)与Elasticsearch进行交互。</p><p id="0675" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> NRT(近实时):</strong> Elasticsearch是近实时搜索平台之一。文档一旦被编入索引，就可以在不到1秒的时间内进行搜索。</p><p id="49d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">elastic search如何表示数据？</strong></p><p id="84f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Elasticsearch中，我们搜索一个文档，一个索引由一个或多个文档组成，一个文档由一个或多个字段组成，其中我们需要在索引文档之前指定一个模式，如果我们需要除了最基本的字段和操作之外的任何东西，就有必要添加映射声明。在数据库术语中，文档对应于一个表行，字段对应于一个表列。</p><p id="ec9f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">映射是定义如何存储和索引文档及其字段的过程。当映射我们的数据时，我们创建一个映射定义，它包含一个与文档相关的字段列表。在Elasticsearch中，一个索引可能存储不同“映射类型”的文档。映射类型描述了将索引中的文档分成逻辑组的方式。要创建映射，我们需要“Put Mapping API”，或者您可以在创建索引时添加多个映射。</p><p id="adfa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">什么是麋鹿栈及其组件？</strong></p><p id="a5aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“ELK”是三个开源项目的缩写:Elasticsearch、Logstash和Kibana。Elasticsearch是一个搜索和分析引擎。Logstash是一个服务器端数据处理管道，它同时从多个来源获取数据，对其进行转换，然后将其发送到像Elasticsearch这样的“stash”。Kibana允许用户通过Elasticsearch中的图表和图形来可视化数据。</p><ul class=""><li id="4967" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated"><strong class="ig hi">日志:</strong>需要分析的服务器日志。</li><li id="1bb5" class="jl jm hh ig b ih ju il jv ip jw it jx ix jy jb jq jr js jt bi translated"><strong class="ig hi"> Logstash: </strong>收集日志和事件数据。它甚至解析和转换数据</li><li id="bc7b" class="jl jm hh ig b ih ju il jv ip jw it jx ix jy jb jq jr js jt bi translated"><strong class="ig hi"> ElasticSearch: </strong>来自Logstash的转换数据被<strong class="ig hi"> </strong>存储、搜索和索引。</li><li id="0378" class="jl jm hh ig b ih ju il jv ip jw it jx ix jy jb jq jr js jt bi translated"><strong class="ig hi"> Kibana: </strong> Kibana使用Elasticsearch DB来探索、可视化和共享存储的数据。Kibana中的可视化可以分为以下五种不同类型:</li></ul><p id="7e9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">o基本图表(面积图、热图、水平条形图、折线图、饼图、垂直条形图)</p><p id="bfc1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">o数据(数据表、量表、目标、指标)</p><p id="e9d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">o地图(坐标地图、区域地图)</p><p id="b37c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">o时间序列(Timelion，可视化构建器)</p><p id="12bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">o其他(控制、降价、标签云)</p><p id="59a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Beats: </strong>现代架构中最重要的是轻量级代理，安装在边缘主机上，收集不同类型的数据转发到堆栈中。不同beat收集的数据各不相同Filebeat收集日志文件，metricbeat收集系统和服务指标，Packetbeat收集网络数据，Winlogbeat收集Windows事件日志等。一旦收集到数据，我们可以配置我们的beat，将数据直接发送到Elasticsearch或Logstash进行进一步处理。</p><p id="7106" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">总之，这些不同的组件最常用于监控、故障排除和保护IT环境。Beats和Logstash负责数据收集和处理，Elasticsearch索引和存储数据，Kibana提供了查询数据和可视化数据的用户界面。</p><p id="0f28" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Kibana仪表板:</strong>一旦我们准备好了一组可视化工具，我们就可以将它们全部添加到一个称为仪表板的综合可视化工具中，这使我们能够以更简单的事件关联和趋势分析来监控环境。仪表板是高度动态的，可以编辑、共享、摆弄、以不同的显示模式打开等等。</p><p id="f49e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">日志管理和分析包括以下关键功能:</p><p id="592b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">聚合—从多个数据源收集和发送日志。</p><p id="b2f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">处理—将日志消息转换成有意义的数据，以便于分析。</p><p id="e5af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">存储—长期存储数据，并支持监控、趋势分析和安全使用情形。</p><p id="7ed4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">分析—通过查询数据并在此基础上创建可视化和仪表板来剖析数据。</p><p id="6b6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如何使用ELK堆栈进行日志分析</p><p id="e525" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">麋鹿栈的架构。</strong></p><p id="74e1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于小型开发环境，ELK堆栈管道如下所示:</p><p id="3f74" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Beats(数据收集)-&gt;Redis，Kafka，Rabbit MQ(缓冲)-&gt; Logstash(数据聚合和处理)-&gt;Elasticsearch(索引和存储)-&gt;Kibana(分析和可视化)</p><p id="6d15" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是对于复杂的场景，管道如下所示:</p><p id="c975" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Beats(数据收集)-&gt;Logstash(数据聚合和处理)-&gt;Elasticsearch(索引和存储)-&gt;Kibana(分析和可视化)</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/edbc72561aecee252702e6dd4a618edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3bTVMXSdREWyRpY3cpPscg.png"/></div></div></figure><p id="91c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jk">图-2:有卡夫卡的麋鹿栈建筑(来源:</em><a class="ae ke" href="https://elastic-stack.readthedocs.io" rel="noopener ugc nofollow" target="_blank"><em class="jk">https://elastic-stack . readthedocs . io</em></a><em class="jk">)</em></p><p id="d803" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，无限扩展的生产环境存在一个瓶颈:</p><p id="c8db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Logstash需要用管道和过滤器处理日志，这需要相当长的时间，如果存在日志突发，这可能会成为瓶颈；</p><p id="c514" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Elasticsearch需要对日志进行索引，这非常耗时，当日志突发时，这成为一个瓶颈。</p><p id="6343" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上面提到的瓶颈可以通过添加更多的Logstash部署和扩展Elasticsearch集群来解决，也可以像所有其他IT解决方案一样通过在中间引入缓存层来解决。利用缓存层的最流行的解决方案之一是将Kafka集成到ELK堆栈中。</p><p id="13ad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">工艺流程:</strong></p><p id="e200" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据通过beats收集并处理到kafka，Kafka可以作为一个数据中心，Beats可以保存到Kafka，Logstash节点可以从Kafka消费日志，Logstash从Kafka消费日志以进行日志处理。将数据输入Logstash的常见方式是通过HTTP、TCP和UDP协议。Logstash可以使用各自的<a class="ae ke" href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-tcp.html" rel="noopener ugc nofollow" target="_blank"> TCP </a>、<a class="ae ke" href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-udp.html" rel="noopener ugc nofollow" target="_blank"> UDP </a>和<a class="ae ke" href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-http.html" rel="noopener ugc nofollow" target="_blank"> HTTP </a>输入插件来公开端点监听器。经过处理后，处理后的日志存储在Elasticsearch中，并由Kibana用于度量可视化。</p><p id="cc7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">实时用途:</strong></p><p id="e791" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了日志分析之外，下面是一些实时用例，在这些用例中，Elasticsearch得到了广泛的应用:</p><p id="d682" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.<strong class="ig hi">文本挖掘和自然语言处理(NLP): </strong> Elasticsearch作为搜索和分析引擎被广泛使用。以下是一些使用案例:</p><p id="3fdb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大多数NLP任务从标准预处理管道开始，例如:</p><p id="c82c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.收集数据</p><p id="554a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.提取原始文本</p><p id="017f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.句子分割</p><p id="cbce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.标记化</p><p id="b129" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.规范化(词干化和词汇化等..)</p><p id="def3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.停用词删除</p><p id="fdb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">7.词性标注</p><p id="8329" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">A.预处理(标准化)</p><p id="21de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你用过' _analyze '端点吗？ElasticSearch内置了20多个语言分析器。“分析器”是干什么的？标记化、词干化和停用词移除。对于更高级的任务，如机器学习、语言建模等，这通常是我们所需要的全部预处理。我们基本上只需要一个运行的ElasticSearch实例，不需要任何配置或设置。然后,‘analyze-endpoint’可以用作NLP预处理的Rest-API。更多信息请访问:<a class="ae ke" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/guide/en/elastic search/reference/current/indexes-analyze . html</a>。</p><p id="33c2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">B.语言检测</p><p id="ef2b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“语言检测”是自然语言处理问题中的一个主要挑战。这可以通过安装Elasticsearch的另一个插件“langdetect”来解决。更多信息请访问:【https://github.com/jprante/elasticsearch-langdetect<a class="ae ke" href="https://github.com/jprante/elasticsearch-langdetect" rel="noopener ugc nofollow" target="_blank">。它使用3-gram字符和支持各种标准化和特征采样技术的贝叶斯过滤器。对53种语言的准确率超过99%。是不是挺好的？该插件提供了一个“映射类型”来指定我们想要启用语言检测的字段。该插件提供了一个REST端点，我们可以在这里发布一个UTF 8格式的短文本，插件用一个可识别的语言列表来响应。当该查询被触发时会发生什么？</a></p><p id="e399" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它将分析我们的输入文本，这些文本要么来自索引中的文档，要么直接来自类似的文本。它将从该文本中提取最重要的关键字，并使用所有这些关键字运行“布尔”查询。</p><p id="f3f6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它怎么知道什么是关键字？</p><p id="0aa9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以用公式来确定关键词，该公式将应用于一组文档，并且可以用于基于单词概率将文档的子集与所有文档进行比较。它被称为Tf-Idf，这是一个非常重要的文本挖掘公式。与整个文档集相比，它为子集中的每个术语分配一个分数。高分表示一个术语更有可能标识或表征当前文档子集，并将其与所有其他文档清楚地区分开。</p><p id="4a6c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">C.推荐引擎</p><p id="a0cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基本上，推荐引擎可以分为两种类型:社会化和基于内容的。像亚马逊电子商务网站这样的社交推荐引擎被称为“协同过滤”,其中推荐发生在购买了该产品的人身上……另一种类型的推荐引擎被称为“基于项目的推荐引擎”,它试图根据条目的属性对数据集进行分组，用于回答“任何与我最近阅读的论文相似的小说或科学论文”</p><p id="b46a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有了Elasticsearch，我们可以轻松构建一个基于项目的推荐引擎。</p><p id="1ca8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们只是根据我们的数据配置“MLT”查询模板。我们将使用实际的项目ID作为起点，并从您的索引中推荐最相似的文档。我们可以通过运行一个bool查询来添加自定义逻辑，该查询结合了一个函数score查询，以便在类似的查询之上增加流行度或最近度。“更像这样”(MLT)查询查找与给定文档集“相似”的文档。为此，MLT选择这些输入文档的一组代表性术语，使用这些术语形成查询，执行查询并返回结果。用户控制输入文档、如何选择术语以及如何形成查询。更多信息请访问:<a class="ae ke" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-mlt-query.html" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/guide/en/elastic search/reference/current/query-DSL-MLT-query . html</a>。</p><p id="8365" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">D.重复检测</p><p id="f14c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们有几个来源的数据(新闻、联盟广告等。)可能存在这样的可能性，我们正在将我们的模型运行到具有许多副本的数据集中，这对于大多数终端用户应用程序来说是不希望的行为。</p><p id="1ef2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它是如何工作的？</p><p id="5405" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重复检测面临一个挑战:</p><p id="7383" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要成对地比较所有的文件。目标是保留第一个被检查的元素并丢弃所有其他元素。所以我们需要很多自定义逻辑来选择要查看的第一个文档。由于复杂性非常高，离线检测重复是非常困难的，但是的，在线工具非常需要这样做。用于重复检测的行业标准的通用算法是Simhash和Minhash(由Google和Twitter使用)。它们为所有文档生成哈希，将它们存储在一个额外的数据存储中，并使用相似度函数，超过某个阈值的文档被视为重复。对于非常短的文档，我们可以使用Levenshtein距离或最小编辑距离。但是对于较长的文档，我们可能希望依靠基于令牌的解决方案。<a class="ae ke" href="https://www.elastic.co/blog/how-to-find-and-remove-duplicate-documents-in-elasticsearch" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/blog/how-to-find-and-remove-duplicate-documents-in-elastic search</a>。</p><p id="2163" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 2。</strong> <strong class="ig hi">图像处理:</strong></p><p id="1e95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你能想象如果有一个带有图像搜索功能的工具该有多好吗？</p><p id="fad0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这可以通过deep detect(【https://www.deepdetect.com/】)来解决。我们将图像发送到Deepdetect，对图像进行注释，然后注释和图像URL被索引到Elastic-search中，无需任何粘合代码。Deepdetect是一种分类服务，可以区分1000种不同的图像类别，从“救护车”到“挂锁”到“刺猬”，并将图像及其类别索引到弹性搜索的实例中。对于每个图像，Deepdetect服务器通过避免深度学习服务器和弹性搜索之间的粘合代码，直接将预测的类别索引到弹性搜索中。DeepDetect支持<a class="ae ke" href="http://www.deepdetect.com/api/?shell#output-templates" rel="noopener ugc nofollow" target="_blank">输出模板</a>，它允许将DeepDetect服务器的标准输出转换为任何自定义格式，这提供了搜索带文本的图像的功能，即使没有标题。它也是可扩展的，因为预测在批量图像上工作，并且多个预测服务器可以被设置为并行工作。以下是一些可以通过使用deepdetect解决的使用案例:</p><p id="fb2b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从二进制文件中检测无签名恶意软件</p><p id="b844" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从原始流量日志中检测异常</p><p id="d231" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从SOC警报中过滤误报</p><p id="e82d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">域生成算法检测</p><p id="7354" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">GPU上的URL过滤和聚类</p><p id="6fee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 3。</strong> <strong class="ig hi">附加应用:</strong></p><p id="ad76" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Elastic Stack以及定制的弹性搜索插件有助于推动以下内容搜索体验:</p><p id="d4c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基于计算机视觉和元数据的搜索</p><p id="4a84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">深度文本和混合内容搜索</p><p id="cfb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">视频和更丰富的格式搜索</p><p id="0121" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">企业搜索</p><p id="ad2b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">发现和建议</p><p id="24b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 4。</strong> <strong class="ig hi">抓取和文档处理:</strong></p><p id="c97b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">StormCrawler是一个流行且成熟的开源网络爬虫，它用来为搜索引擎提供文档索引，而Elastic是一个用于搜索和分析的开源工具，我们需要StormCrawler中的资源来实现这一点。弹性搜索模块中的IndexBolt获取由StormCrawler获取并解析的网页，并将其发送给弹性搜索进行索引。它构建一个文档表示，其中包含URL、解析器提取的文本以及解析期间提取的任何相关元数据，如页面标题、关键字、摘要、语言、主机名等。StormCrawler附带了各种用于数据提取的资源，可以很容易地进行配置或扩展。</p><p id="fcd0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">StormCrawler与其他网络爬虫的区别在于，它也使用弹性搜索作为存储的后端。弹性搜索是实现这一目标的绝佳资源，它提供了数据的可见性和出色的性能。弹性搜索模块包含许多spout实现，它们查询状态索引以获取供StormCrawler获取的URL。更多信息请访问:<a class="ae ke" href="https://www.elastic.co/blog/stormcrawler-open-source-web-crawler-strengthened-by-elasticsearch-kibana" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/blog/storm crawler-open-source-we B- crawler-strengthed-by-elastic search-ki Bana</a>。</p><p id="bb99" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.<strong class="ig hi">多重租赁</strong>:</p><p id="6701" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，我们有多个客户或用户拥有不同的文档集合，一个用户永远不能搜索不属于他的文档。然后我们最终得到一个设计，每个用户都有自己的索引。通常，这导致了太多的索引。几乎在每种情况下，我们都看到实现了每用户索引，而我们可以有一个更大的弹性搜索索引来解决拥有大量小索引的以下缺点:</p><p id="20c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">内存开销是可以控制的，因为成千上万的小索引会消耗大量的堆空间。</p><p id="9e19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可能会有很多重复。</p><p id="a4c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">结论:</strong></p><p id="ff0e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用弹性搜索可以学到很多东西，有时很难知道自己需要学习什么。在本文中，我介绍了相当多的常见用例，以及所有这些用例需要注意的一些重要事项。</p></div></div>    
</body>
</html>