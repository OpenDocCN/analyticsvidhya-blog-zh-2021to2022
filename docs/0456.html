<html>
<head>
<title>Multicollinearity in Multiple Linear Regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多元线性回归中的多重共线性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/multicollinearity-in-multiple-linear-regression-e23997406c70?source=collection_archive---------13-----------------------#2021-01-17">https://medium.com/analytics-vidhya/multicollinearity-in-multiple-linear-regression-e23997406c70?source=collection_archive---------13-----------------------#2021-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/23ef55ae35dba92dbe974dceb9312e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S6yoA1DWBNifZCjM"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@murai?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Murai拍摄。hr </a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="7af4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我经常在面试中听到关于线性回归中多重共线性问题的不同变体。它们听起来可能像:如何处理多元线性回归中的多重共线性？如何解决多重共线性？为什么多重共线性是一个潜在的问题？我决定把这个问题联合起来，为它找到一个精确的答案。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="14e6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从头开始。什么是多元线性回归？多元线性回归(MLR)或多重回归是简单线性回归的扩展。我们用它来估计两个或多个自变量和一个因变量之间的关系。因此，我们可以使用以下公式来执行MLR:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/7f8fbddd759bbd97887132d2c3613a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*ToA8ZzKgljNDnFsIIOlukw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">MLR公式</figcaption></figure><p id="64f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其中:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/2751c5043b5e68c7148813c04a1b6bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*Ds5-G1Ax6wS_VxCJBaL2ew.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">公式中的所有信息</figcaption></figure><p id="6ff7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">多元回归比简单回归更接近现实生活，因为它可以显示变量之间的关系有多强，以及它们如何相互作用。比如降雨量、温度和肥料添加量如何影响植物，或者利率和失业率如何影响股票指数价格。</p><blockquote class="kg kh ki"><p id="36f7" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">使用<strong class="ix hj"> <em class="hi"> MLR </em> </strong>当你需要知道:</p><p id="ce38" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">—两个或多个自变量和一个因变量之间的关系有多强。</p><p id="a45f" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">—自变量的某个值处因变量的值</p></blockquote></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h2 id="721e" class="kn ko hi bd kp kq kr ks kt ku kv kw kx jg ky kz la jk lb lc ld jo le lf lg lh bi translated">为什么多重共线性是一个潜在的问题？</h2><p id="f105" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">每一个回归分析都有一个目标，即找到并隔离每个自变量和因变量之间的关系。用回归系数表示的关系。当我们解释回归系数时，我们知道当我们保持所有其他自变量不变时，它代表自变量每单位变化的因变量的平均变化。换句话说，一个独立变量可以通过一个或多个其他独立变量进行线性预测。但是这里我们面临一个现象，当一个独立变量与多元回归方程中的一个或多个其他独立变量高度相关时。这给我们带来了模型解释和可信结果的问题。</p><blockquote class="kg kh ki"><p id="5602" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">当回归模型中的两个或多个独立变量高度相关时，就会出现多重共线性。</p></blockquote></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h2 id="e374" class="kn ko hi bd kp kq kr ks kt ku kv kw kx jg ky kz la jk lb lc ld jo le lf lg lh bi translated">如何检测数据中的多重共线性？</h2><p id="6b8b" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">有两种简单的方法可以在EDA上指示数据集中的多重共线性或使用Python获取步骤。</p><ol class=""><li id="9fcb" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js ls lt lu lv bi translated"><strong class="ix hj">方差膨胀因子(VIF)。</strong></li><li id="e168" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">热图或关联矩阵。</strong></li></ol><p id="e755" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方差膨胀因子</strong>是多元回归中预测变量之间共线性的度量。它的计算方法是，将所有给定模型测试版的方差之比除以单个测试版的方差(如果它单独适用的话)。</p><p id="1695" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，我们正在根据身高和体重变量为身体质量指数创建一个变量，该变量将包含模型中的冗余信息。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/3d0162f40809c049eb288da6c2cc81e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*VAGUQvOX73TyMXl-XknjKw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">身体质量指数数据集</figcaption></figure><p id="26b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集有三个独立变量:</p><ul class=""><li id="0247" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js mc lt lu lv bi translated">性别——我们可以为这个专栏创建虚拟人物</li><li id="5d45" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js mc lt lu lv bi translated">高度</li><li id="070c" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js mc lt lu lv bi translated">重量</li></ul><p id="f426" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我用<strong class="ix hj"><em class="kj">stats models . outliers _ influence</em></strong>库<strong class="ix hj"> <em class="kj"> </em> </strong>来计算VIF因子。如果VIF介于5-10之间，则可能存在多重共线性，您应该考虑删除该变量。</p><pre class="kb kc kd ke fd md me mf mg aw mh bi"><span id="4453" class="kn ko hi me b fi mi mj l mk ml"><strong class="me hj"><em class="kj"># import necessary libraries<br/></em></strong>from statsmodels.stats.outliers_influence import variance_inflation_factor</span><span id="c2c4" class="kn ko hi me b fi mm mj l mk ml"><strong class="me hj"><em class="kj"># the independent variables set </em></strong><br/>X = data[['Gender', 'Height', 'Weight']] <br/>  <br/><strong class="me hj"><em class="kj"># VIF dataframe </em></strong><br/>vif_df = pd.DataFrame() <br/>vif_df["feature"] = X.columns <br/>  <br/><strong class="me hj"><em class="kj"># calculating VIF for each feature </em></strong><br/>vif_df["VIF"] = [variance_inflation_factor(X.values, i) <br/>                          for i in range(len(X.columns))]</span></pre><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/2762fab6db602c4edb44238cea91f2ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*Msniuu0wQZkuwuDuuvBj3g.png"/></div></figure><p id="a4f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们在这里可以看到，身高和体重变量高度相关，因为VIF对他们来说超过10。</p><p id="b9ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">热图是</strong>一个带有颜色渐变背景的相关矩阵。这个范围从0到1，1表示完全相关:</p><ul class=""><li id="12fe" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js mc lt lu lv bi translated">在<strong class="ix hj"> 0.9 </strong>和<strong class="ix hj"> 1.0 </strong>之间表示<strong class="ix hj">非常高度相关的变量；</strong></li><li id="8080" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js mc lt lu lv bi translated">在<strong class="ix hj"> 0.7 </strong>和<strong class="ix hj"> 0.9 </strong>之间表示可以认为<strong class="ix hj">高度相关的变量；</strong></li><li id="15c2" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js mc lt lu lv bi translated">在<strong class="ix hj"> 0.5 </strong>和<strong class="ix hj"> 0.7 </strong>之间表示可以认为<strong class="ix hj">中度相关的变量；</strong></li><li id="e6bc" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js mc lt lu lv bi translated">在<strong class="ix hj"> 0.3 </strong>和<strong class="ix hj"> 0.5 </strong>之间意味着<strong class="ix hj">低相关。</strong></li></ul><h2 id="f1e8" class="kn ko hi bd kp kq kr ks kt ku kv kw kx jg ky kz la jk lb lc ld jo le lf lg lh bi translated">如何修复数据中的多重共线性？</h2><p id="03c7" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">当我们希望在预测中避免高度相关的变量时，我们可以使用以下解决方案之一:</p><ol class=""><li id="efa1" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js ls lt lu lv bi translated"><strong class="ix hj">特色工程。</strong></li><li id="b43c" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">掉一个。</strong></li></ol><p id="440a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">特征工程是将两个高度相关的特征聚合或组合起来，并把它们变成一个变量。</p><p id="4e6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">删除一个变量听起来很容易，但是在你决定应该删除哪个变量之前，需要一个合适的EDA。</p><h2 id="d221" class="kn ko hi bd kp kq kr ks kt ku kv kw kx jg ky kz la jk lb lc ld jo le lf lg lh bi translated">摘要</h2><p id="5fd0" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">多重共线性是一个需要解决的有趣问题。当我们检查多重共线性时，我们应该检查多个指标，并在它们之间寻找模式。</p></div></div>    
</body>
</html>