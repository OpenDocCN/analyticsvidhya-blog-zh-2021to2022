<html>
<head>
<title>Convolution Operation in CNN:</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CNN中的卷积运算；</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/convolution-operation-in-cnn-a3352f21613?source=collection_archive---------9-----------------------#2021-04-19">https://medium.com/analytics-vidhya/convolution-operation-in-cnn-a3352f21613?source=collection_archive---------9-----------------------#2021-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d7e585483906dd3baba4a3f7f22b8d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qwlwaeaw8ZoMJlioAw4zGw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:走向数据科学</figcaption></figure><h2 id="5b7b" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">那么什么是卷积运算呢:</h2><p id="0d6b" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated"><strong class="ju hj">卷积运算:</strong> As卷积是对两个函数的数学运算，产生第三个函数，表示一个函数的形状如何被另一个函数修改。</p><p id="e8da" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">类似地，CNN更像是一种卷积运算，我们进行不同的测量，并更多地依赖于邻近的测量来获得更好的结果。因此，我们在这里采用修正的测量值，这是所采用的测量值的加权平均值，使得最近的测量值被赋予比先前所采用的测量值更大的权重。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es ks"><img src="../Images/e0e555e454032ea4b038105d53533e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*09um9N4C_D1zDghgon8QlA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">卷积运算</figcaption></figure><p id="69a6" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">类似地，对于2D输入，我们通过对所有相邻像素进行加权平均来重新估计每个像素。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/ad57c12b9614b1edccc61855dbe4f066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49qX3xgNRBJ6qXVmRm8XVw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:IBM</figcaption></figure><h2 id="542f" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">我们可以通过应用不同的滤镜来给我们的图像应用不同的效果:</strong></h2><ol class=""><li id="d1b1" class="ky kz hi ju b jv jw jz ka jf la jj lb jn lc km ld le lf lg bi translated"><strong class="ju hj">模糊图像</strong>:用加权平均代替每个像素。</li></ol><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/b488f92a7b5f2fb24ca28db5b3458c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZeyXegxCgPsh9v4UZ6RewA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:国家公共电话公司</figcaption></figure><p id="9681" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">2.<strong class="ju hj">锐化图像:</strong>取当前像素的5倍，并从中减去相邻像素，从而得到锐化的图像。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/b70edc3510e5509d673afb49df9fb8ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkMkVrhp5RYzZnF_NOW-bg.png"/></div></div></figure><p id="53b1" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">3.<strong class="ju hj">边缘检测器:</strong>当邻居与像素相同时，它将产生零输出，当邻居不同时，即在边界的情况下，它将作为边缘检测器。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/dfbbd5aeda24208df4d9e6d1251b5468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nXp5-hEuGpQgnv-MIRC7xA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:国家公共电话公司</figcaption></figure><p id="92ad" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">将k个过滤器应用于输入会产生k个特征地图。对于1d输入和1d滤波器，我们有1d输出，对于2d输入和2d滤波器，我们有2d输出，而对于3d输入和3d滤波器，我们将有2d输出，因为输入和滤波器的深度是相同的。</p><h2 id="60e6" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">输入尺寸、过滤器尺寸和输出尺寸之间的关系:</h2><p id="585a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">假设输入参数是:</p><p id="7394" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">W1:输入的宽度，H1:输入的高度，D1:输入的深度。</p><p id="7cc0" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">f:过滤器的空间范围，K:过滤器的数量，过滤器的深度:D1。</p><p id="1d40" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">输出参数将是:</p><p id="fd0e" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">因此，如果我们应用空间范围F的过滤器，输出数组的宽度和高度减少的F-1小于输入数组的宽度和高度。因为滤波器不能捕获一些像素，因为这样滤波器将超出边界。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/36bb04acd0858b0a10b753f72b9424dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*Av-0CdvhiV9evxkVimPpig.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">过滤器无法捕捉以黑色突出显示的像素。</figcaption></figure><p id="9e08" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated"><code class="du ll lm ln lo b">W2 = W1-(F-1) , H2 = H1-(F-1)</code></p><p id="974b" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">→ <strong class="ju hj">填充:</strong>如果我们希望输出的大小与输入的大小相同，我们可以应用填充。有了这个的帮助，我们甚至可以捕捉到那些我们以前无法通过假设它们周围的边界来捕捉的像素。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/5e2d5d77c55009822a6313b621da5176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*Qnc3fzASKovkaGvZZGGUlA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">现在输出尺寸将增加，因为过滤器能够捕捉更多的像素。</figcaption></figure><p id="ef2c" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">所以填充后输入输出参数之间的关系是:</p><p id="0fe9" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated"><code class="du ll lm ln lo b">W2 = W1-(F-1)+2*P , H2= H1-(F-1)+2*P</code></p><p id="ad3b" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">因为填充1意味着在顶部和底部添加1行，在左侧和右侧添加1列，所以我们添加了两倍的填充。</p><p id="b2c0" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">→ <strong class="ju hj">步幅</strong>:应用滤镜的间隔。如果stride为2，这意味着我们正在对交替像素应用过滤器，因此输出的大小将会减小。所以在施加步幅时，输入和输出的大小之间的关系是:</p><p id="93fb" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated"><code class="du ll lm ln lo b">W2 = ((W1-F+2*P)/S) +1 , H2 = ((H1-F+2*P)/S) +1</code></p><p id="fccb" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">→ <strong class="ju hj">输出深度:</strong>因为每个滤镜产生一个2d输出，所以应用k个滤镜产生k深度的输出。</p><p id="bea1" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated"><code class="du ll lm ln lo b">D2 = Number Of Filters = K</code></p><p id="fd2e" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">文章结束。</p><p id="9424" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">希望有帮助！</p><p id="77e0" class="pw-post-body-paragraph js jt hi ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km hb bi translated">谢谢，祝您愉快:)</p></div></div>    
</body>
</html>