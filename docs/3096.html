<html>
<head>
<title>Basics of setup required for using Python Face Recognition library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python人脸识别库所需的基本设置</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/basics-of-setup-required-for-using-python-face-recognition-library-ae96bf29acca?source=collection_archive---------8-----------------------#2021-06-06">https://medium.com/analytics-vidhya/basics-of-setup-required-for-using-python-face-recognition-library-ae96bf29acca?source=collection_archive---------8-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在Python中设置人脸检测和人脸编辑技术编程环境的快速指南。</strong></p><p id="1d81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个博客中，我们将看到如何设置环境来编写程序，进行人脸识别，人脸检测和人脸化妆，年龄和性别识别。我们将使用位于https://pypi.org/project/face-recognition/<a class="ae jd" href="https://pypi.org/project/face-recognition/" rel="noopener ugc nofollow" target="_blank">的用于人脸识别的python库</a>，为此，我们将学习Linux操作系统中Tensorflow和Keras深度学习库的安装和使用。</p><h1 id="5703" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">环境设置</h1><p id="7c8d" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">首先我们需要安装Anaconda，它包含conda、Anaconda Navigator、Python和许多用于机器学习的科学包。Anaconda Navigator是一个GUI，允许您启动像Spyder IDE这样的应用程序，用于以最佳方式进行深度学习编程，还可以轻松管理conda包。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="87ae" class="kq jf hi km b fi kr ks l kt ku">#Prepare build environment with below packages ,<br/>sudo apt-get update<br/>sudo apt-get install build-essential cmake<br/>sudo apt-get install libopenblas-dev liblapack-dev<br/>sudo apt-get install libx11-dev libgtk-3-dev’<br/>sudo apt-get install python python-dev python-pip<br/> <br/> <br/>#Install the following extended dependencies for Qt required for the GUI packages of Anaconda<br/>apt-get install libgl1-mesa-glx libegl1-mesa libxrandr2 libxrandr2 libxss1 libxcursor1 libxcomposite1 libasound2 libxi6 libxtst6<br/>#Download Anaconda installer script from the link below,<br/>#<a class="ae jd" href="https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh</a><br/>sudo sh ./Anaconda3–2021.05-Linux-x86_64.sh -u<br/>#Check the installed version is ok<br/>conda info<br/>source ~/.bashrc<br/>python — version<br/>#Try launching Spyder IDE <br/>spyder</span></pre><p id="287a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经准备好编程的IDE，接下来让我们安装从https://pypi.org/project/face-recognition/的<a class="ae jd" href="https://pypi.org/project/face-recognition/" rel="noopener ugc nofollow" target="_blank">网站编写人脸识别程序所需的python库，我们可以使用conda命令来安装下面列出的库</a></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1ca1" class="kq jf hi km b fi kr ks l kt ku">#create a environment for face recognition project <br/>conda create -n env_facerecog python==3.7.9 anaconda<br/>conda activate env_facerecog<br/>#Install dlib library<br/>conda install -c conda-forge dlib<br/>#Install opencv library</span></pre><p id="e042" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经准备好编程的IDE，接下来让我们安装从网站<a class="ae jd" href="https://pypi.org/project/face-recognition/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/face-recognition/</a>编写人脸识别程序所需的python库，我们可以使用conda命令来安装下面列出的库</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="26a2" class="kq jf hi km b fi kr ks l kt ku">#create a environment for face recognition project <br/>conda create -n env_facerecog python==3.7.9 anaconda<br/>conda activate env_facerecog<br/>#Install dlib library<br/>conda install -c conda-forge dlib<br/>#Install opencv library<br/>conda install -c conda-forge opencv<br/>#Install face_recognition library<br/>conda install -c conda-forge face_recognition</span></pre><p id="3abb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要安装程序从环境中打开spyder IDE<br/>(env _ facerecog)chithrarajeev @ rk Lenovo:spyder<br/>创建一个测试文件test_env.py并尝试打印我们安装的库的版本，如下所示</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d672" class="kq jf hi km b fi kr ks l kt ku">(env_facerecog) chithrarajeev@rklenovo:spyder<br/>#import the libraries<br/>import cv2<br/>import dlib<br/>import face_recognition<br/>#printing the versions of libraries required<br/>print(“Version of OpenCV is” ,cv2.__version__)<br/>print(“Version of Dlib C++ toolkit for ML is” ,dlib.__version__)<br/>print(“Version of face_recognition is” ,face_recognition.__version__)</span></pre><blockquote class="kv kw kx"><p id="d5b2" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">#输出如下<br/>OpenCV版本为4 . 5 . 2<br/>Dlib c++ toolkit for ML版本为19 . 22 . 0<br/>face _ recognition版本为1.2.3</p></blockquote><p id="1586" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时conda安装可能会出现以下错误，如果您遇到以下任何错误，请尝试安装库的pip</p><blockquote class="kv kw kx"><p id="aa02" class="if ig ky ih b ii ij ik il im in io ip kz ir is it la iv iw ix lb iz ja jb jc hb bi translated">导入错误:没有名为“dlib <br/>的模块导入错误:没有名为“cv2”的模块</p></blockquote><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1e58" class="kq jf hi km b fi kr ks l kt ku">(env_facerecog) chithrarajeev@rklenovo:pip install opencv-contrib-python<br/>(env_facerecog) chithrarajeev@rklenovo:pip install dlib<br/>(env_facerecog) chithrarajeev@rklenovo:pip install face_recognition</span></pre><p id="134c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果pip安装有问题，尝试添加所需的软件包的正确通道，也尝试使用选项'-c conda-forge '重新安装conda，如下所示</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="fedc" class="kq jf hi km b fi kr ks l kt ku">conda create -n env_facerecog python matplotlib opencv scipy anaconda -c conda-forge<br/>conda config — set channel_priority false<br/>conda activate env_facerecog</span></pre><p id="77aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用下面显示的程序，我们可以检测图像中的人脸，并分别显示出来</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="c5b9" class="kq jf hi km b fi kr ks l kt ku">#!/usr/bin/env python3<br/>#import libraries<br/>import cv2<br/>import face_recognition</span><span id="c7ae" class="kq jf hi km b fi lc ks l kt ku">#load the Input image file<br/>image_to_detect = cv2.imread(r'images/shreya/shreya_CCL_match_India.jpg')<br/>#Show the Input image file<br/>cv2.imshow("Input Image ",image_to_detect)<br/>#locate theface locations<br/>all_face_locations = face_recognition.face_locations(image_to_detect,model='hog')<br/>#Print the face location details<br/>print('There are {}  faces in this CCL  India match picture of shreya'.format(len(all_face_locations)))</span><span id="2a26" class="kq jf hi km b fi lc ks l kt ku">#looping through the face locations and dispaly each of them<br/>for index,current_face_location in enumerate(all_face_locations):<br/>    #splitting the tuple to get the four position values of current face<br/>    top_pos,right_pos,bottom_pos,left_pos = current_face_location<br/>    #printing the location of current face<br/>    print('Found face {} at top:{},right:{},bottom:{},left:{}'.format(index+1,top_pos,right_pos,bottom_pos,left_pos))<br/>    #slicing the current face from main image<br/>    current_face_image = image_to_detect[top_pos:bottom_pos,left_pos:right_pos]<br/>    #showing the current face with dynamic title</span><span id="80a1" class="kq jf hi km b fi lc ks l kt ku">    cv2.imshow("Face no "+str(index+1),current_face_image)</span></pre><figure class="kh ki kj kk fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ld"><img src="../Images/18426273f254513937ba09cc3039b248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYIf2nFF4ErWX7PRowP31A.png"/></div></div></figure><p id="4d50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，我们可以使用图像帧识别录制的视频或直播视频中的人脸。</p><p id="d442" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在识别了图像中的人脸后，我们可以使用这些人脸数据来识别图像中的人，找到人脸图像的年龄和性别，还可以识别人脸中的情绪，如愤怒、悲伤、快乐、厌恶、恐惧、惊讶、中立和蔑视，使用深度学习算法，这些算法在Tensonflow框架<a class="ae jd" href="https://www.tensorflow.org/tutorials" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/tutorials</a>中可供我们使用，可以在Keras库<a class="ae jd" href="https://keras.io/getting_started/intro_to_keras_for_engineers/" rel="noopener ugc nofollow" target="_blank">https://Keras . io/getting _ started/intro _ to _ Keras _ for _ engineers/【中提供的包装器的帮助下使用在这里，我们将看到安装张量流和Keras深度学习库的步骤。</a></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="8c49" class="kq jf hi km b fi kr ks l kt ku">#install tensor flow library<br/>(env_facerecog) chithrarajeev@rklenovo:sudo pip install tensorflow</span></pre><p id="722d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ky">注意，安装tensor flow库需要很长时间，并显示消息“正在下载tensor flow-2 . 5 . 0-cp37-cp37m-many Linux 2010 _ x86 _ 64 . whl(454.3 MB)”“</em></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="016b" class="kq jf hi km b fi kr ks l kt ku">#install keras library<br/>(env_facerecog) chithrarajeev@rklenovo:~$ sudo pip install keras</span></pre><p id="9429" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们有了环境设置来编写程序，使用识别的人脸进行人脸识别、人脸情感检测、年龄和性别检测。</p></div></div>    
</body>
</html>