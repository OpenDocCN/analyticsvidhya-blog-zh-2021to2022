<html>
<head>
<title>How I built a Twitter dashboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何建立一个Twitter仪表板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-i-built-a-twitter-dashboard-4d5d0e53c36c?source=collection_archive---------8-----------------------#2021-01-03">https://medium.com/analytics-vidhya/how-i-built-a-twitter-dashboard-4d5d0e53c36c?source=collection_archive---------8-----------------------#2021-01-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="01c6" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">从构建ETL管道到自动更新仪表板。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/4660801bbea7a3bdb34e152746110c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2CAyicrTGHepi5xuC52ekg.gif"/></div></div></figure><p id="bed2" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在这篇文章中，我想分享我如何使用Python从Twitter API中提取数据，并将它们传输到PostgreSQL数据库中，执行情感分析，并进一步使用Tableau构建仪表板来跟踪每周趋势。</p><h2 id="3eab" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">背景</h2><blockquote class="kz la lb"><p id="48ff" class="ji jj lc jk b jl jm ii jn jo jp il jq ld js jt ju le jw jx jy lf ka kb kc kd ha bi translated">根据Twitter的使用统计，每天有5亿条推文被发送。月活跃用户3.3亿。<em class="hh">——</em><a class="ae lg" href="https://www.brandwatch.com/blog/twitter-stats-and-statistics/#:~:text=Twitter%20usage%20statistics,That's%206%2C000%20tweets%20every%20second." rel="noopener ugc nofollow" target="_blank"><em class="hh"/>名表</a></p></blockquote><p id="df96" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">作为一名数据分析师，我很好奇人们在Twitter上说了什么，他们多久发一次微博，人们对特定标签的态度等等。Twitter API 为我们提供了一种简单的方法来检索关于特定关键词和标签的推文。换句话说，我可以利用这个工具来分析任何我感兴趣的话题。</p><p id="d3c8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我已经参与了几个月的周一改造项目。“改头换面星期一”是一个社交数据项目，每周都会修改一张图表，更有效地复述一个故事，甚至找到更多有趣的见解。2020年一直是我最喜欢的项目。社区将在Twitter上分享他们的想法，并与其他成员互动。因此，我有兴趣从#改头换面星期一这个标签中了解更多。</p><h2 id="1d7c" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">目标</h2><p id="2411" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">这个项目旨在建立一个自动ETL管道，让我可以轻松地在每周一更新仪表板。为此，我选择将数据存储在Postgresql数据库中，这样我可以存储每周的新数据并加载到Tableau中。此外，我想写一个脚本，我可以重用不同的标签和关键字。</p><h2 id="f341" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">我的结果</h2><p id="4b90" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated"><a class="ae lg" href="https://github.com/thejasmine/twitter_scraper_PostgreSQL" rel="noopener ugc nofollow" target="_blank"> Github回购</a></p><p id="df4f" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><a class="ae lg" href="https://public.tableau.com/views/MakeoverMondayTwitterDashboard/TwitterDashboard?:language=en&amp;:display_count=y&amp;:toolbar=n&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank"> Tableau仪表盘</a></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/4660801bbea7a3bdb34e152746110c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2CAyicrTGHepi5xuC52ekg.gif"/></div></div></figure><h2 id="d2b5" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">一些见解💡</h2><p id="0a0a" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated"><em class="lc">基于2020年12月22日至2021年1月2日的数据。</em></p><ul class=""><li id="a31f" class="lm ln hh jk b jl jm jo jp jr lo jv lp jz lq kd lr ls lt lu bi translated">毫不奇怪，人们喜欢在周一发帖，因为这一天应该做项目。我也喜欢在周一完成我的项目，因为这可以迫使我更有效率。</li><li id="b088" class="lm ln hh jk b jl lv jo lw jr lx jv ly jz lz kd lr ls lt lu bi translated">95%的推文是正面的或自然的。人们很乐意分享他们的作品，并给予积极的反馈。</li></ul></div><div class="ab cl ma mb go mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ha hb hc hd he"><h1 id="3128" class="mh kf hh bd kg mi mj mk kk ml mm mn ko in mo io kr iq mp ir ku it mq iu kx mr bi translated">过程</h1><p id="a2a8" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">我会简单地分享我在这个项目中使用的工具和步骤。如果你有任何问题，请随时联系我。</p><h2 id="d9f2" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">我使用的工具</h2><p id="77c0" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">提取数据:Twitter API、Python (tweepy)</p><p id="b00f" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">将数据加载到PostgreSQL: Python(sqlalchemy)，PgAdmin</p><p id="1604" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">情感分析:Python(TextBlob，stopwords)</p><p id="b52c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">EDA和数据可视化:Tableau</p><h2 id="c989" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">连接Twitter API</h2><p id="f108" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">Medium里面有很多文章在讲如何连接Twitter API。第一步是去Twitter Developer注册一个账户，获取你的密钥。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="5aa1" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">以下是我用作参考的一些资源。有不同的连接方式。请随意使用您喜欢的任何方法:)</p><ul class=""><li id="1652" class="lm ln hh jk b jl jm jo jp jr lo jv lp jz lq kd lr ls lt lu bi translated"><a class="ae lg" href="https://www.tweepy.org/" rel="noopener ugc nofollow" target="_blank">十二年</a></li><li id="9340" class="lm ln hh jk b jl lv jo lw jr lx jv ly jz lz kd lr ls lt lu bi translated"><a class="ae lg" href="https://towardsdatascience.com/how-to-scrape-tweets-from-twitter-59287e20f0f1" rel="noopener" target="_blank">如何从推特上抓取推文</a></li><li id="2265" class="lm ln hh jk b jl lv jo lw jr lx jv ly jz lz kd lr ls lt lu bi translated"><a class="ae lg" href="https://chatbotslife.com/crawl-twitter-data-using-30-lines-of-python-code-e3fece99450e" rel="noopener ugc nofollow" target="_blank">使用30行Python代码抓取Twitter数据</a></li></ul><h2 id="0c5c" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">将数据流入Postgresql</h2><p id="8317" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">在这一步中，我使用了<a class="ae lg" href="https://www.sqlalchemy.org/" rel="noopener ugc nofollow" target="_blank"> SQLAlchemy </a>包。要记住的一件重要事情是，有时我们可能会从Twitter中提取重复的数据。因此，我们需要为我们的数据库设置一个约束，并使用下面的函数来跳过重复的行或更新现有的记录，以避免数据库中出现重复的记录。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><h2 id="9411" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">情感分析</h2><p id="6298" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">情感分析是一种使用NLP技术来判断文本数据是积极的、消极的还是中性的方法。这里我使用了<a class="ae lg" href="https://textblob.readthedocs.io/en/dev/quickstart.html" rel="noopener ugc nofollow" target="_blank"> TextBlob的</a> <a class="ae lg" href="https://textblob.readthedocs.io/en/dev/api_reference.html#textblob.blob.TextBlob.sentiment" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hi">情绪</strong> </a>属性来获取字符串的极性得分。范围[-1.0，1.0]内的极性得分。对于这个项目，我只对推文是正面的、中立的还是负面的感兴趣；因此我选择返回0(中性)，1(正)，-1(负)。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><h2 id="c331" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">数据可视化</h2><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mu"><img src="../Images/5989a7ce0bceb982306066c00ffb7b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJ667snz3fV1FXiDz4MKNA.png"/></div></div></figure><p id="2bc4" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">最后一步是将我的PostgreSQL数据库与Tableau连接起来。我纠结的一件事是PostgreSQL的版本。目前，Tableau在PostgreSQL 10上运行良好(对我来说是这样。)，但是PostgreSQL 12不行。即使Tableau update最新更新显示支持PostgreSQL 12。如果您有同样的问题，只需下载旧版本的PostgreSQL，并记住使用不同的端口号以避免冲突。</p><p id="38ef" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">对于仪表板设计，我想显示本周的总推文数、独立用户数、总转发数、正面和中性推文的百分比，以及与过去七天的比较。使用大散点图，我绘制了七天内的所有推文(您可以将参数更改为14或21)。它会显示该推文的用户名和特定用户的总转发数。</p><h2 id="436d" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">结论</h2><p id="59bc" class="pw-post-body-paragraph ji jj hh jk b jl lh ii jn jo li il jq jr lj jt ju jv lk jx jy jz ll kb kc kd ha bi translated">看到我可以轻松地构建数据管道和更新新数据，真是令人着迷。通过制作仪表板，我可以清楚地看到推文趋势，看到人们在谈论什么。</p><p id="24ca" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我希望你喜欢读这个:)</p><h2 id="a4d0" class="ke kf hh bd kg kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky bi translated">参考</h2><ul class=""><li id="81da" class="lm ln hh jk b jl lh jo li jr mv jv mw jz mx kd lr ls lt lu bi translated"><a class="ae lg" href="https://github.com/thejasmine/twitter_scraper_PostgreSQL" rel="noopener ugc nofollow" target="_blank"> Github回购</a></li><li id="e6dd" class="lm ln hh jk b jl lv jo lw jr lx jv ly jz lz kd lr ls lt lu bi translated"><a class="ae lg" href="https://public.tableau.com/profile/thejasmine#!/vizhome/MakeoverMondayTwitterDashboard/TwitterDashboard" rel="noopener ugc nofollow" target="_blank">画面仪表盘</a></li></ul></div></div>    
</body>
</html>