<html>
<head>
<title>How to take photos from the camera and gallery on android?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在android上从相机和图库中拍摄照片？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-take-photos-from-the-camera-and-gallery-on-android-87afe11dfe41?source=collection_archive---------1-----------------------#2021-01-27">https://medium.com/analytics-vidhya/how-to-take-photos-from-the-camera-and-gallery-on-android-87afe11dfe41?source=collection_archive---------1-----------------------#2021-01-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0283" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于一个Android新手来说，为了进行测试，你需要一个简单明了的指南。正如您所发现的，有许多关于这个主题的文章、网站和助手。然而，它们中的很大一部分并没有很好地工作，或者没有尝试过，或者太复杂以至于无法思考理解。让我带你通过一个最熟练的方法来执行这个没有任何问题的指南。</p><p id="d2b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以从<a class="ae jd" href="https://github.com/ayushgemini/android-choose-photo" rel="noopener ugc nofollow" target="_blank"> Github </a>下载完整的源代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/ee6f4e12a3100cda0d391250d3e190f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lUJ2LLOUGP7bjpBgwenctQ.jpeg"/></div></div></figure><p id="42d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，你必须在你的布局中实现一个<code class="du jq jr js jt b">ImageView</code>来捕捉你通过相机或图库上传的图像。</p><p id="16f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我为上述目的实现的<code class="du jq jr js jt b">ImageView</code>。</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="f25a" class="jy jz hi jt b fi ka kb l kc kd">&lt;ImageView<br/>        android:layout_width="match_parent"<br/>        android:id="@+id/my_avatar_imageview"<br/>        android:layout_height="wrap_content"<br/>        android:adjustViewBounds="true"<br/>         /&gt;</span></pre><p id="ab2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，这样做之后，您的activity_main.xml将如下所示。</p><p id="d322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">activity_main.xml</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="f793" class="jy jz hi jt b fi ka kb l kc kd">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"&gt;<br/>   &lt;ImageView<br/>        android:layout_width="match_parent"<br/>        android:id="@+id/my_avatar_imageview"<br/>        android:layout_height="wrap_content"<br/>        android:adjustViewBounds="true"<br/>         /&gt;<br/>&lt;/RelativeLayout&gt;</span></pre><p id="0181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在在MainActivity类中，您必须首先声明ImageView。</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="a02d" class="jy jz hi jt b fi ka kb l kc kd">private ImageView imageView;</span></pre><p id="20c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在onCreate override方法中，您必须通过添加以下内容来初始化ImageView元素，</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="31d4" class="jy jz hi jt b fi ka kb l kc kd">imageView = findViewById(R.id.my_avatar_imageview);</span></pre><h1 id="592c" class="ke jz hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">相机和外部存储器的运行时许可</h1><p id="be0f" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">如你所知，如果你使用的是棉花糖或更高版本的设备，那么你需要获得首次运行许可。对于我们的应用程序，我们将需要两个运行时权限。</p><ol class=""><li id="bb42" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">相机许可</li><li id="b5cf" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">外部存储权限</li></ol><p id="e592" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看你将如何获得这个许可</p><p id="2890" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，您需要在清单文件ie中定义这两个权限。AndroidManifest.xml</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="c12d" class="jy jz hi jt b fi ka kb l kc kd">&lt;uses-permission android:name="android.permission.CAMERA"/&gt;<br/> &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;</span></pre><p id="7d05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您的AndroidManifest.xml将如下所示:</p><p id="a9ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AndroidManifest.xml</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="6cee" class="jy jz hi jt b fi ka kb l kc kd">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"<br/>    package="com.geminisoftservices.choosephoto"&gt;</span><span id="a547" class="jy jz hi jt b fi lu kb l kc kd">    &lt;uses-permission android:name="android.permission.CAMERA"/&gt;<br/>    &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;</span><span id="f900" class="jy jz hi jt b fi lu kb l kc kd">    &lt;application<br/>        android:allowBackup="true"<br/>        android:icon="@mipmap/ic_launcher"<br/>        android:label="@string/app_name"<br/>        android:roundIcon="@mipmap/ic_launcher_round"<br/>        android:supportsRtl="true"<br/>        android:theme="@style/AppTheme"&gt;<br/>        &lt;activity android:name=".MainActivity"&gt;<br/>            &lt;intent-filter&gt;<br/>                &lt;action android:name="android.intent.action.MAIN" /&gt;</span><span id="037d" class="jy jz hi jt b fi lu kb l kc kd">                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br/>            &lt;/intent-filter&gt;<br/>        &lt;/activity&gt;<br/>    &lt;/application&gt;</span><span id="20e2" class="jy jz hi jt b fi lu kb l kc kd">&lt;/manifest&gt;</span></pre><p id="2f5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，在清单文件上添加了这两个权限之后，您需要创建一个函数来检查MainActivity上的运行时权限。如果用户没有权限，此功能将显示一个弹出窗口，以便用户可以单击“允许”按钮授予您的应用程序权限。</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="35a8" class="jy jz hi jt b fi ka kb l kc kd">// function to check permission</span><span id="6130" class="jy jz hi jt b fi lu kb l kc kd">    public static boolean checkAndRequestPermissions(final Activity context) {<br/>        int WExtstorePermission = ContextCompat.checkSelfPermission(context,<br/>                Manifest.permission.WRITE_EXTERNAL_STORAGE);<br/>        int cameraPermission = ContextCompat.checkSelfPermission(context,<br/>                Manifest.permission.CAMERA);<br/>        List&lt;String&gt; listPermissionsNeeded = new ArrayList&lt;&gt;();<br/>        if (cameraPermission != PackageManager.PERMISSION_GRANTED) {<br/>            listPermissionsNeeded.add(Manifest.permission.CAMERA);<br/>        }<br/>        if (WExtstorePermission != PackageManager.PERMISSION_GRANTED) {<br/>            listPermissionsNeeded<br/>                    .add(Manifest.permission.WRITE_EXTERNAL_STORAGE);<br/>        }<br/>        if (!listPermissionsNeeded.isEmpty()) {<br/>            ActivityCompat.requestPermissions(context, listPermissionsNeeded<br/>                            .toArray(new String[listPermissionsNeeded.size()]),<br/>                    REQUEST_ID_MULTIPLE_PERMISSIONS);<br/>            return false;<br/>        }<br/>        return true;<br/>    }</span></pre><p id="71f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您需要重写onRequestPermissionsResult，在那里您将处理您的权限结果。如果许可被授予，那么您可以继续调用chooseImage函数。</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="6213" class="jy jz hi jt b fi ka kb l kc kd">// Handled permission Result<br/></span><span id="b8bb" class="jy jz hi jt b fi lu kb l kc kd">    @Override<br/>    public void onRequestPermissionsResult(int requestCode,String[] permissions, int[] grantResults) {<br/>        switch (requestCode) {<br/>            case REQUEST_ID_MULTIPLE_PERMISSIONS:<br/>                if (ContextCompat.checkSelfPermission(MainActivity.this,<br/>                        Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {<br/>                    Toast.makeText(getApplicationContext(),<br/>                            "FlagUp Requires Access to Camara.", Toast.LENGTH_SHORT)<br/>                            .show();</span><span id="60b4" class="jy jz hi jt b fi lu kb l kc kd">                } else if (ContextCompat.checkSelfPermission(MainActivity.this,<br/>                        Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {<br/>                    Toast.makeText(getApplicationContext(),<br/>                            "FlagUp Requires Access to Your Storage.",<br/>                            Toast.LENGTH_SHORT).show();</span><span id="cb1b" class="jy jz hi jt b fi lu kb l kc kd">                } else {<br/>                    chooseImage(MainActivity.this);<br/>                }<br/>                break;<br/>        }<br/>    }</span></pre><h1 id="cdd1" class="ke jz hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">从相机和图库中选择图像</h1><p id="141d" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">现在让我们看看chooseImage函数，它将显示一个包含三个选项对话框</p><ol class=""><li id="68f4" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">拍照</li><li id="e878" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">从照片库中选择一张照片</li><li id="5144" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">出口</li></ol><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="492b" class="jy jz hi jt b fi ka kb l kc kd">// function to let's the user to choose image from camera or gallery</span><span id="b78b" class="jy jz hi jt b fi lu kb l kc kd">    private void chooseImage(Context context){</span><span id="075a" class="jy jz hi jt b fi lu kb l kc kd">        final CharSequence[] optionsMenu = {"Take Photo", "Choose from Gallery", "Exit" }; // create a menuOption Array</span><span id="8da1" class="jy jz hi jt b fi lu kb l kc kd">        // create a dialog for showing the optionsMenu</span><span id="c51a" class="jy jz hi jt b fi lu kb l kc kd">        AlertDialog.Builder builder = new AlertDialog.Builder(context);</span><span id="c7cc" class="jy jz hi jt b fi lu kb l kc kd">        // set the items in builder</span><span id="7744" class="jy jz hi jt b fi lu kb l kc kd">        builder.setItems(optionsMenu, new DialogInterface.OnClickListener() {<br/>            @Override<br/>            public void onClick(DialogInterface dialogInterface, int i) {</span><span id="e218" class="jy jz hi jt b fi lu kb l kc kd">                if(optionsMenu[i].equals("Take Photo")){</span><span id="a389" class="jy jz hi jt b fi lu kb l kc kd">                    // Open the camera and get the photo</span><span id="95f9" class="jy jz hi jt b fi lu kb l kc kd">                    Intent takePicture = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);<br/>                    startActivityForResult(takePicture, 0);<br/>                }<br/>                else if(optionsMenu[i].equals("Choose from Gallery")){</span><span id="b1ea" class="jy jz hi jt b fi lu kb l kc kd">                    // choose from  external storage</span><span id="8976" class="jy jz hi jt b fi lu kb l kc kd">                    Intent pickPhoto = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);<br/>                    startActivityForResult(pickPhoto , 1);</span><span id="6422" class="jy jz hi jt b fi lu kb l kc kd">                }<br/>                else if (optionsMenu[i].equals("Exit")) {<br/>                    dialogInterface.dismiss();<br/>                }</span><span id="2509" class="jy jz hi jt b fi lu kb l kc kd">            }<br/>        });<br/>        builder.show();<br/>    }</span></pre><p id="1b3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了处理startActivityForResult的结果，您需要覆盖onActivityResult</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="de24" class="jy jz hi jt b fi ka kb l kc kd">@Override<br/>    protected void onActivityResult(int requestCode, int resultCode, Intent data) {<br/>        super.onActivityResult(requestCode, resultCode, data);<br/>        if (resultCode != RESULT_CANCELED) {<br/>            switch (requestCode) {<br/>                case 0:<br/>                    if (resultCode == RESULT_OK &amp;&amp; data != null) {<br/>                        Bitmap selectedImage = (Bitmap) data.getExtras().get("data");<br/>                        imageView.setImageBitmap(selectedImage);<br/>                    }<br/>                    break;<br/>                case 1:<br/>                    if (resultCode == RESULT_OK &amp;&amp; data != null) {<br/>                        Uri selectedImage = data.getData();<br/>                        String[] filePathColumn = {MediaStore.Images.Media.DATA};<br/>                        if (selectedImage != null) {<br/>                            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);<br/>                            if (cursor != null) {<br/>                                cursor.moveToFirst();</span><span id="c6ed" class="jy jz hi jt b fi lu kb l kc kd">                                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);<br/>                                String picturePath = cursor.getString(columnIndex);<br/>                                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));<br/>                                cursor.close();<br/>                            }<br/>                        }</span><span id="d05d" class="jy jz hi jt b fi lu kb l kc kd">                    }<br/>                    break;<br/>            }<br/>        }<br/>    }</span></pre><p id="c624" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成所有步骤后，就可以调用onCreate方法中的权限检查函数。</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="2658" class="jy jz hi jt b fi ka kb l kc kd">if(checkAndRequestPermissions(MainActivity.this)){<br/>            chooseImage(MainActivity.this);<br/>        }</span></pre><p id="f35c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以在做了所有的事情之后，你的MainActivity.java看起来会像这样</p><p id="e80f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MainActivity.java</p><pre class="jf jg jh ji fd ju jt jv jw aw jx bi"><span id="7a21" class="jy jz hi jt b fi ka kb l kc kd">package com.geminisoftservices.choosephoto;</span><span id="6e1b" class="jy jz hi jt b fi lu kb l kc kd">import androidx.appcompat.app.AlertDialog;<br/>import androidx.appcompat.app.AppCompatActivity;<br/>import androidx.core.app.ActivityCompat;<br/>import androidx.core.content.ContextCompat;</span><span id="8d09" class="jy jz hi jt b fi lu kb l kc kd">import android.Manifest;<br/>import android.app.Activity;<br/>import android.content.Context;<br/>import android.content.DialogInterface;<br/>import android.content.Intent;<br/>import android.content.pm.PackageManager;<br/>import android.database.Cursor;<br/>import android.graphics.Bitmap;<br/>import android.graphics.BitmapFactory;<br/>import android.net.Uri;<br/>import android.os.Bundle;<br/>import android.provider.MediaStore;<br/>import android.widget.ImageView;<br/>import android.widget.Toast;</span><span id="0d74" class="jy jz hi jt b fi lu kb l kc kd">import java.util.ArrayList;<br/>import java.util.List;</span><span id="7ffe" class="jy jz hi jt b fi lu kb l kc kd">public class MainActivity extends AppCompatActivity {</span><span id="5532" class="jy jz hi jt b fi lu kb l kc kd">    // Declare the ImageView first.</span><span id="1f83" class="jy jz hi jt b fi lu kb l kc kd">    private ImageView imageView;</span><span id="b3a6" class="jy jz hi jt b fi lu kb l kc kd">    public static final int REQUEST_ID_MULTIPLE_PERMISSIONS = 101;</span><span id="4760" class="jy jz hi jt b fi lu kb l kc kd">    @Override<br/>    protected void onCreate(Bundle savedInstanceState) {<br/>        super.onCreate(savedInstanceState);<br/>        setContentView(R.layout.activity_main);</span><span id="edb0" class="jy jz hi jt b fi lu kb l kc kd">        // Initialize the imageView (Link the imageView with front-end component ImageView)</span><span id="5948" class="jy jz hi jt b fi lu kb l kc kd">        imageView = findViewById(R.id.my_avatar_imageview);</span><span id="aa2b" class="jy jz hi jt b fi lu kb l kc kd">        if(checkAndRequestPermissions(MainActivity.this)){<br/>            chooseImage(MainActivity.this);<br/>        }<br/></span><span id="f992" class="jy jz hi jt b fi lu kb l kc kd">    }<br/></span><span id="d623" class="jy jz hi jt b fi lu kb l kc kd">    // function to let's the user to choose image from camera or gallery</span><span id="39da" class="jy jz hi jt b fi lu kb l kc kd">    private void chooseImage(Context context){</span><span id="77d3" class="jy jz hi jt b fi lu kb l kc kd">        final CharSequence[] optionsMenu = {"Take Photo", "Choose from Gallery", "Exit" }; // create a menuOption Array</span><span id="63d8" class="jy jz hi jt b fi lu kb l kc kd">        // create a dialog for showing the optionsMenu</span><span id="15b0" class="jy jz hi jt b fi lu kb l kc kd">        AlertDialog.Builder builder = new AlertDialog.Builder(context);</span><span id="7db6" class="jy jz hi jt b fi lu kb l kc kd">        // set the items in builder</span><span id="1039" class="jy jz hi jt b fi lu kb l kc kd">        builder.setItems(optionsMenu, new DialogInterface.OnClickListener() {<br/>            @Override<br/>            public void onClick(DialogInterface dialogInterface, int i) {</span><span id="0523" class="jy jz hi jt b fi lu kb l kc kd">                if(optionsMenu[i].equals("Take Photo")){</span><span id="7fa0" class="jy jz hi jt b fi lu kb l kc kd">                    // Open the camera and get the photo</span><span id="b78d" class="jy jz hi jt b fi lu kb l kc kd">                    Intent takePicture = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);<br/>                    startActivityForResult(takePicture, 0);<br/>                }<br/>                else if(optionsMenu[i].equals("Choose from Gallery")){</span><span id="76c0" class="jy jz hi jt b fi lu kb l kc kd">                    // choose from  external storage</span><span id="e6c1" class="jy jz hi jt b fi lu kb l kc kd">                    Intent pickPhoto = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);<br/>                    startActivityForResult(pickPhoto , 1);</span><span id="4785" class="jy jz hi jt b fi lu kb l kc kd">                }<br/>                else if (optionsMenu[i].equals("Exit")) {<br/>                    dialogInterface.dismiss();<br/>                }</span><span id="13dc" class="jy jz hi jt b fi lu kb l kc kd">            }<br/>        });<br/>        builder.show();<br/>    }<br/></span><span id="a5ff" class="jy jz hi jt b fi lu kb l kc kd">    // function to check permission</span><span id="b35d" class="jy jz hi jt b fi lu kb l kc kd">    public static boolean checkAndRequestPermissions(final Activity context) {<br/>        int WExtstorePermission = ContextCompat.checkSelfPermission(context,<br/>                Manifest.permission.WRITE_EXTERNAL_STORAGE);<br/>        int cameraPermission = ContextCompat.checkSelfPermission(context,<br/>                Manifest.permission.CAMERA);<br/>        List&lt;String&gt; listPermissionsNeeded = new ArrayList&lt;&gt;();<br/>        if (cameraPermission != PackageManager.PERMISSION_GRANTED) {<br/>            listPermissionsNeeded.add(Manifest.permission.CAMERA);<br/>        }<br/>        if (WExtstorePermission != PackageManager.PERMISSION_GRANTED) {<br/>            listPermissionsNeeded<br/>                    .add(Manifest.permission.WRITE_EXTERNAL_STORAGE);<br/>        }<br/>        if (!listPermissionsNeeded.isEmpty()) {<br/>            ActivityCompat.requestPermissions(context, listPermissionsNeeded<br/>                            .toArray(new String[listPermissionsNeeded.size()]),<br/>                    REQUEST_ID_MULTIPLE_PERMISSIONS);<br/>            return false;<br/>        }<br/>        return true;<br/>    }<br/></span><span id="025c" class="jy jz hi jt b fi lu kb l kc kd">    // Handled permission Result<br/></span><span id="5406" class="jy jz hi jt b fi lu kb l kc kd">    @Override<br/>    public void onRequestPermissionsResult(int requestCode,String[] permissions, int[] grantResults) {<br/>        switch (requestCode) {<br/>            case REQUEST_ID_MULTIPLE_PERMISSIONS:<br/>                if (ContextCompat.checkSelfPermission(MainActivity.this,<br/>                        Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {<br/>                    Toast.makeText(getApplicationContext(),<br/>                            "FlagUp Requires Access to Camara.", Toast.LENGTH_SHORT)<br/>                            .show();</span><span id="7790" class="jy jz hi jt b fi lu kb l kc kd">                } else if (ContextCompat.checkSelfPermission(MainActivity.this,<br/>                        Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {<br/>                    Toast.makeText(getApplicationContext(),<br/>                            "FlagUp Requires Access to Your Storage.",<br/>                            Toast.LENGTH_SHORT).show();</span><span id="f69b" class="jy jz hi jt b fi lu kb l kc kd">                } else {<br/>                    chooseImage(MainActivity.this);<br/>                }<br/>                break;<br/>        }<br/>    }</span><span id="9661" class="jy jz hi jt b fi lu kb l kc kd">    @Override<br/>    protected void onActivityResult(int requestCode, int resultCode, Intent data) {<br/>        super.onActivityResult(requestCode, resultCode, data);<br/>        if (resultCode != RESULT_CANCELED) {<br/>            switch (requestCode) {<br/>                case 0:<br/>                    if (resultCode == RESULT_OK &amp;&amp; data != null) {<br/>                        Bitmap selectedImage = (Bitmap) data.getExtras().get("data");<br/>                        imageView.setImageBitmap(selectedImage);<br/>                    }<br/>                    break;<br/>                case 1:<br/>                    if (resultCode == RESULT_OK &amp;&amp; data != null) {<br/>                        Uri selectedImage = data.getData();<br/>                        String[] filePathColumn = {MediaStore.Images.Media.DATA};<br/>                        if (selectedImage != null) {<br/>                            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);<br/>                            if (cursor != null) {<br/>                                cursor.moveToFirst();</span><span id="5610" class="jy jz hi jt b fi lu kb l kc kd">                                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);<br/>                                String picturePath = cursor.getString(columnIndex);<br/>                                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));<br/>                                cursor.close();<br/>                            }<br/>                        }</span><span id="7887" class="jy jz hi jt b fi lu kb l kc kd">                    }<br/>                    break;<br/>            }<br/>        }<br/>    }<br/></span><span id="a024" class="jy jz hi jt b fi lu kb l kc kd">}</span></pre><p id="360b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就这样，现在你可以运行你的应用程序，享受代码。</p><p id="f1ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你喜欢这个教程，并且你已经学会了如何从图库中获取图片或者在Android上从相机中捕捉图片。</p><p id="3002" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码。</p><p id="c331" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个故事再见。敬请期待！</p><p id="0ce5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">可以在</strong><a class="ae jd" href="https://www.linkedin.com/in/ayush-gemini/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">LinkedIn</strong></a><strong class="ih hj">&amp;</strong><a class="ae jd" href="https://github.com/ayushgemini" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">Github</strong></a><strong class="ih hj">上联系我。</strong></p></div></div>    
</body>
</html>