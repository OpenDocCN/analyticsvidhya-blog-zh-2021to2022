<html>
<head>
<title>Playing with Images using OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenCV播放图像</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/playing-with-images-using-opencv-5dca960d1b0b?source=collection_archive---------3-----------------------#2021-06-04">https://medium.com/analytics-vidhya/playing-with-images-using-opencv-5dca960d1b0b?source=collection_archive---------3-----------------------#2021-06-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/59bf2e921d5480877f456c9e2624b8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rlh6GD4wjpOYU7JP"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">格伦·卡斯滕斯-彼得斯在<a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="1133" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这篇博客中，我们将介绍使用OpenCV进行图像处理的一些基础知识，包括绘制图像、裁剪图像、交换裁剪部分、连接两幅图像并创建一幅图像。</p><h2 id="f61f" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">图像是如何制作和存储的？</h2><p id="cb3e" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">图像由像素组成，并以jpeg、tiff或raw等格式存储，三个颜色通道(红色、绿色和蓝色)构成彩色图像。像素是一个微小的颜色方块，当把它们放在一起时，就形成了一幅图像。像素范围从0到255。在OpenCV中使用图像时，它存储为像素数组，可以是二维数组(灰度)和三维数组(具有三个通道的简单灰度图像)。</p><p id="7baf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们开始我们的议程。</p><h2 id="8989" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">画一幅图像</h2><p id="039b" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">我们将绘制一个简单的白色背景的小屋图像。我们将首先使用<strong class="iw hi"> <em class="ks"> np.ones((480，640，3)) * 255 </em> </strong>创建一个白色背景的图像，这将创建一个<strong class="iw hi"> <em class="ks"> 480x640 </em> </strong>的图像，具有3个颜色通道(蓝色、绿色和红色)，并用白色填充像素。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ea40" class="js jt hh ky b fi lc ld l le lf">R,G,B = (255,255,255) creates white colour.</span></pre><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lg"><img src="../Images/606a87826d66e05cad7b2a5522ca3436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*covmG1S1QiGGJHA9__neag.png"/></div></div></figure><p id="813f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们将使用以下代码在白色背景上创建一个三角形:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="d4a5" class="js jt hh ky b fi lc ld l le lf"># Some random co-ordinates for the triangle<br/>triangle_pnts = np.array([(319,50),(165,160),(476,160)])</span><span id="c5e7" class="js jt hh ky b fi lh ld l le lf"># Create a contour with filled color in it<br/>image = cv2.drawContours(image, [triangle_pnts],0,(0,0,255),-1)</span></pre><p id="fc25" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"><em class="ks">cv2 . draw contours()</em></strong>用所需的颜色在给定的输入图像上为输入坐标创建轮廓，填充轮廓内的整个区域(-1)，第三个参数是我们需要绘制的轮廓的索引，我们传递了0，因为我们用颜色填充整个身体，不需要轮廓。</p><p id="1ed1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这会在白色背景上产生一个红色三角形。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es li"><img src="../Images/dec7c0d1f00b27e518c469966f83a9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*RM3PctgkCJzcRPlp07DOGA.png"/></div></figure><p id="f3df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后，我们将使用以下代码绘制一个矩形:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="a30c" class="js jt hh ky b fi lc ld l le lf">bgr_rectangle = (0,255,0)</span><span id="69d3" class="js jt hh ky b fi lh ld l le lf">start_point = (213,160)</span><span id="6cd3" class="js jt hh ky b fi lh ld l le lf">end_point = (426,360)</span><span id="fff6" class="js jt hh ky b fi lh ld l le lf">image = cv2.rectangle(image,start_point,end_point,bgr_rectangle,-1)</span></pre><p id="3e71" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">创建矩形时，我们只需要起点(左上角点)和终点(右下角点)以及in -1厚度，因为它用一种颜色填充矩形。这将导致绿色的矩形。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/8d414f1713f708e1d76c76bd07024b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*39JmWIesIovuf_ccfYEamw.png"/></div></figure><p id="4577" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">继续创建一扇门和两扇窗，我们将使用相同的<strong class="iw hi"><em class="ks">cv2 . rectangle()</em></strong>。</p><p id="010c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用下面的代码，实现了左边的图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="93e2" class="js jt hh ky b fi lc ld l le lf">bgr_door = (255,0,0)</span><span id="d8b4" class="js jt hh ky b fi lh ld l le lf">start_point = (284,240)</span><span id="d278" class="js jt hh ky b fi lh ld l le lf">end_point = (355,360)</span><span id="9605" class="js jt hh ky b fi lh ld l le lf">image = cv2.rectangle(image,start_point,end_point,bgr_door,-1)</span></pre><div class="kt ku kv kw fd ab cb"><figure class="lk ii ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/83914ac40019b23bd15d64f4b4816b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*k6YNgNo1ZN-BcmOM7AROKQ.png"/></div></figure><figure class="lk ii lq lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/4edd999660851c4b16ccf6dcc60444ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*Cw1ikRJ-GKncTBueeMU-KA.png"/></div></figure></div><p id="e750" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用下面的代码，获得了正确的图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="c03f" class="js jt hh ky b fi lc ld l le lf">bgr_window = (255,126,0)</span><span id="a8aa" class="js jt hh ky b fi lh ld l le lf">start_point = (255,180)</span><span id="aee9" class="js jt hh ky b fi lh ld l le lf">end_point = (305,210)</span><span id="9c84" class="js jt hh ky b fi lh ld l le lf">image = cv2.rectangle(image,start_point,end_point,bgr_window,-1)</span><span id="1fc4" class="js jt hh ky b fi lh ld l le lf">bgr_window = (255,126,0)</span><span id="cd88" class="js jt hh ky b fi lh ld l le lf">start_point = (339,180)</span><span id="1508" class="js jt hh ky b fi lh ld l le lf">end_point = (389,210)</span><span id="e45c" class="js jt hh ky b fi lh ld l le lf">image = cv2.rectangle(image,start_point,end_point,bgr_window,-1)</span></pre><p id="ff86" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们使用下面的代码来显示图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="9068" class="js jt hh ky b fi lc ld l le lf">cv2.imshow('image',image)</span><span id="bc88" class="js jt hh ky b fi lh ld l le lf">cv2.waitKey()</span><span id="8ff6" class="js jt hh ky b fi lh ld l le lf">cv2.destroyAllWindows()</span></pre><p id="b59f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="ks"> cv2.imshow(caption，image) </em> </strong>接受两个参数，其中包括图像窗口和图像数组的标题。</p><p id="6c41" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"><em class="ks">cv2 . waitkey()</em></strong>用于使窗口直到键盘中断，或者我们可以设置一个时间退出窗口。</p><p id="63b4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"><em class="ks">cv2 . destroyallwindows()</em></strong>用于在等待结束后销毁所有窗口。</p><p id="fb79" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这三行用于在python中使用OpenCV时显示图像。</p><h2 id="dab3" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">裁剪图像并交换裁剪的部分</h2><p id="9382" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">我们将裁剪图像并交换它们。可以使用对阵列的切片操作来裁剪图像。</p><p id="4543" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用以下代码加载图像:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="a858" class="js jt hh ky b fi lc ld l le lf">image_one = cv2.imread('image_one.jpg')</span><span id="9b28" class="js jt hh ky b fi lh ld l le lf">image_two = cv2.imread('image_two.jpg')</span></pre><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/182b5110482dea9b6e8bafbf8e76af7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3w7RzSUxzbcEXOZWeGHlQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图片_一</figcaption></figure><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ls"><img src="../Images/d7045fa97f2deef5fc372ce077958b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4OvrqO1StM6od6Gzx9C25w.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图片_二</figcaption></figure><p id="c584" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们将使用切片操作来裁剪图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="f0a9" class="js jt hh ky b fi lc ld l le lf">image_one_crop = image_one[256:512,240:720].copy()</span><span id="72f2" class="js jt hh ky b fi lh ld l le lf">image_two_crop = image_two[256:512,240:720].copy()</span></pre><div class="kt ku kv kw fd ab cb"><figure class="lk ii lt lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/e0e1f46b95345d376e79b102e7700dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*Iau6d0IbyC67S01LG1NWJg.png"/></div></figure><figure class="lk ii lu lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/732834ed8c94d5119fbf12292a5b87c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*13rR3xfjvr7RuNjJhrqlrw.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx lv di lw lx translated">裁剪部分</figcaption></figure></div><p id="7e7e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Python使用内存引用，而变量使用相同的值。因此，我们需要将元素复制到变量中。如果我们不使用copy()，那么它将在交换时覆盖像素，并且只有一个图像将被裁剪部分替换。</p><p id="06f8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，交换裁剪部分，然后使用下面的代码用交换的裁剪部分替换图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="a644" class="js jt hh ky b fi lc ld l le lf"># swapping the cropped part<br/>image_one_crop, image_two_crop = image_two_crop, image_one_crop</span></pre><p id="1ebf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后，我们将分配给原始图像的裁剪和交换部分。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="6e48" class="js jt hh ky b fi lc ld l le lf">image_one[256:512,240:720] = image_one_crop</span><span id="c559" class="js jt hh ky b fi lh ld l le lf">image_two[256:512,240:720] = image_two_crop</span></pre><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/0ca6403f7dc0b15a280574c7b1438075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MO7Bb1HiiNb4I1Vl6Fa_zA.png"/></div></div></figure><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/70a4d97c294357f4f81018ae697cbbfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-d0__66fFhXixd4twDAaA.png"/></div></div></figure><h2 id="614f" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">连接两个图像并创建一个图像</h2><p id="2def" class="pw-post-body-paragraph iu iv hh iw b ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">为了对图像执行连接操作，我们只需要使用<strong class="iw hi"><em class="ks">NP . hs stack()</em></strong>或<strong class="iw hi"><em class="ks">NP . vs stack()</em></strong>来连接数组。</p><p id="a52b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"><em class="ks">NP . hs stack()</em></strong>将帮助两个数组水平连接，<strong class="iw hi"><em class="ks">NP . vs stack()</em></strong>用于垂直连接两个数组。</p><p id="d14b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用下面的代码，我们水平和垂直地连接了两幅图像。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="3e1b" class="js jt hh ky b fi lc ld l le lf">image_join_1 = np.hstack([image_1,image_2])</span><span id="5aa8" class="js jt hh ky b fi lh ld l le lf">image_join_2 = np.hstack([image_2,image_1])</span><span id="80b6" class="js jt hh ky b fi lh ld l le lf">image_join = np.vstack([image_join_1,image_join_2])</span></pre><p id="a687" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，图像是原始尺寸的4倍，那么我们需要使用通常用于缩小图像尺寸的<strong class="iw hi"> <em class="ks"> INTER_AREA </em> </strong>插值将图像尺寸调整到原始尺寸。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="32bb" class="js jt hh ky b fi lc ld l le lf">dims = (image_1.shape[1],image_1.shape[0])</span><span id="242e" class="js jt hh ky b fi lh ld l le lf">resized = cv2.resize(image_join,dims,interpolation=cv2.INTER_AREA)</span></pre><p id="fe6e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在图像终于被创建了。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ma"><img src="../Images/d57c1ff2559ff423aea9c2d0a7b5e75f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbfQZxgzf547PNB6tZvnqQ.png"/></div></div></figure><p id="20d2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">是的，我们完成了我们的议程。给一个👏，如果你觉得有趣的话。</p><div class="mb mc ez fb md me"><a href="https://github.com/Launchpad5682/summer_training_21/tree/main/task_4" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">启动平台5682/summer_training_21</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">github.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms in me"/></div></div></a></div></div></div>    
</body>
</html>