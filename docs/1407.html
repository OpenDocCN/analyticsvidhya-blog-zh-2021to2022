<html>
<head>
<title>Garbage Collector(GC) in Python (Part-I)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的垃圾收集器(GC )(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/garbage-collector-gc-in-python-part-i-ec4ccbe2519b?source=collection_archive---------11-----------------------#2021-02-28">https://medium.com/analytics-vidhya/garbage-collector-gc-in-python-part-i-ec4ccbe2519b?source=collection_archive---------11-----------------------#2021-02-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/c2ba0d05092831e139839cba9e406f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kAK8DUz3SSQm-8W0uj3--w.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">垃圾收集工</figcaption></figure><p id="743e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">亲爱的读者们，这篇博客文章试图解释GC模块的实现。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><blockquote class="jy jz ka"><p id="5cb0" class="it iu kb iv b iw ix iy iz ja jb jc jd kc jf jg jh kd jj jk jl ke jn jo jp jq ha bi translated"><strong class="iv hi">垃圾收集器(GC) </strong> {wiki <strong class="iv hi"> </strong>定义}: <br/>垃圾收集器(GC)是<strong class="iv hi">自动内存管理</strong>的一种形式。垃圾收集器，或者只是收集器，试图回收垃圾，或者不再被<strong class="iv hi">程序</strong>使用的<strong class="iv hi">对象</strong>占用的内存。</p></blockquote></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="a3bd" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">GC的基本思想，是将python中<strong class="iv hi"><em class="kb"/></strong><strong class="iv hi"><em class="kb">不需要的对象</em> </strong>的内存块释放。</p><figure class="kf kg kh ki fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="99f3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以下是理解CPython中GC模块实现的先决条件。他们是，</p><ul class=""><li id="83bf" class="kl km hh iv b iw ix ja jb je kn ji ko jm kp jq kq kr ks kt bi translated"><strong class="iv hi"><em class="kb">【Python核心obj】</em></strong></li><li id="a733" class="kl km hh iv b iw ku ja kv je kw ji kx jm ky jq kq kr ks kt bi translated"><strong class="iv hi"> <em class="kb">记忆参考</em> </strong></li><li id="30a9" class="kl km hh iv b iw ku ja kv je kw ji kx jm ky jq kq kr ks kt bi translated"><strong class="iv hi"> <em class="kb">参考计数器</em> </strong></li></ul><h1 id="2ef6" class="kz la hh bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">PyObj</h1><ul class=""><li id="209e" class="kl km hh iv b iw lx ja ly je lz ji ma jm mb jq kq kr ks kt bi translated">PyObj是一个python核心对象。</li><li id="8feb" class="kl km hh iv b iw ku ja kv je kw ji kx jm ky jq kq kr ks kt bi translated">python中的所有对象最终都被称为PyObj。</li><li id="3f97" class="kl km hh iv b iw ku ja kv je kw ji kx jm ky jq kq kr ks kt bi translated">PyObj有三个属性，</li></ul><p id="028b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">&gt;<em class="kb">类型</em></p><p id="9d9b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">&gt;<em class="kb">值</em></p><p id="11b9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="kb"> &gt;参考计数器(ref_count) </em></p><ul class=""><li id="8ba3" class="kl km hh iv b iw ix ja jb je kn ji ko jm kp jq kq kr ks kt bi translated">检查python中的任何对象，都会有这些属性。</li></ul><figure class="kf kg kh ki fd ii er es paragraph-image"><div class="er es mc"><img src="../Images/f2b9174706ae0d5112f55b289fbae52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*fmDfoa4flXfKxY2RhO-_hw.jpeg"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">PyObj结构</figcaption></figure><pre class="kf kg kh ki fd md me mf mg aw mh bi"><span id="1a15" class="mi la hh me b fi mj mk l ml mm"># source code to see pyobj properties</span><span id="8fb2" class="mi la hh me b fi mn mk l ml mm">import sys<br/>                                    <br/>a = 5                                               <br/>print(type(a)) # this line will print obj type<br/>                      <br/>print(a) # this line will print obj value          <br/>             <br/>print(sys.getrefcount(a)) # this line will reference count of an obj.</span></pre><p id="6e60" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="kb">源代码</em>:<a class="ae mo" href="https://github.com/ibrahimsha23/gc_python_meetup/blob/main/5.py" rel="noopener ugc nofollow" target="_blank">https://github . com/Ibrahim sha 23/GC _ python _ meetup/blob/main/5 . py</a></p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h1 id="ca55" class="kz la hh bd lb lc mp le lf lg mq li lj lk mr lm ln lo ms lq lr ls mt lu lv lw bi translated">内存引用</h1><ul class=""><li id="16d0" class="kl km hh iv b iw lx ja ly je lz ji ma jm mb jq kq kr ks kt bi translated">在python中，<a class="ae mo" href="http://." rel="noopener ugc nofollow" target="_blank"> <em class="kb">一切都是对象</em> </a>。</li></ul><pre class="kf kg kh ki fd md me mf mg aw mh bi"><span id="5a49" class="mi la hh me b fi mj mk l ml mm">a = 5; b = 5;</span></pre><ul class=""><li id="438c" class="kl km hh iv b iw ix ja jb je kn ji ko jm kp jq kq kr ks kt bi translated">为变量<a class="ae mo" href="http://." rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi"> a和b </strong> </a>赋值相同的值(<strong class="iv hi"> Eg: 5 </strong>)会为C、C++、Java等其他编程语言中的每次赋值创建一个新的内存块。</li></ul><blockquote class="jy jz ka"><p id="b6d8" class="it iu kb iv b iw ix iy iz ja jb jc jd kc jf jg jh kd jj jk jl ke jn jo jp jq ha bi translated">Python不会为具有相同值的多个赋值创建新的内存分配(例如:a = 5；b=5)。<strong class="iv hi">在内部，python为每个赋值变量标记内存引用(内存位置)</strong>。</p></blockquote><figure class="kf kg kh ki fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/a2fcfaa7c1c24a0b703c9e8bb69d62c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1-2cvaZxTRWZAjlB7kYBw.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">内存引用</figcaption></figure><ul class=""><li id="ddc5" class="kl km hh iv b iw ix ja jb je kn ji ko jm kp jq kq kr ks kt bi translated">参考上图(a-section)，<a class="ae mo" href="http://." rel="noopener ugc nofollow" target="_blank"><strong class="iv hi"><em class="kb">a和b值的内存位置相同</em> </strong> </a>。</li></ul><blockquote class="jy jz ka"><p id="81cf" class="it iu kb iv b iw ix iy iz ja jb jc jd kc jf jg jh kd jj jk jl ke jn jo jp jq ha bi translated">在对变量‘a’从<a class="ae mo" href="http://." rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi"> 5重新分配到</strong></a><strong class="iv hi"/>6值后，现在引用从00001<a class="ae mo" href="http://." rel="noopener ugc nofollow" target="_blank"><strong class="iv hi">更改到00002 </strong> </a>内存位置。</p></blockquote><pre class="kf kg kh ki fd md me mf mg aw mh bi"><span id="0d89" class="mi la hh me b fi mj mk l ml mm">import sys</span><span id="5109" class="mi la hh me b fi mn mk l ml mm">a = 5</span><span id="c361" class="mi la hh me b fi mn mk l ml mm">b = 5</span><span id="e480" class="mi la hh me b fi mn mk l ml mm">def print_id(var_val, var):<br/>    print("id of {0} - {1}".format(var_val, id(var)))<br/></span><span id="9741" class="mi la hh me b fi mn mk l ml mm">print_id("a", a) # o/p: id of a - 140336997356632</span><span id="5582" class="mi la hh me b fi mn mk l ml mm">print_id("b", b) # o/p: id of b - 140336997356632<br/></span><span id="4f0c" class="mi la hh me b fi mn mk l ml mm">print("===================== value change ===============")<br/></span><span id="52e0" class="mi la hh me b fi mn mk l ml mm">a = 6 # new value</span><span id="0353" class="mi la hh me b fi mn mk l ml mm">print_id("a", a) # o/p: id of a - 140336997356608</span><span id="658f" class="mi la hh me b fi mn mk l ml mm">print_id("b", b) # o/p: id of b - 140336997356632</span></pre><p id="7345" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="kb">源代码</em>:<a class="ae mo" href="https://github.com/ibrahimsha23/gc_python_meetup/blob/main/6.py" rel="noopener ugc nofollow" target="_blank">https://github . com/Ibrahim sha 23/GC _ python _ meetup/blob/main/6 . py</a></p><ul class=""><li id="5c22" class="kl km hh iv b iw ix ja jb je kn ji ko jm kp jq kq kr ks kt bi translated">上面的代码块包含了作为注释的内存引用的输出，您可以看到<strong class="iv hi">变量a的内存地址从140336997356632变为140336997356608。</strong></li><li id="e744" class="kl km hh iv b iw ku ja kv je kw ji kx jm ky jq kq kr ks kt bi translated">注意:要知道变量的内存地址，我们可以使用python内置的方法<code class="du mv mw mx me b"><strong class="iv hi">id.</strong></code></li></ul><pre class="kf kg kh ki fd md me mf mg aw mh bi"><span id="f15f" class="mi la hh me b fi mj mk l ml mm">                 id(variable_name)</span></pre></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="f0ae" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="kb">感谢阅读！</em> </strong></p><p id="88f8" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在<strong class="iv hi"> <em class="kb"> part-II博客</em> </strong>(即将发表)上，将解释关于引用计数器及其弊端。</p><p id="c268" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在<strong class="iv hi"> <em class="kb">第三部分的博客</em> </strong>(即将发布)上，将会解释GC的实现。</p><p id="6be4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">请在评论中分享你的建议。</p><p id="8185" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要联系我，请在LinkedIn上联系我。</p></div></div>    
</body>
</html>