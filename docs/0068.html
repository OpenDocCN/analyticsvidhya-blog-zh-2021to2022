<html>
<head>
<title>Explicit Understanding of python package building (coding)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对python包构建(编码)有明确的理解</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/explicit-understanding-of-python-package-building-coding-93fa72c7cb95?source=collection_archive---------11-----------------------#2021-01-03">https://medium.com/analytics-vidhya/explicit-understanding-of-python-package-building-coding-93fa72c7cb95?source=collection_archive---------11-----------------------#2021-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d3bacd6e8fbce505d0eafe6363a3d3c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAOdR7SY0s_2gW7cjIoldA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@isword?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">穆罕纳德·阿贾恩</a>在<a class="ae iu" href="https://unsplash.com/s/photos/python-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="4f25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">尽管有很多关于python打包的资料，但是你很难找到关于如何编写一个可持续的、高效的、对用户和开发者都友好的包的资料。因此，本文的目标是简要描述在构建您的包时需要注意的方面，并提供一些参考来深入研究每一部分。</p><p id="f293" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，有许多主要领域需要跟进。我将尝试在这里讨论与您在打包中使用的架构无关的主题，换句话说，在开始编码之前您必须知道的基本概念。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><blockquote class="kk kl km"><p id="b7ec" class="iv iw kc ix b iy iz ja jb jc jd je jf kn jh ji jj ko jl jm jn kp jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">代码库版本</em> </strong></p></blockquote><p id="410f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你首先要明白的是，这不同于包版本控制。通常git用作版本控制系统{不是GitHub }，GitHub用作远程存储库控制器。在开始打包之前，您必须掌握一些基本概念。</p><ul class=""><li id="b889" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">分支——因为python包是一个工件[ <em class="kc">,工件是一个可以部署的软件。</em> ]必须有两个环境用于开发，另一个用于部署或生产。因此，您必须遵循的最常见步骤是:</li></ul><p id="56e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kz la lb lc b">git init</code>-在项目文件夹中设置git</p><p id="1c09" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kz la lb lc b">git branch developer</code>-创建一个开发者分支【分支名称是约定的，但是您可以使用任何名称】。这是因为当您启动主分支时，git会创建它。所以，一般来说，我们使用主分支作为部署分支。</p><p id="affa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kz la lb lc b">git checkout developer</code>-设置你的git头到开发者分支。默认情况下，将所有更改添加到developer分支中。</p><ul class=""><li id="898a" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">git提交——如果你熟悉git，你一定会知道我们可以通过使用<code class="du kz la lb lc b">git commit -am"git commit massage"</code>保存所有项目文件的快照。用技术术语来说，我们可以在有向无环图中添加一个带有唯一散列键的blob。所以，重点是说git提交的良好实践。</li></ul><p id="e2f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">— 1.在代码库的每一次重大变更后提交。前任。在完成每一个方法之后[ <em class="kc">这真的在测试驱动开发(TDD) </em>中使用</p><p id="fe40" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">— 2.编写有意义的完整提交消息。—因为提交消息的目的是让您在查看git提交历史时，对当时所做的更改有一个大概的了解。当您当前的变更与先前的变更不兼容时，这种实践肯定会有回报。</p><p id="e11a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">给你的承诺历史一个很好的总结。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/bd3b79bd2cd05fd29eb85f6e2de15dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ibiKnzM2RQAYzec_iWDvGQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">控制良好的git日志报告将是这样的</figcaption></figure><ul class=""><li id="e134" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">git标签——简单地说，这是git中真正的版本控制。从技术上讲，git标签是指向特定点git历史的引用点。黄色(<em class="kc"> tag: v0.3.0 </em>)类零件由其标记生成。作为一个良好的实践，您将在每个到主分支的pull-request之后添加一个git标记{这将在包版本控制部分讨论。}您可以使用<code class="du kz la lb lc b">git tag -a v0.2.0</code>命令添加一个git标签，这个标签会将标签添加到最近的提交中。[您还可以通过在末尾添加一个提交散列来为任何提交添加一个标记。但是标签版本必须按升序排列。]</li></ul><p id="d495" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接:</p><p id="ef55" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.atlassian.com/git/tutorials/what-is-git#version-control-with-git" rel="noopener ugc nofollow" target="_blank">使用git进行版本控制</a></p><p id="1fcb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.atlassian.com/git/tutorials/setting-up-a-repository" rel="noopener ugc nofollow" target="_blank">设置存储库</a></p><p id="a28f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.atlassian.com/git/tutorials/inspecting-a-repository/git-tag" rel="noopener ugc nofollow" target="_blank"> git标签</a></p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><blockquote class="kk kl km"><p id="f40c" class="iv iw kc ix b iy iz ja jb jc jd je jf kn jh ji jj ko jl jm jn kp jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi"> doc文件&amp;doc字符串</em> </strong></p></blockquote><p id="da2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">doc文件和docstring在包的文档中。这两者都非常重要，因为包的文档是清楚了解包的功能以及用户在调用时必须输入的语法和参数的唯一途径。它不仅是一个用户指南，而且文档文件也是一个开发者了解某些函数的输入和输出类型的好地方。</p><ul class=""><li id="4450" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated"><em class="kc"> docstring </em> —它就像一个普通的注释，但是docstring更强大。例如，当您调用像<code class="du kz la lb lc b">&gt;&gt;&gt; help(some function)</code>这样的命令时，该命令显示特定函数中的文档字符串。此外，您可以使用<code class="du kz la lb lc b">repr(some_function.__doc__)</code>或<code class="du kz la lb lc b">print(some_function.__doc__)</code>输出相同的结果。那么，如何写好docstring呢？。有两种常规方法。</li><li id="3ff5" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">1.<strong class="ix hj">单行docstring — </strong>使用三个单引号或三个双引号。左引号和右引号必须在同一行。这是语法，但是单行docstring的用法是非常简要地说明模块和函数的功能。尤其是对于模块。因为单行docstring大多用类的顶部来描述类。</li></ul><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/c6ee913bc4fbc1b21cb61e742fade276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sR00qAn-AFI0OBLTc1Eykw.png"/></div></div></figure><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/389a0022a10eace503958baffbdf36ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*uG4ligmGY11B_rL44mDjxA.png"/></div></figure><ul class=""><li id="3b89" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">2.<strong class="ix hj">多行docstring—S</strong>yn与单行docstring的区别在于，开始和结束引号不需要在同一行。实际上，由于编写多行docstrings的格式，它永远不会发生。通常用于描述功能或方法。</li></ul><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/48891325c4d19e9117d0d15e789ca0fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLjPM3M28zP-dRy2RobHew.png"/></div></div></figure><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/1a2240c237a3405f4f565ec586d2da14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0IZpQybvNixbNp4QGAASg.png"/></div></div></figure><p id="a712" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如你在上面看到的，有一个格式，但没有一个通用的格式。你可以在不同的包中通过键入<code class="du kz la lb lc b">help()</code>看到这一点。但是，结果必须详细说明函数的参数是什么，函数具体做什么，如果没有错误或警告，输出和输出类型是什么。</p><ul class=""><li id="5121" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">doc文件——通常这就是你在PyPI、GitHub或readthedocs网站上读到的内容。无论您将doc文件存放在哪里，doc文件都必须包含关于软件包的一些基本内容。1-快速回顾:给出这个包应该是什么样子的想法。2-安装:最重要的部分。这里，<code class="du kz la lb lc b">pip install your-package</code>命令和它需要的其他内部和外部依赖项。3-用法:这是对包装的一种详细描述。对于小包装，这部分是功能文档区[通常有单独的功能描述和示例]。如果你在<a class="ae iu" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>或GitHub中托管文档，你可以使用LaTeX或markdown作为编写语言，但是如果你希望在<a class="ae iu" href="https://readthedocs.org/" rel="noopener ugc nofollow" target="_blank"> readthedocs </a>站点中托管文档文件，你必须坚持使用markdown。</li></ul><p id="8506" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接:</p><p id="4bba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://realpython.com/pypi-publish-python-package/#documenting-your-package" rel="noopener ugc nofollow" target="_blank"> python打包</a></p><p id="1e0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://realpython.com/documenting-python-code/" rel="noopener ugc nofollow" target="_blank"> python文档</a></p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><blockquote class="kk kl km"><p id="7d32" class="iv iw kc ix b iy iz ja jb jc jd je jf kn jh ji jj ko jl jm jn kp jp jq jr js hb bi translated"><strong class="ix hj"> <em class="hi">日志</em> </strong></p></blockquote><p id="725e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如它听起来的那样，日志记录创建关于函数/方法在运行时如何表现的日志文件。通常，您的代码将日志保存在您在<code class="du kz la lb lc b">log/</code>主目录下给出的文件中。这在开发人员方面很有帮助，因为开发人员可以理解各种输入中的代码流。这在调试阶段非常有用。就这样吗？不，即使这样也不是你必须使用日志程序而不是传统的<code class="du kz la lb lc b">print()</code>语句的主要原因。主要原因是python打包中禁止使用print语句。同样，如果你在你的包中使用了一些面向对象的设计模式，那么<code class="du kz la lb lc b">print()</code>语句是没有用的。命令，状态]。第二个主要原因是，因为你正在构建一个包，所以你必须向用户提供关于操作如何进行的信息。</p><p id="7bd8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在python中，有一个名为‘logging’的原生日志库，你可以通过<code class="du kz la lb lc b">import logging</code>导入它。但不像日志中的其他库，你必须创建它的一个实例，并在每个python文件的顶部配置它。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/c55c679ed04f8803059965d97e77de58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*ujeR-3PtIwEOpWLQdtho6w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">基本了解如何配置记录器。不要太在意方法类是什么。</figcaption></figure><p id="2062" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我通常所说的，日志文件保存在一个单独的文件中。但是这对用户来说一点用都没有，否则消息会显示在它运行的终端或控制台中。幸运的是，在默认配置的日志库中。但是您必须编写一些额外的行来配置在外部文件中写日志。根据严重性，有几个日志事件。</p><ol class=""><li id="2c95" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js ls kw kx ky bi translated"><em class="kc">调试</em></li><li id="afb8" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js ls kw kx ky bi translated"><em class="kc">信息</em></li><li id="f87c" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js ls kw kx ky bi translated"><em class="kc">警告</em></li><li id="a828" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js ls kw kx ky bi translated"><em class="kc">错误</em></li></ol><p id="f009" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 4.5。例外【这不是主要的，但是你会经常用到】</em></p><p id="664f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 5。关键</em></p><p id="9495" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以手动决定消息的重要级别以及每个python文件支持的最低重要级别。[ <em class="kc">上图最后一行就是这么做的] </em>除此之外，你还必须明白，日志记录操作不会杀死任何进程。所以，如果你在文件中写了一个错误信息，你必须通过一个<code class="du kz la lb lc b">try : except:</code>块手动处理这个异常。</p><p id="f91f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接:</p><p id="3c44" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://realpython.com/python-logging/" rel="noopener ugc nofollow" target="_blank"> python日志</a></p><p id="b23e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://realpython.com/python-logging-source-code/" rel="noopener ugc nofollow" target="_blank"> python日志深入人心</a></p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="4c27" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这只是冰山一角，你将面临建设自己的图书馆。有很多事情需要掩盖:</p><ul class=""><li id="e4de" class="kq kr hi ix b iy iz jc jd jg ks jk kt jo ku js kv kw kx ky bi translated">文件和版本控制 ✅</li><li id="9107" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated"><a class="ae iu" rel="noopener" href="/analytics-vidhya/explicit-understanding-of-python-package-building-structuring-4ac7054c0749">封装架构</a></li><li id="73c6" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">python装饰者</li><li id="ef84" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">python生成器</li><li id="b94d" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">python上下文管理器</li><li id="bb06" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">面向对象的设计模式用法</li><li id="8b1d" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">包测试——单元测试——没有模仿/模仿</li><li id="c0a3" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">异常处理</li><li id="c5cb" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">CI/CD管道建筑</li><li id="0cbb" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">自动化CI/CD管道</li><li id="2a6d" class="kq kr hi ix b iy li jc lj jg lk jk ll jo lm js kv kw kx ky bi translated">未来兼容性</li></ul><p id="ca8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，正如我所说的，有很多问题需要讨论。那么，一会儿见！</p></div></div>    
</body>
</html>