<html>
<head>
<title>Sentiment analysis of user feedback for a MOOC course</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MOOC课程用户反馈的情感分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mooc-feedback-sentiment-analysis-6491507e2eb4?source=collection_archive---------32-----------------------#2021-01-10">https://medium.com/analytics-vidhya/mooc-feedback-sentiment-analysis-6491507e2eb4?source=collection_archive---------32-----------------------#2021-01-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="62e1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个项目中，我们对MOOC课程的用户反馈进行了分析，对原始反馈数据进行了预处理，进行了情感分析，并使用wordcloud和simple piechart对其进行了可视化</p><p id="006d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们首先导入必要的库，比如用于文本处理的pandas、re和nltk，用于可视化的wordcloud和matplotlib</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="ce86" class="jl jm hh jh b fi jn jo l jp jq">import pandas as pd<br/>import nltk<br/>import re<br/>from nltk.stem import WordNetLemmatizer<br/>from nltk.corpus import stopwords<br/>from wordcloud import WordCloud, STOPWORDS<br/>import matplotlib.pyplot as plt</span></pre><p id="211a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我们导入csv格式的数据集。我们只取数据集的反馈列。它有102条独特的评论。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="1548" class="jl jm hh jh b fi jn jo l jp jq">df = pd.read_csv('feedback_week1.csv').iloc[:,0:1]</span><span id="38e3" class="jl jm hh jh b fi jr jo l jp jq">df.Feedback.nunique()</span><span id="16d4" class="jl jm hh jh b fi jr jo l jp jq">102</span><span id="3685" class="jl jm hh jh b fi jr jo l jp jq">df.isnull().sum()</span><span id="4df4" class="jl jm hh jh b fi jr jo l jp jq">Feedback    0<br/>dtype: int64</span></pre><h2 id="3d2b" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">数据预处理</h2><p id="1fd2" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">我们通过将整个反馈的大小写改为小写、特殊字符、移除停用词、移除换行符来执行数据清理。我们还使用词汇化进行进一步的数据预处理。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="7cd2" class="jl jm hh jh b fi jn jo l jp jq"># change to lowercase<br/>df['Feedback'] = df['Feedback'].apply(lambda x: " ".join(x.lower() for x in x.split()))<br/># special character<br/>df['Feedback'] = df['Feedback'].str.replace('[^\w\s]','')<br/>## remove stopwords<br/>stop = stopwords.words('english')<br/>df['Feedback'] = df['Feedback'].apply(lambda x: " ".join(x for x in x.split() if x not in stop))</span><span id="418d" class="jl jm hh jh b fi jr jo l jp jq">## regular expression cleanup<br/><br/>REPLACE_NO_SPACE = re.compile("[.;:!\'?,\"()\[\]]")<br/>REPLACE_WITH_SPACE = re.compile("(&lt;br\s*/&gt;&lt;br\s*/&gt;)|(\-)|(\/)")<br/>NEW_LINE_REMOVE = re.compile("\n")<br/><br/><br/>def preprocess_reviews(reviews):<br/>    reviews = [REPLACE_NO_SPACE.sub("", line.lower()) for line in reviews]<br/>    reviews = [REPLACE_WITH_SPACE.sub(" ", line) for line in reviews]<br/>    <br/>    return reviews<br/><br/>df['Feedback'] = preprocess_reviews(df['Feedback'])</span></pre><h2 id="52e6" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">词汇化</h2><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="9c2b" class="jl jm hh jh b fi jn jo l jp jq">def get_lemmatized_text(corpus):<br/>    lemmatizer = WordNetLemmatizer()<br/>    return [' '.join([lemmatizer.lemmatize(word) for word in review.split()]) for review in corpus]<br/><br/>df['Feedback'] = get_lemmatized_text(df['Feedback'])</span></pre><h2 id="efb4" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">常用词</h2><p id="d9cf" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">然后我们找到最常用的单词列表</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="1be3" class="jl jm hh jh b fi jn jo l jp jq">most = pd.Series(' '.join(df['Feedback']).split()).value_counts()[:10]<br/>most</span><span id="6cbc" class="jl jm hh jh b fi jr jo l jp jq">week           47<br/>content        46<br/>hci            36<br/>course         28<br/>learning       28<br/>interesting    26<br/>system         25<br/>video          23<br/>1              22<br/>mooc           21<br/>dtype: int64</span></pre><h2 id="0462" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">词云</h2><p id="dee1" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">我们使用词云来可视化用户给出的反馈。这可能是了解反馈意见的方法之一。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="f521" class="jl jm hh jh b fi jn jo l jp jq">stopwords = set(STOPWORDS)<br/>def show_wordcloud(col, title = None):<br/>    wordcloud = WordCloud(<br/>        background_color='white',<br/>        stopwords=stopwords,<br/>        max_words=500,<br/>        max_font_size=40, <br/>        scale=3,<br/>        random_state=1<br/>    ).generate(str(col))<br/><br/>    fig = plt.figure(1, figsize=(10, 10))<br/>    plt.axis('off')<br/>    if title: <br/>        fig.suptitle(title, fontsize=10)<br/>        fig.subplots_adjust(top=2.3)<br/><br/>    plt.imshow(wordcloud)<br/>    plt.show()<br/><br/><br/>show_wordcloud(df['Feedback'])</span></pre><figure class="jc jd je jf fd kq er es paragraph-image"><div class="ab fe cl kr"><img src="../Images/6330e3330c614dad2cca52fcce44606d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*DT4iojWkuHxYb4gjlG4tHQ.png"/></div></figure><h2 id="d356" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">使用的形容词</h2><p id="7a6e" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">我们还只过滤了形容词，以获得更多关于反馈的信息。我们列出了反馈中最常用的形容词</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="8327" class="jl jm hh jh b fi jn jo l jp jq">feelings = []<br/>for sentence in df['Feedback']:<br/>    for word, pos in nltk.pos_tag(sentence.split()):<br/>        if pos in ['JJR', "JJ", "JJS"]:<br/>            feelings.append(word)</span><span id="58c0" class="jl jm hh jh b fi jr jo l jp jq">most = pd.Series(' '.join(feelings).split()).value_counts()[:10]<br/>most</span><span id="d26c" class="jl jm hh jh b fi jr jo l jp jq">good           18<br/>content        13<br/>first          11<br/>interesting    11<br/>helpful        10<br/>different       9<br/>new             9<br/>many            8<br/>easy            8<br/>great           7<br/>dtype: int64</span></pre><h2 id="3b10" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">情感评分</h2><p id="81cb" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">对于情感评分，我们使用VADER(价感知词典和情感推理机)。这是一个基于词典和规则的情感分析工具。它给出情感评分，因此在处理社交媒体文本和评论(如电影评论和产品评论)时非常成功。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="5c6b" class="jl jm hh jh b fi jn jo l jp jq">nltk.download('vader_lexicon')<br/>from nltk.sentiment.vader import SentimentIntensityAnalyzer<br/><br/>#load in the sentiment analyzer<br/>sia=SentimentIntensityAnalyzer()<br/><br/>#apply the analyzer over each comment<br/>df['polairty scores'] =df['Feedback'].apply(lambda x: sia.polarity_scores(x)['compound'])</span><span id="f3c2" class="jl jm hh jh b fi jr jo l jp jq">[nltk_data] Downloading package vader_lexicon to<br/>[nltk_data]     /home/bibhuti/nltk_data...<br/>[nltk_data]   Package vader_lexicon is already up-to-date!</span><span id="e134" class="jl jm hh jh b fi jr jo l jp jq">def sentiment(score):<br/>    if score&lt;0 :<br/>        return "Negative"<br/>    elif score&lt;=0.5:<br/>        return "Neutral"<br/>    elif score&gt;0.5:<br/>        return "Positive"</span><span id="563b" class="jl jm hh jh b fi jr jo l jp jq">sentiment_list=[]<br/>for a in df['polairty scores']:<br/>    sentiment_list.append(sentiment(a))<br/>df['Sentiment']=sentiment_list</span><span id="ebf0" class="jl jm hh jh b fi jr jo l jp jq">df['Sentiment'].value_counts().plot(kind="pie")<br/>plt.show()</span></pre><figure class="jc jd je jf fd kq er es paragraph-image"><div class="ab fe cl kr"><img src="../Images/bf70706efed75db08f073bd0e896f321.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9TiGtj0vv7rFm-Fb3FojGQ.png"/></div></figure><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="7283" class="jl jm hh jh b fi jn jo l jp jq">df_positive=df[df.Sentiment=='Positive']<br/>df_negative=df[df.Sentiment=='Negative']</span></pre><p id="3c25" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们用最常用的肯定/否定形容词来形象化它们。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="d5a2" class="jl jm hh jh b fi jn jo l jp jq">def feelings_func(df):<br/>    feelings = []<br/>    for sentence in df['Feedback']:<br/>        for word, pos in nltk.pos_tag(sentence.split()):<br/>            if pos in ["JJ"]:<br/>                feelings.append(word)<br/>    return feelings</span><span id="4a67" class="jl jm hh jh b fi jr jo l jp jq">postive_feeling = feelings_func(df_positive)<br/>negative_feeling = feelings_func(df_negative)<br/>all_feeling = feelings_func(df)</span></pre><h2 id="ecc4" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">可视化所有反馈</h2><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="abfd" class="jl jm hh jh b fi jn jo l jp jq">show_wordcloud(feelings)</span></pre><figure class="jc jd je jf fd kq er es paragraph-image"><div class="ab fe cl kr"><img src="../Images/513f4c0e611c19cde158c472eb084c71.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Vi665xXLzhsbcbKfAJilnQ.png"/></div></figure><h2 id="58eb" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">反馈中描述形容词的积极情绪的词云</h2><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="77b0" class="jl jm hh jh b fi jn jo l jp jq">show_wordcloud(postive_feeling)</span></pre><figure class="jc jd je jf fd kq er es paragraph-image"><div class="ab fe cl kr"><img src="../Images/7f98364abea6a8163616624a1ca2d111.png" data-original-src="https://miro.medium.com/v2/format:webp/1*09u498amgioSxWvoRuJfDg.png"/></div></figure><h2 id="3ff5" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">负面情绪词云表示反馈中的形容词</h2><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="8992" class="jl jm hh jh b fi jn jo l jp jq">show_wordcloud(negative_feeling)</span></pre><figure class="jc jd je jf fd kq er es paragraph-image"><div class="ab fe cl kr"><img src="../Images/1507c0be663a9de55dd203b8b0669566.png" data-original-src="https://miro.medium.com/v2/format:webp/1*FbZVTtDModpxl4NaStbd3A.png"/></div></figure><h2 id="09a9" class="jl jm hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">参考</h2><ul class=""><li id="381a" class="ku kv hh ig b ih kl il km ip kw it kx ix ky jb kz la lb lc bi translated"><a class="ae ld" rel="noopener" href="/analytics-vidhya/simplifying-social-media-sentiment-analysis-using-vader-in-python-f9e6ec6fc52f">https://medium . com/analytics-vid hya/simplified-social-media-sensition-analysis-using-Vader-in-python-f 9 e 6 EC 6 fc 52 f</a></li><li id="adfe" class="ku kv hh ig b ih le il lf ip lg it lh ix li jb kz la lb lc bi translated"><a class="ae ld" href="https://towardsdatascience.com/sentimental-analysis-using-vader-a3415fef7664" rel="noopener" target="_blank">https://towards data science . com/感伤-分析-使用-维德-a3415fef7664 </a></li></ul></div></div>    
</body>
</html>