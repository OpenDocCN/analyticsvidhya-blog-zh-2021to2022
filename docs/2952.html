<html>
<head>
<title>10 Ways To Speed Up Your Python Code! 🚀</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高Python代码速度的10种方法！🚀</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/10-ways-to-speed-up-your-python-code-bddd9f9902d0?source=collection_archive---------12-----------------------#2021-05-27">https://medium.com/analytics-vidhya/10-ways-to-speed-up-your-python-code-bddd9f9902d0?source=collection_archive---------12-----------------------#2021-05-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/ce8b66ea75ce1326c39f13ea71beac8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*92p1ORW0sKYr-mCWh5SlNg.jpeg"/></div></div></figure><div class=""/><p id="6935" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">爱好者们你们好！Python很可能是我们的第一种编程语言。<br/>起初，一切都显得简单明了。然而，我们大多数人在处理一个复杂的算法问题时都经历过时间限制。然而，我们不能完全责怪Python的缓慢；程序员也可能会加快Python的速度(并不是说这种语言不慢)。所以今天，我们将看看10种让你的Python代码运行更快的方法！</p><h1 id="99b2" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">1.使用列表理解</h1><p id="6dad" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">如果你能利用列表理解，不要为其他任何事情烦恼。例如，下面的代码列出了1到1000之间的所有数字，它们是3的倍数:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="56e1" class="kz jo hs kv b fi la lb l lc ld">L = []<br/>for i in range (1, 1000):<br/>    if i%3 == 0:<br/>        L.append (i)</span></pre><p id="c13c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用列表理解，应该是:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="10ae" class="kz jo hs kv b fi la lb l lc ld">L = [i for i in range (1, 1000) if i%3 == 0]</span></pre><p id="daa8" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">列表理解比使用<code class="du le lf lg kv b">append()</code>方法更快。</p><h1 id="d10f" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">2.使用生成器和用键排序</h1><p id="43b1" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">生成器通过允许您编写一个一次返回一个对象而不是一次返回所有对象的函数来提高内存效率。这是一个很好的例子，当你期待一个很长的数字列表，并把它们加起来。</p><p id="7765" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，尽可能使用键和默认的sort()技术对列表中的项目进行排序。在下面的内容中，请注意在每种情况下，列表是如何根据您指定为key参数的一部分的索引进行排序的。这种方法对字符串和数字同样有效:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="6780" class="kz jo hs kv b fi la lb l lc ld">import operator</span><span id="6f88" class="kz jo hs kv b fi lh lb l lc ld">somelist = [(1, 5, 8), (6, 2, 4), (9, 7, 5)]<br/>somelist.sort(key=operator.itemgetter(0))</span><span id="0203" class="kz jo hs kv b fi lh lb l lc ld">somelist</span><span id="611a" class="kz jo hs kv b fi lh lb l lc ld">#Output = [(1, 5, 8), (6, 2, 4), (9, 7, 5)]</span><span id="c940" class="kz jo hs kv b fi lh lb l lc ld">somelist.sort(key=operator.itemgetter(1))</span><span id="1639" class="kz jo hs kv b fi lh lb l lc ld"> somelist</span><span id="1dd1" class="kz jo hs kv b fi lh lb l lc ld">#Output = [(6, 2, 4), (1, 5, 8), (9, 7, 5)]</span><span id="7632" class="kz jo hs kv b fi lh lb l lc ld"> somelist.sort(key=operator.itemgetter(2))</span><span id="1d95" class="kz jo hs kv b fi lh lb l lc ld"> somelist</span><span id="77fa" class="kz jo hs kv b fi lh lb l lc ld"> #Output = [(6, 2, 4), (9, 7, 5), (1, 5, 8)]</span></pre><h1 id="b965" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">3.记住内置函数。</h1><p id="fe00" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Python包含了大量的电池。您可以开发高质量、高效的代码，但是底层库很难被击败。这些都经过了微调和严格测试(毫无疑问，就像您的代码一样)。检查内置列表，查看代码中是否有重复的功能。</p><h1 id="0c30" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">4.减少for循环的使用</h1><p id="372e" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">因为Python中的for循环是动态的，所以它比while循环花费的时间更长。因此，不要使用for循环，而是使用while循环。</p><h1 id="ba23" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">5.使用适当的数据结构</h1><p id="43f3" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用适当的数据结构对运行时有很大的影响。Python中内置的数据结构有列表、元组、集合和字典。然而，大多数人在任何情况下都使用这个列表。但是，这不是最好的选择。根据您的任务，使用适当的数据结构。尽可能使用元组而不是列表。遍历一个元组比遍历一个列表更容易。</p><h1 id="ee99" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">6.如果可能，使用<code class="du le lf lg kv b">in</code>。</h1><p id="3884" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用in关键字检查列表的if成员资格通常更快。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="a058" class="kz jo hs kv b fi la lb l lc ld">for name in member_list:<br/>  print('{} is a member'.format(name))</span></pre><h1 id="f0b1" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">7.在导入模块时偷懒。</h1><p id="7cc4" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">当您第一次开始学习Python时，您无疑被告知要立即导入所有您需要的模块。也许你仍然按字母顺序排列这些。</p><p id="62e2" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种方法使得跟踪程序的依赖关系变得容易。缺点是所有的导入将同时加载。</p><p id="f10e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为什么不尝试不同的东西呢？模块只能在需要时加载。这种策略可以更均匀地分配模块加载时间，也许可以减少内存使用高峰。</p><h1 id="64b9" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">8.使用<code class="du le lf lg kv b">join()</code>来连接字符串。</h1><p id="9627" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Python中的字符串连接是用+完成的。然而，Python字符串是不可变的；因此，+操作包括在每一步构造一个新的字符串并复制旧的内容。使用数组模块编辑单个字符，然后使用join()函数重新创建最终的字符串是一种更有效的方法。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="d7f4" class="kz jo hs kv b fi la lb l lc ld">new = "This" + "is" + "going" + "to" + "require" + "a" + "new" + "string" + "for" + "every" + "word"<br/>print(new)</span></pre><p id="b25d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这段代码的输出将是，</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="b65e" class="kz jo hs kv b fi la lb l lc ld">Thisisgoingtorequireanewstringforeveryword</span></pre><p id="f958" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一方面，这段代码:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="7f11" class="kz jo hs kv b fi la lb l lc ld">new = " ".join(["This", "will", "only", "create", "one", "string", "and", "we", "can", "add", "spaces."])<br/>print(new)</span></pre><p id="90ac" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将打印:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="c041" class="kz jo hs kv b fi la lb l lc ld">This will only create one string and we can add spaces.</span></pre><p id="81c6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">干净，更优雅，更快捷！</p><h1 id="59e5" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">9.不要使用点运算</h1><p id="7abd" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">尽量避免点操作。参见下面的程序。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="f87f" class="kz jo hs kv b fi la lb l lc ld">import math<br/>val = math.sqrt(60)</span></pre><p id="701a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">代替上面的风格，像这样写代码:</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="c9bc" class="kz jo hs kv b fi la lb l lc ld">from math import sqrt<br/>val = sqrt(60)</span></pre><p id="cfd7" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因为当你使用<code class="du le lf lg kv b">. (dot)</code>调用一个函数时，它首先调用<code class="du le lf lg kv b">__getattribute()__</code>或<code class="du le lf lg kv b">__getattr()__</code>，然后使用字典操作，这很费时间。所以，尝试使用从模块导入功能。</p><h1 id="1457" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">10.不要使用<code class="du le lf lg kv b">global</code>变量</h1><p id="b750" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Python中的global关键字用于声明全局变量。另一方面，全局变量比局部变量需要更长的运行时间。因此，除非绝对必要，否则避免使用全局变量。</p><h1 id="db38" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">额外收获:使用<code class="du le lf lg kv b">while 1</code>进行无限循环。</h1><p id="3627" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">如果你正在监听一个套接字，你可能想要使用一个无限循环。实现这一点最常见的方法是使用while True。这个管用；但是，使用while 1可以在很短的时间内得到相同的结果。<br/>因为是数值比较，所以这是单跳操作。</p><p id="040a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有了这些，现在你可以让你的代码飞起来🚀。</p><p id="c80a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你有任何其他的建议，欢迎在评论中分享！</p></div></div>    
</body>
</html>