<html>
<head>
<title>HOLT-WINTERS FORECASTING</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">霍尔特-温特斯预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/holt-winters-forecasting-66bb1798fdc7?source=collection_archive---------4-----------------------#2021-06-18">https://medium.com/analytics-vidhya/holt-winters-forecasting-66bb1798fdc7?source=collection_archive---------4-----------------------#2021-06-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1b73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">时间序列预测系列。</p><p id="b377" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">霍尔特-温特斯预测是一种建模和预测一系列值在一段时间内(时间序列)的行为的方法。Holt-Winters是最流行的时间序列预测技术之一。</p><p id="f311" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它已有几十年的历史，但在许多应用中仍然无处不在，包括监控，用于异常检测和容量规划等目的。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/9570e7350d7a7ead2010c901461fa33b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxMKwMupkwiBLmkTcNmVLw.png"/></div></div></figure><p id="964d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">霍尔特-温特斯是时间序列行为的模型。预测总是需要模型，Holt-Winters是一种对时间序列的三个方面进行建模的方法:典型值(平均值)、随时间变化的斜率(趋势)和周期性重复模式(季节性)。Holt-Winters使用指数平滑对过去的大量值进行编码，并使用它们来预测现在和未来的“典型”值。如果你不熟悉指数平滑。</p><h2 id="40de" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated">霍尔特-温特斯法</h2><p id="650f" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">这种方法有两种不同的变体，如季节性成分。</p><p id="0a5c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当季节变化在整个系列中大致不变时，最好使用加法方法，而当季节变化与系列水平成比例变化时，最好使用乘法方法</p><h2 id="ee03" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated">有三个组成部分。</h2><ul class=""><li id="faf8" class="ko kp hh ig b ih kj il kk ip kq it kr ix ks jb kt ku kv kw bi translated">趋势</li><li id="5c79" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">季节性</li><li id="5e46" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">水平</li></ul><p id="75f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">加性季节性</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lc"><img src="../Images/1f71c49477192fc726332f144b7e5b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*flDkyANyiLtZuuUWc1MUAA.png"/></div></div></figure><p id="8c4c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ld le lf lg b">l = level, b = trend, s = seasonality, m = seasonal time period, h = forecast time period(how many time periods)</code></p><p id="b2f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">倍增的季节性</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lh"><img src="../Images/53f2d9b867fbb0ae580ed985d50de240.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*PyaKJjYPygKd3CFe_NoXiw.png"/></div></figure><p id="6ee5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ld le lf lg b">l = level, b = trend, s = seasonality, m = seasonal time period, h = forecast time period(how many time periods)</code></p><h2 id="c205" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">霍尔特-温特斯—重要概念</strong></h2><h2 id="fa2f" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">平滑</strong></h2><ul class=""><li id="de33" class="ko kp hh ig b ih kj il kk ip kq it kr ix ks jb kt ku kv kw bi translated">简单移动平均线</li><li id="96d1" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">加权移动平均</li><li id="2a22" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">指数加权移动平均或指数平滑</li></ul><h2 id="2794" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">简单移动平均线</strong></h2><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es li"><img src="../Images/b90e584ba86031e77220c395a07cd3b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*bDEp8mI9mXQEWUI6SoS2ig.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx translated">SMA的示例</figcaption></figure><pre class="jd je jf jg fd ln lg lo lp aw lq bi"><span id="4135" class="jo jp hh lg b fi lr ls l lt lu">Where, K=2<br/>SMA = (15+20)/(2) = 17.5<br/>SMA = (20+25)/(2) = 22.5<br/>.<br/>.</span></pre><p id="1b05" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类似地，</p><pre class="jd je jf jg fd ln lg lo lp aw lq bi"><span id="5d60" class="jo jp hh lg b fi lr ls l lt lu">Where if, K=3<br/>SMA = (15+20+25)/(3) = 20<br/>SMA = (20+25+30)/(3) = 25<br/>.<br/>.</span></pre><h2 id="e077" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">加权移动平均</strong></h2><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lv"><img src="../Images/3ec6149b4e0c6f0879bcc4596d6a9868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*ODepKzpSdnBFawci2S3qjg.jpeg"/></div></figure><pre class="jd je jf jg fd ln lg lo lp aw lq bi"><span id="66a1" class="jo jp hh lg b fi lr ls l lt lu">Adding weightage to the Kth Variable.<br/>WMA for K=2<br/>WMA = (20*2+15*1)/(3) = 18.33<br/>WMA = (16*2+20*1)/(3) = 17.33<br/>.<br/>.</span><span id="7d8b" class="jo jp hh lg b fi lw ls l lt lu">WMA for K=3<br/>WMA = (16*3+20*2+15*1)/(6) = 17.16<br/>WMA = (13*3+16*2+20*1)/(6) = 15.16<br/>.<br/>.</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lx"><img src="../Images/3f0f9f86130b8ae46a59796b3048ca67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ex9DAj8mvbtsek9B-X9juA.jpeg"/></div></div></figure><h2 id="4ab9" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">指数平滑</strong></h2><ul class=""><li id="ba9d" class="ko kp hh ig b ih kj il kk ip kq it kr ix ks jb kt ku kv kw bi translated">长期平均抑制了波动，不仅去除了噪音，还去除了趋势和季节性</li><li id="a212" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">短期内的移动平均线保持趋势和季节性，但是确定一个最佳的周期数是很棘手的，即使使用像MAE这样的指标。</li><li id="519d" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">如果在太少的时间内平均，不规则性继续存在，如果在长时间内平均，阻尼再次成为问题。</li><li id="f440" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">指数平滑保留所有较旧的期间，同时给予较新的期间较大的权重(因此不是移动平均)。</li></ul><p id="1d79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">静态模型:指数平滑</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ly"><img src="../Images/77bb7fa71b1153e3df753d676bbad98a.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*p1-XRdvIi4o2uyJ9C3EMew.png"/></div></figure><pre class="jd je jf jg fd ln lg lo lp aw lq bi"><span id="240a" class="jo jp hh lg b fi lr ls l lt lu"><strong class="lg hi">ŷ</strong>t+1 = Predicted value for time period t+1<br/><strong class="lg hi">ŷ</strong>t   = Predicted value for previous period<br/>α    = any value between 0 and 1 (0 ≤ α ≤ 1)<br/>(yt-<strong class="lg hi">ŷ</strong>t) = adjustment for the error made in predicting the previous periods's value</span></pre><ul class=""><li id="bd7d" class="ko kp hh ig b ih ii il im ip lz it ma ix mb jb kt ku kv kw bi translated">用于在每个周期更新组件的三个权重平滑参数。</li></ul><p id="8294" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于加法平滑组件</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mc"><img src="../Images/4325ae65297c700f8de664da9d866f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgeUQEz_XxOwbXbH7ePvSw.jpeg"/></div></div></figure><p id="a040" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">倍增的季节性</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es md"><img src="../Images/b4896431222aa9ca97e18c9eb92779d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14KiMttmCc4QDkr2mH4fiQ.jpeg"/></div></div></figure><p id="e418" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们跳过数学，理解霍尔特·温特是如何工作的</p><h2 id="865f" class="jo jp hh bd jq jr js jt ju jv jw jx jy ip jz ka kb it kc kd ke ix kf kg kh ki bi translated"><strong class="ak">手动霍尔特-温特。</strong></h2><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/3ba5f4b6bb9e0513d9ddd98659f2141b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R85c9ULL7fY0x01IpcEQvw.png"/></div></div></figure><pre class="jd je jf jg fd ln lg lo lp aw lq bi"><span id="1e86" class="jo jp hh lg b fi lr ls l lt lu">Here is the R code:<br/>x &lt;- seq(1,20,1)</span><span id="c709" class="jo jp hh lg b fi lw ls l lt lu">for (i in x) {<br/>    x[i] = 0<br/>    if ((i-2)%%5==0){<br/>    x[i]=1<br/>    }<br/>  }<br/>plot.ts(x,ylab="Value", main="Plot of simple time series")<br/>points(x)</span></pre><p id="e7c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">模式是显而易见的:该图重复值[0，1，0，0，0]。</p><p id="004a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们相对于这5个点的平均值来计算<em class="mf">的值，会是什么样子？(0+1+0+0+0)/5的平均值是0.2，我们将在图上画一条水平线:</em></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/5cf633aa9d1e2463e6159c59ae98eb81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E6R7lv1x_blNXqhF.png"/></div></div></figure><p id="a832" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">回想一下霍尔特-温特斯有一个趋势部分。如果我们将其参数设置为零，Holt-Winters将忽略趋势(斜率)，因此模型将会简化。现在，它只是一堆相对于平均值的值。在我们的图中，相对于0.2的值是[-0.2，0.8，-0.2，-0.2，-0.2]。如果我们在没有趋势的情况下做Holt-Winters，那就是我们要建立的模型类型。</p><p id="0806" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是R中的HoltWinters函数给出的内容，还有一些我手动添加的蓝色注释:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/c0698f3748a584b4dbc15ea0a836a45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ThrOaTdkixNlykFU.png"/></div></div></figure><p id="b7cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用趋势预测只是对它的一种增强。你不需要用一个固定的平均值作为基础，你只需要加入直线的斜率。这是一个有趋势的模型:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/a4b27ba00063217ea213e212ebf69b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pq64E_2OewUCakE4.png"/></div></div></figure><p id="ab64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例系列每五个点重复一次，即季节为5个周期。</p><p id="eb61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">正确的季节性对霍尔特-温特斯预测至关重要</strong></p><p id="f356" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了说明这一点，让我们看看当您使用6个期间的季节时会发生什么，比5个期间的实际季节多一个期间:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/6da75ce0d7d3b9fb9f8845be97c0129c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bT3RinbWsAnffr7P.png"/></div></div></figure><p id="9b10" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">图表中的红线预测变得不太准确，变成了垃圾。为了得到好的结果，你需要给模型好的参数。这是霍尔特-温特斯预测的第二个挑战。</p><p id="4bb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择季节性是一个困难的问题。通用预测很难，因为它必须准备好用于任何数据集，这些数据集可能具有值、趋势和季节性的任意组合。它甚至可能没有这些组件</p><p id="0369" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">预测的准确性是计算预测值和实际值之间的差异。下图中的蓝色箭头表示预测值与实际值的差距。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/13e501c10a3d367c00dbe9ce60bbcc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2tLqev9TsVpx6ISF.png"/></div></div></figure><p id="b7ad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要量化整体准确性，您可以通过取平均值或平方和将这些差异合并成一个值。</p><p id="7bd9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">结果是，如果预测较好，则值较小，如果预测较差，则值较大。这为您提供了一个比较预测结果的好方法。</p><p id="553e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们的预测代码尝试了许多不同参数的组合，并选择了产生最低组合误差分数的组合。</p><p id="3f61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了说明这一点，这里有一些对同一时间序列的预测，尝试不同的频率</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es me"><img src="../Images/6e3d0a3c0dda8007bc3a243e55c8bbcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TEAKTGQWItovnmhS.png"/></div></div></figure><p id="1fb7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于数据和预测之间的差异很小，所以具有正确季节性(每个季节5个周期)的数据很容易从视觉上识别出来。这是一个直观的例子，展示了我们通过优化进行的预测。它还优化了其他参数，如趋势。</p><h1 id="8906" class="mg jp hh bd jq mh mi mj ju mk ml mm jy mn mo mp kb mq mr ms ke mt mu mv kh mw bi translated"><strong class="ak">结论</strong></h1><p id="2090" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">霍尔特-温特斯预测尽管简单，却惊人地强大。它可以处理许多复杂的季节性模式，只需找到中心值，然后添加斜率和季节性的影响。诀窍是给它正确的参数。这个解决方案易于构建和理解，这对我们的目的很有价值。</p><h1 id="c550" class="mg jp hh bd jq mh mi mj ju mk ml mm jy mn mo mp kb mq mr ms ke mt mu mv kh mw bi translated">参考</h1><ul class=""><li id="52d5" class="ko kp hh ig b ih kj il kk ip kq it kr ix ks jb kt ku kv kw bi translated"><a class="ae mx" href="https://www.otexts.org/fpp/7/5" rel="noopener ugc nofollow" target="_blank">https://www.otexts.org/fpp/7/5</a></li><li id="799b" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated"><a class="ae mx" href="https://grisha.org/blog/2016/01/29/triple-exponential-smoothing-forecasting/" rel="noopener ugc nofollow" target="_blank">https://grisha . org/blog/2016/01/29/三重指数平滑预测/ </a></li><li id="34ba" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated"><a class="ae mx" href="http://www.itl.nist.gov/div898/handbook/pmc/section4/pmc435.htm" rel="noopener ugc nofollow" target="_blank">http://www . ITL . NIST . gov/div 898/handbook/PMC/section 4/PMC 435 . htm</a></li></ul></div></div>    
</body>
</html>