<html>
<head>
<title>How to structure a machine learning project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建机器学习项目</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-structure-a-machine-learning-project-f190570bd66d?source=collection_archive---------8-----------------------#2021-11-30">https://medium.com/analytics-vidhya/how-to-structure-a-machine-learning-project-f190570bd66d?source=collection_archive---------8-----------------------#2021-11-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="585a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我如何构建我的</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/a49f26ccf28ae56c41e289d871181f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*scf2bL2SwCvSrPXjDKnMpA.jpeg"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx translated"><a class="ae js" href="https://unsplash.com/@anikinearthwalker?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Dimitry Anikin </a>在<a class="ae js" href="https://unsplash.com/s/photos/organized?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="d18b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">介绍</h1><p id="f1a3" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">有一个结构化的目录来放置文件是非常有用的，并且可以加速你的机器学习项目。虽然没有一种构建机器学习项目的方法(事实上，任何项目)，但我会分享我通常是如何组织我的项目的。</p><h1 id="397f" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">概观</h1><p id="c0fe" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">您可以在下面查看完整的结构，之后我会检查每个目录的内容。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="6c98" class="lb ju hh kx b fi lc ld l le lf">├── data/<br/>│<br/>├── notebooks/<br/>│<br/>├── saves/<br/>│   ├── data/<br/>│   ├── models/<br/>│   └── samples/<br/>│<br/>├── tests/<br/>│<br/>└── utils/</span></pre><h1 id="edb8" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">/数据</h1><p id="3319" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在这里，我通常存储项目中任何数据集的原始、未处理的原始副本。无论我是从Kaggle下载的，还是我自己用刮网器或手工制作的，不管是什么情况。</p><p id="4dc5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦我把文件放在这里，这个文件夹中的文件通常不会被修改。你可以把它想象成一个数据湖。这样，我总是有我的数据的原始副本，并且可以随意复制和重做。</p><h1 id="1d88" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">/笔记本</h1><p id="8099" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">虽然笔记本电脑不适合生产，但它们非常适合进行实验、分析、演示等。最好将它们放在一个单独的文件夹中，以使它们更容易跟踪，尤其是在一起尝试几件事情时。</p><h1 id="47f5" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">/保存</h1><p id="ce52" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">您很可能想在您的机器学习项目中保存一些东西，以便不必每次都从头开始。处理的数据(不同级别)和您的模型在此列表中名列前茅。通常，我会在项目开始时创建单独的子文件夹(<em class="lg">/数据</em>、<em class="lg">/模型</em>)来存储它们。</p><p id="15a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有时我在研究一个生成模型，就像一个生成音乐的模型。为此，我使用<em class="lg"> /samples </em>子文件夹来保存我的模型生成的音乐样本。</p><h1 id="0a82" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">/测试</h1><p id="8460" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">我听到有人抱怨了吗？</p><p id="a17a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我敢打赌，你没有看到这一点，但测试是伟大的有，甚至在机器学习。事实是，我们确实进行了测试，但是它们通常是手动进行的，在任何地方，当我们没有得到预期的结果时。您可以通过将它们放在一个地方并有意识地组织起来，使它更好。</p><h1 id="144d" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">/util</h1><p id="8b3d" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">现在进入最后一个目录。我在这里保留了对我的项目很重要的Python脚本。有人叫它<em class="lg">/脚本</em>，有人<em class="lg"> /src </em>，我叫它<em class="lg"> /utils </em>，你可以随便叫它什么。</p><p id="745b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里结束的代码通常起初分散在多个笔记本上，有无数的重复。但是随着项目的进展，我想减少这些重复，更好地管理我的代码。</p><p id="cb88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我把它们从我的笔记本里拿出来，把它们变成功能，并根据它们的用途把它们归类到这个文件夹的文件里。处理数据、构建、训练和评估模型的代码在这里很常见。</p><h1 id="3cb3" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">笔记本特价</h1><p id="1dab" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在结束之前，我想把这些简短的特价商品放在笔记本上，您可能会感兴趣。</p><p id="d319" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">解决相对导入错误</strong></p><p id="6594" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在当前的项目结构中，如果您试图将/ <em class="lg"> utils </em>目录中的模块导入到<em class="lg"> /notebooks </em>目录中的笔记本中，您将会得到一个<em class="lg">导入错误</em>。这是关于相对进口在笔记本中是不可能的。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="6803" class="lb ju hh kx b fi lc ld l le lf"># Generates an import error<br/>from ..utils import models</span></pre><p id="f753" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我通常使用的修复方法是创建一个变量<em class="lg"> BASE_DIR </em>，它存储项目目录并将其附加到<em class="lg"> sys.path </em>。这样做的目的是让Python在我每次运行<em class="lg"> import </em>语句时，在我的项目目录中查找我想要导入的内容。然后，我可以从项目目录开始访问我的项目中的任何脚本。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="a2cb" class="lb ju hh kx b fi lc ld l le lf">import os<br/>import sys</span><span id="10a0" class="lb ju hh kx b fi lh ld l le lf"># For one-level deep notebook<br/>BASE_DIR = os.path.abspath("../")<br/>if BASE_DIR not in sys.path:<br/>    sys.path = [BASE_DIR] + sys.path</span><span id="00b2" class="lb ju hh kx b fi lh ld l le lf"># This works<br/>from utils import models</span></pre><p id="45f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果更有意义的话，您可以选择使用环境变量而不是Python变量。</p><p id="edf3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">处理移动笔记本</strong></p><p id="629b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我经常做的另一件事是写相对于<em class="lg"> BASE_DIR </em>的路径。所以，每次我移动任何笔记本(或者经常出现的副本！！！)，我需要改变的只是<em class="lg"> BASE_DIR </em>变量，一切都按预期运行。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="f119" class="lb ju hh kx b fi lc ld l le lf">torch.save(clean_data, BASE_DIR <strong class="kx hi">+</strong> "/saves/data/clean_data.pt")</span></pre><p id="7706" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">使用更新的脚本</strong></p><p id="fb8c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将代码组织成脚本(这是一个很好的实践)增加了一些不便。您希望Python脚本的任何更新都能立即反映在笔记本上，但这并没有发生。在已经导入的模块上调用import也没有任何作用。</p><p id="8eac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为此，来自<em class="lg"> importlib </em>库的<em class="lg"> reload </em>函数就派上了用场，你不必每次更新你的工作都重启你的笔记本。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="e86f" class="lb ju hh kx b fi lc ld l le lf">from importlib import reload<br/>from utils import models</span><span id="413e" class="lb ju hh kx b fi lh ld l le lf"># Reloads a module that has been imported before.<br/>reload(models)</span></pre><p id="c1c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在Colab上工作</strong></p><p id="f1d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，如果你像我一样，喜欢在Colab上有一份你的项目的副本，那么你可能会觉得这很有趣。将google drive安装(连接)到笔记本上是访问文件和使用Google drive上的空间所必需的。通常，我会将这样做的代码放在笔记本的第一个代码单元。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="c181" class="lb ju hh kx b fi lc ld l le lf">from google.colab import drive<br/>drive.mount('/content/drive', force_remount=True)</span></pre><p id="f00b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还必须用我们的Google drive中的确切路径来更改我们对<em class="lg"> BASE_DIR </em>的引用，因为在Colab文件系统中情况有所不同。由于我们以前的工作(使每个路径相对)，我们可以像在本地一样工作。</p><pre class="jd je jf jg fd kw kx ky kz aw la bi"><span id="3f96" class="lb ju hh kx b fi lc ld l le lf"># It may look like this<br/>BASE_DIR = "/content/drive/MyDrive/MyCurrentProject/"</span></pre><p id="1943" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，在本地工作时，我注释掉安装部分并更改<em class="lg"> BASE_DIR。T </em>在Colab上，我取消对它的注释，并使用适当的<em class="lg"> BASE_DIR </em>。厉害！</p><h1 id="3c1b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="7825" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">这就是本文的全部内容。您可能会发现一些目录名很奇怪，当然，您可以随时将其更改为您认为有意义的名称。主要的一点是理解他们做什么，并使用一个能说明这一点的名字。</p><p id="239a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你觉得这篇文章很有帮助，请记得分享、鼓掌并关注我。</p><p id="37cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢阅读！</p><div class="li lj ez fb lk ll"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">medium.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz jm ll"/></div></div></a></div></div></div>    
</body>
</html>