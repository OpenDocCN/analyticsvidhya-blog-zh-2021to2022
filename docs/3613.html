<html>
<head>
<title>No more confusion between apply(), map() and applymap()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">apply()、map()和applymap()之间不再混淆</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/no-more-confusion-between-apply-map-and-applymap-f982bb98c099?source=collection_archive---------3-----------------------#2021-07-13">https://medium.com/analytics-vidhya/no-more-confusion-between-apply-map-and-applymap-f982bb98c099?source=collection_archive---------3-----------------------#2021-07-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/70aef1bb714ec43aaa09a93c5b5e4636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WkqfaWBI2-WyFyrJ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">巴勃罗·加西亚·萨尔达尼亚在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e696" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你是否发现自己经常在Python的apply()、map()和applymap()函数之间感到困惑？好吧，让我们花几分钟来理解这些功能。</p><h1 id="032b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">【apply()做什么？</h1><p id="c5d4" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">pandas apply()函数在<strong class="ix hj">数据帧</strong>和<strong class="ix hj">系列</strong>上运行。我们可以在数据帧的列(轴=1)或行(轴=0)上使用它。让我们举个例子来更好地理解这一点。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="41b1" class="lf ju hi lb b fi lg lh l li lj">df = pd.DataFrame({ 'Name': ["Homer","Marge","Bart","Lisa","Maggie"],'Surname': ["Simpson","Simpson","Simpson","Simpson","Simpson"]})</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/e02e4a9c8259800ffe774561aa45cb2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*WSP6WoOzww_3xX_eYbjAWA.png"/></div></figure><p id="7317" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了将姓氏“Simpson”改为大写，我们在列级别上进行操作。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="149c" class="lf ju hi lb b fi lg lh l li lj">df['Surname']=df['Surname'].apply(lambda x: x.upper())</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/3b0de273e508135d5e46d9cb989d24f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*sfwqqDUuqp_urgweXjSaGw.png"/></div></div></figure><p id="0f47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了将任何一行转换成大写，我们在索引级别上操作。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="3059" class="lf ju hi lb b fi lg lh l li lj">df.loc[0]=df.loc[0].apply(lambda x: x.upper())</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/ad3cf248d97a0198f318a95b87f47bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*pzpWF5igZ-0Cwymqpr-lgw.png"/></div></figure><p id="7705" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还可以在整个数据帧上使用apply()。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="8207" class="lf ju hi lb b fi lg lh l li lj">df=df.apply(lambda x: x.str.upper())</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/db67ef824c90e22cd8e04245f46c4eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*iOS-3nu6vTOPGCrOMN8_Eg.png"/></div></div></figure><h1 id="a559" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">map()做什么？</h1><p id="c7aa" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">map()只能在序列上操作，而不能在整个数据帧上操作。因此，我们可以使用map()函数替换数据帧中一个系列或一列的所有值，或者替换同类数据帧行的所有值。</p><p id="4c0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的示例中，因为我们将列和行作为一系列同质字符串传递，所以map()函数也可以在这里替换。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="ed86" class="lf ju hi lb b fi lg lh l li lj">df['Surname']=df['Surname'].map(lambda x: x.upper())<br/>df.loc[0]=df.loc[0].map(lambda x: x.upper())</span></pre><p id="e487" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，如果我们在数据集中添加一个年龄列，map()和apply()都不能用于行操作，因为我们执行的是字符串操作。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/bf7e107e4dd7969f5f3e382da3c37fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*E7Tw71PJrU8fp9uOFK6kFQ.png"/></div></figure><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="0386" class="lf ju hi lb b fi lg lh l li lj">df['age']=[36,34,10,8,1]<br/>df.loc[0]=df.loc[0].map(lambda x: x.upper())</span><span id="80e2" class="lf ju hi lb b fi lp lh l li lj"><strong class="lb hj">AttributeError: 'numpy.int64' object has no attribute 'upper'</strong></span></pre><p id="66a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可以用一个小条件来解决！</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="c7ec" class="lf ju hi lb b fi lg lh l li lj">df.loc[0]=df.loc[0].apply(lambda x: x.upper() if type(x)==str else x)</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/7468cd114f679940390bca5160f64cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*N5lucHREfML9V92REvc_hQ.png"/></div></figure><p id="c98b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与apply()不同，map()不会对数据帧起作用，即使所有列的数据类型都相同。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/c69b8f12241f72ce09d5da9b68c494da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*il8FXCikfNFIATIM6cq8Ug.png"/></div></figure><h1 id="d97e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">applymap()是做什么的？</h1><p id="80ea" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">最后，applymap()对整个数据帧进行操作，并执行元素操作。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="3057" class="lf ju hi lb b fi lg lh l li lj">df=df.applymap(lambda x: x.upper())</span></pre><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/deb3cc3b9be9b65a91ee2cdf57991282.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*qt9X_WSMdcs9kLyGGnM-7w.png"/></div></figure><p id="c7a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lt">快乐编码！</em></p></div></div>    
</body>
</html>