<html>
<head>
<title>Introduction to Web Scraping with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python网页抓取简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-web-scraping-with-python-db5081047145?source=collection_archive---------8-----------------------#2021-07-30">https://medium.com/analytics-vidhya/introduction-to-web-scraping-with-python-db5081047145?source=collection_archive---------8-----------------------#2021-07-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="eafe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大家好。现在我和网络抓取有关系。在这个故事中，我们将尝试涵盖网络抓取的基础知识。我们如何选择元素？我们开始吧。</p><h1 id="6c65" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">超文本标记语言</h1><p id="0184" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">HTML是超文本标记语言的缩写。正如我们从它的名字所知道的，它不是一种编程语言，而是一种标记语言。通常我们用它来排列网页上的元素。你可以从<a class="ae kf" href="https://www.w3schools.com/" rel="noopener ugc nofollow" target="_blank">这里</a>获得更多信息。</p></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h1 id="3e9d" class="jc jd hh bd je jf kn jh ji jj ko jl jm jn kp jp jq jr kq jt ju jv kr jx jy jz bi translated">XPath</h1><p id="33f9" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">XPath是一种在XML中寻找东西的语言。我们可以通过使用XPath符号在XML中漫游。如果你想了解更多关于xpath的信息，你应该访问这里的<a class="ae kf" href="https://www.w3schools.com/xml/xml_xpath.asp" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="2df4" class="ks jd hh bd je kt ku kv ji kw kx ky jm ip kz la jq it lb lc ju ix ld le jy lf bi translated">XPath符号</h2><p id="fa83" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我将给出一些关于xpath符号的例子。我希望在那之后我们会明白它们是什么，以及我们如何使用它们。假设我们有如下的html代码。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/172f90a95008a428a5bd35c1ba5e61d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6lKCoISWbW2gs1Ll23xdtw.png"/></div></div></figure><ul class=""><li id="f72b" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">/html/body -&gt;选择正文</li><li id="2ec9" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/html/body/*--&gt;选择body内部的所有内容(*是通配符)</li><li id="e9b9" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/html/body//div -&gt;选择正文中的所有div</li><li id="8b2b" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/html/body/div[1]/h3--&gt;选择第一个div中的H3</li><li id="5ee1" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/div[@ id = " my-unique-id "]--&gt;选择所有具有“my-unique-id”id的div。@ '表示标记的属性。</li><li id="902c" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/span[@ class = " icon "]--&gt;选择具有“icon”类的所有span，但正如您所认为的，它不会选择任何内容。因为我们没有任何包含类“icon”的元素(只是icon！)那样</li><li id="bbab" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">/html/body//*[@ class = " icon "]--&gt;我们还可以互相组合。这意味着选择所有具有“图标”类的元素</li><li id="9f57" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">//*[包含(@class，" icon ")]--&gt;选择其class属性中包含" icon "的所有项目</li></ul></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h1 id="1b8d" class="jc jd hh bd je jf kn jh ji jj ko jl jm jn kp jp jq jr kq jt ju jv kr jx jy jz bi translated">CSS选择器</h1><p id="5a6f" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们也可以使用CSS选择器。它很简单，但是和xpath有一点不同。</p><p id="e403" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用“<strong class="ig hi">&gt;”</strong>作为不同于xpath选择器中的“<strong class="ig hi"> / </strong>”。示例:</p><ul class=""><li id="6524" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">html &gt;正文&gt;分类</li></ul><p id="1295" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">" "(<strong class="ig hi">空格</strong>)与xpath选择器中的"<strong class="ig hi"> // </strong>"不同。示例:</p><ul class=""><li id="0f0a" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">html &gt;正文&gt;分栏p</li></ul><p id="ec26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">"<strong class="ig hi">:第N个类型(N) </strong>"与xpath选择器中的"<strong class="ig hi">【N】</strong>"不同。示例:</p><ul class=""><li id="2598" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">body &gt; div:n-of-type(2)</li></ul><p id="2602" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还可以通过使用类别和id进行选择:</p><ul class=""><li id="a88a" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">body &gt;部门类别名称</li><li id="77f1" class="ls lt hh ig b ih mb il mc ip md it me ix mf jb lx ly lz ma bi translated">body &gt; div#my-special-div</li></ul><p id="6071" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们想用css select选择属性，我们需要使用这个符号:<strong class="ig hi">' element::attr(attribute-name)'</strong></p><ul class=""><li id="43d5" class="ls lt hh ig b ih ii il im ip lu it lv ix lw jb lx ly lz ma bi translated">body &gt; div#welcome &gt; a::attr(href)</li></ul></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h1 id="0aaa" class="jc jd hh bd je jf kn jh ji jj ko jl jm jn kp jp jq jr kq jt ju jv kr jx jy jz bi translated">Scrapy</h1><p id="d511" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们用<a class="ae kf" href="https://scrapy.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> scrapy </strong> </a>来刮网页:)我来做一个简单的例子。</p><pre class="lh li lj lk fd mg mh mi mj aw mk bi"><span id="4a88" class="ks jd hh mh b fi ml mm l mn mo">!pip install requests # for request to web<br/>!pip install scrapy # for scraping</span><span id="d67e" class="ks jd hh mh b fi mp mm l mn mo">import requests<br/>import scrapy</span><span id="cf7f" class="ks jd hh mh b fi mp mm l mn mo">req = requests.get(<br/>'https://docs.scrapy.org/en/latest/topics/contracts.html'<br/>)<br/>html = req.text # url's content</span><span id="f3b8" class="ks jd hh mh b fi mp mm l mn mo">selector = scrapy.Selector(text=html) # created Selector instance based on html variable</span><span id="8a6a" class="ks jd hh mh b fi mp mm l mn mo">selector.xpath('//a') # select all a elements from html variable<br/>                      # returns Selectors list</span><span id="9f3c" class="ks jd hh mh b fi mp mm l mn mo">selector.xpath('//a').extract() # extracts contents from all elements and returns as a list which created with extracted contents</span><span id="1dd9" class="ks jd hh mh b fi mp mm l mn mo">selector.xpath('//a').extract_first() # extract first element</span></pre><p id="c909" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以创建如下的链式选择。</p><pre class="lh li lj lk fd mg mh mi mj aw mk bi"><span id="d894" class="ks jd hh mh b fi ml mm l mn mo">selector.xpath('//div[@class="product-detail"]').xpath('./h3[@class="product-title"]')</span></pre><p id="28cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以一起使用xpath和css选择器。</p><pre class="lh li lj lk fd mg mh mi mj aw mk bi"><span id="630b" class="ks jd hh mh b fi ml mm l mn mo">selector.xpath('//div[@class="product-detail"]').css(h3.product-title)</span></pre><p id="6c49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我想展示scrapy的方法以及我们如何选择元素。希望有帮助。感谢阅读。</p><p id="99b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">亲切的问候。</p></div></div>    
</body>
</html>