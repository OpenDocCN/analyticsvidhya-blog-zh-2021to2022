<html>
<head>
<title>Scaling Heroku Application using Python and Telegram Bots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Telegram机器人扩展Heroku应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/scaling-heroku-application-using-python-and-telegram-bots-1767cbc5002c?source=collection_archive---------5-----------------------#2021-08-23">https://medium.com/analytics-vidhya/scaling-heroku-application-using-python-and-telegram-bots-1767cbc5002c?source=collection_archive---------5-----------------------#2021-08-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/88bc8117ab79366e1c64636f6987f54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cvokX0i7F5qWWCSqV7WAw.jpeg"/></div></div></figure><p id="2bb6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Heroku是一个基于容器的云平台即服务(PaaS)。开发人员使用Heroku来部署、管理和扩展现代应用。他们的平台优雅、灵活且易于使用，为开发人员将应用推向市场提供了最简单的途径。Heroku提供免费和付费两种等级。它始于2007年，现在只支持Ruby语言；它支持许多语言，如Ruby，Python，Java，Scala，PHP等。根据我的个人经验，当我用它来部署基于Python的Flask Web应用程序时，Heroku的学习曲线很陡。这也需要一些Git知识。但是，当您部署了第一个应用程序后，一切都变得轻松了。</p><h2 id="a229" class="jn jo hh bd jp jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated"><strong class="ak"> Dynos </strong></h2><blockquote class="ki kj kk"><p id="a8d9" class="ip iq kl ir b is it iu iv iw ix iy iz km jb jc jd kn jf jg jh ko jj jk jl jm ha bi translated">在Heroku使用的容器被称为“dynos”</p></blockquote><p id="2350" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Heroku是一个可伸缩的平台，dynos提供可伸缩性。Dynos是隔离的虚拟化Linux容器，旨在根据用户指定的命令执行代码。Dynos是任何Heroku应用程序的基础，从简单到复杂。</p><p id="3f5b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">简而言之，dynos运行应用程序；如果运行的dynos数量为0，则应用程序处于非活动状态。否则，如果dynos的数量大于0，则应用程序是活动的。</p><p id="9317" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本指南结束时，我打算为我们如何使用Python来控制Heroku应用程序(使用Heroku API)和在Telegram上转发更新打下基础。使用这些基本技能，人们可以构建一个定制的电报机器人，它可以转发更新并接受用户的命令。</p><p id="9fb3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">生成Heroku API </strong></p><p id="2a33" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">导航到“<strong class="ir hi">账户设置</strong>，点击“<strong class="ir hi">显示</strong>找到你的API密匙。把它拷贝到安全的地方。</p><div class="kp kq kr ks fd ab cb"><figure class="kt ii ku kv kw kx ky paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/28748238c01660b4417fac17f410ffcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1798/format:webp/1*6vgqWxmOCwsCVR2daD1B9w.jpeg"/></div></figure><figure class="kt ii kz kv kw kx ky paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/769f8816f7c79efd0974ffadb8f169f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:204/format:webp/1*Px4K5iZanCGDflUAjw5hig.jpeg"/></div></figure></div><h1 id="48c4" class="la jo hh bd jp lb lc ld jt le lf lg jx lh li lj ka lk ll lm kd ln lo lp kg lq bi translated">使用电报机器人通知</h1><p id="119b" class="pw-post-body-paragraph ip iq hh ir b is lr iu iv iw ls iy iz ja lt jc jd je lu jg jh ji lv jk jl jm ha bi translated">使用电报机器人“<strong class="ir hi">机器人令牌</strong>”和“<strong class="ir hi">聊天id </strong>”发送消息是必要的。按照指南为您的帐户生成一个。</p><div class="lw lx ez fb ly lz"><a rel="noopener follow" target="_blank" href="/@ManHay_Hong/how-to-create-a-telegram-bot-and-send-messages-with-python-4cf314d9fa3e"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hi fi z dy me ea eb mf ed ef hg bi translated">如何创建电报机器人并用Python发送消息</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">Telegram拥有令人惊叹的功能，机器人功能就是其中之一</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn in lz"/></div></div></a></div></div><div class="ab cl mo mp go mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ha hb hc hd he"><h1 id="8e6a" class="la jo hh bd jp lb mv ld jt le mw lg jx lh mx lj ka lk my lm kd ln mz lp kg lq bi translated"><strong class="ak"> Python代码</strong></h1><h2 id="964c" class="jn jo hh bd jp jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">Python类的初始化</h2><figure class="kp kq kr ks fd ii"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="5c98" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，我们导入所有必要的库，比如“<strong class="ir hi"> requests </strong>”来进行API调用，“<strong class="ir hi"> base64 </strong>”来编码Heroku API，等等。</p><p id="a608" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后我们用变量初始化一个python类，比如<strong class="ir hi"> Heroku app name </strong>，<strong class="ir hi"> Heroku API key </strong>，<strong class="ir hi"> Telegram bot Token </strong>和<strong class="ir hi"> Telegram chat id </strong>。</p><p id="16af" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">函数"<strong class="ir hi"> generate_basekey </strong>"将对API进行编码并创建一个头。该标题将用于在接收端验证我们的请求。</p><p id="3959" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">函数“<strong class="ir hi"> Telegram_Notify </strong>”是一个帮助函数。其他功能将使用此功能通过电报机器人发送更新。</p><figure class="kp kq kr ks fd ii"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="27a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">两个函数“<strong class="ir hi">get _ current _ dyno _ quantity</strong>”和“<strong class="ir hi">get _ current _ dyno _ quantity _ notify</strong>”在本质上是相似的，只有一点不同，即它们都返回当前的dyno数，但是“<strong class="ir hi">get _ current _ dyno _ quantity _ notify</strong>会向Telegram chat发送消息，而另一个则不会。</p><figure class="kp kq kr ks fd ii"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="20bf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">“<strong class="ir hi"> scale </strong>”功能执行实际的缩放工作，即增加和减少应用的数字数量。</p><p id="dd93" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果请求成功，它将使用电报消息通知。</p><figure class="kp kq kr ks fd ii"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="6d50" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">“<strong class="ir hi">重启</strong>”功能是一个方便的功能。当对应用程序进行一些更新或我们面临问题时，这是最有用的。</p></div><div class="ab cl mo mp go mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ha hb hc hd he"><p id="525a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这就把我们带到了指南的结尾，希望你喜欢。如果你是heroku的正式用户，你也可以看看Heroku的<a class="ae nc" href="https://github.com/martyzz1/heroku3.py" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi"> <em class="kl">库。</em></strong></a></p><p id="7670" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请在我的<a class="ae nc" href="https://github.com/rvt123/Medium_Articles/tree/main/Heroku_With_Python" rel="noopener ugc nofollow" target="_blank"><strong class="ir hi"><em class="kl">Github</em></strong></a>找到本指南的完整代码。在<a class="ae nc" href="https://www.linkedin.com/in/raghuvansh-tahlan/" rel="noopener ugc nofollow" target="_blank"><strong class="ir hi"><em class="kl">LinkedIn</em></strong></a>上联系我。</p><div class="lw lx ez fb ly lz"><a href="https://www.linkedin.com/in/raghuvansh-tahlan/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hi fi z dy me ea eb mf ed ef hg bi translated">raghuvansh tah LAN-Guru Gobind Singh Indraprastha大学-新德里，德里，印度| LinkedIn</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">我已经从Guru Gobind Singh Indraprastha大学获得了B. Tech(计算机科学工程)学位，我的目标是成为一名数据科学家。</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">www.linkedin.com</p></div></div><div class="mi l"><div class="nd l mk ml mm mi mn in lz"/></div></div></a></div><div class="lw lx ez fb ly lz"><a href="https://github.com/rvt123/Medium_Articles/tree/main/Heroku_With_Python" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hi fi z dy me ea eb mf ed ef hg bi translated">Medium _ Articles/Heroku _ With _ Python at main rvt 123/Medium _ Articles</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">向rvt123/Medium_Articles投稿并启动存储库。</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">github.com</p></div></div><div class="mi l"><div class="ne l mk ml mm mi mn in lz"/></div></div></a></div></div></div>    
</body>
</html>