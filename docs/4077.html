<html>
<head>
<title>M5-Forecasting-Accuracy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">M5-预测-准确性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/m5-forecasting-accuracy-3668d6103130?source=collection_archive---------3-----------------------#2021-08-24">https://medium.com/analytics-vidhya/m5-forecasting-accuracy-3668d6103130?source=collection_archive---------3-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">估计沃尔玛零售商品的单位销售额</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/94f870627080de7b68fccddcc3d5db45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ev7jAJT9XxL-X8SN.jpg"/></div></div></figure><h1 id="30d6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">目录:</h1><ol class=""><li id="468e" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">商业问题</li><li id="7bd0" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">数据集</li><li id="7ca9" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">用最大似然法解决问题</li><li id="f76f" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">绩效指标</li><li id="f34f" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">探索性数据分析</li><li id="538a" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">基线模型</li><li id="a63b" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">特征工程和数据预处理</li><li id="41e1" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">机器学习模型</li><li id="76e0" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">部署</li><li id="3629" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">未来的工作</li><li id="9703" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">参考</li><li id="e99a" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">结束注释</li></ol><h1 id="f6ba" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">1.商业问题</h1><p id="15d4" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj"> 1.1描述</strong></p><p id="ca3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="lg"> </em>当今竞争异常激烈的商业环境中，每个人都想增加自己的收入/销售额。作为一个整体，我们听说过招聘新员工时的战略规划，但你真的知道你到底什么时候需要扩大你的团队，开始你的下一个促销活动或推出你的新产品吗？对于所有这些事情，销售预测已经完成。基本上，这是一个利用历史销售数据来估计未来短期或长期销售的过程。</p><p id="f481" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1.2比赛背景</strong></p><p id="7330" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尼科西亚大学的Makridakis开放预测中心(MOFC)进行前沿预测研究，并提供商业预测培训。它帮助公司实现准确的预测，估计不确定性水平，避免代价高昂的错误，并应用最佳预测实践。商务部因其Makridakis竞赛而闻名，第一次竞赛于20世纪80年代举行。</p><p id="1bec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第五次迭代的竞赛中，您将使用全球收入最大的公司沃尔玛的分层销售数据来预测未来28天的日销售额。</p><p id="4ce2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1.3目标:</strong></p><p id="d1d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主要目的是尽可能精确地估计沃尔玛在美国销售的各种产品的单位销售额预测值，从而帮助不同的沃尔玛商店增加收入。</p><h1 id="b022" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.资料组</h1><p id="c6a9" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">这个问题的数据可以从下面的链接下载<a class="ae lh" href="https://www.kaggle.com/c/m5-forecasting-accuracy/data" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/c/m5-forecasting-accuracy/data</a></p><p id="8586" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2.1数据概述:</strong></p><p id="f0bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它使用沃尔玛慷慨提供的分层销售数据，从商品层面开始，汇总到美国三个地理区域的部门、产品类别和商店:加利福尼亚、德克萨斯和威斯康星。除了时间序列数据，它还包括解释变量，如价格、促销、星期几和特殊事件。</p><p id="06d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，数据集涉及<em class="lg"> 3，049种产品的单位销售额，分为3个产品类别(爱好、食品和家庭)和7个产品部门</em>，产品在位于三个州(CA、TX和WI)的10家商店销售。</p><p id="1858" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提供的数据集包含从2011年1月29日到2016年4月22日的5年销售数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/34675f0c4ea96e790fdcb9102d3a3e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MpFFbH-ZajEO3ZJEGD_02w.jpeg"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx translated"><strong class="bd jr">数据概述</strong></figcaption></figure><p id="00e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们收到了以下CSV文件:</p><ol class=""><li id="2ec4" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated"><code class="du lq lr ls lt b"><strong class="ih hj">calendar.csv</strong></code>:包含产品销售日期的信息。</li><li id="178f" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><code class="du lq lr ls lt b"><strong class="ih hj">sales_train_evaluation.csv</strong></code>:包含每个产品和商店的历史每日单位销售数据。</li><li id="8a24" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><code class="du lq lr ls lt b"><strong class="ih hj">sell_prices.csv</strong></code>:包含每个商店和日期销售的产品的价格信息。</li><li id="a0d7" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><code class="du lq lr ls lt b"><strong class="ih hj">sample_submission.csv</strong></code>:提交的正确格式。</li></ol><p id="73bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">演职员表:<a class="ae lh" href="https://mk0mcompetitiont8ake.kinstacdn.com/wp-content/uploads/2020/01/M5-Guidelines.pdf" rel="noopener ugc nofollow" target="_blank">M5-指导方针</a></p><h1 id="f05a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.用最大似然法解决问题</h1><p id="c830" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">我们正在解决的问题是一个时间序列问题，我们可以通过对原始时间序列数据执行特征工程来将其转化为监督学习问题。然后，我们可以将这些特征用作输入变量，将“商品销售额”用作输出变量。这样我们就可以解决使用机器学习回归模型来预测时间序列数据的问题。</p><h1 id="4515" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.绩效指标</h1><p id="cf38" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">M5竞赛提供了均方根标度误差度量，其数学函数如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/e09dfda7a27a808b1766b56ee240b484.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*E_tEkpaHetEgGCfu6mNQkA.png"/></div></figure><p id="4fb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中，Yₜ是所考察的时间序列在t点的实际未来值</p><p id="d6b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Ŷₜ生成的预测</p><p id="55c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">n-训练样本的长度(历史观察值的数量), h-预测范围</p><p id="7202" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">WRMSSE分数越低越好</p><h1 id="77f6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.探索性数据分析</h1><blockquote class="lv lw lx"><p id="54a8" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated"><strong class="ih hj">要通过机器学习解决问题，首先，我们必须了解数据，这是一种被称为探索性数据分析的重要方法。</strong></p></blockquote><p id="269f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，首先从数据的分类及其分布开始</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/3a08cffc2f0503e4206a45b6cc2007f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*CjNBhT5mOhIK1EKj_6I1fA.png"/></div></figure><p id="03bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在3049种独特产品中，约47%(1437种)的产品属于食品类，34%(1047种)属于家用类，剩余的18.5%(565种)产品属于爱好类。因此，在给定的数据中，有许多产品与食品相关</p><blockquote class="lv lw lx"><p id="e128" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated"><strong class="ih hj">现在，将检查从第1天到最后一天的每日销售额，以找到模式</strong></p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/57d860345e4f48b36c60d3d5ad01c8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KIO--THkw0DMWfVRivF_dg.png"/></div></div></figure><p id="25d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">外卖:</strong></p><p id="cbac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.首先观察到的是这种模式，每年都有相同的模式。</p><p id="875e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.与2011年和2016年相比，年销售额增长缓慢，但增幅高达60k</p><p id="ff23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.每年年底，销售额都会急剧下降。</p><blockquote class="lv lw lx"><p id="f47e" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated"><strong class="ih hj">由于数据是分层格式的，所以让我们对每一层进行数据分析，以便清楚地了解每个部门，即州、商店、类别和部门</strong></p></blockquote><h2 id="474b" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.1状态划分分析:</h2><p id="ec70" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj"> a .每个州的日销售额</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/3e42f036bb228bbe5ced048241083fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jttLwd7Mkj3gplw4UQBfoA.png"/></div></div></figure><p id="ee2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="060e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.加利福尼亚州的销售量比其他两个州都多。</p><p id="4bce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.德克萨斯州和威斯康星州的销售模式几乎相同，因此在这些州，销售范围几乎相同。</p><p id="714b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.在加州，销售额略有增加，但在其他两个州，销售额几乎每年都处于相同的水平，每年年底销售额都在下降。</p><p id="54fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .每个州的月销售额:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ms"><img src="../Images/ef823401d18efc32e32811f9c0254558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2kf-lVy9OuR9peT1170Y8g.png"/></div></div></figure><p id="e27c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">带走:</strong></p><p id="33cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.首先，加州的销售额超过了两个州。</p><p id="b60f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在加州，直到2014年，销售额有所增加，但在2014年至2015年期间略有下降，2015年后销售额趋于增加，德克萨斯州和威斯康星州的销售额与2013年几乎相同。</p><p id="fcda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.从2013年到2015年年中，WI的销售额一直保持稳定，之后略有增长。</p><p id="4781" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> c .各州总销售额:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mt"><img src="../Images/adeaefced3f4a0dd95bb7648a826bc0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jzg9xYjEIyiHLKzIVC2sPQ.png"/></div></div></figure><p id="5b57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><ol class=""><li id="4ac3" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">加利福尼亚州的销售额很高，接近3000万，而德克萨斯州和威斯康星州的销售额几乎相同。</li><li id="9571" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">加利福尼亚州记录了43%的销售额，比其他两个州高出约10%。</li><li id="a132" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">因此，加州比其他州有更高和更好的销量。</li></ol><p id="cafc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> d .各州销售:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mu"><img src="../Images/3428b8437c3e587a06a088e29aa3181c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dkZg4YARyWCihMNrJQVlOA.png"/></div></div></figure><p id="1568" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><ol class=""><li id="3e4e" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">在加州，近70%的销售发生在食品类，很少销售发生在爱好类。</li><li id="8d24" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">在所有的州，食品类的销售额较高，而家庭类的销售额很低，每个州几乎都在下降，每个类别的销售额分布相同。</li></ol><h2 id="85c9" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.2店铺划分分析</h2><p id="e59a" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj"> a .各店铺产品的供货情况:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mv"><img src="../Images/3ea24566964110fd9310705a5ec30f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*ldOMlnDIedc16n_8snhPig.png"/></div></figure><p id="9899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="3ac2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个商店包含相同数量的产品，并且所有商店的三个产品类别的分布相同。</p><p id="40a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .各店销售额:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mw"><img src="../Images/206c4e4a43b9c33e1dc5399ab5e1e987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yh9ynaRTf9UVs43oPAW-YQ.png"/></div></div></figure><p id="0746" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><ol class=""><li id="c8b1" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">几乎17%的销售发生在ca_3商店。</li><li id="3ac5" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">平均而言，其余商店的销售额占每家商店销售额的8%。</li><li id="c93d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">每个州的所有商店的销售百分比几乎相同，略有不同，但只有加利福尼亚州的商店的销售百分比不同。</li></ol><h2 id="cbc1" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.3类别划分分析</h2><p id="dd1d" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">答:每个品类的月销售额:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mx"><img src="../Images/e8230b19f0f27622dc72ce219aee6ffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPElJX3lpWdmT5X5A501kQ.png"/></div></div></figure><p id="625d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="86ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.大量销售发生在食品上，也就是说，许多人消费食品多于其他商品。</p><p id="e963" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.食品销售有很多起伏，但与2011年相比，销售情况有所改善。</p><p id="945c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.业余爱好产品的销量很低，而且每年都有持续的销售，家庭用品的销量与食品销量相比没有太大的差异。</p><p id="13bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .每个类别的总销售额:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es my"><img src="../Images/c3f6e3ae0beb1dfae37ae0368d259f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*Emu9tH9IKVVjP2vNPRuiIg.png"/></div></figure><p id="bf41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="1094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.总共有68%的食品被售出，只有很少的爱好被售出。</p><p id="1656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.只有22%家庭用品售出。</p><h2 id="689d" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.4部门划分分析</h2><p id="093b" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj"> a .各部门产品数量</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mz"><img src="../Images/c5dd27f02a54f9728d3dab7d2e78e60c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*DTrwLB4aGHayjrWxAzfd7Q.png"/></div></figure><p id="759f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="0c14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.正如我们看到的，食品在数据中更多地出现在各个部门，我们在每个部门都有不同数量的产品</p><p id="d2aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在食品部，食品3部的产品数量较多，而食品2部和食品1部的产品数量较少。</p><p id="4bb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3 .我们总共有10470种家用产品，它有两个部门，每个部门几乎有50%的产品。</p><p id="6268" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4 .爱好产品的存储数量非常少，它有两个部门，其中部门1的产品比部门2多。</p><p id="458d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .各部门总销售额</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es na"><img src="../Images/e9140b7b78f7f1defd8e295192c259ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*ewR6PigDu8EUa3ecX8ZraA.png"/></div></figure><p id="f648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">带走:</strong></p><p id="e6c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.近50%的销售额来自食品部。</p><p id="c341" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.除了食品部，甚至我们在家庭中储存的物品比2个食品部都多，更多的产品在食品部出售，只有0.81%的爱好被出售。</p><blockquote class="lv lw lx"><p id="ec23" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated"><strong class="ih hj">我们检查了每个级别的销售额，这样我们就可以大致了解每个州、商店、类别和部门的销售额波动情况</strong></p></blockquote><h2 id="aca4" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.5所有州中最畅销的产品</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nb"><img src="../Images/514d49c557a0723063aba86f849d5fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNGZpg3dJ25KPoa1mB0gPg.png"/></div></div></figure><p id="e1cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="aec2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.在所有州中，FOODS_3_090商品的销售额接近100万英镑。</p><p id="2b81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.FOODS_3_586项目的销售额也比FOODS_3_090高约100万英镑。</p><p id="7f45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">十大畅销商品是一个食品类别，所以在每个州，食品比其他类别产生更多的收入。</p><h2 id="ea91" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated"><strong class="ak"> 5.6考虑价格的分析</strong></h2><p id="0f69" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated"><strong class="ih hj">答:每个类别的平均价格:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nc"><img src="../Images/3b3f63ae3774bd3832a801134d12ec0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*bs7M4OCPk9IGq6VPljxYaA.png"/></div></figure><p id="5fc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="4f7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.平均而言，食品的平均价格低于其他产品。</p><p id="1359" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.家庭和爱好的平均价格几乎是食品价格的2倍。</p><p id="161e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于食品平均价格较低，这也可能是食品销售较高的一个原因。</p><p id="75e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .每月给定价格的高销量产品的平均销售额</strong></p><p id="983e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查高销量商品的价格和平均销售波动，如食品_3_090</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/73d41d74a97b58e51808787d1f6b03da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1YzHRXsmV0RQhzmlzQrnA.png"/></div></div></figure><p id="39e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="cc31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.在某些时候，当价格下降时，我们可以观察到平均销售额略有增加。</p><p id="463e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在2013年至2014年期间，由于该产品价格较低，销售额会突然上升，因此销售额也可能取决于该产品的价格。</p><blockquote class="lv lw lx"><p id="2482" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated"><strong class="ih hj">现在，我们将对活动日、工作日进行一些分析，以了解这些天的收入变化情况。</strong></p></blockquote><h2 id="5925" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.7工作日平均销售额</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ne"><img src="../Images/302855367ff73c8cc8e10b5ec919399e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*ELy78bTwC_aAsFk9uG6bPQ.png"/></div></figure><p id="a48d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><p id="30f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.许多销售大多发生在周日、周六和周五，与除周末之外的其他日子相比，销售额也很高。</p><p id="85b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.低销售额发生在星期二、星期三和星期四。</p><h2 id="1246" class="md jq hi bd jr me mf mg jv mh mi mj jz iq mk ml kd iu mm mn kh iy mo mp kl mq bi translated">5.8<strong class="ak">事件类型的平均销售额:</strong></h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nf"><img src="../Images/a192c4e69a50c712d3db3e872a8b2aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*VbQ-FlEhuIgftQaWnkaLtg.png"/></div></figure><p id="e888" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拿走:</strong></p><ol class=""><li id="e2e4" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">体育赛事的销售额略高于其他全国性赛事，但低于其他赛事。</li><li id="5f7c" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">即使在没有活动的日子，销售也几乎出现在有活动的日子，所以我们不能得到一个确切的结论，即销售可能在有活动的日子发生得更多。</li></ol><h1 id="9b22" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">6.基线模型</h1><p id="a437" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">因为销售是这个问题的关键因素，所以我将只把销售作为一个特征，即我们的数据集有d1到d1941的销售。因此，我们只需要将1941列作为数据。</p><p id="4227" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要正确预测未来28天的销售额，因此我们使用随机森林作为基础模型，并将输出变量作为28列(日销售额)，这样我们就可以预测1941天之后的销售额。</p><p id="1f0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将考虑1000天的销售额</p><pre class="je jf jg jh fd ng lt nh ni aw nj bi"><span id="4048" class="md jq hi lt b fi nk nl l nm nn">d_cols =[i for i in sales.columns if 'd_' in i] #d_1,d_2....<br/>train_start=1000<br/>train_end=1913–28</span><span id="e4a0" class="md jq hi lt b fi no nl l nm nn"><strong class="lt hj">#train data:</strong><br/>x_train_cols=d_cols[train_start:train_end]<br/>y_train_cols=d_cols[train_end:train_end+28]</span><span id="5b2f" class="md jq hi lt b fi no nl l nm nn">X_train=sales[x_train_cols] #upto 1886<br/>y_train=sales[y_train_cols] #1886 to 1913</span><span id="1bf0" class="md jq hi lt b fi no nl l nm nn"><br/><strong class="lt hj">#validation data:</strong><br/>x_val_cols=d_cols[train_start+28:train_end+28]<br/>y_val_cols=d_cols[train_end+28:]</span><span id="06a0" class="md jq hi lt b fi no nl l nm nn">X_val=sales[x_val_cols] #upto 1913<br/>y_val=sales[y_val_cols] #1913 to 1941</span><span id="c17d" class="md jq hi lt b fi no nl l nm nn"><strong class="lt hj">#test_data:<br/></strong>x_test=d_cols[train_start+28+28:]</span><span id="fd9b" class="md jq hi lt b fi no nl l nm nn">X_test=sales[x_test] #upto 1941<br/> <br/><strong class="lt hj">#So now we going to predict the next 28 days i.e after 1941 day by sending the xtest into the random forest model</strong></span></pre><p id="1841" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">输出:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es np"><img src="../Images/1e9afe4d3980c2342d4e30e2d1c0a509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*YoFos53BFoqV7XIGe_L9FQ.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nq"><img src="../Images/9fa8fa3e296542c96503d84e8017ae11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*XrL0sHebhPJOHZ7ezkUa3w.png"/></div></figure><p id="36c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">关键_外卖:</strong></p><p id="a1f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个基本模型输出，我们得到了0.85的私人分数。只是只有销售为特色，没有任何额外的功能，我们得到了一个低体面的分数。因此，我们需要添加现有的功能，也通过一些功能工程，我们可以更好地降低分数。而且很明显，销售作为特征在获得更好的模型中起着更重要的作用，所以如果我们通过使用一些特征工程技术来建立基于销售的新特征，我们可以获得良好的结果。</p><h1 id="93a8" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak"> 7。特征工程&amp;数据预处理</strong></h1><blockquote class="lv lw lx"><p id="cf50" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated">在基本模型中，我们只将销售额作为特征，而输出变量(y)包含28个变量，因此，当给定一个产品在28天之前的销售额时，它预测未来28天的销售额，但这里我们没有使用其他数据，如日历特征、销售价格列。因此，提出这种时间序列数据的一种有效方法是将给定数据作为单个数据集重新构建到监督学习中，即输出变量仅包含销售额，其余所有特征作为输入，因此这里输出变量(y)将仅预测给定产品细节的一天销售额。</p></blockquote><ol class=""><li id="9520" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">首先，我们需要通过结合销售数据，日历数据，价格数据创建一个单一的数据框架。这可以通过melt(将宽数据格式转换为长数据格式)和合并所有其他数据集来完成。</li></ol><p id="477f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lg">融化前:</em> </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nr"><img src="../Images/bce3d3c2d99f55fae34b31cc00634584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFTG6gWEIfP2cSZpPvCNmg.png"/></div></div></figure><p id="dc3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lg">融化后:</em> </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ns"><img src="../Images/3e139d1963af91047f6bed725664a4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Of6RUZo0EJR3nOVKTsipA.png"/></div></div></figure><p id="ab9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，melt帮助我们将问题转化为精确的回归问题，将销售列作为输出变量，即y，这样我们就可以将回归模型拟合到该数据。</p><p id="f3bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.然后，我们需要通过均值插补技术处理来自销售价格数据的缺失值。我们不采用简单的平均价格，而是采用与商店相关的平均价格，因为价格可能会因商店而异。</p><pre class="je jf jg jh fd ng lt nh ni aw nj bi"><span id="725d" class="md jq hi lt b fi nk nl l nm nn">final[‘sell_price’].fillna(final.groupby([‘store_id’,’item_id’])[‘sell_price’].transform(‘mean’),inplace=True)</span></pre><p id="6da9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.通过用它们的分类代码替换它们来转换所有的分类特征。</p><pre class="je jf jg jh fd ng lt nh ni aw nj bi"><span id="cf53" class="md jq hi lt b fi nk nl l nm nn">for i in final.columns:<br/> if str(final[i].dtype)==’category’:<br/> final[i] = final[i].cat.codes</span></pre><p id="ab1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加新功能:</strong></p><blockquote class="lv lw lx"><p id="5959" class="if ig lg ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated">从原始时间序列数据中提取特征在更好地预测销售中起着重要的作用。这里，我们需要创建一些重要的特性来帮助模型给出好的结果。因此，简单地创建一个特征并不能改善我们的模型，我们必须引入有意义的特征，否则如果我们得到了许多不必要的特征，我们有时可能会过度拟合，也会使模型性能变得最差。</p></blockquote><p id="3a48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> a .滞后特征</strong></p><p id="3129" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为这是一个时间序列问题，所以我引入了一些时间序列相关的特性，如滞后特性。因为我们要处理未来28天的预测，所以我引入了28到56天的滞后，即[28，30，35，42，49，56]。</p><p id="ef34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .假期和周末特征:</strong></p><p id="f1e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从EDA中，我们看到销售在周末和活动日受到的影响更大。因此，我引入了基于周末的特性，即周六和周日。同样，从美国日历中，我得到了假期的日期和标签1，如果是假期，则为0。</p><pre class="je jf jg jh fd ng lt nh ni aw nj bi"><span id="24d8" class="md jq hi lt b fi nk nl l nm nn"><strong class="lt hj">#weekend feature:</strong><br/>weekends= [‘Saturday’, ‘Sunday’]<br/>def if_weekends(x):<br/> if x in weekends:<br/> return 1<br/> else:<br/> return 0</span><span id="be20" class="md jq hi lt b fi no nl l nm nn">calender['if_weekend']=calender['weekday'].apply(if_weekends)</span><span id="9204" class="md jq hi lt b fi no nl l nm nn"><strong class="lt hj">#holiday feature:</strong></span></pre><p id="0e6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> c .基于销售的特征:</strong></p><p id="33da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为销售是这个问题的重要因素。因此，我根据每个级别的销售额介绍了一些功能。已经基于为每个项目、商店、州以及类别产生平均收入产生了一些特征。Like wise根据每个商店和州发生的收入为每个商品生成了另外两个特性。通过这些功能，我们可以了解每个部门的收入情况。</p><pre class="je jf jg jh fd ng lt nh ni aw nj bi"><span id="4180" class="md jq hi lt b fi nk nl l nm nn">def mean_price(input,target):<br/> final[target]=final.groupby(input)[‘sell_price’].transform(‘mean’).astype(np.float16)</span><span id="c44f" class="md jq hi lt b fi no nl l nm nn">mean_price(‘item_id’,’item_price_avg’)<br/>mean_price(‘store_id’,’avg_pric_storewis’)<br/>mean_price(‘state_id’,’avg_pri_statewis’)<br/>mean_price(‘cat_id’,’avg_price_catwis’)<br/>mean_price([‘item_id’,’store_id’],’avg_price_store_item’)<br/>mean_price([‘item_id’,’state_id’],’avg_price_state_item’)</span></pre><h1 id="4288" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">8.机器学习模型</h1><p id="8f96" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">应用不同的机器学习算法来检查哪种算法更适合我们的数据</p><ol class=""><li id="3cf1" class="kn ko hi ih b ii ij im in iq ln iu lo iy lp jc ku kv kw kx bi translated">线性回归</li><li id="d0b3" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">岭回归量</li><li id="593b" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">随机森林回归量</li><li id="7eb1" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">LGBM</li><li id="173d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">XG增强回归器</li></ol><p id="f203" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在训练模型之前，我们需要将数据分为训练、测试和验证数据，即训练日(1–1913)销售、验证日(1914–1941)销售和测试日(1942–1969)。</p><p id="14c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在所有模型中，轻型gbm给出了低rmse。因此，lgbm被认为是最终模型，我们将在这个模型上训练数据。该模型用于预测未来28天的销售额，即测试数据。</p><p id="b0d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在训练模型和测量性能指标后，我们需要预测未知数据的销售额。最后，我们需要生成一个适合Kaggle提交的CSV文件。</p><p id="0199" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">收到的所有模型的最终得分如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nt"><img src="../Images/c484f0cf315ee331909da580758ea6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*I5tWcq0FAWGItcOCpJhPDg.png"/></div></figure><p id="6f5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的私人领导委员会分数中，我们观察到在所有模型中，轻型gbm模型表现良好，因为它以较低的分数(WRMSSE)=0.64566的私人分数预测销售，在<strong class="ih hj"> 5558 </strong>参与者中排名<strong class="ih hj"> 286 </strong>，并在<strong class="ih hj">前5% </strong>中排名第一。</p><h1 id="3703" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">9.部署</h1><p id="0c87" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">在使用light gbm训练模型之后，我使用flask API通过构建最终管道进行了部署，该管道将输入作为特定产品的item_id和store_id，并预测该产品在未来28天(即1942年至1969年)的<strong class="ih hj">销售额</strong>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nu nv l"/></div></figure><h1 id="9219" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">10.参考</h1><div class="nw nx ez fb ny nz"><a href="https://mofc.unic.ac.cy/m5-competition/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">M5竞赛</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">M比赛中最新的M5比赛于2020年3月2日至6月30日举行。它不同于以前的…</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">中国商务部</p></div></div></div></a></div><p id="0f5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lh" href="https://mofc.unic.ac.cy/wp-content/uploads/2020/03/M5-Competitors-Guide-Final-10-March-2020.docx" rel="noopener ugc nofollow" target="_blank">https://mofc . UNIC . AC . cy/WP-content/uploads/2020/03/M5-竞争对手-指南-决赛-10-3-2020 . docx</a></p><div class="nw nx ez fb ny nz"><a href="https://www.appliedaicourse.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">应用根</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">我们知道转行是多么具有挑战性。我们的应用人工智能/机器学习课程被设计为整体学习…</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">www.appliedaicourse.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jn nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://www.analyticsvidhya.com/blog/2019/12/6-powerful-feature-engineering-techniques-time-series/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">时间序列数据的特征工程技术</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">特征工程是每个数据科学家都应该知道如何执行的技能，尤其是在时间序列的情况下…</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">www.analyticsvidhya.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on jn nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://www.kaggle.com/c/m5-forecasting-accuracy/discussion/135388" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">M5预测-准确性</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">估计沃尔玛零售商品的单位销售额</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">www.kaggle.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on jn nz"/></div></div></a></div><h1 id="b281" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">11.未来的工作</h1><ol class=""><li id="5bfa" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">尝试任何深度学习技术，如lstm模型。</li><li id="c80d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">因为我从第1500天开始计算销售额，所以用性能更好的模型来计算整个数据可能会得到好的结果。</li><li id="b08a" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">根据可提高模型性能的要素重要性创建少量新要素。</li></ol><h1 id="30d7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak"> 12。结束注释</strong></h1><p id="9b89" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">我要感谢应用人工智能团队的支持和指导，帮助我成功地完成了这个案例研究。</p><p id="a8a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在我的Github <a class="ae lh" href="https://github.com/Naveenrajuu/Sales-Forecasting-for-next-28-days" rel="noopener ugc nofollow" target="_blank">这里</a>找到完整的代码</p></div></div>    
</body>
</html>