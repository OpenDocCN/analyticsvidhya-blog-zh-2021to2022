<html>
<head>
<title>Google’s TPU Research Cloud! Free TPU hardware for Deep learning Projects…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌的TPU研究云！深度学习项目的免费TPU硬件…</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/googles-tpu-research-cloud-free-tpu-hardware-for-deep-learning-projects-7dfecd82b024?source=collection_archive---------1-----------------------#2022-01-12">https://medium.com/analytics-vidhya/googles-tpu-research-cloud-free-tpu-hardware-for-deep-learning-projects-7dfecd82b024?source=collection_archive---------1-----------------------#2022-01-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/9ca7771ad2310c5083f74385d085b55e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5W1BGZrchnT3wsQIixgznw.png"/></div></div></figure><p id="d1e0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在训练包括“硬件”和“时间”的机器学习模型时，“成本”是最大的问题之一。庞大的模型需要大量的资源来训练。这使得超参数调整变得困难。</p><p id="020b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">谷歌已经发布了大量资源来帮助机器学习社区，包括他们的开源框架TensorFlow。它还免费发布了在GPU加速器中运行模型的Colab，但有一些限制。付费的pro和pro+版本可以克服其中的一些限制。</p><p id="ecfa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了充分利用TensorFlow框架的优势，Google创建了专门的硬件来高效地执行张量运算和训练ML模型。这些硬件被称为张量处理单元(TPU)。</p><p id="e95e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">TPU可以执行从180万亿次浮点运算/秒到480万亿次浮点运算/秒的操作。万亿次浮点运算意味着百万到百万次操作。从这个角度来看，免费的Colab版本提供了4.1万亿次浮点运算/秒，这使得TPU比GPU加速器快100倍。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/91e2fe29f5402608a1fef2edde52b373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gA40Yp3Dob30BDoqr4Fi5w.png"/></div></div></figure><p id="4ff6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">目前，TPU硬件还没有上市，只能通过谷歌获得。在这篇文章中，我们将看到如何获得免费的TPU访问为研究目的。</p><p id="26f2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">TPU研究云(TRC)是谷歌的一项举措，旨在让研究人员能够在TPU实施和测试他们的模型。为此，TRC可同时免费访问多达110个云TPU。</p><p id="12d2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">是不是很棒？？</p><p id="fefa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">研究人员的唯一条件是:</p><p id="7688" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">TRC计划的参与者将通过同行评审的出版物、开源代码、博客帖子或其他方式与世界分享他们的TRC支持的研究。他们也应该愿意与谷歌分享详细的反馈，以帮助我们随着时间的推移改进TRC计划和底层的云TPU平台。此外，参与者接受谷歌的<a class="ae js" href="https://policies.google.com/terms" rel="noopener ugc nofollow" target="_blank">条款和条件</a>，承认他们的信息将根据我们的<a class="ae js" href="https://policies.google.com/privacy" rel="noopener ugc nofollow" target="_blank">隐私政策</a>使用，并同意根据<a class="ae js" href="https://ai.google/principles" rel="noopener ugc nofollow" target="_blank">谷歌人工智能原则</a>进行他们的研究。</p><p id="25df" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">被TRC计划接受的研究人员将免费使用v2和v3设备，并可以利用包括TensorFlow、PyTorch、Julia和JAX在内的各种框架来加速下一波开放研究突破。</p><p id="dbb2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">本文分为四个部分</p><p id="08d3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第一部分:申请储税券</p><p id="8a51" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第2部分:创建谷歌云平台账户(别担心，这是免费的)</p><p id="5b31" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第3节:设置CloudSDK和VM实例</p><p id="f301" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第4部分:VS代码远程连接</p><p id="cb63" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们开始吧…</p><h1 id="088b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第一部分:申请储税券</h1><p id="995d" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">这是一个简单的步骤。您只需使用以下链接申请云访问</p><p id="b49b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae js" href="https://sites.research.google/trc/about/" rel="noopener ugc nofollow" target="_blank">https://sites.research.google/trc/about</a></p><p id="f8c1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">填写完成后，团队可能需要3-4个工作日向您发送创建项目的步骤。</p><h1 id="4631" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第2部分:创建Google云平台帐户</h1><p id="5e91" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">使用您的Gmail帐户登录到<a class="ae js" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/</a>并打开控制台选项卡。虽然您的云TPU是免费的，但您使用的其他GCP服务仍需付费。如果你开始一个新项目，谷歌云的300美元入门信用可能会完全抵消这些成本，并且你可以通过使用小型主机虚拟机(例如n1-standard-2实例)来进一步降低成本。</p><p id="391f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从GCP控制板创建新项目</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kw"><img src="../Images/d8cbe7c5f370ed1effd6053e9fd19886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LU15v2GGjjnQ_zxZWUT65A.png"/></div></div></figure><p id="b98d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">稍后打开该项目的TPU API，并将项目编号发送到TRC，TRC将在几天后被允许TPU访问。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kx"><img src="../Images/6f13b1dddc4fb4c599d9b2b49c7c9547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cIRgMFGAFgr_QN0QrvEWrg.png"/></div></div></figure><p id="d996" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦你获得访问权，你将有30天的免费TPU为您的工作。</p><h1 id="a30c" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第3节:设置CloudSDK和VM实例</h1><p id="0f77" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">我们在项目中使用一个VM实例来工作。在设置VM实例之前，我们必须在本地安装Cloud SDK。</p><p id="6367" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">云SDK包括<code class="du ky kz la lb b">gcloud</code>、<code class="du ky kz la lb b">gsutil</code>和<code class="du ky kz la lb b">bq</code>命令行工具。获取云SDK特性的列表。</p><p id="a344" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从https://cloud.google.com/sdk/docs/install<a class="ae js" href="https://cloud.google.com/sdk/docs/install" rel="noopener ugc nofollow" target="_blank">下载并安装Google-cloud-SDK</a></p><pre class="jo jp jq jr fd lc lb ld le aw lf bi"><span id="9fa0" class="lg ju hh lb b fi lh li l lj lk">Run  $./google-cloud-sdk/install.sh</span><span id="0ea2" class="lg ju hh lb b fi ll li l lj lk">After installation Run $./google-cloud-sdk/bin/gcloud init</span></pre><p id="8a0e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在初始化中，添加您的Gmail帐户，并选择具有TPU访问权限的项目。</p><p id="4235" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦完成这些步骤，我们就可以开始创建我们的VM实例了。</p><h1 id="3091" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">创建虚拟机实例</h1><p id="0a8b" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">安装并初始化Cloud SDK后，关闭终端并打开一个新的终端。运行以下命令创建一个TPU虚拟机实例。详情可以在<a class="ae js" href="https://cloud.google.com/sdk/gcloud/reference/alpha/compute/tpus/tpu-vm/create" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="jo jp jq jr fd lc lb ld le aw lf bi"><span id="60e3" class="lg ju hh lb b fi lh li l lj lk"># gcloud alpha compute tpus tpu-vm create <strong class="lb hi">tpu_project_name</strong> — zone=europe-west4-a — accelerator-type=v3–8 — version=v2-alpha</span></pre><p id="ba3e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以从TRC团队给出的版本列表中设置加速器类型和区域。</p><p id="b1f7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建后，您可以使用以下命令激活虚拟机</p><pre class="jo jp jq jr fd lc lb ld le aw lf bi"><span id="a9d5" class="lg ju hh lb b fi lh li l lj lk"># gcloud alpha compute tpus tpu-vm ssh <strong class="lb hi">tpu_project_name</strong> — zone europe-west4-a</span></pre><p id="ed5e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您已经连接到TPU，现在您可以通过终端使用您的虚拟机实例。</p><p id="bd0f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于那些像我一样对终端不太适应，并且是Visual Studio代码(BTW最佳代码编辑器)的超级粉丝的人，谢谢你，微软…</p><p id="7172" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下一节将展示如何使用VS代码远程连接到VM实例。</p><h1 id="bc68" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第4部分:VS代码远程连接</h1><ol class=""><li id="f8e7" class="lm ln hh ir b is kr iw ks ja lo je lp ji lq jm lr ls lt lu bi translated">在VS代码中获取扩展“Remote-SSH”并安装它。</li></ol><p id="048d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.对于Mac用户，按cmd+shift+p调出命令面板，键入remote shh，然后单击Remote SSH: Add new SSH host。</p><p id="09da" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在弹出的SSH命令提示符中，输入</p><pre class="jo jp jq jr fd lc lb ld le aw lf bi"><span id="7227" class="lg ju hh lb b fi lh li l lj lk">ssh -i ~/.ssh/[KEY_FILENAME] [USERNAME]@[External IP]</span></pre><p id="c973" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">其中，KEY_FILENAME通常是~/。ssh/谷歌计算引擎</p><p id="1203" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该文件将在您第一次使用终端连接到TPU虚拟机时创建。</p><p id="2089" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">可以从GCP控制台仪表板中找到外部IP。</p><p id="61d7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">3.再次完成后，按cmd+shift+p并单击Remote SSH:Open SSH configuration file并打开配置文件。</p><p id="d6f9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该文件看起来会像这样。</p><pre class="jo jp jq jr fd lc lb ld le aw lf bi"><span id="ea90" class="lg ju hh lb b fi lh li l lj lk">Host external_ip</span><span id="475c" class="lg ju hh lb b fi ll li l lj lk">HostName external_ip</span><span id="a32b" class="lg ju hh lb b fi ll li l lj lk">IdentityFile ~/.ssh/google_compute_engine</span><span id="0bd6" class="lg ju hh lb b fi ll li l lj lk">User username</span></pre><p id="46a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.最后，按cmd+shift+p并单击远程SSH连接到主机，然后单击主机名称，这将是外部ip地址。</p><p id="a58f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，您将连接到VM实例，像在本地使用VS代码一样进行操作，还可以从VS代码的终端运行命令。</p><p id="203d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">感谢阅读这篇文章。希望这对你的深度学习项目有所帮助:)</p></div></div>    
</body>
</html>