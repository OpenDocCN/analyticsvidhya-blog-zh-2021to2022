<html>
<head>
<title>Leaping into Semantic/Neural Search with ElasticSearch, Faiss using Haystack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ElasticSearchè¿›å…¥è¯­ä¹‰/ç¥ç»æœç´¢ï¼Œä½¿ç”¨Haystackå¤±è´¥</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/leaping-into-semantic-neural-search-with-elasticsearch-faiss-using-haystack-a198c31ea07b?source=collection_archive---------2-----------------------#2021-02-24">https://medium.com/analytics-vidhya/leaping-into-semantic-neural-search-with-elasticsearch-faiss-using-haystack-a198c31ea07b?source=collection_archive---------2-----------------------#2021-02-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b161" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae jc" href="https://haystack.deepset.ai/" rel="noopener ugc nofollow" target="_blank"> Haystack </a>å®ç°ä¸€ä¸ªåŸºæœ¬çš„è¯­ä¹‰æœç´¢å¼•æ“ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae jc" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank">elastic Search</a>å’Œ<a class="ae jc" href="https://ai.facebook.com/tools/faiss/" rel="noopener ugc nofollow" target="_blank"> Faiss </a>(è„¸ä¹¦äººå·¥æ™ºèƒ½ç›¸ä¼¼æœç´¢)ä½œä¸º<a class="ae jc" href="https://haystack.deepset.ai/docs/latest/documentstoremd" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£åº“</a>ã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f8d6f3a0d00339b256393e5dc5c7d555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YjbojAI2gjGq1YiS"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jc" href="https://unsplash.com/@gozhanet?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Gozhaç½‘</a>åœ¨<a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="5a46" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ä¸‹é¢æ˜¯æˆ‘å°†è¦è°ˆè®ºçš„å‡ ä¸ªéƒ¨åˆ†:</p><ol class=""><li id="2dfd" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated">è¯­ä¹‰æœç´¢å’Œæœ¯è¯­ä»‹ç»</li><li id="ac94" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">å®æ–½å•å…ƒå’Œç²’åº¦</li></ol><ul class=""><li id="056f" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb kh jz ka kb bi translated"><em class="ki">ç¯å¢ƒè®¾ç½®</em></li><li id="1f0f" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb kh jz ka kb bi translated"><em class="ki">æ•°æ®é›†å‡†å¤‡</em></li><li id="963b" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb kh jz ka kb bi translated"><em class="ki">ç´¢å¼•&amp;æœç´¢</em></li></ul><h2 id="95f9" class="kj kk hh bd kl km kn ko kp kq kr ks kt ip ku kv kw it kx ky kz ix la lb lc ld bi translated">è¯­ä¹‰æœç´¢å’Œæœ¯è¯­ä»‹ç»</h2><p id="7ff4" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">è¿‘æ¥ï¼Œéšç€NLP(è‡ªç„¶è¯­è¨€å¤„ç†)çš„è¿›æ­¥å’Œå·¨å¤§è®¡ç®—èƒ½åŠ›(GPUã€TPUå•å…ƒç­‰)çš„å¯ç”¨æ€§ã€‚)ï¼Œè¯­ä¹‰æœç´¢æ­£åœ¨æœç´¢è¡Œä¸šå æ®ä¸€å¸­ä¹‹åœ°ã€‚ä¸è¯æ±‡æˆ–å¥æ³•æœç´¢ç›¸åï¼Œè¯­ä¹‰/ç¥ç»æœç´¢æ›´å…³æ³¨æŸ¥è¯¢çš„æ„å›¾å’Œè¯­ä¹‰ã€‚ä½¿ç”¨ç¥ç»ç½‘ç»œ(æ ¹æ®æ‚¨çš„è‡ªå®šä¹‰æ•°æ®è¿›è¡Œè®­ç»ƒæˆ–é¢„è®­ç»ƒ)å°†æ‚¨çš„æŸ¥è¯¢/æ–‡æ¡£è¡¨ç¤ºä¸ºnç»´å‘é‡(åµŒå…¥)æ˜¯è¿™ç§è¯­ä¹‰æœç´¢çš„å…³é”®ã€‚</p><ul class=""><li id="37ee" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb kh jz ka kb bi translated"><a class="ae jc" href="https://haystack.deepset.ai/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">Haystack</strong></a>:Haystackæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œç”¨äºæ„å»ºå¤§å‹æ–‡æ¡£é›†çš„ç«¯åˆ°ç«¯é—®ç­”ç³»ç»Ÿã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºå®ƒçš„ä¿¡æ¯ã€‚</li><li id="ee8c" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb kh jz ka kb bi translated"><a class="ae jc" href="https://github.com/facebookresearch/faiss" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> FAISS </strong> </a> : FAISSæ˜¯ä¸€ä¸ªåº“ï¼Œå…è®¸å¼€å‘è€…å¿«é€Ÿæœç´¢å½¼æ­¤ç›¸ä¼¼çš„å¤šåª’ä½“æ–‡æ¡£çš„åµŒå…¥ã€‚å¦‚æœä½ æƒ³æ·±å…¥äº†è§£å®ƒï¼Œæˆ‘å»ºè®®ä½ é˜…è¯»è¿™ç¯‡<a class="ae jc" href="https://towardsdatascience.com/understanding-faiss-619bb6db2d1a" rel="noopener" target="_blank">ä»¤äººæƒŠå¹çš„åšå®¢</a>ã€‚</li></ul><h2 id="6bd5" class="kj kk hh bd kl km kn ko kp kq kr ks kt ip ku kv kw it kx ky kz ix la lb lc ld bi translated">å®æ–½å•å…ƒå’Œç²’åº¦</h2><p id="e7c8" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">ç°åœ¨æˆ‘ä»¬å°†è¿›å…¥æŠ€æœ¯å®ç°ç»†èŠ‚ï¼Œå› æ­¤å¦‚æœæ‚¨å¯¹ç¼–ç éƒ¨åˆ†æ›´æ„Ÿå…´è¶£ï¼Œæ‚¨å¯ä»¥è¿›ä¸€æ­¥è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œç›´æ¥è¿›å…¥collabç¬”è®°æœ¬ã€‚</p><ul class=""><li id="0478" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb kh jz ka kb bi translated"><strong class="ig hi">ç¯å¢ƒè®¾ç½®</strong>:æˆ‘ç”¨è¿‡Google collab notebook (GPUè¿è¡Œæ—¶)ï¼Œå› ä¸ºåˆ›å»ºåµŒå…¥åœ¨è®¡ç®—ä¸Šå¾ˆæ˜‚è´µã€‚é¦–å…ˆï¼Œå®‰è£…æ‰€éœ€çš„åº“:</li></ul><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="76d9" class="kj kk hh lk b fi lo lp l lq lr">!pip install git+https://github.com/deepset-ai/haystack.git <strong class="lk hi">OR</strong> !pip install farm-haystack</span><span id="e891" class="kj kk hh lk b fi ls lp l lq lr">!pip install sentence-transformers</span></pre><p id="17c2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ç¬¬ä¸€ä¸ªåŒ…å°†å®‰è£…Haystack pythonåº“ï¼Œç¬¬äºŒä¸ªåŒ…ï¼Œ<em class="ki">è¯­å¥-å˜å½¢é‡‘åˆš</em>ï¼Œæˆ‘ä»¬å°†ç”¨å®ƒ<em class="ki"> </em>æ¥åˆ›å»ºåµŒå…¥ã€‚å¥å­è½¬æ¢å™¨éå¸¸æ–¹ä¾¿åœ°æä¾›äº†å„ç§é¢„è®­ç»ƒçš„åŸºäºè½¬æ¢å™¨çš„æ¨¡å‹æ¥åµŒå…¥å¥å­æˆ–æ–‡æ¡£ã€‚è¦æŸ¥çœ‹è¿™äº›æ¨¡å‹(æ ¹æ®ç”¨ä¾‹)ï¼Œè¯·ç‚¹å‡»è¿™é‡Œçš„<a class="ae jc" href="https://github.com/UKPLab/sentence-transformers" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lt lu l"/></div></figure><ul class=""><li id="b7cb" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb kh jz ka kb bi translated"><strong class="ig hi">æ•°æ®é›†å‡†å¤‡</strong>:å¯¹äºè¿™ä¸ªè®¾ç½®ï¼Œæˆ‘å·²ç»ä¸‹è½½äº†<a class="ae jc" href="https://foodb.ca/" rel="noopener ugc nofollow" target="_blank"> Foodb </a>æ•°æ®é›†ã€‚FooDBæ˜¯ä¸–ç•Œä¸Šæœ€å¤§ã€æœ€å…¨é¢çš„é£Ÿå“æˆåˆ†ã€åŒ–å­¦å’Œç”Ÿç‰©å­¦èµ„æºã€‚FooDBæ˜¯ä½œä¸ºä¸€ç§å…è´¹èµ„æºæä¾›ç»™å…¬ä¼—çš„ã€‚æˆ‘åªç”¨è¿‡<em class="ki"> Content.json </em>ï¼Œä¸‹é¢æ˜¯æˆ‘å¤„ç†åå¾—åˆ°çš„æ•°æ®å¸§:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/f3eed2774b2016040de75b1bf69b2717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDxqeMX6idAUZ40VavgCBQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">dataframe.head()</figcaption></figure><p id="cf4b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">åœ¨ç´¢å¼•ä¸­ï¼Œæˆ‘ä»¬å°†åªä½¿ç”¨ä¸‰åˆ—ï¼Œå³<em class="ki">ä»£ç ã€urlã€äº§å“åç§°</em>ã€‚Haystackæä¾›äº†ä¸€ç§ä¾¿æ·çš„æ–¹æ³•æ¥ç´¢å¼•<em class="ki">Listã€Dictã€‘</em>ã€‚æ‰€ä»¥æˆ‘æŠŠä¸Šé¢çš„æ•°æ®å¸§è½¬æ¢æˆä¸‹é¢çš„æ ¼å¼(å¦‚<a class="ae jc" href="https://haystack.deepset.ai/docs/latest/get_startedmd" rel="noopener ugc nofollow" target="_blank">è‰å †æ–‡æ¡£</a>ä¸­æåˆ°çš„):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/7491f6ea496464b472a84224b9b6dbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I77Mtgpi5Vj6L7r25rmSYA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Haystackç´¢å¼•çš„ç¤ºä¾‹æ ¼å¼</figcaption></figure><ul class=""><li id="a6dc" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb kh jz ka kb bi translated"><strong class="ig hi">ç´¢å¼•&amp;æœç´¢</strong> : Haystackä¸ºç´¢å¼•å’Œæœç´¢æä¾›äº†ä¸‰ä¸ªæ„ä»¶:</li></ul><p id="92b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">a.<strong class="ig hi"><em class="ki">DocumentStore</em></strong>:æ‚¨æƒ³è¦å­˜å‚¨æ•°æ®çš„æ•°æ®åº“ã€‚å®ƒä»¬æ”¯æŒä¸åŒç±»å‹çš„æ•°æ®åº“ï¼Œå¦‚Elasticsearchã€FAISSã€InMemoryã€SQLç­‰ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨Elasticsesaarchå’ŒFAISSä¸­åŠ è½½æ•°æ®ï¼Œå¹¶åœ¨ç¨åè¿›è¡Œæ¯”è¾ƒã€‚</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="bf7e" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">#FAISS Indexing</strong><br/>from haystack.document_store.faiss import FAISSDocumentStore</span><span id="1583" class="kj kk hh lk b fi ls lp l lq lr">document_store_faiss = FAISSDocumentStore(faiss_index_factory_str="Flat",return_embedding=True)</span><span id="ce62" class="kj kk hh lk b fi ls lp l lq lr"><strong class="lk hi">#ES Indexing</strong><br/>from haystack.document_store.elasticsearch import ElasticsearchDocumentStore</span><span id="829e" class="kj kk hh lk b fi ls lp l lq lr">document_store_es = ElasticsearchDocumentStore(host="localhost", index="food_haystack_embedding", similarity='cosine')</span></pre><p id="aeac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">æ­¤å¤–ï¼Œå¯¹äºFAISSç´¢å¼•ï¼Œç›¸ä¼¼æ€§åº¦é‡ç°åœ¨æ˜¯â€œ<em class="ki">ç‚¹ç§¯</em>â€ï¼Œä½†æ˜¯å¯¹äºESï¼Œâ€œä½™å¼¦â€ç›¸ä¼¼æ€§æ˜¯å¯ç”¨çš„ã€‚FAISS indexä¸­æœ‰å„ç§ç”¨äºä¼˜åŒ–çš„<em class="ki">å‚æ•°</em>ï¼Œæ‚¨å¯ä»¥éšæ„ä½¿ç”¨ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘åšæŒä½¿ç”¨â€œå¹³é¢â€ç´¢å¼•ï¼Œå› ä¸ºæˆ‘çš„æ•°æ®é›†ä¸å±äºé‚£ä¸ªå·ã€‚</p><p id="98d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">b.<strong class="ig hi"> <em class="ki">æ£€ç´¢å™¨</em> </strong>:ç”¨äºæå–æŸ¥è¯¢çš„æ½œåœ¨å€™é€‰é¡¹çš„è¿‡æ»¤å™¨ã€‚ç›®å‰ï¼Œä»–ä»¬æ”¯æŒBM25ï¼ŒTF-IDFï¼ŒåµŒå…¥ï¼ŒDPR(å¯†é›†é€šé“æ£€ç´¢)ã€‚æˆ‘ä»¬ä½¿ç”¨åµŒå…¥æ£€ç´¢å™¨ã€‚æ­¤å¤–ï¼Œä¸ºäº†åˆ›å»ºåµŒå…¥ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<em class="ki">distilloberta-base-ms Marco-v2</em>æ¨¡å‹(åœ¨<a class="ae jc" href="http://Microsoft Machine Reading Comprehension" rel="noopener ugc nofollow" target="_blank">å¾®è½¯å®</a>ä¸Šè¿›è¡Œäº†é¢„è®­ç»ƒ)ã€‚æ•°æ®é›†)ã€‚</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="763d" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">#FAISS Retriever initialization</strong><br/>retriever_faiss = EmbeddingRetriever(document_store_faiss,<br/>embedding_model='distilroberta-base-msmarco-v2',model_format='sentence_transformers')</span><span id="94f0" class="kj kk hh lk b fi ls lp l lq lr"><strong class="lk hi">#ES Retriever initialization</strong><br/>retriever_es = EmbeddingRetriever(document_store_es, embedding_model='distilroberta-base-msmarco-v2', model_format='sentence_transformers')</span><span id="8de3" class="kj kk hh lk b fi ls lp l lq lr"><strong class="lk hi">#Running the process for indexing<br/></strong># Delete existing documents in documents store<br/>document_store_faiss.delete_all_documents()</span><span id="0c64" class="kj kk hh lk b fi ls lp l lq lr"># Write documents to document store<br/>document_store_faiss.write_documents(food_data_to_upload)</span><span id="3f35" class="kj kk hh lk b fi ls lp l lq lr"># Add documents embeddings to index<br/>document_store_faiss.update_embeddings(retriever=retriever)</span></pre><p id="79cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">æ‰€ä»¥é¦–å…ˆå®ƒä¼šç”¨<em class="ki"> write_documents() </em>æ–¹æ³•ç´¢å¼•æ‰€æœ‰æ•°æ®ã€‚ç„¶åï¼Œå®ƒå°†åˆ›å»ºæ¯ä¸ªæ–‡æ¡£çš„åµŒå…¥(<em class="ki"> doc['text'] </em>)ï¼Œå¹¶ä½¿ç”¨<em class="ki"> update_embeddings() </em>æ–¹æ³•å°†å…¶å­˜å‚¨åœ¨æ¯ä¸ªç›¸åº”çš„ç´¢å¼•ä¸­ï¼Œä¸ºäº†åˆ›å»ºåµŒå…¥ï¼Œå®ƒå°†ä½¿ç”¨æ‚¨åœ¨æ£€ç´¢å™¨åˆå§‹åŒ–ä¸­æåˆ°çš„æ¨¡å‹ï¼Œå³<em class="ki">distilloberta-base-ms Marco-v2</em>ã€‚æ­¤å¤–ï¼ŒHaystackæœ‰åŠ©äºæ‰¹é‡ç´¢å¼•ä¸­çš„æ‰¹å¤„ç†ã€‚</p><blockquote class="lx ly lz"><p id="6044" class="ie if ki ig b ih ii ij ik il im in io ma iq ir is mb iu iv iw mc iy iz ja jb ha bi translated"><strong class="ig hi">%ç´¢å¼•èŠ±è´¹çš„æ—¶é—´</strong></p><p id="5ed5" class="ie if ki ig b ih ii ij ik il im in io ma iq ir is mb iu iv iw mc iy iz ja jb ha bi translated">æ–‡ä»¶æ•°é‡:<strong class="ig hi"> 338ï¼Œ487 </strong></p><p id="3306" class="ie if ki ig b ih ii ij ik il im in io ma iq ir is mb iu iv iw mc iy iz ja jb ha bi translated">å¤±è´¥:<strong class="ig hi"> 386.73ç§’</strong></p><p id="599f" class="ie if ki ig b ih ii ij ik il im in io ma iq ir is mb iu iv iw mc iy iz ja jb ha bi translated">å¼¹æ€§æœç´¢:<strong class="ig hi"> 2329.32ç§’</strong></p></blockquote><p id="75b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">æ³¨æ„:å¦‚ä½ æ‰€è§ï¼ŒFAISSç´¢å¼•æ¯”ESå¿«å¤§çº¦<strong class="ig hi"> x6 </strong>ã€‚</p><p id="4b7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">c.<strong class="ig hi"> <em class="ki">è¯»è€…</em> </strong>:è™½ç„¶æˆ‘ä»¬åœ¨ä»»åŠ¡ä¸­æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªç»„ä»¶ï¼Œä½†æ˜¯æ®è¯´å®ƒæ˜¯Haystackæä¾›çš„QAç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚å®ƒè·å–æ£€ç´¢å™¨(æ½œåœ¨å€™é€‰é¡¹)çš„è¾“å‡ºï¼Œå¹¶å°è¯•ä¸ºæ‚¨çš„æŸ¥è¯¢æä¾›æœ€ä½³åŒ¹é…ã€‚å®ƒåˆ©ç”¨åŸºäºtransformerçš„è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›æ¥æŒ‘é€‰æœ€ä½³å€™é€‰ã€‚</p><p id="47b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">d.<strong class="ig hi">ç»“æœ:</strong>è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹æˆ‘ä»¬çš„ç¥ç»æœç´¢æ˜¯å¦‚ä½•æ‰§è¡Œçš„ğŸ˜‹</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="bc66" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">q = 'pipneapple banana cake'</strong></span><span id="c0ed" class="kj kk hh lk b fi ls lp l lq lr">print('-'*100)<br/>print('FAISS')<br/>print(<strong class="lk hi">get_search_result(q, retriever_faiss</strong>))<br/>print('-'*100)<br/>print('ElasticSearch Dense')<br/>print(<strong class="lk hi">get_search_result(q, retriever_es)</strong>)<br/>print('-'*100)</span><span id="66c3" class="kj kk hh lk b fi ls lp l lq lr">#return the (text, url) tuple.</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/1589a709aadded58104e930745bdade7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6GxuLDbi_IPHtM4gpLYY6A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">è¾“å‡º</figcaption></figure><h2 id="b146" class="kj kk hh bd kl km kn ko kp kq kr ks kt ip ku kv kw it kx ky kz ix la lb lc ld bi translated">ç»“è®º</h2><p id="5005" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">åŸæ¥å¦‚æ­¤ã€‚ä½ å·²ç»åˆ©ç”¨äº†ä¸€ä¸ªå¤§çš„å˜å‹å™¨æ·±åº¦ç¥ç»ç½‘ç»œï¼Œç”¨å‡ è¡Œä»£ç åšäº†ä¸€ä¸ªç¥ç»æœç´¢å¼•æ“ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºHaystack libæä¾›äº†æŠ½è±¡(<a class="me mf ge" href="https://medium.com/u/1cb8bc239339?source=post_page-----a198c31ea07b--------------------------------" rel="noopener" target="_blank"> Deepset.ai </a>)ã€‚æˆ‘å‘ç°å®ƒæ˜“äºä½¿ç”¨ï¼Œåœ¨æ•°æ®ç§‘å­¦å·¥ä½œæµé›†æˆä¸­éå¸¸æ–¹ä¾¿ã€‚ä»–ä»¬è¿˜æä¾›äº†ä¸€ç§ç®¡é“æ–¹æ³•ï¼Œåœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥é¡ºåˆ©åœ°æ’å…¥å’Œé“¾æ¥è¿™äº›ç»„ä»¶(å­˜å‚¨ã€æ›´æ–°ã€æ£€ç´¢)ã€‚</p><p id="3a18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">è™½ç„¶æˆ‘è¿˜æ²¡æœ‰åœ¨è¿™ç¯‡åšå®¢ä¸­è°ˆè®ºæ¨ç†æ—¶é—´å’Œå‡†ç¡®æ€§ï¼Œä½†æ˜¯æˆ‘ä¼šåœ¨è¿™ç¯‡åšå®¢çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­è®¨è®ºè¿™äº›äº‹æƒ…ã€‚æ•¬è¯·å…³æ³¨ã€‚</p></div><div class="ab cl mg mh go mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ha hb hc hd he"><p id="7656" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">è°¢è°¢ä½ çš„é˜…è¯»ã€‚ä¸ç®¡æ˜¯è°ï¼Œå¦‚æœä½ æœ‰ä»»ä½•åé¦ˆï¼Œæˆ‘æ´—è€³æ­å¬ã€‚ä»¥ä¸‹æ˜¯ç¤¾äº¤åª’ä½“é“¾æ¥:</p><p id="a613" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="http://instagram.com/mysticberserk_" rel="noopener ugc nofollow" target="_blank">insta gram</a>| |<a class="ae jc" href="http://linkedin.com/in/impyadav" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>| |<a class="ae jc" href="https://twitter.com/impyadav_" rel="noopener ugc nofollow" target="_blank">Twitter</a></p></div><div class="ab cl mg mh go mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ha hb hc hd he"><p id="9016" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">å‚è€ƒèµ„æ–™:</p><div class="mn mo ez fb mp mq"><a href="https://foodb.ca/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">é£Ÿå“b</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">æ¬¢è¿æ¥åˆ°FooDB 1.0ç‰ˆFooDBæ˜¯ä¸–ç•Œä¸Šæœ€å¤§æœ€å…¨é¢çš„é£Ÿå“æˆåˆ†èµ„æºâ€¦</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">foodb.ca</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jn mq"/></div></div></a></div><div class="mn mo ez fb mp mq"><a href="https://haystack.deepset.ai/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">å¹²è‰å †</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">å¤§è§„æ¨¡ç¥ç»é—®é¢˜è§£ç­”è´¢åŠ¡æ²»ç†æ·±å…¥äº†è§£å¤šå®¶å…¬å¸çš„è´¢åŠ¡æ•°æ®â€¦</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">haystack.deepset.ai</p></div></div><div class="mz l"><div class="nf l nb nc nd mz ne jn mq"/></div></div></a></div><div class="mn mo ez fb mp mq"><a href="https://github.com/facebookresearch/faiss" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">facebookresearch/faiss</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">Faissæ˜¯ä¸€ä¸ªç”¨äºé«˜æ•ˆç›¸ä¼¼æ€§æœç´¢å’Œå¯†é›†å‘é‡èšç±»çš„åº“ã€‚å®ƒåŒ…å«ç®—æ³•æœç´¢â€¦</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">github.com</p></div></div><div class="mz l"><div class="ng l nb nc nd mz ne jn mq"/></div></div></a></div><div class="mn mo ez fb mp mq"><a href="https://www.elastic.co/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">å…è´¹å¼€æ”¾æœç´¢:Elasticsearchã€ELK &amp; Kibana | Elasticçš„åˆ›é€ è€…</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">å°†æ—¥å¿—ã€æŒ‡æ ‡ã€è·Ÿè¸ªç­‰ç»Ÿä¸€åˆ°ä¸€ä¸ªå¯æ‰©å±•çš„å †æ ˆä¸­ï¼Œè¯¥å †æ ˆæ˜¯å…è´¹çš„ã€å¼€æ”¾çš„ï¼Œæ—¨åœ¨æé«˜é€Ÿåº¦ã€‚ç›‘æ§æ¯ä¸ªå…ƒç´ â€¦</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">www.elastic.co</p></div></div><div class="mz l"><div class="nh l nb nc nd mz ne jn mq"/></div></div></a></div></div></div>    
</body>
</html>