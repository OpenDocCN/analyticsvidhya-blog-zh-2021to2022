<html>
<head>
<title>MySQL And Python- Inserting The Data. — ML For Lazy 2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MySQL和Python-插入数据。— ML代表懒惰2021</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mysql-and-python-inserting-the-data-ml-for-lazy-2021-12619326d616?source=collection_archive---------6-----------------------#2021-07-07">https://medium.com/analytics-vidhya/mysql-and-python-inserting-the-data-ml-for-lazy-2021-12619326d616?source=collection_archive---------6-----------------------#2021-07-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f8bce05dd5ad44812ed3cc9cf98b7b74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTHRU-ZRu4xhYhKxShdmJw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">将数据插入数据库</figcaption></figure><p id="1dfd" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">吼吼！我们已经创建了数据库，并学习了如何在使用MySQL和python创建连接之后创建与数据库的连接。唯一没有回答的问题是运行查询来对数据库执行操作。通常在数据库和数据库本身上执行以下主要操作。</p><h1 id="9c84" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">目的</h1><p id="11df" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">这篇文章将介绍如何将数据插入数据库，并将数据永久存储在数据库中。为此，我们在查询中使用SQL的“INSERT，INTO”关键字。</p><p id="e15d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我想回答的第一个问题是什么是查询。所以让我们来回答这个问题。</p><h1 id="03ac" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">什么是查询？</h1><p id="e6e9" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">查询是MySql中的一个语句，它包含我们想要对数据库或存储在数据库中的数据执行的操作的逻辑。</p><p id="8715" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">简而言之，它是我们给MySql的一个命令，这样我们的目的就实现了，我们可以对数据库和数据库中的数据做我们想做的事情。</p><h2 id="0535" class="ku js hh bd jt kv kw kx jx ky kz la kb je lb lc kf ji ld le kj jm lf lg kn lh bi translated">使用PYTHON和MYSQL执行查询的步骤</h2><ol class=""><li id="f002" class="li lj hh iv b iw kp ja kq je lk ji ll jm lm jq ln lo lp lq bi translated"><strong class="iv hi">使用凭证创建一个与数据库的连接，这个连接返回mysql的连接对象。</strong></li><li id="586d" class="li lj hh iv b iw lr ja ls je lt ji lu jm lv jq ln lo lp lq bi translated"><strong class="iv hi">第二，你需要创建一个光标对象，它就像一个指针(鼠标)，决定点击哪里，在这种情况下，在哪里执行查询，如果查询返回一些东西，然后存储返回的数量。</strong></li><li id="e717" class="li lj hh iv b iw lr ja ls je lt ji lu jm lv jq ln lo lp lq bi translated"><strong class="iv hi">这个游标有一个名为execute的方法，它让我们在连接也被传递的数据库上执行传递的查询。</strong></li><li id="b3a9" class="li lj hh iv b iw lr ja ls je lt ji lu jm lv jq ln lo lp lq bi translated">最后，如果更改是永久性的，那么我们必须提交rae在数据库中所做的更改。</li><li id="ec1f" class="li lj hh iv b iw lr ja ls je lt ji lu jm lv jq ln lo lp lq bi translated"><strong class="iv hi">这是使用python和mysql执行查询的流程。</strong></li></ol><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/28f70faaed36b1ffd78fae859c5af39b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CudOUtHGbo0YLYu2.png"/></div></div></figure><p id="7b90" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了使用mysql，我们必须安装<a class="ae mb" href="http://mysql.com" rel="noopener ugc nofollow" target="_blank"> mysql-connector-python </a>包。那我们一定是进口的。</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/a89b843a5a744ea1ad02c74372fd8814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GllxOOPPI05vqohn.png"/></div></div></figure><p id="68e6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">首要的事情是建立联系。让我们开始吧。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="5106" class="ku js hh md b fi mh mi l mj mk">conn = connection.connect(host="localhost", user="root", password="password",database="database which you created in previous lesson" )</span></pre><p id="2484" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">该语句返回连接异议，即使用传递的凭证连接到我们传递的数据库。</p><p id="c35f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">根据我们的列表，第二件事是创建光标。让我们这样做吧。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="d52c" class="ku js hh md b fi mh mi l mj mk">cur = conn.cursor()</span></pre><p id="e73b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在我们有了一个游标，我们可以在传递的数据库上执行查询。默认情况下，当我们调用光标离开连接时，会传递与之建立连接的数据库。</p><p id="ca33" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们首先编写查询并将该查询传递给游标。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="1d85" class="ku js hh md b fi mh mi l mj mk">query = "CREATE table payments(name varchar(255), address varchar(255))" cur.execute(query)</span></pre><p id="3a71" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">execute方法让我们执行传递给该方法的查询。</p><p id="3a94" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们检查一下查询是否被执行了。让我们检索数据库中的所有表。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="bc84" class="ku js hh md b fi mh mi l mj mk">cur.execute("SHOW TABLES") for table in cur: print(table)</span></pre><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/cb0698c83a27ce62e09c7e4ba5184baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0NID5A8q4q8Esb6x.png"/></div></div></figure><p id="7246" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在让我们将数据插入表中。我们将创建一个包含更多属性的新表，然后将数据插入到该表中。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="14a1" class="ku js hh md b fi mh mi l mj mk">cur.execute("CREATE TABLE customers (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255), address VARCHAR(255))")</span></pre><p id="a81c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是执行查询的另一种方式。从而将直接查询传递给execute方法。</p><p id="e601" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了插入数据，我们需要编写如下插入查询，然后执行相同的查询:</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="b357" class="ku js hh md b fi mh mi l mj mk">query = "Insert into customers(name, address) values('zack', 'zack 123')" cur.execute(query)</span></pre><p id="12de" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这样，我们的查询被执行，数据被插入到我们的表中。还有另一种插入数据的方法，使用格式说明符。这类似地工作，但是我们必须传递带有格式说明符和值的查询。这些值应该采用元组格式。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="dbcb" class="ku js hh md b fi mh mi l mj mk">query = "insert into customers(name, address) values (%s, %s)" val = ('anthony', 'anthony 123') cur.execute(query, val)</span></pre><p id="4f92" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">“%S”表示字符串是它的值。第一个%s将被替换为元组中的第一个值，第二个将被替换为第二个值，依此类推。</p><p id="6ab9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们可以在同一个查询中添加更多的值。我们这样做的方法是使用数据库中的元组列表。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="51fc" class="ku js hh md b fi mh mi l mj mk">query = "insert into customers(name, address) values (%s, %s)" val = [ ('Peter', 'Lowstreet 4'), ('Amy', 'Apple st 652'), ('Hannah', 'Mountain 21'), ('Michael', 'Valley 345'), ('Sandy', 'Ocean blvd 2'), ('Betty', 'Green Grass 1'), ('Richard', 'Sky st 331'), ('Susan', 'One way 98'), ('Vicky', 'Yellow Garden 2'), ('Ben', 'Park Lane 38'), ('William', 'Central st 954'), ('Chuck', 'Main Road 989'), ('Viola', 'Sideway 1633') ] cur.executemany(query, val)</span></pre><p id="2ad3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这些值将被逐个插入到表中。这样，我们将值插入到数据库中。现在，由于我们已经在数据库中进行了更改，我们需要使这些更改永久化，所以让我们使用连接对象的commit方法来提交这些更改。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="8c2a" class="ku js hh md b fi mh mi l mj mk">conn.commit()</span></pre><p id="a1b8" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">因此，我们的改变被产生和存储。</p><h1 id="d576" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">结论</h1><p id="1a4b" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">这就是我们在数据库中存储数据的方式，一次存储一个，或者一次存储多个。在下一篇文章中，我们将看到如何取回这些数据并使用它们。因为在机器学习中，我们需要处理数据，所以我们需要从数据库中取回这些数据并执行一些操作，或者将数据馈送给机器学习模型进行训练。</p><p id="9d7f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">假设你没有读过如何连接数据库和下载MySQL，那么请看— <a class="ae mb" href="https://mlforlazy.in/mysql-and-python-creating-database-using-python/" rel="noopener ugc nofollow" target="_blank"> MySql和Python |使用Python创建数据库</a>。</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div class="er es mm"><img src="../Images/29f88e3a9850ef46d2e0389059659de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:192/0*ZnKujsRoOzMU7Qjd"/></div></figure><p id="59dc" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我是一名来自克什米尔的计算机科学研究生。在这些日子里，我转向传播关于机器学习的信息，这是我的激情和未来的研究。目的是让人们了解和理解机器和深度学习本身的基本概念，这些概念对该领域的进一步成功至关重要。</p></div><div class="ab cl mn mo go mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ha hb hc hd he"><p id="fbd1" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="mu">原载于2021年7月7日</em><a class="ae mb" href="https://mlforlazy.in/mysql-and-python-inserting-the-data/" rel="noopener ugc nofollow" target="_blank"><em class="mu">https://mlforlazy . in</em></a><em class="mu">。</em></p></div></div>    
</body>
</html>