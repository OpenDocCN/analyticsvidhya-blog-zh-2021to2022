<html>
<head>
<title>List Comprehensions and Nested List Comprehensions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的列表理解和嵌套列表理解</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/list-comprehensions-and-nested-list-comprehensions-in-python-86520ee16aa5?source=collection_archive---------7-----------------------#2022-02-25">https://medium.com/analytics-vidhya/list-comprehensions-and-nested-list-comprehensions-in-python-86520ee16aa5?source=collection_archive---------7-----------------------#2022-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="00ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">理解Python中的列表和嵌套列表理解</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/2ec1a87c2a3561ff37df9c2e7a533913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QzpcTWwNTQaaxDjl"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx translated">由<a class="ae js" href="https://unsplash.com/@markuswinkler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·温克勒</a>在<a class="ae js" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="9411" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">列表</strong>是Python中内置的数据结构之一，它是一组相同或不同类型的元素。用Python创建一个列表是一件非常繁琐的任务，其中涉及到一个<strong class="ig hi"> for </strong>循环。</p><p id="c244" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Python以简单易懂的代码著称。如果你知道语法，那么Python非常容易使用。在本教程中，我们将讨论使你的代码更加优雅和可读的<code class="du jt ju jv jw b">List Comprehensions</code>。</p><p id="64ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们开始吧。</p><h1 id="a9e4" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">列出理解</h1><p id="c163" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">Python最好的特性之一是<code class="du jt ju jv jw b">List Comprehensions</code>,它帮助你用一行代码编写代码。</p><p id="40d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是首先，我们将在<strong class="ig hi"> for </strong>循环中看到一个创建指数列表的例子。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es la"><img src="../Images/c35072d45c9cd60ce675cc7bfd39686a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJhuLLb1dG3Pti2ZRiu2-w.png"/></div></div></figure><p id="6319" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看我们在上面的例子中做了什么。首先，我们创建了一个世博会变量列表。然后，我们创建了一个expon变量的空列表，而不是expo的iterable上的ex iterate变量。之后，ex的指数被创建并存储在ex中。现在，我们将ex追加到expon的空列表中。最后，我们打印列表。</p><p id="eeb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们将使用<strong class="ig hi"> map() </strong>函数实现相同的功能，这是使用<strong class="ig hi"> lambda </strong>函数的替代方法。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es la"><img src="../Images/04f4a290583a25a2dd139eceb0bafcfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGwzTnI2lpHKIDAVsF-7Qg.png"/></div></div></figure><p id="b28a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你必须在map函数之前使用list，否则，它会给出map()的地址，而不是你想要的输出。在这里，你不必显式地定义一个函数，lambda会为你做这件事。</p><blockquote class="lb lc ld"><p id="5703" class="ie if le ig b ih ii ij ik il im in io lf iq ir is lg iu iv iw lh iy iz ja jb ha bi translated"><em class="hh"/><strong class="ig hi"><em class="hh">map()</em></strong><em class="hh">函数采用一个lambda函数和一个列表，而</em><strong class="ig hi"><em class="hh">lambda</em></strong><em class="hh">函数采用一个表达式和任意数量的参数。</em></p></blockquote><p id="5749" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">map函数将返回一个新列表，其中包含已被lambda函数修改的修改值。现在，让我们来谈谈列表理解:</p><p id="24e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">List comprehensions提供了一种简短紧凑的方式来创建列表。让我们看看语法:</p><blockquote class="lb lc ld"><p id="4596" class="ie if le ig b ih ii ij ik il im in io lf iq ir is lg iu iv iw lh iy iz ja jb ha bi translated"><strong class="ig hi">new _ list =[iterable if条件中项的表达式] </strong></p></blockquote><ul class=""><li id="9ec9" class="li lj hh ig b ih ii il im ip lk it ll ix lm jb ln lo lp lq bi translated">方括号对于获得列表形式的输出是必要的。</li><li id="0880" class="li lj hh ig b ih lr il ls ip lt it lu ix lv jb ln lo lp lq bi translated"><strong class="ig hi"> <em class="le">表达式</em> </strong> or运算，对iterable内部的每个值执行，后跟<strong class="ig hi"> <em class="le">进行</em> </strong>循环</li><li id="6c94" class="li lj hh ig b ih lr il ls ip lt it lu ix lv jb ln lo lp lq bi translated">这是一个普通的<strong class="ig hi"> <em class="le"> for </em> </strong>循环，用于迭代iterable中的每一项。Iterable可以是列表、集合、字符串等。</li><li id="a669" class="li lj hh ig b ih lr il ls ip lt it lu ix lv jb ln lo lp lq bi translated"><strong class="ig hi"> <em class="le"> if </em> </strong> a条件可选。</li></ul><p id="94ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里，新值被创建并存储在另一个列表new_list中。旧列表中的值将保持不变。</p><p id="74b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看一个例子:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es la"><img src="../Images/f9db6f064c8170344d68879a1c2c7161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c2_IwR913PHuwkRv1_1dEg.png"/></div></div></figure><p id="1da4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里，每个数字都将被自身相乘，这意味着我们在对每个变量做指数运算，值存储在一个新的列表中，这个列表叫做指数。</p><p id="732b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在创建新列表时，条件被用作过滤器，以获得定制的精确输出。这里，给定的表达式必须满足特定的标准或指定的条件才能获得新的列表。</p><p id="0d4d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们以一个if条件为例:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es la"><img src="../Images/b3ad290ddd426b97e3915ecc95e49af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mz05g7UC4cZskpizbIZ3cQ.png"/></div></div></figure><p id="71d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里，在给定条件下被评估为真的值将被执行，并且我们在一个新的列表中得到一个输出。只有偶数进入新列表。如果需要，您可以添加多个条件。</p></div><div class="ab cl lw lx go ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ha hb hc hd he"><h1 id="1270" class="jx jy hh bd jz ka md kc kd ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku bi translated">嵌套列表理解</h1><p id="6116" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">嵌套列表理解用于在集合中创建列表的组合。换句话说，嵌套的列表理解是另一个列表理解中的列表理解。</p><p id="572d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们通过一些例子来看看我们可以用嵌套列表理解做些什么:</p><p id="5d41" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">我们举一个例子来扁平化一个列表列表:</strong></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mi"><img src="../Images/0b645cf41218d32f889de0aa0c332a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iHgQy451KjSM0WpulaE8A.png"/></div></div></figure><p id="e492" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你明白什么了吗？不。在这里，第一个for循环用于访问外部列表，第二个for循环用于访问内部子列表中的值。</p><p id="ed66" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看使用for循环和append()方法的同一个例子。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mi"><img src="../Images/34aeabd026d2fe83a81138eabef52174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hl3UhSBQbU2iQ9bDska6bg.png"/></div></div></figure><p id="a062" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您也可以对此使用过滤器或条件。让我们看看如何:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mj"><img src="../Images/1d01890a0124bfc517da954764a56d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4N3C0iy0jSyy_xs495dLtw.png"/></div></div></figure><p id="3f8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以看到子列表的长度应该大于2的情况，如果不大于2，那么该子列表将被丢弃。</p><h1 id="86e3" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="7d4e" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">现在，您已经了解了Python中列表理解和嵌套列表理解的基础。它提供了一个优雅简洁的语法来创建基于现有列表或其他可迭代列表的新列表。</p><p id="a1d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在python中使用太多的列表理解会使你的代码不可读。</p><p id="fbc8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是的，列表理解对于编写更漂亮、更pythonic化的代码非常有用。总是建议在Python中使用列表理解，但要保持代码的可读性。列表理解使得代码难以理解，在复杂的情况下，总是建议避免列表压缩。</p></div></div>    
</body>
</html>