<html>
<head>
<title>React Django integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应Django一体化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/django-react-integration-37acc304e984?source=collection_archive---------3-----------------------#2021-04-05">https://medium.com/analytics-vidhya/django-react-integration-37acc304e984?source=collection_archive---------3-----------------------#2021-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="dd2b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Webpack和Webpack加载器</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e1ad7ed10e899942b68f9783033b5944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Z6FeKbn24rqg03DFUie6A.png"/></div></div></figure><p id="9a9c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">在这篇博客中- <br/> </strong>集成时出现的问题会直接反应到Django中。<br/>为什么要使用Webpack和Webpack加载器？<br/>整合的步骤。</p><p id="b24e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">预读- <br/> </strong>这个博客是为那些想了解如何将React集成到Django中的人，或者那些不明白为什么某些事情会以这种方式完成的人准备的。</p><p id="fc94" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">快速注释-<br/></strong>Django和React的这种集成是许多可能的方法之一。这也使用<code class="du kf kg kh ki b">yarn</code>作为包管理器。您可以用<code class="du kf kg kh ki b">npm</code>命令替换<code class="du kf kg kh ki b">yarn</code>命令，它应该仍然运行良好。</p><p id="b9b1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，你应该知道如何创建一个虚拟环境，以确保未来不会出现版本冲突。这种集成将使用<code class="du kf kg kh ki b">pyenv</code>来创建和修改虚拟环境。如果你希望使用<code class="du kf kg kh ki b">venv</code>或者其他方法来创建一个开发环境，你可以。<br/>如果你不知道如何使用<code class="du kf kg kh ki b">pyenv</code>，你可以从<a class="ae kj" href="https://realpython.com/intro-to-pyenv/" rel="noopener ugc nofollow" target="_blank">这里</a>学习如何安装和使用。</p><p id="e3f0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，该集成使用终端代码，即<code class="du kf kg kh ki b">bash scripting.</code>如果您正在windows上开发，强烈建议您开始使用Windows Subsystem For Linux(如果尚未使用)。<strong class="jl hj">不需要根。在你的windows操作系统中安装Linux系统，让开发变得容易多了。如果您在安装WSL时需要帮助，请在此处找到它<a class="ae kj" href="https://www.configserverfirewall.com/windows-10/windows-subsystem-for-linux-2/" rel="noopener ugc nofollow" target="_blank">。</a></strong></p><p id="0d08" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你在任何时候弄乱了文件夹结构，你可以在这里找到完整的<a class="ae kj" href="https://github.com/eric-liclair/Django-React-Integration" rel="noopener ugc nofollow" target="_blank">Django-React-Integration</a>。需要的时候可以看看。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="f5f0" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">集成时的问题直接反应到Django中。</h1><p id="f8c1" class="pw-post-body-paragraph jj jk hi jl b jm lj ij jo jp lk im jr js ll ju jv jw lm jy jz ka ln kc kd ke hb bi translated">您可能已经知道，Django在处理项目的静态文件时使用了不同的方法。Django应该知道所有静态文件的路径。虽然这是管理静态文件的一种很好的方式，但是当涉及到react时，您知道已经编写了大量的JavaScript，修改所有组件的路径绝对是一种令人厌倦的、耗时的、不太适合程序员的工作方式。</p><p id="a263" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此，为了管理和自动化所有这些，我们使用捆扎机和装载机。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="20e7" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">为什么要使用Webpack和Webpack-Loaders？</h1><p id="0152" class="pw-post-body-paragraph jj jk hi jl b jm lj ij jo jp lk im jr js ll ju jv jw lm jy jz ka ln kc kd ke hb bi translated"><strong class="jl hj"> Webpack </strong>是一个JavaScript编写的静态模块捆绑器。它的作用是，每当你<code class="du kf kg kh ki b">import { some file } from "some/path";</code> Webpack构建一个依赖图，映射你的项目需要的每个模块，并在一个特定的位置生成一个或多个包。</p><p id="6bb2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">也就是说，它跟踪所有的导入，并检查某个导入文件是否具有特定的文件扩展名。如果是，它会在一个位置创建一个包含所有导入的新包。现在，为了将这些文件转换成JavaScript，使用了Webpack-Loaders 。</p><p id="9592" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">加载器</strong>可以将不同语言(如TypeScript和CSS)的文件转换成JavaScript。</p><p id="b8ac" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果您将使用Webpack和Webpack加载器生成的这个文件放在静态文件目录中，您的Django项目将能够访问这些文件。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="5411" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated"><strong class="ak">集成Django和React的步骤</strong></h1><p id="bdec" class="pw-post-body-paragraph jj jk hi jl b jm lj ij jo jp lk im jr js ll ju jv jw lm jy jz ka ln kc kd ke hb bi translated">确保你已经安装了NodeJS和yarn。需要帮助吗？</p><p id="b971" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae kj" href="https://www.geeksforgeeks.org/installation-of-node-js-on-linux/" rel="noopener ugc nofollow" target="_blank">如何安装NodeJS和npm？</a> <br/> <a class="ae kj" href="https://classic.yarnpkg.com/en/docs/install#windows-stable" rel="noopener ugc nofollow" target="_blank">如何使用npm安装纱线？</a></p><p id="c357" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要确保安装，请运行以下测试命令。</p><p id="7240" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">node --version</code></p><p id="3927" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">npm --version</code></p><p id="2c0b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn --version</code></p><p id="112e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果以上每个命令分别返回node、npm和yarn的某个版本，则安装成功，否则尝试重新安装。</p><p id="c413" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">启动虚拟环境。</strong></p><p id="1b99" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">创建一个虚拟环境，或者按照下面的代码使用pyenv启动并激活一个虚拟环境。确保在所需的项目目录中运行这些程序。</p><p id="8abf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">pyenv virtualenv system venv</code></p><p id="8ef8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">上面的命令在项目目录中创建一个虚拟环境。</p><p id="97e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">pyenv activate venv</code></p><p id="3cfc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">上述命令激活虚拟环境。</p><p id="64ed" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">安装Django </strong></p><p id="94f5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在安装Django。需要时，使用该命令安装djangorestframework和其他python包。</p><p id="62a0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">python -m pip install django</code></p><p id="5a72" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">使用上面的命令可以确保安装是针对虚拟环境进行的，而不是针对根python。</p><p id="1876" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">在Django开始一个项目，然后是一个名为frontend的应用程序。</strong></p><p id="6536" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">使用以下代码启动Django项目</p><p id="df82" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">django-admin startproject &lt;project_name&gt;</code></p><p id="14dc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将目录切换到您刚刚使用</p><p id="3986" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">cd &lt;project_name&gt;</code></p><p id="b72f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在启动一个Django应用程序，使用</p><p id="5593" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">django-admin startapp frontend</code></p><p id="4c40" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">将应用添加到设置文件</strong></p><p id="2711" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">转到<code class="du kf kg kh ki b">&lt;project_name&gt;/settings.py</code>，将您刚刚创建的应用程序添加到已安装的应用程序列表。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="8235" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为要显示的前端创建url。</strong></p><p id="e89d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/urls.py</code>中添加一个包含<code class="du kf kg kh ki b">frontend.urls</code>的新网址</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="ddd7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在进入<code class="du kf kg kh ki b">frontend/</code>，创建一个名为<code class="du kf kg kh ki b">urls.py</code>的新文件</p><p id="c6f4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">进入<code class="du kf kg kh ki b">frontend/urls.py</code>并向您创建的url添加一个视图。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="5111" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为url创建基于功能的视图。</strong></p><p id="2fd7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">既然您已经为前端添加了一个url，现在是时候创建专用于它的视图了。</p><p id="52ec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">转到<code class="du kf kg kh ki b">frontend/views.py</code>并创建一个基于功能的视图</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="7018" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">注意这里使用的模板<code class="du kf kg kh ki b">frontend/index.html</code>。这是我们将在下一步中创建的模板。另外，记住你需要一个单独的<code class="du kf kg kh ki b">templates</code>目录来存放模板文件。</p><p id="1ddb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为模板、静态文件和前端反应创建文件夹结构</strong></p><p id="e77c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>中创建一个名为<code class="du kf kg kh ki b">templates</code>的文件夹</p><p id="e420" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在创建另一个名为<code class="du kf kg kh ki b">frontend</code>的文件夹，并在其中创建<code class="du kf kg kh ki b">index.html</code>。</p><p id="ae24" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你的<code class="du kf kg kh ki b">frontend/templates/frontend/index.html</code>文件应该是这样的。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="187d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以稍后更改内容。注意，我们添加了静态文件<code class="du kf kg kh ki b">css/style.css</code>和<code class="du kf kg kh ki b">frontend/main.js</code>。这是创建静态目录结构的最佳时机。</p><p id="5a39" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>中创建一个名为<code class="du kf kg kh ki b">static</code>的文件夹</p><p id="f4fd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在在其中创建三个名为<code class="du kf kg kh ki b">frontend</code> <code class="du kf kg kh ki b">css</code> <code class="du kf kg kh ki b">images</code>的文件夹。</p><p id="30f9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在Django可以为你的模板访问这些静态文件了。</p><p id="3e53" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们将为React和Webpack创建另一个完整的文件夹结构。</p><p id="3552" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>下添加另一个名为<code class="du kf kg kh ki b">src</code>的文件夹</p><p id="7fe6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">frontend/src</code>中创建<code class="du kf kg kh ki b">index.js</code>。</p><p id="5938" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这将是Webpack开始创建依赖图的入口点。</p><p id="0f2b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在给<code class="du kf kg kh ki b">frontend/src</code>添加一个<code class="du kf kg kh ki b">components</code>文件夹，并在其中添加一个名为<code class="du kf kg kh ki b">App.js</code>的文件。</p><p id="4bcb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您的目录中应该有以下文件路径。</p><p id="12b0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">frontend/src/index.js</code>和<code class="du kf kg kh ki b">frontend/src/components/App.js</code>。</p><p id="b833" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这样你的文件结构就差不多准备好了，现在你应该看看文件夹结构，找到与React默认文件结构的相似之处。</p><p id="ad89" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">初始化纱线并安装所需的依赖项</strong></p><p id="0db8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在转到目录<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>(如果还没有的话),按照这些命令安装所需的依赖项。</p><p id="c0ee" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，用以下命令初始化纱线</p><p id="5a36" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn init -y</code></p><p id="bc1a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">接下来，安装webpack</p><p id="6bdf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn add webpack webpack-cli --dev</code></p><p id="72bb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在安装babel和其他所需的babel依赖项</p><p id="c68d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn add @babel/core @babel/preset-react @babel/preset-env --dev</code></p><p id="26a1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在安装所需的Webpack加载程序</p><p id="c702" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn add babel-loader css-loader style-loader --dev</code></p><p id="054a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">安装react和react-dom</p><p id="9dd5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn add react react-dom --dev</code></p><p id="f355" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们将添加一些在react中使用react-router和基于类的组件所需的依赖项。</p><p id="6ecc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn add react-router-dom @babel/plugin-proposal-class-properties</code></p><p id="8b50" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在<code class="du kf kg kh ki b">frontend/package.json</code>一定已经自动为你创建好了。</p><p id="e650" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">配置网络包和巴别塔</strong></p><p id="d040" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>中创建一个文件<code class="du kf kg kh ki b">webpack.config.js</code></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="59fc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是你的<code class="du kf kg kh ki b">webpack.config.js</code>应该有的。</p><p id="36ce" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里发生的是，我们已经定义了—</p><ol class=""><li id="1125" class="lq lr hi jl b jm jn jp jq js ls jw lt ka lu ke lv lw lx ly bi translated">babel开始构建依赖图的入口点。</li><li id="a681" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated"><strong class="jl hj">位于<code class="du kf kg kh ki b">static/frontend</code>内的输出点</strong>。如果您还记得，这是我们在<code class="du kf kg kh ki b">templates/frontend/index.html</code>中添加的JavaScript文件的位置</li><li id="a530" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated">接下来，我们为Webpack定义<strong class="jl hj">规则</strong>来测试扩展(。js|。jsx和。css ),然后<strong class="jl hj">使用</strong>指令加载器将它们转换成JavaScript并打包。</li><li id="03ce" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated">我们还指示web pack<strong class="jl hj">忽略</strong> <code class="du kf kg kh ki b">node_modules</code></li></ol><p id="13dd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你需要更多关于配置的帮助，你可以在这里找到一个指导非常好的文档<a class="ae kj" href="https://webpack.js.org/concepts/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="700e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们需要为babel配置一些指令。</p><p id="34f8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>中创建一个文件<code class="du kf kg kh ki b">babel.config.json</code></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="00c2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这样做的目的是添加一些指令，如所需的预置和插件，供babel-loader使用。</p><p id="4910" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">帮助将jsx转换成经典的JavaScript。</p><p id="bd65" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，无论何时在前端目录中运行<code class="du kf kg kh ki b">webpack</code>，您都会看到它会在<code class="du kf kg kh ki b">static/frontend</code>中创建一个名为<code class="du kf kg kh ki b">main.js</code>的包</p><p id="daba" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要让webpack自动寻找变更并打包，在您的<code class="du kf kg kh ki b">frontend/package.json</code>中添加以下脚本</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="9e8a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你的<code class="du kf kg kh ki b">package.json</code>应该和上面那个差不多。</p><p id="dea9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们已经完成了React与Django一起运行的所有需求的配置。现在在<code class="du kf kg kh ki b">frontend/index.js</code>中添加<code class="du kf kg kh ki b">import { App } from "./components/App";</code></p><p id="ea63" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">并将下面的代码复制到您的<code class="du kf kg kh ki b">frontend/src/components/App.js</code>中</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="7d70" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你已经准备好了。</p><p id="215f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将目录切换到项目根目录(在那里可以找到manage.py ),并在终端中运行以下命令。</p><p id="b589" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">python manage.py migrate</code></p><p id="90c4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后</p><p id="a88f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">python manage.py runserver</code></p><p id="cbbf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在另一个终端中，转到目录<code class="du kf kg kh ki b">&lt;project_name&gt;/frontend</code>并运行以下命令，让Webpack在工作时监听并创建包。</p><p id="80de" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">yarn run dev</code></p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="ba0b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">这样，您就成功地将React集成为Django项目的前端。</strong></p></div></div>    
</body>
</html>