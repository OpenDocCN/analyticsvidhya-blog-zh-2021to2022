<html>
<head>
<title>Second Hand Car Price Prediction Using Ensemble Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于集成学习的二手车价格预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/second-hand-car-price-prediction-using-ensemble-learning-786066faa35e?source=collection_archive---------16-----------------------#2021-04-18">https://medium.com/analytics-vidhya/second-hand-car-price-prediction-using-ensemble-learning-786066faa35e?source=collection_archive---------16-----------------------#2021-04-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/e5833351564b2fa7be78f2d13760e638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*rg86vRLwLBJQjGkwWFWTWg.jpeg"/></div><figcaption class="il im et er es in io bd b be z dx translated"><a class="ae ip" href="https://unsplash.com/photos/PYhkuv03zz4" rel="noopener ugc nofollow" target="_blank">Jaimy Willemse的图片来自Unslpash </a></figcaption></figure><h1 id="b0f8" class="iq ir hh bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="2ec6" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">无论是为了学习而买车，还是把现有的车卖给知道价格合理的人，都是有益的。这个<a class="ae ip" href="https://my-ml-apps.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> app </a>会帮你预测车子的二手价格。在这篇博客中，我们将看到我是如何为此目的创建一个ML模型的。本项目数据集取自Kaggle.com<a class="ae ip" href="https://www.kaggle.com/adityadesai13/used-car-dataset-ford-and-mercedes" rel="noopener ugc nofollow" target="_blank"/>。所以在此之前，让我们开始这个博客。</p><h2 id="af22" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">导入库</h2><p id="a133" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">让我们导入所有必需的库。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><h2 id="cc84" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">读取数据</h2><p id="ccb5" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">为了创建模型，我们需要数据，因此让我们创建一个数据框架来存储我们的数据。在我们的数据集中，我们有<strong class="jq hi"> 12个csv </strong>文件，所以与其把它们分开，不如把它们组合起来。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="4851" class="km ir hh lh b fi ll lm l ln lo">Files<br/>['audi.csv',<br/> 'bmw.csv',<br/> 'cclass.csv',<br/> 'focus.csv',<br/> 'ford.csv',<br/> 'hyundi.csv',<br/> 'merc.csv',<br/> 'skoda.csv',<br/> 'toyota.csv',<br/> 'vauxhall.csv',<br/> 'vw.csv']</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lp"><img src="../Images/b45912ed3263fed6f89b0db6fe2c8226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDsIjCIVHyF4rogxwldAuw.png"/></div></div></figure><h2 id="9eb3" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">处理分类数据</h2><p id="44e8" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们需要数字数据来训练我们的模型。为了做到这一点，我们有几个选择，如getdummies，OneHotEncoder，LabelEncoder。所以这些编码器将分类值编码成数值。它以升序对数据进行编码。但是当我们部署我们的模型时，我们将只获得1条记录的输入，因此它将把所有内容编码为0。因此，我们将需要一个正确的映射键，即实际值和值，即编码值。以下代码用于将每个分类数据转换为基于数值的值。</p><p id="a75e" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">公司</strong></p><p id="c8e7" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉汽车是哪个公司的。将公司数据转换成数字数据并存储到字典中。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="130e" class="km ir hh lh b fi ll lm l ln lo">{'Audi': '0', 'BMW': '1', 'Mercedes': '2', 'Ford': '3', 'Hyundai': '4', 'Skoda': '5', 'Toyota': '6', 'Vauxhall': '7', 'Volkswagen': '8'}</span></pre><p id="ed6c" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">型号</strong></p><p id="e1eb" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉汽车是哪个型号的。将模型数据转换为数字数据并存储到字典中。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="dae0" class="km ir hh lh b fi ll lm l ln lo">{' A1': '0', ' A6': '1', ' A4': '2', ' A3': '3', ' Q3': '4', ' Q5': '5', ' A5': '6', ' S4': '7', ' Q2': '8', ' A7': '9', ' TT': '10', ' Q7': '11', ' RS6': '12', ' RS3': '13', ' A8': '14', ' Q8': '15', ' RS4': '16', ' RS5': '17', ' R8': '18', ' SQ5': '19', ' S8': '20', ' SQ7': '21', ' S3': '22', ' S5': '23', ' A2': '24', ' RS7': '25', ' 5 Series': '26', ' 6 Series': '27', ' 1 Series': '28', ' 7 Series': '29', ' 2 Series': '30', ' 4 Series': '31', ' X3': '32', ' 3 Series': '33', ' X5': '34', ' X4': '35', ' i3': '36', ' X1': '37', ' M4': '38', ' X2': '39', ' X6': '40', ' 8 Series': '41', ' Z4': '42', ' X7': '43', ' M5': '44', ' i8': '45', ' M2': '46', ' M3': '47', ' M6': '48', '4 Series': '49', ' Z3': '50', ' C Class': '51', ' Focus': '52', ' Fiesta': '53', ' Puma': '54', ' Kuga': '55', ' EcoSport': '56', ' C-MAX': '57', ' Mondeo': '58', ' Ka+': '59', ' Tourneo Custom': '60', ' S-MAX': '61', ' B-MAX': '62', ' Edge': '63', ' Tourneo Connect': '64', ' Grand C-MAX': '65', ' KA': '66', ' Galaxy': '67', ' Mustang': '68', ' Grand Tourneo Connect': '69', ' Fusion': '70', ' Ranger': '71', ' Streetka': '72', ' Escort': '73', ' Transit Tourneo': '74', ' I20': '75', ' Tucson': '76', ' I10': '77', ' IX35': '78', ' I30': '79', ' I40': '80', ' Ioniq': '81', ' Kona': '82', ' Veloster': '83', ' I800': '84', ' IX20': '85', ' Santa Fe': '86', ' Accent': '87', ' Terracan': '88', ' Getz': '89', ' Amica': '90', ' SLK': '91', ' S Class': '92', ' SL CLASS': '93', ' G Class': '94', ' GLE Class': '95', ' GLA Class': '96', ' A Class': '97', ' B Class': '98', ' GLC Class': '99', ' E Class': '100', ' GL Class': '101', ' CLS Class': '102', ' CLC Class': '103', ' CLA Class': '104', ' V Class': '105', ' M Class': '106', ' CL Class': '107', ' GLS Class': '108', ' GLB Class': '109', ' X-CLASS': '110', '180': '111', ' CLK': '112', ' R Class': '113', '230': '114', '220': '115', '200': '116', ' Octavia': '117', ' Citigo': '118', ' Yeti Outdoor': '119', ' Superb': '120', ' Kodiaq': '121', ' Rapid': '122', ' Karoq': '123', ' Fabia': '124', ' Yeti': '125', ' Scala': '126', ' Roomster': '127', ' Kamiq': '128', ' GT86': '129', ' Corolla': '130', ' RAV4': '131', ' Yaris': '132', ' Auris': '133', ' Aygo': '134', ' C-HR': '135', ' Prius': '136', ' Avensis': '137', ' Verso': '138', ' Hilux': '139', ' PROACE VERSO': '140', ' Land Cruiser': '141', ' Supra': '142', ' Camry': '143', ' Verso-S': '144', ' IQ': '145', ' Urban Cruiser': '146', ' Corsa': '147', ' Astra': '148', ' Viva': '149', ' Mokka': '150', ' Mokka X': '151', ' Crossland X': '152', ' Zafira': '153', ' Meriva': '154', ' Zafira Tourer': '155', ' Adam': '156', ' Grandland X': '157', ' Antara': '158', ' Insignia': '159', ' Ampera': '160', ' GTC': '161', ' Combo Life': '162', ' Vivaro': '163', ' Cascada': '164', ' Kadjar': '165', ' Agila': '166', ' Tigra': '167', ' Vectra': '168', ' T-Roc': '169', ' Golf': '170', ' Passat': '171', ' T-Cross': '172', ' Polo': '173', ' Tiguan': '174', ' Sharan': '175', ' Up': '176', ' Scirocco': '177', ' Beetle': '178', ' Caddy Maxi Life': '179', ' Caravelle': '180', ' Touareg': '181', ' Arteon': '182', ' Touran': '183', ' Golf SV': '184', ' Amarok': '185', ' Tiguan Allspace': '186', ' Shuttle': '187', ' Jetta': '188', ' CC': '189', ' California': '190', ' Caddy Life': '191', ' Caddy': '192', ' Caddy Maxi': '193', ' Eos': '194', ' Fox': '195'}</span></pre><p id="835b" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">传输</strong></p><p id="9b5e" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们它有什么样的齿轮传动。下面的代码片段将值及其映射存储到字典中。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="c217" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">燃料类型</strong></p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><h2 id="ef33" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">电子设计自动化(Electronic Design Automation)</h2><p id="05e6" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="jq hi">统计概述</strong></p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lz"><img src="../Images/74526adbef9faf9d40c08941244f1d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nMR_AQ4I5S1rVzbOUAU7Ew.png"/></div></div><figcaption class="il im et er es in io bd b be z dx translated">数据集的描述</figcaption></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="1267" class="km ir hh lh b fi ll lm l ln lo">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 108540 entries, 0 to 108539<br/>Data columns (total 11 columns):<br/> #   Column        Non-Null Count   Dtype  <br/>---  ------        --------------   -----  <br/> 0   model         108540 non-null  object <br/> 1   year          108540 non-null  int64  <br/> 2   price         108540 non-null  int64  <br/> 3   transmission  108540 non-null  object <br/> 4   mileage       108540 non-null  int64  <br/> 5   fuelType      108540 non-null  object <br/> 6   tax           94327 non-null   float64<br/> 7   mpg           99187 non-null   float64<br/> 8   engineSize    108540 non-null  float64<br/> 9   company       108540 non-null  object <br/> 10  tax(£)        4860 non-null    float64<br/>dtypes: float64(4), int64(3), object(4)<br/>memory usage: 9.1+ MB</span></pre><p id="c1c8" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">汽车数量:108540 <br/>重复值数量:2273</p><p id="c074" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">空值:</p><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="06e1" class="km ir hh lh b fi ll lm l ln lo">model                0<br/>year                 0<br/>price                0<br/>transmission         0<br/>mileage              0<br/>fuelType             0<br/>tax              13329<br/>mpg               8555<br/>engineSize           0<br/>company              0<br/>tax(£)          101493</span></pre><p id="64ef" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">删除重复值和空值</strong></p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="114c" class="km ir hh lh b fi ll lm l ln lo">0</span></pre><p id="e39c" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">型号</strong></p><p id="755c" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们汽车的型号名称。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="11b2" class="km ir hh lh b fi ll lm l ln lo">Number of unique values<br/>196<br/>Value Counts<br/> Fiesta     6496<br/> Focus      4982<br/> Golf       4791<br/> C Class    3945<br/> Corsa      3272<br/>            ... <br/>200            1<br/> A2            1<br/> Accent        1<br/>180            1<br/> Amica         1</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es ma"><img src="../Images/8004c9889154d08ced6bec5f0933b52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*ejUrGevFkRYdqIhTOjSPRQ.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">型号计数</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mb"><img src="../Images/fcfd2a575b86d4ffc2b44c2eb63d1308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*sQ5LC5nKrn6e-Ca7WnScXw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">模型与价格的关系</figcaption></figure><p id="f73a" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">年份</strong></p><p id="b378" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们这辆车是哪一年制造的。让我们看看它对价格的影响。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="02a3" class="km ir hh lh b fi ll lm l ln lo">Number of unique values :: 29</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es mc"><img src="../Images/8ff908f53075b3e5d0176bec451dea54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7niu5hJsb8nUlGGB4U6sw.png"/></div></div><figcaption class="il im et er es in io bd b be z dx translated">年计数图</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es md"><img src="../Images/df261d889b3319d736d9a4d3e873caac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_VNOU8U7Iqc3m4tKg0Aprw.png"/></div></div><figcaption class="il im et er es in io bd b be z dx translated">年份与价格的关系</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es me"><img src="../Images/2b39c439ad17a1893e18a7aaaeef2773.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*U_zlwnTv9B4UrlQAsQFOFA.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">年份分布</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mf"><img src="../Images/82e30ba4d4a9cc1638b18d4d8362e264.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*1w-_qmbO2k0zR9DZ6K2HNw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">带价格的注册图</figcaption></figure><p id="d2bc" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">我们可以从这些地块上看出我们当年对价格有影响。汽车价格随着生产年份的增加而增加。</p><p id="23e5" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">传输</strong></p><p id="81d4" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们变速器汽车的齿轮类型。让我们看看它是如何影响价格的。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="fcd9" class="km ir hh lh b fi ll lm l ln lo">Number of unique values: 4<br/>Unique values: ['Manual', 'Automatic', 'Semi-Auto', 'Other']<br/>Value counts:<br/>Manual       55758<br/>Semi-Auto    22313<br/>Automatic    20127<br/>Other           10</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mg"><img src="../Images/1cfc765279b5a15e2ed96d19ae8d5e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*-OMVONOGuTJb-kOe65KpxQ.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">传输计数图</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mh"><img src="../Images/f2862ec700a51deaa6e2be5156faf93c.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*IO43OcOppNCE0xr7ZgILeg.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">传输与价格的关系</figcaption></figure><p id="8057" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">自动和半自动的价格比其他两类要高。</p><p id="3146" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">里程</strong></p><p id="f42e" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们，一辆汽车就燃料供给能行驶多少英里/公里。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="d678" class="km ir hh lh b fi ll lm l ln lo">Number of unique values: 42313</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es me"><img src="../Images/11187e4917c76157c1f692d67af480b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*iRu15CzCGC9ugDV_j2yQMQ.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">里程分布</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mi"><img src="../Images/340b14c7d36f2c9e4c939ea220542862.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*6JyZ_5U0zliRdMdBSbMl3w.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">里程与价格的关系</figcaption></figure><p id="54a6" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">燃料类型</strong></p><p id="53bf" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们汽车使用哪种燃料。让我们看看它是否影响价格。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="546d" class="km ir hh lh b fi ll lm l ln lo">Number of unique value: 5<br/>Unique value: ['Petrol', 'Diesel', 'Hybrid', 'Other', 'Electric']<br/>Value count:<br/>Petrol      54206<br/>Diesel      40661<br/>Hybrid       3087<br/>Other         248<br/>Electric        6</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mg"><img src="../Images/601d7dcb74d095dab231fa2869a78421.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*HUhztRLSgiCRTQl52BE8hw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">燃料计数图</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mh"><img src="../Images/b2ec6b358f39daa2d68059cea89ead93.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*qfXaOYFf7y57D26I7Vvbqw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">燃料与价格的关系</figcaption></figure><p id="da26" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">发动机尺寸</strong></p><p id="417e" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这个属性告诉我们汽车发动机的大小。让我们看看它是如何影响汽车价格的。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="fbad" class="km ir hh lh b fi ll lm l ln lo">Number of unique values: 42</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es me"><img src="../Images/a72d606fcc78cf96c76eb2c6ae2b5b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*c1d30-SYMXiX2GDdYAddiA.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">发动机尺寸计数图</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mh"><img src="../Images/7515c2f040348514a6cc8f9e651d2721.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*h4IqvonJlbB_fqiNHPfkiw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">发动机尺寸与价格的关系</figcaption></figure><p id="8181" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">价格</strong></p><p id="b8c6" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这是我们的目标属性。就是二手车的价格。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mj"><img src="../Images/afe3c53f33ccd3161ed462fd99f8ed87.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*fW9csnZmR7SeGU1g9IQ9qw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">价格分布</figcaption></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mk"><img src="../Images/d721cfbb74cdb33b8f564ae35b1f678b.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*n4PJLumNip-pyNhwPtorlg.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">价格箱线图</figcaption></figure><p id="c8f3" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">数据清理</strong></p><p id="7704" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">我们的数据集中没有删除异常值的原因包括各种公司数据集，其中型号和公司名称是导致异常值的主要因素之一</p><h2 id="d7f6" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">特征工程</h2><p id="7919" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">使用之前创建的字典对我们的分类数据进行编码。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="13bd" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">在第二行，我们选择数据类型为objects的列名。然后遍历列名并相应地存储值。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es ml"><img src="../Images/ca98ad5f0a6f005a7c680d1c52a9ead0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*UOi4PLSmw5eow0sPIH9RIQ.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">编码数据帧</figcaption></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="7e95" class="km ir hh lh b fi ll lm l ln lo">Converting str values to int: cars[cols]=cars[cols].astype(int)</span></pre><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mm"><img src="../Images/c6f49c95d405b639d9b24fc4a692db6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*33cv4j6FS5h35F-gcEOuKA.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">相关热图</figcaption></figure><p id="ca20" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">选择测试</strong></p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><figure class="la lb lc ld fd ii er es paragraph-image"><div class="er es mn"><img src="../Images/2d0d83c319b9e093b6c94a39c530509a.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*p76H3VnnB01T2k_Wg1a9vw.png"/></div><figcaption class="il im et er es in io bd b be z dx translated">特征和分数</figcaption></figure><p id="7ce7" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">在这里，所有功能或多或少都会影响价格。每一个功能都与价格有着很好的相关性，这是我们不能忽视的。正如它所显示的，所有这些特性都会影响价格，并且非常重要。当我用所有功能试错时，我给出了最大R2分数。因此，选择所有特征。</p><p id="f417" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi"> MinMaxScaller </strong></p><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="c668" class="km ir hh lh b fi ll lm l ln lo">cols=[‘engineSize’,’mileage’]</span></pre><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="4750" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">使用MinMaxScaler转换同一范围内的值</p><h2 id="3415" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">建模</h2><p id="a7f0" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">让我们将数据分成训练样本和测试样本。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><blockquote class="mo mp mq"><p id="b073" class="jo jp mr jq b jr lu jt ju jv lv jx jy ms lw kb kc mt lx kf kg mu ly kj kk kl ha bi translated">注意:我们的评估指标是R的平方，即R2。R2是模型表示度量，它告诉我们的回归模型有多好。范围从-1到1，其中1表示非常好，而-1表示不好。</p></blockquote><p id="b7b7" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi"> RandomForestRegressor </strong></p><p id="80da" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">RandomForestRegressor是用于基于回归的任务的集成算法。这里我们也在做一些超参数调整。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="109c" class="km ir hh lh b fi ll lm l ln lo">MAE 1425.9924792171153<br/>R2 0.9282483356510569</span></pre><p id="7ff4" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">嗯，92%的R2分数令人印象深刻。现在让我们尝试使用Xboost回归器。</p><p id="8d19" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi"> xgboost回归器</strong></p><p id="227d" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">这是一种梯度推进算法，其中XGBRegressor用于基于回归的任务。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="ac48" class="km ir hh lh b fi ll lm l ln lo">MAE 1322.161939034648<br/>R2 0.9394056654633186</span></pre><p id="5edd" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated">从RandomForestRegressor和XGBRegressor的比较中我们可以看出，XGBRegressor的性能稍好一些。因此，我选择它作为我的最终模型，并保存它。</p><h2 id="ffba" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated"><strong class="ak">保存模型</strong></h2><p id="dfc5" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在训练完模型之后，让我们保存它。</p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="6ff9" class="pw-post-body-paragraph jo jp hh jq b jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl ha bi translated"><strong class="jq hi">保存编码器</strong></p><figure class="la lb lc ld fd ii"><div class="bz dy l di"><div class="le lf l"/></div></figure><h2 id="ae95" class="km ir hh bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz bi translated">结论</h2><p id="bf5c" class="pw-post-body-paragraph jo jp hh jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我希望这个博客对你有所帮助，并让你学到一些新东西。你可以在这里找到这个问题的答案。你可以在这里查看它的演示<a class="ae ip" href="https://my-ml-apps.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"/>。喜欢这个帖子表示支持。你可以把你在这里发现的任何问题或者任何需要改进的地方写下来。我很乐意从中学习一两件事。<br/>在那之前，再见。</p></div></div>    
</body>
</html>