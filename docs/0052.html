<html>
<head>
<title>Demystifying Clearview AI: Downloading the Code and Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘Clearview AI:下载代码和数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/3c1f1c6cde9d?source=collection_archive---------22-----------------------#2021-01-02">https://medium.com/analytics-vidhya/3c1f1c6cde9d?source=collection_archive---------22-----------------------#2021-01-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="9909" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">揭秘Clearview AI博客系列(代码和数据)</h2></div><p id="cad1" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">安装了Conda和Git后，您可以直接从您的计算机上轻松下载并运行<a class="ae js" rel="noopener" href="/@samdbrice/1423aabb4b40"> CCTView </a>中使用的ResNet和DenseNet深度学习模型，用于真实的CCTV镜头。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/cbbbaccae44a0c585c804db93996f2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nXwnrIh70znWEhzBcX5vIw.gif"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/code/example.py" rel="noopener ugc nofollow" target="_blank"> code/example.py </a></figcaption></figure><p id="f9fe" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您还可以快速使用<a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/notebooks/Working%20With%20Sample%20Data.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>来试验不同的模型、车辆匹配算法，或者执行您自己的图像处理。</p><p id="99ce" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">资源库<a class="ae js" href="https://github.com/samdbrice/cctview" rel="noopener ugc nofollow" target="_blank">github.com/samdbrice/cctview</a>包含了模型、代码和系列中引用的其他数据的全功能演示。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es kj"><img src="../Images/ca6e88c1dfb4c7668db6a6cb728a736c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWeIqWwscJ3LHaNz_VXomQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated"><a class="ae js" href="https://github.com/samdbrice/cctview" rel="noopener ugc nofollow" target="_blank">github.com/samdbrice/cctview</a></figcaption></figure><h1 id="19b8" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">从GitHub克隆和安装</h1><p id="5c16" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">为了运行示例模型，代码和笔记本从GitHub克隆存储库，然后基于包含的<code class="du lh li lj lk b">environment.yml</code>创建一个新的Conda环境。</p><p id="0e54" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">要求:</strong></p><ul class=""><li id="5fb1" class="ll lm hh iy b iz ja jc jd jf ln jj lo jn lp jr lq lr ls lt bi translated"><code class="du lh li lj lk b"><a class="ae js" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="noopener ugc nofollow" target="_blank">git</a></code></li><li id="e2f2" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated"><a class="ae js" href="https://git-lfs.github.com/" rel="noopener ugc nofollow" target="_blank">吉特LFS </a></li><li id="b92e" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated"><code class="du lh li lj lk b"><a class="ae js" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/" rel="noopener ugc nofollow" target="_blank">conda</a></code></li></ul><pre class="ju jv jw jx fd lz lk ma mb aw mc bi"><span id="59db" class="md kl hh lk b fi me mf l mg mh"># (1) Clone the repository and data...<br/>git lfs install &amp;&amp; git clone https://github.com/samdbrice/cctview.git<!-- --> <br/># (2) Install and activate environment<br/>cd cctview<br/>conda env create -n cctview -f environment.yml<br/>conda activate cctview</span></pre><p id="1f6c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">注意:</strong>下载<code class="du lh li lj lk b">models</code>状态文件和内联<code class="du lh li lj lk b">data</code>文件需要Git大文件存储(LFS)。</p><h1 id="4da1" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">运行示例脚本</h1><p id="d820" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">安装并激活包含的环境后，您可以使用<code class="du lh li lj lk b">pythonw</code>从您的机器上运行<code class="du lh li lj lk b"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/code/example.py" rel="noopener ugc nofollow" target="_blank">code/example.py</a></code>脚本。</p><p id="e5fe" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">注意:</strong> <code class="du lh li lj lk b">pythonw</code>会自动在你的路径上。这是一个<code class="du lh li lj lk b">python</code>命令的包装器，旨在让<code class="du lh li lj lk b"><a class="ae js" href="https://matplotlib.org/faq/osx_framework.html" rel="noopener ugc nofollow" target="_blank">matplotlib</a></code> <a class="ae js" href="https://matplotlib.org/faq/osx_framework.html" rel="noopener ugc nofollow" target="_blank">跨平台</a>正常工作。</p><pre class="ju jv jw jx fd lz lk ma mb aw mc bi"><span id="d18b" class="md kl hh lk b fi me mf l mg mh">pythonw code/example.py</span></pre><p id="4d49" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">示例脚本使用来自<code class="du lh li lj lk b">examples</code>目录的图像来演示<code class="du lh li lj lk b">cctview</code>代码包中的三个核心模块:</p><ul class=""><li id="1cb4" class="ll lm hh iy b iz ja jc jd jf ln jj lo jn lp jr lq lr ls lt bi translated"><code class="du lh li lj lk b"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/code/#detect" rel="noopener ugc nofollow" target="_blank">cctview.detect</a></code></li><li id="0962" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated"><code class="du lh li lj lk b"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/code/#extract" rel="noopener ugc nofollow" target="_blank">cctview.extract</a></code></li><li id="e0f6" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated"><code class="du lh li lj lk b"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/code/#match" rel="noopener ugc nofollow" target="_blank">cctview.match</a></code></li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mi"><img src="../Images/14395436268b32868e3a27cb5218e61c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mUTtVa6g_1ap3LQZ8UoYjg.png"/></div></div></figure><h1 id="121b" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">玩Jupyter笔记本</h1><p id="51b1" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">安装并激活附带的环境后，您可以通过运行以下命令来启动Jupyter笔记本服务器:</p><pre class="ju jv jw jx fd lz lk ma mb aw mc bi"><span id="e9bc" class="md kl hh lk b fi me mf l mg mh">jupyter notebook</span></pre><p id="6dd3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在Jupyter中导航到<code class="du lh li lj lk b">notebooks</code>目录，然后打开<code class="du lh li lj lk b"><a class="ae js" href="https://github.com/samdbrice/cctview/blob/master/notebooks/Working%20With%20Sample%20Data.ipynb" rel="noopener ugc nofollow" target="_blank">Working With Sample Data.ipynb</a></code>文件。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/a21e1d0a311eec53bb4417e29702ce9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OO-x8LM2ojPVq8EW3e33Xw.png"/></div></div></figure><h1 id="570f" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">检测模块—剩余网络</h1><p id="708f" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">使用ImageAI <code class="du lh li lj lk b"><a class="ae js" href="https://imageai.readthedocs.io/en/latest/detection/index.html" rel="noopener ugc nofollow" target="_blank">RetinaNet</a></code>类型模型实现对象检测。</p><p id="7a19" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">基于在<a class="ae js" href="http://cocodataset.org/#home" rel="noopener ugc nofollow" target="_blank"> COCO数据集</a>上训练的50层ResNet，底层模型加载来自<code class="du lh li lj lk b">models/resnet50_coco_best_v2.0.1.h5</code>的权重。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mk"><img src="../Images/f2e22b2fa46abd80422a79084b84a0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OWNGkR_LCYB-A048.png"/></div></div></figure><h1 id="69ba" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">提取模块—密集卷积网络</h1><p id="eff6" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">使用RetinaNet模型检测到的对象的特征是使用<a class="ae js" href="https://arxiv.org/abs/1608.06993" rel="noopener ugc nofollow" target="_blank"> DenseNet </a> CNN的倒数第二层提取的。</p><p id="1a00" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">PyTorch用于基于<code class="du lh li lj lk b">Densenet201</code>架构从<code class="du lh li lj lk b">models/VeRI_densenet_ft50.pth</code>加载权重，使用<a class="ae js" href="https://github.com/VehicleReId/VeRidataset" rel="noopener ugc nofollow" target="_blank"> VeRI数据集</a>进行调整。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ml"><img src="../Images/0e4b8ad97e25f4cb4f0d015b1dbd9c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pi5wYz5iU5bbdTI1.png"/></div></div></figure><h1 id="105d" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">匹配模块—欧几里德距离度量</h1><p id="97e7" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">正如本系列前面所讨论的，理想的匹配和ReID算法应该基于<a class="ae js" rel="noopener" href="/@samdbrice/de5842a75045">航迹间排序</a>。Match模块演示了一个基于两点间最小<a class="ae js" href="https://en.wikipedia.org/wiki/Euclidean_distance#Higher_dimensions" rel="noopener ugc nofollow" target="_blank">欧几里德距离</a>的基本匹配实现。</p><p id="3f22" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">提取到<code class="du lh li lj lk b">features.json</code>中的特征表示基于<em class="mm"> n </em>维欧几里得空间中笛卡尔坐标的点，距离公式为:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mn"><img src="../Images/d672fb303bfa913ceb66ad0e8933f046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/0*-dJBPHlT1EWOly4Z.png"/></div></figure><p id="2b19" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">匹配器计算从基础帧内的所有对象到目标帧列表内的所有对象的距离。它还将每个基础对象及其候选对象的图像分组到一个名为<code class="du lh li lj lk b">matches</code>的新目录中。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mo"><img src="../Images/468a438e4014463e2b755dd1dd37d229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cvXOwt36ihczQh81zer5NA.png"/></div></div></figure><h1 id="87dc" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">原始镜头、检测和特征数据</h1><p id="d7d7" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">代码库包含在<code class="du lh li lj lk b">data</code>目录中压缩的预处理数据的一个小子集。</p><pre class="ju jv jw jx fd lz lk ma mb aw mc bi"><span id="a692" class="md kl hh lk b fi me mf l mg mh">data<br/>├── [8.6M]  253-134-S.zip<br/>├── [ 20M]  689-640-S.zip<br/>├── [ 43M]  731-679-N.zip<br/>├── [ 51M]  732-680-N.zip<br/>├── [8.1M]  733-681-N.zip<br/>└── [ 22M]  735-683-N.zip</span></pre><p id="4b69" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">每个FDR摄像机的完整数据集，包括检测和特征提取(大约10 GB)存储在以下外部存储库中:</p><ul class=""><li id="fcd6" class="ll lm hh iy b iz ja jc jd jf ln jj lo jn lp jr lq lr ls lt bi translated">https://github.com/samdbrice/cctview-data-frames-735-683-N</li><li id="5789" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated"><a class="ae js" href="https://github.com/samdbrice/cctview-data-frames--733-681-N" rel="noopener ugc nofollow" target="_blank">https://github.com/samdbrice/cctview-data-frames-733-681-N</a></li><li id="790d" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated">https://github.com/samdbrice/cctview-data-frames-732-680-N<a class="ae js" href="https://github.com/samdbrice/cctview-data-frames--732-680-N" rel="noopener ugc nofollow" target="_blank"/></li><li id="515a" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated">https://github.com/samdbrice/cctview-data-frames-731-679-N</li><li id="4a96" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated">https://github.com/samdbrice/cctview-data-frames-689-640-S</li><li id="92f8" class="ll lm hh iy b iz lu jc lv jf lw jj lx jn ly jr lq lr ls lt bi translated">https://github.com/samdbrice/cctview-data-frames-253-134S</li></ul><h1 id="56a4" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">原始闭路电视录像</h1><p id="3c91" class="pw-post-body-paragraph iw ix hh iy b iz lc ii jb jc ld il je jf le jh ji jj lf jl jm jn lg jp jq jr ha bi translated">储存库【github.com/samdbrice/cctview-data-videos T21】—每小时分别包含从2020年5月5日星期二下午1点到午夜的原始每小时闭路电视镜头。</p></div><div class="ab cl mp mq go mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ha hb hc hd he"><h2 id="499f" class="md kl hh bd km mw mx my kq mz na nb ku jf nc nd kw jj ne nf ky jn ng nh la ni bi translated"><a class="ae js" href="https://samdbrice.medium.com/fri-nov-6-2020-ae15374138b1" rel="noopener">目录</a></h2><h2 id="b67c" class="md kl hh bd km mw mx my kq mz na nb ku jf nc nd kw jj ne nf ky jn ng nh la ni bi translated">上一篇:<a class="ae js" rel="noopener" href="/@samdbrice/95a9cdc0ce90">总结</a></h2></div></div>    
</body>
</html>