<html>
<head>
<title>Handling Missing Values with Mean &amp; Median Imputation in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用R中的均值和中值插补处理缺失值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/handling-missing-values-with-mean-median-imputation-in-r-d3389399a21e?source=collection_archive---------7-----------------------#2021-06-26">https://medium.com/analytics-vidhya/handling-missing-values-with-mean-median-imputation-in-r-d3389399a21e?source=collection_archive---------7-----------------------#2021-06-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2668db9fa7a8e8b25735fe9a0aa265e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rDyfqpnPIOuwsSCO"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">费利克斯·伯杰在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c6b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">想象一下，你必须穿过那条河。你会游过去吗？或者你会走桥吗？我给你1分钟时间选择。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="897d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，时间到了！</p><p id="d95f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你不是像我一样的专业游泳运动员，我们都同意到达我们命运的最好方式是通过这座桥。但是你可能注意到了，有一些漏洞威胁着我们的安全。</p><p id="a907" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是机器学习算法的工作方式。就像一座桥，它们把你从A点(观察)带到B点(预测)。然而，当有<strong class="ix hj">缺失值</strong>时，它们类似于你前进道路上的缺口，不允许你前进。</p><p id="d07f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">前面的比喻不仅仅是比喻，它是真实的！算法内部工作的方式是通过向量。就像一部老电影中的银行金库，当没有存储任何值时，就会出现严重的问题…</p><h1 id="80b3" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">缺失值为什么存在？</h1><p id="d579" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">这个问题有很多原因。但是，它们可以分为三种类型:</p><p id="27de" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">完全随机失踪(MCAR) </strong></p><p id="b7fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">顾名思义，任何要素的缺失值概率都是一样的。换句话说，第35行第A列的缺失值和第11列第1，385行的缺失值之间没有关系。他们是<strong class="ix hj">独立</strong>。</p><p id="350b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一些例子是API的错误，由于不良样品而丢失的实验室值，没有投票的公民的随机子集，等等。</p><p id="a99e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">随机失踪(3月)</strong></p><p id="2adc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与前面的不同，缺失值与数据集中的某些要素之间存在联系。</p><p id="f882" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，在一项调查中，一些女性可能更喜欢跳过关于她体重的问题(特征)。</p><p id="6265" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">非随机缺失(MNAR) </strong></p><p id="926e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，当任何因素导致数据缺失时，就会出现这种分类。例如，对于一项社会经济学研究，低收入和高收入人群很可能不会填写调查。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="628b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">既然你已经熟悉了这个话题，你认为哪一个适用于我们想要跨越的可怕的桥？</p><h1 id="0567" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">理论够了。我们如何处理它们？</h1><p id="c5c6" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">答案很简单。<strong class="ix hj">插补</strong>。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/4319fc13ed69cfd4501ac661e5f3a62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kr1zRbM2YTnX2Hi4"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Zach Lezniewicz 在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0bef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我知道。这座桥不一样了。但逻辑是！</p><p id="e20c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如这个人所做的，我们可以<strong class="ix hj">使用对我们有利的类似价值观</strong>来实现我们的目标。对于我们假设的情况，我们可以<strong class="ix hj">重用任何以前的桌子</strong>来“填补空白”并达到我们的目的。在机器学习中，我们可以通过<strong class="ix hj">进行一些统计测量</strong>来复制这个动作，你可能知道并填充缺失的值。</p><p id="2794" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是一些最常用的方法:</p><ul class=""><li id="4901" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js ln lo lp lq bi translated">平均</li><li id="2939" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">中位数</li><li id="2878" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">方式</li><li id="05ab" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">最小值或最大值</li><li id="d95b" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">KNN</li><li id="ebec" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">回归</li></ul><p id="5932" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇介绍性文章中，我们将讨论均值和中值方法。</p><h1 id="f978" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">让我们看一个代码示例</h1><p id="60ae" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在下面的例子中，我们将使用Kaggle竞赛中的<a class="ae iu" href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/overview" rel="noopener ugc nofollow" target="_blank">房价</a>数据集。</p><p id="6202" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们导入dplyr和ggplot2库，分别用于数据分析和可视化。此外，我们导入数据集。对于这个例子，我们将使用train_HP数据帧。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/7b72eb129146e5d72badc5d0077c5db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8SUQ9dEKb9lgKASHTPduPw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图1:导入库和数据集。</figcaption></figure><p id="2d30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的第一步将是<strong class="ix hj">识别带有缺失值的特性</strong>。为此，我们用<em class="lx"> complete.cases </em>函数创建了colsNa向量。注意感叹号颠倒了它的主要用途。根据结果，有19个特征符合该条件。</p><p id="903d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将有助于我们创建仅包含缺失值要素的不完整数据数据框。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/2409ea5d721905ada8b54029a0223751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRjEgyMwV4im8uxn5piabQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图2:识别具有缺失值的要素。</figcaption></figure><p id="6c8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的第二步将是<strong class="ix hj">通过一个阈值划分我们的缺失值。</strong>为了给每个特性分配一个值，我们通过应用功能计算了<strong class="ix hj">平均值</strong>。请注意，参数是每列中缺失值的数量(is.na函数)。</p><p id="0b5b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步是用它创建一个数据框。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/3ff3e82f6e37b5e149104708de205de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2Aos2M-iDCr8qp7ygvryQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图3:为每个特征设置缺失值的比例。</figcaption></figure><p id="8caa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，有些变量缺失值的比例很高。在移除这些变量之前，您应该始终确保它们不会对模型产生影响。在这种情况下，我们将把它们排除在外。</p><p id="0ec6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是时候设定我们的门槛了。通常将其设置为5%,但是您可以使用适合您需求的值。由此产生的数据框架是我们应该进行插补的值。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/78a98759fc8542b6b9c589849979b19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUwKji_-sTgTS4DUIHXC4Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图4:设置5%的阈值和最终数据帧。</figcaption></figure><p id="cbce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个条目中，我们将只使用一个变量。这将是非常正面的。所以我们用均值(第一条语句)、中值(第二条语句)代替所有缺失值，并进行比较。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/a3e13b08d5b2fa8600064797eddf3c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGciMouw3NiwrXpvcUMmdA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图5:均值和中值插补的比较。</figcaption></figure><p id="a787" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你看到结果了吗？平均值是70.04996，而中位数是69。让我们用图表来检查一下。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/3f0023b7b18ab70b146f33b96b5cd033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hy4hswyZdQj67O6PKdTAA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图6:平均值和中位数插补的折线图。</figcaption></figure><p id="ed4f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好吧，很难区分。但是这个想法是，这两种估算方法帮助我们填补了开始时的空白。</p><p id="3387" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，以前似乎是“正态分布”的情况，现在已经不是了。因此，您应该选择好工作方法，以便尽可能保持数据正常。</p><h1 id="ded8" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">利弊</h1><p id="5ed9" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated"><strong class="ix hj">优点</strong></p><ul class=""><li id="6665" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js ln lo lp lq bi translated">使用简单快捷</li></ul><p id="b66c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">缺点</strong></p><ul class=""><li id="944b" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js ln lo lp lq bi translated">扭曲了分布</li></ul><h1 id="66c2" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">最后</h1><p id="7ab5" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">万岁！我们通过裂缝桥过河:)</p><p id="0dbf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">总结一下:机器学习是把你从A点带到b点的桥梁。然而，有时这些桥梁充满了缺口。或者用我们的行话来说，缺失的价值观。</p><p id="ac75" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了“填补这些空白”,你应该利用你所知道的数据。怎么会？通过我们都知道的统计工具，比如均值、中位数、众数、回归、KNN等。</p><p id="6d9a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇博文中，我们使用了均值和中位数插补方法。正如我们注意到的，它实现起来非常快速和容易，但有时它会扭曲我们的数据分布。所以一定要小心行事。</p><p id="38fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">朋友的建议:</strong>尽可能多的尝试方法。这就像用木头、金属、树叶、藤蔓等来填补这些空隙。最终你会找到最适合你要过桥的方法。</p></div></div>    
</body>
</html>