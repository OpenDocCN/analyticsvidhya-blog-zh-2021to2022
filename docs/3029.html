<html>
<head>
<title>Best practices to handle FAQ’s and Chitchat in a chatbot powered by Rasa</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Rasa支持的聊天机器人中处理常见问题和聊天的最佳实践</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/best-practices-to-handle-faqs-and-chitchat-in-a-chatbot-powered-by-rasa-68de54f55ac7?source=collection_archive---------6-----------------------#2021-05-30">https://medium.com/analytics-vidhya/best-practices-to-handle-faqs-and-chitchat-in-a-chatbot-powered-by-rasa-68de54f55ac7?source=collection_archive---------6-----------------------#2021-05-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/054cf516cdd5e928b0477c66681511ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3L3wCrFOF6-ZUTQv"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">由<a class="ae it" href="https://unsplash.com/@lvnatikk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">百合银行</a>在<a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="b3f6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi js translated"><span class="l jt ju jv bm jw jx jy jz ka di">在</span>我制作量产级聊天机器人系列的第三件事。<br/>今天，我们将讨论在处理<br/>常见问题和闲聊(非正式问题)时要采用的<strong class="iw hi">最佳实践</strong>，如果你还没有看完前两部分，是的。也请看看它们。</p><p id="f850" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">1.你的第一个人工智能聊天机器人只有两行:<a class="ae it" rel="noopener" href="/analytics-vidhya/rasa-chat-bot-voyage-1-a73b6e8e4947">https://medium . com/analytics-vid hya/rasa-chat-bot-voyage-1-a 73 b 6 e 8 e 4947</a></p><p id="db92" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">2.什么是Rasa以及它是如何工作的:<a class="ae it" rel="noopener" href="/analytics-vidhya/rasa-chatbot-voyage-2-198e633e8c0e">https://medium . com/analytics-vid hya/Rasa-chatbot-voyage-2-198 e 633 E8 c0e</a></p><blockquote class="kb kc kd"><p id="b98f" class="iu iv ke iw b ix iy iz ja jb jc jd je kf jg jh ji kg jk jl jm kh jo jp jq jr ha bi translated">常见问题和聊天是聊天机器人生命周期中的特例。<br/> <strong class="iw hi">你的助手会给出一组固定的回答。</strong> <br/>无论之前在对话中发生了什么<br/>或<br/>你都可以说<br/> <strong class="iw hi"> FAQ和Chitchats是那些总是有固定答案的问题。</strong> <br/>如下例所示:-</p></blockquote><figure class="kj kk kl km fd ii er es paragraph-image"><div class="er es ki"><img src="../Images/342be3fed5c3109c500c96696bb208fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*IodpFS4Ez8GU5axKA0r2pQ.png"/></div></figure><h1 id="51bd" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">如何在聊天机器人中定义常见问题和聊天的分步指南:-</h1><h2 id="5d37" class="ll ko hh bd kp lm ln lo kt lp lq lr kx jf ls lt lb jj lu lv lf jn lw lx lj ly bi translated">1.更新配置文件</h2><p id="e9dc" class="pw-post-body-paragraph iu iv hh iw b ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn md jp jq jr ha bi translated">对于我们的常见问题，我们希望我们的聊天机器人用一组固定的答案来回答。所以为了处理这件事，Rasa有一个叫做<strong class="iw hi">的规则。</strong>要使用规则，那么您需要将<a class="ae it" href="https://rasa.com/docs/rasa/policies#rule-policy" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi"> RulePolicy </strong> </a>添加到您的配置文件中的策略:-</p><figure class="kj kk kl km fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es me"><img src="../Images/0cb0a7cabfe9a1cb5fb126cd65142ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAa9I3WHLPsyCSODdRbd7Q.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">配置文件中的规则策略</figcaption></figure><p id="3c2b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，将NLU管道中的<strong class="iw hi"> ResponseSelector </strong>包含在配置文件中。ResponseSelector需要一个特征和意图分类器(这里是DIETClassifier)才能工作。因此，它应该位于管道中的这些组件之后，例如:</p><figure class="kj kk kl km fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mf"><img src="../Images/8cd854665b1e7a0511f3fe3498c9e14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46C4vCCFL3VlUFxTcRpPvg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">常见问题解答-检索意图</figcaption></figure><p id="0663" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">默认情况下，Rasa只会做出一个检索意图。要分别检索FAQ和chitchat的响应，请使用多个ResponseSelector组件并指定<code class="du mg mh mi mj b">retrieval_intent</code>键:</p><figure class="kj kk kl km fd ii er es paragraph-image"><div class="er es mk"><img src="../Images/a29162ef2f67e6c8472dd7a28c08c89f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*6V7mLxN1gdC6zyieFps-Vw.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">检索意图</figcaption></figure><blockquote class="kb kc kd"><p id="b095" class="iu iv ke iw b ix iy iz ja jb jc jd je kf jg jh ji kg jk jl jm kh jo jp jq jr ha bi translated">现在假设你的网站有500个不同的FAQ问题，而不是写500个意图。我们将把它们分成50个一组。<br/>现在，为了处理前50个常见问题，我们将使用单动作，即<strong class="iw hi"> utter_faq。</strong></p><p id="c5e4" class="iu iv ke iw b ix iy iz ja jb jc jd je kf jg jh ji kg jk jl jm kh jo jp jq jr ha bi translated">所以用一个单一的规则通过把它们分组在一个单一的<a class="ae it" href="https://rasa.com/docs/rasa/glossary#retrieval-intent" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi">下检索意图</strong> </a>称为例如<strong class="iw hi"> faq </strong>我们的工作就完成了。继续这样下去，我们将不得不为500个常见问题编写10条规则。</p></blockquote><h2 id="370a" class="ll ko hh bd kp lm ln lo kt lp lq lr kx jf ls lt lb jj lu lv lf jn lw lx lj ly bi translated">2.定义规则</h2><p id="9e1b" class="pw-post-body-paragraph iu iv hh iw b ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn md jp jq jr ha bi translated">您只需要为每个检索意图编写一个规则。然后，在该检索意图下分组的所有意图将以相同的方式处理。动作名称以<strong class="iw hi"> utter_ </strong>开始，以检索意图的名称结束。写下回答常见问题的规则:</p><figure class="kj kk kl km fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/4833c11377218b7fff6fdfada2945633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qb8phmw2ueAbIYlqqxgaEA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">两种检索意图的规则</figcaption></figure><p id="5c44" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">动作<code class="du mg mh mi mj b">utter_faq</code>和<code class="du mg mh mi mj b">utter_faq2</code>将使用ResponseSelector的预测来返回实际的响应消息。</p><h2 id="5050" class="ll ko hh bd kp lm ln lo kt lp lq lr kx jf ls lt lb jj lu lv lf jn lw lx lj ly bi translated">3.对NLU数据进行更改</h2><p id="5db2" class="pw-post-body-paragraph iu iv hh iw b ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn md jp jq jr ha bi translated">现在我们将为我们的检索目的添加NLU数据。<br/>定义检索意图的语法:- <br/> <strong class="iw hi"> &lt;意图&gt; / &lt;检索意图&gt; </strong></p><figure class="kj kk kl km fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mm"><img src="../Images/ae0d1d4d99905f2d95eec31a7465df59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPdRAhKFej3g_r9FGuCHZg.png"/></div></div></figure><p id="954e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在上图中，我们已经为每个<strong class="iw hi">检索意图定义了<strong class="iw hi"> 2检索</strong>。</strong></p><p id="10ae" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果有检索意图，请务必以这种方式更新<code class="du mg mh mi mj b">domain.yml</code></p><figure class="kj kk kl km fd ii er es paragraph-image"><div class="er es mn"><img src="../Images/1fd96b254bafae72724f174ad465db51.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*Ci0efQC3bqx6h28KTG2iqQ.png"/></div></figure><h2 id="cefb" class="ll ko hh bd kp lm ln lo kt lp lq lr kx jf ls lt lb jj lu lv lf jn lw lx lj ly bi translated">4.更新响应</h2><p id="2042" class="pw-post-body-paragraph iu iv hh iw b ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn md jp jq jr ha bi translated">在定义它们时，响应也遵循相同的约定。<br/>T3。<br/>下面我们定义了每个检索意图的2个检索的响应。</p><figure class="kj kk kl km fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/ad9a28171af63e355ad0573600e2a652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*scOjPZAKQuRz7mWJBys7Rg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">定义响应</figcaption></figure><p id="7c29" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在输入<code class="du mg mh mi mj b">rasa train</code>来训练你的模型，并用<code class="du mg mh mi mj b">rasa shell</code>和它对话</p><h2 id="a2b3" class="ll ko hh bd kp lm ln lo kt lp lq lr kx jf ls lt lb jj lu lv lf jn lw lx lj ly bi translated">完美你做了伟大的工作！</h2><figure class="kj kk kl km fd ii"><div class="bz dy l di"><div class="mp mq l"/></div></figure><blockquote class="mr"><p id="c9e2" class="ms mt hh bd mu mv mw mx my mz na jr dx translated">需要记住的要点</p></blockquote><ol class=""><li id="0c66" class="nb nc hh iw b ix nd jb ne jf nf jj ng jn nh jr ni nj nk nl bi translated">每次检索不要超过60-70次，因为这会降低您的分类信心(个人经验)。</li><li id="38aa" class="nb nc hh iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">总是在一个检索意图下定义多于或等于2个检索，否则您的响应选择器将不会训练</li><li id="69be" class="nb nc hh iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">确保你的配置文件中没有单独的规则策略，其他策略如<code class="du mg mh mi mj b">MemoizationPolicy</code>和<code class="du mg mh mi mj b">TEDPolicy</code>也包括在内。</li></ol><p id="318f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">代码链接:<a class="ae it" href="https://github.com/sahibpreetsingh12/travel-bot" rel="noopener ugc nofollow" target="_blank">https://github.com/sahibpreetsingh12/travel-bot</a></p><blockquote class="mr"><p id="980a" class="ms mt hh bd mu mv nr ns nt nu nv jr dx translated">希望你会喜欢我的作品</p><p id="83b3" class="ms mt hh bd mu mv nr ns nt nu nv jr dx translated">如果你鼓掌👏会很棒，但是</p><p id="9e17" class="ms mt hh bd mu mv nr ns nt nu nv jr dx translated">鼓掌、关注和分享的结合将会令人惊讶地令人敬畏🔥 🔥 🔥</p></blockquote></div></div>    
</body>
</html>