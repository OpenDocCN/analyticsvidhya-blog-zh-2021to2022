<html>
<head>
<title>Pandas Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫图书馆</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/beginners-guide-to-pandas-library-e51f748dc69c?source=collection_archive---------16-----------------------#2021-06-23">https://medium.com/analytics-vidhya/beginners-guide-to-pandas-library-e51f748dc69c?source=collection_archive---------16-----------------------#2021-06-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="13f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Pandas是最流行的python库之一，用于处理所有类型的数据。它由韦斯·麦金尼于2008年1月首次发布。熊猫图书馆是开源的，有一个庞大的社区支持它。它是用C和Cython编写的，这使得它非常快，并针对性能进行了优化，具有更简单的语法等高级语言的特性。</p><h2 id="20d8" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">为什么是熊猫？</h2><p id="83c1" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">pandas主要提供了两个特性，对于任何开发人员来说，学习这两个特性都是非常有吸引力的。其特点如下:它允许读取和处理各种文件格式的数据，如CSV、JSON、HTML、XML、MS Excel、SQL、HDF5等。因为它是一个拥有庞大社区的开源库，所以它提供了许多数据过滤、操作、合并、分组和可视化的方法。熊猫也有很多做统计分析的方法。</p><h2 id="cd34" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">安装熊猫</h2><p id="6a92" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">我们可以像安装任何其他python库一样安装pandas库。使用以下任何命令来安装pandas:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/95023d6a97feab16f8ee8dd896e99b09.png" data-original-src="https://miro.medium.com/v2/format:webp/1*VgYW-GwjV96kRCKBTv-xyQ.png"/></div></figure><p id="3a71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Anaconda用户可以使用以下命令:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/8cc8cd9096c57cd4d512787bb22145f3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*N7LA0sN3DDkV9DSwXM5pEw.png"/></div></figure><h2 id="4efa" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">进口熊猫</h2><p id="cc18" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">安装熊猫后，我们要做的第一件事就是导入。可以使用以下命令:</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="014c" class="jc jd hh kl b fi kp kq l kr ks">import pandas as pd</span></pre><p id="9a73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">熊猫可以作为任何东西进口，但最常见的是作为“pd”进口。</p><h2 id="0bc5" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">熊猫提供的数据结构</h2><p id="3e81" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">要掌握pandas库的基础知识，首先你需要熟悉它提供的两种数据结构。</p><ul class=""><li id="8973" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated">系列</li><li id="6497" class="kt ku hh ig b ih lc il ld ip le it lf ix lg jb ky kz la lb bi translated">数据帧</li></ul><h2 id="e2ea" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">系列</h2><p id="9ba6" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">系列基本上是存储数据序列的一维数组。存储在panda系列中的数据与称为索引的数据标签相关联。</p><p id="5fa7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们从定义我们自己的熊猫系列开始</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="a17f" class="jc jd hh kl b fi kp kq l kr ks">my_series = pd.Series([-2, 0, 2,4,6,8,10])<br/>my_series</span><span id="7c43" class="jc jd hh kl b fi lh kq l kr ks">0    -2<br/>1     0<br/>2     2<br/>3     4<br/>4     6<br/>5     8<br/>6    10<br/>dtype: int64</span></pre><p id="22eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们检查一下数据类型</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="fc5c" class="jc jd hh kl b fi kp kq l kr ks">type(my_series)</span><span id="1a52" class="jc jd hh kl b fi lh kq l kr ks">pandas.core.series.Series</span><span id="f82e" class="jc jd hh kl b fi lh kq l kr ks">print("Data values: ", my_series.values, "and data index: ", my_series.index)</span><span id="ea0f" class="jc jd hh kl b fi lh kq l kr ks">Data values:  [-2  0  2  4  6  8 10] and data index:  RangeIndex(start=0, stop=7, step=1)</span></pre><p id="8879" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于我们没有为这个系列提供任何索引，pandas默认分配了从0到N-1的索引，其中N是数据的长度。</p><p id="e324" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以将索引明确定义如下:</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="b1b9" class="jc jd hh kl b fi kp kq l kr ks">my_series2 = pd.Series([0,1,2,3,4,5,6], index=['a','b','c', True, True, 2, 3])</span></pre><p id="9a67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">系列的索引可以是任何数据类型。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="d580" class="jc jd hh kl b fi kp kq l kr ks">print("Data values: ", my_series2.values, "and data index: ", my_series2.index)</span><span id="e894" class="jc jd hh kl b fi lh kq l kr ks">Data values:  [0 1 2 3 4 5 6] and data index:  Index(['a', 'b', 'c', True, True, 2, 3], dtype='object')</span></pre><p id="60af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">索引可用于从系列中选择一个或一组数据。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="52e1" class="jc jd hh kl b fi kp kq l kr ks">my_series2['a']</span><span id="67a4" class="jc jd hh kl b fi lh kq l kr ks">0</span><span id="d048" class="jc jd hh kl b fi lh kq l kr ks">my_series2[True]</span><span id="7629" class="jc jd hh kl b fi lh kq l kr ks">True    3<br/>True    4<br/>dtype: int64</span></pre><p id="8d9b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择一组值时，必须提供索引列表</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="c9de" class="jc jd hh kl b fi kp kq l kr ks">my_series2[['b', True, 3]]</span><span id="c8c7" class="jc jd hh kl b fi lh kq l kr ks">b       1<br/>True    3<br/>True    4<br/>3       6<br/>dtype: int64</span></pre><h2 id="edb2" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">熊猫系列手术</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="8402" class="jc jd hh kl b fi kp kq l kr ks">numbers = pd.Series(range(10,20))<br/>numbers</span><span id="2a74" class="jc jd hh kl b fi lh kq l kr ks">0    10<br/>1    11<br/>2    12<br/>3    13<br/>4    14<br/>5    15<br/>6    16<br/>7    17<br/>8    18<br/>9    19<br/>dtype: int64</span></pre><h2 id="f9af" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数据过滤</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="362c" class="jc jd hh kl b fi kp kq l kr ks">numbers[numbers % 2 == 0]</span><span id="c264" class="jc jd hh kl b fi lh kq l kr ks">0    10<br/>2    12<br/>4    14<br/>6    16<br/>8    18<br/>dtype: int64</span></pre><h2 id="0f23" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">标量操作</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="c885" class="jc jd hh kl b fi kp kq l kr ks">numbers + 1, numbers *2</span><span id="b60a" class="jc jd hh kl b fi lh kq l kr ks">(0    11<br/> 1    12<br/> 2    13<br/> 3    14<br/> 4    15<br/> 5    16<br/> 6    17<br/> 7    18<br/> 8    19<br/> 9    20<br/> dtype: int64,<br/> 0    20<br/> 1    22<br/> 2    24<br/> 3    26<br/> 4    28<br/> 5    30<br/> 6    32<br/> 7    34<br/> 8    36<br/> 9    38<br/> dtype: int64)</span></pre><h2 id="4730" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数学和自定义函数</h2><p id="2361" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">熊猫支持NumPy库提供的许多方法</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="71f6" class="jc jd hh kl b fi kp kq l kr ks">import numpy as np   <br/>np.sin(numbers)</span><span id="0b76" class="jc jd hh kl b fi lh kq l kr ks">0   -0.544021<br/>1   -0.999990<br/>2   -0.536573<br/>3    0.420167<br/>4    0.990607<br/>5    0.650288<br/>6   -0.287903<br/>7   -0.961397<br/>8   -0.750987<br/>9    0.149877<br/>dtype: float64</span></pre><p id="ee1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以定义自己的函数并使用。pandas提供的“应用”方法来使用我们在pandas系列上的自定义功能</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="d0cc" class="jc jd hh kl b fi kp kq l kr ks">def power2(ds):<br/>    return ds * ds</span><span id="5f69" class="jc jd hh kl b fi lh kq l kr ks">numbers.apply(power2)</span><span id="29ae" class="jc jd hh kl b fi lh kq l kr ks">0    100<br/>1    121<br/>2    144<br/>3    169<br/>4    196<br/>5    225<br/>6    256<br/>7    289<br/>8    324<br/>9    361<br/>dtype: int64</span></pre><h2 id="ce0e" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">一些其他有用的功能</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="311d" class="jc jd hh kl b fi kp kq l kr ks">numbers['null'] = None  # Adding None value and index null to the existing series</span></pre><p id="c92b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">熊猫功能。isnull()和notnull()可用于查找序列中缺失的数据。</p><p id="5cba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是熊猫图书馆的另一个重要特征。熊猫使得处理缺失数据变得非常容易。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="889d" class="jc jd hh kl b fi kp kq l kr ks">numbers.isnull()</span><span id="9937" class="jc jd hh kl b fi lh kq l kr ks">0       False<br/>1       False<br/>2       False<br/>3       False<br/>4       False<br/>5       False<br/>6       False<br/>7       False<br/>8       False<br/>9       False<br/>null     True<br/>dtype: bool</span><span id="9165" class="jc jd hh kl b fi lh kq l kr ks">pd.notnull(numbers)</span><span id="023f" class="jc jd hh kl b fi lh kq l kr ks">0        True<br/>1        True<br/>2        True<br/>3        True<br/>4        True<br/>5        True<br/>6        True<br/>7        True<br/>8        True<br/>9        True<br/>null    False<br/>dtype: bool</span></pre><p id="4557" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">合并2个系列</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="f025" class="jc jd hh kl b fi kp kq l kr ks">alphabets = pd.Series(['a','b','c','d','e'])<br/>alphabets</span><span id="7473" class="jc jd hh kl b fi lh kq l kr ks">0    a<br/>1    b<br/>2    c<br/>3    d<br/>4    e<br/>dtype: object</span><span id="0c12" class="jc jd hh kl b fi lh kq l kr ks">joined = alphabets.append(numbers)<br/>joined</span><span id="8145" class="jc jd hh kl b fi lh kq l kr ks">0          a<br/>1          b<br/>2          c<br/>3          d<br/>4          e<br/>0         10<br/>1         11<br/>2         12<br/>3         13<br/>4         14<br/>5         15<br/>6         16<br/>7         17<br/>8         18<br/>9         19<br/>null    None<br/>dtype: object</span><span id="9bc7" class="jc jd hh kl b fi lh kq l kr ks">joined2 = pd.concat([alphabets, numbers], axis = 0)  # axis = 0 is defined by default so not need to write it again</span><span id="9076" class="jc jd hh kl b fi lh kq l kr ks">joined2</span><span id="65bb" class="jc jd hh kl b fi lh kq l kr ks">0          a<br/>1          b<br/>2          c<br/>3          d<br/>4          e<br/>0         10<br/>1         11<br/>2         12<br/>3         13<br/>4         14<br/>5         15<br/>6         16<br/>7         17<br/>8         18<br/>9         19<br/>null    None<br/>dtype: object</span></pre><p id="5929" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以通过以上任何一种方法合并两个现有的数据序列来创建新的熊猫序列</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="caf7" class="jc jd hh kl b fi kp kq l kr ks">joined3 = pd.concat([alphabets, numbers], axis = 1)</span><span id="b5a5" class="jc jd hh kl b fi lh kq l kr ks">joined3</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/054734b01736c633856cd297a816a710.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HaztjS9LXZnwFvOO1mOGoA.png"/></div></figure><p id="973e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，使用axis = 1组合数据系列会产生与上述两种方法不同的结果。</p><p id="516f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这让我们想到了熊猫提供的另一种数据结构DataFrame</p><h2 id="b7e9" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数据帧</h2><p id="e8a6" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">DataFrame是表格中数据的矩形排列。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/ffd8207b395f70f8dff10ccb08f639dc.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xp88fAMgIbICme4ezTHFPg.png"/></div></figure><p id="69ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">来源:https://jovian.ai/aakashns/python-pandas-data-analysis</p><p id="2f22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">考虑数据框的另一种方式是将它视为一个python字典，其中有多个值与一个键相关联。存储在数据框中的数据可以是任何类型，如整数、字符串、布尔值等。</p><p id="8376" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们从创建数据框开始</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="7c4a" class="jc jd hh kl b fi kp kq l kr ks">df = pd.DataFrame({'country':['Nepal', 'Canada', 'Australia', 'India', 'USA'],<br/>                  'capital': ['Kathmandu', 'Ottawa','Canberra', 'New Delhi', 'Washington'],<br/>                  'population (in million)': [28.09, 37.09, 24.99, 1353, 328.2],<br/>                  'area (in sqkm)': [147516, 9.985*1e6, 7.692*1e6, 3.287*1e6, 9.834*1e6]})   # 1e6 is scientific notation for writing a million<br/><br/>df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/47298a1755ad50259ee2766b9a8b2f7d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aO_y08FUmdyESOzXBLYpgA.png"/></div></figure><p id="f11f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。info()方法帮助我们获得关于数据帧的一些基本信息。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="69ec" class="jc jd hh kl b fi kp kq l kr ks">df.info()</span><span id="250e" class="jc jd hh kl b fi lh kq l kr ks">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 5 entries, 0 to 4<br/>Data columns (total 4 columns):<br/> #   Column                   Non-Null Count  Dtype  <br/>---  ------                   --------------  -----  <br/> 0   country                  5 non-null      object <br/> 1   capital                  5 non-null      object <br/> 2   population (in million)  5 non-null      float64<br/> 3   area (in sqkm)           5 non-null      float64<br/>dtypes: float64(2), object(2)<br/>memory usage: 288.0+ bytes</span></pre><p id="9760" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。describe()方法提供关于数据帧的统计信息。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="7948" class="jc jd hh kl b fi kp kq l kr ks">df.describe()</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/8946614d33e6d76c8d8150201868e5e6.png" data-original-src="https://miro.medium.com/v2/format:webp/1*a5mz2bxsH6qPOCuyQNqn5w.png"/></div></figure><p id="643e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">计数:总和标准:标准偏差</p><h2 id="25cb" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">从数据帧中检索数据</h2><p id="2bee" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">这是您将使用熊猫处理的数据集的一个简单示例</p><p id="1a42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以使用这样的方法。头()和。tail()来分别从顶部和底部选择数据帧的5个元素。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="00e8" class="jc jd hh kl b fi kp kq l kr ks">df.head()</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/47298a1755ad50259ee2766b9a8b2f7d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aO_y08FUmdyESOzXBLYpgA.png"/></div></figure><p id="4940" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以提供一个参数n，其中n是要选择的行数。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="d9ec" class="jc jd hh kl b fi kp kq l kr ks">df.tail(3)</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/1c3e8968e981398c4004d52d688fe6d2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*A0UR5jTffVSXwe44Bs_dPw.png"/></div></figure><p id="1609" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">df.columns可用于获取数据帧的列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="1d2e" class="jc jd hh kl b fi kp kq l kr ks">df.columns</span><span id="cb8a" class="jc jd hh kl b fi lh kq l kr ks">Index(['country', 'capital', 'population (in million)', 'area (in sqkm)'], dtype='object')</span></pre><p id="1996" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以使用下面的两种方法从dataframe中检索一个或多个列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="9999" class="jc jd hh kl b fi kp kq l kr ks">df['country']</span><span id="a8e9" class="jc jd hh kl b fi lh kq l kr ks">0        Nepal<br/>1       Canada<br/>2    Australia<br/>3        India<br/>4          USA<br/>Name: country, dtype: object</span><span id="b059" class="jc jd hh kl b fi lh kq l kr ks">df.country</span><span id="c04a" class="jc jd hh kl b fi lh kq l kr ks">0        Nepal<br/>1       Canada<br/>2    Australia<br/>3        India<br/>4          USA<br/>Name: country, dtype: object</span></pre><p id="364c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据框的一列是一个系列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="3fa5" class="jc jd hh kl b fi kp kq l kr ks">type(df.country)</span><span id="9d25" class="jc jd hh kl b fi lh kq l kr ks">pandas.core.series.Series</span></pre><p id="039b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要以python列表的形式提供列名来检索多个列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="ea18" class="jc jd hh kl b fi kp kq l kr ks">df[['country', 'capital']]</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/4a26ec7cc1bd94b190f5624bef5bc6c8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5YyAQhDqM3B8mJ8ZLaIyMw.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="3e25" class="jc jd hh kl b fi kp kq l kr ks">type(df[['country', 'capital']])</span><span id="0c96" class="jc jd hh kl b fi lh kq l kr ks">pandas.core.frame.DataFrame</span></pre><p id="733e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。shape方法返回表格/数据帧的大小/形状。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="4f42" class="jc jd hh kl b fi kp kq l kr ks">df.shape</span><span id="2cc1" class="jc jd hh kl b fi lh kq l kr ks">(5, 4)</span></pre><p id="dc9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。sample()方法可用于从dataframe中检索数据的随机样本。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="ae76" class="jc jd hh kl b fi kp kq l kr ks">df.sample(3)</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/0a1e2a1c864db85d869442985e5c7e9a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*TDCBFdMVSWfOC9pMInTmrA.png"/></div></figure><p id="13ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。at方法可用于直接从特定的行和列中检索元素。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="81a8" class="jc jd hh kl b fi kp kq l kr ks">df.at[3, 'capital']</span><span id="a4b1" class="jc jd hh kl b fi lh kq l kr ks">'New Delhi'</span><span id="341e" class="jc jd hh kl b fi lh kq l kr ks">df.at[4, 'population (in million)']</span><span id="9300" class="jc jd hh kl b fi lh kq l kr ks">328.2</span></pre><p id="a590" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。loc方法可用于从数据帧中检索特定的行。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="815e" class="jc jd hh kl b fi kp kq l kr ks">df.loc[3]</span><span id="b442" class="jc jd hh kl b fi lh kq l kr ks">country                        India<br/>capital                    New Delhi<br/>population (in million)         1353<br/>area (in sqkm)             3.287e+06<br/>Name: 3, dtype: object</span><span id="d78c" class="jc jd hh kl b fi lh kq l kr ks">df.loc[0]</span><span id="5870" class="jc jd hh kl b fi lh kq l kr ks">country                        Nepal<br/>capital                    Kathmandu<br/>population (in million)        28.09<br/>area (in sqkm)                147516<br/>Name: 0, dtype: object</span></pre><p id="f091" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">访问多行；</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="cd5a" class="jc jd hh kl b fi kp kq l kr ks">df.loc[1:3]</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/428695047c993c2853d265cceb6f0c1c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*hAHsnqoXCPV7JD-A-4wy-w.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="fd14" class="jc jd hh kl b fi kp kq l kr ks">df.at[0, 'capital']</span><span id="9e7d" class="jc jd hh kl b fi lh kq l kr ks">'Kathmandu'</span><span id="816c" class="jc jd hh kl b fi lh kq l kr ks">new_df = df</span><span id="f786" class="jc jd hh kl b fi lh kq l kr ks">new_df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/47298a1755ad50259ee2766b9a8b2f7d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aO_y08FUmdyESOzXBLYpgA.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="78f9" class="jc jd hh kl b fi kp kq l kr ks">new_df.at[0, 'capital']</span><span id="7914" class="jc jd hh kl b fi lh kq l kr ks">'Kathmandu'</span><span id="e8bb" class="jc jd hh kl b fi lh kq l kr ks">new_df.at[0, 'capital'] = 'Paris'</span><span id="155c" class="jc jd hh kl b fi lh kq l kr ks">df.at[0, 'capital'], new_df.at[0, 'capital']</span><span id="4fce" class="jc jd hh kl b fi lh kq l kr ks">('Paris', 'Paris')</span></pre><p id="4181" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更改new_df数据框的元素会更改df数据框的元素。这是因为df和new_df都访问计算机内存中的相同数据。我们可以通过使用。copy()方法。这将在不同的内存地址中创建一个新的数据帧。因此，更改一个数据框中的值不会更改不同数据框中的值。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="635c" class="jc jd hh kl b fi kp kq l kr ks">df = new_df.copy()</span><span id="3a43" class="jc jd hh kl b fi lh kq l kr ks">df.at[0, 'capital'] = "Kathmandu"</span><span id="3d39" class="jc jd hh kl b fi lh kq l kr ks">df.at[0, 'capital'], new_df.at[0, 'capital']</span><span id="33ec" class="jc jd hh kl b fi lh kq l kr ks">('Kathmandu', 'Paris')</span></pre><h2 id="6e3f" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">对数据进行基本分析</h2><p id="712f" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">。sum()方法计算特定列中所有数据的总和。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="ff72" class="jc jd hh kl b fi kp kq l kr ks">df['population (in million)'].sum()</span><span id="fcf8" class="jc jd hh kl b fi lh kq l kr ks">1771.3700000000001</span><span id="df85" class="jc jd hh kl b fi lh kq l kr ks">df.sum()</span><span id="4e01" class="jc jd hh kl b fi lh kq l kr ks">country                                  NepalCanadaAustraliaIndiaUSA<br/>capital                    KathmanduOttawaCanberraNew DelhiWashington<br/>population (in million)                                       1771.37<br/>area (in sqkm)                                            3.09455e+07<br/>dtype: object</span></pre><p id="fb0c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">计算所有国家的总人口密度。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="c10f" class="jc jd hh kl b fi kp kq l kr ks">pop_dens = df['population (in million)'].sum()*1e6/df['area (in sqkm)'].sum()<br/>print("Population Density: " + str(round(pop_dens, 1)) + " per sqkm.")</span><span id="9f69" class="jc jd hh kl b fi lh kq l kr ks">Population Density: 57.2 per sqkm.</span></pre><p id="9bd0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在原始数据框中创建一个名为“人口密度”的新列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="c9f7" class="jc jd hh kl b fi kp kq l kr ks">df['population_density'] = df['population (in million)']*1e6/df['area (in sqkm)']</span><span id="dff4" class="jc jd hh kl b fi lh kq l kr ks">df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/171170bb107fc7b7946c89b399c2feb7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HWwJab3ocYlbOSHGXvS0Kg.png"/></div></figure><p id="a444" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">获取人口密度大于每平方公里100的国家。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="f820" class="jc jd hh kl b fi kp kq l kr ks">high_dens = df.population_density &gt; 100<br/>high_dens</span><span id="469a" class="jc jd hh kl b fi lh kq l kr ks">0     True<br/>1    False<br/>2    False<br/>3     True<br/>4    False<br/>Name: population_density, dtype: bool</span></pre><p id="b755" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">布尔值可用于选择数据帧中的行。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="9073" class="jc jd hh kl b fi kp kq l kr ks">df[high_dens]</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/3182d0d16b3032f801e0dc08959f4f7c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ZFA9MWpQvwZE7CMzJRHuDg.png"/></div></figure><p id="98d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">人口密度让我们更好地了解这个国家，而不是人口。所以我们可以去掉人口一栏。</p><p id="8a3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要从数据框中永久删除列，inplace需要为True。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="bdf7" class="jc jd hh kl b fi kp kq l kr ks">df.drop(columns=['population (in million)'], inplace=True)</span><span id="bd1c" class="jc jd hh kl b fi lh kq l kr ks">df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/603781ef4f929af55dc6498cf74948ff.png" data-original-src="https://miro.medium.com/v2/format:webp/1*65zpJ23dpxnbwcYCgpCRYQ.png"/></div></figure><h2 id="da1b" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">整理</h2><p id="a82b" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">。sort_values()方法可用于对数据帧中的值进行排序。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="ab4b" class="jc jd hh kl b fi kp kq l kr ks">df.sort_values('population_density', ascending=False)</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/e51859b10ac92f65cd46220b35ee8636.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xw0AA7q4UQfGzwK-SzZ9Eg.png"/></div></figure><h2 id="a92a" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">合并多个数据帧</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="2a49" class="jc jd hh kl b fi kp kq l kr ks">city_df = pd.DataFrame({<br/>    'country':['Nepal', 'Canada', 'Australia', 'India', 'USA'],<br/>    'city': ['Pokhara', 'Toronto', 'Sydney', 'Mumbai', 'Los Angeles']<br/>})<br/>city_df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/fc0847925b74bb2b5cfecac12d237ace.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uoRWdkhgx6hcD5Kvm_xtHw.png"/></div></figure><p id="ac63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要合并两个数据框，它们必须至少有一个公共列。“on”是连接两个数据框的列。在这种情况下，两个数据框都有一个共同的国家列。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="9857" class="jc jd hh kl b fi kp kq l kr ks">merged_df = df.merge(city_df, on='country')<br/>merged_df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/449858f7c141d6d40a16233f7383b78e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tGRpG8CjtjI4IiLysNx7dg.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="2ac2" class="jc jd hh kl b fi kp kq l kr ks">df = merged_df<br/>df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/449858f7c141d6d40a16233f7383b78e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tGRpG8CjtjI4IiLysNx7dg.png"/></div></figure><h2 id="809c" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">数据聚合和分组</h2><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="40cf" class="jc jd hh kl b fi kp kq l kr ks">continent_df = pd.DataFrame({<br/>    'country':['Nepal', 'Canada', 'Australia', 'India', 'USA'],<br/>    'continent': ['Asia', 'North America', 'Australia', 'Asia', 'North America']<br/>})<br/>continent_df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/fdc76bdb502eb61c6789376cae700e21.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LKLa-OynCbGYaolUchXgvQ.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="fdd5" class="jc jd hh kl b fi kp kq l kr ks">df = df.merge(continent_df, on='country')<br/>df</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/724da71a4e102c6baac46bf6320d7e7f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Ltqv3jtKV5pGPSkxTB-t1g.png"/></div></figure><p id="1462" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以使用groupby函数为每个洲创建一个组，选择我们希望聚合的列，并使用。sum()方法。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="ec8c" class="jc jd hh kl b fi kp kq l kr ks">df.groupby('continent').sum()</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/c20fcaa362e07db2edba36d1b2af77b5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*_UHbnIF1VQU5ry6CdOKPpw.png"/></div></figure><h2 id="4184" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">熊猫中的数据可视化</h2><p id="9968" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">Pandas提供了一个. plot()方法来绘制不同类型的图形，如线条、条形图、饼图、历史图、散点图、面积图等，这可以非常方便地绘制简单的图形，而无需导入任何其他库。</p><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="a501" class="jc jd hh kl b fi kp kq l kr ks">df.population_density.plot()</span><span id="0e5a" class="jc jd hh kl b fi lh kq l kr ks">&lt;AxesSubplot:&gt;</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/0e045de6d1cd8dec40696e7f202848e5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*mOX--oB-Y1VyTievd544Kg.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="f699" class="jc jd hh kl b fi kp kq l kr ks">df['area (in sqkm)'].plot(kind='pie', )</span><span id="7ad5" class="jc jd hh kl b fi lh kq l kr ks">&lt;AxesSubplot:ylabel='area (in sqkm)'&gt;</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/00144bbf605dde143dad2a86cbb97eaf.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7nSzKMbxkbaBQpP3Cd3Geg.png"/></div></figure><pre class="kc kd ke kf fd kk kl km kn aw ko bi"><span id="d61a" class="jc jd hh kl b fi kp kq l kr ks">df.population_density.plot(kind='bar')</span><span id="de93" class="jc jd hh kl b fi lh kq l kr ks">&lt;AxesSubplot:&gt;</span></pre><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/998af2d12752ef814d2b33750bd674bc.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ru4eGGVcoSbKvg9uY3xa7Q.png"/></div></figure><h2 id="63e3" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">在pandas中读写不同的文件格式</h2><p id="5fe8" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">通过使用pandas定义的方法，我们可以在pandas中读写不同的文件格式。read_csv('filepath ')和。to_csv('filepath ')。</p><p id="0c9e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例:</p><p id="7fd1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">my_csv_file = pd.read_csv('../my _ file . CSV’)</p><h2 id="701d" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">在windows中使用文件路径格式时，在引号开始前写“r”(小写r)。</h2><p id="20df" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">my _ CSV _ file = PD . read _ CSV(r ' d:\ Users \ aarya \ files \ my _ file . CSV ')</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="ab fe cl kh"><img src="../Images/834e403f4db51b472d36c9b5211e785c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*VAg87HHEJngWklIciYwFEQ.png"/></div></figure></div></div>    
</body>
</html>