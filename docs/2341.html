<html>
<head>
<title>Creating a Stock Market Analyser in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建股票市场分析器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-stock-market-analyser-in-python-c0284563b197?source=collection_archive---------7-----------------------#2021-04-19">https://medium.com/analytics-vidhya/creating-a-stock-market-analyser-in-python-c0284563b197?source=collection_archive---------7-----------------------#2021-04-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="25b5" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">我们将使用Streamlit。</h2></div><p id="37eb" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Streamlit可用于用Python创建简单易用的web应用程序。Streamlit使Web应用程序的开发和部署变得非常容易。查看官方的streamlit网站。</p><div class="js jt ez fb ju jv"><a href="https://streamlit.io/" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">Streamlit *构建和共享数据应用的最快方式</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">Streamlit可以在几分钟内将数据脚本转化为可共享的web应用程序。全部用Python。全部免费。没有前端经验…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">streamlit.io</p></div></div><div class="ke l"><div class="kf l kg kh ki ke kj kk jv"/></div></div></a></div><h1 id="1692" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">了解一些股票市场术语</h1><p id="e349" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">在我们开始在Streamlit上创建应用程序之前，我们将了解一些股票市场术语。根据Investopedia的说法，“股票市场指的是市场和交易所的集合，在这些市场和交易所中，公众持有的公司的股票的购买、出售和发行发生着常规的活动。”</p><p id="3186" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">阅读更多-</p><div class="js jt ez fb ju jv"><a href="https://www.investopedia.com/terms/s/stockmarket.asp" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">股票市场|投资媒体</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">股票市场指的是市场和交易所的集合，在这里进行定期的买卖和交易活动</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">www.investopedia.com</p></div></div><div class="ke l"><div class="li l kg kh ki ke kj kk jv"/></div></div></a></div><h2 id="a0ba" class="lj km hh bd kn lk ll lm kr ln lo lp kv jf lq lr kx jj ls lt kz jn lu lv lb lw bi translated">股票代码</h2><p id="1748" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">股票代码定义是股票报价方案中的一个股票项目。每个独特的代码由数字和字母或两者组成。例如，微软在纳斯达克被列为“MSFT”，而国际商业机器公司在纽约证券交易所被列为“IBM”。</p><figure class="ly lz ma mb fd mc er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es lx"><img src="../Images/3feb625daf2cd9cc3c2b4cd9067ed9c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BaqvgfhHaCpx9ToUJTwv8w.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">股票市场数据示例。</figcaption></figure><p id="0121" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">那么，高低指的是给定时间段内的最高价和最低价。开盘价和收盘价是股票在同一时期开始交易和结束交易的价格。成交量是交易活动的总量。调整后的价值是公司行为中的一个因素，如股息、股票分割和新股发行。</p><div class="js jt ez fb ju jv"><a href="https://analyzingalpha.com/open-high-low-close-stocks" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">什么是股票的高开低走？</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">在股票交易中，高点和低点是指给定时间段内的最高价和最低价。打开和关闭是…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">analyzingalpha.com</p></div></div><div class="ke l"><div class="mm l kg kh ki ke kj kk jv"/></div></div></a></div><h1 id="fb8a" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">移动平均线</h1><p id="d2b7" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">均线(MA)是技术分析中常用的股票指标。计算股票移动平均线的原因是通过创建一个不断更新的平均价格来帮助平滑特定时间段内的价格数据。</p><p id="b1a8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">简单移动平均线(SMA)是一种计算方法，采用过去特定天数内一组给定价格的算术平均值；例如，过去15天、30天、100天或200天。</p><div class="js jt ez fb ju jv"><a href="https://www.investopedia.com/terms/m/movingaverage.asp" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">移动平均(MA)定义</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">在统计学中，移动平均线是一种计算方法，用于通过创建一系列平均值来分析数据点</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">www.investopedia.com</p></div></div><div class="ke l"><div class="mn l kg kh ki ke kj kk jv"/></div></div></a></div><h1 id="239f" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">OHLC蜡烛棒图</h1><p id="3fdb" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">交易者使用蜡烛图来根据过去的模式确定可能的价格变动。烛台在交易时很有用，因为它们在交易者指定的时间内显示四个价格点(开盘价、收盘价、最高价和最低价)。</p><p id="eeaf" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">许多算法都基于蜡烛图中显示的相同价格信息。交易通常受情绪支配，这可以从蜡烛图中看出。</p><div class="js jt ez fb ju jv"><a href="https://www.investopedia.com/terms/o/ohlcchart.asp" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">OHLC海图的定义和用途</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">OHLC图是一种条形图，显示每个时期的开盘价、最高价、最低价和收盘价。OHLC图表是…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">www.investopedia.com</p></div></div><div class="ke l"><div class="mo l kg kh ki ke kj kk jv"/></div></div></a></div><h1 id="fe40" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">进入代码</h1><p id="bf03" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">首先，我们导入必要的库。一定要在. py文件中编写代码。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="90ff" class="lj km hh mq b fi mu mv l mw mx">import warnings<br/>warnings.filterwarnings('ignore')  # Hide warnings<br/>import datetime as dt<br/>import pandas as pd<br/>pd.core.common.is_list_like = pd.api.types.is_list_like<br/>import pandas_datareader.data as web<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="a6a0" class="lj km hh mq b fi my mv l mw mx">from PIL import Image<br/>import os</span><span id="8867" class="lj km hh mq b fi my mv l mw mx">from mpl_finance import candlestick_ohlc<br/>import matplotlib.dates as mdates<br/>import streamlit as st</span></pre><p id="2feb" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Pandas datareader将用于抓取数据。从mpl_finance，我们将使用蜡烛图。</p><p id="11b9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们将获取公司的股票代码，以及股票的开始日期和结束日期。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="cd6b" class="lj km hh mq b fi mu mv l mw mx">#title<br/>st.title('Stock Market App')<br/>'---------------------------------------------------------'<br/>#text<br/>st.write("Developed by Prateek Majumder")</span><span id="cbb8" class="lj km hh mq b fi my mv l mw mx">image = Image.open(os.path.join('STOCK.png'))<br/>st.image(image)</span><span id="50cc" class="lj km hh mq b fi my mv l mw mx">com = st.text_input("Enter the Stock Code of company","AAPL")</span><span id="d701" class="lj km hh mq b fi my mv l mw mx">'You Enterted the company code: ', com</span><span id="90b9" class="lj km hh mq b fi my mv l mw mx">st_date= st.text_input("Enter Starting date as YYYY-MM-DD", "2000-01-10")</span><span id="222a" class="lj km hh mq b fi my mv l mw mx">'You Enterted the starting date: ', st_date</span><span id="69e3" class="lj km hh mq b fi my mv l mw mx">end_date= st.text_input("Enter Ending date as YYYY-MM-DD", "2000-01-20")</span><span id="29b5" class="lj km hh mq b fi my mv l mw mx">'You Enterted the ending date: ', end_date</span></pre><p id="cba0" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们将使用pandas_datareader.data从Yahoo Finance收集股票市场数据。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="556f" class="lj km hh mq b fi mu mv l mw mx">df = web.DataReader(com, 'yahoo', st_date, end_date)  # Collects data<br/>df.reset_index(inplace=True)<br/>df.set_index("Date", inplace=True)</span></pre><p id="5586" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们将绘制一些从雅虎财经获得的数据。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="10d5" class="lj km hh mq b fi mu mv l mw mx">#title<br/>st.title('Stock Market Data')</span><span id="54a7" class="lj km hh mq b fi my mv l mw mx">'The Complete Stock Data as extracted from Yahoo Finance: '<br/>df</span><span id="1300" class="lj km hh mq b fi my mv l mw mx">'1. The Stock Open Values over time: '<br/>st.line_chart(df["Open"])</span><span id="899a" class="lj km hh mq b fi my mv l mw mx">'2. The Stock Close Values over time: '<br/>st.line_chart(df["Close"])</span></pre><p id="6883" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请注意，在代码中，我给出了AAPL(苹果)和样本日期，这些可以在应用程序GUI中修改。</p><figure class="ly lz ma mb fd mc er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mz"><img src="../Images/ba22597efb7fc11d2c9aa3794fd691e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IYobdGghZsiYhgphBhediQ.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">用于数据输入的GUI。</figcaption></figure><figure class="ly lz ma mb fd mc er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es na"><img src="../Images/449e1d516b5f594b5a2454ac3ac4fad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uScn6_wVc-S06GWW-V_mtA.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">数据来自雅虎财经。</figcaption></figure><p id="9fc0" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们编码显示移动平均线。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="d317" class="lj km hh mq b fi mu mv l mw mx">mov_avg= st.text_input("Enter number of days Moving Average:", "50")</span><span id="aa86" class="lj km hh mq b fi my mv l mw mx">'You Enterted the Moving Average: ', mov_avg</span><span id="ba98" class="lj km hh mq b fi my mv l mw mx">df["mov_avg_close"] = df['Close'].rolling(window=int(mov_avg),min_periods=0).mean()</span><span id="83a9" class="lj km hh mq b fi my mv l mw mx">'1. Plot of Stock Closing Value for '+ mov_avg+ " Days of Moving Average"<br/>'   Actual Closing Value also Present'<br/>st.line_chart(df[["mov_avg_close","Close"]])</span><span id="33a3" class="lj km hh mq b fi my mv l mw mx">df["mov_avg_open"] = df['Open'].rolling(window=int(mov_avg),min_periods=0).mean()</span><span id="c367" class="lj km hh mq b fi my mv l mw mx">'2. Plot of Stock Open Value for '+ mov_avg+ " Days of Moving Average"<br/>'   Actual Opening Value also Present'<br/>st.line_chart(df[["mov_avg_open","Open"]])</span></pre><p id="395a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它看起来有点像这样。</p><figure class="ly lz ma mb fd mc er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es nb"><img src="../Images/994f083e275fa066acf83efa98376c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gDoqzL9o2TnWYe1nj4V0pw.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">移动平均线。</figcaption></figure><p id="4ee9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们做OHLC蜡烛棒图的代码。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="f7b7" class="lj km hh mq b fi mu mv l mw mx">ohlc_day= st.text_input("Enter number of days for Resampling for OHLC CandleStick Chart", "50")</span><span id="6c75" class="lj km hh mq b fi my mv l mw mx"># Resample to get open-high-low-close (OHLC) on every n days of data<br/>df_ohlc = df.Close.resample(ohlc_day+'D').ohlc() <br/>df_volume = df.Volume.resample(ohlc_day+'D').sum()</span><span id="d17d" class="lj km hh mq b fi my mv l mw mx">df_ohlc.reset_index(inplace=True)<br/>df_ohlc.Date = df_ohlc.Date.map(mdates.date2num)</span><span id="f832" class="lj km hh mq b fi my mv l mw mx"># Create and visualize candlestick charts<br/>plt.figure(figsize=(8,6))</span><span id="a1a8" class="lj km hh mq b fi my mv l mw mx">'OHLC Candle Stick Graph for '+ ohlc_day+ " Days"</span><span id="1bdd" class="lj km hh mq b fi my mv l mw mx">ax1 = plt.subplot2grid((6,1), (0,0), rowspan=5, colspan=1)<br/>ax1.xaxis_date()<br/>candlestick_ohlc(ax1, df_ohlc.values, width=2, colorup='g')<br/>plt.xlabel('Time')<br/>plt.ylabel('Stock Candle Sticks')<br/>st.pyplot()</span></pre><p id="241f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">其他代码和图像可以添加到webapp中，以创建更好的体验和更好的理解。</p><p id="d12c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">运行streamlit应用程序。</p><pre class="ly lz ma mb fd mp mq mr ms aw mt bi"><span id="fb03" class="lj km hh mq b fi mu mv l mw mx">streamlit run [filename]</span></pre><p id="8eff" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">更多阅读:<a class="ae nc" href="https://docs.streamlit.io/en/stable/" rel="noopener ugc nofollow" target="_blank">https://docs.streamlit.io/en/stable/</a></p><h1 id="0109" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">在Heroku部署的应用程序:</h1><p id="63f8" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">该应用程序也可以部署为heroku上的实时应用程序。为此，我们需要添加—</p><p id="b87a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">procfile，requirements.txt，runtime.txt，setup.sh。</p><p id="9dd5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">更多阅读:【https://devcenter.heroku.com/articles/python-pip T2】</p><p id="9e70" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">在我的Github页面查看完整项目:</strong></p><div class="js jt ez fb ju jv"><a href="https://github.com/prateekmaj21/Stock-Market-Analyser" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">prateekma 21/股票市场分析器</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">使用流文学制作的项目。输入公司股票代码和开始和结束日期，从雅虎获得股票数据…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">github.com</p></div></div><div class="ke l"><div class="nd l kg kh ki ke kj kk jv"/></div></div></a></div><p id="d0bb" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">请查看实时部署的链接:</strong></p><div class="js jt ez fb ju jv"><a href="https://stock-market-analyser.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">细流</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">编辑描述</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">stock-market-analyser.herokuapp.com</p></div></div></div></a></div><p id="40d3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">请务必在Linkedin上联系我:</strong></p><div class="js jt ez fb ju jv"><a href="https://www.linkedin.com/in/prateek-majumder/" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hi fi z dy ka ea eb kb ed ef hg bi translated">Prateek Majumder -分析师- applex.in | LinkedIn</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">IEM加尔各答大学的本科生。我一直是微软学生合作伙伴计划的一部分，这是一个…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">www.linkedin.com</p></div></div><div class="ke l"><div class="ne l kg kh ki ke kj kk jv"/></div></div></a></div><h2 id="ed56" class="lj km hh bd kn lk ll lm kr ln lo lp kv jf lq lr kx jj ls lt kz jn lu lv lb lw bi translated">谢谢你。</h2></div></div>    
</body>
</html>