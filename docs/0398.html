<html>
<head>
<title>Cleaning the Google Playstore dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清理Google Playstore数据集</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/cleaning-the-google-playstore-dataset-235d9754b8d?source=collection_archive---------6-----------------------#2021-01-15">https://medium.com/analytics-vidhya/cleaning-the-google-playstore-dataset-235d9754b8d?source=collection_archive---------6-----------------------#2021-01-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1f782ed26710363f1852075a0709f435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ao6Mel0HewClGp8F1FDasg.png"/></div></div></figure><p id="51bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据清理和准备是任何人工智能项目中最关键的第一步。有证据表明，大多数数据科学家将高达<strong class="is hj"> 70% </strong>的大部分时间花在清理数据上。在这篇博文中，我将指导您完成Python中数据清理和预处理的最初步骤。</p><blockquote class="jo jp jq"><p id="33e5" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><em class="hi">数据集在底部链接</em></p></blockquote><h2 id="13df" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">导入库</h2><p id="8d08" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">我们需要做的第一步是导入所需的库。有很多可用的库，但是用于数据清理和分析的最流行和最重要的Python库是Numpy和Pandas。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="9a8a" class="jv jw hi la b fi le lf l lg lh"><em class="jr">import pandas as pd<br/>import numpy as np</em></span></pre><h2 id="c6cc" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">加载数据</h2><p id="d8dd" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">下载完数据集并将其命名为. csv文件后，您需要将其加载到pandas数据框架中进行浏览，并执行一些基本的清理任务，删除不需要的会降低数据处理速度的信息。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="e950" class="jv jw hi la b fi le lf l lg lh">data = pd.read_csv('../input/google-play-store-apps/googleplaystore.csv')</span></pre><h2 id="ef8a" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">探索数据并制作清单</h2><p id="01fc" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">现在您已经建立了数据，但是您仍然应该花一些时间来研究它，并理解每一列代表什么特性。这种数据集的手动审查对于避免数据分析和建模过程中的错误非常重要。</p><p id="0cfc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我在分析谷歌Playstore数据后创建的清单</p><ol class=""><li id="eab0" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">处理缺失值和“随设备变化”的数据。</li><li id="debc" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">从安装中删除字符并使其为数字。</li><li id="7d1c" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">从大小中删除“M”(兆字节)，并使其为数字。</li><li id="f123" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">从大小中删除“k”(千字节)，使其成为数字，然后除以1000。</li><li id="ee40" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">将评论转换为数字。</li><li id="6b7b" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">从价格中删除货币符号，将其改为数字</li><li id="b774" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">将“上次更新”日期转换为日期格式</li><li id="0c10" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">将当前版本号四舍五入到1位小数</li></ol><p id="94e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要清理数据集，您需要处理缺失值和分类特征，因为大多数机器学习模型的数学基础假设数据是数值型的，不包含缺失值。此外，如果您试图使用包含缺失值或非数值的数据来训练线性回归和逻辑回归等模型，scikit-learn库将返回错误。</p><h2 id="0aef" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">处理缺失值</h2><p id="4202" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">缺失数据可能是不干净数据最常见的特征。这些值通常采用NaN或None的形式。缺少值的原因有几个:有时缺少值是因为它们不存在，或者是因为数据收集不当。</p><p id="85ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">浏览所有列，我们发现有3列包含NA值[大小、评级和Android版本]。</p><p id="7a5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大多数没有评级的应用程序只有很少的安装，这可能是有意义的。如果你的安装量很低，人们还没有审查它。在数据清理过程中，我看到“大小”下面有“因设备而异”。我们将总共1695个“因设备而异”的应用程序转换为NA。这就解释了本专栏中的NA。</p><h2 id="8f8a" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">从安装中删除字符并使其成为数字</h2><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/7c019e76e2674da637b00c9cafc69cc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:162/format:webp/1*tfLtSREdLm1k8nKUIOGOTA.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">清洗前安装</figcaption></figure><ul class=""><li id="ad60" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">首先，我们使用python split方法从末尾移除“+”符号</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="1d8e" class="jv jw hi la b fi le lf l lg lh">data['installs_cleaned']=data['Installs'].apply(lambda <br/>x:x.split('+')[0])</span></pre><ul class=""><li id="726a" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">然后，我们可以看到每个数字之间都有'，'。我们需要把它去掉，使它数字化。我们通过使用lambda函数的replace方法来实现。</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="c7c3" class="jv jw hi la b fi le lf l lg lh">data['installs_cleaned']=data['installs_cleaned'].apply(lambda x:x.replace(',','')</span></pre><ul class=""><li id="76f4" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">浏览完数据后，我看到一个数据为“免费”的单元格。移除它，</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="695c" class="jv jw hi la b fi le lf l lg lh">data = data.drop(data[data.installs_cleaned == 'Free'].index)</span></pre><ul class=""><li id="7299" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">最后，使用内置的to_numeric方法将数据类型改为integer</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="342d" class="jv jw hi la b fi le lf l lg lh">data["installs_cleaned"] = pd.to_numeric(data["installs_cleaned"])</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/3772b2d36a72280aad7c2591f60de503.png" data-original-src="https://miro.medium.com/v2/resize:fit:286/format:webp/1*FuizSobF-YJBoqZxUZppqg.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">安装干净的(数据类型= int64)</figcaption></figure><h2 id="4611" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">解析大小</h2><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es md"><img src="../Images/dbd689e0a8a5c550513aabc8c1cc8332.png" data-original-src="https://miro.medium.com/v2/resize:fit:280/format:webp/1*BGfmaUInfOcD69S-NkVv0g.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">尺寸未清理</figcaption></figure><ul class=""><li id="03c4" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">首先，我们将使用lambda函数从末尾删除字符“M ”,将其替换为“”</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="b3d3" class="jv jw hi la b fi le lf l lg lh">data['size_cleaned']=data['Size'].apply(lambda x: x.replace('M',''))</span></pre><ul class=""><li id="e71f" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">那么移除具有size =的行因设备而异</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="d649" class="jv jw hi la b fi le lf l lg lh">data= data.drop(data[data.size_cleaned =='Varies with device'].index)</span></pre><ul class=""><li id="19cc" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">对于以kb为单位的数据，首先我们需要删除“k ”,然后转换为float，然后除以1000，使其成为mb格式。</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="b092" class="jv jw hi la b fi le lf l lg lh">ending = ['k']<br/>data['size_kb']=data['size_cleaned'].map(lambda x: x[-1:] in ending)<br/>data['size_cleaned']=data['size_cleaned'].apply(lambda x: x.replace('k',''))#Removes k<br/>data['size_cleaned']=pd.to_numeric(data['size_cleaned'])#Conversion to numeric<br/>data['size_cleaned']=data.apply(lambda x:x['size_cleaned']/1000 if x['size_kb']==1 else x.size_cleaned,axis=1)#Dividing by 1000</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es me"><img src="../Images/32f30f3d27a00d3ca3a95e3891b27c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:210/format:webp/1*lZKN5JSsQCQOnKgrTtpe-A.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">清洗尺寸</figcaption></figure><h2 id="b8a0" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">将评论转换为数字</h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="c706" class="jv jw hi la b fi le lf l lg lh">data.Reviews=pd.to_numeric(data.Reviews)</span></pre><h2 id="5587" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">解析价格</h2><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/1016e145329ce12f0d0c75b5b1047b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:174/format:webp/1*Oh7AIUJ0wrZMkNZwT2cE7A.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">解析前的价格</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="4173" class="jv jw hi la b fi le lf l lg lh">#Removing '$'<br/>data['Price'] = data['Price'].apply(lambda x:x.replace('$',''))<br/>#Converting to numeric                                                         data['Price'] = pd.to_numeric(data['Price'])</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/c23a53be3aaadc4ea4974eba47c7ebfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:260/format:webp/1*Rut6zl-sIc-fuH2smv-BuQ.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">解析价格</figcaption></figure><h2 id="77d3" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">日期格式化</h2><p id="ae9d" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">数据不一致的一个具体类型是日期格式不一致，例如同一列中的dd/mm/yy和mm/dd/yy。您的日期值可能不是正确的数据类型，这将不允许您有效地执行操作并从中获得洞察力。这一次，您可以使用datetime包来确定日期的类型。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/3a8a08fddcb8cdc6ca5af232d6210180.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*7NHGzLH46QI1kaTHa_R31g.png"/></div></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="320e" class="jv jw hi la b fi le lf l lg lh">data['Last Updated'] =  pd.to_datetime(data['Last Updated'])</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/6de4aef3b32615366e2f52d8685d22f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:306/format:webp/1*LuCKPu81N6I5pWear7_qPA.png"/></div></figure><h2 id="18f4" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">删除空值</h2><p id="6f7b" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">使用isnull()删除Rating中的空值。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="2a86" class="jv jw hi la b fi le lf l lg lh">data = data.drop(data[data.Rating.isnull()].index)</span></pre><h2 id="94c0" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">解析当前版本</h2><ul class=""><li id="735d" class="li lj hi is b it kq ix kr jb mj jf mk jj ml jn mb lo lp lq bi translated">首先，我们删除当前版本中的空值</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6fcb" class="jv jw hi la b fi le lf l lg lh">data = data.drop(data[data['Current Ver'].isnull()].index)</span></pre><ul class=""><li id="2dc8" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">在下一步中，我们删除值为“随数据变化”的行</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="913c" class="jv jw hi la b fi le lf l lg lh">data = data.drop(data[data['Current Ver']=='Varies with device'].index)</span></pre><ul class=""><li id="850d" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn mb lo lp lq bi translated">在最后一步中，我们将当前版本四舍五入到1位小数。</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="3f41" class="jv jw hi la b fi le lf l lg lh">data['Current Ver'] = data['Current Ver'].apply(lambda x:str(x).split('.',1)[0])</span></pre><h2 id="26ea" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">删除重复行</h2><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="08fe" class="jv jw hi la b fi le lf l lg lh">data.drop_duplicates(keep=False, inplace=True)</span></pre><h2 id="a5c9" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">保存到CSV</h2><p id="c86d" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">为了确保您仍然拥有原始数据，最好将工作流程中每个部分或阶段的最终输出存储在单独的csv文件中。这样，您将能够在数据处理流程中进行更改，而不必重新计算一切。</p><p id="7b25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们之前所做的，您可以使用pandas <code class="du mm mn mo la b">to_csv()</code>函数将数据帧存储为. csv文件。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="65ef" class="jv jw hi la b fi le lf l lg lh">data.to_csv('Playstore_data.csv')</span></pre><h2 id="3ca3" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">结论</h2><p id="7687" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">这些是处理大型数据集、为任何数据科学项目清理和准备数据所需的非常基本的步骤。有其他形式的数据清理方法可能比我的方法更好、更有效。更好更干净的数据胜过最好的算法。最后，在大量的数据争论之后，我们可以开始从数据中得出一些见解。是时候进行一些探索性的数据分析了！:)</p></div><div class="ab cl mp mq gp mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hb hc hd he hf"><p id="4d05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里找到原始的不洁数据<a class="ae mw" href="https://drive.google.com/file/d/1TXYxU_4afz2jg1AK2_G-s0lp_k3LlG9f/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">(来源:Kaggle)</a></p><p id="18a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有这里的干净数据<a class="ae mw" href="https://drive.google.com/file/d/1uNegC05RKA77ORdy4Yj_VcRm4euI2mYV/view?usp=sharing" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>