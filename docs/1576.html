<html>
<head>
<title>A Look at Folium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">看一看叶子</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-look-at-folium-bf1b4784ca5d?source=collection_archive---------5-----------------------#2021-03-08">https://medium.com/analytics-vidhya/a-look-at-folium-bf1b4784ca5d?source=collection_archive---------5-----------------------#2021-03-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0073" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Folium是一个功能丰富的库，用于用Python创建交互式地图，可视化地理空间数据。follow构建于leaflet.js之上，由于其语法和安装过程简单得多，同时具有所有相同的功能，因此经常被首选。下面我们将在创建芝加哥地图时探索一些特征。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/bd9614de5bd7eeb81ec9cc198c830cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*y_VljPBGfht4_tXY6wyrvA.jpeg"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">名词，一种薄的叶状结构，例如在一些岩石或大脑的小脑中。</figcaption></figure><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="bd24" class="jt ju hh jp b fi jv jw l jx jy">!pip install folium<br/>import folium<br/>from folium import plugins</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/e55ee18a3949ce98bd8b45b43e655ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kUZCT-uyVgpTXRhkjjuEA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">只是一张空白地图</figcaption></figure><p id="a01e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开始使用leav很容易，只需从pip安装和导入leav开始。也从叶进口插件，因为我们将需要一些额外的功能后第三方扩展。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="3d00" class="jt ju hh jp b fi jv jw l jx jy">Chicago = folium.Map(location=[41.878876, -87.635918],<br/>                     zoom_start = 13,<br/>                     control_scale=True)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ke"><img src="../Images/8dd259b31e00e835a903e8ec2194b216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8R2Z_r6o7ivCOy4kBupPQ.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">这个看起来更舒服</figcaption></figure><p id="d549" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建第一个地图所需的全部内容就是上面的代码片段，将十进制格式的坐标、缩放级别(越高越近)和control_scale作为True传递到地图中，以便覆盖图稍后能够正确运行。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="2a03" class="jt ju hh jp b fi jv jw l jx jy">Chicago = folium.Map(location=[41.878876, -87.635918],<br/>                     zoom_start = 13,<br/>                     control_scale = True,<br/>                     tiles = "OpenStreetMap")</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kf"><img src="../Images/6186564472d171dc44bd47c930503395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhG8qFW-TTg8SNGTqZHWOg.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">我了解到工具提示会在截图中消失</figcaption></figure><p id="8c9c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">切片是地图的样式，例如卫星视图或灰度。我们将在下面遇到更多样式的例子。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="5a14" class="jt ju hh jp b fi jv jw l jx jy">folium.Marker([41.878876, -87.635918], <br/>              popup="Aka Willis Tower", <br/>              tooltip='Sears Tower', <br/>              icon=folium.Icon(icon="cloud",<br/>                               color='green')<br/>             ).add_to(Chicago)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kg"><img src="../Images/3f7140f02290f845d5c281c8f880bf73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ovwa7Hl0SvDuhMzMmCCUfA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">绿色的西尔斯大厦，红色的比恩，紫色的林肯公园</figcaption></figure><p id="e2ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最基本的功能之一是创建一个标记，如上所示。当鼠标悬停在固定位置时，可以添加工具提示来显示信息，单击时弹出窗口将在气泡中显示信息。也有不同的图标和颜色内置的标记，以及创建自己的能力。记住不要错过。add_to()来指定要将标记添加到哪个地图。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="ce53" class="jt ju hh jp b fi jv jw l jx jy">folium.Circle(radius=100,<br/>              location=[41.882638554916284,<br/>                        -87.62330984352772],<br/>              popup="Aka Cloud Gate",<br/>              tooltip="The Bean",<br/>              color="red",<br/>              fill=True).add_to(Chicago)</span><span id="96f4" class="jt ju hh jp b fi kh jw l jx jy">folium.CircleMarker(location=[41.922854499259714,<br/>                              -87.64905956817513],<br/>                    radius=65,<br/>                    popup="Lincoln Park",<br/>                    color="orange",<br/>                    fill=True,<br/>                    fill_color="purple").add_to(Chicago)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ki"><img src="../Images/b938eeb524851da16f4dae508f64caa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKXqlHRUzASnORKrsYk_xg.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">他们什么时候又改名字了？</figcaption></figure><p id="bc60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">标准标记的两个补充是circlemarker和circle，这两个标记大部分相似，但有一些不同。Circlemarker更多地用作标准标记来指示地图上的小点，而circle则用于将注意力吸引到更大的区域。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="2bf3" class="jt ju hh jp b fi jv jw l jx jy">Chicago.add_child(folium.LatLngPopup())</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kj"><img src="../Images/008af3ac072fe9ec61f46b71e8621d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zai5Fl-Mh4qZPVlbQztfXw.png"/></div></div></figure><p id="0f78" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击地图的任何地方，LatLngPopup都会弹出光标当前所在的经纬度。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="3231" class="jt ju hh jp b fi jv jw l jx jy">Chicago.add_child(folium.ClickForMarker(popup="Marked Site"))</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kk"><img src="../Images/58e66b938dc281511fd7aad90e55633b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-eydbUuj32s9f3dXG5i4UA.png"/></div></div></figure><p id="07fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ClickForMarker是相当简单的，单击地图将会在该位置放置一个大头针。将它与LatLngPopup一起使用可能是；不经常使用，因为弹出窗口的效果覆盖了大头针，迫使你点击其他地方。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="8a00" class="jt ju hh jp b fi jv jw l jx jy">folium.raster_layers.TileLayer('Open Street Map').add_to(Chicago)<br/>folium.raster_layers.TileLayer('Stamen Terrain').add_to(Chicago)<br/>folium.raster_layers.TileLayer('Stamen Toner').add_to(Chicago)<br/>folium.raster_layers.TileLayer('Stamen Watercolor').add_to(Chicago)<br/>folium.raster_layers.TileLayer('CartoDB Positron').add_to(Chicago)<br/>folium.raster_layers.TileLayer('CartoDB Dark_Matter').add_to(Chicago)</span><span id="0f1e" class="jt ju hh jp b fi kh jw l jx jy">folium.LayerControl().add_to(Chicago)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kl"><img src="../Images/b6a45e76c554b25565351592d67a5c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Be_eB6Uxjw06_UZ5-Nq-Bg.png"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es km"><img src="../Images/fbd3d18922c6587f871cf5d77ab1fe5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*popiCEFsJpUP3o6SQi_yYQ.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">两种截然不同的风格</figcaption></figure><p id="3346" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里我们在地图上添加了一个额外的图层来放置一些交互式的GUI元素。每个图层都在下拉列表中添加一个条目，使您可以通过地图界面更轻松地更改地图样式。</p></div><div class="ab cl kn ko go kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ha hb hc hd he"><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="5e90" class="jt ju hh jp b fi jv jw l jx jy">minimap = plugins.MiniMap(toggle_display=True)<br/>Chicago.add_child(minimap)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ku"><img src="../Images/069a53d89804d16c0d43668bd1380bfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSlyRiXZFxQNwOdesQUboA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">就像一个游戏</figcaption></figure><p id="4984" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还可以添加一个小地图来显示更大的周围区域的微缩视图，这本身就是一种探索可视化的交互方式</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="7139" class="jt ju hh jp b fi jv jw l jx jy">plugins.Fullscreen(position='topright').add_to(Chicago)</span></pre><p id="6a7d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一个容易实现的功能是全屏模式，以最大化我们目前使用的狭窄观看空间的视图。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="1a67" class="jt ju hh jp b fi jv jw l jx jy">draw = plugins.Draw(export=True)<br/>draw.add_to(Chicago)<br/>display(Chicago)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kv"><img src="../Images/be0ab7f3201e6b57c57b11370d1ed316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWEa73MvTMn2pHfx6T_xGA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">可能有些过火了</figcaption></figure><p id="cadb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其中一个有趣的功能是draw插件，它允许你用点击线、多边形、拖动半径圆和矩形以及其他一些东西来注释地图。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="0b13" class="jt ju hh jp b fi jv jw l jx jy">zipmap = folium.Map(location=[41.878876, -87.635918],<br/>                     zoom_start = 10)</span><span id="bf43" class="jt ju hh jp b fi kh jw l jx jy">zipcodes = "<a class="ae kw" href="https://data.cityofchicago.org/api/geospatial/gdcf-axmw?method=export&amp;format=GeoJSON" rel="noopener ugc nofollow" target="_blank">https://data.cityofchicago.org/api/geospatial/gdcf-axmw?method=export&amp;format=GeoJSON</a>"</span><span id="b73a" class="jt ju hh jp b fi kh jw l jx jy">folium.GeoJson(zipcodes, name="Chicago Zipcodes").add_to(zipmap)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kx"><img src="../Images/6c73dda0677940af7bd959b1a4872527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2bY1EGlvGDNWBVMFekn0g.png"/></div></div></figure><p id="6a8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建辅助地图由于原始地图变得非常繁忙，我们导入伊利诺伊州提供的公开可用数据来绘制城市中每个邮政编码的边界。每个州通常以多种格式提供这些信息。geojson是leav接受的格式。访问data.cityofchicago.org获取更多空间数据，如县或地理边界。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="e1c9" class="jt ju hh jp b fi jv jw l jx jy">schoolmap = folium.Map(location=[41.878876, -87.635918],<br/>                     zoom_start = 13)</span><span id="e97c" class="jt ju hh jp b fi kh jw l jx jy">schools = "<a class="ae kw" href="https://data.cityofchicago.org/api/geospatial/2mts-wp7t?method=export&amp;format=GeoJSON" rel="noopener ugc nofollow" target="_blank">https://data.cityofchicago.org/api/geospatial/2mts-wp7t?method=export&amp;format=GeoJSON</a>"</span><span id="2b3f" class="jt ju hh jp b fi kh jw l jx jy">folium.GeoJson(schools, name="Chicago Public Schools").add_to(schoolmap)</span><span id="c9b4" class="jt ju hh jp b fi kh jw l jx jy">plugins.Fullscreen(position='topright').add_to(schoolmap)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/a6a80dbe8bf4059f34335017051d2732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*551WNKSZmqakb6bVPWDAew.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">这比我预料的要多</figcaption></figure><p id="b247" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，使用一个同样由芝加哥市提供的新数据集，我们可以在该市每所公立学校的位置添加一个标记。虽然这显示了每所学校在地图上的确切位置，但要一目了然地了解分布情况并不容易。为此，我们可以使用一个名为热图的插件，创建一个易于阅读的密度覆盖。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="993c" class="jt ju hh jp b fi jv jw l jx jy">import pandas as pd</span><span id="02fa" class="jt ju hh jp b fi kh jw l jx jy">schools_csv = pd.read_csv("Chicago_Public_Schools.csv")<br/>latitude    = schools_csv['Lat']<br/>longitude   = schools_csv['Long']</span><span id="59d0" class="jt ju hh jp b fi kh jw l jx jy">schoolheatmap = folium.Map(location=[41.878876,-87.635918],<br/>                     zoom_start = 10)</span><span id="a8a7" class="jt ju hh jp b fi kh jw l jx jy">folium.plugins.HeatMap(list(zip(latitude,<br/>                                longitude)),<br/>                       radius=30,<br/>                       blur=20).add_to(schoolheatmap)</span><span id="566e" class="jt ju hh jp b fi kh jw l jx jy">plugins.Fullscreen(position='topright').add_to(schoolheatmap)</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/1447a69f230c26eddad2886fda51d946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gxxrpfm_4krzLnIlSrmvg.png"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/65430f1d34698fa7116fb874d21187d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5j4k2ecZxkeXvhO2OEe5_w.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">相同的数据，不同的参数</figcaption></figure><p id="6d46" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">热图不能理解。geojson文件，我们将使用。csv版本托管在。geojson文件在同一个州政府网站。对于一个简单的热图，所需要的只是坐标。您经常需要试验热图的不同参数，以创建有意义的可视化效果。另一个注意事项是，当前版本的allow有一个已知的错误，不允许您禁用动态调整大小，因此必须将参数调整到所需的缩放级别。</p></div><div class="ab cl kn ko go kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ha hb hc hd he"><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="09a9" class="jt ju hh jp b fi jv jw l jx jy">Chicago.save(“Population-folium-map.html”)</span></pre><p id="acb9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，叶做一个比截图更好的，你可以保存你的地图。HTML格式。这允许地图的交互版本被共享，所以你所有的努力没有白费。</p><p id="e107" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请参考<a class="ae kw" href="https://data.cityofchicago.org/" rel="noopener ugc nofollow" target="_blank"> Chicago Data </a>了解所使用的数据集和更多信息，以及<a class="ae kw" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">flour</a>了解关于该库的完整文档。</p></div></div>    
</body>
</html>