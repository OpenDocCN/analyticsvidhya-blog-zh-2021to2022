<html>
<head>
<title>Explanatory Data Analysis and Creating a Predictive Model on Airport Traffic during COVID 19 Pandemic(March 2020-December 2020) using two different modelling techniques namely Baseline Model and ARIMA Model.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用两种不同的建模技术，即基线模型和ARIMA模型，对解释性数据进行分析，并创建COVID 19疫情期间(2020年3月-2020年12月)的机场交通预测模型。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/explanatory-data-analysis-and-creating-a-predictive-model-on-airport-traffic-during-covid-19-a01cb6aa193d?source=collection_archive---------3-----------------------#2021-05-26">https://medium.com/analytics-vidhya/explanatory-data-analysis-and-creating-a-predictive-model-on-airport-traffic-during-covid-19-a01cb6aa193d?source=collection_archive---------3-----------------------#2021-05-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="7b2e" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">导入报表</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="1efd" class="jl if hh jh b be jm jn l jo jp">%matplotlib inline<br/>import os<br/>import urllib<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>from pandas import ExcelWriter<br/>from pandas import ExcelFile<br/>import pandas as pd<br/>import numpy as np<br/>from sklearn.metrics import mean_squared_error<br/>from statsmodels.graphics.tsaplots import plot_acf, plot_pacf<br/>from statsmodels.tsa.arima_model import ARIMA<br/>from pmdarima.arima import ADFTest, auto_arima</span></pre><h1 id="75a1" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">获取和加载数据</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="69e4" class="jl if hh jh b be jm jn l jo jp">root = 'https://drive.google.com/drive/folders/1LWFC344Ng-M8JborpJ2qoeQ8vIkesYi2'<br/>    <br/>def fetch_data(ROOT=root):<br/>    urllib.request.urlretrieve(ROOT, 'covid_impact_on_airport_traffic.xlsx')</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="4757" class="jl if hh jh b be jm jn l jo jp">rootdir = 'C:/Users/TATAN/covid_impact_on_airport_traffic.xlsx'<br/><br/>def load_data(ROOTDIR=rootdir):<br/>    csv_path = ROOTDIR<br/>    return pd.read_excel(csv_path, encoding='cp1252', parse_dates=True)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="7097" class="jl if hh jh b be jm jn l jo jp">data = load_data()</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="d584" class="jl if hh jh b be jm jn l jo jp">data = data.sort_values(by="Date")</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="24e0" class="jl if hh jh b be jm jn l jo jp">data.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/0333258d82e16411c65320c5bfff5f89.png" data-original-src="https://miro.medium.com/v2/format:webp/1*DkKrJ7fpE768Qr4fnAFuqA.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="8e58" class="jl if hh jh b be jm jn l jo jp">data.tail()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/eeba08423ea362a6b67e025291cf8c07.png" data-original-src="https://miro.medium.com/v2/format:webp/1*c-ygYNujdzd-8lT4IQ29Lw.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="d9da" class="jl if hh jh b be jm jn l jo jp">data.shape</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="3bdd" class="jl if hh jh b be jm jn l jo jp">(7247, 11)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="bdcb" class="jl if hh jh b be jm jn l jo jp">grouping = data.groupby("Country").count()<br/>grouping</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/2067fb176dbdddacc8b9f8d11cbd8a57.png" data-original-src="https://miro.medium.com/v2/format:webp/1*G0KDnotHa3LNauYZ13bkLQ.png"/></div></figure><h1 id="d0b3" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">从数据中选择特征</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="5e68" class="jl if hh jh b be jm jn l jo jp">data = data.drop(['AggregationMethod', 'Version', 'ISO_3166_2', 'Geography', 'Centroid', 'State', 'AirportName', 'City'], <br/>                         axis=1)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="8a80" class="jl if hh jh b be jm jn l jo jp">data.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/76e879d0aacd33e54a72ca9971bfe83e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*g9SDbLW7e1RbAE001L59LQ.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="3acb" class="jl if hh jh b be jm jn l jo jp">data.describe()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/41c641553339faf1a137b81eabb96f23.png" data-original-src="https://miro.medium.com/v2/format:webp/1*KcCgeQP7eFRCrq-J64592w.png"/></div></figure><h1 id="ac76" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">数据可视化</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="0987" class="jl if hh jh b be jm jn l jo jp">groups = data.groupby('Country')<br/>aus_series = groups.get_group('Australia')<br/>canada_series = groups.get_group('Canada')<br/>chile_series = groups.get_group('Chile')<br/>us_series  = groups.get_group('United States of America (the)')<br/><br/>print(aus_series.shape, us_series.shape, chile_series.shape, canada_series.shape)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="b97d" class="jl if hh jh b be jm jn l jo jp">(257, 3) (4441, 3) (238, 3) (2311, 3)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="abcc" class="jl if hh jh b be jm jn l jo jp"># This is the mean variation of the PercentOfBaseline w.r.t each Country . <br/><br/>plt.figure(figsize=(8,5))<br/>sns.barplot('Country', 'PercentOfBaseline', hue='Country', data=data)<br/>plt.xticks(rotation=90)<br/>plt.legend(loc='upper right')</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="9d5b" class="jl if hh jh b be jm jn l jo jp">C:\Users\TATAN\anaconda3\lib\site-packages\seaborn\_decorators.py:43: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.<br/>  FutureWarning<br/><br/><br/><br/><br/><br/>&lt;matplotlib.legend.Legend at 0x2c2280fa08&gt;</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/d3e33cd7709ebdcffb90379e10883884.png" data-original-src="https://miro.medium.com/v2/format:webp/1*OSbPxrERGfQ7x9CYqwAljA.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="0715" class="jl if hh jh b be jm jn l jo jp"># Density plot of countries according to their PercentOfBaseline . <br/><br/>plt.figure(figsize=(8,5))<br/>sns.kdeplot(data=data, hue='Country', x='PercentOfBaseline', shade=True)<br/>plt.xticks(rotation=90)<br/>plt.legend(loc='upper right', title="Country", labels=['Canada', 'USA', 'Australia', 'Chile'])<br/>plt.show()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/89274e0fd619400653bbe4941655cc02.png" data-original-src="https://miro.medium.com/v2/format:webp/1*EEzOI26CyfCjEHZzdBThIA.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="8d67" class="jl if hh jh b be jm jn l jo jp"># Time series variation of Baseline Percentage of Australia .<br/><br/>aus_series.plot(x='Date')<br/><br/>canada_series.plot(x='Date')<br/><br/>chile_series.plot(x='Date')<br/><br/>us_series.plot(x='Date')</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="c7c9" class="jl if hh jh b be jm jn l jo jp">&lt;matplotlib.axes._subplots.AxesSubplot at 0x2c226c7f88&gt;</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/ef340dcf8869ca68a2823eddc4a3898d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YIrATx1-Xz2QW8IXro05_Q.png"/></div></figure><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/7ee800c01220bfa61f2f7d6174905853.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Rkr14m1F3TUsWlARi3Ehiw.png"/></div></figure><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/61913d5e3357fee7b1827fc4a7fa54a2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7BJ3gLj6iGVdA4DegCFN7g.png"/></div></figure><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/f2869187efc9638502a08a56f34bee0a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*UeFJGKdW5m9LIJklnFbU6Q.png"/></div></figure><h2 id="17d4" class="jv if hh bd ig jw jx jy ik jz ka kb io kc kd ke is kf kg kh iw ki kj kk ja kl bi translated">上述图的滚动平均将为我们提供一个无噪声的可视化</h2><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="53c8" class="jl if hh jh b be jm jn l jo jp"># USA's timeseries had some noise which is eliminated by using a rolling average plot . </span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="5dd8" class="jl if hh jh b be jm jn l jo jp"># Moving or rolling avg is the average of n days , 20 in our <br/># case , which is replaced with the first reading and so on.</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="6c5c" class="jl if hh jh b be jm jn l jo jp">us_avg = us_series.drop('Country', axis=1)<br/>us_avg = us_avg.set_index('Date')<br/>us_mean = us_avg.rolling(20).mean()<br/>us_mean = us_mean.PercentOfBaseline.fillna(us_mean.PercentOfBaseline.mean())<br/>us_mean.plot()</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="0052" class="jl if hh jh b be jm jn l jo jp">&lt;matplotlib.axes._subplots.AxesSubplot at 0x2c2288b948&gt;</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/37d6586327ff496e64fc222f68f677de.png" data-original-src="https://miro.medium.com/v2/format:webp/1*AfHvAwFAMu4tjmBUCzGz2w.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="28be" class="jl if hh jh b be jm jn l jo jp"># Canada's timeseries had some noise as well which is eliminated by using a rolling average plot again .  <br/><br/>canada_avg = canada_series.drop('Country', axis=1)<br/>canada_avg = canada_avg.set_index('Date')<br/>canada_mean = canada_avg.rolling(20).mean()<br/>canada_mean = canada_mean.PercentOfBaseline.fillna(canada_mean.PercentOfBaseline.mean())<br/>canada_mean.plot()</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="ec3a" class="jl if hh jh b be jm jn l jo jp">&lt;matplotlib.axes._subplots.AxesSubplot at 0x2c22950a08&gt;</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/bd66d45aaa02cbf419c7bb6b018487f5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*k2Bm0_CSSdhkqFW-iQWg4w.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="ea27" class="jl if hh jh b be jm jn l jo jp">chile_avg = chile_series.drop('Country', axis=1)<br/>chile_avg = chile_avg.set_index('Date')<br/>chile_avg.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/0dd1487a066dab40d7c14944be03b678.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pRIEOhWaqhQ3dtTGFSlMEQ.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="9610" class="jl if hh jh b be jm jn l jo jp">aus_avg = aus_series.drop('Country', axis=1)<br/>aus_avg = aus_avg.set_index('Date')<br/>aus_avg.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/982470175196bc7013e7e310a1ccb921.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oqHtk9pXfjeEsZggYxV6mw.png"/></div></figure><h1 id="45bd" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">数据建模——原始方法或基线方法</h1><p id="e1e6" class="pw-post-body-paragraph km kn hh ko b kp kq kr ks kt ku kv kw kc kx ky kz kf la lb lc ki ld le lf lg ha bi translated">这里我们假设第(t+1)天的产量受第(t)天产量的影响很大。</p><p id="081a" class="pw-post-body-paragraph km kn hh ko b kp lh kr ks kt li kv kw kc lj ky kz kf lk lb lc ki ll le lf lg ha bi translated">在这里，我们只是创建一个pandas系列，并将两个系列连接在一起，实际系列+预测系列，换句话说，这意味着在预测列中，特定日期的读数就是前一天实际列的读数。因此，第一个的预测列读数是NaN，这就是我们在将数据分为train和test时使用切片来删除该部分的原因。</p><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="332d" class="jl if hh jh b be jm jn l jo jp"># Australia <br/>aus_model = aus_series.drop('Country', axis=1)<br/>aus_model = aus_model.set_index('Date')<br/>aus_values = aus_model.values<br/>aus_values = aus_values.flatten()    # converting a 2D array to 1D array .<br/>aus_values = pd.Series(aus_values)<br/><br/># Canada<br/>canada_model = canada_series.drop('Country', axis=1)<br/>canada_model = canada_model.set_index('Date')<br/>canada_values = canada_model.values<br/>canada_values = canada_values.flatten()    # converting a 2D array to 1D array .<br/>canada_values = pd.Series(canada_values)<br/><br/># Chile<br/>chile_model = chile_series.drop('Country', axis=1)<br/>chile_model = chile_model.set_index('Date')<br/>chile_values = chile_model.values<br/>chile_values = chile_values.flatten()    # converting a 2D array to 1D array .<br/>chile_values = pd.Series(chile_values)<br/><br/># USA<br/>us_model = us_series.drop('Country', axis=1)<br/>us_model = us_model.set_index('Date')<br/>us_values = us_model.values<br/>us_values = us_values.flatten()    # converting a 2D array to 1D array .<br/>us_values = pd.Series(us_values)</span></pre><h2 id="56c5" class="jv if hh bd ig jw jx jy ik jz ka kb io kc kd ke is kf kg kh iw ki kj kk ja kl bi translated">训练和测试设备</h2><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="e9de" class="jl if hh jh b be jm jn l jo jp">us_pred = pd.concat([us_values, us_values.shift(1)], axis=1)<br/>us_pred.columns = ('Actual', 'Predicted')<br/><br/>aus_pred = pd.concat([aus_values, aus_values.shift(1)], axis=1)<br/>aus_pred.columns = ('Actual', 'Predicted')<br/><br/>chile_pred = pd.concat([chile_values, chile_values.shift(1)], axis=1)<br/>chile_pred.columns = ('Actual', 'Predicted')<br/><br/>canada_pred = pd.concat([canada_values, canada_values.shift(1)], axis=1)<br/>canada_pred.columns = ('Actual', 'Predicted')</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="7561" class="jl if hh jh b be jm jn l jo jp"># One has been shown to clarify the above process of joining two series objects , Actual Series + Predicted Series . <br/><br/>us_pred.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/c4345de4dc61eb603cdbdfd15447b919.png" data-original-src="https://miro.medium.com/v2/format:webp/1*taY902oSdhKg25JyrUO-bw.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="e4dc" class="jl if hh jh b be jm jn l jo jp">us_train, us_test = us_pred[1:180], us_pred[180:]<br/><br/>chile_train, chile_test = chile_pred[1:180], chile_pred[180:]<br/><br/>aus_train, aus_test = aus_pred[1:180], aus_pred[180:]<br/><br/>canada_train, canada_test = canada_pred[1:180], canada_pred[180:]</span></pre><p id="8113" class="pw-post-body-paragraph km kn hh ko b kp lh kr ks kt li kv kw kc lj ky kz kf lk lb lc ki ll le lf lg ha bi translated">下面给出了各个国家基线百分比的RMSE值，这些是通过使用naiive方法获得的均方根值。</p><p id="67c4" class="pw-post-body-paragraph km kn hh ko b kp lh kr ks kt li kv kw kc lj ky kz kf lk lb lc ki ll le lf lg ha bi translated">这意味着预测值具有实际值±RMSE值的误差</p><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="5726" class="jl if hh jh b be jm jn l jo jp">error_us = mean_squared_error(us_train.Actual, us_train.Predicted)<br/>print("The RMSE of PercentOfBaseline in USA is : ",np.sqrt(error_us))<br/><br/>error_aus = mean_squared_error(aus_train.Actual, aus_train.Predicted)<br/>print("The RMSE of PercentOfBaseline in Australia is : ",np.sqrt(error_aus))<br/><br/>error_chile = mean_squared_error(chile_train.Actual, chile_train.Predicted)<br/>print("The RMSE of PercentOfBaseline in Chile is : ",np.sqrt(error_chile))<br/><br/>error_canada = mean_squared_error(canada_train.Actual, canada_train.Predicted)<br/>print("The RMSE of PercentOfBaseline in Canada is : ",np.sqrt(error_canada))</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="3d3d" class="jl if hh jh b be jm jn l jo jp">The RMSE of PercentOfBaseline in USA is :  18.885423423293823<br/>The RMSE of PercentOfBaseline in Australia is :  12.131725802610307<br/>The RMSE of PercentOfBaseline in Chile is :  10.93735335097218<br/>The RMSE of PercentOfBaseline in Canada is :  26.23145793650937</span></pre><h1 id="e26c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">ARIMA模型——自回归综合移动平均模型</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="fb12" class="jl if hh jh b be jm jn l jo jp">plot_acf(us_values)       # Determines the value of q</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/8dbb15d81985225ebcf8d6e2fc090b1a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*1lioDFB7QIMrDnDFY8CqzQ.png"/></div></figure><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/8dbb15d81985225ebcf8d6e2fc090b1a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*1lioDFB7QIMrDnDFY8CqzQ.png"/></div></figure><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="cfc9" class="jl if hh jh b be jm jn l jo jp">plot_pacf(us_values)         # Determines the value of p</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/6c43dd77f906ac04c35e1cf5bb9b115d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*917HyxnDYMjInQQAcCAjgA.png"/></div></figure><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/6c43dd77f906ac04c35e1cf5bb9b115d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*917HyxnDYMjInQQAcCAjgA.png"/></div></figure><h2 id="370d" class="jv if hh bd ig jw jx jy ik jz ka kb io kc kd ke is kf kg kh iw ki kj kk ja kl bi translated">ARIMA的美国模式评估</h2><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="4d70" class="jl if hh jh b be jm jn l jo jp"># Stationary Check  <br/>adf_us = ADFTest()<br/>adf_us.should_diff(us_avg)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="a3c0" class="jl if hh jh b be jm jn l jo jp">(0.01, False)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="dfa7" class="jl if hh jh b be jm jn l jo jp"># Model fitting<br/>us_train_set, us_test_set = us_avg[:3000], us_avg[3000:]<br/>us_arima_model = auto_arima(us_train_set)<br/><br/>us_arima_model.summary()<br/><br/>us_forecast = pd.DataFrame(us_arima_model.predict(n_periods=1441), index=us_test_set.index)<br/>us_forecast.columns = ['Predicted']<br/>us_forecast.head()<br/><br/>print('The RMSE value of US model using ARIMAX is: ',np.sqrt(mean_squared_error(us_test_set['PercentOfBaseline'], us_forecast)))</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="dc25" class="jl if hh jh b be jm jn l jo jp">The RMSE value of US model using ARIMAX is:  18.08401653770757</span></pre><h1 id="e47a" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">澳大利亚模式在ARIMA</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="97a4" class="jl if hh jh b be jm jn l jo jp"># Stationary Check  <br/>adf_aus = ADFTest()<br/>adf_aus.should_diff(aus_avg)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="7315" class="jl if hh jh b be jm jn l jo jp">(0.4789346473319759, True)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="472c" class="jl if hh jh b be jm jn l jo jp"># Model fitting<br/>aus_train_set, aus_test_set = aus_avg[:200], aus_avg[200:]<br/>aus_arima_model = auto_arima(aus_train_set)<br/><br/>aus_arima_model.summary()<br/><br/>aus_forecast = pd.DataFrame(aus_arima_model.predict(n_periods=57), index=aus_test_set.index)<br/>aus_forecast.columns = ['Predicted']<br/>aus_forecast.head()<br/><br/>print('The RMSE value of AUS model using ARIMAX is: ',np.sqrt(mean_squared_error(aus_test_set['PercentOfBaseline'], <br/>                                                                                 aus_forecast)))</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="ba39" class="jl if hh jh b be jm jn l jo jp">The RMSE value of AUS model using ARIMAX is:  23.86492851256695</span></pre><h1 id="1fee" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">ARIMA的加拿大模式</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="099b" class="jl if hh jh b be jm jn l jo jp"># Stationary Check  <br/>adf_canada = ADFTest()<br/>adf_canada.should_diff(canada_avg)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="d65d" class="jl if hh jh b be jm jn l jo jp">(0.01, False)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="7e4d" class="jl if hh jh b be jm jn l jo jp"># Model fitting<br/>canada_train_set, canada_test_set = canada_avg[:2000], canada_avg[2000:]<br/>canada_arima_model = auto_arima(canada_train_set)<br/><br/>canada_arima_model.summary()<br/><br/>canada_forecast = pd.DataFrame(canada_arima_model.predict(n_periods=311), index=canada_test_set.index)<br/>canada_forecast.columns = ['Predicted']<br/>canada_forecast.head()<br/><br/>print('The RMSE value of Canada model using ARIMAX is: ',np.sqrt(mean_squared_error(canada_test_set['PercentOfBaseline'], <br/>                                                                                 canada_forecast)))</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="f532" class="jl if hh jh b be jm jn l jo jp">The RMSE value of Canada model using ARIMAX is:  19.894301935116854</span></pre><h1 id="5678" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">ARIMAX中的智利模型</h1><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="a49e" class="jl if hh jh b be jm jn l jo jp"># Stationary Check  <br/>adf_chile = ADFTest()<br/>adf_chile.should_diff(chile_avg)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="c28b" class="jl if hh jh b be jm jn l jo jp">(0.01, False)</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="853d" class="jl if hh jh b be jm jn l jo jp"># Model fitting<br/>chile_train_set, chile_test_set = chile_avg[:200], chile_avg[200:]<br/>chile_arima_model = auto_arima(chile_train_set)<br/><br/>chile_arima_model.summary()<br/><br/>chile_forecast = pd.DataFrame(chile_arima_model.predict(n_periods=38), index=chile_test_set.index)<br/>chile_forecast.columns = ['Predicted']<br/>chile_forecast.head()<br/><br/>print('The RMSE value of Canada model using ARIMAX is: ',np.sqrt(mean_squared_error(chile_test_set['PercentOfBaseline'], <br/>                                                                                 chile_forecast)))</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="dfdd" class="jl if hh jh b be jm jn l jo jp">The RMSE value of Canada model using ARIMAX is:  10.892022320721628</span></pre><h1 id="787a" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">结论</h1><p id="6dae" class="pw-post-body-paragraph km kn hh ko b kp kq kr ks kt ku kv kw kc kx ky kz kf la lb lc ki ld le lf lg ha bi translated">几个值得注意的结论:</p><ol class=""><li id="73c7" class="lm ln hh ko b kp lh kt li kc lo kf lp ki lq lg lr ls lt lu bi translated">naiive模型在澳大利亚的情况下表现得更好，这在某种程度上是可预测的，因为零假设没有被拒绝。</li><li id="4d52" class="lm ln hh ko b kp lv kt lw kc lx kf ly ki lz lg lr ls lt lu bi translated">与naiive模型相比，美国、加拿大和智利的ARIMA模型仅略微降低了RMSE值。</li></ol><pre class="jc jd je jf fd jg jh ji bn jj jk bi"><span id="e5db" class="jl if hh jh b be jm jn l jo jp">rmse_n = np.sqrt([error_aus, error_canada, error_chile, error_us])<br/><br/>rmse_arima = np.sqrt([<br/>                      mean_squared_error(aus_test_set['PercentOfBaseline'], aus_forecast),<br/>                      mean_squared_error(canada_test_set['PercentOfBaseline'], canada_forecast),<br/>                      mean_squared_error(chile_test_set['PercentOfBaseline'], chile_forecast), <br/>                      mean_squared_error(us_test_set['PercentOfBaseline'], us_forecast)<br/>                    ])</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="0207" class="jl if hh jh b be jm jn l jo jp">overview = pd.DataFrame({'RMSE-Naiive Model':rmse_n, 'RMSE ARIMA Model': rmse_arima}, <br/>                        index=['Australia', 'Canada', 'Chile', 'United States'])</span></pre><pre class="jq jg jh ji bn jj jk bi"><span id="44d5" class="jl if hh jh b be jm jn l jo jp">overview.head()</span></pre><figure class="jc jd je jf fd jr er es paragraph-image"><div class="ab fe cl js"><img src="../Images/e7acd4437a57d1281c971fa2c4789232.png" data-original-src="https://miro.medium.com/v2/format:webp/1*bkii-Bp0kn51LzaEIF26xQ.png"/></div></figure><p id="55a6" class="pw-post-body-paragraph km kn hh ko b kp lh kr ks kt li kv kw kc lj ky kz kf lk lb lc ki ll le lf lg ha bi translated">这是对美国、智利、加拿大和澳大利亚这四个国家的新冠肺炎交通数据的详细分析。获得的值是密度的百分比，这是本案例研究中的目标变量。</p></div></div>    
</body>
</html>