<html>
<head>
<title>Perform Sliced (Tiled) Inference and Detailed Error Analysis using YOLOv5 Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用YOLOv5模型执行切片(平铺)推理和详细的错误分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/perform-sliced-tiled-inference-and-detailed-error-analysis-using-yolov5-models-69f0313de8e1?source=collection_archive---------21-----------------------#2022-02-25">https://medium.com/analytics-vidhya/perform-sliced-tiled-inference-and-detailed-error-analysis-using-yolov5-models-69f0313de8e1?source=collection_archive---------21-----------------------#2022-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/65f4bd5018a9183392ff97cee5eac99e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8QH1HKw5-lW_t77WRlO6FA.gif"/></div></div></figure><ul class=""><li id="2e49" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">卫星图像或高分辨率图像上的小目标检测需要切片(平铺)推理吗？</li><li id="2294" class="ip iq hh ir b is jh iu ji iw jj iy jk ja jl jc jd je jf jg bi translated">您的检测模型需要可解释的度量标准吗(关于可能改进的见解)？</li><li id="d039" class="ip iq hh ir b is jh iu ji iw jj iy jk ja jl jc jd je jf jg bi translated">你需要一个交互式用户界面来可视化错误的预测吗？</li><li id="bba0" class="ip iq hh ir b is jh iu ji iw jj iy jk ja jl jc jd je jf jg bi translated">你依赖YOLOv5车型吗？</li></ul><p id="7739" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">所有这些都有可能与SAHI的YOLOv5集成🚀</p><div class="kb kc ez fb kd ke"><a href="https://github.com/obss/sahi" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hi fi z dy kj ea eb kk ed ef hg bi translated">GitHub — obss/sahi:一个用于执行大规模目标检测的轻量级视觉库/…</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">目标检测和实例分割是计算机视觉中最重要的应用领域</h3></div><div class="km l"><p class="bd b fp z dy kj ea eb kk ed ef dx translated">github.com</p></div></div><div class="kn l"><div class="ko l kp kq kr kn ks in ke"/></div></div></a></div><p id="b8e6" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">这篇文章将带你完成YOLOv5型号的<strong class="ir hi">安装</strong>、<strong class="ir hi">切片推理</strong>、<strong class="ir hi">错误分析、</strong>和<strong class="ir hi">交互可视化</strong>步骤。</p><h2 id="04fd" class="kt ku hh bd kv kw kx ky kz la lb lc ld iw le lf lg iy lh li lj ja lk ll lm ln bi translated">装置</h2><p id="db9c" class="pw-post-body-paragraph jm jn hh ir b is lo jo jp iu lp jq jr iw lq jt ju iy lr jw jx ja ls jz ka jc ha bi translated">✔️安装Pytorch:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="21e8" class="kt ku hh ly b fi mc md l me mf">conda install pytorch=1.10.0 torchvision=0.11.1 cudatoolkit=11.3 -c pytorch</span></pre><p id="f331" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">✔️安装SAHI:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7703" class="kt ku hh ly b fi mc md l me mf">conda install sahi -c conda-forge<br/>or<br/>pip install -U sahi</span></pre><p id="adda" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">✔️安装YOLOv5:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="e1a2" class="kt ku hh ly b fi mc md l me mf">pip install -U yolov5</span></pre><h2 id="20e2" class="kt ku hh bd kv kw kx ky kz la lb lc ld iw le lf lg iy lh li lj ja lk ll lm ln bi translated">切片预测</h2><figure class="lt lu lv lw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/167f34e57f4c0dcbca8542ec2249cf4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*58m5JWdMhYS9YY4hqkD8rA.gif"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">显示SAHI切片预测能力的Gif。</figcaption></figure><p id="f764" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">✔️用你的重量路径来执行推论:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="99b0" class="kt ku hh ly b fi mc md l me mf">sahi predict --source image_dir/ --model_type yolov5 --model_path yolov5s.pt --slice_height 512 --slice_width 512</span></pre><h2 id="6893" class="kt ku hh bd kv kw kx ky kz la lb lc ld iw le lf lg iy lh li lj ja lk ll lm ln bi translated">误差分析图/指标</h2><p id="ce30" class="pw-post-body-paragraph jm jn hh ir b is lo jo jp iu lp jq jr iw lq jt ju iy lr jw jx ja ls jz ka jc ha bi translated">✔️使用COCO格式的数据集创建COCO格式的预测结果:</p><figure class="lt lu lv lw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/83b9bb7fd0520e645a37e3bbe6b7515a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ysf92j9OHKIGh4-qLdQ3uA.gif"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">显示SAHI COCO格式数据集预测能力的Gif。</figcaption></figure><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="dc79" class="kt ku hh ly b fi mc md l me mf">sahi predict --source image_dir/ --dataset_json_path dataset.json --model_type yolov5 --model_path yolov5s.pt --no_sliced_prediction</span></pre><p id="310d" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">✔️使用创建的result.json创建误差分析图:</p><figure class="lt lu lv lw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/b25f2210d392db0edba3cfad289d4449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2x_JQYsktlmo2v8ruluxEQ.gif"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">Gif展示了SAHI的错误分析能力。</figcaption></figure><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="9834" class="kt ku hh ly b fi mc md l me mf">sahi coco analyse --dataset_json_path dataset.json --result_json_path result.json</span></pre><p id="5c08" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">🎯指标的含义:</p><p id="e7a5" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated"><strong class="ir hi">C75:</strong>IOU阈值为0.75时的结果<br/><strong class="ir hi">C50:</strong>IOU阈值为0.50时的结果<br/> <strong class="ir hi"> Loc: </strong>忽略定位错误后的结果<br/> <strong class="ir hi"> Sim: </strong>忽略超类别假阳性后的结果<br/> <strong class="ir hi"> Oth: </strong>忽略所有类别混淆后的结果<br/> <strong class="ir hi"> BG: </strong>忽略所有假阳性后的结果<br/></p><p id="459a" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">📈可能的模型改进:</p><p id="5125" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated"><strong class="ir hi"> C75-C50和C50-Loc= </strong>具有更精确边界框预测的潜在增益<br/> <strong class="ir hi"> Loc-Sim= </strong>修复超级类别混淆后的潜在增益<br/> <strong class="ir hi"> Loc-Oth= </strong>修复类别混淆后的潜在增益<br/> <strong class="ir hi"> Oth-BG= </strong>修复所有假阳性后的潜在增益<br/> <strong class="ir hi"> BG-FN= </strong>修复所有假阴性后的潜在增益</p><h2 id="52a1" class="kt ku hh bd kv kw kx ky kz la lb lc ld iw le lf lg iy lh li lj ja lk ll lm ln bi translated">交互式可视化</h2><p id="9759" class="pw-post-body-paragraph jm jn hh ir b is lo jo jp iu lp jq jr iw lq jt ju iy lr jw jx ja ls jz ka jc ha bi translated">✔️安装五十一:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="3ecb" class="kt ku hh ly b fi mc md l me mf">pip install -U fiftyone</span></pre><p id="eacf" class="pw-post-body-paragraph jm jn hh ir b is it jo jp iu iv jq jr iw js jt ju iy jv jw jx ja jy jz ka jc ha bi translated">✔️用你的预测结果启动一个web应用程序:</p><figure class="lt lu lv lw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/0e72daa81b3a2b54505b801a4cfa903e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Mq9jy8x0IBRcUbK6PI-C6A.gif"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">Gif展示了SAHI的交互式可视化能力。</figcaption></figure><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="05bc" class="kt ku hh ly b fi mc md l me mf">sahi coco fiftyone --dataset_json_path dataset.json --image_dir image_dir/ result.json</span></pre></div></div>    
</body>
</html>