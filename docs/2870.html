<html>
<head>
<title>How to create a contact page that users can use to contact you, on your website .</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在您的网站上创建一个用户可以用来联系您的联系页面。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-a-contact-page-that-users-can-use-to-contact-you-on-your-website-758187207f65?source=collection_archive---------13-----------------------#2021-05-21">https://medium.com/analytics-vidhya/how-to-create-a-contact-page-that-users-can-use-to-contact-you-on-your-website-758187207f65?source=collection_archive---------13-----------------------#2021-05-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="588e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你好，首先感谢你阅读这篇文章。我将使用Python(Flask)来验证提交后的联系表单。如果您不习惯使用Python，可以使用任何其他后端。我也希望你有HTML表单的工作知识。那么让我们开始吧！</p><p id="1021" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">关于联系方式的使用，让我澄清一下它的上下文。这种形式是你在许多网站上看到的形式，这有助于我们联系他们，而不需要实际输入到我们设备的电子邮件客户端。我们所做的只是填写一些基本信息，然后消息被格式化为电子邮件，自动打开电子邮件客户端。按下发送按钮就是我们要做的一切！</p><p id="f1bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，现在我们已经了解了为什么，让我们从如何开始。首先，我们需要为联系人表单设计一个简单的HTML和CSS页面。此外，它必须与我们的后端集成。因此，在我的例子中，我创建了一个Flask表单来使它工作(安装时附带了wtforms python模块)。这是我设计的一个简单的联系页面。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/5210c7f6b4ef5d356cbc9b608d659c38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fm1o6P5pTGg_elSAhsWcHw.png"/></div></div></figure><p id="b742" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，这个表单还使用了Bootstrap来获得更好的样式，以防你想知道。我们想在这里关注的最重要的方面是表单在后端的构造方式。因为我使用了烧瓶模型，所以我提供的结构看起来有点像这样。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="9e91" class="jt ju hh jp b fi jv jw l jx jy">from flask_wtf import FlaskForm<br/>from wtforms import StringField, TextAreaField, SubmitField<br/>from wtforms.validators import DataRequired</span><span id="20e6" class="jt ju hh jp b fi jz jw l jx jy">class Feedback_form(FlaskForm):<br/> name = StringField(‘Name’, validators=[DataRequired()])<br/> subject = StringField(‘Subject’,validators=[DataRequired()])<br/> feedback = TextAreaField(‘Feedback/Criticism’, validators=[DataRequired()])<br/> submit = SubmitField(‘Send Feedback’)</span></pre><p id="13cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，正如您所看到的，代码指出了每个from输入的部分。例如:</p><blockquote class="ka kb kc"><p id="132d" class="ie if kd ig b ih ii ij ik il im in io ke iq ir is kf iu iv iw kg iy iz ja jb ha bi translated">name = StringField('Name '，validators=[DataRequired()])</p></blockquote><p id="ce01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该字段可以映射到联系人表单中的名称字段。StringField的第一个参数表示我们将用于输入字段的标签。DataRequired()验证器映射到HTML输入标记的Required属性。</p><p id="4aef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">简而言之，联系人表单的代码看起来有点像这样。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="24ab" class="jt ju hh jp b fi jv jw l jx jy">&lt;form method=”POST” action=""&gt;<br/> {{ form.hidden_tag() }}<br/> &lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12"&gt;<br/> {{ form.name.label(class=’form-label’) }}<br/> {% if form.name.errors %}<br/> {{ form.name( class=’form-control form-control-lg is-invalid’ ) }}<br/> &lt;div class=”invalid-feedback”&gt;<br/> {% for error in form.name.errors %}<br/> &lt;span&gt;{{ error }}&lt;/span&gt;<br/> {% endfor %}<br/> &lt;/div&gt;<br/> {% else %}<br/> {{ form.name( class=’form-control form-control-lg’ ) }}<br/> {% endif %}<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12"&gt;<br/> {{ form.subject.label(class=’form-label’) }}<br/> {% if form.subject.errors %}<br/> {{ form.subject( class=’form-control form-control-lg is-invalid’ ) }}<br/> &lt;div class=”invalid-feedback”&gt;<br/> {% for error in form.subject.errors %}<br/> &lt;span&gt;{{ error }}&lt;/span&gt;<br/> {% endfor %}<br/> &lt;/div&gt;<br/> {% else %}<br/> {{ form.subject( class=’form-control form-control-lg’ ) }}<br/> {% endif %}<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12"&gt;<br/> {{ form.feedback.label(class=’form-label’) }}<br/> {% if form.feedback.errors %}<br/> {{ form.feedback( class=’form-control form-control-lg is-invalid’ ) }}<br/> &lt;div class=”invalid-feedback”&gt;<br/> {% for error in form.feedback.errors %}<br/> &lt;span&gt;{{ error }}&lt;/span&gt;<br/> {% endfor %}<br/> &lt;/div&gt;<br/> {% else %}<br/> {{ form.feedback( class=’form-control form-control-lg’ ) }}<br/> {% endif %}<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12 text-center”&gt;<br/> {{ form.submit( class=’btn btn-primary submit_button pr-5 pl-5')}}<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/form&gt;</span></pre><p id="fc96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想了解Flask Forms和使用Flask作为后端，我推荐你看这个<a class="ae kh" href="https://www.youtube.com/watch?v=UIJKdCIEXUQ" rel="noopener ugc nofollow" target="_blank">视频</a>和相关的播放列表。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="711f" class="jt ju hh jp b fi jv jw l jx jy">&lt;form method=”POST” action=""&gt;</span></pre><p id="e5ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请密切注意这一行。方法是post，这意味着POST请求将被发送到action属性中指定的页面。由于action属性中没有提及任何内容，因此页面会将信息发送回相同的路由，即页面。</p><p id="2874" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该表单必须与flask中的一个路由相关联，才能正常工作。这条路线大概是这样的</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="7983" class="jt ju hh jp b fi jv jw l jx jy">from backend.forms import Feedback_form</span><span id="8602" class="jt ju hh jp b fi jz jw l jx jy">@app.route(‘/contact’, methods=[‘GET’,’POST’])<br/>def contact():<br/> form = Feedback_form()<br/> if current_user.is_authenticated:<br/>   form.name.data = current_user.username<br/> if form.validate_on_submit():<br/>   webbrowser.open(f”youremailid?subject={form.subject.data}&amp;body={form.feedback.data}”, autoraise=True)<br/>   return redirect(url_for(‘home’))<br/> return render_template(‘contact.html’, title=’Contact Me’, form=form)</span></pre><p id="c675" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们一行一行地检查这段代码。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="7328" class="jt ju hh jp b fi jv jw l jx jy">if current_user.is_authenticated:</span></pre><p id="5047" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个if语句在使用提交的数据和呈现HTML模板之前检查用户是否通过了身份验证。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="e790" class="jt ju hh jp b fi jv jw l jx jy">if form.validate_on_submit():</span></pre><p id="b210" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该检查验证表单数据并检查错误。这些错误将由表单中内置的错误处理程序来处理。</p><p id="fdc2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在是讨论的时候了。默认情况下，python提供了<a class="ae kh" href="https://www.youtube.com/watch?v=JRCJ6RtE3xU&amp;t=567s" rel="noopener ugc nofollow" target="_blank"> smtplib模块</a>，用于使用电子邮件客户端发送自动电子邮件。它的升级版本是可以安装的<a class="ae kh" href="https://pythonhosted.org/Flask-Mail/" rel="noopener ugc nofollow" target="_blank">烧瓶邮件模块</a>。但这里存在的问题是，要使用这些模块发送自动邮件，我们需要访问发件人的电子邮件和密码，相对于电子邮件客户端。这并不是一个很好用的特性，因为它要求用户每次点击提交按钮时输入他们的电子邮件客户端的密码。</p><p id="7d0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解决方案要简单得多。与HTML的锚标记一起使用的传统mailto链接是这里的老大，因为它可以毫不费力地满足我们的所有需求。现在又有一个麻烦了！！</p><p id="f2bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们看它，我们不能使用锚标记和提交按钮，以获得输入字段中输入的数据。除非提交表格，否则我们无法访问表格中输入的数据。我知道这听起来很麻烦，所以让我演示一下，以便更好地理解。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="18fb" class="jt ju hh jp b fi jv jw l jx jy">&lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12 text-center”&gt;<br/> {{ form.submit( class=’btn btn-primary submit_button pr-5 pl-5')}}<br/> &lt;/div&gt;<br/> &lt;/div&gt;</span></pre><p id="5877" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是当前代码。让我们将submit字段修改为一个锚标记。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="d095" class="jt ju hh jp b fi jv jw l jx jy">&lt;div class=”form-group row”&gt;<br/> &lt;div class=”col-12 text-center”&gt;<br/>    &lt;a href="mailto:yourname@gmail.com?subject={{form.subject.data}}&amp;body={{form.feedback.data}}" class=’btn btn-primary submit_button pr-5 pl-5'&gt;Submit&lt;/a&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;</span></pre><p id="acf1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是我们使用锚定标签来创建mailto链接的时候。从<a class="ae kh" href="https://css-tricks.com/snippets/html/mailto-links/" rel="noopener ugc nofollow" target="_blank">这里</a>可以更好的理解mailto链接的这种格式。</p><p id="6e69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按照jinja2模板规则，{{}}中的值用于表示Flask表单中的变量。例如，在这里，form.subject.data和form.feedback.data表示我们输入到表单字段subject和feedback中的值。</p><p id="e289" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在这项工作应该完成了(或者至少这是我所希望的)。但是，当您运行此代码时，邮件客户端在打开时会显示以下内容:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ki"><img src="../Images/fb36caef0d2d584d7b8a0eb8e547ffb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*MNtOLZBQqjPla51_2qKgww.png"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">当outlook打开时，主题和正文都不存在！</figcaption></figure><p id="bbf7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这也让我感到惊讶，但是考虑到除非数据被提交，否则表单值仍然是none，这是有意义的。简而言之，只有当我们提交表单时，字段的值才会更改为我们输入的值！</p><p id="ca31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那我们该怎么办？我们保留submit按钮，而不使用anchor标签。但是，我们需要一种方法来表示我们后端的锚标签！在Python中，webbrowser模块就是这样做的。HTML中的锚标记帮助我们导航到新链接的方式，webbrowser模块的open方法，根据我们提供给open方法的URL打开网页。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="1403" class="jt ju hh jp b fi jv jw l jx jy">webbrowser.open(f”youremailid?subject={form.subject.data}&amp;body={form.feedback.data}”, autoraise=True)</span></pre><p id="33b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">autoraise参数仅仅意味着在调用webbrowser的open方法时打开邮件客户端窗口。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="4dbb" class="jt ju hh jp b fi jv jw l jx jy">return redirect(url_for(‘home’))</span></pre><p id="778d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重定向方法将客户端返回到主页。现在，它可以重定向到任何路由，但是因为我提供给url_for方法的值是“home ”,所以浏览器搜索名为home的路由函数并导航到它。</p><pre class="jd je jf jg fd jo jp jq jr aw js bi"><span id="3f2f" class="jt ju hh jp b fi jv jw l jx jy">return render_template(‘contact.html’, title=’Contact Me’, form=form)</span></pre><p id="f9d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，这个最后的陈述可能会让你有点困惑，但它实际上非常简单。这一行是每当GET请求被传递给contact route时执行的一行(当没有表单提交发生时)。如果POST请求被通过，即当我们提交表单时，那么只执行重定向方法之前的代码。</p><p id="8749" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们填写一些虚拟数据</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kn"><img src="../Images/4219988a26c5c8e1bbfac5621ea82417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmEHaQKRo2Dde86c0gdRxg.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">虚假信息</figcaption></figure><p id="01fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，在代码执行时，邮件客户端将弹出如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ko"><img src="../Images/b8e9314f3e5fcc8cb4b14884a8f20de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*SR7fVRoTvPoPESG9zs0vyw.png"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">耶！起作用了。</figcaption></figure><p id="5c72" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">非常感谢您耐心阅读到这里。直到我们再次见面，再见。</p></div></div>    
</body>
</html>