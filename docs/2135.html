<html>
<head>
<title>Web Scraping Instagram with Selenium Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Selenium Python进行网页抓取Instagram</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-instagram-with-selenium-python-b8e77af32ad4?source=collection_archive---------0-----------------------#2021-04-07">https://medium.com/analytics-vidhya/web-scraping-instagram-with-selenium-python-b8e77af32ad4?source=collection_archive---------0-----------------------#2021-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="408f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Selenium是众多可以用来抓取网站的工具之一。现在我想解释一下我们如何从网站上抓取Instagram账号。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/e142459be50ff3a54ba40e2e4c26e9a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*TWVrnG72w_bN-AFvIEYagQ.jpeg"/></div></figure><h1 id="35d8" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">为什么使用硒？</strong></h1><p id="15ee" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">正如我们所知，许多工具可以用来从网站上收集数据，其中最受欢迎的三个工具是Scrapy、Beautifulsoup和Selenium。然而，他们每个人都有特殊的能力为他们的行动刮一个网站。</p><p id="5df1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以搜索一下Scrapy，Beautifulsoup，还有很多其他地方可以用来刮痧的工具，但是现在我想在这里解释一下我们这次是怎么选择Selenium来刮痧的。</p><p id="2e0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">硒是刮痧的有力工具。它能以复杂的方式处理自动化。例如，我们需要登录我们的Instagram帐户来抓取Instagram的网站。令人惊讶的是，selenium可以自动登录我们的Instagram帐户。</p><p id="8efa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，selenium可以使用我们可以根据需要设置的计时器来抓取网站。这非常有帮助，因为Instagram的团队已经在其网站上禁止自动刮刀机器人。是的，我们可以为我们的自动刮刀设置计时器。因此，我们的刮刀没有迅速行动，这可以减少被Instagram的团队禁止的风险。</p><h1 id="d1f1" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">要求</strong></h1><ol class=""><li id="4757" class="ko kp hi ih b ii kj im kk iq kq iu kr iy ks jc kt ku kv kw bi translated">你必须先读完这篇文章，然后在技术上做练习。</li><li id="746e" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">熟悉python编程语言，尤其是OOP理论。</li><li id="d60c" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">我们需要一个代码编辑器和python已经安装在您的PC/笔记本电脑上。</li><li id="6dbb" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">在这种情况下，浏览器是Google Chrome，因此本文中提到的选项在Google Chrome上都是可用的。</li></ol><h1 id="9b91" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">你将学到什么</strong></h1><p id="2424" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">你会有selenium python理论的知识(自动登录，自动点击，自动向下滚动页面，自动下载)。</p><h1 id="9011" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">下载webdriver或geckodriver</h1><p id="277f" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">运行selenium程序我们必须准备的工具之一是webdriver(针对Chrome)或geckodriver(针对Firefox)。你可以从<a class="ae lc" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">这里</a>(Chrome用户)或者<a class="ae lc" href="https://github.com/mozilla/geckodriver/releases" rel="noopener ugc nofollow" target="_blank">这里</a>(Firefox用户)下载。</p><h1 id="aecf" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">安装所需的库</strong></h1><p id="9f41" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">首先，我们必须在我们的终端上安装一个selenium库，如下所示:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="6b87" class="li jm hi le b fi lj lk l ll lm">pip install selenium</span></pre><p id="8028" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，我们必须安装一些所需的python库，如时间和请求，如下面的代码:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="15b7" class="li jm hi le b fi lj lk l ll lm">pip install time</span></pre><p id="3ced" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">和</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="cebe" class="li jm hi le b fi lj lk l ll lm">pip install requests</span></pre><p id="c6b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了！我们的抓取环境已经准备好了，开始编码吧！</p><h1 id="db3c" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">导入库</strong></h1><p id="88e7" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">下面是使用selenium导入抓取所需库的代码:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="a9fa" class="li jm hi le b fi lj lk l ll lm">from selenium import webdriver<br/>from selenium.webdriver.common.keys import Keys<br/>import time, urllib.request<br/>import requests</span></pre><p id="4f56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我使用铬刮。所以，我们必须像上面的代码一样从selenium导入webdriver库。</p><h1 id="8b10" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">设置路径代码</strong></h1><p id="f3a6" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">路径代码是旨在将我们的代码与浏览器连接起来的代码。下面是关于路径的代码逻辑:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="46de" class="li jm hi le b fi lj lk l ll lm">PATH = r"C:\download\chromedriver_win32\chromedriver.exe"<br/>driver = webdriver.Chrome(PATH)</span></pre><p id="2cfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码表示已经下载的chromedriver包在下载文件夹中。然后路径变量代码必须和PC中的chromedriver包目录相同。</p><h1 id="96d8" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">获取Instagram的网站</strong></h1><p id="50ec" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">编码完PATH变量之后，那么我们就必须得到Instagram的网站，也就是我们的抓取目标。因此，代码如下:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="fdfd" class="li jm hi le b fi lj lk l ll lm">driver.get("https://www.instagram.com/")</span></pre><p id="3fbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后你可以保存这段代码，并运行它！看看…..</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ln"><img src="../Images/3b24a8b8993d189c300c376ba6b75176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9G1dPlpn9wjvBMS4xa6WRQ.png"/></div></div></figure><p id="45d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">干得好！我们的自动机器人成功地自动访问了Instagram的网站。</p><h1 id="02fa" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">登录我们的Instagram账号</strong></h1><p id="4988" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">下一步是登录我们的Instagram账户。在这种情况下，我推荐你使用你的第二个Instagram账号来尝试这个活动。我觉得这样会降低你失去Instagram账号的风险。</p><p id="d37d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们必须从时间库中设置睡眠时间，然后我们创建关于登录Instagram帐户的代码，如下所示:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="a594" class="li jm hi le b fi lj lk l ll lm">#login<br/>time.sleep(5)<br/>username=driver.find_element_by_css_selector("input[name='username']")<br/>password=driver.find_element_by_css_selector("input[name='password']")<br/>username.clear()<br/>password.clear()<br/>username.send_keys("xxxxxx")<br/>password.send_keys("123456")<br/>login = driver.find_element_by_css_selector("button[type='submit']").click()</span></pre><p id="836c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，<strong class="ih hj"> 5 </strong>是等待下一个代码运行的时间。时间用秒来表示。</p><p id="0431" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们必须了解用户名框的元素，该元素用于通过检查元素(CTRL+SHIFT+I)登录我们的Instagram帐户，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/a42e820fae93534ce2f98edacc510e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*g2Rf5ajF4rtCnNDVZt4lAw.png"/></div></figure><p id="a3a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而元素列如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/66010ca6920b6ecc17948c229bbd29b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*IKgLYrOzKJO3V3p0L4CYAA.png"/></div></figure><p id="8cc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">众所周知，创建自动登录代码的第一步是搜索用户名框。它旨在用我们的Instagram用户名帐户自动填充空白用户名。</p><p id="9287" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据上图，用户名框的选择器是<strong class="ih hj">输入</strong>。而用户名框的名称是<strong class="ih hj">用户名。</strong>然后代码是<strong class="ih hj"><em class="lu">username = driver . find _ element _ by _ CSS _ selector(" input[name = ' username ']"</em></strong><em class="lu">)。</em></p><p id="be4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图所示的密码变量也是如此:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/8576278ec935ca22965f0a63de2ffa82.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*9gqLF8ScDNqCf_b4X7ChNA.png"/></div></figure><p id="a034" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">元素列在下面:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/11401668ce90c22621138035af620877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*rOG4KGAI1pKGe7CyK3zHeg.png"/></div></figure><p id="9b66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样我们就可以得到密码框的CSS类型选择器，即<strong class="ih hj">输入</strong>，并将其命名为<strong class="ih hj">密码</strong>。然后我们必须把代码输入到<strong class="ih hj"><em class="lu">password = driver . find _ element _ by _ CSS _ selector(" input[name = ' password ']"</em></strong>)。</p><p id="dfa3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们必须通过这些行中的send_keys选项输入我们Instagram帐户的用户名和密码。在这种情况下，我使用我的用户名即“xxxxxx”，我的密码是“123456”。</p><p id="b0a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是自动点击登录。可以打成<strong class="ih hj"><em class="lu">log in = driver . find _ element _ by _ CSS _ selector(" button[type = ' submit ']")。点击()</em> </strong>这里的事情跟之前创建用户名和密码变量差不多。但是对于这个动作，我们必须在自动命名为<strong class="ih hj">T5的点击行的最后添加点击选项。点击() </strong>。</p><p id="22cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，让我们运行代码，看看！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/2d54db47e9b325e71afe1d93d0773589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3H06NmGxgDlzeC4o_VQqAQ.png"/></div></div></figure><p id="b449" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">干得好！我们做到了！</p><h1 id="71fe" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">自动跳过弹出窗口</strong></h1><p id="594b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">然后，登录我们的Instagram帐户后的下一步是点击名为<strong class="ih hj">而不是现在</strong>或<strong class="ih hj">保存信息</strong>的文本。在这种情况下，我使用<strong class="ih hj"> Not Now </strong>选项。实际上，如果您愿意，您可以选择<strong class="ih hj">保存信息</strong>选项。</p><p id="ea7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，就像创建用户名、密码和登录变量一样，我们必须键入代码来创建下面的<strong class="ih hj">而不是</strong>变量:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="9897" class="li jm hi le b fi lj lk l ll lm">#save your login info?<br/>time.sleep(10)<br/>notnow = driver.find_element_by_xpath("//button[contains(text(), 'Not Now')]").click()<br/>#turn on notif<br/>time.sleep(10)<br/>notnow2 = driver.find_element_by_xpath("//button[contains(text(), 'Not Now')]").click()</span></pre><p id="1943" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码解释了我们必须编码跳过名为<strong class="ih hj">保存您的登录信息</strong>的弹出窗口的第一步是创建<strong class="ih hj"> Not Now </strong>变量，例如<strong class="ih hj"><em class="lu">Not Now = driver . find _ element _ by _ XPath("//button[contains(text()，' Not Now')]")。点击()</em> </strong>。</p><p id="dfae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们试图通过<strong class="ih hj"> find_element_by_xpath </strong>获得<strong class="ih hj"> Not Now </strong>变量的元素，如selenium python网站<a class="ae lc" href="https://selenium-python.readthedocs.io/locating-elements.html" rel="noopener ugc nofollow" target="_blank">这里</a>中所解释的。当我们使用xpath方法搜索元素的位置时，我们可以使用text targetted。例如，当我们希望通过xpath方法获得弹出通知中元素<strong class="ih hj"> Not Now </strong>的位置时，我们使用名为<strong class="ih hj"> Not Now </strong>的文本，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/c06201264c7cc722ac574698ada69b61.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*4UuGRCnEuUnPw9i7l3SPEw.png"/></div></figure><p id="01c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而元素列则如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/cdbda3a1aa60c590e029b3e965db4f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*EyoDW7_WaNkDwR7SwZf2eg.png"/></div></figure><p id="0a10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们运行它！如果您已经这样做了，那么您可以找到第二个弹出通知，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/ebef633e2a3ad40f81ca0c21cef3d6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*UW1d8if3J8dDVwR3ShxaWA.png"/></div></figure><p id="2db7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上图是弹出通知的第二部分。点击第一个名为<strong class="ih hj">保存您的登录信息</strong>的弹出通知时出现。然后我们将这个弹出通知的名称命名为第二部分，即<strong class="ih hj">打开通知</strong>弹出。</p><p id="8e99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，我们必须创建一个名为<strong class="ih hj"> notnow2 </strong>变量的变量<strong class="ih hj">打开通知</strong>弹出窗口。我们必须做同样的事情来获得变量<strong class="ih hj"> notnow2 </strong>通过搜索其元素的位置，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/6f20a64b9093886f0dbcff1b1d3f9acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*cKqupx5QYpy0rRLfT2VX1A.png"/></div></figure><p id="3dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">元素列如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mc"><img src="../Images/3c0cfc57dad7a359cfb2074f3a1cc278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*Z3eDza5cPTxf0pu4zv91cw.png"/></div></figure><p id="d82d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，代码是<strong class="ih hj"><em class="lu">Not Now 2 = driver . find _ element _ by _ XPath("//button[contains(text()，' Not Now')]")。点击()</em>。</strong></p><p id="e1a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们检查代码！运行它，看看！(如果这一步已经完成，你会发现你的Instagram账户的主页面)。</p><h1 id="81d9" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">搜索框处理</strong></h1><p id="c42b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">既然我们已经找到了名为<strong class="ih hj"> home </strong>的Instagram账户主页，那么我们必须进入Instagram账户目标，在位于显示屏顶部的搜索框中键入Instagram账户目标的名称，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es md"><img src="../Images/159b94a61c00746bf101fe63f5ad5920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvS33aNBPiTzv8DqZLmZqQ.png"/></div></div></figure><p id="1ce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们必须获取搜索框的元素来自动填充空白框。本例中，我们使用名为<a class="ae lc" href="https://www.instagram.com/host.py/" rel="noopener ugc nofollow" target="_blank"> host.py </a>的Instagram账号public。(点一下就能看到账号)</p><p id="2061" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以通过在上一步中自动处理弹出窗口来创建代码，如下图所示:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="f314" class="li jm hi le b fi lj lk l ll lm">#searchbox<br/>time.sleep(5)<br/>searchbox=driver.find_element_by_css_selector("input[placeholder='Search']")<br/>searchbox.clear()<br/>searchbox.send_keys("host.py")<br/>time.sleep(5)<br/>searchbox.send_keys(Keys.ENTER)<br/>time.sleep(5)<br/>searchbox.send_keys(Keys.ENTER))</span></pre><p id="64a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码解释了创建<strong class="ih hj">搜索框</strong>变量是我们自动处理搜索框必须做的第一步。因此，我们只需要做同样的事情，就是创建我们在上一步中完成的变量。</p><p id="cb59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们必须用代码<strong class="ih hj"><em class="lu">Search box = driver . find _ element _ by _ CSS _ selector(" input[placeholder = ' Search ']"</em></strong>创建<strong class="ih hj"> searchbox </strong>变量，在这里输入这个框的类型。而选择器的类型是<strong class="ih hj">占位符</strong>名为<strong class="ih hj">搜索</strong> <em class="lu">，</em>如下图所示(可以通过检查元素找到):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es me"><img src="../Images/c9c3d3212401ae48c26e2174c19c63ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*BZNIrhyZKjZx4UjQ9qkG6Q.png"/></div></figure><p id="11f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们必须使用库中的<strong class="ih hj"> send_keys </strong>选项，将Instagram帐户目标自动键入搜索框，如<strong class="ih hj"><em class="lu">search box . send _ keys(" host . py ")</em>。</strong></p><p id="b752" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们必须通过用<strong class="ih hj">键填充代码来自动创建输入按钮。进入</strong>选项。(注意:一定要创建两次，要在Instagram账号网站上查看调试)</p><p id="4e57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，如果我们已经完成并成功运行代码，那么我们会发现Instagram个人资料目标如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mf"><img src="../Images/b6689c5e54fd18892d01ca0a2f6b64ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WI3-MMGQTOcKwi76RCZORw.png"/></div></div></figure><p id="31e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">干得好！你猜对了！</p><h1 id="3739" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">向下滚动档案</strong></h1><p id="3fa5" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">既然我们有了目标用户的个人资料页面，那就一定认为我们已经很快刮到这个页面了。但是，我们必须先自动向下滚动页面。代码如下:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="400e" class="li jm hi le b fi lj lk l ll lm">#scroll<br/>scrolldown=driver.execute_script("window.scrollTo(0, document.body.scrollHeight);var scrolldown=document.body.scrollHeight;return scrolldown;")<br/>match=False<br/>while(match==False):<br/>    last_count = scrolldown<br/>    time.sleep(3)<br/>    scrolldown = driver.execute_script("window.scrollTo(0, document.body.scrollHeight);var scrolldown=document.body.scrollHeight;return scrolldown;")<br/>    if last_count==scrolldown:<br/>        match=True</span></pre><p id="4e62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后让我们通过运行它来检查代码，看看！(如果成功，它必须自动向下滚动页面)</p><h1 id="8e2e" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">获取URL帖子</strong></h1><p id="2d2b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">现在，是时候获取这些张贴在<a class="ae lc" href="https://instagram.com/host.py/!" rel="noopener ugc nofollow" target="_blank">https://instagram.com/host.py/!</a>的URL帖子了</p><p id="aff9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所知，有11个职位的图像在那里。因此，我们可以创建如下图所示的代码:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/2d387e85e7a50a371b6d51689b715bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*PGLeIsXdAqCoK-d6Zw9mCA.png"/></div></figure><p id="2e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据上图，我们必须创建一个空框，用于容纳所有名为<strong class="ih hj"> <em class="lu">帖子</em> </strong>的URL帖子，我们可以键入如下代码:</p><pre class="je jf jg jh fd ld le lf lg aw lh bi"><span id="20c7" class="li jm hi le b fi lj lk l ll lm">posts = []</span></pre><p id="ed04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们创建links变量来获取所有标签名为<strong class="ih hj">“a”</strong>的元素。因此，创建for循环函数，按照上图所示的代码获取所有的URL帖子，并打印！</p><p id="5f40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，已经创建了获取所有URL帖子的代码。我们可以去看看！(只需等待几分钟)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mh"><img src="../Images/e44afda80013b0672d252c69ba757aa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0r7DyXoFFM327Ab9Kk7JA.png"/></div></div></figure><p id="1d22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">没错。上面的图像代表了页面上所有的URL帖子，其中显示了11个URL。干得好！</p><h1 id="f19f" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">下载所有帖子</strong></h1><p id="f3b3" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">最后，我们必须下载那里的所有帖子，并将它们保存到我们保存脚本的目录中。所以，代码在下面:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mi"><img src="../Images/1fd40ba3fd81301f6e1d1d46ae2dddad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBVENSPSb6mjjmmmymfmDQ.png"/></div></div></figure><p id="6ae6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的图片解释了我们必须创建一个变量来容纳所有我们想要下载的图片名称，首先命名为<strong class="ih hj">short code</strong>first<strong class="ih hj">。</strong>例如，当第一篇文章的URL名称是<a class="ae lc" href="https://www.instagram.com/p/CNMnQ0JAPfA/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">https://www.instagram.com/p/CNMnQ0JAPfA/</strong></a>时，我们可以将名称<strong class="ih hj">CNMnQ0JAPfA.jpg</strong>赋予该文件。那么它必须应用于其他文件。</p><p id="955f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我假设我们已经理解了如何获取上图中所写的download_url变量的选择器。</p><h1 id="f2df" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">结论</strong></h1><p id="2ec6" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">最后，我们在这里得到了所有的代码。那么我们还在等什么呢？代码如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="aed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们跑去看看吧！</p><p id="ae21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这有所帮助！</p></div></div>    
</body>
</html>