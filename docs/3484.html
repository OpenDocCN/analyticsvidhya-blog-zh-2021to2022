<html>
<head>
<title>How to write beautiful python code.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何写出漂亮的python代码？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-write-beautiful-python-code-8108bd3098d8?source=collection_archive---------1-----------------------#2021-07-04">https://medium.com/analytics-vidhya/how-to-write-beautiful-python-code-8108bd3098d8?source=collection_archive---------1-----------------------#2021-07-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="36de" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">注意名字，我会注意格式</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/cc337c0f26cef51b1a3c340180eda717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sJkCU30P79Jkj7qT"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jn" href="https://unsplash.com/@clemhlrdt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Clément Hélardot </a>拍摄</figcaption></figure><p id="c5f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这篇博客中，您将学习如何转换您的python代码，并使其美观、易读和结构化。这个想法是，代码应该像故事一样流动。现在，如果这看起来有点吓人，坚持住，因为除了编写文档和命名变量，其他一切都是自动化的。</p><h1 id="539a" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">命名约定</h1><p id="17ad" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">现在Python中的命名约定有点乱。这不是我的解读，是pep8这样写的:</p><p id="902b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">“Python库的命名约定有点混乱，所以我们永远也不会做到完全一致——然而，这里是目前推荐的命名标准。新的模块和包(包括第三方框架)应该按照这些标准编写，但是如果现有的库有不同的风格，内部一致性是首选的。”— [ <a class="ae jn" href="https://www.python.org/dev/peps/pep-0008/#naming-conventions" rel="noopener ugc nofollow" target="_blank"> PEP 8 </a></p><p id="e142" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我给你一些简单的规则。</p><p id="f37d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">规则1  —用小写字母书写变量名、方法名和函数名，用下划线隔开。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="c2e4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">规则2  —保持这些变量名简短，它们是你故事中的角色。避免使用“非常长的变量名称”，而是使用“短名称”</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="b72e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="lj">提示</em>:将变量人性化，把变量当成你的朋友，并据此命名。</p><p id="0a37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">规则3 </strong> —所有常量均为大写</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="9d04" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">规则4 </strong> — CamelCase类名</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="1e0a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有了这些简单的规则，你就不会违反任何pep8原则。还有，不用担心全部记住。在自动格式化部分的后面，我将分享一个很棒的工具，它将帮助你找到错误的变量名并重命名它们。只要确保您保留了函数和变量名，因为它们是您的朋友。</p><h1 id="9593" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">自动格式化</h1><p id="e15e" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">找出你的分数(满分10分)</p><p id="b8b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">不要为你的第一个分数难过，我的分数是a -4.5。保存python文件并执行以下操作。</p><p id="62c1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第一步</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="5a60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第二步</p><p id="3be9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在您的代码刚刚运行的目录中</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="0e14" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">简单吧？—这会给你满分10分，并且会很好地指出所有的问题。现在，在进行任何更改之前，只需运行以下命令。</p><p id="c2ce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第三步</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="4ed0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第四步</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="1cc2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第五步</p><p id="0112" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">再次运行pylint，看看你的分数有没有提高。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="4c95" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">(Pylint非常重视空格！)</p><p id="f857" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第六步</p><p id="ca55" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们几乎已经完成了代码的美化，你可以在autopep8之后直观地看到不同之处。试着攻击皮林特报告中的每一点。我感觉好的代码都有8.5分以上。这不是一个硬性规定，但根据我作为数据科学工程师的行业经验，我们可以毫无问题地接受它。</p><p id="6d2f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我再给你一些自动格式化的工具。</p><ol class=""><li id="082b" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated"><a class="ae jn" href="https://pypi.org/project/autopep8/" rel="noopener ugc nofollow" target="_blank">autopep 8</a>——如上所述</li><li id="c14d" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated"><a class="ae jn" href="https://github.com/google/yapf" rel="noopener ugc nofollow" target="_blank"> Yapf </a></li><li id="3691" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated"><a class="ae jn" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">黑色</a></li></ol><p id="aba9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">P.S. Pylint也作为VS代码扩展出现，它突出显示变量名和其他与pep8不同的地方。确保你也激活了它。</p><h1 id="0d8b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">评论&lt; Docstring &lt; Standard Documentation</h1><p id="119c" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Now, if you have run the pylint and if you are writing non-documented code you will come across one very peculiar error in pylint — docstring missing. Docstrings are like a small writeup about your code, class, functions, and methods, its task (ideally, it should be in one line), and about its arguments i.e., input and return i.e. output.</p><p id="ae3e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">The various docstrings are given in the snippet below.</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="6bb7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Now we can take the documentation to the next level (as I have done above) by following set formats of docstrings and later on, use a module like the sphinx. I highly recommend reading about various standard formats of docstrings. I like to follow the NumPy format given in this link. <a class="ae jn" href="https://numpydoc.readthedocs.io/en/latest/format.html" rel="noopener ugc nofollow" target="_blank">【链接】</a></p><p id="0965" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您是VS代码用户，一个非常好的扩展可以帮助您自动创建标准文档格式的占位符。这个扩展是“Python Docstring Generator”——这里的<a class="ae jn" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><h1 id="13a5" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">版本控制的重要性</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ly"><img src="../Images/aa5321995c7d046d5f653942dbfec027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WU7vemzi681LBtdp"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yancy Min </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="ba6f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们在本地开发时经常忽略的一点是版本控制。如果你开始使用它，你可以避免很多令人头痛的事情。这与如何编写漂亮的python代码略有不同，但在维护每个文件的长期历史、分支和合并以测试不同的特性、高可用性和灾难恢复方面增加了巨大的价值。</p><h1 id="4b21" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">把所有的东西放在一起</h1><p id="d27f" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">以docstring开始您的代码:范围、目标和如何使用它。在本节中添加有关附加文档的更多详细信息。我知道这个要求很过分，但是相信我，它增加了很多价值。这就像是对你的代码的介绍，你是作者。从一开始就添加一个自述文件。</p><p id="9277" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们从所有的导入开始，pylint将处理所有的导入序列并声明所有的常量。现在声明所有的函数和方法，并在每个函数中添加一个标准的docstring。维护一个功能流，每个功能应该有且只有一个任务。运行任何自动格式化工具，获得您的pylint分数，将分数提高到8分以上，就大功告成了。一个漂亮的python代码。</p><h1 id="6308" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">Python的禅。</h1><p id="a338" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">不管讨论了多少技巧和诀窍，它总是从“导入这个”开始。如果你以前没有尝试过，只要在python解释器中输入并执行“import this”，你就会看到Tim Peters写的19条指导原则。这些在[ <a class="ae jn" href="https://www.python.org/dev/peps/pep-0020/" rel="noopener ugc nofollow" target="_blank"> PEP 20 </a> ]中也有提及</p><p id="2cf0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这些原则在下面给出，我强烈推荐阅读它们，我在这篇文章中没有涉及到。</p><ol class=""><li id="8465" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated">漂亮总比难看好。</li><li id="8407" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">显性比隐性好。</li><li id="ffe6" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">简单比复杂好。</li><li id="1aa4" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">复杂总比复杂好。</li><li id="cbb4" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">扁平的比嵌套的好。</li><li id="dfd0" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">疏比密好。</li><li id="a8f4" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">可读性很重要。</li><li id="f4ff" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">特例不足以特殊到打破规则。</li><li id="c490" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">虽然实用性战胜了纯粹性。</li><li id="6a7b" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">错误永远不会无声无息地过去。</li><li id="ceb3" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">除非明确沉默。</li><li id="de40" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">面对暧昧，拒绝猜测的诱惑。</li><li id="32a2" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">应该有一种——最好只有一种——显而易见的方法来做这件事。</li><li id="76ce" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">尽管这种方式一开始可能并不明显，除非你是荷兰人。</li><li id="7f17" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">现在总比没有好。</li><li id="e50c" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">尽管从来没有比现在更好。</li><li id="c19b" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">如果实现很难解释，这是一个坏主意。</li><li id="e13a" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">如果实现很容易解释，这可能是一个好主意。</li><li id="b71e" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">名称空间是一个非常棒的想法——让我们多做一些吧！</li></ol><p id="4516" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我希望您的代码现在更像样，易于阅读和理解。在以后的生活中，当你看着你的代码时，你会感谢你自己，你把它记录得如此好，它看起来如此优雅。</p></div></div>    
</body>
</html>