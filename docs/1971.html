<html>
<head>
<title>Deploying Image Classification Model on Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Streamlit上部署图像分类模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-image-classification-model-on-streamlit-e9579ccda157?source=collection_archive---------9-----------------------#2021-03-29">https://medium.com/analytics-vidhya/deploying-image-classification-model-on-streamlit-e9579ccda157?source=collection_archive---------9-----------------------#2021-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="65f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我的图像分类模型的第二阶段。关于如何做到的文章可以在这里找到<a class="ae jd" rel="noopener" href="/analytics-vidhya/image-classification-with-transfer-learning-37d2a2d9ab41">。</a></p><p id="3b84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第二阶段，我部署了模型来简化它。要做到这一点，你需要申请一个邀请，一旦你得到了邀请，你就可以开始你的部署。</p><h1 id="7092" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">安装包:</h1><p id="ef0a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">首先，您需要使用以下命令将streamlit安装到您的本地计算机上</p><p id="ab60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kh"> pip安装流水线</em></p><p id="c8a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后run =&gt; <em class="kh"> streamlit你好</em></p><p id="bab0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在您的本地主机上打开网页。更多信息，你可以查看他们的<a class="ae jd" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="9d07" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><a class="ae jd" href="http://app.py/" rel="noopener ugc nofollow" target="_blank"> App.py </a>:</h1><p id="414b" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">对于我的项目，我已经将我的模型保存为. hdf5文件。我创建了一个名为<a class="ae jd" href="http://app.py/" rel="noopener ugc nofollow" target="_blank"> app.py </a>的新文件，然后导入了包含streamlit的库。由于我的模型涉及迁移学习，我必须导入tensorflow hub。</p><p id="ba72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于UI，我创建了一个自定义css文件，并在我的<a class="ae jd" href="http://app.py/" rel="noopener ugc nofollow" target="_blank"> app.py </a>中将其作为文件打开。然后我创建了标题和markdown来解释web应用程序的功能。</p><p id="039f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的def main()中，我添加了文件上传功能，以及一个指向预测模型的按钮来预测上传的图像类别。</p><p id="6460" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在def predict(图像)中，我调用了我已经保存的分类器模型，定义了图像形状和模型变量。模型变量，我必须使用Keras的自定义对象函数，因为模型不是来自hub。虽然这个过程是通过导入Tensorflow hub库实现的。</p><p id="9b40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我创建了测试图像变量，调整了它的大小，将它改为一个数组，缩放它，并使用numpy库来扩展维度。然后我创建了类名，它将作为预测图像的标签。</p><p id="3997" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于预测，我对测试图像使用了model.predict函数，使用softmax和numpy得到分数，最后是列出了类名的结果。</p><h1 id="d9f7" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">部署模型:</h1><p id="4166" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">为了部署模型，我必须安装将创建requirements.txt文件的库。当您的代码运行时，这个文件将使您的模型能够在另一台机器上工作。</p><p id="e573" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ki kj kk kl b">pip install pipreqs</code></p><p id="fadb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后= &gt;<em class="kh">pip reqs/path/to/project</em>。</p><p id="134e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实时项目:</p><p id="eab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://share.streamlit.io/nwosu-ihueze/first_deploy/main/app.py" rel="noopener ugc nofollow" target="_blank">袋分类器</a>是直播项目的链接。</p><p id="868f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">演示:</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="kr ks l"/></div></figure><h1 id="1bd9" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">结论:</h1><p id="1683" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">这是一个简单的图像分类的streamlit项目，你需要的一切都可以在这里找到。您可以在<a class="ae jd" href="https://www.linkedin.com/in/rosemary-nwosu-ihueze/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，寻求建议或更正。感谢您的阅读。</p></div></div>    
</body>
</html>