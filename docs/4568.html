<html>
<head>
<title>Build a Telegram bot in python to get sentiment for a particular cryptocurrency using data from reddit.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用python构建一个电报机器人，使用来自reddit的数据获得对特定加密货币的情感。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/build-a-telegram-bot-in-python-to-get-sentiment-for-a-particular-cryptocurrency-using-data-from-ac9715be87?source=collection_archive---------2-----------------------#2021-11-17">https://medium.com/analytics-vidhya/build-a-telegram-bot-in-python-to-get-sentiment-for-a-particular-cryptocurrency-using-data-from-ac9715be87?source=collection_archive---------2-----------------------#2021-11-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/22cfd9ff11ec77c9dc667c3007ea9274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*drXIbZWpNsOMPB5T7tlEaw.jpeg"/></div></div></figure><h2 id="fb1f" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">介绍</h2><p id="b88c" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">在处理加密货币时，我们想知道的一件事是世界观；全世界都认为这是个坏主意，还是每个人都对此感到高兴。有感情。</p><blockquote class="ki"><p id="b479" class="kj kk hh bd kl km kn ko kp kq kr kh dx translated">因此，在本教程中，我们将设计构建一个电报机器人，它可以接受加密货币，并根据从reddit抓取的数据告诉我们当前的情绪。</p></blockquote><p id="dafc" class="pw-post-body-paragraph jn jo hh jp b jq ks js jt ju kt jw jx ja ku jz ka je kv kc kd ji kw kf kg kh ha bi translated"><strong class="jp hi">条款</strong></p><ul class=""><li id="0891" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">机器人是一个执行自动化任务的软件系统。所以我们的电报机器人可以通过电报接收和发送信息。就像和朋友在电报上聊天一样。</li><li id="66b8" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">情感分析是一种自然语言技术，用来判断一个陈述是积极的、消极的还是中性的。</li></ul><p id="9bbc" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">Reddit是数据来源。</p><p id="c858" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><a class="ae lq" href="https://github.com/mrsimi/cryptosentiment_bot" rel="noopener ugc nofollow" target="_blank">这里是完整代码库的链接。</a></p><h2 id="3c4e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">先决条件</h2><ul class=""><li id="8085" class="kx ky hh jp b jq jr ju jv ja lr je ls ji lt kh le lf lg lh bi translated">Python知识(不是高级知识，但对函数有基本的了解)。</li><li id="218b" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">一个Reddit帐户(如果你没有使用谷歌，你可以创建一个)和一点点熟悉。</li><li id="55e2" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">如果你想实现电报机器人部分，使用电报。如果您不想这样做，您可以在功能或任何其他客户端的基础上构建一个web应用程序。</li></ul><h1 id="9daf" class="lu iq hh bd ir lv lw lx iv ly lz ma iz mb mc md jd me mf mg jh mh mi mj jl mk bi translated">设计</h1><p id="9a5b" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated"><strong class="jp hi">用例:</strong></p><p id="4ee9" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">用户向电报机器人发送加密货币名称。电报机器人接收消息，在数据源上爬行，然后进行情感分析，然后我们为用户生成报告。</strong></p><p id="4806" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><em class="ml"> PS:这是一个理想的场景，现实生活中的场景可能会更复杂。</em></p><p id="adf9" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">因此，我们有一些设计选择和使用原则:</p><p id="4e90" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">选择数据来源</strong>:由于互联网限制，我只能抓取Reddit数据。(Twitter将是一个很好的补充，所以一定要加上它)。</p><p id="3b30" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">编程范例</strong>:我选择了函数式编程。你可以选择的其他选项包括面向对象编程、命令式编程等。但是让我们一起坚持函数式编程方法。</p><p id="d5bb" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">关注点分离(SoC) </strong>:爬虫脚本仅爬行，情感分析器仅分析等。这有助于扩展性，比如当我意识到twitter爬虫由于互联网限制而无法工作时。</p><h2 id="22d2" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">我们最后的流程</h2><figure class="mn mo mp mq fd ii er es paragraph-image"><div class="er es mm"><img src="../Images/414f29c845da58fa168bcfa54a4fbcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*AvsxF-8nBw6Cm-Msu0geqg.png"/></div><figcaption class="mr ms et er es mt mu bd b be z dx translated">我们的应用流程</figcaption></figure><p id="a798" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">这些精美的盒子是我们从应用程序流中提取的服务。电报机器人逻辑、REDDIT爬虫逻辑和情感分析器逻辑(或服务)</p><h1 id="c68c" class="lu iq hh bd ir lv lw lx iv ly lz ma iz mb mc md jd me mf mg jh mh mi mj jl mk bi translated">构建服务</h1><p id="105d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">因此，我们提取了将要构建的服务:</p><ul class=""><li id="c03c" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">TELEGRAM _BOT逻辑:它帮助我们与用户建立电报聊天，我们可以接受他们的输入，并向他们发送我们的情感分析报告。</li><li id="4a3a" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">REDDIT_CRAWLER逻辑:负责接收<strong class="jp hi">关键字</strong>并抓取REDDIT寻找与<strong class="jp hi">关键字</strong>相关的帖子</li><li id="9ac7" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">情操_分析器逻辑:就是那种把不同的句子取进去，推断出是正面、负面还是中性的那种。</li></ul><p id="ca32" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">让我们建造。</p><p id="4220" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">在Visual Studio代码中创建一个文件夹</strong></p><h2 id="98fb" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak">创建REDDIT_CRAWLER </strong></h2><h2 id="58e6" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤1获得访问权限:</h2><ul class=""><li id="dd56" class="kx ky hh jp b jq jr ju jv ja lr je ls ji lt kh le lf lg lh bi translated">转到P<a class="ae lq" href="https://www.reddit.com/prefs/apps" rel="noopener ugc nofollow" target="_blank">references(reddit.com)</a>然后选择底部的创建另一个应用程序</li><li id="58e0" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">详细填写。选择(脚本)。重定向url (http://localhost:8080)并单击创建应用程序。</li><li id="fbe2" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">创建时，您会看到一个对话框。记下个人使用脚本和密码，它们分别是您的客户端id和密钥。</li></ul><figure class="mn mo mp mq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/aa48d6ae9853b66750049b558d0b667f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MCiNy5v28dQBxJOkHjTFw.png"/></div></div></figure><ul class=""><li id="c49d" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">将. env添加到文件夹中，并将字段添加到文件中。看起来是这样的。</li></ul><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="5fef" class="ip iq hh mx b fi nb nc l nd ne">REDDIT_USERNAME = {see developers}<br/>REDDIT_SECRET_KEY= {secret key}<br/>REDDIT_CLIENT_ID={client key}</span></pre><h2 id="1ef5" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤2安装一些软件包</h2><ul class=""><li id="2518" class="kx ky hh jp b jq jr ju jv ja lr je ls ji lt kh le lf lg lh bi translated">praw:它是Reddit API的Python包装器。在<a class="ae lq" href="https://praw.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">PRAW:Python Reddit API包装器——PRAW 7 . 5 . 0文档中找到更多信息</a></li><li id="8764" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">python-dotenv:它有助于从。环境文件</li></ul><p id="5d2b" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">所以跑吧:</p><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="d565" class="ip iq hh mx b fi nb nc l nd ne">pip install praw<br/>pip install python-dotenv </span></pre><h2 id="dcee" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤3编写逻辑</h2><p id="5d2c" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">我们将创建一个功能:</p><ul class=""><li id="596f" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">接受一个关键字(加密货币名称)</li><li id="58cd" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">在加密货币子编辑中搜索一周内的所有事件。</li><li id="b760" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">将帖子添加到列表中，忽略<em class="ml">加载更多评论选项</em>我们确实看到这会延长帖子。</li></ul><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><h2 id="702d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">第四步:让我们测试一下</h2><p id="feef" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">我创建了一个run.py文件作为应用程序的入口点，所以在这里</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="09ef" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">运行一个<strong class="jp hi"> python run.py </strong>来查看结果。</p><p id="06a1" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我们有我们的reddit数据。情感分析器上</p><h2 id="75ed" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">构建情感分析器</h2><h2 id="7018" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤1安装库</h2><p id="18f7" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">情感分析器是自然语言处理中的一项技术，有多种技术可以实现它。但是出于这个目的，我们将使用<strong class="jp hi"> TextBlob。</strong></p><p id="7d6d" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">TextBlob使用基于规则的方法来确定句子的情感，还有其他技术，如使用深度学习算法。</p><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="c47f" class="ip iq hh mx b fi nb nc l nd ne">pip install textblob</span></pre><h2 id="a442" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤2讨论和编写代码</h2><p id="855d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">TextBlob是这样工作的:</p><ul class=""><li id="f81c" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">我们将一个句子传递给一个TextBlob对象，然后得到结果</li><li id="0c45" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">从结果中，我们可以获得不同的情感指标，但我们只对<strong class="jp hi">情感.极性.</strong>检验<a class="ae lq" href="https://textblob.readthedocs.io/en/dev/quickstart.html#sentiment-analysis" rel="noopener ugc nofollow" target="_blank">教程:快速入门— TextBlob 0.16.0文档</a>感兴趣，以了解更多信息。</li></ul><p id="7a30" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">现在，由于我们正在处理一个句子列表，我们跟踪那些带有负面情绪、正面情绪和中性情绪的句子，那么整体情绪是百分比最高的一个。(坚持简单推理)。</p><p id="7fac" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">因此，如果我们分析4个帖子，2个是正面的，1个是负面的，1个是中性的。总体情绪是积极的。</p><p id="33b0" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我们的准则:</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="eea7" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我写了一些其他的函数，比如</p><ul class=""><li id="0b84" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">第17行:get _ voices(dataList，provider)，获取数据列表和提供者。我在一个事件中添加了提供商警告，我们正在从reddit、twitter等几个来源获取数据，以帮助我们生成一份全面的报告。</li><li id="5579" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">第6 -7行:clean_text(text)删除字符串中的所有特殊字符</li><li id="6bba" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">第9 -15行:maximum(pos，neg，neu)接受正数、负数和中性数，并返回文本定义中的最大值——如果最大值是正数，则返回正数。</li></ul><h2 id="06cc" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">第三步:我们来测试一下</h2><p id="c02c" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">让我们更新run.py文件。我们将使用一些虚拟的句子列表来确保它的性能。</p><p id="69cc" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">你会看到我们的函数式编程方法允许我们测试每一个功能，而不用担心其他函数的复杂性。所以我们的<strong class="jp hi">perspective _ analyzer . py</strong>不需要知道<strong class="jp hi"> reddit_crawler.py </strong></p><p id="9d82" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">运行这个来看看结果。</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="5c0b" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">情绪分析检查</p><h2 id="6c55" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">建造电报机器人</h2><h2 id="4250" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤1获得访问权限</h2><p id="e056" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">为了让我们能够访问telegram API，我们需要令牌，我们可以从BotFather(想想所有聊天机器人之父)那里获得令牌。</p><p id="281a" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">所以:</p><ul class=""><li id="e08f" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">在这里搜索/联系bot father<a class="ae lq" href="https://telegram.me/BotFather" rel="noopener ugc nofollow" target="_blank">电报:联系@BotFather </a></li><li id="6022" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">将<strong class="jp hi"> /new </strong>作为消息发送</li><li id="51a0" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">填写详细信息，您应该会得到您的API令牌</li><li id="43d4" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">将令牌复制到。env文件应该是这样的:</li></ul><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="1112" class="ip iq hh mx b fi nb nc l nd ne">TELEGRAM_TOKEN = xxxxxxxxxxx</span></pre><ul class=""><li id="85ce" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">你也应该为你的机器人获得一个chatId，类似于<strong class="jp hi">t.me/{name_of_bot}</strong>。这就是你会与之聊天的机器人。</li></ul><h2 id="c586" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤2安装库</h2><p id="7698" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">我们可以使用许多python库来访问Telegram API，但是出于这个目的，我选择了由<a class="ae lq" href="https://github.com/eternnoir/pyTelegramBotAPI" rel="noopener ugc nofollow" target="_blank"> eternnoir </a>开发的那个。</p><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="12fb" class="ip iq hh mx b fi nb nc l nd ne">pip install pyTelegramBotAPI</span></pre><h2 id="a538" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">步骤3逻辑和讨论</h2><p id="e221" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">现在我们只对电报机器人的三个功能感兴趣:</p><ul class=""><li id="9a21" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">发送一个欢迎消息来显示机器人做什么和说明。</li><li id="cc3c" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">接收用户的响应，在这种情况下是加密货币名称。</li><li id="a841" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">向用户发回响应。</li></ul><p id="d85d" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">这部分的代码如下:</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><ul class=""><li id="e907" class="kx ky hh jp b jq kz ju la ja lb je lc ji ld kh le lf lg lh bi translated">第7行是关于设置的</li><li id="5020" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">第10–12行只是一个受欢迎的序列</li><li id="b93c" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">第14–18行是我们接收消息并回复的地方</li><li id="1d9a" class="kx ky hh jp b jq li ju lj ja lk je ll ji lm kh le lf lg lh bi translated">第20行是让机器人不停运行的原因；名字</li></ul><p id="a2bb" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">现在在run.py上，将代码更新为</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="e194" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我知道你在本地运行它，但是如果你去你的电报和在t.me/{name_of_bot}聊天，你会和它互动得很好。</p><p id="621c" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">它应该给你所有我们硬编码的信息。</p><p id="1dcb" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">但这不是我们想要的。</p><h2 id="b10d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">设置— 4将所有内容整合在一起</h2><p id="bd69" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">我们已经有了以前的服务来获取数据并对其进行情感分析。</p><p id="3614" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">因此，我们真正想要的是在第15行获取加密货币名称(消息参数)，在第16行和第18行之间放入我们的逻辑以从reddit获取数据，并进行情感分析。好在我们都有了。</p><p id="8678" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">所以让我们来写我们的最终实现。</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><p id="d52c" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">并更新我们的条目文件run.py</p><figure class="mn mo mp mq fd ii"><div class="bz dy l di"><div class="nf ng l"/></div></figure><h2 id="301c" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">第五步:让我们测试一切</h2><p id="e0f6" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">奔跑</p><pre class="mn mo mp mq fd mw mx my mz aw na bi"><span id="f76d" class="ip iq hh mx b fi nb nc l nd ne">python run.py</span></pre><p id="a1bd" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">然后拿出你的电报和你的机器人聊天。这是我的一个样本结果。</p><h2 id="539a" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">部署</h2><p id="bfb6" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">基本上，我们正在寻找的是服务器，让我们永远运行脚本，如果我们想保持电报机器人始终在线。有几个付费选项。</p><p id="a7f0" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我发现免费运行它的一个选项来自YouTube上的一个名为<a class="ae lq" href="https://www.youtube.com/watch?v=S6pBLq8Jv_A" rel="noopener ugc nofollow" target="_blank"> Frank的网站。看看他</a>。</p><p id="eaec" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><a class="ae lq" href="https://replit.com/@MrSimi/MisguidedSneakyParallelprocessing#main.py" rel="noopener ugc nofollow" target="_blank">这是我的机器人在Replit上运行的链接</a></p><p id="c256" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><a class="ae lq" href="https://t.me/Sentiment_09_bot" rel="noopener ugc nofollow" target="_blank">这是和我的机器人聊天的电报链接。</a> <em class="ml"> (PS:你在看这个教程的时候我可能已经把这个bot下线了)</em></p><p id="35e8" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><a class="ae lq" href="https://github.com/mrsimi/cryptosentiment_bot" rel="noopener ugc nofollow" target="_blank">这里是GitHub上代码库的链接。</a></p><h1 id="a7f2" class="lu iq hh bd ir lv lw lx iv ly lz ma iz mb mc md jd me mf mg jh mh mi mj jl mk bi translated">进步和增加</h1><p id="337a" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">我们有一个合理的起点，但还有一些东西可以补充。</p><p id="bee3" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">多个来源:</strong>我只使用reddit作为我的来源，但我们可以包括其他社交媒体来源，如twitter、脸书，甚至公共论坛。</p><p id="61b6" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">验证用户输入:</strong>对于电报机器人，我们只是接受用户输入作为插入，没有验证或确认，这是完全不安全的。在未来的添加中，我们希望验证它是一个文本，是一个硬币，以及我们可能想到的其他验证。</p><p id="01b3" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><strong class="jp hi">使用更高级的情感分析器</strong>:我们选择了TextBlob作为我们的情感分析器，但它是最复杂的。您可以选择使用更复杂、更精确的工具。你也可以从头开始构建自己的情感分析器。</p><h1 id="00ef" class="lu iq hh bd ir lv lw lx iv ly lz ma iz mb mc md jd me mf mg jh mh mi mj jl mk bi translated">结论</h1><p id="8c37" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx ja jy jz ka je kb kc kd ji ke kf kg kh ha bi translated">在本教程中，我们构建了一个电报机器人，它可以接受加密货币名称，从reddit收集数据，并根据数据对其进行情感分析，并帮助我们生成报告。</p><p id="94fa" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">但不仅仅如此。我们实际上已经建立了一个庞大系统和知识体系，可以独立提取。我们可以为reddit中的其他数据编写一个enter crawler，或者将我们的数据扩展到其他来源。我们也可以使用我们的电报机器人逻辑作为构建其他类型机器人的起点。</p><p id="e9a6" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">我希望这是一个有见地的阅读。</p><p id="24d1" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated">这里是GitHub上代码库的链接。</p><p id="0379" class="pw-post-body-paragraph jn jo hh jp b jq kz js jt ju la jw jx ja ln jz ka je lo kc kd ji lp kf kg kh ha bi translated"><a class="ae lq" href="https://replit.com/@MrSimi/MisguidedSneakyParallelprocessing#main.py" rel="noopener ugc nofollow" target="_blank">这是我的机器人在Replit上运行的链接</a></p></div></div>    
</body>
</html>