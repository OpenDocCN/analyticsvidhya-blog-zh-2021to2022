<html>
<head>
<title>InfluxDB 2.0: Better than Prometheus?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">InfluxDB 2.0:比普罗米修斯好？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/influxdb-2-0-better-than-prometheus-491c6e8f9720?source=collection_archive---------1-----------------------#2021-02-15">https://medium.com/analytics-vidhya/influxdb-2-0-better-than-prometheus-491c6e8f9720?source=collection_archive---------1-----------------------#2021-02-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6d9162858acb7e025d25d4ba903aca35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqYlUk1Cfy64nNJmKr9N6w.jpeg"/></div></div></figure><p id="1cf4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上周末，我终于把我的InfluxDB数据库更新到了2.0版本。不幸的是，我丢失了所有的数据，但我对提供的新功能感到惊喜。我们先来看看它的主要新特性，并和监控之王:普罗米修斯进行对比。</p><h1 id="3a72" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">流动的语言</h1><p id="813e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">InfluxDB的两个主要版本之间最显著的区别是查询语言。在第一个版本中，通过一些SQL概念，InfluxQL看起来非常简单。然而，在几次使用之后，很容易看出从一种用于关系数据库的语言到一个时间序列数据库的简单转换的局限性。intrusion在2019年通过创建他们的过程化查询语言来应对这个问题，这种语言现在是版本2: Flux中的默认语言。</p><blockquote class="kr ks kt"><p id="a929" class="iq ir ku is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">我不想生活在一个人类能想到的最好的数据处理语言是在70年代发明的世界里 </p><p id="c57d" class="iq ir ku is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated"><a class="ae ky" href="https://www.influxdata.com/blog/why-were-building-flux-a-new-data-scripting-and-query-language/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">为什么我们要建立Flux，一种新的数据脚本和查询语言</em> </a></p></blockquote><p id="6f26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初的几个小时很难翻译我的旧查询，但最终，学习进展得相当顺利。文档中有完整的示例，语法也变得非常自然。以转换简单查询为例:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/893ac33cd48bf9858080ff3554782919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HF1XoSUkZctShy8rWv2AHQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">InfluxQL vs Flux。来源:<a class="ae ky" href="https://www.sqlpac.com/fr/documents/influxdb-v2-prise-en-main-installation-preparation-migration-version-1.7.html" rel="noopener ugc nofollow" target="_blank">https://www . sqlpac . com/fr/documents/influx db-v2-prise-en-main-installation-preparation-migration-version-1.7 . html</a></figcaption></figure><p id="be6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们在上面看到的，Flux更加冗长，但是它的语法受JavaScript的启发，更容易理解数据是如何处理的。</p><h1 id="27ca" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">流入界面中的Chronograf</h1><p id="c9df" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我第一次登录到Influx提供的新网络界面时，我惊讶地看到了一个“仪表盘”和“提醒”菜单。我抓住机会测试这些以前在Chronograf中的功能。创建仪表板与Grafana不同，但它包含了主要的功能。有几种类型的单元格可供选择:</p><ul class=""><li id="d64d" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">图表</li><li id="06c5" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">图表+单一统计</li><li id="0c58" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">热图</li><li id="f779" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">柱状图</li><li id="c713" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">单一统计</li><li id="8a52" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">测量</li><li id="8275" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">桌子</li><li id="52f7" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">分散</li></ul><p id="4080" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">存在一个集成的查询构建器，但是一旦需求变得更加关键(使用变量、几个字段的查询等)，它很快就显示出它的局限性。).</p><p id="6d85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以定义警报(基于异常值或当服务不再返回数据时),将它们发送到Pagerduty、Slack或HTTP服务器。甚至有一个基于批评的路由系统，很像Alertmanager。</p><h1 id="86b1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">InfluxDB能打败普罗米修斯吗？</h1><p id="8914" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">从一开始，这两个工具对于相同的用途就有完全不同的看法。普罗米修斯将HTTP中的数据抓取到它的导出器中。Influx从Telegraf或客户图书馆接收多种语言的数据。第一种方法更适合微服务环境，但是设置起来更复杂。</p><p id="490c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是一个简单的事实是，influence固有地集成了Grafana特性和Alertmanager来重新洗牌。单个工具相对于三个工具的安装、配置和管理允许较小的基础架构有一个集中的监控、查看和警报解决方案。</p><p id="7edd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就查询语言而言，Flux比PromQL提供了更多的可能性来获得同样高水平的性能。与其竞争对手的简单性相比，它的冗长可能令人害怕，但是一旦掌握了语法，编写查询将是一种真正的乐趣！我认为Flux的强大功能使InfluxDB有可能用在监管以外的环境中，在这些环境中，时间序列数据库是相关的(监视股票市场价格、气象调查等)。)</p><p id="ab7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将在以后的文章中向您展示使用Telegraf + InfluxDB 2.0夫妇的完整监控和日志收集解决方案，敬请关注！</p></div></div>    
</body>
</html>