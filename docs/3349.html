<html>
<head>
<title>ML Checklist — Best Practices for a Successful Model Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ML清单——成功模型部署的最佳实践</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ml-checklist-best-practices-for-a-successful-model-deployment-2cff5495efed?source=collection_archive---------10-----------------------#2021-06-26">https://medium.com/analytics-vidhya/ml-checklist-best-practices-for-a-successful-model-deployment-2cff5495efed?source=collection_archive---------10-----------------------#2021-06-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="160e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器学习模型部署是复杂的，并且通常模型因此项目的旅程在到达部署阶段之前就结束了。VentureBeat <a class="ae jc" href="https://venturebeat.com/2019/07/19/why-do-87-of-data-science-projects-never-make-it-into-production/" rel="noopener ugc nofollow" target="_blank">报道称</a>87%的模型从未投入生产。我相信ML / DS团队可以通过在项目的不同阶段问这些<strong class="ig hi">五个</strong>问题来增加部署他们模型的机会。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/16d24073441ae63f6c58b3ffe36341ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGZUxhJZx-7Xbo2SL8IIIg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">机器学习基础设施——来源——NIPS 2015，Scully。</figcaption></figure><h2 id="1c2b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">1.您希望优化什么业务指标？</h2><p id="5f07" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">在确定项目范围之前</strong>，探索整个组织或领域中常见的不同业务度量是很重要的。这些业务指标应该作为机器学习指标(ROC — AUC、RMSE等)之间的桥梁。)，并且业务主张也应该与业务增长直接相关。例如，YouTube可能希望最大化每个用户的参与时间或点击率(CTR)。同样，贷款公司可能会将贷款拖欠率降至最低。</p><p id="4d67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">仔细选择指标可以让你对你的ML系统有一个更广泛的了解。另外，请注意，您可以选择多个指标进行跟踪。例如，Medium可以跟踪每个故事的参与时间以及每个故事的鼓掌率，同时向用户推荐故事。</p><h2 id="7c46" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">2.启发式解决你的目标有多好？</h2><p id="009b" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">一个机器学习项目的成功取决于你在项目开始前如何阐述和评估你的问题<strong class="ig hi">。适当而广泛的EDA可以让您深入了解数据。很多时候，我们在开始ML模型开发的时候甚至没有考虑启发式。我认为，为了获得一个好的基线，最好采用简单的启发式方法，而不是复杂的黑盒模型。例如，Zillow可以通过对卧室数量和位置制定一个简单的规则来显示房价，Android可以按字母顺序列出应用程序，而不是在用户层面进行推荐。</strong></p><p id="3ded" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，一个机器学习模型将优于一套以启发式为名的复杂规则。</p><p id="a8a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 3。你想如何为你的ML系统服务？</strong></p><p id="353d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有多种方式为你的ML模型服务，通常你需要在训练你的模型之前决定服务架构<strong class="ig hi">。两种最常见的架构是—</strong></p><h2 id="1477" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">预计算模型预测</h2><p id="bcfb" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">这是服务于机器学习模型的最早使用和最简单的架构之一。这是一种为模型服务的间接方法，我们预先计算输入变量的所有可能组合的预测，并将它们存储在数据库中。这种架构通常用在推荐系统中——推荐被预先计算和存储，并在用户登录时显示给用户。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/4accb0d86357c67cd2b14bc4464454a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5nN3onpcPX7wxOdCSpFEIg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">模型服务的架构—预先计算的预测。</figcaption></figure><p id="e2e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">即使我们不直接公开我们的模型，这种类型的架构也有很多优点。</p><p id="7b98" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">优点</strong>:</p><ul class=""><li id="b6b0" class="ku kv hh ig b ih ii il im ip kw it kx ix ky jb kz la lb lc bi translated"><strong class="ig hi">推理时延迟低</strong>。</li><li id="3dcc" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">轻松生产</strong>——重新训练模型并将其投入生产非常简单，耗时更少。</li><li id="134f" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">经济高效</strong> —您只需要一个数据库，不需要特殊的基础设施。</li></ul><p id="69fe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">缺点</strong>:</p><ul class=""><li id="b284" class="ku kv hh ig b ih ii il im ip kw it kx ix ky jb kz la lb lc bi translated"><strong class="ig hi">被迫使用有界数据</strong> —由于我们想要预计算所有可能组合的预测，我们需要保持独立变量空间离散且有界。因此，<strong class="ig hi">不能直接使用连续的</strong>变量。</li><li id="018e" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">每一个新的变量都是痛苦— </strong>增加一个新的变量会增加推理潜伏期、存储量等。指数增长。</li></ul><h2 id="8db9" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">基于微服务的模型服务</h2><p id="d827" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">在这里，模型独立于应用程序提供服务，并且根据请求实时提供预测。这种类型的体系结构在模型训练和部署方面提供了灵活性。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/4b4ee684f3a74fe5b4b98ac0440dc590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JGAuHEOfhiCLUKGe"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">基于微服务的模型服务架构</figcaption></figure><p id="8847" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">优点</strong>:</p><ul class=""><li id="89f0" class="ku kv hh ig b ih ii il im ip kw it kx ix ky jb kz la lb lc bi translated"><strong class="ig hi">实时预测</strong> —在线提供实时预测，并为许多应用提供目的。</li><li id="0955" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">部署灵活</strong> —作为一项独立的服务，该模型可以轻松部署，可以是内部部署、云部署或用户端部署。</li><li id="cb90" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">高度可扩展</strong> —模型是一个独立的服务，可以独立扩展。</li></ul><p id="a16d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">缺点</strong>:</p><ul class=""><li id="653e" class="ku kv hh ig b ih ii il im ip kw it kx ix ky jb kz la lb lc bi translated"><strong class="ig hi">基础设施成本</strong> —云、GPU、DB等。因此，根据模型的要求，成本可能会很高。</li><li id="97c1" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb kz la lb lc bi translated"><strong class="ig hi">低延迟优化— </strong>根据模型的复杂性，需要在推理优化方面做一些额外的工作来最小化延迟。</li></ul><h2 id="2d3b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">4.您应该何时重新培训您的模型？</h2><p id="4de8" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">机器学习模型的性能<a class="ae jc" href="https://mudittiwari255.medium.com/my-machine-learning-model-failed-learnings-2291af3c5434" rel="noopener">在生产中会随着时间的推移而降低</a>，建议在模型服务之前评估再培训要求<strong class="ig hi">。基于用例、模型监控和评估，人们可以决定何时重新训练模型。决定再培训时间的一个好方法是在不同的时间窗口使用超时分析。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/d20e3cc081a5079b0a753e881479758c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qFJFlXZxxGlaqvXZ"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">这里，模型性能在2个月后下降了5%，因此可以决定每两个月重新训练一次。</figcaption></figure><p id="a8ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上述示例仅用于说明目的，根据使用情况，再训练时间可以从几秒钟到几年不等。</p><h2 id="a3a0" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">5.您希望如何重新培训您的模型？</h2><p id="993f" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">再培训是必不可少的，它有助于保持模型的更新。大致有两种方式来重新训练机器学习模型——在线<strong class="ig hi">&amp;离线</strong> <strong class="ig hi">训练</strong>。</p><h2 id="afa0" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">在线培训</h2><p id="7c2a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">顾名思义，模型是在生产时重新训练的。真实标签以一定的时间间隔循环回模型，以更新/重新训练模型。这需要一个独立的架构，并且通常很难实现。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/da41ad79cfaa524d533c3218ab27dbb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IFSF9gM2yKTHMLah"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">用于在线模型再训练的广泛架构</figcaption></figure><p id="abe0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，当我们预测广告点击概率时，我们可以获得反馈(点击或未点击)，这些反馈可用于在线更新模型。</p><h2 id="8674" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">离线培训</h2><p id="d76a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">在离线训练中，模型是从头开始重新训练的，我们可以完全控制要训练的新模型和数据。使用A/B测试或影子测试将新模型推入生产环境。</p><h2 id="602d" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated"><strong class="ak">结论</strong></h2><p id="49ad" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">部署机器学习模型并不容易，需要考虑多种因素才能成功部署。我相信对这五个问题进行头脑风暴可以帮助确定问题，并可以使你的机器学习系统变得更好。</p><p id="b2f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢阅读。</p><p id="c32e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和平:)</p><h2 id="f0e3" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">参考</h2><ol class=""><li id="39a4" class="ku kv hh ig b ih ko il kp ip ll it lm ix ln jb lo la lb lc bi translated"><em class="lp"> D. Sculley — </em> <a class="ae jc" href="https://papers.nips.cc/paper/2015/file/86df7dcfd896fcaf2674f757a2463eba-Paper.pdf" rel="noopener ugc nofollow" target="_blank">机器学习系统中隐藏的技术债务</a>。</li><li id="0436" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb lo la lb lc bi translated">斯坦福MLSys研讨会第5集:<em class="lp">奇普胡延</em></li><li id="ba68" class="ku kv hh ig b ih ld il le ip lf it lg ix lh jb lo la lb lc bi translated">ML系统设计—斯坦福— <a class="ae jc" href="https://docs.google.com/document/d/15vCMf7SbDuxST9Q-rWtx8o7qHJQN2pE5urCDFTYI1zs/edit" rel="noopener ugc nofollow" target="_blank">第二讲</a></li></ol></div></div>    
</body>
</html>