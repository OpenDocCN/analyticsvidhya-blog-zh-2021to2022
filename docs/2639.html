<html>
<head>
<title>Implementation of MVC And REST APIs in ExpressJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ExpressJS中MVC和REST APIs的实现</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/implementation-of-mvc-rest-apis-in-expressjs-c7eb6a097b9f?source=collection_archive---------0-----------------------#2021-05-10">https://medium.com/analytics-vidhya/implementation-of-mvc-rest-apis-in-expressjs-c7eb6a097b9f?source=collection_archive---------0-----------------------#2021-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/40c9e904702dbb0be2368262c0b519d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uzB8oh4NszV_HUha"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">萨法尔·萨法罗夫在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f494" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">转到后端开发，我们有很多选择。更具体的针对web开发或者REST APIs，我们有一些技术。在当前时代，无论是web开发还是移动应用程序开发，JavaScript都在驱动着几乎每一个平台。</p><p id="2572" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在JavaScript开发领域，主要有两种开发栈被开发者大量使用，它们是MEAN栈和MERN栈。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="2ffe" class="kc kd hi jy b fi ke kf l kg kh"><strong class="jy hj">MEAN</strong><br/><strong class="jy hj">||||___ NodeJS </strong><br/><strong class="jy hj">|||</strong>____ <strong class="jy hj">AngularJS</strong><br/><strong class="jy hj">||</strong>_____ <strong class="jy hj">ExpressJS</strong><br/><strong class="jy hj">|</strong>______ <strong class="jy hj">MongoDB</strong></span><span id="f1b8" class="kc kd hi jy b fi ki kf l kg kh"><strong class="jy hj">MERN<br/>||||</strong>___ <strong class="jy hj">NodeJS</strong><br/><strong class="jy hj">|||</strong>____ <strong class="jy hj">ReactJS</strong><br/><strong class="jy hj">||</strong>_____ <strong class="jy hj">ExpressJS</strong><br/><strong class="jy hj">|</strong>______ <strong class="jy hj">MongoDB</strong></span></pre><p id="d119" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，正如您所看到的，ExpressJS在两个栈中都是通用的。ExpressJS是一个基于节点的后端框架，现在被广泛使用。</p><blockquote class="kj kk kl"><p id="74c8" class="iv iw km ix b iy iz ja jb jc jd je jf kn jh ji jj ko jl jm jn kp jp jq jr js hb bi translated"><strong class="ix hj">但是等等，什么是MVC呢？为什么需要它？</strong></p></blockquote><p id="946e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> MVC </strong>代表模型视图控制器。现在人们正朝着并行处理的方向发展，以节省资源和提高工作效率。这种方法在应用程序的编程中也被接受，在这种情况下，来自不同模块的开发人员应该尽可能少地相互依赖。因此MVC出现了。</p><p id="e78b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基本上，MVC框架是一种架构模式，它将应用程序分成三个逻辑组件:模型、视图和控制器。这些组件中的每一个都是为了完成特定的任务。这里表示层与业务逻辑是分离的，所以它确保在表示层工作的人不应该依赖于业务逻辑部分。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/1418c88d9d38fd4d987a74bc242b394c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*3BKnlYuwNKuHpERbqbSQ7Q.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:MVC架构</figcaption></figure><p id="3993" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如上图所示，我们有一个模型、视图和控制器，其中任何用户都只能与视图组件(即网页)进行交互。当用户触发特定事件时，视图将调用控制器，例如，用户想要更新他/她在数据库中的电子邮件。然后，控制器调用该流程的模型API，它将更新数据库中的数据。一旦数据更新，视图将不得不重新呈现更新的网页，因此应用程序显示最新的视图。</p><p id="2796" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MVC在ExpressJS中的实现如下。首先，通过运行下面的命令确保您的系统中已经安装了NodeJS，该命令将为您提供已安装节点的版本。关于节点的安装，请参考<a class="ae iu" href="https://www.guru99.com/download-install-node-js.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> <em class="km">本</em> </strong> </a>网站。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="d783" class="kc kd hi jy b fi ke kf l kg kh">$ node -v</span></pre><p id="b2fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为此项目创建一个新文件夹，并在此文件夹中打开命令提示符。现在键入下面的命令，这将帮助您创建一个package.json文件。为此，您必须使用npm(节点包管理器)。要了解更多关于npm的信息，请参考<a class="ae iu" href="https://docs.npmjs.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"><em class="km"/></strong></a>网站。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="aa30" class="kc kd hi jy b fi ke kf l kg kh">$ npm init</span></pre><p id="ac0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将创建一个package.json文件。现在我们需要通过运行下面的命令来安装express。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="106b" class="kc kd hi jy b fi ke kf l kg kh">$ npm install express</span></pre><p id="14b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，由于我们的应用程序的入口点是index.js，我们需要在项目文件夹中创建该文件，此外，我们需要创建三个文件夹，即模型、视图和控制器。需要知道的一点是，我们使用MongoDB作为我们的数据库服务，因此将它安装在您的系统中，您可以参考此   <em class="km"> </em>站点进行安装。现在，为了与数据库交互，我们需要通过运行以下命令来安装一些依赖项。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f4ff" class="kc kd hi jy b fi ke kf l kg kh">$ npm install mongodb<br/>$ npm install mongoose</span></pre><p id="6281" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，运行这些命令后，我们的目录结构将如下所示。其中<em class="km"> package.json </em>文件是我们项目的元数据，而<em class="km"> package-lock.json </em>文件非常有用，尤其是当不同的人在同一个项目上工作时。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4eac" class="kc kd hi jy b fi ke kf l kg kh"><strong class="jy hj">ExpressMVC</strong><br/> <strong class="jy hj">|___models</strong>  #model files lie here<br/><strong class="jy hj"> |     |___</strong>Student.js<br/> <strong class="jy hj">|___views</strong>  #view files lie here<br/> <strong class="jy hj">|___controllers</strong>  #controller files lie here<br/><strong class="jy hj"> |     |___studentController.js</strong><br/><strong class="jy hj"> |___node_modules</strong>  #npm installs modules inside this folder<br/> <strong class="jy hj">|     |___.bin</strong><br/><strong class="jy hj"> |     |___</strong><a class="ae iu" href="http://twitter.com/sindresorhus" rel="noopener ugc nofollow" target="_blank"><strong class="jy hj">@sindresorhus</strong></a><br/><strong class="jy hj"> |     |</strong><br/><strong class="jy hj"> |      .    .    .</strong><br/><strong class="jy hj"> |      .    .    .<br/> |     |<br/> |     |___xdg-basedir<br/> |___index.js</strong>  #main express server file to run application<br/><strong class="jy hj"> |___package.json</strong>  #project metadata file<br/><strong class="jy hj"> |___package-lock.json</strong></span></pre><blockquote class="kj kk kl"><p id="10ca" class="iv iw km ix b iy iz ja jb jc jd je jf kn jh ji jj ko jl jm jn kp jp jq jr js hb bi translated">现在让我们转向REST APIs</p></blockquote><p id="3eb0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基本上，REST代表表示的传输，API代表应用程序，是信息提供者和信息使用者之间的接口。为此，API遵循基于请求-响应的体系结构，并向用户提供信息。当客户机需要来自服务器的数据时，它将以XML、HTML、Python、PHP或JSON的形式共享状态。如今，JSON的意思是,<strong class="ix hj">J</strong>ava<strong class="ix hj">S</strong>script<strong class="ix hj">O</strong>object<strong class="ix hj">N</strong>rotation，因为它容易被人和计算机阅读，所以被广泛使用。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/198c9b46aa107a9c720352066176ffe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*GePEgxTg_hxYeOR22DdAfw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:REST API架构</figcaption></figure><p id="52d4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">REST APIs也称为RESTful APIs。REST APIs使用GET、POST、PUT、DELETE等HTTP方法。因此，为了创建REST APIs端点，有必要在我们的ExpressJS服务器中实现HTTP方法。这些端点将能够通过一些功能与数据库进行交互，并能够将结果返回给用户。对于交互，我们将为数据库表创建一个模型，它将负责执行与数据库相关的操作。这里，我们将创建一个基本的学生模式，如下所述。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="kr ks l"/></div></figure><p id="b84b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，函数将使用这个模式来执行与数据库相关的操作。现在控制器将进入画面，因为它包含与数据库查询相关的重要功能。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="kr ks l"/></div></figure><p id="71fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我为操作定义了函数，例如在数据库中创建一个新的用户条目、获取所有学生的详细信息、获取特定学生的详细信息、更新学生的详细信息以及从数据库中删除学生数据。这些函数将被导入到我们的主应用程序文件index.js中，并按照如下所示的要求被调用。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="kr ks l"/></div></figure><p id="f298" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我们的应用程序已经准备就绪。为了测试基于REST APIs的应用程序，我们需要一个Postman应用程序，它非常容易使用，并且在测试中也很重要。你可以从<a class="ae iu" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> <em class="km">这个</em> </strong> </a>链接下载邮差。现在，我们将通过运行以下命令来启动我们的服务器。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="cf2c" class="kc kd hi jy b fi ke kf l kg kh">$ npm start</span></pre><p id="4fb2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们准备开始我们的应用程序。启动postman，选择请求类型POST，输入URL，输入数据，然后按send，如下图所示，您将得到回复。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/9eee29dec64cc0bff8e8c0e45903699c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B8Cgu8C2Dpoobw0fQIhJkQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:向数据库添加新学生</figcaption></figure><p id="72e9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，当我们按下send时，请求的主体中会有数据，它将被传递给函数，然后函数将被传递给我们的模型学生，最后，这个对象将被存储在数据库中。现在，我们可以通过调用get方法来获取学生列表，如下所示。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/a74a00222b7af9f9355944d91c4c5733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lO_sFQDjCmv6Li5xS0ehvQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:从数据库中获取学生列表</figcaption></figure><p id="0817" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以从id中得到一个特定的学生，如下所述。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ku"><img src="../Images/871541eff569edd7962c43f5b18add9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQcOdiKCCovm3iWCfa22lg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:通过id获取特定学生</figcaption></figure><p id="9522" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以使用HTTP的PUT方法来更新数据库中的数据，绕过用户的特定id，如下所示。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/9855af147b1f188cf12118e2f87877ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uGsJp9R3mJNR_p8hU11Gbg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:按id更新学生信息</figcaption></figure><p id="34e9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">也可以通过调用HTTP的DELETE方法进行删除，特定学生的数据将从数据库中删除，如下所示。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/4d3e5148c105726bf0a2105078233bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qW_uZW_myq5zVG494GSlgg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片:按id删除学生信息</figcaption></figure><p id="f9f3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于前端部分不是本文讨论的一部分，您可以自己创建它。通过将前端文件放在视图文件夹中，您可以获得对REST APIs的响应，并在您的前端漂亮地格式化它们，这看起来很酷。</p><h1 id="8910" class="kx kd hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">结论</strong></h1><p id="fc0d" class="pw-post-body-paragraph iv iw hi ix b iy lu ja jb jc lv je jf jg lw ji jj jk lx jm jn jo ly jq jr js hb bi translated">该应用程序可以作为后端集成到任何项目中，无论是web应用程序还是移动应用程序，因为该应用程序基于API调用为客户端提供服务，因此两种方式都是可行的。更多参考，可以从<a class="ae iu" href="https://github.com/IndianCoder25/Implementation-of-REST-APIs-MVC-in-ExpressJS" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> <em class="km">这里</em> </strong> </a> <strong class="ix hj"> <em class="km">访问我的GitHub回购。</em> </strong></p></div></div>    
</body>
</html>