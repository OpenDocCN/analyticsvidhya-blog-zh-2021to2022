<html>
<head>
<title>Understanding “Exponential Moving Averages” in the light of Data Science.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从数据科学的角度理解“指数移动平均线”。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understanding-exponential-moving-averages-e3f020d9d13b?source=collection_archive---------0-----------------------#2021-10-25">https://medium.com/analytics-vidhya/understanding-exponential-moving-averages-e3f020d9d13b?source=collection_archive---------0-----------------------#2021-10-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="eb85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">毫无疑问，当进行任何形式的统计分析时，均线都起着至关重要的作用。简单来说，移动平均线通过平均数据点中的经验给出了对过去的直觉。就这一点而言，我认为“数学”不仅仅是一门学科，而且是一个伟大的工具包，以可以量化和测量的方程形式捕捉生命的概念。是不是很美:)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0f56b0b87fa3495a6e645c90894c8e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hks5c7coEa_TvXSLKfu2A.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">马克西姆·霍普曼在<a class="ae jt" href="https://unsplash.com/s/photos/graphs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="46ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">EMA并不是什么新鲜的话题，有大量的文章和内容阐述了EMA的概念，但主要是从有限的角度，主要是在金融交易的背景下，例如<em class="ju"/><a class="ae jt" rel="noopener" href="/@CryptoTutor/a-short-explanation-simple-and-exponential-moving-averages-117641457c10"><em class="ju">EMA 12&amp;EMA 26</em></a><em class="ju"/><strong class="ih hj">【1】</strong>或者主要是在时间序列分析<em class="ju"/><strong class="ih hj">【2】</strong>的背景下。然而，在本文中，我想从数据科学的多个角度来讨论EMA作为一个基本&amp;通用基本概念的重要性。</p><p id="1622" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章的结构如下:</p><ul class=""><li id="4dc8" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">一般EMA定义和直觉。</li><li id="bb44" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">时间序列中的均线。</li><li id="6701" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">强化学习。</li><li id="b0ff" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">神经网络/深度学习中的EMA。</li><li id="7d69" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">结论</li><li id="e5de" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">参考文献</li></ul></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="dde6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">定义</strong>:简单来说，“移动平均线”是一种确定趋势方向的统计工具，为了做到这一点，它通常在一个特定的时间段内聚合一个数据点子集，并将总数除以子集中的数据点数，从而得出一个平均值。之所以称之为移动平均值，是因为这种计算会随着数据点随时间的增长而递归发生。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/cfde4b7c62558876ec1450f87ad5ec46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0MoSMFaVI7lU-d08"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@mattartz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马特·阿特兹</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="ab58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">指数移动平均线是一种移动平均线，它对最近的数据点比过去的数据点施加更多的权重。换句话说，这就像给予最后的经历或记忆比旧的更重要，假设那些是由数据点表示的。</p><p id="e548" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下等式描述了计算指数移动平均线的公式:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kr"><img src="../Images/c68a986130d1609cf2cd20aa5b6a4013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*IB43E9oZbLzaPE75g21NzQ.png"/></div></figure><p id="df7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中<strong class="ih hj"> α </strong>是平滑参数，并且在0和1之间。这也用于以最简单的方式产生一步预测。例如，下面的公式揭示了如何使用均线预测股票的<em class="ju">价格</em>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ks"><img src="../Images/eae2ba006e784fa2f1f1583923cb78b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*MTpzIjTIZmX-2VU0pm7Y9Q.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kt"><img src="../Images/eaf69eac5f5fb55696fbb988870e8347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*FIIVHnK_PPylygxDok6pzQ.jpeg"/></div></figure><p id="ac83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注:还有其他类型的移动平均线，如加权移动平均线、累计移动平均线等。然而，这篇文章的重点只是均线。总而言之，</p><ul class=""><li id="701f" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">SMA(简单移动平均)赋予<strong class="ih hj"> <em class="ju">等于</em> </strong>的权重给过去的值，</li><li id="6375" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">WMA(加权移动平均)给<strong class="ih hj"><em class="ju"/></strong>线性递减的权重到过去的值，</li><li id="1ae2" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">EMA(指数移动平均线)给<strong class="ih hj"> <em class="ju">以指数</em> </strong>递减的权重到过去的值。</li></ul></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="046d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">时间序列中的均线</strong>:在时间序列方法中，均线通常用于指数平滑法，如下表所示。根据要分析的时间序列中存在的成分，可以使用各自的模型以EMA为核心进行预测。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/17f1c6781050e5d99b7c65401e6605fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GmuEm15-afFuf6hj.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">ETS框架中每个模型的状态空间方程</figcaption></figure><p id="cafa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请参考罗伯·J·海曼和乔治·阿萨纳索普洛斯<em class="ju"/><strong class="ih hj">【3】</strong>的<a class="ae jt" href="https://otexts.com/fpp3/" rel="noopener ugc nofollow" target="_blank"> <em class="ju">《预测:原理与实践》。</em></a></p><p id="b811" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">强化学习中的EMA:</strong>在强化学习(RL)的背景下，或者更准确地说，在<em class="ju"> n臂土匪</em>问题中(因为完整的RL具有“状态”和“策略”来学习长期奖励)，对于非平稳问题，所选动作的期望值被给定为:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/e762bd349fabe278bdedc76e6cf5d816.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*AiXyH4gQhdsPRzX3sQe_ww.png"/></div></figure><p id="a81b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中步长参数α ϵ (0，1)是常数。在上面，Qₖ₊₁是新的估计，而Qₖ是旧的估计，Rₖ是行动的第<em class="ju"> k </em>个奖励。</p><p id="be7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这导致Qₖ₊₁是过去奖励和初始估计Q₁:的加权平均值</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/618f12d2b34c1729bdf17eef1c2641a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*8UFiRSjpele3ozqqIhiH6w.png"/></div></figure><p id="8574" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数量1- α小于1，因此给予Rᵢ的权重随着中间奖励数量的增加而减少。如果1- α = 0，那么所有的重量都在最后一个奖励上，Rₖ，因为惯例是0⁰ =1。</p><p id="f152" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实上，如果我们重新排列上面的等式，我们会得到一个类似于用均线预测价格的等式，即Qₖ₊₁ = Qₖ + α(Rₖ - Qₖ).</p><p id="57c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，M. D Awedha等人在他们的论文“<a class="ae jt" href="https://ieeexplore.ieee.org/document/6614986" rel="noopener ugc nofollow" target="_blank"> <em class="ju">指数移动平均Q学习算法</em></a>”<strong class="ih hj">【4】</strong>中已经展示了结合Q学习算法(RL算法之一)对多智能体情况的EMA的使用。</p><p id="fc68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">神经网络/深度学习中的EMA:</strong>在深度学习中，EMA的使用可以被视为基于梯度的随机目标函数的优化算法的基础，例如在具有动量的梯度下降、AdaGrad、RMSProp等中。基本思想是评估梯度的指数加权平均值，然后使用结果来更新权重。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/bf371e2c2bc3b746103c0db88fb34727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*gspi5k71n7a4_fDYeqQQjw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用动量算法的SGD来源:改进深度神经网络:通过深度学习进行超参数调整、正则化和优化。人工智能</figcaption></figure><p id="beaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，具有上述动量算法的SGD描述了如何使用指数移动平均方程来评估速度'<em class="ju"> v' </em>，如右侧所示。</p><p id="259d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过选择<strong class="ih hj"> β </strong>值，我们可以控制在计算平均值时最后N个数据点的权重。1/1- <strong class="ih hj"> β </strong>是一个简单的方法来记住这个权重是如何应用的。当<strong class="ih hj"> β </strong>为0.9时，我们将对最后10个数据点进行平均，而当<strong class="ih hj"> β </strong>为0.98时，我们考虑了最后50个数据点，因此对这50个数据点进行平均。</p><p id="accc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过在更大的窗口上求平均值，当数据改变时，平均值适应得很慢。这是因为以前的值被赋予了很大的权重，而新值被赋予了小得多的权重。</p><p id="33bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不仅在收敛方面优化，而且在计算资源方面，EMA是一种计算平均值的高效方法。我们不需要太多的内存或计算能力来计算这个平均值。特别是，在神经网络/深度学习的背景下，当需要大量计算来训练模型时，这种优化不仅仅是增值，而是必要的。</p><h1 id="3dc1" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="4ac5" class="pw-post-body-paragraph if ig hi ih b ii lw ik il im lx io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">综上所述，指数移动平均线，从数据科学的整体角度来看，很有意义。如上所述，这在不同的数据科学方法和概念中的使用更加明显。因此，对这一构建模块的深入理解将真正有助于建立对许多数据科学概念的牢固理解，并推断出它们之间的相关性。</p><h1 id="f70f" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">参考资料:</h1><ol class=""><li id="d962" class="jv jw hi ih b ii lw im lx iq mb iu mc iy md jc me kb kc kd bi translated"><a class="ae jt" href="https://levelup.gitconnected.com/trading-using-python-exponential-moving-average-ema-f38ed3211a44" rel="noopener ugc nofollow" target="_blank">如何用Python进行交易？使用Python进行交易——指数… |作者:Michael Whittle | Level Up编码(gitconnected.com)</a></li><li id="375e" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc me kb kc kd bi translated"><a class="ae jt" href="https://towardsdatascience.com/time-series-from-scratch-exponentially-weighted-moving-averages-ewma-theory-and-implementation-607661d574fe" rel="noopener" target="_blank">时间序列从无到有——指数加权移动平均(EWMA)理论和实施| Dario rade ci |走向数据科学</a></li><li id="598b" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc me kb kc kd bi translated">Hyndman，R.J .，&amp; Athanasopoulos，G. (2021) <em class="ju">预测:原理与实践</em>，第三版，原文:澳大利亚墨尔本。OTexts.com/fpp3.</li><li id="232c" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc me kb kc kd bi translated">米（meter的缩写））D. Awheda和H. M. Schwartz，“指数移动平均Q-学习算法”，2013年IEEE自适应动态规划和强化学习研讨会，2013年，第31–38页，doi:10.1109/ADPRL . 2013 . 11110136323</li></ol></div></div>    
</body>
</html>