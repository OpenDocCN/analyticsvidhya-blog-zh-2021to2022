<html>
<head>
<title>Web scraping with Selenium: Why your code works but returns an empty list still.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Selenium进行Web抓取:为什么您的代码可以工作，但仍然返回一个空列表。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-with-selenium-why-your-code-works-but-returns-an-empty-list-still-f736cbe761a2?source=collection_archive---------3-----------------------#2021-10-25">https://medium.com/analytics-vidhya/web-scraping-with-selenium-why-your-code-works-but-returns-an-empty-list-still-f736cbe761a2?source=collection_archive---------3-----------------------#2021-10-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d87e8bf668bdbd38224c6ac6b64cc795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJhkmyc4VUBf52Z3vwIy9Q.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">scrapingexpert.com</figcaption></figure><p id="8227" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这篇文章中，我将展示我是如何从圣地亚哥网站Doordash的一个页面上搜集餐馆、类型、评级、受欢迎的项目和价格细节的。同时保持数据完整性，使得餐馆A不会以餐馆B的菜单或餐馆D的价格结束。本文陈述并解决了为什么即使代码是正确的，你的列表仍然返回空值的一些原因。这可能是因为:</p><ol class=""><li id="9da7" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">菜单和价格是隐藏的，直到点击一个下拉按钮。该算法需要点击这个按钮，以便收集细节，并由美丽的汤解析。</li><li id="376d" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">与餐馆等其他参数不同，对于一个商店，每个标记有一个值，菜单和价格在一个商店的一个标记中各有两到三个值。</li><li id="6488" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">菜单和价格的每个标签的多个值创建了嵌套列表，使得不可能使用get_text()函数来获取这些值。</li></ol><p id="e4aa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">硒是万能钥匙，你想有当谈到刮网站。因为它的过程是类似人类的，所以它可以绕过大多数防火墙来阻止像美丽的汤这样的库。关于网站的事情是，它们就像人脸，它们有自己独特的特征，所以当你使用Selenium来抓取时，你真的需要认真对待html/元素检查方面，否则你会陷入兔子洞，变得比疯帽子自己还疯狂。</p><p id="ea73" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我通过以下方式处理菜单和价格值:</p><ol class=""><li id="fd46" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">将它们存储在单独的列表中，而不调用get_text()函数</li><li id="041d" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">然后，我将每个列表转换成单独的数据帧</li><li id="7309" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">对每个数据框中的所有列应用了一个函数，以获取带有if条件的文本值，从而绕过None值。</li><li id="7a75" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">每个数据框中的列被合并为一列</li><li id="49b4" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">两个处理后的数据帧通过索引与包含其余参数的数据帧合并。</li></ol><p id="8684" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是完整的代码。</p><p id="a960" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">洛巴丹！(翻译过来就是‘都搞定了！“在约鲁巴语中)</p><figure class="kg kh ki kj fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="3568" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将最终的df转换成csv文件后，下面是我的csv文件截图，可以看到餐厅，类型，位置，评分，菜单和对应的价格。</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/4be1d9d61a54b5e8ecbcb0d205510e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skQ3z0Sk0mc492eIRsdHAg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Doordash csv文件屏幕截图。</figcaption></figure><div class="kn ko ez fb kp kq"><a href="https://github.com/oluwatobij4/Web-scraping-with-selenium.git" rel="noopener  ugc nofollow" target="_blank"><div class="kr ab dw"><div class="ks ab kt cl cj ku"><h2 class="bd hj fi z dy kv ea eb kw ed ef hh bi translated">GitHub-oluwatobij 4/we b-scraping-with-selenium:处理嵌套标签列表和隐藏参数…</h2><div class="kx l"><h3 class="bd b fi z dy kv ea eb kw ed ef dx translated">使用selenium来webscrape - GitHub时处理嵌套标签列表和隐藏参数…</h3></div><div class="ky l"><p class="bd b fp z dy kv ea eb kw ed ef dx translated">github.com</p></div></div><div class="kz l"><div class="la l lb lc ld kz le io kq"/></div></div></a></div></div></div>    
</body>
</html>