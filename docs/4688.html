<html>
<head>
<title>Association Rule Mining Including Apriori Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">包含Apriori算法的关联规则挖掘</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/association-rule-mining-including-apriori-algorithm-8c0f9888e125?source=collection_archive---------1-----------------------#2022-01-02">https://medium.com/analytics-vidhya/association-rule-mining-including-apriori-algorithm-8c0f9888e125?source=collection_archive---------1-----------------------#2022-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b72c7b966fad6b39dff57c12d57741cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oZ_5b6y4WmIwOIlJ.png"/></div></div></figure><p id="f850" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">超市有大量的顾客进入商店，作为店主，他们需要决定什么产品可以放在哪个货架上等等。所以下周商店决定推出新的Iphone，但是他们需要决定用什么来搭配它，我们如何吸引顾客等等..因此，为了回答这些问题，该公司进行了数据挖掘，并试图找到项目之间的关联。</p><h1 id="e924" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">项目集</h1><p id="ceec" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">项目集是客户一起购买的两个或更多相似项目的集合。</p><p id="779f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，面包和黄油、纸和笔、笔记本电脑和充电器等</p><p id="d508" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们把这种面包和黄油作为顾客经常购买的商品。商店决定在优惠活动中推出<em class="kr">鸡蛋，那么顾客可能也会购买鸡蛋。所以这些都是<em class="kr">物品之间的关联</em></em></p><h1 id="0cf4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">关联规则</h1><p id="0541" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">关联规则是if→then格式。所以如果用户买A，那么他就买b。这被称为<em class="kr">单一基数。</em></p><blockquote class="ks kt ku"><p id="d882" class="iq ir kr is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">基数是特定集合中项目的数量。所以如果有一个集合，比如A={1，2，3}，那么它的基数是3。</p></blockquote><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/e669b23fdd67d3b8a7f1fab5e4ff9e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*DzjKcik3Dyj2LVGLK8bmsg.png"/></div></figure><p id="4e7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">表示在同一笔交易中，人们会一起购买A和B。</p><p id="3fef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">a称为前因，B称为后果。</p><p id="3814" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以这些联想可以增加如面包、黄油、鸡蛋和钢笔、纸、铅笔等。当它增加时，基数变成倍数</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/ccd04a8267d391020947b5aec1f146fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*n7_xiEmkZYedpmf8wniM0w.png"/></div></figure><h1 id="6112" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">关联规则的度量</h1><p id="1618" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">这些规则通过以下方式进行衡量</p><ul class=""><li id="d3c5" class="le lf hi is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm bi translated">支持</li><li id="3754" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">信心</li><li id="7728" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">电梯</li></ul><h1 id="ed34" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">支持</h1><p id="a9c4" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">它是用户购买商品的频率和用户在同一交易中购买商品的频率的组合</p><p id="5785" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">支持的用途是过滤掉不太频繁购买的物品，将其剔除。</p><p id="7266" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kr">Support = freq(A)/N</em></strong></p><p id="50a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kr"> Support = freq(A，B)/N </em> </strong>其中N为事务数，freq为A出现或A和B出现的事务数。</p><h1 id="3a51" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">信心</h1><p id="e53e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">它表示在给定A一个接一个出现的次数的情况下，A和B一起出现的频率。</p><p id="727a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">置信度的用途是发现当用户频繁地购买A、B而不是C时，我们可以消除关联规则</p><p id="6c97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kr">置信度=freq(A，B)/freq(A) </em> </strong></p><p id="4da5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然我们制定了这些规则，比如说对于交易，我们有5000条规则，但是对于每一个项目来说，计算规则是不可能的。所以我们引入了另一个度量，即Lift。</p><h1 id="f958" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">电梯</h1><p id="7c05" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">它表示任何规则的力量。</p><p id="db97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">电梯的使用是我们可以确定随机性的发生，而不是协会和消除规则。</p><p id="4a67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kr">Lift = Support/Support(A)* Support(B)</em></strong></p><p id="2903" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管我们发现规则的强度和关联，但公司的要求每次都不同。所以公司固定<strong class="is hj"> <em class="kr">最低支持和信心。</em> </strong>所以超出特定阈值的只有关联规则被选中。</p><h1 id="5600" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">支持、信心和提升的例子</h1><p id="a47e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">有五个项目被命名为A、B、C、D、E，并且有5个交易与规则一起给出。计算支持度、置信度和提升表如下。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/501e43f584d9f99233f319315a12b5ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*fG4DzXobnH__UyXaTNM4ig.png"/></div></figure><h1 id="ac92" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">频繁项目集</h1><p id="9bda" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">频繁项集是那些支持度大于阈值或用户指定的最小支持度的项。这意味着如果A &amp; B一起是频繁项集，那么单独的A和B也应该是频繁项集。</p><p id="c2f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设有两个事务:A= {1，2，3，4，5}和B= {2，3，7}，在这两个事务中，2和3是频繁项集</p><h1 id="08a4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Apriori算法</h1><p id="be42" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">它用于高效地逐级生成频繁项集，从而减少搜索空间</p><blockquote class="ks kt ku"><p id="b3a5" class="iq ir kr is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated"><em class="hi">规则:所有aa频繁项集的非空子集也必须是频繁的。</em></p></blockquote><p id="fa24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">先验有两个步骤</p><ul class=""><li id="187f" class="le lf hi is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm bi translated">Join — (K+1)来自K的项目集</li><li id="a6ff" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">修剪——计数<minimum support="" values=""/></li></ul><h1 id="92ba" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Association Rule Mining</h1><p id="f03f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">There are 2 steps.</p><ul class=""><li id="c807" class="le lf hi is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm bi translated">Find all frequent itemsets using Apriori Algorithm or FD-Growth</li><li id="0033" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">Association Rules from Frequent Item Sets ( Minimum Support and Confidence threshold)</li></ul><h1 id="60c3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Eg for Association Rule Mining using Apriori</h1><p id="224f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Minimum Support = 2 and Minimum Confidence = 60%</p><p id="06dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Each Candidate/Product are I1, I2, I3, I4 and I5</p><ul class=""><li id="2d20" class="le lf hi is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm bi translated">We have to start with single cardinality find the support count</li><li id="544b" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">Then check whether the support_count<minimum support="" and="" eliminate="" the="" items=""/></li><li id="a532" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">Increase the cardinality and do the previous steps again until the set becomes empty</li></ul><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/67d1657db1aacd0e79103cb67e3900a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*fdcrkf4oS2xKoO15bMwxKg.png"/></div></figure><p id="0827" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">The above step is called as C1 or 1 frequent Itemset .</p><p id="b5c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">If we compare that with the Minimum Support = 2 all the items are satisfying the criteria so we can call that as L1.</p><p id="0bd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">So from L1 → we have to compute C2 and from there we derive L2.</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/d03a4693dbea7e0cdcbeb20b737685b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*wwp0ZgdPf9VE52qpW0nEeA.png"/></div></figure><p id="70c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Increase the cardinality or frequent itemsets as 3 and find the itemsets satisfying computing L3.</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/50e2a211e80a95eedac99c1542e8da5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*y9GyqT5YI5P-3qC_xx5GYw.png"/></div></figure><p id="337c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">The solution is L3 and it is computed using the formula given below</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/a83af383a2c30a9ffe1d6f8e4053435b.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/format:webp/1*L8EMLSicJctJbzYpWBAkEQ.png"/></div></figure><p id="d197" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">The frequent itemsets are <strong class="is hj"> <em class="kr"> I1，I2，I3和I1，I2，I5。</em>T9】</strong></p><h1 id="afa9" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">关联规则</h1><ul class=""><li id="1b24" class="le lf hi is b it km ix kn jb lw jf lx jj ly jn lj lk ll lm bi translated">对于每个频繁项集l，生成l的所有空子集</li><li id="ea81" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">对于l的每个非空子集S，输出规则$S=&gt; (l-S)$</li></ul><p id="9676" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们以频繁项集I1，I2，I5为例。</p><p id="2e7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I1 → I2 ^ I5</p><p id="9bbd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I2 → I1 ^ I5</p><p id="68fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I5→I2^I5</p><p id="c77a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I1^I2→I5</p><p id="68bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I1^I5→I2</p><p id="3c44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I2^I5→I1</p><p id="f91b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">I1^I2^I5→empty所以我们可以忽略这条规则</p><p id="dc68" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">计算置信度，如果它小于最小置信度，那么我们可以忽略这个规则</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/3874709f811660417058209a818670b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*814i3i_2pRn01Zf6inBIuw.png"/></div></figure><h1 id="16c6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">先验的应用</h1><ul class=""><li id="c7b9" class="le lf hi is b it km ix kn jb lw jf lx jj ly jn lj lk ll lm bi translated">电子商务中的推荐系统</li><li id="29fc" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">数据挖掘</li><li id="beed" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">超市提高销售业绩</li><li id="6cd1" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">具有病历记录的医疗领域</li></ul></div></div>    
</body>
</html>