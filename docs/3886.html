<html>
<head>
<title>Dealing with Missing Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理缺失值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/dealing-with-missing-values-432d06ab4049?source=collection_archive---------2-----------------------#2021-08-05">https://medium.com/analytics-vidhya/dealing-with-missing-values-432d06ab4049?source=collection_archive---------2-----------------------#2021-08-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie if ig"><p id="e221" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated"><em class="hh">第一部分</em> <a class="ae jg" rel="noopener" href="/analytics-vidhya/a-data-cleaning-journey-2b0146407e44"> <strong class="ik hi"> <em class="hh">一次数据清理之旅</em> </strong> </a></p></blockquote><p id="9b51" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">您已经阅读了“数据清理之旅”系列的第一篇文章！</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/c89caf72fd0fe404051ebc38f3f0fa64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/0*DMglKCxbym_NwTF9.jpg"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自<a class="ae jg" href="http://www.hubresearch.ca/bridging-the-data-gap-how-to-deal-with-missing-data-in-observational-studies/" rel="noopener ugc nofollow" target="_blank"> Hub research </a></figcaption></figure><p id="63f4" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi jw translated"><span class="l jx jy jz bm ka kb kc kd ke di">不</span>人们喜欢数据清理。这可能非常令人沮丧。尤其是当你正在处理丢失的值并且有截止日期的时候。</p><blockquote class="ie if ig"><p id="c0a3" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">您需要给自己一些时间来处理数据科学过程中的数据清理部分。</p></blockquote><p id="e62d" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">有时您会想知道如何处理数据集中缺失的值。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es kf"><img src="../Images/3455833bb55f4d94c584b4bcb977bbd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mAqZaSQJU4wVZFNH.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated"><a class="ae jg" href="https://analyticsindiamag.com/5-ways-handle-missing-values-machine-learning-datasets/" rel="noopener ugc nofollow" target="_blank">分析印度杂志有限公司</a></figcaption></figure><p id="9751" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">当您最终拥有一个干净的数据集时，您的分析将运行得更快，您也可以更快地得出见解。</p><p id="f8c5" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated"><strong class="ik hi">刷新关于熊猫和Numpy？</strong></p><p id="7ad2" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">重要的事情先来。我假设你知道如何使用熊猫和NumPy库。如果没有，这里有一些好的资源链接，您可以使用它们来更新:</p><ol class=""><li id="1d8e" class="kk kl hh ik b il im ip iq jh km ji kn jj ko jf kp kq kr ks bi translated"><a class="ae jg" href="https://annwambui.medium.com/introduction-to-pandas-dataframes-part-1-51ecca298122" rel="noopener">熊猫数据帧介绍第一部分</a></li><li id="5c87" class="kk kl hh ik b il kt ip ku jh kv ji kw jj kx jf kp kq kr ks bi translated"><a class="ae jg" href="https://www.kaggle.com/learn/pandas" rel="noopener ugc nofollow" target="_blank">熊猫-卡格尔</a></li><li id="6a4d" class="kk kl hh ik b il kt ip ku jh kv ji kw jj kx jf kp kq kr ks bi translated">对NumPy，熊猫和Matplotlib的介绍</li></ol></div><div class="ab cl ky kz go la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ha hb hc hd he"><h2 id="9620" class="lf lg hh bd lh li lj lk ll lm ln lo lp jh lq lr ls ji lt lu lv jj lw lx ly lz bi translated">首先让我们看看我们将使用的数据</h2><p id="2eda" class="pw-post-body-paragraph ih ii hh ik b il ma in io ip mb ir is jh mc iv iw ji md iz ja jj me jd je jf ha bi translated">我们将使用熊猫来加载和查看数据。数据集可以在<a class="ae jg" href="https://www.kaggle.com/maxhorowitz/nflplaybyplay2009to2016?select=NFL+Play+by+Play+2009-2018+%28v5%29.csv" rel="noopener ugc nofollow" target="_blank">这里</a>找到，笔记本<a class="ae jg" href="https://github.com/3liud/a-data-cleaning-journey" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="88a0" class="lf lg hh bd lh li lj lk ll lm ln lo lp jh lq lr ls ji lt lu lv jj lw lx ly lz bi translated">首先，我们导入必要的库并读入数据集</h2><pre class="jl jm jn jo fd mf mg mh mi aw mj bi"><span id="1ba9" class="lf lg hh mg b fi mk ml l mm mn">#<em class="ij">import libraries</em></span><span id="3f47" class="lf lg hh mg b fi mo ml l mm mn">import pandas as pd<br/>import numpy as np</span><span id="5df7" class="lf lg hh mg b fi mo ml l mm mn">#<em class="ij">reading in the dataset</em></span><span id="cb35" class="lf lg hh mg b fi mo ml l mm mn">data = pd.read_csv("NFL2009-2018 (v5).csv")<br/>data.head()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mp"><img src="../Images/26e5d151dabece3f57a2f1afcfc4a506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qzyg-9JRr1sPNlEer8MdpA.png"/></div></div></figure><p id="559b" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">我们的数据集有255列。上面的代码片段只显示了5列。下一步是查看数据集中有多少缺失值或空值。</p><p id="a44d" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated"><strong class="ik hi">让我们检查一下缺失的数据点</strong></p><p id="3091" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">我们使用下面的代码来做到这一点。第一行检查缺少值的列，而第二行仅用于显示前10列以及有多少行缺少值。</p><pre class="jl jm jn jo fd mf mg mh mi aw mj bi"><span id="6f96" class="lf lg hh mg b fi mk ml l mm mn"># <em class="ij">Checking missing values</em></span><span id="d2cc" class="lf lg hh mg b fi mo ml l mm mn">missing_values = data.isnull().sum()<br/>missing_values[0:10]</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mq"><img src="../Images/ba00b1a556daaeca5e19ccce4b6fe86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*wqs6bWvClnOIXn4aIiJo6Q.png"/></div></figure><p id="8cc1" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">从上图中，我们了解到，在前10列中，有5列带有missign值。</p><h2 id="f709" class="lf lg hh bd lh li lj lk ll lm ln lo lp jh lq lr ls ji lt lu lv jj lw lx ly lz bi translated">为什么我们会有缺失数据？</h2><p id="e0ad" class="pw-post-body-paragraph ih ii hh ik b il ma in io ip mb ir is jh mc iv iw ji md iz ja jj me jd je jf ha bi translated">在处理丢失的值之前，了解丢失值的原因是很重要的。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mr"><img src="../Images/2791bf076d659febac78065dfe4f27a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FX7fQZwXKJTKGleq_8dBA.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">布雷特·乔丹在<a class="ae jg" href="https://unsplash.com/s/photos/missing-piece?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="efe5" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">你可能会问，那么这个缺失数据的问题从何而来？</p><p id="f7b5" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">一些丢失的数据可能是人为错误造成的。在记录中输入数据的人可能犯了一个错误，遗漏了一些数据。但这不是唯一的原因。在其他情况下，当回答调查或问卷的问题时，你可能不愿意提供一些数据，如家庭收入或你养的小猫数量:)这可能是数据缺失的一个原因。</p><p id="34b5" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated"><strong class="ik hi">处理缺失值的不同方法。</strong></p><ol class=""><li id="3482" class="kk kl hh ik b il im ip iq jh km ji kn jj ko jf kp kq kr ks bi translated"><strong class="ik hi">删除缺失值</strong></li></ol><p id="541e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">删除值不是处理缺失数据的最佳方式。你分析的目的是得出最重要的见解。如果你删除了数据，你就降低了你将获得的洞察力的重要性。但是我们如何着手丢弃丢失的值呢？</p><p id="a98e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">如果您因为缺少值而决定删除缺少的列，您可以这样做…</p><pre class="jl jm jn jo fd mf mg mh mi aw mj bi"><span id="3f01" class="lf lg hh mg b fi mk ml l mm mn"># drop columns with missing values</span><span id="3b61" class="lf lg hh mg b fi mo ml l mm mn">columns_without_na = data.dropna(axis=1)<br/>columns_without_na.head()</span></pre><p id="fa79" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">上面的代码删除了任何缺少值的列。结果如下所示:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ms"><img src="../Images/38177c519092647c933cf9c879fed369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TBIHzmB2YjSogo-CWwxiqg.png"/></div></div></figure><p id="0f9b" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">如果您还记得上面的内容，我们的数据集中最初有255列。删除丢失的值只得到50列。要丢弃的数据太多了！</p><figure class="jl jm jn jo fd jp"><div class="bz dy l di"><div class="mt mu l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated"><a class="ae jg" href="http://gph.is/2flOdbz" rel="noopener ugc nofollow" target="_blank">吉菲</a></figcaption></figure><p id="c5cc" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">如果我们决定删除所有缺少值的行，情况会更糟</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mv"><img src="../Images/74ff9aefad105ba7198ea8417ab9de16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8u7CJGWon0XSubfqmmcjQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">这将删除数据集中的所有行</figcaption></figure><p id="c219" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">2.<strong class="ik hi">输入缺失值</strong></p><p id="0160" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">简单地说，输入就是按照您的意愿用适当的数据替换丢失的值。然而，无论您决定使用哪种算法或方法来估算缺失值，都会导致信息的丢失。</p><p id="09f8" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">您正在引入一个缺失的值。“缺失值”本身就是一条信息。输入值强化了模式，但不一定增强了数据中的信息。</p><pre class="jl jm jn jo fd mf mg mh mi aw mj bi"><span id="994f" class="lf lg hh mg b fi mk ml l mm mn"># <em class="ij">impute or replace missing values with 0<br/>data.fillna(0)</em></span><span id="68cd" class="lf lg hh mg b fi mo ml l mm mn"><em class="ij"># fill missing values with a string <br/>data.fillna("data missing")</em></span><span id="5448" class="lf lg hh mg b fi mo ml l mm mn"><em class="ij"># fill missing values with mean of specific column</em><br/>data["col1"] = data["col1"].fillna(data.mean)</span></pre><p id="3eea" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated"><strong class="ik hi">处理缺失的分类数据</strong></p><blockquote class="ie if ig"><p id="cc9c" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">处理分类数据时，最好的方法是将缺失值标记为“缺失”。但是，您也可以用列的模式来估算它们。</p></blockquote><p id="bcfe" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated"><strong class="ik hi">思想！</strong></p><p id="0efd" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">在本文中，我总结了缺失数据的来源，以及处理它们的方法。但是，您选择的方法将取决于各种因素，例如缺失值的百分比、缺失值的数据类型以及您正在处理的分析或模型的类型。作为一名数据科学家，您会在不同的时间选择不同的方法来处理缺失值。</p><p id="ce66" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jh iu iv iw ji iy iz ja jj jc jd je jf ha bi translated">查看我在这个系列中的下一篇文章关于<a class="ae jg" href="https://3liud.medium.com/dealing-with-unwanted-observations-duplicates-irrelevant-observations-7b6a1e50a93b" rel="noopener"> <strong class="ik hi">处理不想要的观察:重复&amp;不相关的观察</strong> </a></p></div></div>    
</body>
</html>