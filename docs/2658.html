<html>
<head>
<title>The Why and How to handle Missing Values ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么以及如何处理缺失值？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-why-and-how-to-handle-missing-values-46ab8c1b9034?source=collection_archive---------2-----------------------#2021-05-11">https://medium.com/analytics-vidhya/the-why-and-how-to-handle-missing-values-46ab8c1b9034?source=collection_archive---------2-----------------------#2021-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fc0cb62d5eff067d4d853d6fb6f1155e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SWPe91UtbwBTEJNN"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="16ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在当今时代，数据源自各种来源，通过多种流收集，并最终利用各种方法进行分析。在这篇文章中，我详细阐述了<strong class="ix hj"> <em class="jt">为什么</em> </strong>数据会有缺失值，以及<strong class="ix hj"> <em class="jt">如何使用Pandas库处理这些值。</em></strong></p><h1 id="54e3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">了解丢失数据的“原因”</h1><ol class=""><li id="08c8" class="ks kt hi ix b iy ku jc kv jg kw jk kx jo ky js kz la lb lc bi translated">数据收集不正确</li><li id="8d81" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">收集和管理错误</li><li id="c8c0" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">有意省略的数据</li><li id="e717" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">可能是由于数据的转换而产生的</li><li id="2267" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">人为误差</li><li id="b547" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">物联网设备(如传感器)故障</li><li id="67ac" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">代码中的错误</li></ol><h1 id="5bcd" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我们为什么关心？</h1><ol class=""><li id="6eaa" class="ks kt hi ix b iy ku jc kv jg kw jk kx jo ky js kz la lb lc bi translated">有些模型无法处理缺失数据(空值/NaNs)</li><li id="dd65" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">缺失数据可能是更广泛的数据问题的迹象</li><li id="45cf" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js kz la lb lc bi translated">缺失数据可能是一个有用的特性</li></ol><h1 id="5f85" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">缺失价值发现</h1><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/c59a2115a0f1bfc003f669e6b949a80e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UPsuxyDLWoBcJycJ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">布里特妮·科莱特在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="89b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一步是了解我们正在处理的数据类型</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b1dd" class="ls jv hi lo b fi lt lu l lv lw">print(df.info()) </span><span id="427e" class="ls jv hi lo b fi lx lu l lv lw">or</span><span id="4f90" class="ls jv hi lo b fi lx lu l lv lw">df.dtypes</span></pre><h2 id="f509" class="ls jv hi bd jw ly lz ma ka mb mc md ke jg me mf ki jk mg mh km jo mi mj kq mk bi translated">查找缺失值</h2><p id="7dad" class="pw-post-body-paragraph iv iw hi ix b iy ku ja jb jc kv je jf jg ml ji jj jk mm jm jn jo mn jq jr js hb bi translated">为了找到缺失的值，我们可以运行<strong class="ix hj"> <em class="jt"> isnull() </em> </strong></p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="dfce" class="ls jv hi lo b fi lt lu l lv lw">print(df.isnull())</span></pre><p id="c64e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将返回一个二进制序列(True或False ),其索引与您试图在其上查找缺失数据的数据帧的原始索引相同。</p><h2 id="975c" class="ls jv hi bd jw ly lz ma ka mb mc md ke jg me mf ki jk mg mh km jo mi mj kq mk bi translated">求缺失值的总数</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2039" class="ls jv hi lo b fi lt lu l lv lw">print(df.isnull().sum())</span></pre><p id="b347" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在您想要查找特定列的缺失值的场景中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f36c" class="ls jv hi lo b fi lt lu l lv lw">print(df['column_name'].isnull().sum())</span></pre><p id="e521" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">熊猫有它自己的一套被认为缺失的惯例，你可以在最新的<a class="ae iu" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html" rel="noopener ugc nofollow" target="_blank">熊猫1.2.4文档</a>中了解更多。通常，这些规则可能无法包含所有缺失值的符号。因为它们可以以各种符号出现，仅举几个例子。，——，_，娜，娜】。</p><p id="2189" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么，我们如何处理这些呢？</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3626" class="ls jv hi lo b fi lt lu l lv lw">missing_values = ["NA", "n/a", "na", "?", "--"]</span><span id="4e57" class="ls jv hi lo b fi lx lu l lv lw">df = pd.read_csv("filename.csv", na_values = missing_values)</span><span id="fa9f" class="ls jv hi lo b fi lx lu l lv lw">df.isnull() //now this gives an updated output<br/>            // with the new missing values considered from the list</span></pre><h1 id="f381" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">处理缺失值</h1><p id="bad1" class="pw-post-body-paragraph iv iw hi ix b iy ku ja jb jc kv je jf jg ml ji jj jk mm jm jn jo mn jq jr js hb bi translated"><strong class="ix hj">方法#1: </strong>删除至少有一个缺失值的所有行</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="eaf1" class="ls jv hi lo b fi lt lu l lv lw">df.dropna(how='any')</span></pre><p id="3b9c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#2: </strong>删除特定列中缺少值的行</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="51dd" class="ls jv hi lo b fi lt lu l lv lw">df.dropna(subset=['column_name'])</span></pre><p id="e880" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述方法的缺点</p><ul class=""><li id="9727" class="ks kt hi ix b iy iz jc jd jg mo jk mp jo mq js mr la lb lc bi translated">有效的数据点被删除。</li><li id="4a46" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js mr la lb lc bi translated">这种方法依赖于随机性</li><li id="6389" class="ks kt hi ix b iy ld jc le jg lf jk lg jo lh js mr la lb lc bi translated">减少信息</li></ul><p id="c72e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#3: </strong>用给定的字符串替换特定列中缺失的值</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b9aa" class="ls jv hi lo b fi lt lu l lv lw">df['column_name'].fillna(value='None Given', inplace=True)</span></pre><p id="c6aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#4: </strong>估算缺失值类似于上面的单元格，并将该值复制到缺失值单元格中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b32c" class="ls jv hi lo b fi lt lu l lv lw">df['column_name'].fillna(method='ffill', inplace=True)</span><span id="a5c0" class="ls jv hi lo b fi lx lu l lv lw">#Alternatively method = pad also has the same functionality</span><span id="09cd" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'].fillna(method='pad', inplace=True)</span></pre><p id="a2c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#5: </strong>估算缺失值类似于下面的单元格，并将该值复制到缺失值单元格中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4d4b" class="ls jv hi lo b fi lt lu l lv lw">df['column_name'].fillna(method='bfill', inplace=True)</span></pre><p id="dfa8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#6: </strong>在记录值没有丢失的地方删除特定的列</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="edc1" class="ls jv hi lo b fi lt lu l lv lw">#record where the values are not missing<br/>df['recording_non_null_values'] =        df['column_to_be_dropped'].notnull()</span><span id="af34" class="ls jv hi lo b fi lx lu l lv lw"># dropping the column after it is recorded<br/>df.drop(columns=['column_to_be_dropped']) </span></pre><h1 id="5c29" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">处理数字列</h1><p id="4773" class="pw-post-body-paragraph iv iw hi ix b iy ku ja jb jc kv je jf jg ml ji jj jk mm jm jn jo mn jq jr js hb bi translated">我们可以通过使用集中趋势的度量来替换数字列中缺失的值</p><p id="a6fc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#1: </strong>使用平均值替换缺失值</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4e32" class="ls jv hi lo b fi lt lu l lv lw">print(df['column_name'].mean())</span><span id="89fa" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].fillna(df['column_name'].mean())</span><span id="dcf4" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].astype('int64')</span><span id="5552" class="ls jv hi lo b fi lx lu l lv lw">#Alternatively, we can also fill the missing values<br/>#by rounding the mean</span><span id="2998" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].fillna(round(df['column_name'].mean()))</span></pre><p id="ad4a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">方法#2: </strong>使用中值替换缺失值</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ca15" class="ls jv hi lo b fi lt lu l lv lw">print(df['column_name'].median())</span><span id="6bef" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].fillna(df['column_name'].median())</span><span id="ba2a" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].astype('int64')</span><span id="2fca" class="ls jv hi lo b fi lx lu l lv lw">#Alternatively, we can also fill the missing values<br/>#by rounding the median</span><span id="e570" class="ls jv hi lo b fi lx lu l lv lw">df['column_name'] = <br/>df['column_name'].fillna(round(df['column_name'].median()))</span></pre><h1 id="aaa9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">手动处理缺失值</h1><p id="e60b" class="pw-post-body-paragraph iv iw hi ix b iy ku ja jb jc kv je jf jg ml ji jj jk mm jm jn jo mn jq jr js hb bi translated">不建议使用这种方法，但是在列中的数据是一组连续值或系列数据的情况下，我们可以使用这种方法</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="0b3f" class="ls jv hi lo b fi lt lu l lv lw">df['column_name'].interpolate()</span></pre><p id="6f4a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">插值将填充该列所含数字范围内的缺失值。如果我们有更复杂的模式，比如，列有一系列数据，但是这个系列是n次多项式的，那么我们可以使用</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="9fc4" class="ls jv hi lo b fi lt lu l lv lw">df['column_name'].interpolate(method='polynomial', order=2)</span></pre><h1 id="7d91" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="8693" class="pw-post-body-paragraph iv iw hi ix b iy ku ja jb jc kv je jf jg ml ji jj jk mm jm jn jo mn jq jr js hb bi translated">数据科学家/数据分析师大约70%的工作都围绕着处理数据和清理数据。因此，处理缺失值是数据科学家/数据分析师应该能够完成的主要任务之一。希望，这篇文章有帮助。</p></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="6714" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢读这篇文章，你可以在LinkedIn上关注我</p><p id="bc28" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">参考文献:</em></p><p id="f998" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">[1]<a class="ae iu" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html" rel="noopener ugc nofollow" target="_blank">https://pandas . pydata . org/pandas-docs/stable/user _ guide/missing _ data . html</a></p><p id="a117" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://pandas.pydata.org/docs/reference/index.html" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/reference/index.html</a></p><p id="d045" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">[3]<a class="ae iu" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.isnull.html?highlight=null#pandas.DataFrame.isnull" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.isnull.html？highlight = null #熊猫。DataFrame.isnull </a></p><p id="5edd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.interpolate.html?highlight=interpolate#pandas.DataFrame.interpolate" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/reference/api/pandas.[4]DataFrame.interpolate.html？高亮=插值#熊猫。DataFrame.interpolate </a></p></div></div>    
</body>
</html>