<html>
<head>
<title>Estimating Probability of Default for Zero (and Low) Default Portfolio using Pluto-Tasche Methodology in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在R中使用Pluto-Tasche方法估计零(和低)违约投资组合的违约概率</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/estimating-probability-of-default-for-zero-and-low-default-portfolio-using-pluto-tasche-20b1b486d7ec?source=collection_archive---------3-----------------------#2021-03-15">https://medium.com/analytics-vidhya/estimating-probability-of-default-for-zero-and-low-default-portfolio-using-pluto-tasche-20b1b486d7ec?source=collection_archive---------3-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3cbcdabcb70ce4e55ea22f055be6002f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x96dyXxlH855aJMz"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">杰里米·帕金斯在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="18d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在信贷风险管理领域，违约概率的估计对于满足监管要求(例如，巴塞尔、IFRS 9等)非常重要。).在这方面，估计的违约概率的准确性确保了信用风险模型的正确性。然而，当投资组合中没有违约或违约数量非常少时，估计违约概率变得越来越具有挑战性。对于批发贷款，零违约或低违约是投资组合中的常见情景。例如，向政府发放大额贷款(主权贷款)的银行在大多数情况下都没有出现违约。尽管如此，贷款人需要在没有任何过去违约数据的情况下估计违约概率，以创建一个统计支持。</p><p id="6389" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将描述Pluto-Tasche(PT)方法，该方法反过来解决了估计零违约或低违约投资组合的PD的问题。这种方法与估计专业贷款的违约概率相关。</p><p id="7e9d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，假设默认值是独立的(换句话说，默认值之间没有相关性)。在这种情况下，PD由置信区间的置信上限来估计。</p><p id="1487" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了计算违约概率，已经利用了<em class="jt">最审慎估计</em>(最审慎原则试图以一定程度的保守性来估计某个评级的最大违约概率，使得不会出现比当前评级和更低评级更多的违约)。</p><p id="e069" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了更好地理解这个概念，我们需要理解低违约投资组合(LDP)的定义。LDP可以用一个投资组合来表征，其中违约的数量极低，或者在过去的数据中根本没有违约。由于数据不足，LDP的PD估计值也很难进行回测。如上所述，LDP的例子包括但不限于向银行贷款、主权贷款、专业贷款等。</p><p id="55d5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这幅图中有两个场景-</p><p id="d020" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.零违约，以及</p><p id="d67b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.低默认</p><ol class=""><li id="7653" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated"><strong class="ix hj">假设独立性为零的违约:</strong></li></ol><p id="0d3e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的示例中，让我们考虑投资组合中的五个评级等级，例如A、B、C、D和E，每个等级中的客户数量分别为na、nb、nc、nd和ne。最高信用等级为A级，最低信用等级为e级。根据假设，观察期内任何等级均未发生违约。每个等级的违约概率分别为pa、pb、pc、pd和pe，其中pa ≤ pb ≤ pc ≤ pd ≤ pe。</p><p id="8e14" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了便于说明，我假设</p><p id="53ed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">na = 10，nb = 20，nc = 30，nd = 40，ne = 50。</p><p id="b510" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">数学基础(根据本例):</strong></p><figure class="ke kf kg kh fd ij er es paragraph-image"><div class="er es kd"><img src="../Images/49709175e6c13e0a0c8f6c6e18844552.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*oBn7JBF5MKn7m3ODtVk2yA.jpeg"/></div></figure><p id="6dfb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，根据最谨慎的估计，我可以这样写</p><p id="6543" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">pa = pb = pc = pd = pe</p><p id="5e42" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我们还假设A级的置信区间为α。</p><p id="ca9d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在零违约的情况下，具有多个置信区间(90%，95%，99%，99.9%)的各个概率(从pa到pe)的置信上限如下:</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/b112977c0afdaf61ff2c6fa74f5f74a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*gaLI680xgF0ZP9q7hu_z-w.jpeg"/></div></figure><p id="dc3f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">低</strong> <strong class="ix hj">默认具有独立性的假设:</strong></p><p id="33cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我假设投资组合中发生的违约数量很少。例如，A级零违约，B级零违约，C级两个违约，D级一个违约，e级一个违约，同样，我假设pa=pb=pc=pd=pe，因此，与前一种情况一样，样本大小变为na+nb+nc+nd+ne。</p><p id="92c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">数学基础(根据本例):</strong></p><figure class="ke kf kg kh fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/90141aea05a80d9f132c267baba6b318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*1xFvyM50-aVGKteBq96ctw.jpeg"/></div></figure><p id="00c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，发生不超过四次违约的概率变成了；</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/a1140d42c0e06ee51ed868348a602bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*U7AdmDXuAtrXnFPI-sQwJA.jpeg"/></div></figure><p id="cd80" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">违约概率(PD)和置信区间(C.I)之间的比较研究如下所示(针对零违约情况)</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/43829b6c8bbbc31fcd7b8e8f739622a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sewncgvxy5E1Tl5oisaREA.jpeg"/></div></div></figure><p id="940b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">违约概率(PD)和置信区间(C.I)之间的比较研究如下所示(针对少数违约情况)</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/37df0768d1b3939922af95344e03f841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Doimgjfjr_pjIuWGKs5KQ.jpeg"/></div></div></figure><p id="3c53" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PD计算是在R中完成的。在本练习中，使用了R中的“LDPD”包。由于插图中提到了一个时期的PD，所以我使用了名为<em class="jt"> PTOnePeriodPD </em>的函数。</p><p id="8030" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了在Jupyter Notebook中安装并激活软件包，我使用了以下代码:</p><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="217d" class="ks kt hi ko b fi ku kv l kw kx">install.packages("LDPD")<br/>library(LDPD)</span></pre><p id="67d4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了让读者理解R中PD的计算，我在下面提供了一些代码片段；</p><ul class=""><li id="c7bf" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">使用以下代码计算90%置信区间下零违约情况下的A级PD:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="a8ff" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(150)<br/>defaults &lt;- c(0)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><ul class=""><li id="b993" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">使用以下代码计算90%置信区间下零违约情况下的B级PD:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="68d2" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(140)<br/>defaults &lt;- c(0)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><ul class=""><li id="a75b" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">同样，使用以下代码计算90%置信区间下零违约情况下的E级PD:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="ca2c" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(50)<br/>defaults &lt;- c(0)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><ul class=""><li id="deb3" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">使用以下代码，计算90%置信区间下少数默认情况下的A级PD:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="0983" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(150)<br/>defaults &lt;- c(4)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><ul class=""><li id="9b2c" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">使用以下代码计算90%置信区间下少数违约情况下的B级违约概率:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="3354" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(140)<br/>defaults &lt;- c(4)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><ul class=""><li id="ecd2" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js ky ka kb kc bi translated">类似地，使用以下代码计算90%置信区间的少数违约情况下的E级PD:</li></ul><pre class="ke kf kg kh fd kn ko kp kq aw kr bi"><span id="e002" class="ks kt hi ko b fi ku kv l kw kx">portfolio &lt;- c(50)<br/>defaults &lt;- c(1)<br/>PTOnePeriodPD(portfolio, defaults, conf.interval = 0.90)</span></pre><p id="3c55" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">读者被邀请在他们自己的代码中试验多个置信区间。</p><p id="ad5a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文提供了使用Pluto-Tasche (PT)方法估计违约概率的基本介绍，该方法假设违约事件之间是独立的。然而，PT方法有进一步的扩展，在多期情况下违约是相关的，这超出了本文的范围。读者可以自己探索同样的问题。</p><p id="1a06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在LinkedIn上关注我。</p></div></div>    
</body>
</html>