# 如何用 Python 制作自己的机器学习驱动的私人虚拟助手

> 原文：<https://medium.com/analytics-vidhya/privacy-virtual-assistant-powered-by-machine-learning-in-python-32578e0d56be?source=collection_archive---------1----------------------->

# 介绍

如今，人工智能正被用于许多不同的领域，从无人驾驶汽车和智能机器人，到艺术创作或为计算机设计微芯片。我们都熟悉谷歌助手、亚马逊 Alexa、Siri、Cortana 等助手……这些都是由机器学习驱动的，有很多东西在幕后给出适当的响应。使用语音识别，他们首先理解你说的话，并将其转换成文本，然后解释和检索答案，最后将答案告诉用户。

尽管有这么多我们可以使用的助手，但我一直想知道如何才能制作自己的助手，因为我可以与它共享我的所有个人信息，而不用担心隐私，创建我自己的回复，并添加我自己的功能，所有这些都是为我定制的。

在本文中，我将向您展示如何开始用 Python 语言制作自己的由机器学习驱动的助手。我们将创建一个意图分类器，然后我们将添加我们的助手可以根据用户的意图执行的功能。然后，我们将为我们的助手添加语音识别和文本到语音转换功能。

所以让我们开始吧！

# 入门指南

在我们开始之前，您需要安装 Python 3。我们还需要一些软件包，如 Scikit-Learn，但我们会在需要时安装它们。您还必须了解基本的 Python 概念，如函数、类等。

首先，为助手创建一个文件夹，其中包含项目文件和子文件夹。然后，让我们创建一个名为 *main.py* 的文件，我们将在其中为我们的助手创建一个类。您也可以添加自己的自定义变量。你也可以给它起任何你喜欢的名字。

# 意图分类

为了让我们的助手理解用户想要什么，我们必须创建一个意图分类器。意图分类是文本数据的自动分类，并且意图分类器自动分析文本(用户所说的)并将它们分类成“意图”。比如是问候，还是用户在问天气？

这就是机器学习，特别是文本分类算法将被使用的地方。它将接受用户输入，并对用户的意图进行分类。您可以使用您喜欢的任何文本分类算法，但是对于本文，我将使用使用 Scikit 学习库的朴素贝叶斯分类器。

使用以下命令安装 scikit-learn。

```
pip install scikit-learn
```

我们还将使用 pandas 来读取包含训练数据的 csv 文件。使用以下命令安装它:

```
pip install pandas
```

接下来，创建一个名为 intent_classification 的子文件夹，创建一个名为 *data.csv* 的文件。这些数据将用于训练我们的意图分类器。你可以添加任何你想要的数据，只是要确保逗号后面不要有空格。第一行将包含列名(文本和意图)。这里有一个例子-

这只是一个示例，您可以随意添加自己的数据来增加模型的准确性并对其进行自定义。

现在，我们将创建意图分类器。首先，创建一个名为 intent_classification.py 的新文件，我们将在其中创建我们的 intent 分类器类。我将向您展示如何创建一个朴素贝叶斯分类器来对文本主题进行分类。朴素贝叶斯是一个分类器(在这个例子中是对文本进行分类)，它使用贝叶斯定理来确定概率(在这个例子中，文本是某个类的概率)。

意图分类到此为止！现在，让我们转到 main.py 文件并添加功能。

在 Assistant 类中创建一个名为 reply 的新函数，它接受一个参数*文本*。

# 添加功能

基于这个意图，我们现在可以执行一个函数。您可以添加自己的函数，但我将显示一个函数，它将获取当前天气。

我将使用 OpenWeatherMap 来获取天气数据。首先，你必须去 https://openweathermap.org/api 的，创建一个账户，并获得一个密钥。然后，使用以下命令安装名为 PyOWM 的 python 包:

```
pip install pyowm
```

在主项目目录中创建一个名为 assistant_functions 的新文件夹，并创建一个名为 weather.py 的新文件。

在那里，创建一个名为 get_weather 的函数

然后，通过在 main.py 的开头添加以下内容，可以将该函数导入 main.py

```
from assistant_functions.weather import get_weather
```

在 main.py 的 Assistant 类的 reply 函数中，添加一个包含不同意图的函数的字典。然后，添加代码来调用基于意图的函数，回复函数应该看起来像这样

您可以通过调用 reply 函数并将文本作为参数传递来测试它。您还可以创建更多的函数，并以类似的方式添加它们。

要测试回复功能，请将以下内容添加到 main.py 的底部:

```
assistant.reply(”weather”)
```

# 添加文本到语音和语音识别

接下来将是我们的助手的文本到语音和语音识别功能。

我们将使用 pyttsx3 进行文本语音，您可以使用

```
pip install pyttsx3
```

现在，我们将导入 pyttsx3 并创建一个 speaking 函数，该函数接受一个文本参数并使用 pyttsx3 说出它。

首先，更新 main.py 中的 Assistant __init__ 函数，以避免多次初始化语音引擎:

然后在类中添加一个 speaking 函数，名为 **say()** :

返回到回复函数，不要打印()，而是使用 self.say()

接下来，我们将使用语音识别库添加一个函数来监听，我们可以使用以下命令来安装它:

```
pip install SpeechRecognition
```

你可能还需要安装 py audio—[https://pypi.org/project/PyAudio/](https://pypi.org/project/PyAudio/)

在 *main.py 中，*我们将首先导入语音识别，然后更新 __init__ 函数:

```
import speech_recognition as sr
```

现在，我们将在助手类中创建一个名为 listen()的新函数。*超时*参数是在放弃并抛出异常之前等待短语开始的最大秒数。短语时间限制是在短语停止侦听之前允许其继续的最大秒数。

# 添加一个循环来监听和回复

最后一步是在 Assistant 类中创建 main()函数。我们将添加一个循环来监听用户输入，然后调用回复函数。

现在我们可以创建 Assistant 类的一个对象，并调用 main()函数:

等到它打印出听力再开始说话。试着说“天气”，它会告诉你温度。您可以添加更多响应其他意图(如问候)的函数。

# 结论

这就是你如何用 Python 制作自己的助手。请随意将您自己的自定义功能添加到您的助手中，并使其成为您自己的功能！如果你想看我的助手项目，这里有我的 GitHub 库的链接—[https://github.com/reybahl/Assistant](https://github.com/reybahl/Assistant)。

谢谢你的阅读，我希望你喜欢它！