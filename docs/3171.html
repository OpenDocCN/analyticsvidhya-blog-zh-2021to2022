<html>
<head>
<title>Building a functional dashboard on Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Streamlit上构建功能性仪表板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-a-functional-dashboard-on-streamlit-bff831fdc2aa?source=collection_archive---------10-----------------------#2021-06-14">https://medium.com/analytics-vidhya/building-a-functional-dashboard-on-streamlit-bff831fdc2aa?source=collection_archive---------10-----------------------#2021-06-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="066b" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">了解如何在屏幕上只显示您想要的数据。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/c5618d1b4e79f24ed191ac7fa2bc109c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwh4ElgPDfTIF0AfGxrdxQ.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">弗兰基·查马基在<a class="ae jm" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="1dab" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">按照展示我的项目的一些结果的想法，我开始寻找一些可以帮助我做到这一点的平台，我唯一的限制是能够显示Seaborn和Plotly情节。但问题是，做我正在寻找的最好的选择是破折号，然而，它只适用于Plotly，进入Streamlit。</p><p id="0aea" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">Streamlit是一个框架，您可以在其中将数据显示到应用程序中，它是一个非常用户友好的库和界面，可以让您以人们可以轻松看到的方式掌握编码和部署结果的诀窍。</p><p id="e509" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这篇文章是我对这个框架的一点经验，希望它能帮助你在未来建立自己的应用程序。你可以在Github的这里看到我的代码<a class="ae jm" href="https://github.com/romulocrp/bank_marketing_data_analysis" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="226b" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated"><strong class="ak">入门</strong></h1><p id="ab3a" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">首先，看看应用完成后会是什么样子:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lg"><img src="../Images/48a332be61f9f9fe5e3b533f7fd6bae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*azaTT2fvAo-0zAkrYJRCFw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">应用程序的第一页。</figcaption></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lh"><img src="../Images/72281560936d8c21161ac13a25e7807f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILURcFv360Zt5C2HeUDWvg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">这里显示了一些数据。</figcaption></figure><p id="5a87" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">所以这个框架是非常模块化的，而且非常模块化，非常用户友好，所以，我将向你们展示如何按照我想要实现的目标来构建它。</p><p id="cfc4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">首先，你应该在你的页面上设置所有不可改变的元素，这里我们看到的是边栏和标题中的元素，在屏幕上写有这4行可以帮助你:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="5bc6" class="ln kk hh lj b fi lo lp l lq lr">import streamlit as st</span><span id="838c" class="ln kk hh lj b fi ls lp l lq lr">st.title()<br/>st.header()<br/>st.subheader()<br/>st.write()</span></pre><p id="c41e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">所以如果你想在侧边栏上插入东西，那真是痛苦而又辛苦的过程:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="8d96" class="ln kk hh lj b fi lo lp l lq lr">st.sidebar.title()<br/>st.sidebar.header()<br/>st.sidebar.subheader()<br/>st.sidebar.write()</span></pre><p id="bf06" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">就是这样，现在老实说，这个框架可能不是最可定制的，但它真的很好地实现了它的目标，以一种简单的编码方式显示您的数据。</p><p id="bf81" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这里还有两个东西，叫做交互式小部件，假设你想选择你想看的数据，这是你的查看者会做的方式，在这个应用程序中，有两个:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="9bd2" class="ln kk hh lj b fi lo lp l lq lr">st.selectbox()<br/>st.checkbox()</span></pre><p id="2085" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们开始时关心的另一件事是显示数据，有许多选项，这里我使用4种方式:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="72d6" class="ln kk hh lj b fi lo lp l lq lr">st.dataframe()<br/>st.table()<br/>st.pyplot()<br/>st.plotly_chart()</span></pre><p id="adbc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">它们都是不言自明的，在这个过程中，您将通过更多的例子了解如何使用这些特性。</p><h1 id="9fd6" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">将所有元素组装在一起</h1><p id="c906" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">既然构建这个仪表板的所有元素都已经解释了，现在是时候把它们放在一起，制作一个非常交互式的仪表板了。</p><p id="e0d9" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">构建应用程序时要记住的一点是，每次在测试环境中重新运行脚本时，streamlit都会从头到尾读取脚本，就像Python解释器一样，这意味着将元素放在一起的顺序很重要(实际上有一种方法可以忽略这一规则，但现在并不重要)。</p><p id="0885" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在我向你展示如何做图片中的每一个元素。</p><h2 id="5c69" class="ln kk hh bd kl lt lu lv kp lw lx ly kt jw lz ma kv ka mb mc kx ke md me kz mf bi translated">人们将如何导航？</h2><p id="824f" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">让我们从大管理器开始，选择框，我将展示代码，您将看到使用此框架的编码是多么直观:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="18e2" class="ln kk hh lj b fi lo lp l lq lr">option = st.sidebar.selectbox('Options:', ('Data Summary', 'Age', 'Job', 'Duration',...))</span></pre><p id="23bc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这里真正的技巧是在一个变量中赋值，这样你可以在以后调用它，让页面响应查看者的选择。偶尔使用一个元组总是好的。</p><h2 id="b54c" class="ln kk hh bd kl lt lu lv kp lw lx ly kt jw lz ma kv ka mb mc kx ke md me kz mf bi translated">我将如何绘制图表？</h2><p id="6010" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">我将向您展示我是如何显示来自不同库的每个图形的，实际上，Streamlit的这一功能非常有助于您选择当前的最佳选择，现在让我们来看看。</p><p id="67da" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这里是<code class="du mg mh mi lj b">pyplot</code>:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="2033" class="ln kk hh lj b fi lo lp l lq lr">if option == 'Age':<br/>    st.header('Age frequencies')<br/>    st.write('Here are the age frequencies count for 3 dataframes.')<br/>    st.subheader('Bank data')<br/>    fig1 = plt.figure()<br/>    age_freq = sns.countplot(x=bank_data['age'])<br/>    age_freq.set_xticklabels(age_freq.get_xticklabels(), rotation=40, ha="right")<br/>    age_freq.xaxis.set_major_locator(ticker.MultipleLocator(5))<br/>    st.pyplot(fig1)</span></pre><p id="2106" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这里有些东西需要你看一下，首先，使用条件语句，通过在选择框中选择一个选项来创建页面中的更改，它可以在整个代码中重复，它有点像是在应用程序上显示你的绘图的块。</p><p id="6c94" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">另一件事是您将调用图形，而不是图形本身，这很重要，因为<code class="du mg mh mi lj b">figure</code>是streamlit将在应用程序中显示的图像对象。</p><p id="9665" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这是给plotly的:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="a29d" class="ln kk hh lj b fi lo lp l lq lr">if option == 'Last contact date':<br/>    st.header('Last contact date frequencies')<br/>    st.write('Here are the last contact frequencies count for 3 dataframes.')<br/>    st.subheader('Bank data')<br/>    df_count = bank_data[['lc_date', 'y']].groupby(['lc_date']).count().reset_index()<br/>    df_count_date = px.histogram(x=df_count['lc_date'],<br/>                                 y=df_count['y'])<br/>    st.plotly_chart(df_count_date)</span></pre><p id="62cc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这实际上比<code class="du mg mh mi lj b">pyplot</code>要简单一些，因为一旦你有了你的数据设置，plotly express更容易绘制。</p><h2 id="b2f4" class="ln kk hh bd kl lt lu lv kp lw lx ly kt jw lz ma kv ka mb mc kx ke md me kz mf bi translated">如何显示类似表格的数据？</h2><p id="eb24" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">所以，如果你注意图片，你会发现如果我更改选择框上的选项，复选框就会消失，所以让我们来看看这是如何发生的:</p><pre class="ix iy iz ja fd li lj lk ll aw lm bi"><span id="3bcb" class="ln kk hh lj b fi lo lp l lq lr">if option == 'Data Summary':<br/>    st.header('Data Summary')<br/>    st.write('Here is some summary calculations of the data, I splitted into 3 dataframes for better understanding.')<br/>    if st.sidebar.checkbox('Raw data sets'):<br/>        st.subheader('Bank data')<br/>        st.dataframe(bank_data.head())<br/>        st.subheader('yes_df:')<br/>        st.dataframe(yes_df.head())<br/>        st.subheader('no_df:')<br/>        st.dataframe(no_df.head())</span><span id="a25c" class="ln kk hh lj b fi ls lp l lq lr">    if st.sidebar.checkbox('Summary calculations'):<br/>        st.subheader('Bank data summary:')<br/>        st.table(bank_data.describe())<br/>        st.subheader('yes_df summary:')<br/>        st.table(yes_df.describe())<br/>        st.subheader('no_df summary:')<br/>        st.table(no_df.describe())<br/>    else: st.write('Pick something to see in the sidebar.')</span></pre><p id="122c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我实际上尝试了<code class="du mg mh mi lj b">elif</code>，但是如果你选择了第一个选项，第二个选项就会消失，如果你不想这样，那是我的解决方法，大量的‘如果’。</p><p id="8f66" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这里需要注意的另一件事是，我使用了一个数据框架，一个数据框架和一个表格到一个表格，这个决定给应用程序的感觉就像你使用Jupyter笔记本一样。</p><p id="be12" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">但是你应该在这里看到的最大的细节是使用<code class="du mg mh mi lj b">head</code>，当我开始的时候，我想“让我们把所有的数据都放进去，这样人们就可以一直滚动了！”这是一个错误，在我尝试的时候，我的电脑死机了4次，另外，我的文件有大约45，000行，这对streamlit来说太难处理了。在论坛上阅读，我了解到在这种情况下，streamlit会冻结并消耗你所有的内存，这并不理想，但并不奇怪，因为这是一个非常繁重的任务，正如你所看到的，并不是真正必要的。</p><h1 id="9e43" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">结论</h1><p id="7241" class="pw-post-body-paragraph jn jo hh jp b jq lb ii js jt lc il jv jw ld jy jz ka le kc kd ke lf kg kh ki ha bi translated">这样做很棒，现在我有了一个基于浏览器的应用程序来显示和组织我得到的结果。我试图将它部署到生产环境中，但是，目前还不能将我的文件上传到streamlit webserver中以部署到生产环境中，尽管如果您使用API来获取数据，这不是问题，它应该工作得很好。</p><p id="0af0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">下一步是开始一个机器学习基准，我很期待，祝你愉快！</p></div></div>    
</body>
</html>