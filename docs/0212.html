<html>
<head>
<title>Creating a Super Easily Testable Django App with Docker and Factory Boy.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Docker和Factory Boy创建一个超级容易测试的Django应用程序。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-super-easily-testable-django-app-with-docker-2f3477101186?source=collection_archive---------17-----------------------#2021-01-08">https://medium.com/analytics-vidhya/creating-a-super-easily-testable-django-app-with-docker-2f3477101186?source=collection_archive---------17-----------------------#2021-01-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/fe67f06807fa1fba6cbe194a47ced3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA2s_hISIlgnHMycQkxCIA.jpeg"/></div></div></figure></div><div class="ab cl ip iq go ir" role="separator"><span class="is bw bk it iu iv"/><span class="is bw bk it iu iv"/><span class="is bw bk it iu"/></div><div class="ha hb hc hd he"><p id="666f" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">我见过很多建立Django项目的不同方法，但我相信Django的开发环境应该总是用Docker容器化。原因是，我知道不得不手动设置测试数据库、销毁它并在出错时重新创建它是多么令人沮丧，而docker-contained将为您节省大量时间和精力。作为奖励，它只需要一个YAML文件就可以部署在Kubernetes上了！(尽管这可能取决于您计划使用的云服务……)</p></div><div class="ab cl ip iq go ir" role="separator"><span class="is bw bk it iu iv"/><span class="is bw bk it iu iv"/><span class="is bw bk it iu"/></div><div class="ha hb hc hd he"><h1 id="064a" class="ju jv hh bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">Docker配置</h1><p id="dce6" class="pw-post-body-paragraph iw ix hh iy b iz ks jb jc jd kt jf jg jh ku jj jk jl kv jn jo jp kw jr js jt ha bi translated">首先，这里是docker文件。我知道使用alpine图像有一些缺点，但我相信您可以很容易地将其替换为更小的图像，如slim，所需的更改将是最小的。</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="6b25" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">您可以使用下面的YAML文件来设置开发环境。</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="a0a2" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">您可能想知道为什么在端口部分列出了两个不同的端口号。原因是我使用VSCode作为我的主要代码编辑器，为了调试带有断点的项目，您需要使用一个名为ptvs的pip包并公开一个端口来使它工作。下面是一个如何公开调试端口的示例。</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="4418" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">创建一个make文件也会让你的生活轻松很多。</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><h1 id="4cbb" class="ju jv hh bd jw jx ld jz ka kb le kd ke kf lf kh ki kj lg kl km kn lh kp kq kr bi translated">写作测试</h1><p id="a2d2" class="pw-post-body-paragraph iw ix hh iy b iz ks jb jc jd kt jf jg jh ku jj jk jl kv jn jo jp kw jr js jt ha bi translated">为Django应用程序编写测试有许多不同的方法。您可以使用fixtures或者使用模拟包来模拟所有东西。我个人喜欢用下面的包。</p><div class="li lj ez fb lk ll"><a href="https://github.com/pytest-dev/pytest-factoryboy" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">pytest-dev/pytest-factoryboy</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">pytest-factoryboy使测试设置的工厂方法与依赖注入相结合变得容易，这是……</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz in ll"/></div></div></a></div><div class="li lj ez fb lk ll"><a href="https://github.com/kiwicom/pytest-recording" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">kiwi com/py test-记录</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">一个pytest插件，它通过VCR.py记录测试中的网络交互。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="ma l lw lx ly lu lz in ll"/></div></div></a></div><p id="ca8b" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">除非万不得已，否则您可能不应该浪费时间嘲笑API响应。很容易出现输入错误，如果您使用的API引入了规范修订，您可能需要手动进行大量调整。您可以用上面的记录包记录API响应，并让您的应用程序处理潜在的规范修订。在我创建并在本文底部链接的Django应用程序示例中，我没有使用recording包，因为我没有在其中使用任何外部API。然而，我确实使用了Factory Boy来填充测试数据库，我将附上一些代码片段来帮助您理解它的用法。(我发誓它比固定装置更容易使用……)</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lb lc l"/></div></figure></div><div class="ab cl ip iq go ir" role="separator"><span class="is bw bk it iu iv"/><span class="is bw bk it iu iv"/><span class="is bw bk it iu"/></div><div class="ha hb hc hd he"><p id="0eca" class="pw-post-body-paragraph iw ix hh iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">Django和Ruby on Rails是如此高级的框架，默认提供了许多现代特性，我真的不明白使用NodeJS和TypeORM这样的技术有什么好处。Golang有goroutines和它独特的简单语法，但是NodeJS真正提供了什么？(说真的，NodeJS为什么这么受欢迎？)</p></div><div class="ab cl ip iq go ir" role="separator"><span class="is bw bk it iu iv"/><span class="is bw bk it iu iv"/><span class="is bw bk it iu"/></div><div class="ha hb hc hd he"><div class="kx ky kz la fd ll"><a href="https://github.com/dakaii/fuzzy-parakeet/tree/medium" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">达卡伊/绒毛鹦鹉</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">在GitHub上创建一个帐户，为dakai/fuzzy-parakeet的发展做出贡献。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="mb l lw lx ly lu lz in ll"/></div></div></a></div></div></div>    
</body>
</html>