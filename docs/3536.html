<html>
<head>
<title>How Can Use Annotations in Plotly?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Plotly中使用注释？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-can-use-annotations-in-plotly-de6ab8b7d580?source=collection_archive---------0-----------------------#2021-07-08">https://medium.com/analytics-vidhya/how-can-use-annotations-in-plotly-de6ab8b7d580?source=collection_archive---------0-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="402b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好！在本文中，我们将尝试涵盖，什么是Plotly注释？我希望它会有帮助。请不要在这篇文章中用我的英语🥲来评价我，我将使用seaborn的tips数据集。让我们试着掩盖。</p><h1 id="06e2" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是注释？</h1><p id="605f" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们可以说文本是我们在图表上创建的注释。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/1c7fcd01e78f595130616381213162bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3cuBU3djkcgPZrjAnDPR4w.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated"><a class="ae kw" href="https://plotly.com/python/text-and-annotations/#text-annotations" rel="noopener ugc nofollow" target="_blank">图片来自Plotly官方网站</a></figcaption></figure><h2 id="8286" class="kx je hi bd jf ky kz la jj lb lc ld jn iq le lf jr iu lg lh jv iy li lj jz lk bi translated">注释变量</h2><p id="b36a" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">每个注释变量将是一个python字典。每个字典都应该包含这些关键字:</p><ul class=""><li id="c140" class="ll lm hi ih b ii ij im in iq ln iu lo iy lp jc lq lr ls lt bi translated">x-&gt; x轴的哪个点</li><li id="a37d" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">y-&gt; y轴的哪个点</li><li id="6301" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">文本-&gt;注释文本的字符串</li><li id="f34c" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">showarrow -&gt;是否要显示批注指针的箭头(必须为布尔值)</li><li id="39c4" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">箭头-&gt;箭头的样式是什么</li><li id="0269" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">字体-&gt;批注的字体样式</li></ul><h2 id="af49" class="kx je hi bd jf ky kz la jj lb lc ld jn iq le lf jr iu lg lh jv iy li lj jz lk bi translated">我们如何使用？</h2><p id="a76b" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们可以使用两种类型的注释。</p><ul class=""><li id="f169" class="ll lm hi ih b ii ij im in iq ln iu lo iy lp jc lq lr ls lt bi translated">图. update _ layout(annotations =[annotation 1，annotation2，…])</li><li id="5351" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">图.添加注释(注释)</li></ul><h2 id="5856" class="kx je hi bd jf ky kz la jj lb lc ld jn iq le lf jr iu lg lh jv iy li lj jz lk bi translated">使用add_annotation函数添加注释</h2><p id="460a" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">首先，我必须导入创建图表、操作数据集和导入数据集所需的包。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="5e42" class="kx je hi ma b fi me mf l mg mh">import pandas as pd<br/>import seaborn as sns<br/>import plotly.express as px</span></pre><p id="7c08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在按日列对数据集进行分组，并创建条形图。x轴表示日，y轴表示总账单。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="16ee" class="kx je hi ma b fi me mf l mg mh">df = sns.load_dataset('tips')<br/>grouped = df.groupby('day', as_index=False).sum()<br/>fig = px.bar(data_frame=grouped, x='day', y='total_bill')</span></pre><p id="c065" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我将为注释对象创建字典。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="ffeb" class="kx je hi ma b fi me mf l mg mh">annotation = {<br/>    # x -&gt; location for x<br/>    'x': grouped.loc[grouped['total_bill'] == grouped['total_bill'].min()]['day'][1],<br/>    # y -&gt; location for y<br/>    'y': grouped['total_bill'].min(),<br/>    'text': 'Bu güne dikkat etmeliyiz',  # text<br/>    'showarrow': True,  # would you want to see arrow<br/>    'arrowhead': 3,  # which type for arrowhead<br/>    'font': {'size': 10, 'color': 'black'}  # font style<br/>}</span></pre><p id="ab62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用add_annotation函数将字典添加到我们的绘图中。请不要忘记，在那个函数中，我们一次只能添加一个注释。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="f0f4" class="kx je hi ma b fi me mf l mg mh">fig.add_annotation(annotation)<br/>fig.show()</span></pre><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es mi"><img src="../Images/b6b9c77afc1d3eb4377547c21e21f91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQVHiWoRjl47nHfBZCwSqw.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">如果你和我做了同样的事情，你可以看到这个情节</figcaption></figure><h2 id="326d" class="kx je hi bd jf ky kz la jj lb lc ld jn iq le lf jr iu lg lh jv iy li lj jz lk bi translated">添加带有更新布局的注释</h2><p id="81d1" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我将再次分组数据帧并创建图形。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="7a6a" class="kx je hi ma b fi me mf l mg mh">df = sns.load_dataset('tips')<br/>grouped = df.groupby('day', as_index=False).sum()<br/>fig = px.bar(data_frame=grouped, x='day', y='total_bill')</span></pre><p id="c193" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在为注释创建字典。但是，在这一节中，我们将使用不同类型的x轴和y轴。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="aca4" class="kx je hi ma b fi me mf l mg mh">annotation = {<br/>    'xref': 'paper',  # we'll reference the paper which we draw plot<br/>    'yref': 'paper',  # we'll reference the paper which we draw plot<br/>    'x': 0.36,  # If we consider the x-axis as 100%, we will place it on the x-axis with how many %<br/>    'y': 0.2,  # If we consider the y-axis as 100%, we will place it on the y-axis with how many %<br/>    'text': 'Bu güne dikkat etmeliyiz',<br/>    'showarrow': True,<br/>    'arrowhead': 3,<br/>    'font': {'size': 10, 'color': 'black'}<br/>}</span></pre><p id="0e67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，我们把在上面画图的纸作为x轴和y轴的参考。与前一个不同，在本词典中，我们为每个轴设置了百分比。但是如果我们没有添加xref和yref，我们仍然可以使用旧样式为每个轴设置数据点。我们可以用update_layout添加多个注释。</p><pre class="kh ki kj kk fd lz ma mb mc aw md bi"><span id="9bc4" class="kx je hi ma b fi me mf l mg mh">fig.update_layout({'annotations': [annotation]})<br/>fig.show()</span></pre><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es mi"><img src="../Images/455f29737a5d9649c35468f992dbe0ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbeacPTs_JsA1zF37xL38A.png"/></div></div></figure><p id="897b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望有所帮助。你可以从<a class="ae kw" href="https://github.com/mebaysan/VeriBilimi/blob/master/Python/3-)KesifciVeriAnaliziVeVeriGorsellestirme/Plotly-Dash-Examples/Plotly-Annotations/Plotly-Annotations.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>获取代码。亲切的问候！</p></div></div>    
</body>
</html>