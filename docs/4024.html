<html>
<head>
<title>ANALYZING TRADE BOOK USING PYTHON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PYTHON分析贸易帐簿</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analyzing-trade-book-using-python-77cbac9db1aa?source=collection_archive---------5-----------------------#2021-08-19">https://medium.com/analytics-vidhya/analyzing-trade-book-using-python-77cbac9db1aa?source=collection_archive---------5-----------------------#2021-08-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/0f56b0b87fa3495a6e645c90894c8e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hks5c7coEa_TvXSLKfu2A.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">马克西姆·霍普曼在<a class="ae it" href="https://unsplash.com/s/photos/stock-market?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="ddf8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">新冠肺炎是一个持续的局势，也是一个不可预测的局势。向牺牲生命的一线工人表示哀悼，向仍在战斗的其他人表示问候。几乎每个人都受到了影响，有些人比其他人更严重，但还没有结束。多亏了它，我们的生活陷入了停滞。</p><p id="70cd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">新冠肺炎的爆发也影响了许多证券交易所，包括印度国家证券交易所，印度国家证券交易所的指数(NIFTY和SENSEX)出现了大幅调整。许多人失去了他们的财富；其他人看到了这个投资机会。但一如既往，有些人从整个事件中获利。在疫情冠状病毒肆虐期间，Zerodha、Upstox和5paisa.com、Samco Securities、AliceBlue等在线经纪公司的投资者和交易活动激增。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/cb8df260fb3e8f35bf6638a074d90d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CdERLpFI6XCcxcyJLaZIOA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated"><a class="ae it" href="https://www.livemint.com/news/india/new-demat-accounts-jump-to-a-record-high-in-fy21-11615229292551.html" rel="noopener ugc nofollow" target="_blank">https://www . livemint . com/news/India/new-demat-accounts-jump-to-a-record-high-in-fy21-11615229292551 . html</a></figcaption></figure><p id="cb6a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">虽然一些保持耐心的人实现了财务独立，一些人失去了他们的血汗钱，但在这两种情况下，理解贸易书是必不可少的，以了解哪里出了问题。人们不需要每天分析交易账簿，但每周一次是有益的。</p><p id="c769" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本指南中，我们使用Python分析交易簿数据。该数据以CSV格式从Zerodha下载。它包含“符号”、“isin”、“交易日期”、“交换”、“段”、“系列”、“交易类型”、“数量”、“价格”、“交易标识”、“订单标识”、“订单执行时间”。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jx"><img src="../Images/349e28d67b3f89015209cda3a5331004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qAvyUnscsDMdp4Ty1Tumhw.png"/></div></div></figure><p id="90ce" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果不深入分析，对股票的平均买价和平均卖价进行肤浅的分析会有所帮助。</p><p id="574f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">导入库和数据</strong></p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jy"><img src="../Images/1e7299eefa8b622037fae58a1beae91d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8EVl18DIJ0TsCgzUMtkpFg.png"/></div></div></figure><p id="dc97" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">使用符号对数据进行分组并计算平均买卖价格</strong></p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jz ka l"/></div></figure><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kb"><img src="../Images/c2cb1bc05be614894398f89528ec3f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYQ3VYbKLnkovqPouchaYA.jpeg"/></div></div></figure><p id="676d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有了这个数据框架，我们也可以确定我们的平仓或开仓头寸。"<strong class="iw hi"> BUY_QUANTITY </strong>"和"<strong class="iw hi"> SELL_QUANTITY </strong>"不相等的行，表示还有一些未结头寸。</p><p id="4e6a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">关闭和打开位置</strong></p><pre class="jt ju jv jw fd kc kd ke kf aw kg bi"><span id="102e" class="kh ki hh kd b fi kj kk l kl km">df[df['BUY_QUANTITY'] != df['SELL_QUANTITY']] # Open Positions<br/>df[df['BUY_QUANTITY'] == df['SELL_QUANTITY']] # Closed Positions</span></pre><div class="jt ju jv jw fd ab cb"><figure class="kn ii ko kp kq kr ks paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/8d5e2c8f626af4452c2ca1c45365c79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*l0b7_7MNg2KjHh5BYi1HwA.jpeg"/></div></figure><figure class="kn ii kt kp kq kr ks paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/73d2230d603fc2dbdc3ce2350081c4ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*E4zR2uT1Ug1FCVJiH4oDRQ.jpeg"/></div></figure></div><p id="576a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">平仓利润百分比</strong></p><pre class="jt ju jv jw fd kc kd ke kf aw kg bi"><span id="db0a" class="kh ki hh kd b fi kj kk l kl km">closed_pos = df[df['BUY_QUANTITY'] == df['SELL_QUANTITY']]</span><span id="aadf" class="kh ki hh kd b fi ku kk l kl km">buy_amt = (df['BUY_QUANTITY']*df['BUY_AVG']).sum()<br/>sell_amt = (df['SELL_QUANTITY']*df['SELL_AVG']).sum()<br/>print(((sell_amt - buy_amt)/buy_amt)*100)</span></pre><p id="ca47" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将表明在过去的时间里交易的好坏。但是对于完整分析，还应该考虑经纪和其他服务成本。</p><p id="8cce" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本指南到此结束。希望它能提供一些知识。</p></div></div>    
</body>
</html>