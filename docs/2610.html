<html>
<head>
<title>Lazy load images for rails application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">rails应用程序的延迟加载映像</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/lazy-load-images-for-rails-application-a87cb9b77b35?source=collection_archive---------10-----------------------#2021-05-07">https://medium.com/analytics-vidhya/lazy-load-images-for-rails-application-a87cb9b77b35?source=collection_archive---------10-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e497" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加延迟加载来提高你的网站性能，让它看起来更酷</p><h1 id="e33c" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是懒装？</h1><ul class=""><li id="d077" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated"><a class="ae km" href="https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video" rel="noopener ugc nofollow" target="_blank">懒加载</a>是针对网站在线内容的一种优化机制。</li><li id="6c1c" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc ki kj kk kl bi translated">延迟加载是一个经常使用的术语，指的是仅在需要时才加载部件的概念。</li></ul><h1 id="46f7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">为什么我们需要惰性装载？</h1><ul class=""><li id="3a37" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">加载网站的整个页面并将其交付给用户可能需要更多的时间来加载，并且不能满足用户更快的内容呈现。</li><li id="f05d" class="kb kc hi ih b ii kn im ko iq kp iu kq iy kr jc ki kj kk kl bi translated">相反，我们可以进行延迟加载，这有助于首先改善所需内容的呈现，然后在一段时间后使用延迟加载。</li></ul><h1 id="ed7f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">它是如何工作的？</h1><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/908e6e9556945072186800b980f3821d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ct3iqp-AFvtQbdBf"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">照片由<a class="ae km" href="https://unsplash.com/@priscilladupreez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">普里西拉·杜·普里兹</a>在<a class="ae km" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="9825" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从头开始，实现整个流程，简要介绍rails应用程序中的延迟加载映像</p><p id="a2a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤1:创建新的</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es li"><img src="../Images/6549ddb2f3a5610181690a9e1aeb5415.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/0*S6emI87wuUIBu_1O.png"/></div></figure><p id="7149" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:<a class="ae km" href="https://github.com/jassa/lazyload-rails" rel="noopener ugc nofollow" target="_blank">将它添加到你的gem文件中</a></p><p id="f7bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤3:使用bundler安装gem</p><blockquote class="lj lk ll"><p id="1654" class="if ig lm ih b ii ij ik il im in io ip ln ir is it lo iv iw ix lp iz ja jb jc hb bi translated">$捆绑安装</p></blockquote><p id="15d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第四步:在app/assets/JavaScript s/jquery . lazy load . js中新建一个文件，抓取<a class="ae km" href="https://github.com/tuupola/lazyload" rel="noopener ugc nofollow" target="_blank"> lazyload.js </a>插件。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/50ebc140759b0fa2428291961d2ce79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/0*xzeJ5FpES5CREPRY.png"/></div></figure><p id="8fdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤5:在你的application.js中需要这个插件</p><p id="5d62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">//=需要jquery.lazyload</p><p id="e9f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">重要提示:记住懒惰加载插件依赖于jQuery。</em>T13】</strong></p><p id="8009" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤6:在config/initializer/lazy load . Rb中创建一个新文件，并添加以下代码片段:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lr"><img src="../Images/ad5f4742cb6c32267dd42cb5602e23da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_U4FBbOGh_URPb5m.png"/></div></div></figure><p id="c8f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤7:在routes.rb文件中创建一个post控制器，并添加以下内容。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ls"><img src="../Images/372d8d38d45c18f95abf4b4664f42985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NbFmDTYQHGQOZx5y.png"/></div></div></figure><p id="8d75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤8:在你的后控制器中添加图像链接:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lt"><img src="../Images/cc04bbfd71652bb99967c1977e9f5adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JT5JxrmrZkk7H3z_.png"/></div></div></figure><p id="b2d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤9:在您的视图文件index.html.erb中执行以下操作:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lu"><img src="../Images/53724b401569d231ffbb988eb162871c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/0*Knl1FDVTU3F5V9RD.png"/></div></figure><p id="2af8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了！！你们都完了。您可以在您的应用程序中测试惰性加载是如何工作的。</p><p id="d36c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在Heroku上测试这个示例应用程序:</p><blockquote class="lj lk ll"><p id="0d86" class="if ig lm ih b ii ij ik il im in io ip ln ir is it lo iv iw ix lp iz ja jb jc hb bi translated">注意:按ctrl + shift + r查看更好的图像延迟加载</p></blockquote><p id="9fde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae km" href="https://lazy-loading.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://lazy-loading.herokuapp.com/</a></p><p id="0bcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lv"><img src="../Images/4e3722c166181d9e99fcd0dccb730514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3t5s6-jj5CNgRGjq"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">布鲁斯·马尔斯在<a class="ae km" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2cdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码…</p></div></div>    
</body>
</html>