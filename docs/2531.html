<html>
<head>
<title>Confidence Interval vs Prediction Interval</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">置信区间与预测区间</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/confidence-interval-vs-prediction-interval-2f9e36f752e3?source=collection_archive---------3-----------------------#2021-04-30">https://medium.com/analytics-vidhya/confidence-interval-vs-prediction-interval-2f9e36f752e3?source=collection_archive---------3-----------------------#2021-04-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="b9b2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">1.介绍</h1><p id="ce51" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">作为一名数据科学家或统计学家，我们肯定遇到过几次<strong class="jf hj">置信度和预测区间</strong>，我们经常会混淆这两个术语，认为它们是相同的，但它们并不相同。我们将看到这两个区间是如何不同的，它们为预测的不同方面提供了估计值。</p><p id="5e63" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">当我们谈论时间序列预测的统计模型时，我们有五个误差来源:</p><ol class=""><li id="a37d" class="kg kh hi jf b jg kb jk kc jo ki js kj jw kk ka kl km kn ko bi translated">随机个体误差</li><li id="0bde" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">参数的随机估计(例如每个自回归项的系数)</li><li id="b730" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">不确定的超参数(如自回归项的数量)</li><li id="3955" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">不确定模型是否适合历史数据</li><li id="a926" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">即使给出了第四条，也不确定这个模型是否仍然正确。</li></ol><h1 id="723e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak"> 2。置信区间</strong></h1><p id="1a9a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">置信区间</strong>是一个<strong class="jf hj">频数</strong>概念<strong class="jf hj"> </strong>提供<strong class="jf hj"> </strong>对模型估计参数的统计不确定性的一个估计。模型参数被假定为非随机但未知的。由于置信区间是从数据中计算出来的，而数据是随机的，所以我们得到的区间也是随机的。</p><p id="4ddd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">95%的置信区间将包含概率为0.95的真参数。也就是说，对于来自总体的大量重复样本，这些区间的95%将包含真实参数。</p><p id="2488" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">它通常根据来自上述<strong class="jf hj">源#3 </strong>的不确定度来估计来自<strong class="jf hj">源#2 </strong>的不确定度。</p><h1 id="de50" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak"> 3。预测区间</strong></h1><p id="4ad3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">预测区间是与有待观察的随机变量相关联的区间，随机变量的指定概率位于该区间内。换句话说，预测区间是针对未来观测值的，它表明未来观测值位于该区间的概率是多少，或者未来值的可能范围是多少。</p><p id="ec9c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">例如，</strong></p><ul class=""><li id="d12c" class="kg kh hi jf b jg kb jk kc jo ki js kj jw kk ka ku km kn ko bi translated">2022年GDP预测的80%预测区间意味着2022年的实际GDP应该位于概率为0.8的区间内。</li><li id="d52f" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka ku km kn ko bi translated">下一季度的通胀有90%的概率位于[1%，2.5%]区间。</li></ul><p id="b39d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">理想情况下，预测间隔应该考虑到所有五个误差源。预测间隔通常是我们拥有多少数据、这些数据中有多少变化、我们预测多远以及使用哪种预测方法的函数。</p><p id="77fb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">由于预测区间提供了未来观测值的可能范围，而不仅仅是点预测，因此它应该始终包含在我们的预测中。预测区间可以出现在<strong class="jf hj">贝叶斯统计或</strong>频率统计中。</p><p id="0662" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">由于置信区间仅考虑来自源#2的误差，而预测区间考虑所有五个误差源，平均值的置信区间将总是比预测区间<strong class="jf hj">窄</strong>。</p><h2 id="60cb" class="kv ig hi bd ih kw kx ky il kz la lb ip jo lc ld it js le lf ix jw lg lh jb li bi translated">3.1预测区间的注意事项</h2><p id="2754" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">预测的预测区间众所周知是<a class="ae lj" href="http://robjhyndman.com/hyndsight/narrow-pi/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">通常太窄</strong> </a>。例如，一项研究发现，在95%的情况下包含真实结果的预测间隔只有71%到87%的情况是正确的。有几个原因，但主要原因是没有充分考虑模型建立和选择过程中的不确定性。大多数建立预测区间的方法实际上都是在模型正确的前提下估计一系列值。由于我们的模型只是现实的简化，我们比模型完全正确时更容易失败。</p><p id="0b20" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">一般来说，预测周期越长，预测区间的准确率越高。随着我们对未来时期的预测，预测区间变得越来越宽，以这种方式明确包含在区间中的随机性开始主导最初错误模型的不准确性。对于更长的预测期，标准预测区间倾向于按照宣传的那样执行，而对于更短的预测期，标准预测区间则过于乐观。</p><h1 id="e493" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">4.线性回归中的预测区间</h1><p id="0ac6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在本节中，我们讨论当预测值为<strong class="jf hj"> <em class="lk"> x_h </em> </strong>时，新响应<strong class="jf hj"> <em class="lk"> y_new </em> </strong>的预测区间公式。一般公式总是:</p><p id="424c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">样本估计值(<em class="lk">t</em>-乘数×标准误差)</strong></p><p id="ea23" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">数学形式的公式是:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/e82b16b8eab18d02669ed8147f120bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_B31fOIzSqyXp1rDPGKPsg.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">线性回归的预测区间公式</figcaption></figure><p id="7b29" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">其中:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mb"><img src="../Images/f0fc058a51061a856b6ca540f09f9c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XE43OYVzLkOO3sZsXHcftQ.png"/></div></div></figure><p id="d011" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">上述公式只有在满足<em class="lk"> </em> <strong class="jf hj"> <em class="lk">【线】</em> </strong> <em class="lk"> </em>条件<em class="lk"> — </em> <strong class="jf hj">线性度</strong>、<strong class="jf hj">独立误差</strong>、<strong class="jf hj">正态误差</strong>、<strong class="jf hj">等误差方差</strong> —的情况下才能使用。与置信区间公式的情况不同，预测区间的公式强烈地<strong class="jf hj">依赖于误差项<strong class="jf hj">正态分布</strong>的条件。</strong></p><h1 id="0722" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak"> 5。置信度和预测区间公式</strong></h1><p id="ee76" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">线性回归</strong>中<strong class="jf hj">预测</strong>和<strong class="jf hj">置信区间</strong>的公式推导不在本博客讨论范围内，我们直接使用公式。</p><p id="12bf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，让我们来看看<strong class="jf hj"> <em class="lk"> y_new </em> </strong>的预测区间公式:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/181262da9c79d8019845a65b1f1d28a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SklDWvc0jbfbJdOzrcHi7A.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">预测区间的公式</figcaption></figure><p id="9672" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要查看它与<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong>的置信区间公式相比如何:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mc"><img src="../Images/91233bc5d37f7b3d7c444caf85328318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qQOlGq3kgJp8iu_fouBXw.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">置信区间公式</figcaption></figure><p id="99ec" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从上面的公式可以看出，<strong class="jf hj"> <em class="lk"> y_new </em> </strong>的预测的<strong class="jf hj">标准误差中有一个额外的<strong class="jf hj"> <em class="lk"> MSE </em> </strong>项，而<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong>的拟合</strong>的<strong class="jf hj">标准误差中没有，影响预测区间宽度的因素与影响宽度的因素<strong class="jf hj">相同</strong></strong></p><p id="0358" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们试着理解一下预测区间，看看是什么原因导致了额外的<strong class="jf hj"> <em class="lk"> MSE </em> </strong>项。这样做的话，让我们先从一个比较简单的问题开始。想想如果已知在<strong class="jf hj"> <em class="lk"> x_h </em> </strong>的响应<strong class="jf hj"><em class="lk"/></strong>μ_ Y的平均值，我们如何预测在特定<strong class="jf hj"> <em class="lk"> x_h </em> </strong>的新响应<strong class="jf hj"> <em class="lk"> y_new </em> </strong>也就是说，假设已知在<strong class="jf hj"> <em class="lk"> x_h </em> </strong> =40时的平均皮肤癌死亡率为百万分之150(方差为400)。俄亥俄州哥伦布市的皮肤癌死亡率预测是多少？</p><p id="78ad" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">由于<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong> = 150和<strong class="jf hj"> <em class="lk"> σ </em> </strong> = 400是已知的，所以我们可以利用“<strong class="jf hj">经验法则</strong>”来说明95%的正态分布数据都在均值的2个标准差以内。换句话说，95%的观察值都在以下区间内:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es md"><img src="../Images/138f08e0de467173b9f1e717aada0968.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*X1laHc7E6a--3Gr-_yN4YQ.png"/></div></figure><p id="a517" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">将95%规则应用于我们的示例，其中<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong> =150并且<strong class="jf hj"> <em class="lk"> σ </em> </strong> =20，我们得到:</p><p id="79b7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">150–2(20)= 110和150 + 2(20) = 190。</p><p id="08b0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">即皮肤癌死亡率(<strong class="jf hj"><em class="lk">y _ new)</em></strong>at<strong class="jf hj"><em class="lk">x _ h</em></strong>= 40是每1000万人死亡110 ~ 190人之间的某个值。问题是我们的计算使用了<strong class="jf hj"><em class="lk">【μ_ Y】</em></strong>和<strong class="jf hj"><em class="lk">【σ】</em></strong>，这些是我们通常不知道的人口值。现实开始了:</p><ul class=""><li id="fb1b" class="kg kh hi jf b jg kb jk kc jo ki js kj jw kk ka ku km kn ko bi translated">平均值<em class="lk">μY</em>通常是未知的。合理的做法是用预测响应<strong class="jf hj"> <em class="lk"> yhat </em> </strong>来估计它。用<strong class="jf hj"> <em class="lk"> yhat </em> </strong>估算<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong>的成本就是<strong class="jf hj"> <em class="lk"> yhat </em> </strong>的方差。也就是说，不同的样本会产生不同的预测<strong class="jf hj"> <em class="lk"> yhat </em> </strong>，所以我们必须考虑到<strong class="jf hj"> <em class="lk"> yhat </em> </strong>的方差。</li><li id="b7bb" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka ku km kn ko bi translated">方差σ通常是未知的。合乎逻辑的做法是用<strong class="jf hj"> <em class="lk"> MSE </em> </strong>来估计。</li></ul><p id="eda0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因为我们必须估计这些未知量，所以新响应预测的变化取决于两个因素:</p><ol class=""><li id="6ae8" class="kg kh hi jf b jg kb jk kc jo ki js kj jw kk ka kl km kn ko bi translated">由于用<strong class="jf hj"> <em class="lk"> yhat_h </em> </strong>估计均值<strong class="jf hj"> <em class="lk"> μ_Y </em> </strong>而产生的变化，我们表示为“<strong class="jf hj"><em class="lk">【σ(Yhat _ h)</em></strong>”，这个量的估计就是出现在置信区间公式中的拟合的标准差的平方。</li><li id="2c80" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">响应<strong class="jf hj"> <em class="lk"> y </em> </strong>中的变化，我们表示为“<strong class="jf hj"><em class="lk">【σ</em></strong>”，这是均方差<strong class="jf hj"> <em class="lk"> MSE </em> </strong>的估计。</li></ol><p id="7fe9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">将两个方差分量相加，我们得到:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es me"><img src="../Images/204e56f3c94347e12bb8f8e12cf8c598.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*3IgXwZ0bxwfKDAOX8rUVlg.png"/></div></figure><p id="3fc2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">估计如下:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mf"><img src="../Images/e365fc31677b8da262ef8b33a5ab6323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_7SeeNQfTua9PcZ_sItTw.png"/></div></div></figure><p id="87c8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">以上项就是<strong class="jf hj"> <em class="lk"> y_new的<strong class="jf hj">预测区间</strong>公式中出现的预测的<strong class="jf hj">方差(标准差的平方)</strong>。</em> </strong></p><p id="3a60" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们再比较一下这两个区间:</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mg"><img src="../Images/1058ae9fefbefb1d5ff0751a7ffe16d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aiz_qZY1TkMGUt9vpalJzw.png"/></div></div></figure><h2 id="cde1" class="kv ig hi bd ih kw kx ky il kz la lb ip jo lc ld it js le lf ix jw lg lh jb li bi translated">5.1两个公式之间差异的实际影响</h2><ul class=""><li id="6666" class="kg kh hi jf b jg jh jk jl jo mh js mi jw mj ka ku km kn ko bi translated">由于预测区间有额外的<strong class="jf hj"> <em class="lk"> MSE </em> </strong>项，a(1<strong class="jf hj"><em class="lk">α</em></strong>)* 100%置信区间将总是比相应的预测区间<strong class="jf hj">窄</strong>。</li><li id="fbe7" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka ku km kn ko bi translated">通过计算预测值的样本均值的区间(<strong class="jf hj"> <em class="lk"> xh=xbar </em> </strong>)并增加样本量<strong class="jf hj"> <em class="lk"> n </em> </strong>，置信区间的标准差可以接近0，但由于额外的<strong class="jf hj"> <em class="lk"> MSE </em> </strong>项，预测区间的标准差无法接近0。</li></ul><h1 id="274b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">6.结论</h1><p id="04cd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们讨论了<strong class="jf hj">置信区间</strong>和<strong class="jf hj">预测区间</strong>如何不同，它们如何为预测的不同方面提供估计，它们如何解释不同的误差或不确定性来源，在<strong class="jf hj">线性回归</strong>的情况下这两个区间的公式之间的差异，以及<strong class="jf hj">置信区间如何比预测区间</strong>窄。我们还谈到了为什么通过考虑所有的误差源来精确计算预测间隔要困难得多，预测间隔随着我们对未来时期的预测而变得更宽，并且我们经常会高估预测间隔。</p><p id="1ce0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如有任何反馈或疑问，请随时联系我的<a class="ae lj" href="https://www.linkedin.com/in/naquib-alam-93804435/" rel="noopener ugc nofollow" target="_blank"><strong class="jf hj"><em class="lk">【LinkedIn】</em></strong></a><strong class="jf hj"><em class="lk"/></strong>。</p><h1 id="d2c3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">7.参考</h1><ol class=""><li id="1b9f" class="kg kh hi jf b jg jh jk jl jo mh js mi jw mj ka kl km kn ko bi translated"><a class="ae lj" href="https://robjhyndman.com/hyndsight/intervals/" rel="noopener ugc nofollow" target="_blank">https://robjhyndman.com/hyndsight/intervals/</a></li><li id="ddb2" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated"><a class="ae lj" href="http://freerangestats.info/blog/2016/12/07/arima-prediction-intervals" rel="noopener ugc nofollow" target="_blank">http://freerangestats . info/blog/2016/12/07/ARIMA-prediction-intervals</a></li><li id="47c8" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated"><a class="ae lj" href="https://online.stat.psu.edu/stat501/lesson/3/3.3" rel="noopener ugc nofollow" target="_blank">https://online.stat.psu.edu/stat501/lesson/3/3.3</a></li></ol></div></div>    
</body>
</html>