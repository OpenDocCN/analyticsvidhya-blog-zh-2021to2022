<html>
<head>
<title>Understand The Performance of Airbnb in Toronto by Using Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过使用Python了解Airbnb在多伦多的表现。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understand-the-performance-of-airbnb-in-toronto-by-using-python-f4abee3569b3?source=collection_archive---------20-----------------------#2021-02-09">https://medium.com/analytics-vidhya/understand-the-performance-of-airbnb-in-toronto-by-using-python-f4abee3569b3?source=collection_archive---------20-----------------------#2021-02-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f374" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">通过分析公司自己免费处理的数据，了解多伦多Airbnb的情况。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/109d3616a2c14ba7dd9b394d93167ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWGFv8Sb6IPv8VR24Y4HjQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图片来自UrbToronto，由我编辑</figcaption></figure><h1 id="9002" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">项目的目标</h1><ul class=""><li id="1334" class="ke kf hh kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">了解Airbnb在多伦多的知名度。</li><li id="5586" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">分析最昂贵的地区，最受欢迎的房间类型，评论和价格/夜平均。</li><li id="1e8a" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">展示一些Airbnb在多伦多的法律问题。</li><li id="2fa6" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">教授如何处理缺失数据和异常值。</li></ul><h2 id="fb95" class="lb jn hh bd jo lc ld le js lf lg lh jw kl li lj jy kn lk ll ka kp lm ln kc lo bi translated">在我们开始之前…</h2><p id="a973" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">如果你想看到完整的代码，并了解我用来获得我的结果的方法，请确保在<a class="ae mc" href="https://colab.research.google.com/drive/1ixOFCmEs4n_dTgFBi0hDUswGU9bshJYG#scrollTo=6-B_qtEaYEd-" rel="noopener ugc nofollow" target="_blank">谷歌实验室</a>上检查这个项目的笔记本，也请确保在<a class="ae mc" href="https://www.linkedin.com/in/vin%C3%ADcius-porfirio-purgato-7891401b3/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae mc" href="https://github.com/vinny380" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上关注我。</p><h1 id="3015" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">Airbnb简介</h1><p id="8c6c" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">Airbnb是世界上最大的连锁酒店，有趣的是他们根本没有酒店！</p><p id="c08d" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">通过一种创新的寻找住宿的方式，Airbnb将想要旅行(和在某个地方住宿)的人与想要出租他们住处的房东联系起来。</p><p id="6c26" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">截至2018年底，在成立十年后，Airbnb已经接待了来自世界各地的超过3亿人，挑战传统酒店品牌重塑自我。</p><p id="292f" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">除此之外，这家初创公司还有一种在互联网上处理免费数据的文化，你可以从Airbnb内部的网站下载这些数据，并获得来自世界上一些最大城市的数据，这让你可以建立无数的项目和数据科学解决方案。</p><p id="d22c" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">看看Airbnb的一些数据:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mj"><img src="../Images/3e1cfa00c40c0b7292767e1f76c100a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GnbgjWjYD1_Oj1MA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">来自张丽<a class="ae mc" rel="noopener" href="/analytics-vidhya/how-to-analyze-airbnb-performance-data-in-the-right-way-b83f3dad1458">的Airbnb社区简介</a></figcaption></figure><p id="5c1d" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">对了，这套是来自Airbnb的“总结”版。在同一个页面上，我们下载了文件<code class="du mk ml mm mn b">listing.csv</code>，有一个更长的版本叫做<code class="du mk ml mm mn b">listing.csv.gz</code>，带有<strong class="kg hi">完整的</strong>数据集。</p><h1 id="9b2e" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">呈现多伦多</h1><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mo"><img src="../Images/94a9cabbe65295335fd805f646d9507c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRNBQmaJhgJHJHPEANlZQg.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者父亲的照片，是的，照片里的就是我</figcaption></figure><p id="f518" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">多伦多是加拿大人口最多的城市，它位于安大略省的安大略湖湖畔，它是多伦多猛龙队、多伦多蓝鸟队、德雷克大学、多伦多大学和其他许多著名人士和机构的所在地。多伦多是一个种族非常多样化的城市，拥有健康的移民人口。几乎一半的人口是在国外出生的。你可以找到世界各地的餐馆。像任何好的大城市一样，多伦多不会停下来，它是一个24/7都在工作的地方。这座城市也被称为6ix，这个词因德雷克来自多伦多而在他的歌曲中流行开来。</p><p id="6be1" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">该市还有两个机场:</p><ul class=""><li id="7f47" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">多伦多皮尔逊国际机场(YYZ)。</li><li id="7e7d" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">比利毕晓普多伦多市机场(YTZ)。</li></ul><p id="979c" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">其市区人口为2，600，000，市区人口为6，231，765，也是北美第五大城市，仅次于墨西哥城、纽约、洛杉矶和芝加哥。多伦多也被称为好莱坞北部，你知道25%的好莱坞电影都是在多伦多拍摄的吗，不管是在片场还是在街上？很酷，对吧？多伦多的旅游业也很有前景。然而，它对Airbnb有几个法律问题:</p><ul class=""><li id="6e85" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">允许在整个城市的住宅区和混合使用区的住宅部分的所有房屋类型中进行短期租赁。</li><li id="6b20" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">人们只能在自己的主要住所进行短期租赁，房主和房客都可以参与。</li><li id="ff30" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">住二套房的人也可以参加，只要二套房是他们的主要住所。</li><li id="28c0" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">如果房主/房客不在，整栋房屋可以作为短期租赁出租，每年最多180个晚上。</li><li id="0f31" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">为了租你的二次住宅，短租必须大于28晚。</li></ul><p id="5f77" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">给定城市的背景，让我们开始分析。</p><h1 id="afd0" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">获取数据</h1><p id="becd" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">Python之所以伟大的一个主要原因是它有多少库和包，今天我们将使用四个库来分析我们的<em class="mi">数据集</em>，它们是:</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="56a4" class="lb jn hh mn b fi mw mx l my mz">1. pandas - Used to manipulate our dataset.</span><span id="2895" class="lb jn hh mn b fi na mx l my mz">2. matplotlib - Used to plot our histograms.</span><span id="c513" class="lb jn hh mn b fi na mx l my mz">3. seaborn - Used to plot our heatmap.</span><span id="cc62" class="lb jn hh mn b fi na mx l my mz">4. plotly - Used to plot our interactive map.</span></pre><h1 id="17ec" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated"><strong class="ak">变量字典</strong></h1><ul class=""><li id="d8b2" class="ke kf hh kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">id</code> —为识别地点而生成的id号。</li><li id="48f9" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">name</code> —公布的地点名称。</li><li id="3485" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">host_id</code> —该场所主人的身份证号。</li><li id="ab42" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">host_name</code> —主持人姓名。</li><li id="9d68" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">neighbourhood_group</code> —此列没有有效数据。</li><li id="7404" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">neighbourhood</code> —小区名称。</li><li id="7597" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">latitude</code> —房产的纬度坐标。</li><li id="75a2" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">longitude</code> —房产的经度坐标。</li><li id="5fde" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">room_type</code> —提供的房间类型。</li><li id="2cd7" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">price</code> —租用场地的价格。</li><li id="564e" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">minimum_nights</code> —预订该地的最低入住天数。</li><li id="3643" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">number_of_reviews</code> —这个地方的评论数量。</li><li id="a515" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">last_review</code> —最近一次审查的日期。</li><li id="f962" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">reviews_per_month</code> —每月评论量。</li><li id="7b5d" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">calculated_host_listings_count</code> —主人拥有的财产数量。</li><li id="b216" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">availability_365</code> —一年中可供预订的天数。</li></ul><h1 id="91fb" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">缺失数据和异常值</h1><p id="7ed7" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">当我看了看我们的数据集，我意识到有数据丢失，甚至有一些<strong class="kg hi">巨大的</strong>异常值。因此，我不得不把它全部打扫干净。为此，我首先决定检查缺失数据的百分比。这是我们的输出:</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="6f7f" class="lb jn hh mn b fi mw mx l my mz"># ordenating variables with the highest amount of null values in descending order<br/>(df.isnull().sum() / df.shape[0]).sort_values(ascending=False) * 100</span><span id="e2a0" class="lb jn hh mn b fi na mx l my mz">output:</span><span id="4d69" class="lb jn hh mn b fi na mx l my mz">neighbourhood_group               100.000000<br/>reviews_per_month                  22.474678<br/>last_review                        22.474678<br/>host_name                           0.060224<br/>name                                0.005475<br/>availability_365                    0.000000 calculated_host_listings_count      0.000000 <br/>number_of_reviews                   0.000000<br/>minimum_nights                      0.000000 <br/>price                               0.000000 <br/>room_type                           0.000000 <br/>longitude                           0.000000 <br/>latitude                            0.000000 <br/>neighbourhood                       0.000000 <br/>host_id                             0.000000 <br/>id                                  0.000000 <br/>dtype: float64</span></pre><p id="ccc8" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">如您所见，<code class="du mk ml mm mn b">neighbourhood_group</code>丢失了100%的值，<code class="du mk ml mm mn b">reviews_per_month</code>和<code class="du mk ml mm mn b">last_review</code>都丢失了大约22%的值。<code class="du mk ml mm mn b">host_name</code>和<code class="du mk ml mm mn b">last_review</code>有大约0，1%的缺失数据。</p><p id="d9b1" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">好了，现在我们知道有缺失数据，让我们寻找异常值。我们将使用两种方法来做到这一点。首先，让我们绘制直方图:</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="0799" class="lb jn hh mn b fi mw mx l my mz"># plot the histogram of the numerical variables<br/>df.hist(bins=15, figsize=(15,10));</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nb"><img src="../Images/d5d28517f8ff868c38b637ad72dfc86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fKgbiLFi5dsDVl19lvF4Q.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="2ef6" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">正如我们在上面看到的，很可能我们确实有异常值。注意<code class="du mk ml mm mn b">minimum_nights</code>直方图，已经超过多伦多市政厅允许的180晚。让我们看看如何摆脱他们。</p><h1 id="ca17" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">寻找异常值</h1><p id="b75a" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">如果您看一下直方图的分布，您可能会注意到在变量<code class="du mk ml mm mn b">price</code>、<code class="du mk ml mm mn b">minimum_nights</code>和<code class="du mk ml mm mn b">calculated_host_listings_count</code>中存在异常值。这些值不遵循分布，它们还会搞乱整个图形表示。有两种快速的方法可以帮助我们识别异常值的存在。这些是:</p><ul class=""><li id="07fb" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">使用<code class="du mk ml mm mn b">.describe()</code>功能进行统计汇总。</li><li id="d26c" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">绘制变量的方框图。</li></ul><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="68aa" class="lb jn hh mn b fi mw mx l my mz"># statistical summary of the variables<br/>df[['price', 'minimum_nights', 'number_of_reviews', 'reviews_per_month', 'calculated_host_listings_count', "availability_365"]].describe()</span><span id="dd6e" class="lb jn hh mn b fi na mx l my mz">output:</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nc"><img src="../Images/fed85992fbe718121bd8d1693f93ac10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucXPMcjjNRJi2Xbcdqbrfw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="1f28" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">通过分析统计摘要，我们可以肯定:</p><ul class=""><li id="a773" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">变量<code class="du mk ml mm mn b">price</code>有75%的值低于149，但其最大值是13000。</li><li id="f5ee" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated"><code class="du mk ml mm mn b">minimum_nights</code>一年超过365天。</li></ul><h1 id="77f9" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">最小_夜的箱线图</h1><p id="3a16" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">你可以在下面看到一些点是多么分散。他们肯定是离群值，可能会扰乱我们的结果。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="2495" class="lb jn hh mn b fi mw mx l my mz">#minimum_nights box plot<br/>df.minimum_nights.plot(kind='box', vert=False, figsize=(15,3))<br/>plt.show()</span><span id="6217" class="lb jn hh mn b fi na mx l my mz"># checking amount of values over 30 days in minimum_nights column<br/>print("minimum_nights: values over 30:")<br/>print('{} entrances'.format(len(df[df.minimum_nights &gt; 30])))<br/>print('{:.4f}%'.format((len(df[df.minimum_nights &gt; 30]) / df.shape[0])*100))</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nd"><img src="../Images/d9020f852e7877a769901be5b41f5a73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZuemR7vsXpoY-57RQSVpJA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><ul class=""><li id="b1b2" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">超过30天的有547个，占总数的3.8351%。</li><li id="8f0e" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">重要的是要记住<strong class="kg hi">多伦多不允许短期租赁一年超过180晚</strong>，但当然，这些是绝大多数。大多数租赁都不超过30天。</li></ul><h1 id="0f1c" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">价格箱线图</h1><p id="9bf5" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">让我们看看价格是如何分布的:</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="abc5" class="lb jn hh mn b fi mw mx l my mz"># price box plot<br/>df.price.plot(kind='box', vert=False, figsize=(15,3))<br/>plt.show()</span><span id="2139" class="lb jn hh mn b fi na mx l my mz"># checking the amount of values over 1500 in the price column<br/>print("\nprice: values over 1500")<br/>print("{} entrances".format(len(df[df.price &gt;1500])))<br/>print('{:.4f}%'.format((len(df[df.price &gt; 1500]) / df.shape[0])*100))</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ne"><img src="../Images/f3fb055e520c597054af75c95f81bc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpD_mS2YVYQbMcT1_mNHIA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="e325" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">既然我们在<code class="du mk ml mm mn b">price</code>和<code class="du mk ml mm mn b">minimum_nights</code>中都发现了异常值，让我们清理<em class="mi">数据帧</em>并再次绘制这些直方图。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="43b1" class="lb jn hh mn b fi mw mx l my mz">#removing outliers in a new DataFrame<br/>df_clean = df.copy()<br/>df_clean.drop(df_clean[df_clean.price &gt; 1500].index, axis=0, inplace=True)<br/>df_clean.drop(df_clean[df_clean.minimum_nights &gt; 30].index, axis=0, inplace=True)</span><span id="43fb" class="lb jn hh mn b fi na mx l my mz">#removing neighbourhood_group, because it's empty<br/>df_clean.drop('neighbourhood_group', axis=1, inplace=True)<br/>df_clean.hist(bins=15, figsize=(15,15));</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nb"><img src="../Images/005aaabdc42fbc940d2a2b36104c572e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XPL-4Bll5vAJTRmzKuMng.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="2256" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">好了，现在我们有了一个干净的<em class="mi">数据框架</em>，所以我们可以分析真实的数据。</p><h1 id="5ba1" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">平均租金是多少？</h1><p id="8541" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">现在我们有了一个清晰的数据框架，我们可以检查我们的平均预订价格。为此，我们可以使用<code class="du mk ml mm mn b">.mean()</code>方法，在该方法中，将打印price列中所有值的平均值。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="49e9" class="lb jn hh mn b fi mw mx l my mz"># Average of the price column<br/>df_clean.price.mean()<br/>output:</span><span id="be10" class="lb jn hh mn b fi na mx l my mz">124.63443072702331</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nf"><img src="../Images/0898b555ba395ca6d8697cac11ec299e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrvwEiEQpzxXkCD8XesCSw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者照片</figcaption></figure><p id="0f83" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">在这里，我们可以看到<strong class="kg hi">异常值</strong>如何影响我们的平均值，<strong class="kg hi">在统计摘要中大约是138加元</strong>，但在<strong class="kg hi">现实中，大约是125加元。</strong></p><h1 id="4366" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">变量之间的相关性是什么？</h1><p id="0281" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">相关性是指两个(或多个)变量以某种方式联系在一起。我们正在寻找它们之间的联系和相似之处。这些联系是可以测量的，相关系数将告诉我们它们的联系/相关程度。为了找到联系，让我们…</p><ul class=""><li id="5c69" class="ke kf hh kg b kh md kj me kl mp kn mq kp mr kr ks kt ku kv bi translated">做一个相关矩阵。</li><li id="344e" class="ke kf hh kg b kh kw kj kx kl ky kn kz kp la kr ks kt ku kv bi translated">通过使用<code class="du mk ml mm mn b">seaborn</code>库，使用矩阵数据绘制一个<code class="du mk ml mm mn b">heatmap</code>。</li></ul><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="5734" class="lb jn hh mn b fi mw mx l my mz"># making a correlation matrix<br/>corr = df_clean[['price', 'minimum_nights', 'number_of_reviews', 'reviews_per_month',<br/>"calculated_host_listings_count", 'availability_365']].corr()</span><span id="b806" class="lb jn hh mn b fi na mx l my mz">#plotitng the heatmap with the matrix data<br/>sns.heatmap(corr, cmap='RdBu', fmt='.2f', square=True, linecolor='White', annot=True);<br/></span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ng"><img src="../Images/0e4e7255d667cc4a91efc94bdbecdbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*EW63MaUQerSY5UgiT_Bnig.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="19c7" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">蓝色表示相关，越“红”表示联系越少。除了<code class="du mk ml mm mn b">reviews_per_month</code>和<code class="du mk ml mm mn b">number_of_reviews</code>之外，我们的<em class="mi">数据帧</em>中没有任何主要关系。</p><p id="23b0" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">顺便说一下，热图中的所有<code class="du mk ml mm mn b">1.00</code>值没有任何意义，因为它们是与自身进行比较的，例如:<code class="du mk ml mm mn b">availability_365</code>到<code class="du mk ml mm mn b">availability_365</code>。你可以在下面看到一些点是多么分散。这些肯定是异常值，可能会扰乱我们的结果。</p><h1 id="213a" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">在多伦多什么类型的地方租得最多？</h1><p id="1f80" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">列<code class="du mk ml mm mn b">room_type</code>包含了你可以在Airbnb租到的所有地方，有相当多的选择。通过使用方法<code class="du mk ml mm mn b">value.counts()</code>,我们可以查看多伦多最受欢迎的Airbnb房产租赁类型。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="dc0b" class="lb jn hh mn b fi mw mx l my mz"># shows the amount of each type of place in the dataset<br/>df_clean.room_type.value_counts()<br/>output:</span><span id="3bd7" class="lb jn hh mn b fi na mx l my mz">Entire home/apt    10934 <br/>Private room        6199 <br/>Shared room          305 <br/>Hotel room            58 <br/>Name: room_type, dtype: int64</span><span id="ea45" class="lb jn hh mn b fi na mx l my mz"># shows the percentage of each type of place in the dataset<br/>df_clean.room_type.value_counts() / df_clean.shape[0] * 100<br/>output:</span><span id="cf86" class="lb jn hh mn b fi na mx l my mz">Entire home/apt    62.494284<br/>Private room       35.430956 <br/>Shared room         1.743256 <br/>Hotel room          0.331504 <br/>Name: room_type, dtype: float64</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nh"><img src="../Images/0871a6d25e83c9d107994c919022355b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tTJttjKy2Jz4okDpNvTFxA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者照片</figcaption></figure><p id="d9ba" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">正如我们的分析显示，多伦多最受欢迎的房型是整个家庭或公寓。因此，如果你住在多伦多，并想租你的地方，你可能应该投资整个家庭/公寓出租或私人房间。</p><h1 id="0404" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">多伦多平均最少住几晚？</h1><p id="0ceb" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">我们还可以查看在多伦多预订所需的平均最低住宿天数。为此，我们可以使用<code class="du mk ml mm mn b">.mean()</code>方法。既然我们在谈论天数，我就把它四舍五入到最接近的十分之一。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="2e54" class="lb jn hh mn b fi mw mx l my mz"># checking the mean of column 'minimum_nights'</span><span id="7bb5" class="lb jn hh mn b fi na mx l my mz">print(round(df_clean['minimum_nights'].mean()))<br/>output: 8</span><span id="97ac" class="lb jn hh mn b fi na mx l my mz">df_clean['minimum_nights'].std()<br/>output: 10.967971072381717</span></pre><p id="4e11" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">平均最低夜数等于8是不是很奇怪？确实是。那是很多个夜晚，超过一个星期。这就是为什么我检查了<code class="du mk ml mm mn b">minimum_nights</code>的标准差，它返回了几乎11，这是相当高的，如果你不知道统计学，<a class="ae mc" href="https://www.youtube.com/watch?v=MRqtXL2WX2M" rel="noopener ugc nofollow" target="_blank">标准差</a>基本上是一个统计量，测量数据集相对于其均值的离差。</p><p id="dfd6" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">为了解决这个问题，让我们复制一个名为<code class="du mk ml mm mn b">df_new</code>的<code class="du mk ml mm mn b">df_clean</code>，这样我们就不会弄乱我们的原始数据，然后只检查小于10天的值的平均值:</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="3891" class="lb jn hh mn b fi mw mx l my mz">df_new = df_clean.copy()<br/>df_new = df_new[df_new['minimum_nights'].values &lt; 10]<br/>df_new['minimum_nights'].mean()</span><span id="af62" class="lb jn hh mn b fi na mx l my mz">output:<br/>2.294784406831585</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ni"><img src="../Images/87c3e3f5ad75d995a38a3b46e6896712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3GJUjya9lhD_IpmZnCWBbA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者照片</figcaption></figure><p id="4cc9" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">如你所见，在多伦多，主人要求的平均最低住宿天数是2晚。</p><h1 id="9061" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">多伦多最贵的地段是哪里？</h1><p id="8029" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">检查一个变量与另一个变量的一种方法是使用<code class="du mk ml mm mn b">.groupby()</code>。在这种情况下，我们希望从租赁价格来比较邻近地区。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="cf75" class="lb jn hh mn b fi mw mx l my mz">#check average price per neighbourhood<br/>df_clean.groupby(['neighbourhood']).price.mean().sort_values(ascending=False)[:10]</span><span id="0d90" class="lb jn hh mn b fi na mx l my mz">neighbourhood<br/>Yonge-St.Clair                       225.000000<br/>Kingsway South                       196.583333<br/>Maple Leaf                           190.333333<br/>Leaside-Bennington                   189.636364<br/>Rosedale-Moore Park                  185.718182<br/>Lawrence Park South                  179.886364<br/>Waterfront Communities-The Island    170.668984<br/>St.Andrew-Windfields                 169.782609<br/>Forest Hill South                    166.000000<br/>Etobicoke West Mall                  160.733333<br/>Name: price, dtype: float64</span></pre><p id="1836" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">在这种情况下，我们知道Yonge-St. Clair (Deer Park)是多伦多预订Airbnb最贵的地区，其次是Kingsway South和Maple Leaf，尽管这可以被视为准确的，并且这些都是多伦多的富裕地区，但有时代表性数据可能会产生误导。在某些情况下，你必须考虑可供预订的座位数量。数量越少，平均值可能越高。然而，<strong class="kg hi">这里的</strong>，雍-圣克莱尔，金士威南，怡陶碧谷，福里斯特希尔南，其他都是多伦多物价高的地区。因此，<strong class="kg hi">我们可以信任这个输出</strong>。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nj"><img src="../Images/1564993e6c2288163393de0762543a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDPQebW_-35dy-fyUw6mgA.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated"><a class="ae mc" href="https://unsplash.com/@yourturn?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊利亚·切尔</a>在<a class="ae mc" href="https://unsplash.com/s/photos/toronto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="804f" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">分布图</h1><p id="d202" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">顺便说一下，既然给我们提供了经纬度，我们就可以绘制一个分布图。让<code class="du mk ml mm mn b">x=longitude</code>和<code class="du mk ml mm mn b">y=latitude</code>。越红意味着越贵。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nk"><img src="../Images/4793fede92539ef1133ea2fdc7ca78a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*IjHSRJmxFSjw8URYE3ntpg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="2d5a" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">现在让我们用我们的<em class="mi">数据集</em>中所有可用的位置绘制一张交互式地图。顺便说一下，下一张地图没有价格过滤器，它只是显示了多伦多的分布情况。为了绘制地图，我将导入库<code class="du mk ml mm mn b">plotly</code>。</p><pre class="ix iy iz ja fd ms mn mt mu aw mv bi"><span id="78e4" class="lb jn hh mn b fi mw mx l my mz">#importing plotly<br/>import plotly.express as px</span><span id="d51b" class="lb jn hh mn b fi na mx l my mz">#plotting our map<br/>fig = px.scatter_mapbox(df_clean, lat="latitude", lon="longitude", hover_name="name",color_discrete_sequence=["red"], zoom=10, height=500)</span><span id="091f" class="lb jn hh mn b fi na mx l my mz">fig.update_layout(mapbox_style="open-street-map")</span><span id="6ff0" class="lb jn hh mn b fi na mx l my mz">fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})</span><span id="a763" class="lb jn hh mn b fi na mx l my mz">fig.show()</span></pre><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nl nm l"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">作者的情节</figcaption></figure><p id="3265" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">如你所见，多伦多很大，到处都有可供预订的地方。</p><h1 id="ef48" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">结论</h1><p id="5a94" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">当我们接近尾声时，我们知道数据并不总是完美的。我们有许多丢失的值需要清理，因为它们被证明是异常值，这使得我们的结果和输出与实际情况相差很大。</p><p id="2857" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">我们还了解到，有时输出具有误导性和不代表性，导致数据失真。</p><p id="3287" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">尽管我们有很好的洞察力，但这只是真实数据集的一个总结版本。为了真正探索数据，最好有这个<code class="du mk ml mm mn b">csv</code>的完整版本，它包含更多的变量和属性。</p><p id="ed46" class="pw-post-body-paragraph lp lq hh kg b kh md ii lr kj me il ls kl mf lu lv kn mg lx ly kp mh ma mb kr ha bi translated">顺便说一句，多伦多是一个伟大的城市，我强烈建议你去参观，不要忘记买一些糖果，玩得开心，嗯？</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nn"><img src="../Images/75a50530e307d05ddef2bb0a42c33892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCTy-DVkaEJnjNS440zSPg.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">照片由<a class="ae mc" href="https://unsplash.com/@csbphotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">康纳·塞缪尔</a>在<a class="ae mc" href="https://unsplash.com/s/photos/tim-hortons?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="ac81" class="jm jn hh bd jo jp jq jr js jt ju jv jw in jx io jy iq jz ir ka it kb iu kc kd bi translated">你喜欢这篇文章吗？</h1><p id="2e21" class="pw-post-body-paragraph lp lq hh kg b kh ki ii lr kj kk il ls kl lt lu lv kn lw lx ly kp lz ma mb kr ha bi translated">如果你喜欢这篇文章，请在LinkedIn和GitHub上关注我，如果你有任何问题，请不要犹豫。</p></div></div>    
</body>
</html>