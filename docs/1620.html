<html>
<head>
<title>ListView in android a tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">android中的ListView教程</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/listview-in-android-a-tutorial-9b8410e27317?source=collection_archive---------24-----------------------#2021-03-09">https://medium.com/analytics-vidhya/listview-in-android-a-tutorial-9b8410e27317?source=collection_archive---------24-----------------------#2021-03-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="76bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个<code class="du jc jd je jf b">ListView</code>是一个视图列表，本教程<strong class="ig hi"> <em class="jg">将展示如何在android中</em> </strong> <em class="jg"> </em>实现一个<code class="du jc jd je jf b">ListView</code>。最终产品如下所示。</p><div class="jh ji jj jk fd ab cb"><figure class="jl jm jn jo jp jq jr paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/3fe7a7bbc176c35c0a60141938a6f0c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*8t6HEcxfg4IBNkrydD6mqQ.png"/></div></figure><figure class="jl jm jn jo jp jq jr paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/2258b0984c46300fed8a7f71df36e595.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*gtzuE9aWTsdWOagOg-Nb8w.png"/></div></figure><figure class="jl jm jy jo jp jq jr paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/d218ddbee19d824111de4035aada5a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*hdR5dxg2ndjqKExK_2Z1Wg.png"/></div></figure></div><p id="083b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先创建应用<strong class="ig hi"> <em class="jg">主活动布局</em> </strong> <em class="jg"> </em>文件，<code class="du jc jd je jf b">activity_main.xml</code>:</p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="ec47" class="kd ke hh jf b fi kf kg l kh ki">&lt;!-- activity_main.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;FrameLayout xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    xmlns:tools="<a class="ae kj" href="http://schemas.android.com/tools" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/tools</a>"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"&gt;<br/> <br/>    &lt;ListView<br/>        android:id="@+id/list_view"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="match_parent"<br/>        android:divider="<a class="ae kj" href="http://twitter.com/android" rel="noopener ugc nofollow" target="_blank">@android</a>:color/white"<br/>        android:dividerHeight="1dp"<br/>        android:headerDividersEnabled="false"<br/>        android:footerDividersEnabled="true"<br/>        android:listSelector="<a class="ae kj" href="http://twitter.com/drawable/lv_item_pressed" rel="noopener ugc nofollow" target="_blank">@drawable/lv_item_pressed</a>"<br/>        android:background="<a class="ae kj" href="http://twitter.com/android" rel="noopener ugc nofollow" target="_blank">@android</a>:color/black" /&gt;<br/> <br/>&lt;/FrameLayout&gt;</span></pre><p id="fceb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个活动的布局是一个<code class="du jc jd je jf b">FrameLayout</code>，一个<strong class="ig hi"> <em class="jg">框架布局将它的</em> </strong> <em class="jg"> </em>子元素一个接一个的堆叠起来，这个布局只有一个子元素，就是<code class="du jc jd je jf b">ListView</code>。</p><p id="fc9c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jg">的大多数属性se </em> </strong> <em class="jg"> t </em>对于<code class="du jc jd je jf b">ListView</code>来说都是自解释的，比如<code class="du jc jd je jf b">layout_width</code>或者<code class="du jc jd je jf b">layout_height</code>。<code class="du jc jd je jf b">listSelector</code>只是一个效果，因为当<code class="du jc jd je jf b">ListView</code>中的一个项目被选中时，在这个例子中会绘制一个drawable。<code class="du jc jd je jf b">divider</code>是<code class="du jc jd je jf b">ListView</code>中视图之间的分隔线。一个<code class="du jc jd je jf b">ListView</code>可以有一个页眉和一个页脚，<code class="du jc jd je jf b">headerDividersEnabled</code>和<code class="du jc jd je jf b">footerDividersEnabled</code>允许页眉和页脚显示分隔线。</p><p id="5ae4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">已经为<code class="du jc jd je jf b">ListView</code>指定了布局属性，现在是时候为  <em class="jg"> </em> <code class="du jc jd je jf b"><em class="jg">ListView</em></code>中的项目<strong class="ig hi"> <em class="jg">创建视图了。在本例中，每一个交替行都有自己的视图，因此定义了两个布局，<code class="du jc jd je jf b">list_view_item.xml</code>和<code class="du jc jd je jf b">list_view_item_alt.xml</code>。</em></strong></p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="6fc8" class="kd ke hh jf b fi kf kg l kh ki">&lt;!-- list_view_item.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;LinearLayout xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:orientation="horizontal"&gt;<br/> <br/>    &lt;TextView<br/>        android:id="@+id/lv_item_name"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="6"<br/>        android:layout_height="wrap_content"<br/>        android:paddingTop="4dp"<br/>        android:paddingBottom="4dp"<br/>        android:textColor="<a class="ae kj" href="http://twitter.com/color/colorPrimary" rel="noopener ugc nofollow" target="_blank">@color/colorPrimary</a>"<br/>        android:textSize="25sp"<br/>        android:gravity="center_horizontal" /&gt;<br/> <br/>    &lt;ImageView<br/>        android:id="@+id/lv_item_img"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="2"<br/>        android:layout_height="match_parent" /&gt;<br/> <br/>    &lt;TextView<br/>        android:id="@+id/lv_item_time"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="2"<br/>        android:layout_height="match_parent"<br/>        android:paddingEnd="4dp"<br/>        android:textColor="<a class="ae kj" href="http://twitter.com/color/colorAccent" rel="noopener ugc nofollow" target="_blank">@color/colorAccent</a>"<br/>        android:textSize="14sp"<br/>        android:gravity="center" /&gt;<br/>&lt;/LinearLayout&gt;</span><span id="740e" class="kd ke hh jf b fi kk kg l kh ki">&lt;!-- list_view_item_alt.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;LinearLayout xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:orientation="horizontal"&gt;<br/> <br/>    &lt;ImageView<br/>        android:id="@+id/lv_item_img"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="2"<br/>        android:layout_height="match_parent" /&gt;<br/> <br/>    &lt;TextView<br/>        android:id="@+id/lv_item_name"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="6"<br/>        android:layout_height="wrap_content"<br/>        android:paddingTop="4dp"<br/>        android:paddingBottom="4dp"<br/>        android:textColor="<a class="ae kj" href="http://twitter.com/color/colorPrimary" rel="noopener ugc nofollow" target="_blank">@color/colorPrimary</a>"<br/>        android:textSize="24sp"<br/>        android:gravity="center_horizontal" /&gt;<br/> <br/>    &lt;TextView<br/>        android:id="@+id/lv_item_time"<br/>        android:layout_width="0dp"<br/>        android:layout_weight="2"<br/>        android:layout_height="match_parent"<br/>        android:paddingStart="4dp"<br/>        android:textColor="<a class="ae kj" href="http://twitter.com/color/colorAccent" rel="noopener ugc nofollow" target="_blank">@color/colorAccent</a>"<br/>        android:textSize="14sp"<br/>        android:gravity="center" /&gt;<br/>&lt;/LinearLayout&gt;</span></pre><p id="a158" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建了要在<code class="du jc jd je jf b">ListView</code>中显示的项目布局后，现在是<strong class="ig hi"> <em class="jg">创建控制器的时候了，控制器将由</em> </strong> <em class="jg"> </em>管理<code class="du jc jd je jf b">ListView</code>中每个项目的创建和显示，这是通过扩展<code class="du jc jd je jf b">BaseAdapter</code>类来完成的，如下所示:</p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="8442" class="kd ke hh jf b fi kf kg l kh ki">package com .twiserandom .mobileapps .demo .listview;<br/> <br/>import android .content .Context;<br/>import android .view .View;<br/>import android .view .ViewGroup;<br/>import android .widget .BaseAdapter;<br/>import android .widget .ImageView;<br/>import android .widget .TextView;<br/> <br/>public class<br/>        ListViewController<br/>            extends BaseAdapter {<br/> <br/>    private Context context;<br/> <br/>    private String names [ ] = {"armin" , "callum" , "eric" , "meg" , "michael" };<br/>    private int img_ids[ ] = {R .drawable .armin , R .drawable .callum , R .drawable .eric ,<br/>                        R .drawable .meg , R .drawable .michael };<br/>    private String last_seens [ ] = {"seen 1hr ago" , "seen 1mn ago" , "seen 1 sec ago" ,<br/>                            "seen 2hr ago" , "seen 3mn ago"};<br/>    ListViewController<br/>            (Context context ){<br/>        this .context = context; }<br/> <br/>    class<br/>            Person {<br/> <br/>        String name;<br/>        int img_id;<br/>        String last_seen;<br/> <br/>        Person<br/>                (String name , int img_id , String last_seen ){<br/>            this .name = name;<br/>            this .img_id = img_id;<br/>            this .last_seen = last_seen; }}<br/> <br/> <br/>    <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    public int<br/>            getCount ( ){/*<br/>                Return the number of data<br/>                elements .*/<br/>        return names .length; }<br/> <br/>    <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    public Object<br/>            getItem<br/>                (int position ){/* Can return null ,<br/>                    if have nothing to pass on .<br/>                    Data passed here can be gotten ,<br/>                    for example when implementing<br/>                    a click listener for an item<br/>                    in the ListView .*/<br/>        return new Person (names [position ] ,<br/>                           img_ids [position ] ,<br/>                           last_seens [position ] ); }<br/> <br/>    <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    public long<br/>            getItemId<br/>                (int position ){/* Can return 0<br/>                    , or -1 , if don't have own<br/>                    generated IDs , or if not <br/>                    interested in this method .<br/>                    This created id can be used<br/>                    for example , when implementing<br/>                    a click listener for an item in<br/>                    the ListView .*/<br/>        return img_ids[position ]; }<br/> <br/>    <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    public View<br/>            getView<br/>                (int position, View convertView , ViewGroup parent ){/* Return a view<br/>                    to be displayed in<br/>                    the ListView .*/<br/> <br/>        if (convertView == null ){/* The items in<br/>            the list view are<br/>            recyclable , which means they<br/>            are reusable , so only inflate an<br/>            item in the ListView when<br/>            necessary .*/<br/> <br/>            if (position % 2 == 0 )/* If position is <br/>                even , inflate<br/>                the even list view item .*/<br/>                convertView = View .inflate (context , R .layout .list_view_item , null );<br/>            else /* else inflate the odd list view<br/>                item .*/<br/>                convertView = View .inflate (context , R .layout .list_view_item_alt , null ); }<br/> <br/>        /* Set the data to be displayed */<br/>        TextView tv_name = (TextView ) convertView .findViewById (R .id .lv_item_name );<br/>        tv_name .setText (names [position ]);<br/> <br/>        TextView tv_date = (TextView ) convertView .findViewById (R .id .lv_item_time );<br/>        tv_date .setText (last_seens [position ]);<br/> <br/>        ImageView iv_picture = (ImageView ) convertView .findViewById (R .id .lv_item_img );<br/>        iv_picture .setImageResource (img_ids [position ]);<br/>        return convertView;<br/>        /* Return the view to be displayed */ } }</span></pre><p id="b8cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建了控制器类之后，现在是时候让<strong class="ig hi"> <em class="jg">创建</em> </strong> <code class="du jc jd je jf b"><strong class="ig hi"><em class="jg">MainActivity</em></strong></code> <strong class="ig hi"> <em class="jg">类</em> </strong> <em class="jg">，</em>将<code class="du jc jd je jf b">ListView</code>连接到它的控制器，其中的页眉和页脚也将被添加到<code class="du jc jd je jf b">ListView</code>中。</p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="a49d" class="kd ke hh jf b fi kf kg l kh ki">/* MainActivity.java */<br/> <br/>package com .twiserandom .mobileapps .demo .delete;<br/> <br/>import androidx .appcompat .app .AppCompatActivity;<br/> <br/>import android .os .Bundle;<br/>import android .view .View;<br/>import android .view .ViewGroup;<br/>import android .widget .AdapterView;<br/>import android .widget .ListView;<br/>import android .widget .TextView;<br/>import android .widget .Toast;<br/> <br/>public class<br/>        MainActivity<br/>            extends AppCompatActivity {<br/> <br/>    <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    protected void<br/>            onCreate (Bundle savedInstanceState ){<br/> <br/>        super .onCreate (savedInstanceState );<br/>        setContentView (R .layout .activity_main );<br/> <br/>        ListView lv = findViewById (R .id .list_view );<br/>        /* Get the ListView */<br/> <br/>        View header = View .inflate (this , R .layout .list_view_header , null );<br/>        /* Inflate the header layout , and add it to the list view .*/<br/>        lv .addHeaderView (header );<br/> <br/>        View footer = View .inflate(this , R .layout .list_view_footer , null );<br/>        /* Inflate the footer layout , and add it to the list view .*/<br/>        lv .addFooterView (footer );<br/> <br/>        lv .setAdapter (new ListViewController (this ) );<br/>        /* Connect the controller to the list view .*/<br/> <br/>        lv .setOnItemClickListener (new AdapterView .OnItemClickListener ( ){<br/>            /* Add an item click listener for the list view ,<br/>               other types of listeners exist , such as<br/>               setOnItemLongClickListener .*/<br/> <br/>            <a class="ae kj" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>            public void<br/>                    onItemClick<br/>                        (AdapterView  parent , View view , int position , long id ){<br/>                ListViewController .Person person =<br/>                        (ListViewController .Person ) parent .getItemAtPosition (position );<br/>                /* Get the data attached in the getItem method<br/>                   of the controller .*/<br/>                Toast .makeText (MainActivity .this ,<br/>                                 person .name + " " + person .last_seen ,<br/>                                  Toast.LENGTH_LONG)<br/>                        .show ( );/* Show a toast containing<br/>                        the person name , and last seen .*/ } }); }}</span></pre><p id="d126" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在前面的代码中，<code class="du jc jd je jf b">ListView</code>中添加了页眉和页脚，所以<strong class="ig hi"> <em class="jg">页眉和页脚</em> </strong> <em class="jg"> </em>必须有布局。这些必须有布局，在<code class="du jc jd je jf b">MainActivity</code>中膨胀，如下所示:</p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="e244" class="kd ke hh jf b fi kf kg l kh ki">&lt;!-- list_view_header.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;LinearLayout xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    android:orientation="horizontal"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"&gt;<br/> <br/>    &lt;TextView<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:text="Conversations"<br/>        android:textSize="32sp"<br/>        android:textColor="<a class="ae kj" href="http://twitter.com/android" rel="noopener ugc nofollow" target="_blank">@android</a>:color/holo_orange_light"<br/>        android:gravity="center" /&gt;<br/>&lt;/LinearLayout&gt;</span><span id="4bd1" class="kd ke hh jf b fi kk kg l kh ki">&lt;!-- list_view_footer.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;LinearLayout xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    android:orientation="horizontal"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"&gt;<br/> <br/>    &lt;TextView<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:text="@~"<br/>        android:textSize="32sp"<br/>        android:gravity="center" /&gt;<br/>&lt;/LinearLayout&gt;</span></pre><p id="16b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jc jd je jf b">activity_main.xml </code>中指定的<code class="du jc jd je jf b">ListView</code>的<code class="du jc jd je jf b">listSelector</code>为<code class="du jc jd je jf b">android:listSelector="@drawable/lv_item_pressed"</code>，表示可拉伸。<strong class="ig hi"> <em class="jg">可绘制</em> </strong> <em class="jg"> </em>将被按下的项目设置为白色背景，如下图:</p><pre class="jh ji jj jk fd jz jf ka kb aw kc bi"><span id="2086" class="kd ke hh jf b fi kf kg l kh ki">&lt;!-- lv_item_pressed.xml --&gt;<br/> <br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;selector xmlns:android="<a class="ae kj" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;<br/> <br/>    &lt;item android:drawable="<a class="ae kj" href="http://twitter.com/android" rel="noopener ugc nofollow" target="_blank">@android</a>:color/white"<br/>        android:state_pressed="true"/&gt;<br/>    &lt;!-- item pressed --&gt;<br/>&lt;/selector&gt;</span></pre></div><div class="ab cl kl km go kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ha hb hc hd he"><p id="4a25" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jg">原载于2021年3月9日https://difyel.com</em><a class="ae kj" href="https://difyel.com/android/listview-a-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="jg"/></a><em class="jg">。</em></p></div></div>    
</body>
</html>