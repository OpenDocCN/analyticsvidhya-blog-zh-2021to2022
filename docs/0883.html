<html>
<head>
<title>Git-Digital Signature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">git-数字签名</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/git-digital-signature-ed934153deab?source=collection_archive---------24-----------------------#2021-02-04">https://medium.com/analytics-vidhya/git-digital-signature-ed934153deab?source=collection_archive---------24-----------------------#2021-02-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="a19c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">努力工作吧，有一天你的签名会被称为亲笔签名！</p></blockquote><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/325a1a741ddc57db7e8ff590ae4c39fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FbKukfzXFIp_MjYrzp9hbA.png"/></div></div></figure><p id="906e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">我们所有的git提交都基于在<code class="du jw jx jy jz b">.<em class="ik">gitconfig</em></code> <em class="ik"> </em>或<em class="ik"> </em> <code class="du jw jx jy jz b"><em class="ik">.git/config</em></code> <em class="ik"> </em>全局或本地配置文件中配置的用户名和电子邮件id，如果没有配置git，使用下面的命令不会允许任何提交。</p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="a983" class="ke kf hi jz b fi kg kh l ki kj"><strong class="jz hj"><em class="ik">$ git config --global user.name username<br/>$ git config --global user.email email@example.com</em></strong><em class="ik"><br/># check all your global configuration using below commands.<br/></em><strong class="jz hj"><em class="ik">$ vi ~/.gitconfig</em></strong></span><span id="2e57" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik"><br/></em><strong class="jz hj"><em class="ik">$ git config --local user.name username<br/>$ git config --local user.email email@example.com<br/></em></strong><em class="ik"># check all your local configuration using below commands.<br/></em><strong class="jz hj"><em class="ik">$ vi your-git-repo/.git/config</em></strong></span></pre><p id="8776" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">每当我们提交用户名和电子邮件记录作为git提交的一部分。有一种方法可以在提交时覆盖已配置的用户名和电子邮件，这意味着它允许使用任何人的用户名和电子邮件，而无需获得用户的许可。最后，如果用户存在于GitHub中，他们的配置文件与GUI中的commit链接，但是在配置文件页面上，没有记录贡献活动。</p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="2c38" class="ke kf hi jz b fi kg kh l ki kj"><strong class="jz hj"><em class="ik">$ git commit --author="Anonymous User &lt;anonymous@example.com&gt;" -m "anonymous commit message"</em></strong></span></pre><ul class=""><li id="810e" class="kl km hi il b im in iq ir jt kn ju ko jv kp jg kq kr ks kt bi translated">假设您的计算机受到推送访问的威胁，任何恶意(<a class="ae ku" href="https://mikegerwitz.com/2012/05/a-git-horror-story-repository-integrity-with-signed-commits" rel="noopener ugc nofollow" target="_blank"><strong class="il hj"><em class="ik">git-horror-story</em></strong></a>)代码都有可能用您的名字提交，这可能会破坏您的组织名称和您的名字。</li></ul><p id="45d5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">为了避免这种情况，git想出了一个新特性叫做<a class="ae ku" href="https://docs.github.com/en/github/authenticating-to-github/signing-commits" rel="noopener ugc nofollow" target="_blank"> <strong class="il hj"> <em class="ik">签署提交</em> </strong> </a> <em class="ik">。</em>使用此功能，每次提交都用<code class="du jw jx jy jz b"><em class="ik">git</em></code>验证。</p><p id="eff5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">如何创建已签名的提交？</p><p id="2c64" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">要创建签名提交，我们需要配置Gnu隐私保护<a class="ae ku" href="https://gnupg.org/" rel="noopener ugc nofollow" target="_blank"><strong class="il hj"/></a>并安装个人密钥，公钥必须存储在GitHub配置文件<code class="du jw jx jy jz b">settings</code> → <code class="du jw jx jy jz b">SSH and GPG keys</code>部分。下面是配置GPG公钥配置所需遵循的步骤，</p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="7ee8" class="ke kf hi jz b fi kg kh l ki kj"><em class="ik"># To list the existing keys(public and private keys)</em><br/><strong class="jz hj"><em class="ik">$ gpp --list-key(s) </em></strong><em class="ik">or </em><strong class="jz hj"><em class="ik">gpg --list-secret-key(s)</em></strong><br/><em class="ik"># To list the existing signature</em><br/><strong class="jz hj"><em class="ik">$ gpg --list-signature</em><br/></strong><em class="ik"># To list the existing fingerprint<br/></em><strong class="jz hj"><em class="ik">$ gpg --fingerprint</em></strong></span><span id="bd3b" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik"># To generate new pair of gpg keys. If gpg version is 2.1.17 and above less then this version use (</em><strong class="jz hj"><em class="ik">gpg --gen-key</em></strong><em class="ik">)<br/></em><strong class="jz hj"><em class="ik">$ gpg --generate-key</em></strong><em class="ik"> or </em><strong class="jz hj"><em class="ik">gpg --full-generate-key<br/></em></strong><em class="ik">gpg (GnuPG) 2.2.9; Copyright (C) 2018 Free Software Foundation, Inc.<br/>This is free software: you are free to change and redistribute it.<br/>There is NO WARRANTY, to the extent permitted by law.</em></span><span id="372c" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik">Please select what kind of key you want:<br/>   (1) RSA and RSA (default)<br/>   (2) DSA and Elgamal<br/>   (3) DSA (sign only)<br/>   (4) RSA (sign only)<br/>Your selection? </em><strong class="jz hj"><em class="ik">1</em></strong><em class="ik"><br/>RSA keys may be between 1024 and 4096 bits long.<br/>What keysize do you want? (2048) </em><strong class="jz hj"><em class="ik">1024</em></strong><em class="ik"><br/>Requested keysize is 1024 bits<br/>Please specify how long the key should be valid.<br/>         0 = key does not expire<br/>      &lt;n&gt;  = key expires in n days<br/>      &lt;n&gt;w = key expires in n weeks<br/>      &lt;n&gt;m = key expires in n months<br/>      &lt;n&gt;y = key expires in n years<br/>Key is valid for? (0) </em><strong class="jz hj"><em class="ik">0</em></strong><em class="ik"><br/>Key does not expire at all<br/>Is this correct? (y/N) </em><strong class="jz hj"><em class="ik">y</em></strong></span><span id="0c33" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik">GnuPG needs to construct a user ID to identify your key.</em></span><span id="c565" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik">Real name: </em><strong class="jz hj"><em class="ik">Felix Stephen</em></strong><em class="ik"> <br/>Email address: </em><a class="ae ku" href="mailto:felsen88@gmail.com" rel="noopener ugc nofollow" target="_blank"><strong class="jz hj"><em class="ik">my_email@example.com</em></strong></a><em class="ik"><br/>Comment: <br/>You selected this USER-ID:<br/>    "Felix Stephen &lt;</em><a class="ae ku" href="mailto:felsen88@gmail.com" rel="noopener ugc nofollow" target="_blank"><em class="ik">my_email@example.com</em></a><em class="ik">&gt;"</em></span><span id="35ae" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? </em><strong class="jz hj"><em class="ik">O</em></strong><em class="ik"><br/>We need to generate a lot of random bytes. It is a good idea to perform<br/>some other action (type on the keyboard, move the mouse, utilize the<br/>disks) during the prime generation; this gives the random number<br/>generator a better chance to gain enough entropy.<br/>We need to generate a lot of random bytes. It is a good idea to perform<br/>some other action (type on the keyboard, move the mouse, utilize the<br/>disks) during the prime generation; this gives the random number<br/>generator a better chance to gain enough entropy.<br/>gpg: key A33AFD6BAC5AD0F9 marked as ultimately trusted<br/>gpg: revocation certificate stored as '/root/.gnupg/openpgp-revocs.d/81E68D24686B87703B61E00EA33AFD6BAC5AD0F9.rev'<br/>public and secret key created and signed.</em></span><span id="efd0" class="ke kf hi jz b fi kk kh l ki kj"><em class="ik">pub   rsa1024 2021-02-04 [SC]<br/>      81E68D24686B87703B61E00EA33AFD6BAC5AD0F9<br/>uid                      Felix Stephen &lt;</em><a class="ae ku" href="mailto:felsen88@gmail.com" rel="noopener ugc nofollow" target="_blank"><em class="ik">my_email@example.com</em></a><em class="ik">&gt;<br/>sub   rsa1024 2021-02-04 [E]</em></span><span id="c6db" class="ke kf hi jz b fi kk kh l ki kj"># Once the key is generated we need to get export the key and add it into github profile settings--&gt; SSH and GPG Keys section.<br/><strong class="jz hj"><em class="ik">$ gpg --armor --export &lt;key-id </em></strong><em class="ik">or</em><strong class="jz hj"><em class="ik"> finger-print </em></strong><em class="ik">or</em><strong class="jz hj"><em class="ik"> email-id&gt;<br/></em></strong>-----BEGIN PGP PUBLIC KEY BLOCK-----<br/>&lt;encrypted secret key&gt;<br/>-----END PGP PUBLIC KEY BLOCK-----</span></pre><p id="e97e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">将密钥添加到GitHub帐户后，需要在git配置设置中配置密钥细节。下面是实现git配置所需遵循的步骤，</p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="6ab1" class="ke kf hi jz b fi kg kh l ki kj">#<em class="ik"> Git username configuration settings</em><strong class="jz hj"><em class="ik"><br/>$ git config --global user.name "Felix Stephen"<br/></em></strong>#<em class="ik"> Git user email configuration settings</em><strong class="jz hj"><em class="ik"><br/>$ git config --global user.email "my_email@example.com"<br/></em></strong># To get the gpg key id<strong class="jz hj"><br/><em class="ik">$ gpg --list-secret-keys --keyid-format LONG</em></strong><br/>sec   rsa1024/A33AFD6BAC5AD0F9 2021-02-04 [SC]<br/>      <em class="ik">81E68D24686B87703B61E00EA33AFD6BAC5AD0F9</em><br/>uid                 [ultimate] Felix Stephen &lt;<a class="ae ku" href="mailto:felsen88@gmail.com" rel="noopener ugc nofollow" target="_blank">my_email@example.com</a>&gt;<br/>ssb   rsa1024/5821E0924BF659ED 2021-02-04 [E]</span><span id="81d5" class="ke kf hi jz b fi kk kh l ki kj"># Add the key id into git configuration settings<strong class="jz hj"><em class="ik"><br/>$ git config --global user.signingkey A33AFD6BAC5AD0F9<br/></em></strong># Enabling signed commit configuration settings<strong class="jz hj"><br/><em class="ik">$ git config --global commit.gpgsign true<br/></em></strong># Enabling signed tag configuration settings<br/><strong class="jz hj"><em class="ik">$ git config --global tag.gpgSign true</em></strong></span></pre><p id="2e3f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">一旦添加了所有的git配置，我们就差不多完成了！😄</p><p id="4ac7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated"><strong class="il hj"> Git签名提交！</strong></p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="6615" class="ke kf hi jz b fi kg kh l ki kj"># To create signed a commits!<br/><strong class="jz hj"><em class="ik">$ git commit -S -m "commit message"<br/></em></strong># To check the signature using git log<br/><strong class="jz hj"><em class="ik">$ git log --show-signature<br/></em></strong># To push all your changes<strong class="jz hj"><em class="ik"><br/>$ git push origin main</em></strong></span></pre><p id="6af6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">一旦您将所有的更改推送到GitHub中，您的带有<code class="du jw jx jy jz b">verified</code>批次标记的提交，</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kv"><img src="../Images/e5d95b844f1255ee48521eef46e062b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUf2GA0PodjtfJmkipNYGA.png"/></div></div></figure><p id="3694" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated"><strong class="il hj"> Git签名标签！</strong></p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="31f8" class="ke kf hi jz b fi kg kh l ki kj"># To create a signed tag<br/><strong class="jz hj"><em class="ik">$ git tag -s v1.0 -m "Release 1.0"<br/></em></strong># To publish your tags<strong class="jz hj"><em class="ik"><br/>$ git push origin v1.0</em></strong><br/># To view the signed tag<br/><strong class="jz hj"><em class="ik">$ git show v1.0</em></strong></span></pre><p id="f101" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">一旦你按下你所有的标签，你的标签就会标上<code class="du jw jx jy jz b">verified </code>批次。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es kw"><img src="../Images/a38b7dc53f266bd95995e9f4d06586c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9M35ombZvwJpomUTzWjdg.png"/></div></div></figure><p id="76f8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jt iv iw ix ju iz ja jb jv jd je jf jg hb bi translated">每当您提交时，如果您得到以下错误，请使用下面的命令来纠正它！</p><pre class="ji jj jk jl fd ka jz kb kc aw kd bi"><span id="b591" class="ke kf hi jz b fi kg kh l ki kj">error: gpg failed to sign the data<br/>fatal: failed to write commit object<br/><strong class="jz hj"><em class="ik">$ export GPG_TTY=$(tty)</em></strong></span></pre></div></div>    
</body>
</html>