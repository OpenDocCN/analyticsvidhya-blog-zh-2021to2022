<html>
<head>
<title>A Beginners Guide to Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫入门指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-beginners-guide-to-pandas-4ee424cf3360?source=collection_archive---------21-----------------------#2021-01-11">https://medium.com/analytics-vidhya/a-beginners-guide-to-pandas-4ee424cf3360?source=collection_archive---------21-----------------------#2021-01-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4f42" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">开始数据分析的第一步。</h2></div><p id="e7b5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">自2010年pandas首次开源以来，它已经发展成为一个漂亮而广泛的数据分析库。它通常与NumPy、scikit-learn、matplotlib等计算和统计库结合使用。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/11a95d54371fd55827b968062fb7e335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9PJob-rUG-_m5hbqsaQ2Ig.jpeg"/></div></div></figure><p id="1f69" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本文中，我将带您了解pandas中最常见的功能，以便您准备好进行一些探索性的数据分析。</p></div><div class="ab cl ke kf go kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="ha hb hc hd he"><p id="037e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">pandas有两种被反复使用的数据结构:序列和数据帧</p><h1 id="1812" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">系列</h1><p id="9300" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">简单地说，series是元素的一维数组，但是增加了一个特性:有一个显式的索引来寻址每个元素。要创建一个序列，需要传递一个数组(一个列表或者一个字典甚至一个元组)。还可以为索引传递一个显式数组。当索引一个序列时，把它想象成一个散列表、关联数组或字典数据结构。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="0fb2" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; import pandas as pd<br/>&gt;&gt;&gt; series = pd.Series([1,2,3,4,5,6,7])<br/>&gt;&gt;&gt; series<br/>0    1<br/>1    2<br/>2    3<br/>3    4<br/>4    5<br/>5    6<br/>6    7<br/>dtype: int64</span><span id="c834" class="ln km hh lj b fi ls lp l lq lr">&gt;&gt;&gt; series.index<br/>RangeIndex(start=0, stop=7, step=1)</span><span id="c439" class="ln km hh lj b fi ls lp l lq lr">&gt;&gt;&gt; #or pass an explicit index<br/>&gt;&gt;&gt; series2 = pd.Series([1,2,3,4,5,6,7], index['a','b','c','d','e','f','g'])<br/>&gt;&gt;&gt; series2<br/>a    1<br/>b    2<br/>c    3<br/>d    4<br/>e    5<br/>f    6<br/>g    7<br/>dtype: int64</span></pre><h1 id="8cc3" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">数据帧</h1><p id="a6b7" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">pandas是为处理表格或异构数据而设计的。这是通过DataFrame数据结构实现的。它就像一个表格，包含可以被索引的行和列。创建数据集的方法有很多种，最常见的方法是传递一个字典。让我们创建一个。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lt"><img src="../Images/a8a5423faa5f65800e79c0a4d9e2e8c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*aMLjT6jF0znwcU0V2KE6zg.png"/></div></figure><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="b1ee" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; diction = {'name': ['Alex', 'Bob', 'Charlie', 'Jack', 'Melissa'],<br/>          'age': [20, 18, 19, 20, 19],<br/>          'score': [109, 108, 99, 120, 115]}<br/>&gt;&gt;&gt; dataframe1 = pd.DataFrame(diction)</span></pre><p id="6cb1" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了展示pandas库的真正威力，我们现在将从kaggle的一个小数据集开始工作。这是一个学生考试成绩的数据集，以及它如何受到经济、个人和社会因素的影响。从<a class="ae lu" href="https://www.kaggle.com/spscientist/students-performance-in-exams" rel="noopener ugc nofollow" target="_blank">这里</a>下载数据集。</p><h2 id="2dae" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">导入数据集</h2><p id="4ab8" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">为了使用pandas导入csv格式的数据集，我们使用pandas read_csv函数。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="9eed" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df = pd.read_csv('StudentsPerformance.csv')</span></pre><h2 id="b72c" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">检查数据</h2><p id="9b20" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">通常，当我们处理数据集时，我们对知道它包含哪些列以及每列描述了什么感兴趣。使用pandas head()和info()函数很容易做到这一点。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="afb6" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df.head()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es mi"><img src="../Images/572d038aea55b6ad2ca88f1191a557b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jw_BQshh8kxEqmSrRquLmQ.png"/></div></div></figure><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="b7bf" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df.info()<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 1000 entries, 0 to 999<br/>Data columns (total 8 columns):<br/>gender                         1000 non-null object<br/>race/ethnicity                 1000 non-null object<br/>parental level of education    1000 non-null object<br/>lunch                          1000 non-null object<br/>test preparation course        1000 non-null object<br/>math score                     1000 non-null int64<br/>reading score                  1000 non-null int64<br/>writing score                  1000 non-null int64<br/>dtypes: int64(3), object(5)<br/>memory usage: 62.6+ KB</span></pre><h2 id="a475" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">检查空值</h2><p id="dc1f" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">数据集通常包含空值，这在ML过程中会成为一个麻烦。我们可以使用info()函数检查空值，或者对每个单独的列求和来检查列中的空值。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="dfc9" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df.isnull().sum()<br/>gender                         0<br/>race/ethnicity                 0<br/>parental level of education    0<br/>lunch                          0<br/>test preparation course        0<br/>math score                     0<br/>reading score                  0<br/>writing score                  0<br/>dtype: int64</span></pre><h2 id="798f" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">描述数据</h2><p id="b2d2" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">描述了另一个非常有用函数()。这给出了一个5个数字的数据摘要，以及一些其他有用的统计数据，用于解释我们的数据所在的范围。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="bd0d" class="ln km hh lj b fi lo lp l lq lr">df.describe()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mj"><img src="../Images/df131b76fd275a816c6d17c360171ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*e7AOwV-CPr9bCyB8FPZ7Ig.png"/></div></figure><h2 id="e138" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">从数据中提问</h2><p id="a0f0" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">探索数据集的主要原因是为了能够回答问题。例如，人们可能想通过查看数据集来了解“有多少学生通过了数学考试？”或者“有多少学生的分数在80分以上？”对熊猫来说，回答这些问题很容易。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="c4e4" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; # how many students passed the math exam?<br/>&gt;&gt;&gt; passing_score = 40<br/>&gt;&gt;&gt; math_stats = df['math score'] &gt;= passing_score<br/>&gt;&gt;&gt; print(math_stats.sum())<br/>960</span><span id="1b9b" class="ln km hh lj b fi ls lp l lq lr">&gt;&gt;&gt; # how many students scored a percentage above 80?<br/>&gt;&gt;&gt; total_marks = df['math score'] + df['reading score'] + df['writing score']<br/>&gt;&gt;&gt; total = 3<br/>&gt;&gt;&gt; total_percentage = (total_marks/total)<br/>&gt;&gt;&gt; above_80 = total_percentage &gt;= 80<br/>&gt;&gt;&gt; print(total_percentage[above_80].count())<br/>198</span></pre><h2 id="0aef" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">按百分比对数据进行排序</h2><p id="c7b3" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">既然我们已经计算了所有学生的百分比，我们可能希望根据他们的排名对数据进行排序。pandas允许你根据你想要的列进行排序。为此，让我们在数据集中添加另一个名为“percentage”的列，并对其进行排序。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="183f" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df['percentage'] = total_percentage<br/>&gt;&gt;&gt; df.sort_values(by='percentage', ascending=False)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es mk"><img src="../Images/cb25d0d0e9126d22899b362487eaf09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yCZ7-5NLIKtPLmDOdrkHQ.png"/></div></div></figure><h2 id="4ee9" class="ln km hh bd kn lv lw lx kr ly lz ma kv jf mb mc kx jj md me kz jn mf mg lb mh bi translated">按值计数</h2><p id="0641" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">有时我们可能对分析数据集中的特定列感兴趣。例如,“父母教育水平”列在整个列中包含5个唯一值。我们不妨统计一下这些数值。pandas value_counts()函数使这变得非常简单。</p><pre class="jt ju jv jw fd li lj lk ll aw lm bi"><span id="bb20" class="ln km hh lj b fi lo lp l lq lr">&gt;&gt;&gt; df['parental level of education'].unique()</span><span id="8d76" class="ln km hh lj b fi ls lp l lq lr">array(["bachelor's degree", 'some college', "master's degree",<br/>       "associate's degree", 'high school', 'some high school'],<br/>      dtype=object)</span><span id="6482" class="ln km hh lj b fi ls lp l lq lr">&gt;&gt;&gt; df['parental level of education'].value_counts()</span><span id="2a7d" class="ln km hh lj b fi ls lp l lq lr">some college          226<br/>associate's degree    222<br/>high school           196<br/>some high school      179<br/>bachelor's degree     118<br/>master's degree        59<br/>Name: parental level of education, dtype: int64</span></pre></div><div class="ab cl ke kf go kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="ha hb hc hd he"><h1 id="47a2" class="kl km hh bd kn ko ml kq kr ks mm ku kv in mn io kx iq mo ir kz it mp iu lb lc bi translated">包扎</h1><p id="842f" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">这里我只讨论了在探索性数据分析中重复使用的几个方便的函数。对于使用熊猫的完整指南，最好的来源是<a class="ae lu" href="https://pandas.pydata.org/docs/" rel="noopener ugc nofollow" target="_blank">文档</a>本身！</p></div></div>    
</body>
</html>