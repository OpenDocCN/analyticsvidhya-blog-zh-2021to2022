<html>
<head>
<title>How To Easily Extract Text From Any PDF With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python从任何PDF文件中轻松提取文本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-easily-extract-text-from-any-pdf-with-python-fc6efd1dedbe?source=collection_archive---------0-----------------------#2021-02-03">https://medium.com/analytics-vidhya/how-to-easily-extract-text-from-any-pdf-with-python-fc6efd1dedbe?source=collection_archive---------0-----------------------#2021-02-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/8499a8fc4927656d8cf0d988de5b0127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yk89nImhYxYkfs3opAkE-A.png"/></div></div></figure><div class=""/><div class=""><h2 id="3255" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">比以往任何时候都容易</h2></div><p id="ee04" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">数据科学家经常不得不处理PDF中包含的信息，尽管他们中的一些人只是复制和粘贴他们需要的数据，这是一种可怕的做法，更不用说从长远来看这是最慢和最低效的工作方式，而且依赖于PDF，甚至可能无法做到这一点。</p><p id="674e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">在我们开始之前，感谢Carlos Melo-sigmoid允许我使用为他的数据科学课程创建的假PDF报告，我是该课程的学生，非常喜欢它。如果你不认识他，我强烈建议你在Instagram、T2、博客和YouTube上关注他，这是我最喜欢的数据科学知识来源。</p><p id="4722" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">如果你想跟进这个项目，而不仅仅是PDF水管工的功能，请务必看看我的<a class="ae ke" href="https://colab.research.google.com/drive/1SObGEF2I2GUt07wmqDELpIdLBpmmHG6p#scrollTo=mj_3akc_PpUB" rel="noopener ugc nofollow" target="_blank"> Google Colab笔记本</a>，我在里面讲述了我在这篇文章中谈到的所有内容，你也可以看到我提到的整个项目。</p><p id="90d6" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们在本教程中使用的工具是<a class="ae ke" href="https://github.com/jsvine/pdfplumber" rel="noopener ugc nofollow" target="_blank"> PDF Plumber </a>，一个开源的python包，它很棒，简单而强大。</p><p id="1a90" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae ke" href="https://drive.google.com/drive/folders/1kzpPatP5OqZJUAEJNCDf1dFwUP9515Rg" rel="noopener ugc nofollow" target="_blank">如果您想查看我在本例中使用的PDF，请点击此处</a>。</p><h1 id="b366" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">1.导入您的模块。</h1><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="d181" class="lg kg ht lc b fi lh li l lj lk">pip install pdfplumber -q</span><span id="4d50" class="lg kg ht lc b fi ll li l lj lk">import pdfplumber</span></pre><p id="c7c4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在让我们来看看PDF Plumber的主要功能:</p><h1 id="99f2" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">2.打开(“路径/到/目录”)</h1><p id="4120" class="pw-post-body-paragraph ji jj ht jk b jl lm iu jn jo ln ix jq jr lo jt ju jv lp jx jy jz lq kb kc kd hb bi translated">这个函数将打开你作为参数传递的文件，假设你有一个名为“pdf”的变量，它包含一个文件的目录:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="75f0" class="lg kg ht lc b fi lh li l lj lk">pdf = pdfplumber.open('/content/file.pdf')</span></pre><h1 id="a9b1" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">3.第[ ]页</h1><p id="0eab" class="pw-post-body-paragraph ji jj ht jk b jl lm iu jn jo ln ix jq jr lo jt ju jv lp jx jy jz lq kb kc kd hb bi translated">打开文件后，您想要选择要提取信息的页面，假设您想要的信息在第一页，索引将为0，因为Python从0开始计数:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="e1a7" class="lg kg ht lc b fi lh li l lj lk">page = pdf.pages[0]</span></pre><p id="3413" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">想象你正在阅读一本书，第一步是打开这本书，然后你寻找你想要阅读的页面，然后你阅读它(即从中提取信息)，Python以同样的方式工作。</p><h1 id="16fd" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">4.提取文本()</h1><p id="23d8" class="pw-post-body-paragraph ji jj ht jk b jl lm iu jn jo ln ix jq jr lo jt ju jv lp jx jy jz lq kb kc kd hb bi translated">现在您已经打开了一个页面，您需要从中提取文本:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="42c6" class="lg kg ht lc b fi lh li l lj lk">text = page.extract_text()</span></pre><p id="f2aa" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">如果您在print()语句中调用变量text，您将得到如下输出:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="d64f" class="lg kg ht lc b fi lh li l lj lk">However, if you use the print function your text will be formatted like this:</span><span id="d6a7" class="lg kg ht lc b fi ll li l lj lk">print(text)</span><span id="9555" class="lg kg ht lc b fi ll li l lj lk">SIGMOIDAL <br/>   <br/>Relatório Diário <br/> <br/>Data: 10/08/2020 <br/> <br/>RECEITA: R$ 1.397,00 <br/>DADOS ATUALIZADOS POR CARLOS MELO<br/> <br/> <br/> Visitantes: 1367 <br/>A quantidade de visitantes diz respeito a visitantes únicos visitando qualquer <br/>página do domínio ou subdomínio sigmoidal.ai. Compreende, então, cursos, <br/>blogs e landing pages. <br/> Inscritos: 33 <br/>É considerado aqui o número de leads gerados por meio de cadastro <br/>voluntário nos formulários do cabeçalho, rodapé ou materiais ricos (como <br/>eBook, infográficos, entre outros). <br/> Assinantes: 6 <br/>Clientes assinantes da Escola de Data Science, considerando-se o plano <br/>renovável de assinatura mensal. </span></pre><p id="7ac6" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">print()函数将' \n '识别为换行符，将' \t '识别为制表符，因此文本被格式化。顺便说一下，这是我用来写这篇文章的摘录，你的输出会和我的不同。</p><p id="7b04" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">然而，如果您只是调用变量，您的输出将是:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="d3bc" class="lg kg ht lc b fi lh li l lj lk">SIGMOIDAL \n \nRelatório Diário \n \nData: 10/08/2020 \n \nRECEITA: R$ 1.397,00 \nDADOS ATUALIZADOS POR CARLOS MELO\n \n \n Visitantes: 1367 \nA quantidade de visitantes diz respeito a visitantes únicos visitando qualquer \npágina do domínio ou subdomínio sigmoidal.ai. Compreende, então, cursos, \nblogs e landing pages. \n Inscritos: 33 \nÉ considerado aqui o número de leads gerados por meio de cadastro \nvoluntário nos formulários do cabeçalho, rodapé ou materiais ricos (como \neBook, infográficos, entre outros). \n Assinantes: 6 \nClientes assinantes da Escola de Data Science, considerando-se o plano \nrenovável de assinatura mensal. \n \n \n</span></pre><p id="00e9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这就是你开始处理文本的方式。假设我们想要这个文件包含的利润值，即“1397，00”，我们必须清除这个输出，直到我们得到字符串“1397.00”，然后我们必须将它转换为浮点型。如果你想一步一步地看这个过程，你可以看看我为这个项目做的笔记本。不管怎样，代码应该是:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="d337" class="lg kg ht lc b fi lh li l lj lk">float(text.split("\n")[6].replace("\t", "").split("R$")[1])<br/>1397.00</span></pre><p id="4341" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">假设您有许多遵循相同文本模式的文件，您可以创建一个“for循环”,然后Python将遍历所有文件并返回每个文件的利润值。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="54e6" class="lg kg ht lc b fi lh li l lj lk">sum = 0 #make a counter</span><span id="5daa" class="lg kg ht lc b fi ll li l lj lk">#making the function</span><span id="1e8e" class="lg kg ht lc b fi ll li l lj lk">for reports in week_files:<br/>     report = pdfplumber.open(reports)<br/>     page = report.pages[0]<br/>     text = page.extract_text() #extracting the text<br/>     value = text.split("\n")[6].replace("\t", "").split("R$")[1]<br/>     value = float(value)<br/>     sum += value</span><span id="da4d" class="lg kg ht lc b fi ll li l lj lk">print("{} ----&gt; {}".format(reports, value))</span></pre><p id="078d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">如果你喜欢这个教程，请与你的朋友分享，并留下你最喜欢的和我可以做得更好的评论，不要忘记在<a class="ae ke" href="https://www.linkedin.com/in/vin%C3%ADcius-porfirio-purgato-7891401b3/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ke" href="https://github.com/vinny380" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上添加我，如果你有任何问题，不要犹豫。</p><p id="af4f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">参考:</p><p id="707f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae ke" href="https://www.freepik.com/vectors/background" rel="noopener ugc nofollow" target="_blank">背景</a>starline创建的矢量—<a class="ae ke" href="http://www.freepik.com" rel="noopener ugc nofollow" target="_blank">www.freepik.com</a></p><div class="hh hi ez fb hj lr"><a href="https://colab.research.google.com/drive/1SObGEF2I2GUt07wmqDELpIdLBpmmHG6p#scrollTo=d0izPqVnWZ9L" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hu fi z dy lw ea eb lx ed ef hs bi translated">谷歌联合实验室</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">编辑描述</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">colab.research.google.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf hp lr"/></div></div></a></div><p id="b24d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae ke" href="https://sigmoidal.ai/blog-sigmoidal/" rel="noopener ugc nofollow" target="_blank">https://sigmoidal.ai/blog-sigmoidal/</a></p></div></div>    
</body>
</html>