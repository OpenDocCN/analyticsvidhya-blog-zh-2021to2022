<html>
<head>
<title>Introduction to GraphQL with Ballerina</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">芭蕾舞女演员GraphQL简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-graphql-with-ballerina-b883ce46c460?source=collection_archive---------7-----------------------#2021-09-05">https://medium.com/analytics-vidhya/introduction-to-graphql-with-ballerina-b883ce46c460?source=collection_archive---------7-----------------------#2021-09-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4ad8" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">想用更少的API调用做更多的事情吗？</h2></div><p id="a77d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">GraphQL已经成为实现数据API的重要技术，因为它为查询数据提供了一种方便而直观的方法。它解决了在传统数据服务中可能会注意到的潜在问题，如数据过度获取和高延迟。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/8af3b53374f0de86ad12e49d9e26fde7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYeawe1bNfRHzh_3WxGAdg.png"/></div></div></figure><h2 id="4be2" class="ke kf hh bd kg kh ki kj kk kl km kn ko jf kp kq kr jj ks kt ku jn kv kw kx ky bi translated">GraphQL是什么？</h2><p id="8785" class="pw-post-body-paragraph iw ix hh iy b iz kz ii jb jc la il je jf lb jh ji jj lc jl jm jn ld jp jq jr ha bi translated">所以你可能知道<a class="ae le" href="https://en.wikipedia.org/wiki/Representational_state_transfer" rel="noopener ugc nofollow" target="_blank"> REST </a>架构。我可以说大多数现代应用程序网络架构都是基于REST的，它基本上使用HTTP调用来获取和修改网络上的数据。常用的操作包括GET、POST、PUT和DELETE。尽管这是一件非常酷的事情，但当考虑大规模应用时，它也有一些缺点。让我解释一下。</p><p id="76bc" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">假设您有一组API端点来获取一些与员工管理系统相关的数据，并且您有一个包含大量数据集的数据库。例如，您需要雇员Sam的个人详细信息记录，如地址、联系电话和工资。解决这个问题的方法很简单，就是获取员工列表，浏览该列表，找到Sam，然后获取他的ID，最后查询工资表，获取与该ID相关的数据。这是正常的做法。想象你有数百万条数据记录，你会在这里面临一些重大问题。</p><ol class=""><li id="e634" class="lf lg hh iy b iz ja jc jd jf lh jj li jn lj jr lk ll lm ln bi translated">无论是否需要，它都会获取所有数据。这叫做<strong class="iy hi">过度抓取。</strong></li><li id="29e3" class="lf lg hh iy b iz lo jc lp jf lq jj lr jn ls jr lk ll lm ln bi translated">它需要<strong class="iy hi">多次网络调用</strong>才能完成一项简单的工作。</li><li id="1f74" class="lf lg hh iy b iz lo jc lp jf lq jj lr jn ls jr lk ll lm ln bi translated">在某些情况下，它可能无法获取您需要的数据(类似于上面的第2点),这被称为<strong class="iy hi">提取不足。</strong></li></ol><p id="f88c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了解决这些问题，脸书提出了一个名为<strong class="iy hi"> GraphQL </strong>的非常酷的解决方案，这是一种用于API的开源数据查询和操作语言。</p><h2 id="1fdd" class="ke kf hh bd kg kh ki kj kk kl km kn ko jf kp kq kr jj ks kt ku jn kv kw kx ky bi translated">为什么要使用GraphQL？</h2><p id="e8a3" class="pw-post-body-paragraph iw ix hh iy b iz kz ii jb jc la il je jf lb jh ji jj lc jl jm jn ld jp jq jr ha bi translated">您需要考虑在项目中使用GraphQL的原因有很多。主要是，</p><ul class=""><li id="81d9" class="lf lg hh iy b iz ja jc jd jf lh jj li jn lj jr lt ll lm ln bi translated"><strong class="iy hi">如我所说，它防止数据过度提取和提取不足</strong>。所以你可以得到你想要的。不多不少。</li><li id="c3d9" class="lf lg hh iy b iz lo jc lp jf lq jj lr jn ls jr lt ll lm ln bi translated"><strong class="iy hi"> GraphQL有一个强类型模式。</strong>我们可以定义我们的API支持什么类型的数据记录。这将有助于开发人员容易理解如何使用网络调用。GraphQL模式最基本的组件是<strong class="iy hi">对象类型</strong>，它只是表示一种可以从服务中获取的对象，以及它有哪些字段。在GraphQL模式语言中，我们可以这样表示它:</li></ul><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="f5c6" class="ke kf hh lv b fi lz ma l mb mc">type Employee {<br/>  id: String!<br/>  name: String!<br/>  phone: String!<br/>  age: Int!<br/>}</span></pre><ul class=""><li id="1005" class="lf lg hh iy b iz ja jc jd jf lh jj li jn lj jr lt ll lm ln bi translated"><strong class="iy hi">节省时间和带宽。</strong>正如我前面提到的，使用graphQL，我们可以消除多个调用来完成一项工作。所以我们可以在一个查询调用中做很多事情。脸书提出这一想法的主要原因之一是，大多数脸书用户使用移动设备，不能保证始终有稳定的网络连接，所以graphql也有助于用更少的带宽运行查询呼叫。所以双赢。</li></ul><h2 id="81d5" class="ke kf hh bd kg kh ki kj kk kl km kn ko jf kp kq kr jj ks kt ku jn kv kw kx ky bi translated">芭蕾舞女演员-GraphQL</h2><p id="5d45" class="pw-post-body-paragraph iw ix hh iy b iz kz ii jb jc la il je jf lb jh ji jj lc jl jm jn ld jp jq jr ha bi translated">哦，我忘了说，你可以使用许多编程语言来编写你的graphql服务器，但我最喜欢<a class="ae le" href="https://ballerina.io/learn/user-guide/network-communication/graphql/" rel="noopener ugc nofollow" target="_blank">芭蕾舞演员</a>，因为使用芭蕾舞演员编写和理解模式和类型非常简单。它是一种编程语言，GraphQL是其内置语言级服务支持的一部分。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es md"><img src="../Images/60ed0f82ef99a947df3e14cea5aefa3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2P77k84snPLvGKioCnqUzg.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><a class="ae le" href="https://wso2.com/graphql-apis" rel="noopener ugc nofollow" target="_blank">https://wso2.com/graphql-apis</a></figcaption></figure><p id="553e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在Ballerina中，<strong class="iy hi"> GraphQL对象结构是使用服务建模的。</strong>芭蕾舞演员GraphQL服务包含映射到GraphQL对象字段的资源方法，并作为解析器函数提供其数据。GraphQL模式是从这个服务结构及其资源中自动派生出来的。</p><p id="9690" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们可以像这样写一个简单的ballerina-graphQL服务器，</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="2ee3" class="ke kf hh lv b fi lz ma l mb mc">import ballerina/graphql;<br/> <br/>service graphql:Service /query on new graphql:Listener(8080) {<br/> <br/> resource function get name() returns string {<br/>    return “Sam”;<br/> }<br/> <br/>}</span></pre><p id="f708" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">上面的服务也可以这样映射。</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="0380" class="ke kf hh lv b fi lz ma l mb mc">type Query {<br/> name: String<br/>}</span></pre><p id="22be" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">所以我们可以发送下面的GraphQL查询来查找根查询对象中暴露的<code class="du mi mj mk lv b">name</code>字段。</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="bb4e" class="ke kf hh lv b fi lz ma l mb mc">{<br/> name<br/>}</span></pre><p id="372e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们可以使用，</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="fd13" class="ke kf hh lv b fi lz ma l mb mc">$ bal run your-file-name.bal. </span></pre><p id="47d7" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="ml">这将在端点"<a class="ae le" href="http://localhost:8080/query" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/query</a>"处公开一个</em> GraphQL服务。我们可以像这样发送查询调用。</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="0653" class="ke kf hh lv b fi lz ma l mb mc">$ curl -X POST -H "Content-type: application/json" -d '{"query":"{name}"}'</span></pre><p id="ce34" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">还有tada！我们得到这样的回应。</p><pre class="jt ju jv jw fd lu lv lw lx aw ly bi"><span id="8319" class="ke kf hh lv b fi lz ma l mb mc">{"data":{"name":"Sam"}}</span></pre><p id="07f6" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们在这里做的是处理静态数据，但也可以处理动态数据。好了，我想你可能对芭蕾舞演员和graphql的组合有了一个基本的概念。让我们再来看看更多关于芭蕾舞演员graphql的例子和更深入的概念。再见！</p></div></div>    
</body>
</html>