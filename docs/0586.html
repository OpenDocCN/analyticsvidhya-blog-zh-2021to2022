<html>
<head>
<title>Deploy Web App to Azure using ARM Template</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ARM模板将Web应用部署到Azure</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploy-web-app-to-azure-using-arm-template-5aed7331a957?source=collection_archive---------2-----------------------#2021-01-23">https://medium.com/analytics-vidhya/deploy-web-app-to-azure-using-arm-template-5aed7331a957?source=collection_archive---------2-----------------------#2021-01-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="73a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">azure Resource Manager(<a class="ae jc" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/overview" rel="noopener ugc nofollow" target="_blank">ARM</a>)是微软创建的原生基础设施即代码语言。ARM模板以类似JSON的格式编写，并提供基于对Azure的API调用创建Azure资源的能力。</p><p id="d394" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个演示中，ARM模板的目的是<strong class="ig hi">部署一个链接到<strong class="ig hi"> GitHub Repo </strong>的WebApp </strong>。</p><p id="51bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">先决条件:</strong></p><p id="f0f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有效的azure订阅</p><p id="e770" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部署在GitHub上的基础项目，如这里的<a class="ae jc" href="https://github.com/VMoose/AzureWebServiceSampleCode" rel="noopener ugc nofollow" target="_blank"/></p><p id="20d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第一步</strong>:新建一个文件，命名为<strong class="ig hi"><em class="jd">azure deploy . JSON</em></strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="5274" class="jn jo hh jj b fi jp jq l jr js">{<br/>  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",<br/>  "contentVersion": "1.0.0.0",<br/>  "parameters": {<br/>    "webAppName": {<br/>      "type": "string",<br/>      "defaultValue": "[concat('webApp-', uniqueString(resourceGroup().id))]",<br/>      "minLength": 2,<br/>      "metadata": {<br/>        "description": "Web app name."<br/>      }<br/>    },<br/>    "location": {<br/>      "type": "string",<br/>      "defaultValue": "[resourceGroup().location]",<br/>      "metadata": {<br/>        "description": "Location for all resources."<br/>      }<br/>    },<br/>    "sku": {<br/>      "type": "string",<br/>      "defaultValue": "F1",<br/>      "metadata": {<br/>        "description": "The SKU of App Service Plan."<br/>      }<br/>    },<br/>    "linuxFxVersion": {<br/>      "type": "string",<br/>      "defaultValue": "PYTHON|3.7",<br/>      "metadata": {<br/>        "description": "The Runtime stack of current web app"<br/>      }<br/>    },<br/>    "repoUrl": {<br/>      "type": "string",<br/>      "defaultValue": "",<br/>      "metadata": {<br/>        "description": "Optional Git Repo URL"<br/>      }<br/>    }<br/>  },<br/>  "variables": {<br/>    "appServicePlanPortalName": "[concat('AppServicePlan-', parameters('webAppName'))]"<br/>  },<br/>  "resources": [<br/>    {<br/>      "type": "Microsoft.Web/serverfarms",<br/>      "apiVersion": "2020-06-01",<br/>      "name": "[variables('appServicePlanPortalName')]",<br/>      "location": "[parameters('location')]",<br/>      "sku": {<br/>        "name": "[parameters('sku')]"<br/>      },<br/>      "kind": "linux",<br/>      "properties": {<br/>        "reserved": true<br/>      }<br/>    },<br/>    {<br/>      "type": "Microsoft.Web/sites",<br/>      "apiVersion": "2020-06-01",<br/>      "name": "[parameters('webAppName')]",<br/>      "location": "[parameters('location')]",<br/><br/>      "dependsOn": [<br/>        "[resourceId('Microsoft.Web/serverfarms', variables('appServicePlanPortalName'))]"<br/>      ],<br/>      "properties": {<br/>        "serverFarmId": "[resourceId('Microsoft.Web/serverfarms', variables('appServicePlanPortalName'))]",<br/>        "siteConfig": {<br/>          "linuxFxVersion": "[parameters('linuxFxVersion')]"<br/>        }<br/>      },<br/>      "resources": [<br/>          {<br/>            "type": "sourcecontrols",<br/>            "apiVersion": "2020-06-01",<br/>            "name": "web",<br/>            "location": "[parameters('location')]",<br/>            "dependsOn": [<br/>              "[resourceId('Microsoft.Web/sites', parameters('webAppName'))]"<br/>            ],<br/>            "properties": {<br/>              "repoUrl": "[parameters('repoUrl')]",<br/>              "branch": "main",<br/>              "isManualIntegration": true<br/>            }<br/>          }<br/>        ]<br/>    }<br/>  ]<br/>}</span></pre><p id="a3a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第二步</strong>:我们可以在上面的模板中编辑<strong class="ig hi"> WebAppName </strong>、<strong class="ig hi"> location </strong>、<strong class="ig hi"> sku </strong>、<strong class="ig hi"> linuxFxVersion </strong>和<strong class="ig hi"> repoUrl </strong>，但是让我们创建<strong class="ig hi"><em class="jd">azure deploy . parameters . JSON</em></strong>文件来存储参数值。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c953" class="jn jo hh jj b fi jp jq l jr js">{<br/>    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",<br/>    "contentVersion": "1.0.0.1",<br/>    "parameters": {<br/>        "webAppName": {<br/>            "value": "Azure-Web-App-ARM-Template"<br/>        },<br/>        "sku": {<br/>            "value": "F1"<br/>        },<br/>        "linuxFxVersion": {<br/>            "value": "PYTHON|3.7"<br/>        },<br/>        "repoUrl": {<br/>            "value": "https://github.com/VMoose/AzureWebServiceSampleCode.git"<br/>        }<br/>    }<br/>}</span></pre><p id="0978" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤3 </strong>:使用Azure CLI登录并运行命令:</p><blockquote class="jt ju jv"><p id="d947" class="ie if jd ig b ih ii ij ik il im in io jw iq ir is jx iu iv iw jy iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="hh"> az组部署创建—资源组&lt;资源组名称&gt; —模板文件"&lt;azure deploy . JSON路径&gt; " —参数"&lt;azure deploy . parameters . JSON路径&gt; " </em> </strong></p></blockquote><p id="cedd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您还没有资源组，请使用以下命令创建一个:</p><blockquote class="jt ju jv"><p id="ff08" class="ie if jd ig b ih ii ij ik il im in io jw iq ir is jx iu iv iw jy iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="hh"> az组创建—名称“资源—组”—位置“您的位置”</em> </strong></p></blockquote><p id="bae1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第四步</strong>:部署中心应该是这样的:</p><figure class="je jf jg jh fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jz"><img src="../Images/acf56cc80e26f1c0edc14a6758b9b31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N4GMYlIZGLaE7ZYzsuBB_w.png"/></div></div></figure><p id="75be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该能够看到使用webservice url的应用程序，如下所示:</p><figure class="je jf jg jh fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kh"><img src="../Images/65e610eb46f12e048c6930ff3cf09b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJSfjeQHcUnUfQARe7mqKA.png"/></div></div></figure><p id="c009" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">有用链接</strong>:</p><ol class=""><li id="8ec0" class="ki kj hh ig b ih ii il im ip kk it kl ix km jb kn ko kp kq bi translated">https://github.com/Azure/azure-quickstart-templates:你可以找到多个像我在这里用过的模板。</li><li id="933e" class="ki kj hh ig b ih kr il ks ip kt it ku ix kv jb kn ko kp kq bi translated">https://github.com/VMoose/AzureWebServiceSampleCode:你可以在这里找到我用的样品瓶代码。</li></ol></div></div>    
</body>
</html>