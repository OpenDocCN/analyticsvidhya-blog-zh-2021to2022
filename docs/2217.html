<html>
<head>
<title>Analyzing Brand Sentiment With Robinhood, Gamestop &amp; R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Robinhood、Gamestop &amp; R分析品牌情感</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analyzing-brand-sentiment-with-robinhood-gamestop-r-d6518133498e?source=collection_archive---------17-----------------------#2021-04-12">https://medium.com/analytics-vidhya/analyzing-brand-sentiment-with-robinhood-gamestop-r-d6518133498e?source=collection_archive---------17-----------------------#2021-04-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="0c7a" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用相关的推文来了解人们对品牌的感受(现在你可以把它放在你的简历上了！)</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/0a35184dd6cc657cba05d69b5d3fb34c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ci6Ri93tJdYO0HvJDGCuiA.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">所有的情绪，由鸡蛋来证明！—照片由来自Unsplash的Tengyart拍摄</figcaption></figure><p id="b4e2" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">品牌必不可少。它们以想法的形式存在于我们的脑海中，每个人每天都会与数百个品牌不断互动，有时是积极的，有时是消极的。</p><p id="7035" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">但是它们在数据科学中的作用是什么？鉴于大多数技术都是由强大的商业品牌推动的，<strong class="jo hi">对于任何数据科学家来说，对品牌有一个基本的了解可能都是必不可少的</strong>。</p><p id="eee7" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">在这篇文章中，我想解释如何使用Twitter做一个简单的品牌情感分析。我的重点？<strong class="jo hi">交易应用Robinhood。</strong>你可能听说过几个月前发生的GameStop (GME)狂潮，Reddit用户试图与GME短兵相接。自那以后，该股一直没有平静下来，从大约40美元涨到目前的200美元。在最初的高峰时期(达到400美元)，这些Reddit用户的主要交易应用Robinhood停止了个人购买GME股票的功能。<strong class="jo hi">当你阻止你的客户/用户在他们喜欢的活动中使用你的品牌时，这绝对是大品牌的大忌</strong></p><p id="af62" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，我决定做一个<strong class="jo hi">快速和肮脏的Twitter情绪分析</strong>，向大家展示这如何有助于了解趋势、公司以及它们在社交媒体上的表现。结果呢？对罗宾汉来说不太好… <strong class="jo hi">但留下来自己做分析吧！</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ki"><img src="../Images/0a791a322923b49d2cde443f6c6e942f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*BFakLHf0ROB0-fgU3cpT7A.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图1-在停止交易后，对罗宾汉的整体情绪非常负面</figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="9f3d" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated">步骤1:加载包并下载数据</h2><p id="94f2" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">所以我通常会说安装<code class="du lq lr ls lt b">twitteR</code>或<code class="du lq lr ls lt b">rtweet</code>包，然后开始工作，但不幸的是，Twitter上的趋势<strong class="jo hi">只允许你在过去7天内发布推文</strong>。幸运的是，我得到了从1月27日周三到2月3日周三的大部分数据，这给了我们从交易暂停前到交易结束后一周的推文。在我的Github 下载数据<a class="ae lu" href="https://github.com/danderson222/robinhood-sentiment-analysis" rel="noopener ugc nofollow" target="_blank">。如果你想了解更多关于搜集Twitter趋势的信息，请查看我用来帮助我的教程</a>。注意我借用了很多代码来进行我自己的情感分析，但是添加了额外的特性，允许你制作更多信息的情感图表。</p><p id="1760" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">出于信息的目的，这里是我用<code class="du lq lr ls lt b">twitteR</code>包抓取Twitter的代码，因为它允许我在日期之间移动并过滤掉转发:</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="fe5a" class="kq kr hh lt b fi lz ma l mb mc">rh_tweets_day &lt;- searchTwitter(<br/>  searchString = "#robinhood -filter:retweets", n = 4000, # searches for #robinhood and grabs 4000 tweets, but no retweets<br/>  since = "2021-01-01", until = "2021-01-25") %&gt;% # The until argument does not include the day of<br/>  twListToDF() %&gt;% # turns the list output into a dataframe<br/>  select(text, created, screenName) # selects three columns we want in our analysis</span></pre><p id="d82a" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这是我做的清理Twitter数据的函数:</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="b547" class="kq kr hh lt b fi lz ma l mb mc"># make a function to unnest the various words and then get rid of common words with anti_join(stop_words)<br/>find_words &lt;- function(x) {<br/>  x %&gt;% <br/>    unnest_tokens(word, text) %&gt;% <br/>    anti_join(stop_words)<br/>}</span><span id="742d" class="kq kr hh lt b fi md ma l mb mc"># Create a list of the dataframes from all the days<br/>df.list &lt;- list(rh_tweets_jan_27, rh_tweets_jan_28, rh_tweets_jan_29,rh_tweets_jan_30, rh_tweets_jan_31, rh_tweets_feb_01, rh_tweets_feb_02, rh_tweets_feb_03)</span><span id="749a" class="kq kr hh lt b fi md ma l mb mc"># Apply the function to the list of dataframes<br/>df.list &lt;- lapply(df.list, find_words)</span></pre><p id="3de7" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">无论如何，你可以不用那段代码运行我的分析，所以<strong class="jo hi">不要用它</strong>，因为<strong class="jo hi">它不会工作</strong>，因为日期是很久以前的事了。</p><p id="c53c" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">因此，相反，对于我们的情感分析，我们将在这里使用的主要软件包是<code class="du lq lr ls lt b">tidytext</code>和<code class="du lq lr ls lt b">tidyverse</code>，它们<strong class="jo hi">允许我们收集每条推文的单词，找出情感并以一种很好的方式绘制出来</strong>。</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="4cf6" class="kq kr hh lt b fi lz ma l mb mc"># Step 1: Set your working directory and load the required packages in RStudio. <br/>if(!require("tidyverse")) install.packages("tidyverse")<br/>if(!require("tidytext")) install.packages("tidytext")</span><span id="8a34" class="kq kr hh lt b fi md ma l mb mc"># Read in the data from my Github<br/># <a class="ae lu" href="https://github.com/danderson222/robinhood-sentiment-analysis" rel="noopener ugc nofollow" target="_blank">https://github.com/danderson222/robinhood-sentiment-analysis</a><br/>df &lt;- readRDS("tweets.rds")</span></pre></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="b407" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated">第二步:基本情感分析</h2><p id="652f" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">数据加载完毕，是时候看看大家的感受了！你可以很容易地找到推特上的热门词汇，但相同的词汇会一次又一次地出现(如GME、AMC、罗宾汉等)。)，这并没有告诉我们人们对罗宾汉品牌的感受。这就把我们带到了tidytext函数<code class="du lq lr ls lt b">get_sentiment</code>。您可以评估两种类型的情绪:</p><ol class=""><li id="d759" class="me mf hh jo b jp jq js jt jv mg jz mh kd mi kh mj mk ml mm bi translated"><strong class="jo hi">冰</strong> —这种类型只是为这个词提供一种积极或消极的情绪</li><li id="5816" class="me mf hh jo b jp mn js mo jv mp jz mq kd mr kh mj mk ml mm bi translated"><strong class="jo hi"> afin </strong> —这种类型根据每个词的积极/消极程度给它打分</li></ol><p id="31bf" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">让我们来进行这些情感分析:</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="9860" class="kq kr hh lt b fi lz ma l mb mc"># First we make a new dataframe with three columns: the word, the sentiment its conveying and number of times it is used<br/>df.bing &lt;- df %&gt;% <br/>  inner_join(get_sentiments("bing")) %&gt;% <br/>  count(word, sentiment, sort = T) %&gt;% <br/>  ungroup()</span><span id="1de1" class="kq kr hh lt b fi md ma l mb mc"># Then we can run <br/>df.bing %&gt;% <br/>  group_by(sentiment) %&gt;%<br/>  # Pull out the top 15 words<br/>  top_n(15) %&gt;% <br/>  # Reorder top to bottom<br/>  mutate(word = reorder(word, n)) %&gt;% <br/>  # Make the graph<br/>  ggplot(aes(x = word, y = n, fill = sentiment)) +<br/>  geom_col(show.legend = FALSE) +<br/>  # Facet_wrap makes multiple graphs by the sentiment value in this case<br/>  facet_wrap(~sentiment, scales = 'free_y') +<br/>  labs(title = "Sentiment around #Robinhood tweets",<br/>       subtitle = "Other than free and rich (which could be deemed negative), most of the words tweeted were negative",<br/>       y = "Number of times the word was tweeted",<br/>       x = "Words") +<br/>  coord_flip() + <br/>  theme_bw() +<br/>  theme(plot.title = element_text(face="bold", size =14), <br/>        axis.title.x = element_text(face="bold", size = 12),<br/>        axis.title.y = element_text(face="bold", size = 12))</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ms"><img src="../Images/ee62dedb81b56c21af1c7200a248d1a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jF6ehm8fbe9A8lt_kQ9WQw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图2-Bing情感分析显示了所有#robinhood推文中的热门词汇</figcaption></figure><p id="55ee" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">从这里我们可以看到“免费”是最积极的词汇之一，但负面词汇的数量远远超过了其他一切。现在让我们看看afin情绪类型显示了什么:</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="9e45" class="kq kr hh lt b fi lz ma l mb mc"># Another cool sentiment method is called "afin"<br/># This assigns a positive or negative score to each word based on its apparent positivity or negativity<br/>df.afin &lt;- df %&gt;% <br/>  inner_join(get_sentiments("afin")) %&gt;% <br/>  count(word, value, sort = T) %&gt;% <br/>  ungroup()<br/># Here we create a new column to combine the value of each word with the number of times it was used<br/>df.afin$combined_value &lt;- df.afin$value * df.afin$n<br/># Now let's merge the two sentiment dataframes<br/>df2 &lt;- merge(df.afin, df.bing[-3], by = "word") #Don't merge the n column from df.bing</span><span id="9b5b" class="kq kr hh lt b fi md ma l mb mc"># This chart shows the total scores for each word by their positive/ negative score and number of times tweeted<br/>df2 %&gt;% <br/>  group_by(sentiment) %&gt;% <br/>  top_n(15) %&gt;%<br/>  # We have to take the absolute value for the combined_value column given negative words receive a negative score<br/>  mutate(word = reorder(word, abs(combined_value))) %&gt;%<br/>  # We only want the words that have a score above 100<br/>  filter(abs(combined_value) &gt; 100) %&gt;% <br/>  ggplot(aes(x = word, y = abs(combined_value), fill = sentiment)) +<br/>  geom_col(show.legend = FALSE) +<br/>  # facet_wrap splits out the charts by the sentiment<br/>  facet_wrap(~sentiment, scales = 'free_y') +<br/>  labs(title = "Sentiment around #Robinhood tweets",<br/>       subtitle = "With so many high-scoring negative words, the amount of negativity contained in these \ntweets far outscores the positivity",<br/>       y = "Number of times tweeted",<br/>       x = "Words") +<br/>  coord_flip() + <br/>  theme_bw() +<br/>  theme(plot.title = element_text(face="bold", size =14), <br/>        axis.title.x = element_text(face="bold", size = 12),<br/>        axis.title.y = element_text(face="bold", size = 12))</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ms"><img src="../Images/1322a12e6955dca02ab088715e1e2743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwxeSNv-Y_eAIVAbqsgj8g.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图2-Afin情感分析，通过分数描述情感词；骂人的话在这里真的占了上风…对不起那些学语言的孩子</figcaption></figure><p id="6b1a" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">所以<strong class="jo hi">这个图表显示了所有情感得分超过100分的单词</strong>。如你所见，得分较高的负面词汇比正面词汇多得多。一些愤怒的推特用户！</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="8992" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated">第三步:按天绘制情绪图表</h2><p id="7533" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">所以在做了最初的情绪图表后，我想<strong class="jo hi">评估一下这些词在不同的日子里有什么不同</strong>。为此，我们1)按推文创建的日期分组，2)获取推文点击率最高的前10个单词，3)取消单词分组，4)更新日期值并将其转换为因子，5)按日期和推文次数排列单词，6)最后对它们进行排序，以便它们能很好地图形化。</p><p id="6d03" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">为了绘制图表，我们使用ggplot和<code class="du lq lr ls lt b">facet_wrap</code>来绘制每天收集的tweets的图表。<strong class="jo hi">这就是为什么我们必须创建day因子来确保日子被正确排序，而不是像R通常做的那样按字母顺序排序</strong>。最后我们有8张图，显示了负面词汇是如何在1月28日和29日达到顶峰，然后在一周后的2月2日和3日再次下降的。</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="0d67" class="kq kr hh lt b fi lz ma l mb mc"># Sentiment by day chart<br/>df3 &lt;- merge(df, df.bing, by = "word")<br/>df3 &lt;- df3 %&gt;%<br/>  group_by(created) %&gt;%<br/>  count(word, sort = T) %&gt;%<br/>  top_n(10) %&gt;%<br/>  # Remove grouping<br/>  ungroup() %&gt;%<br/>  # Arrange by facet group &amp; number of occurences <br/>    arrange(created, n) %&gt;%<br/>  # Add order column of row numbers<br/>  mutate(order = row_number())<br/>df3 &lt;- inner_join(df3, df.bing[-3], by = "word")<br/># Change the date names <br/>df3 &lt;- df3 %&gt;%<br/>  mutate(created=ifelse(created=="2021-01-27", "Wednesday Jan 27th",<br/>                        ifelse(created == "2021-01-28", "Thursday Jan 28th",<br/>                               ifelse(created== "2021-01-29", "Friday Jan 29th",<br/>                                      ifelse(created=="2021-01-30", "Saturday Jan 30th",<br/>                                             ifelse(created == "2021-01-31", "Sunday Jan 31st",<br/>                                                    ifelse(created== "2021-02-01", "Monday Feb 1st",<br/>                                                           ifelse(created== "2021-02-02", "Tuesday Feb 2nd",<br/>                                                                  "Wednesday Feb 3rd"))))))))</span><span id="78de" class="kq kr hh lt b fi md ma l mb mc"># Change the factor levels to make sure the plot appears properly. I'm lazy and don't want to type it so create a vector using the unique function instead<br/>days &lt;- unique(df3$created)<br/>days<br/># And turn the column into a factor<br/>df3$created &lt;- factor(df3$created,levels=c(days[1:8]))<br/># Graph it<br/>ggplot(df3, aes(x = order, y = n, fill = sentiment)) +<br/>  geom_col() +<br/>  facet_wrap(~created, scales = 'free_y') +<br/>  xlab(NULL) +<br/>  coord_flip() +<br/>  theme_bw() +<br/>  # Add categories to axis<br/>  scale_x_continuous(<br/>    breaks = df3$order,<br/>    labels = df3$word,<br/>    expand = c(0,0)) +<br/>  labs(x = " Top Words Tweeted",<br/>       y = "Number of Times Word is Tweeted that Day within Sample of 4,000 Tweets",<br/>       title = "Most Common Positive or Negative Words About \n#Robinhood on a Daily Basis",<br/>       subtitle = "It is quite telling how much the negative words (especially the swear words) peaked \non Jan 28-30. By Feb 2-3, there is significantly less negative tweet traffic",<br/>       fill = "Sentiment of Word") +<br/>  theme(plot.title = element_text(face="bold", size =16),<br/>        axis.title.x = element_text(face="bold", size = 12),<br/>        axis.title.y = element_text(face="bold", size = 12),<br/>        legend.title = element_text(face="bold", size = 12),<br/>        legend.position = "bottom")</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mt"><img src="../Images/53a8a8f1b61798719a5797c4c31b1b5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tNdJwfxHGdRzaSw5YuHq1g.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图3——每日情绪显示，随着时间的推移，负面情绪真的消失了，并且在1月27日星期三交易暂停之前并不存在</figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="3785" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated">第四步:正面/负面字数的百分比</h2><p id="e88c" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">这一切都很棒，但整体观点是什么？我的最后一个图表是一个面积图，它将情绪转化为每天的百分比。为了找到这一点，我观察了每天情绪词汇的总得分，并确定了它们积极或消极的百分比。我使用了归属于afin类型的正值/负值，使百分比更能反映更强烈的情感词。</p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="f2d0" class="kq kr hh lt b fi lz ma l mb mc">df3 &lt;- merge(df, df2, by = "word") %&gt;% <br/>  select(word, created, value, n, sentiment)<br/># Create another data frame to merge the two and get the number of times tweeted each day<br/>x &lt;- df %&gt;% <br/>  group_by(created) %&gt;% <br/>  count(word, sort = T) %&gt;% <br/>  ungroup()<br/>df3 &lt;- merge(df3, x, by = c("word", "created"))<br/>colnames(df3) &lt;- c("word", "created", "value", "total_n", "sentiment", "daily_n")<br/>df3 &lt;- df3[!duplicated(df3), ] #get rid of duplicate rows<br/># Create the combined daily total which looks at the score for positive/ negative by day<br/>df3$combined_daily &lt;- df3$value * df3$daily_n</span><span id="9a06" class="kq kr hh lt b fi md ma l mb mc"># I create another dataframe called plot.df for plotting my final chart<br/>plot.df &lt;- df3 %&gt;% <br/>  group_by(sentiment, created) %&gt;% <br/>  summarize(area = sum(combined_daily))<br/>totals &lt;- df3 %&gt;% <br/>  group_by(created) %&gt;% <br/>  summarize(total_score = sum(abs(combined_daily)))<br/>plot.df &lt;- merge(plot.df, totals, by = "created")<br/># Calculate the percentage to be graphed<br/>plot.df$percentage &lt;- plot.df$area / plot.df$total_score<br/>class(plot.df$created)<br/># Graph it with an area chart<br/>plot.df %&gt;% <br/>  ggplot(aes(x = as.Date(created), y = percentage, color = sentiment, fill = sentiment)) +<br/>  # I like the area plot showing the percentage totals for positive and negative<br/>  geom_area(stat = "identity", alpha = 0.4) +<br/>  geom_point(size = 1) +<br/>  theme_bw() +<br/>  labs(x = "Day",<br/>       y = "Percentage of Negative/ Positive Tweets",<br/>       title = "How Negative Were #robinhood Tweets?",<br/>       subtitle = "While on Jan 27th it was about 50/50, tweets got a lot more \nnegative after the Robinhood app banned trading on the 28th, \nalthough it slightly recovered by Feb 3rd") +<br/>  theme(plot.title = element_text(face="bold", size =14, hjust = 0.5),<br/>        axis.title.x = element_text(face="bold", size = 12),<br/>        axis.title.y = element_text(face="bold", size = 12),<br/>        legend.position = "none") +<br/>  # Save the plot so we can add some icons to it<br/>  ggsave(filename = "output/PositiveNegativeBreakdown.png",<br/>         width = 5, height = 4, dpi = 300)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ki"><img src="../Images/7ae65612a200b4afafb3290414fcce63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*wJcj48mPvWOLOuu06_-XUQ.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图4 —基本正/负面积图</figcaption></figure></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="5f51" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated">第五步:添加一些图标</h2><p id="f3aa" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">最后，因为我们可以，让我们添加一些图标到最终的图形。为此，我们使用<code class="du lq lr ls lt b">magick</code>包将互联网上的一些图像<code class="du lq lr ls lt b">image_read</code>到您的本地环境中。然后我们用<code class="du lq lr ls lt b">image_scale</code>缩小图像，并用<code class="du lq lr ls lt b">image_composite</code>将它们放到保存的图上。实际上，找出图像最适合的位置需要一段时间和大量的重新运行代码，<strong class="jo hi">但这就是将图像添加到你的情节中的乐趣！</strong></p><pre class="ix iy iz ja fd lv lt lw lx aw ly bi"><span id="05e1" class="kq kr hh lt b fi lz ma l mb mc"># Load the magick library and call back your created plot<br/>if(!require("magick")) install.packages("magick")<br/>plot &lt;- image_read("output/PositiveNegativeBreakdown.png")<br/># And bring in your images<br/>nice_img &lt;- image_read("https://cdn2.iconfinder.com/data/icons/primitive-gradient/512/xxx014-512.png")<br/>neg_img &lt;- image_read("https://cdn1.iconfinder.com/data/icons/modifiers-essential-glyph-1/48/Mod_Essentials-02-512.png")<br/>wsb_logo &lt;- image_read("https://i.pinimg.com/originals/29/24/89/292489e7d0bf8ce7d5ffd81be62d0800.png") <br/>twt_logo &lt;- image_read("https://assets.stickpng.com/images/580b57fcd9996e24bc43c53e.png")</span><span id="1e25" class="kq kr hh lt b fi md ma l mb mc"># Scale down the logo and give it a border and annotation<br/># This is the cool part because you can do a lot to the image/logo before adding it<br/>nice_img &lt;- nice_img %&gt;%<br/>  image_scale("100")<br/>neg_img &lt;- neg_img %&gt;%<br/>  image_scale("150")<br/>wsb_logo &lt;- wsb_logo %&gt;%<br/>  image_scale("150")<br/>twt_logo &lt;- twt_logo %&gt;%<br/>  image_scale("150")</span><span id="ed4e" class="kq kr hh lt b fi md ma l mb mc"># Stack them on top of each other<br/>final_plot &lt;- plot %&gt;% <br/>  image_composite(nice_img, offset = "+850+450") %&gt;% <br/>  image_composite(neg_img, offset = "+825+650") %&gt;% <br/>  image_composite(wsb_logo, offset = "+100+220") %&gt;% <br/>  image_composite(twt_logo, offset = "+1350+230") <br/>final_plot<br/># And overwrite the plot without a logo<br/>image_write(final_plot, "output/FinalPlotWithLogos.png")</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ki"><img src="../Images/0a791a322923b49d2cde443f6c6e942f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*BFakLHf0ROB0-fgU3cpT7A.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">图5——添加一些有趣的图标，使图表真正流行起来！</figcaption></figure><p id="7748" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这样，你就对Robinhood这样的流行品牌做了一个小的情感分析。显然，你可以看到，在GME交易丑闻期间，负面词汇主导了推特，这个品牌肯定受到了打击。虽然最后似乎只过了几天就回到了平均水平。当罗宾汉停止交易时，也许这不会产生我认为会产生的长期影响。</p><p id="8080" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">无论如何，我希望你喜欢并学到了一些关于品牌情感分析的知识。是的，这很快。是的，这是脏的。但有时这就是你所需要的，让你了解公众眼中的品牌。我希望通过几个月前发布的哑铃图表和Twitter信息来进行对比。</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="a6bc" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi">参考文献:</strong><br/>【1】Twitter，<a class="ae lu" href="https://twitter.com/search?q=%23robinhood&amp;src=typed_query" rel="noopener ugc nofollow" target="_blank"> #Robinhood主题推文</a>，(2021)<br/>【2】Tengyart，<a class="ae lu" href="https://unsplash.com/s/photos/emotion" rel="noopener ugc nofollow" target="_blank">彩蛋图片</a>，2021<br/>【3】si pra，V. (2020) <a class="ae lu" href="https://towardsdatascience.com/twitter-sentiment-analysis-and-visualization-using-r-22e1f70f6967" rel="noopener" target="_blank"> Twitter情感分析与可视化利用R </a>，走向数据科学</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="59b2" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="mu">我是Monitor Deloitte的模拟&amp;战略顾问，我使用统计和分析为数字孪生模型提供信息，这些模型重新发明了公司进行战略决策的方式。在我的空闲时间，我痴迷于政治和政策，一直在数字</em>  <em class="mu">的</em> <a class="ae lu" href="https://www.policyinnumbers.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mu">政策上写博客。你可以在那里找到我或者在我的</em></a><a class="ae lu" href="https://www.linkedin.com/in/dylansjanderson/" rel="noopener ugc nofollow" target="_blank"><em class="mu">LinkedIn</em></a><em class="mu">和</em><a class="ae lu" href="https://twitter.com/dylansjanderson" rel="noopener ugc nofollow" target="_blank"><em class="mu">Twitter</em></a><em class="mu">账号(随意连接或者给我一个关注)</em></p></div></div>    
</body>
</html>