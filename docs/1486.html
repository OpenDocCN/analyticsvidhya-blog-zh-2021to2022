<html>
<head>
<title>How to build a Django web app from scratch (tutorial)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从头开始构建Django web应用程序(教程)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-build-a-django-web-app-from-scratch-tutorial-20034f0a3043?source=collection_archive---------1-----------------------#2021-03-04">https://medium.com/analytics-vidhya/how-to-build-a-django-web-app-from-scratch-tutorial-20034f0a3043?source=collection_archive---------1-----------------------#2021-03-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="97d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欢迎来到我希望是非常详细和有用的教程，介绍如何从零开始构建一个Django web应用程序。在开发了几十个Django项目之后，我已经获得了一些技巧和诀窍来提高每个Django项目的效率，我将以教程的形式展示这些技巧和诀窍。本教程是我如何着手构建健壮的Django应用程序的一步一步的过程。<strong class="ih hj">尽情享受！</strong></p><p id="3b6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在这里查看部署:<a class="ae jd" href="https://foodanic.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">实时链接</a></p><p id="f87a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">演示:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/1a8f44f576455d42ed530721b88cd60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ReKlAB_OhD9yEaot.jpeg"/></div></div></figure><h1 id="34c3" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">第一部分🚀</h1><p id="658e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">对于这个示例项目，我们将超越简单的Todo应用程序或博客网站——我们将构建一个具有完全用户身份验证和CRUD功能的食品配方应用程序，并将该应用程序部署到Heroku上的实时生产中。</p><h1 id="966a" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">目录</h1><p id="74f5" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">任何新项目的第一步都是建立目录。如果您希望您的Django项目在一个特定的目录中，在运行startproject命令之前导航到它。使用以下命令创建一个新的Django项目:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="2e59" class="ky jr hi ku b fi kz la l lb lc">django-admin startproject [projectname]</span></pre><p id="d714" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将生成如下文件结构:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="44ea" class="ky jr hi ku b fi kz la l lb lc">├─ foodanic (our sample project title)<br/>│  ├─ __init__.py<br/>│  ├─ asgi.py<br/>│  ├─ settings.py<br/>│  ├─ urls.py<br/>│  ├─ wsgi.py<br/>├─ manage.py</span></pre><p id="40ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用foodanic/和manage.py快速添加一个名为<code class="du ld le lf ku b">templates</code>的文件夹到目录中</p><h1 id="bda2" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">环境</h1><p id="2208" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">下一个关键步骤是虚拟环境，将我们所有的依赖项包含在一个模块中。</p><p id="2c30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建新的虚拟环境:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4817" class="ky jr hi ku b fi kz la l lb lc">virtualenv env</span></pre><p id="d5e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">*注意:[env]可以是您想要命名虚拟环境的任何名称*</p><p id="7527" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要激活环境:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="276b" class="ky jr hi ku b fi kz la l lb lc">source env/bin/activate</span></pre><p id="a4d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要停用环境，请执行以下操作:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="0f12" class="ky jr hi ku b fi kz la l lb lc">deactivate</span></pre><p id="9fdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建并激活环境后，一个(env)标记将出现在您的终端中的目录名旁边。</p><h1 id="05d8" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">设置:</h1><p id="9391" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这是一个步骤，你必须记住所有未来的项目，因为一个适当的初始设置设置将防止在未来的错误。</p><p id="f599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的<code class="du ld le lf ku b">settings.py</code>文件中，在顶部添加<code class="du ld le lf ku b">import os</code>，然后向下滚动到<code class="du ld le lf ku b">TEMPLATES</code>部分，并在<code class="du ld le lf ku b">DIRS</code>中进行以下更改:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="d26b" class="ky jr hi ku b fi kz la l lb lc">import os</span><span id="1fb6" class="ky jr hi ku b fi lg la l lb lc">'DIRS': [os.path.join(BASE_DIR, 'templates')],</span></pre><p id="1dd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这允许您将项目的根模板转发到主模板目录，以便将来引用<code class="du ld le lf ku b">base.html</code>文件。</p><p id="9d38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们通过以下方式将Django安装到我们的应用程序中:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="723f" class="ky jr hi ku b fi kz la l lb lc">pip install django</span></pre><p id="bb45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将安装一个名为<code class="du ld le lf ku b">whitenoise</code>的中间件，帮助Heroku处理Django应用程序的图像。</p><p id="f37c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装依赖项，请运行:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4824" class="ky jr hi ku b fi kz la l lb lc">pip install whitenoise</span></pre><p id="036a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将whitenoise添加到您的<code class="du ld le lf ku b">MIDDLEWARE</code>:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="bc05" class="ky jr hi ku b fi kz la l lb lc"># settings.py<br/>MIDDLEWARE = [<br/>   ...<br/>   'whitenoise.middleware.WhiteNoiseMiddleware',<br/>]</span></pre><p id="a811" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每当我们向项目中添加一个新的依赖项时，您会希望将它们冻结到一个名为<code class="du ld le lf ku b">requirements.txt</code>的文件中。</p><p id="cc7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要执行此运行，请执行以下操作:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ef70" class="ky jr hi ku b fi kz la l lb lc">pip freeze &gt; requirements.txt</span></pre><p id="33d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">静态和媒体</p><p id="0acd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">静态和媒体将服务于我们的应用程序上的图像。在settings.py中定义的<code class="du ld le lf ku b">STATIC_URL</code>下面，添加</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="b515" class="ky jr hi ku b fi kz la l lb lc">#settings.py</span><span id="14c5" class="ky jr hi ku b fi lg la l lb lc">STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')<br/>STATIC_TMP = os.path.join(BASE_DIR, 'static')<br/>STATICFILES_DIRS = (<br/>    os.path.join(BASE_DIR, 'static'),<br/>)<br/>STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'</span><span id="860a" class="ky jr hi ku b fi lg la l lb lc">MEDIA_URL = '/media/'<br/>MEDIA_ROOT = os.path.join(BASE_DIR, 'media')<br/>os.makedirs(STATIC_TMP, exist_ok=True)<br/>os.makedirs(STATIC_ROOT, exist_ok=True)<br/>os.makedirs(MEDIA_ROOT, exist_ok=True)</span></pre><p id="e610" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这以最佳方式设置了我们的静态和媒体目录，为我们的应用程序提供服务。</p><h1 id="9163" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">。gitignore</h1><p id="6b9e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">启动Django项目的另一个重要步骤是。gitignore file将忽略那里列出的目录/文件。</p><p id="d24b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下内容创建. gitignore:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="379b" class="ky jr hi ku b fi kz la l lb lc">touch .gitignore</span></pre><p id="9a1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将我们创建的虚拟环境添加到其中，这样它就不会占用Github上额外的云空间。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="072c" class="ky jr hi ku b fi kz la l lb lc"># .gitignore<br/>env/</span></pre><h1 id="8a00" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">第二部分🚲</h1><p id="afa2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">既然我们已经按照我们想要的方式建立了我们的项目，让我们开始创建我们的第一个应用程序来处理逻辑。除此之外，我们还要创建一个用户应用程序，稍后我们将使用它进行用户身份验证。</p><p id="dfe4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下内容创建新应用:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="6f98" class="ky jr hi ku b fi kz la l lb lc">python manage.py startapp app<br/>python manage.py startapp users</span></pre><p id="de5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将应用程序添加到settings.py:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ec17" class="ky jr hi ku b fi kz la l lb lc"># settings.py<br/>INSTALLED_APPS = [<br/>    'app',<br/>    'users',<br/>     ...<br/>]</span></pre><p id="081c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了让我们的应用程序在我们的web应用程序中正确路由，我们需要在主<code class="du ld le lf ku b">foodanic/urls.py</code>中包含我们的其他应用程序。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="36ab" class="ky jr hi ku b fi kz la l lb lc"># foodanic/urls.py</span><span id="9056" class="ky jr hi ku b fi lg la l lb lc">from django.contrib import admin<br/>from django.urls import path, include<br/>from django.conf.urls.static import static<br/>from django.conf import settings</span><span id="7329" class="ky jr hi ku b fi lg la l lb lc">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('app.urls')),<br/>    path('u/', include('users.urls')),<br/>]</span><span id="311d" class="ky jr hi ku b fi lg la l lb lc">if settings.DEBUG:<br/>    urlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)</span></pre><h1 id="34a1" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">应用程序</h1><p id="1804" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在新的应用程序和用户目录中，让我们添加两个文件和两个文件夹。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="cbb4" class="ky jr hi ku b fi kz la l lb lc">Files to add:         Folders to add:  (for each respectively)<br/>- urls.py             - app/templates/app       <br/>- forms.py            - users/templates/users</span></pre><p id="a19c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新的应用程序和用户目录将如下所示:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="799e" class="ky jr hi ku b fi kz la l lb lc">├─ app<br/>│  ├─ migrations/<br/>|  ├─ templates<br/>|  |  └── app/<br/>│  ├─ __init__.py<br/>│  ├─ admin.py<br/>│  ├─ apps.py<br/>│  ├─ forms.py<br/>│  ├─ models.py<br/>│  ├─ tests.py<br/>│  ├─ urls.py<br/>│  └── views.py<br/>│<br/>├─ users<br/>│  ├─ migrations/<br/>|  ├─ templates<br/>|  |  └── users/<br/>│  ├─ __init__.py<br/>│  ├─ admin.py<br/>│  ├─ apps.py<br/>│  ├─ forms.py<br/>│  ├─ models.py<br/>│  ├─ tests.py<br/>│  ├─ urls.py<br/>│  └── views.py</span></pre><h1 id="59f8" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">用户认证</h1><p id="ecfa" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">为了方便起见，我们将使用基本的Django内置认证系统。</p><p id="7bf7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在settings.py中，我们需要指定一个登录和注销重定向，如下所示:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="af18" class="ky jr hi ku b fi kz la l lb lc"># foodanic/settings.py</span><span id="4cb2" class="ky jr hi ku b fi lg la l lb lc">...</span><span id="713a" class="ky jr hi ku b fi lg la l lb lc">LOGIN_REDIRECT_URL = '/'<br/>LOGOUT_REDIRECT_URL = '/'<br/>LOGIN_URL = 'login'</span></pre><p id="f483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们新创建的用户应用程序中，指向URL以包含Django auth视图。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="149b" class="ky jr hi ku b fi kz la l lb lc"># users/urls.py<br/>from django.urls import path<br/>from django.conf.urls.static import static<br/>from django.conf import settings<br/>from django.contrib.auth import views as auth_views<br/>from .views import *</span><span id="bc85" class="ky jr hi ku b fi lg la l lb lc">urlpatterns = [<br/>    path('signup/', signup, name='signup'),<br/>    path('login/', auth_views.LoginView.as_view(template_name='users/login.html'), name='login'),<br/>    path('logout/', auth_views.LogoutView.as_view(template_name='users/logout.html'), name='logout'),<br/>    path('change-password/', auth_views.PasswordChangeView.as_view(template_name='users/change-password.html'), name="change-password"),<br/>    path('password_change/done/', auth_views.PasswordChangeDoneView.as_view(template_name='users/password_reset_done.html'), name='password_change_done'),<br/>    path('password_reset/', auth_views.PasswordResetView.as_view(template_name='users/forgot-password.html', subject_template_name='users/password_reset_subject.txt', html_email_template_name='users/password_reset_email.html'), name='password_reset'),<br/>    path('password_reset/done/', auth_views.PasswordResetDoneView.as_view(template_name='users/password_reset_done.html'), name='password_reset_done'),<br/>    path('reset/&lt;uidb64&gt;/&lt;token&gt;/', auth_views.PasswordResetConfirmView.as_view(template_name='users/password_reset_confirm.html'), name='password_reset_confirm'),<br/>    path('reset/done/', auth_views.PasswordResetCompleteView.as_view(template_name='users/password_reset_complete.html'), name='password_reset_complete'),<br/>]</span><span id="f623" class="ky jr hi ku b fi lg la l lb lc">if settings.DEBUG:<br/>    urlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)</span></pre><p id="ad22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们刚刚添加了大量的新URL，让我们确保我们有所需的模板。假设您在基本目录(foodanic)中，下面的行将创建所有必要的模板。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="9b99" class="ky jr hi ku b fi kz la l lb lc">touch users/templates/users/login.html &amp;&amp; touch users/templates/users/logout.html &amp;&amp; touch users/templates/users/change-password.html &amp;&amp; touch users/templates/users/password_reset_done.html &amp;&amp; touch users/templates/users/forgot-password.html &amp;&amp; touch users/templates/users/password_reset_done.html &amp;&amp; touch users/templates/users/password_reset_confirm.html &amp;&amp; touch users/templates/users/password_reset_complete.html &amp;&amp; touch users/templates/users/password_reset_email.html &amp;&amp; touch users/templates/users/password_reset_subject.txt &amp;&amp; touch users/templates/users/signup.html &amp;&amp; touch users/templates/users/style.html</span></pre><p id="fc0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以设置每个模板从基础开始呈现，并显示相应的表单。自举设计归功于<a class="ae jd" href="https://codepen.io/Ihor_Sukhorada/pen/LBwRvv" rel="noopener ugc nofollow" target="_blank">这个代码打开</a>。</p><p id="3b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/style.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="974b" class="ky jr hi ku b fi kz la l lb lc">&lt;style&gt;<br/>    html,body { <br/>        height: 100%; <br/>    }<br/>    <br/>    .global-container{<br/>        height:100%;<br/>        display: flex;<br/>        align-items: center;<br/>        justify-content: center;<br/>        /* background-color: #f5f5f5; */<br/>    }<br/>    <br/>    form{<br/>        padding-top: 10px;<br/>        font-size: 14px;<br/>        margin-top: 30px;<br/>    }<br/>    <br/>    .card-title{ font-weight:300; }<br/>    <br/>    .btn{<br/>        font-size: 14px;<br/>        margin-top:20px;<br/>    }<br/>    <br/>    <br/>    .login-form{ <br/>        width:330px;<br/>        margin:20px;<br/>    }<br/>    <br/>    .sign-up{<br/>        text-align:center;<br/>        padding:20px 0 0;<br/>    }<br/>    <br/>    .alert{<br/>        margin-bottom:-30px;<br/>        font-size: 13px;<br/>        margin-top:20px;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="3069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/login.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="fb58" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/login.html --&gt;</span><span id="ad5d" class="ky jr hi ku b fi lg la l lb lc">{% extends 'base.html' %}</span><span id="267c" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="69d9" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;div class="global-container"&gt;<br/>        &lt;div class="card login-form"&gt;<br/>            &lt;div class="card-body"&gt;<br/>                &lt;h3 class="card-title text-center"&gt;Log in to Foodanic&lt;/h3&gt;<br/>                &lt;div class="card-text"&gt;<br/>                    &lt;form method="POST"&gt;{% csrf_token %}<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="username"&gt;Username&lt;/label&gt;<br/>                            &lt;input type="text" name="username" class="form-control form-control-sm" id="username" aria-describedby="emailHelp"&gt;<br/>                        &lt;/div&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="password"&gt;Password&lt;/label&gt;<br/>                            &lt;a href="{% url 'password_reset' %}" style="float:right;font-size:12px;text-decoration:none;"&gt;Forgot password?&lt;/a&gt;<br/>                            &lt;input type="password" name="password" class="form-control form-control-sm" id="password"&gt;<br/>                        &lt;/div&gt;<br/>                        &lt;button type="submit" class="btn btn-primary btn-block"&gt;Sign in&lt;/button&gt;<br/>                        <br/>                        &lt;div class="sign-up"&gt;<br/>                            Don't have an account? &lt;a href="{% url 'signup' %}" style="text-decoration:none;"&gt;Create One&lt;/a&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="001e" class="ky jr hi ku b fi lg la l lb lc">{% include 'users/style.html' %}</span><span id="6d00" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lh"><img src="../Images/f779c615767ba3b4b9011f2a87cd06ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Yxm2p_uNoaIs1lOV.jpeg"/></div></div></figure><p id="b108" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/logout.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="1665" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/logout.html --&gt;<br/>{% extends 'base.html' %}</span><span id="fc7b" class="ky jr hi ku b fi lg la l lb lc">{% block content %}</span><span id="d4d2" class="ky jr hi ku b fi lg la l lb lc">&lt;div class="container justify-content-center"&gt;<br/>    &lt;h4&gt;You have successfully logged out of Foodanic. &lt;a href="{% url 'login' %}" style="text-decoration:none;"&gt;Log back in -&gt;&lt;/a&gt;&lt;/h4&gt;<br/>&lt;/div&gt;</span><span id="2452" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><p id="36be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/signup.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="a438" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/signup.html --&gt;</span><span id="2e1a" class="ky jr hi ku b fi lg la l lb lc">{% extends 'base.html' %}</span><span id="0c09" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="f899" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;div class="global-container"&gt;<br/>        &lt;div class="card login-form"&gt;<br/>            &lt;div class="card-body"&gt;<br/>                &lt;h3 class="card-title text-center"&gt;Signup for Foodanic&lt;/h3&gt;<br/>                &lt;div class="card-text"&gt;<br/>                    &lt;form method="POST"&gt;{% csrf_token %}<br/>                        {{ form|crispy }}<br/>                        &lt;button type="submit" class="btn btn-primary btn-block"&gt;Sign Up&lt;/button&gt;<br/>                        <br/>                        &lt;div class="sign-up"&gt;<br/>                            Already have an account? &lt;a href="{% url 'login' %}" style="text-decoration:none;"&gt;Sign In&lt;/a&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="f7f1" class="ky jr hi ku b fi lg la l lb lc">{% include 'users/style.html' %}</span><span id="c27a" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><p id="c356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/change-password.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="7b80" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/change-password.html --&gt;</span><span id="237d" class="ky jr hi ku b fi lg la l lb lc">{% extends 'base.html' %}</span><span id="a98f" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="9d46" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;div class="global-container"&gt;<br/>        &lt;div class="card login-form"&gt;<br/>            &lt;div class="card-body"&gt;<br/>                &lt;h3 class="card-title text-center"&gt;Log in to Foodanic&lt;/h3&gt;<br/>                &lt;div class="card-text"&gt;<br/>                    &lt;form method="POST"&gt;{% csrf_token %}<br/>                            {{ form|crispy }}<br/>                        &lt;button type="submit" class="btn btn-primary btn-block"&gt;Update Password&lt;/button&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;<br/></span><span id="f232" class="ky jr hi ku b fi lg la l lb lc">{% include 'users/style.html' %}</span><span id="682f" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es li"><img src="../Images/de47b08e433123615f917670436563d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1sM3WeTSk_tsrNx9.jpeg"/></div></div></figure><p id="9965" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/password_reset_done.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ed8e" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/password_reset_done.html --&gt;</span><span id="d863" class="ky jr hi ku b fi lg la l lb lc">{% extends 'base.html' %}</span><span id="ca5f" class="ky jr hi ku b fi lg la l lb lc">{% block title %}Email Sent{% endblock %}</span><span id="6458" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>&lt;br&gt;&lt;br&gt;<br/>&lt;div class="container"&gt;<br/>  &lt;h1&gt;Check your inbox.&lt;/h1&gt;<br/>  &lt;p&gt;We've emailed you instructions for setting your password. You should receive the email shortly!&lt;/p&gt;<br/>  &lt;button class="btn btn-primary"&gt;&lt;a href="{% url 'home' %}"&gt;Return Home&lt;/button&gt;&lt;/a&gt;<br/>&lt;/div&gt;<br/>{% endblock %}</span></pre><p id="4e48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/forgot-password.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="a560" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/forgot-password.html --&gt;</span><span id="db18" class="ky jr hi ku b fi lg la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load static %}<br/>{% load crispy_forms_tags %}</span><span id="9f0a" class="ky jr hi ku b fi lg la l lb lc">&lt;body class="bg-gradient-primary"&gt;</span><span id="ff76" class="ky jr hi ku b fi lg la l lb lc">  &lt;div class="container"&gt;</span><span id="fb4d" class="ky jr hi ku b fi lg la l lb lc">    &lt;div class="row justify-content-center"&gt;</span><span id="9b5e" class="ky jr hi ku b fi lg la l lb lc">      &lt;div class="col-xl-10 col-lg-12 col-md-9"&gt;</span><span id="5cc7" class="ky jr hi ku b fi lg la l lb lc">        &lt;div class="card o-hidden border-0 shadow-lg my-5"&gt;<br/>          &lt;div class="card-body p-0"&gt;<br/>            &lt;div class="row"&gt;<br/>              &lt;div class="col-lg-6 d-none d-lg-block bg-password-image"&gt;<br/>                &lt;img src="https://i.imgur.com/ryKdO1v.jpg" style="width: 100%; height: 100%;" alt=""&gt;<br/>              &lt;/div&gt;<br/>              &lt;div class="col-lg-6"&gt;<br/>                &lt;div class="p-5"&gt;<br/>                  &lt;div class="text-center"&gt;<br/>                    &lt;h1 class="h4 text-gray-900 mb-2"&gt;Forgot Your Password?&lt;/h1&gt;<br/>                    &lt;p class="mb-4"&gt;We get it, stuff happens. Just enter your email address below and we'll send you a link to reset your password!&lt;/p&gt;<br/>                  &lt;/div&gt;<br/>                  &lt;form class="user" method="POST"&gt;<br/>                    {% csrf_token %}<br/>                    &lt;div class="form-group" style="border: 2px gray;"&gt;<br/>                      &lt;!-- {{ form|crispy }} --&gt;<br/>                      &lt;input type="email" name="email" class="form-control form-control-user" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Enter your email..."&gt;<br/>                    &lt;/div&gt;<br/>                    &lt;br&gt;<br/>                    &lt;button class="btn btn-primary btn-user btn-block" type="submit" style="text-decoration: none;"&gt;<br/>                      Reset Password<br/>                    &lt;/button&gt;<br/>                  &lt;/form&gt;<br/>                  <br/>                  &lt;hr&gt;<br/>                  &lt;div class="text-center"&gt;<br/>                    &lt;a class="small" href="{% url 'signup' %}" style="text-decoration: none;"&gt;Create an Account!&lt;/a&gt;<br/>                  &lt;/div&gt;<br/>                  &lt;div class="text-center"&gt;<br/>                    &lt;a class="small" href="{% url 'login' %}" style="text-decoration: none;"&gt;Already have an account? Login!&lt;/a&gt;<br/>                  &lt;/div&gt;<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>{% endblock %}</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lj"><img src="../Images/6a29f0dd3a47e29f645c07a32b20b188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HJm7JPv_EKfU-8WM.jpeg"/></div></div></figure><p id="fa63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/password_reset_subject.txt</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="722e" class="ky jr hi ku b fi kz la l lb lc">Foodanic Password Reset</span></pre><p id="447f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/password_reset_email.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="0319" class="ky jr hi ku b fi kz la l lb lc">&lt;!-- users/password_reset_email.html --&gt;</span><span id="7e35" class="ky jr hi ku b fi lg la l lb lc">{% autoescape off %}</span><span id="dcdc" class="ky jr hi ku b fi lg la l lb lc">Hi, {{ user.username }}.<br/>&lt;br&gt;&lt;br&gt;<br/>We received a request for a password reset. If this was you, <br/>follow the link below to reset your password. If this wasn't you, no action is needed.<br/>&lt;br&gt;&lt;br&gt;<br/>&lt;a href="{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}" target="_blank"&gt;{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}&lt;/a&gt;<br/>&lt;br&gt;&lt;br&gt;<br/>If clicking the link above doesn't work, please copy and paste the URL in a new browser<br/>window instead.<br/>&lt;br&gt;&lt;br&gt;<br/>Sincerely,&lt;br&gt;<br/>Foodanic<br/>{% endautoescape %}</span></pre><p id="ee0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/password_reset_done.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="516c" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}</span><span id="8cf6" class="ky jr hi ku b fi lg la l lb lc">{% block title %}Email Sent{% endblock %}</span><span id="95ff" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>&lt;br&gt;&lt;br&gt;<br/>&lt;div class="container"&gt;<br/>  &lt;h1&gt;Check your inbox.&lt;/h1&gt;<br/>  &lt;p&gt;We've emailed you instructions for setting your password. You should receive the email shortly!&lt;/p&gt;<br/>  &lt;button class="btn btn-primary"&gt;&lt;a href="{% url 'home' %}"&gt;Return Home&lt;/button&gt;&lt;/a&gt;<br/>&lt;/div&gt;<br/>{% endblock %}</span></pre><p id="84af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">password_reset_confirm.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="40bc" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}</span><span id="08db" class="ky jr hi ku b fi lg la l lb lc">{% block title %}Enter new password{% endblock %}<br/>{% load crispy_forms_tags %}<br/>{% block content %}</span><span id="84f1" class="ky jr hi ku b fi lg la l lb lc">{% if validlink %}<br/>&lt;br&gt;&lt;br&gt;<br/>&lt;div class="container"&gt;<br/>  &lt;h1&gt;Set a new password&lt;/h1&gt;<br/>  &lt;form method="POST"&gt;<br/>    {% csrf_token %}<br/>    {{ form|crispy }}<br/>    &lt;br&gt;<br/>    &lt;button class="btn btn-primary" type="submit"&gt;Change my password&lt;/button&gt;<br/>  &lt;/form&gt;<br/>&lt;/div&gt;<br/>{% else %}</span><span id="9188" class="ky jr hi ku b fi lg la l lb lc">&lt;p&gt;The password reset link was invalid, possibly because it has already been used. Please request a new password reset.&lt;/p&gt;</span><span id="f8b8" class="ky jr hi ku b fi lg la l lb lc">{% endif %}<br/>{% endblock %}</span></pre><p id="59bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">users/password_reset_complete.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="6465" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}</span><span id="bb60" class="ky jr hi ku b fi lg la l lb lc">{% block title %}Password reset complete{% endblock %}</span><span id="cf90" class="ky jr hi ku b fi lg la l lb lc">{% block content %}<br/>&lt;br&gt;&lt;br&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;h1&gt;Password reset complete&lt;/h1&gt;<br/>    &lt;p&gt;Your new password has been set. You can now &lt;a href="{% url 'login' %}" style="text-decoration: none;"&gt;log in&lt;/a&gt;.&lt;/p&gt;<br/>&lt;/div&gt;<br/>{% endblock %}</span></pre><p id="7675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可以尝试一下我们的新用户认证，这将带您参观Django认证系统。请记住，密码重置不起作用，因为我们没有用Django设置电子邮件服务器。推荐【本教程】(https://simpleisbetterthancomplex . com/tutorial/2016/09/19/how-to-create-password-reset-view . html)协助你进行邮件重置设置。</p><p id="1a3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想为您的站点创建一个管理员帐户，您可以使用:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="27c8" class="ky jr hi ku b fi kz la l lb lc">python manage.py createsuperuser</span></pre><h1 id="3760" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">主应用程序</h1><p id="a922" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">有趣的部分来了，我们将构建应用程序的CRUD操作。</p><h1 id="b329" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">视图</h1><p id="09a2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">视图控制应用程序的逻辑，呈现功能并对表单、模板和任何与应用程序相关的东西执行必要的操作。</p><p id="41e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将写出我们将要处理的函数。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="5c0f" class="ky jr hi ku b fi kz la l lb lc"># views.py</span><span id="cefa" class="ky jr hi ku b fi lg la l lb lc">from django.shortcuts import render</span><span id="169f" class="ky jr hi ku b fi lg la l lb lc">def home(request):<br/>    context = {}<br/>    return render(request, 'app/index.html', context)</span><span id="d068" class="ky jr hi ku b fi lg la l lb lc">def detail(request, id):<br/>    context = {}<br/>    return render(request, 'app/detail.html', context)</span><span id="553e" class="ky jr hi ku b fi lg la l lb lc">def create(request):<br/>    context = {}<br/>    return render(request, 'app/create.html', context)</span><span id="6ee0" class="ky jr hi ku b fi lg la l lb lc">def update(request, id):<br/>    context = {}<br/>    return render(request, 'app/update.html', context)</span><span id="6d05" class="ky jr hi ku b fi lg la l lb lc">def delete(request, id):<br/>    context = {}<br/>    return render(request, 'app/delete.html', context)</span></pre><p id="9df0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，除了媒体url和根之外，让我们将它们添加到app中的<code class="du ld le lf ku b">urls.py</code>文件，以处理我们未来的图像:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ce17" class="ky jr hi ku b fi kz la l lb lc"># app/urls.py<br/>from django.urls import path<br/>from .views import *<br/>from django.conf.urls.static import static<br/>from django.conf import settings</span><span id="f3d4" class="ky jr hi ku b fi lg la l lb lc">urlpatterns = [<br/>    path('', home, name='home'),<br/>    path('detail/&lt;int:id&gt;/', detail, name='detail'),<br/>    path('new/', create, name='create'),<br/>    path('update/&lt;int:id&gt;/', update, name='update'),<br/>    path('delete/&lt;int:id&gt;/', delete, name='delete'),<br/>]</span><span id="1ab3" class="ky jr hi ku b fi lg la l lb lc">if settings.DEBUG:<br/>    urlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)</span></pre><p id="cee9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让我们在app中的URL正常工作，我们需要将它们添加到我们的主urls.py文件中。此外，还要将媒体url和根目录添加到主URL中。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="7740" class="ky jr hi ku b fi kz la l lb lc"># foodanic/urls.py<br/>from django.contrib import admin<br/>from django.urls import path, include<br/>from django.conf.urls.static import static<br/>from django.conf import settings</span><span id="d491" class="ky jr hi ku b fi lg la l lb lc">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('app.urls')),<br/>    path('u/', include('users.urls')),<br/>]</span><span id="b897" class="ky jr hi ku b fi lg la l lb lc">if settings.DEBUG:<br/>    urlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)</span></pre><h1 id="0c49" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">运行迁移和服务器</h1><p id="85f4" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">现在我们准备开始开发我们的web应用程序。让我们运行迁移来创建一个初始数据库并运行我们的应用程序。</p><p id="f39f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行迁移时使用:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="0b17" class="ky jr hi ku b fi kz la l lb lc">python manage.py migrate</span></pre><p id="0c88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行服务器时使用:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="55c7" class="ky jr hi ku b fi kz la l lb lc">python manage.py runserver [OPTIONAL: PORT]</span></pre><p id="8508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lk">*注意:可选端口可以这样使用:</em> <code class="du ld le lf ku b"><em class="lk">python manage.py runserver 8000</em></code> <em class="lk"> </em> <code class="du ld le lf ku b"><em class="lk">python manage.py runserver 1234</em></code></p><h1 id="9129" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">模型</h1><p id="3115" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">现在我们可以建立存储每个食谱的模型。在models.py中添加以下代码:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4512" class="ky jr hi ku b fi kz la l lb lc"># models.py<br/>from django.db import models<br/>from datetime import datetime, timedelta<br/>from markdownx.models import MarkdownxField<br/>from django.contrib.auth.models import User</span><span id="8065" class="ky jr hi ku b fi lg la l lb lc">class Recipe(models.Model):<br/>    name = models.CharField(max_length=255)<br/>    description = models.TextField()<br/>    prep = models.CharField(max_length=255)<br/>    cook = models.CharField(max_length=255)<br/>    servings = models.IntegerField(default=1, null=True, blank=True)<br/>    image = models.ImageField(upload_to='media/')<br/>    ingredients = MarkdownxField()<br/>    directions = MarkdownxField()<br/>    notes = models.TextField(null=True, blank=True)<br/>    author = models.ForeignKey(User, on_delete=models.CASCADE)</span><span id="df03" class="ky jr hi ku b fi lg la l lb lc">    def __str__(self):<br/>        return self.name</span><span id="d35a" class="ky jr hi ku b fi lg la l lb lc">    @property<br/>    def formatted_ingredients(self):<br/>        return markdownify(self.ingredients)</span><span id="5ff8" class="ky jr hi ku b fi lg la l lb lc">    @property<br/>    def formatted_directions(self):<br/>        return markdownify(self.directions)</span></pre><p id="5691" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里需要注意一些事情:我们有9个字段来保存配方模型的信息。我们将为两个字段使用Django MarkdownX<a class="ae jd" href="https://github.com/neutronX/django-markdownx" rel="noopener ugc nofollow" target="_blank">(Github Link)</a>以获得更好的外观。<code class="du ld le lf ku b">@property</code>创建了一个属性标签，我们可以在模板中使用它来呈现Markdown字段。</p><p id="24f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装Django Markdown，运行:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="f150" class="ky jr hi ku b fi kz la l lb lc">pip install django-markdownx</span></pre><p id="5198" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将其添加到settings.py:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="62bd" class="ky jr hi ku b fi kz la l lb lc"># settings.py</span><span id="dd5d" class="ky jr hi ku b fi lg la l lb lc">INSTALLED_APPS = [<br/>   'markdownx',<br/>   ...<br/>]</span></pre><p id="2560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将其添加到需求中:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="5aa9" class="ky jr hi ku b fi kz la l lb lc">pip freeze &gt; requirements.txt</span></pre><p id="afa9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将其添加到主urls.py:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="b407" class="ky jr hi ku b fi kz la l lb lc"># foodanic/urls.py</span><span id="6739" class="ky jr hi ku b fi lg la l lb lc">urlpatterns = [<br/>    path('markdownx/', include('markdownx.urls')),<br/>]</span></pre><p id="6119" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经建立了模型，我们可以继续运行迁移了。注意:您必须在每次对模型进行更改时运行迁移，以便数据库得到更新。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="196e" class="ky jr hi ku b fi kz la l lb lc">python manage.py makemigrations &amp;&amp; python manage.py migrate</span></pre><p id="a6b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果一切顺利，您应该会看到类似这样的输出，并且在您的应用程序<code class="du ld le lf ku b">migrations/</code>文件夹中有一个全新的迁移。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="a9a6" class="ky jr hi ku b fi kz la l lb lc">(env) ➜  foodanic git:(master) ✗ python manage.py makemigrations &amp;&amp; python manage.py migrate<br/>Migrations for 'app':<br/>  app/migrations/0001_initial.py<br/>    - Create model Recipe<br/>Operations to perform:<br/>  Apply all migrations: admin, app, auth, contenttypes, sessions<br/>Running migrations:<br/>  Applying app.0001_initial... OK<br/>(env) ➜  foodanic git:(master) ✗</span></pre><p id="34e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让我们的模型成功地显示在Django Admin中，我们需要将它注册到admin.py文件中，如下所示:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="3c40" class="ky jr hi ku b fi kz la l lb lc"># app/admin.py<br/>from django.contrib import admin<br/>from .models import *</span><span id="1361" class="ky jr hi ku b fi lg la l lb lc">admin.site.register(Recipe)</span></pre><h1 id="5ac6" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">主要形式</h1><p id="7e87" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">为了将数据快速传递到我们的数据库中，我们将使用基于我们的模型的django ModelForm。</p><p id="907c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在表单文件中进行以下更改:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="04e7" class="ky jr hi ku b fi kz la l lb lc"># app/forms.py<br/>from django import forms<br/>from .models import *<br/>from durationwidget.widgets import TimeDurationWidget</span><span id="e9fe" class="ky jr hi ku b fi lg la l lb lc">class RecipeForm(forms.ModelForm):<br/>    prep = forms.DurationField(widget=TimeDurationWidget(show_days=False, show_hours=True, show_minutes=True, show_seconds=False), required=False)<br/>    cook = forms.DurationField(widget=TimeDurationWidget(show_days=False, show_hours=True, show_minutes=True, show_seconds=False), required=False)<br/>    <br/>    class Meta:<br/>        model = Recipe<br/>        fields = '__all__'<br/>        exclude = ('author',)</span></pre><p id="7484" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了这个表单，我们将能够呈现配方模型中的所有字段。此外，如果你想只包含某些字段，你可以在一个数组中列出它们:<code class="du ld le lf ku b">fields = ['name', 'image',]</code>或者如果你想排除某些字段，你可以这样列出它们:<code class="du ld le lf ku b">exclude = ('name', 'image',)</code>。</p><p id="94d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能已经注意到，我们添加了一个新的库来帮助我们渲染准备和烹饪时间的持续时间字段。另外，让我们安装另一个模块，稍后我们将使用它来帮助我们处理表单，<a class="ae jd" href="https://django-crispy-forms.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">Django crisp Forms</a>。</p><p id="5a18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用pip安装它:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ccef" class="ky jr hi ku b fi kz la l lb lc">pip install django-durationwidget<br/>pip install django-crispy-forms</span></pre><p id="667d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将其添加到设置:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="d6b9" class="ky jr hi ku b fi kz la l lb lc"># settings.py<br/>INSTALLED_APPS = [<br/>    'durationwidget',<br/>    'crispy_forms',<br/>]</span><span id="c40b" class="ky jr hi ku b fi lg la l lb lc">TEMPLATES = [<br/>    'APP_DIRS': True,        # set to True<br/>]</span><span id="00d8" class="ky jr hi ku b fi lg la l lb lc"># on the bottom of settings.py<br/>CRISPY_TEMPLATE_PACK = 'bootstrap4'</span></pre><p id="f0ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们冻结需求以保存依赖性:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="a7f4" class="ky jr hi ku b fi kz la l lb lc">pip freeze &gt; requirements.txt</span></pre><h1 id="623e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">create, read, update, and delete</h1><p id="8de2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">现在我们准备开始写我们的观点的逻辑。</p><p id="2fd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从代表(创建、读取、更新、删除)的<strong class="ih hj"> CRUD </strong>中的<strong class="ih hj"> C </strong>开始</p><h1 id="4fdf" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">创造</h1><p id="35ec" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在我们的视图中，让我们导入表单、模型，并为GET和POST请求呈现表单。当用户在页面上创建一个新的食谱时，GET请求将被呈现，而POST将在提交后处理表单逻辑。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="10a7" class="ky jr hi ku b fi kz la l lb lc"># app/views.py<br/>from django.shortcuts import render, redirect, get_object_or_404<br/>from django.contrib.auth.decorators import login_required<br/>from django.core.files.storage import FileSystemStorage<br/>from datetime import datetime, timedelta<br/>from .models import *<br/>from .forms import *</span><span id="52ca" class="ky jr hi ku b fi lg la l lb lc">@login_required<br/>def create(request):<br/>    context = {}<br/>    if request.method == 'GET':<br/>        form = RecipeForm()<br/>        context['form'] = RecipeForm()<br/>        return render(request, 'app/create.html', context)<br/>    elif request.method == 'POST' and request.FILES != None:<br/>        form = RecipeForm(request.POST, request.FILES)<br/>        if form.is_valid():<br/>            new = Recipe()<br/>            user = request.user<br/>            new.author = user<br/>            new.name = form['name'].value()<br/>            new.description = form['description'].value()<br/>            new.prep = form['prep'].value()<br/>            new.cook = form['cook'].value()<br/>            new.servings = form['servings'].value()<br/>            new.ingredients = form['ingredients'].value()<br/>            new.directions = form['directions'].value()<br/>            new.notes = form['notes'].value()<br/>            theimg = request.FILES['image']<br/>            fs = FileSystemStorage()<br/>            filename = fs.save(theimg.name, theimg)<br/>            file_url = fs.url(filename)<br/>            new.image = filename<br/>            new.save()<br/>            return redirect('home')<br/>        else:<br/>            form = RecipeForm()<br/>            context['form'] = RecipeForm()<br/>            return render(request, 'app/create.html', context)<br/>    return render(request, 'app/create.html', context)</span></pre><p id="8962" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哇，这是一大堆代码——让我们把它分解一下，以便了解它在做什么。</p><p id="eace" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">if语句处理if GET呈现哪个模板的逻辑，以及在提交POST后将用户重定向到哪里。表单中的<code class="du ld le lf ku b">request.FILES</code>用于我们的图像字段。本质上，如果提交的表单传递了我们的参数，我们将创建一个新的Recipe模型实例，并将表单的内容分别保存到模型值中。</p><p id="b6d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们必须为表单呈现一个模板。为此，我们需要在基本模板中创建一个<code class="du ld le lf ku b">base.html</code>文件。我将添加Bootstrap的最新版本5——因此，如果你稍后正在阅读本教程，请务必更新Bootstrap的相应CDN，可在<a class="ae jd" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank">getbootstrap.com</a>找到。</p><p id="8b85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">foodanic/templates/base.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="74c8" class="ky jr hi ku b fi kz la l lb lc">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    &lt;title&gt;Foodanic&lt;/title&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous"&gt;<br/>    &lt;link rel="shortcut icon" href="https://media.istockphoto.com/vectors/hand-opening-silver-cloche-vector-id1135322593?k=6&amp;m=1135322593&amp;s=612x612&amp;w=0&amp;h=QhIjVZdKyGzfQ6aGojvSFgXpLZpEG7RsueYSLngbdLA=" type="image/x-icon"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    {% block content %}</span><span id="87a2" class="ky jr hi ku b fi lg la l lb lc">    {% endblock %}<br/>    <br/>    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="fe1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了我们的base.html设置，我们可以渲染其他没有不必要内容的模板。我把<code class="du ld le lf ku b">create.html</code>页面引导成一个可以接受的格式，但是你可以随意修改设计。</p><p id="1bc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/create.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="bc06" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load crispy_forms_tags %}<br/></span><span id="ffb7" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;h4&gt;New Recipe&lt;/h4&gt;<br/>    &lt;p&gt;&lt;i&gt;Note: The Ingredients and Directions fields are Markdown Supported. Learn more about markdown &lt;a href="https://www.markdownguide.org/cheat-sheet/" target="_blank" style="text-decoration: none;"&gt;here&lt;/a&gt;.&lt;/i&gt;&lt;/p&gt;<br/>    &lt;br&gt;<br/>        &lt;form method="post" enctype="multipart/form-data"&gt;<br/>            {% csrf_token %}<br/>            &lt;div class="row"&gt;<br/>                &lt;div class="col-6"&gt;<br/>                    &lt;div class="col"&gt;<br/>                        {{ form.name|as_crispy_field }}<br/>                        {{ form.image|as_crispy_field }}<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>                &lt;div class="col-6"&gt;<br/>                    {{ form.description|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;br&gt;<br/>            &lt;div class="row justify-content-center"&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.prep|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.cook|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.servings|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;br&gt;<br/>            &lt;div class="row"&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.ingredients|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.directions|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.notes|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;div class="mt-4 mb-4 d-flex justify-content-center"&gt;<br/>                &lt;button type="submit" class="btn btn-success"&gt;Post Recipe&lt;/button&gt;<br/>            &lt;/div&gt;<br/>        &lt;/form&gt;<br/>   <br/>    {{ form.media }}<br/>&lt;/div&gt;</span><span id="8623" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><p id="b3f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始时，您可以看到我们基于创建的<code class="du ld le lf ku b">base.html</code>文件在块内容标签中呈现信息。我们用标签加载crisp，并将每个字段设置为一个crisp字段。<code class="du ld le lf ku b">{{ form.media }}</code>标签呈现MarkdownX字段的内容。或者，您可以将整个表单渲染得像这样清晰:<code class="du ld le lf ku b">{{ form|crispy }}</code>。</p><p id="e7bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新路线应该类似于以下内容:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/8a2310448e7350ab41418de83c90fe3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IovqjOsNpTPoTdSB.jpeg"/></div></div></figure><h1 id="28bc" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">阅读</h1><p id="b192" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">CRUD的读取部分必须能够查看数据库中的每个对象。首先，我们将做单个食谱，然后我们将为我们的索引页面拉完整套食谱。</p><p id="b3d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/views.py</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4381" class="ky jr hi ku b fi kz la l lb lc">from django.shortcuts import render, redirect, get_object_or_404<br/>from django.contrib.auth.decorators import login_required<br/>from django.core.files.storage import FileSystemStorage<br/>from datetime import datetime, timedelta<br/>from markdownx.utils import markdownify<br/>from .models import *<br/>from .forms import *</span><span id="9091" class="ky jr hi ku b fi lg la l lb lc">def detail(request, id):<br/>    recipe = get_object_or_404(Recipe, id=id)<br/>    recipe.ingredients = markdownify(recipe.ingredients)<br/>    recipe.directions = markdownify(recipe.directions)</span><span id="3af1" class="ky jr hi ku b fi lg la l lb lc">    context = {<br/>        'recipe': recipe,<br/>    }<br/>    return render(request, 'app/detail.html', context)</span></pre><p id="f3d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下模板归功于Codepen上的用户<a class="ae jd" href="https://codepen.io/ARIELOZAM/pen/JjRoxeN" rel="noopener ugc nofollow" target="_blank"> ARIELOZAM </a>。</p><p id="534b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/detail.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="cc57" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="4ecf" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;div class="bg-codeblocks"&gt;<br/>        &lt;div class="main-box-codeblocks"&gt;<br/>            &lt;div class="container"&gt;<br/>                &lt;div class="row"&gt;<br/>                    &lt;div class="col-md-12"&gt;<br/>                        &lt;a href="{% url 'home' %}"&gt;&lt;button class="btn btn-info mb-4"&gt;Back Home&lt;/button&gt;&lt;/a&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>                &lt;div class="row"&gt;<br/>                    &lt;div class="col-md-6"&gt;<br/>                        &lt;div class="box-image-codeblocks"&gt;<br/>                            &lt;div class="swiper-container gallery-top"&gt;<br/>                                &lt;div class="swiper-wrapper"&gt;<br/>                                    &lt;div class="swiper-slide"&gt;<br/>                                        &lt;div class="product-image"&gt;<br/>                                            &lt;img src="{{recipe.image.url}}" alt="{{recipe.name}}" class="img-fluid" style="width: 650px; height: 100%;"&gt;<br/>                                        &lt;/div&gt;<br/>                                    &lt;/div&gt;<br/>                                &lt;/div&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                    &lt;div class="col-md-6"&gt;<br/>                        &lt;h2 class="text-bold text-strong"&gt;{{ recipe.name|capfirst }} Recipe  {% if user.is_authenticated and request.user == recipe.author %}   &lt;a href="{% url 'update' recipe.id %}"&gt;&lt;i class="fas fa-edit"&gt;&lt;/i&gt;&lt;/a&gt; &lt;span data-bs-toggle="modal" data-bs-target="#delete"&gt;&lt;i class="fas fa-trash"&gt;&lt;/i&gt;&lt;/span&gt; {% endif %}&lt;/h2&gt;<br/>                        &lt;span class="seller-name-codeblocks"&gt;<br/>                            &lt;h5&gt;by &lt;a href="#" style="text-decoration: none;"&gt;{{recipe.author}}&lt;/a&gt;&lt;/h5&gt;<br/>                        &lt;/span&gt;<br/>                        &lt;br&gt;<br/>                        &lt;span class="description-codeblocks"&gt;<br/>                            &lt;p&gt;<br/>                                &lt;strong&gt;Description:&lt;/strong&gt; &lt;br&gt;<br/>                                &lt;span class="text-muted"&gt;<br/>                                    &lt;p style="width: 450px;overflow:scroll;"&gt;{{recipe.description}}&lt;/p&gt;<br/>                                &lt;/span&gt;<br/>                            &lt;/p&gt;<br/>                        &lt;/span&gt;<br/>                        &lt;br&gt;<br/>                        &lt;span class="extras-codeblocks "&gt;<br/>                            &lt;ul class="nav nav-tabs my-2" id="myTab" role="tablist"&gt;<br/>                                &lt;li class="nav-item" role="presentation"&gt;<br/>                                    &lt;a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"&gt;Quick Info&lt;/a&gt;<br/>                                &lt;/li&gt;<br/>                                &lt;li class="nav-item" role="presentation"&gt;<br/>                                    &lt;a class="nav-link" id="ingredients-tab" data-toggle="tab" href="#ingredients" role="tab" aria-controls="ingredients" aria-selected="false"&gt;Ingredients&lt;/a&gt;<br/>                                &lt;/li&gt;<br/>                                &lt;li class="nav-item" role="presentation"&gt;<br/>                                    &lt;a class="nav-link" id="directions-tab" data-toggle="tab" href="#directions" role="tab" aria-controls="directions" aria-selected="false"&gt;Directions&lt;/a&gt;<br/>                                &lt;/li&gt;<br/>                            &lt;/ul&gt;<br/>                            &lt;div class="tab-content" id="myTabContent"&gt;<br/>                                &lt;div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab"&gt;<br/>                                    &lt;br&gt;<br/>                                    &lt;table style="width:250px;"&gt;<br/>                                        &lt;tr&gt;<br/>                                            &lt;th&gt;Servings:&lt;/th&gt;<br/>                                            &lt;td&gt;{{ recipe.servings }}&lt;/td&gt;<br/>                                        &lt;/tr&gt;<br/>                                        &lt;tr&gt;<br/>                                            &lt;th&gt;Prep:&lt;/th&gt;<br/>                                            &lt;td&gt;{{ recipe.prep }}&lt;/td&gt;<br/>                                        &lt;/tr&gt;<br/>                                        &lt;tr&gt;<br/>                                            &lt;th&gt;Cook:&lt;/th&gt;<br/>                                            &lt;td&gt;{{ recipe.cook }}&lt;/td&gt;<br/>                                        &lt;/tr&gt;<br/>                                    &lt;/table&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;div class="tab-pane fade" id="ingredients" role="tabpanel" aria-labelledby="ingredients-tab"&gt;<br/>                                    {{ recipe.ingredients|safe }}<br/>                                &lt;/div&gt;<br/>                                &lt;div class="tab-pane fade" id="directions" role="tabpanel" aria-labelledby="directions-tab"&gt;<br/>                                    {{ recipe.directions|safe }}<br/>                                &lt;/div&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/span&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;<br/>      <br/>&lt;!-- Modal --&gt;<br/>&lt;div class="modal fade" id="delete" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deleteLabel" aria-hidden="true"&gt;<br/>    &lt;div class="modal-dialog"&gt;<br/>        &lt;div class="modal-content"&gt;<br/>        &lt;div class="modal-header"&gt;<br/>            &lt;h5 class="modal-title" id="deleteLabel"&gt;Are you 100% sure?&lt;/h5&gt;<br/>            &lt;button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;<br/>        &lt;/div&gt;<br/>        &lt;div class="modal-body"&gt;<br/>            Are you absolutely sure you want to delete the {{recipe.name|capfirst}} Recipe? The data will be erased from the database and will not be retrievable.<br/>        &lt;/div&gt;<br/>        &lt;div class="modal-footer"&gt;<br/>            &lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;Nevermind&lt;/button&gt;<br/>            &lt;a href="{% url 'delete' recipe.id %}"&gt;&lt;button type="button" class="btn btn-primary"&gt;OK, Proceed&lt;/button&gt;&lt;/a&gt;<br/>        &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="7045" class="ky jr hi ku b fi lg la l lb lc">&lt;style&gt;<br/>.bg-codeblocks {<br/>    margin-top: 4%;<br/>    position: absolute;<br/>    background: #8E2DE2;<br/>    background: -webkit-linear-gradient(to right, #4A00E0, #8E2DE2);<br/>    background: linear-gradient(to right, #4A00E0, #8E2DE2);<br/>    height: auto;<br/>}</span><span id="c209" class="ky jr hi ku b fi lg la l lb lc">.main-box-codeblocks	{<br/>	background-color: #FAFAFA;<br/>	border-radius: 20px;<br/>	padding: 5em 2em;<br/>	width:90%;<br/>	height: auto;<br/>	position: relative;<br/>	display: block;<br/>	box-shadow: 0 0px 20px 2px rgba(0,0,0,0.5);<br/>	margin: 3em auto;<br/>	<br/>}<br/>&lt;/style&gt;</span><span id="6240" class="ky jr hi ku b fi lg la l lb lc">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js"&gt;&lt;/script&gt;<br/>&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"&gt;</span><span id="4b09" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><p id="280b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新模板应该如下所示:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/bc61adac13bae12c5afda0ba3fad3e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PwnMaGQyygYVywv9.jpeg"/></div></div></figure><p id="16a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是时候让我们所有的食谱显示在我们的主页上了。</p><p id="fce4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/index.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4196" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="82fb" class="ky jr hi ku b fi lg la l lb lc">    &lt;nav class="navbar navbar-expand-lg navbar-light bg-light"&gt;<br/>        &lt;div class="container-fluid"&gt;<br/>          &lt;a class="navbar-brand" href="{% url 'home' %}"&gt;Foodanic&lt;/a&gt;<br/>          &lt;button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"&gt;<br/>            &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;<br/>          &lt;/button&gt;<br/>          &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>            &lt;ul class="navbar-nav me-auto mb-2 mb-lg-0"&gt;<br/>              &lt;li class="nav-item"&gt;<br/>                &lt;a class="nav-link active" aria-current="page" href="{% url 'home' %}"&gt;&lt;button class="btn btn-warning" style="color: white;"&gt;All Recipes&lt;/button&gt;&lt;/a&gt;<br/>              &lt;/li&gt;<br/>              &lt;li class="nav-item"&gt;<br/>                &lt;a class="nav-link active" href="{% url 'create' %}"&gt;&lt;button class="btn btn-info" style="color: white;"&gt;New Recipe&lt;/button&gt;&lt;/a&gt;<br/>              &lt;/li&gt;<br/>            &lt;/ul&gt;<br/>            {% if not request.user.is_authenticated %}<br/>                &lt;a class="nav-link active" aria-current="page" href="{% url 'login' %}"&gt;&lt;button class="btn btn-dark" style="color: white;"&gt;Login&lt;/button&gt;&lt;/a&gt;<br/>            {% else %}<br/>                &lt;a class="nav-link active" aria-current="page" href="{% url 'logout' %}"&gt;&lt;button class="btn btn-dark" style="color: white;"&gt;Logout&lt;/button&gt;&lt;/a&gt;<br/>            {% endif %}<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/nav&gt;</span><span id="719a" class="ky jr hi ku b fi lg la l lb lc">  &lt;div class="container"&gt;<br/>    &lt;header class="jumbotron my-4"&gt;<br/>      &lt;h1 class="display-3"&gt;A Warm Welcome!&lt;/h1&gt;<br/>      &lt;p class="lead"&gt;Browse through our collection of various recipes.&lt;/p&gt;<br/>      &lt;a href="{% url 'create' %}"&gt;&lt;button class="btn btn-info btn-lg" style="color: white;"&gt;Post Your Recipe&lt;/button&gt;&lt;/a&gt;<br/>    &lt;/header&gt;</span><span id="5024" class="ky jr hi ku b fi lg la l lb lc">    &lt;br&gt;<br/>    &lt;div class="row text-center"&gt;<br/>    {% for recipe in recipes %}<br/>      &lt;div class="col-lg-4 col-md-6 mb-4"&gt;<br/>        &lt;div class="card h-100 w-75"&gt;<br/>            &lt;a href="{% url 'detail' recipe.id %}"&gt;&lt;img class="card-img-top" src="{{recipe.image.url}}" alt="{{recipe.name}}"&gt;&lt;/a&gt;<br/>          &lt;div class="card-body"&gt;<br/>            &lt;h4 class="card-title"&gt;&lt;a href="{% url 'detail' recipe.id %}" style="text-decoration: none;"&gt;{{recipe.name}} Recipe&lt;/a&gt;&lt;/h4&gt;<br/>            &lt;p class="card-text"&gt;{{recipe.description|truncatechars:65}}&lt;/p&gt;<br/>            &lt;p&gt;&lt;b&gt;Prep Time: &lt;/b&gt;{{recipe.prep}} &lt;br&gt;<br/>               &lt;b&gt;Cook Time: &lt;/b&gt;{{recipe.cook}}<br/>            &lt;/p&gt;<br/>          &lt;/div&gt;<br/>          &lt;div class="card-footer"&gt;<br/>            &lt;a href="{% url 'detail' recipe.id %}" class="btn btn-primary"&gt;View&lt;/a&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    {% endfor %}<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;</span><span id="67b0" class="ky jr hi ku b fi lg la l lb lc">  &lt;br&gt;&lt;br&gt;&lt;br&gt;<br/>  &lt;footer class="py-5 bg-dark"&gt;<br/>    &lt;div class="container"&gt;<br/>      &lt;p class="m-0 text-center text-white"&gt;Copyright &amp;copy; Foodanic 2021&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  &lt;/footer&gt;<br/>{% endblock %}</span></pre><p id="d6ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过几个示例食谱，主页显示如下:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/f466315ac1c664ab1f64028526b3b53c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bp3rnca0jDAM_ucB.jpeg"/></div></div></figure><h1 id="ccd6" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">更新</h1><p id="8475" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">更新视图将获取我们想要更新的对象的实例，并保存新信息。</p><p id="6972" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/views.py</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="fb45" class="ky jr hi ku b fi kz la l lb lc">@login_required<br/>def update(request, id):<br/>    recipe = get_object_or_404(Recipe, id=id)<br/>    context = {<br/>        'recipe': recipe<br/>    }<br/>    if request.method == 'GET':<br/>        form = RecipeForm(instance=recipe)<br/>        context['form'] = form<br/>        return render(request, 'app/update.html', context)<br/>    elif request.method == 'POST' and request.FILES != None:<br/>        form = RecipeForm(request.POST, request.FILES, instance=recipe)<br/>        if form.is_valid():<br/>            form.save()<br/>            return redirect('detail', recipe.id)<br/>        else:<br/>            form = RecipeForm(instance=recipe)<br/>            context['form'] = form<br/>            return render(request, 'app/update.html', context)<br/>    return render(request, 'app/update.html', context)</span></pre><p id="591e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个简短的路径，呈现了create视图的一个副本，只是我们一般保存表单。</p><p id="b735" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/update.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="95bb" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="fa38" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;h4&gt;Update Recipe&lt;/h4&gt;<br/>    &lt;p&gt;&lt;i&gt;Note: The Ingredients and Directions fields are Markdown Supported. Learn more about markdown &lt;a href="https://www.markdownguide.org/cheat-sheet/" target="_blank" style="text-decoration: none;"&gt;here&lt;/a&gt;.&lt;/i&gt;&lt;/p&gt;<br/>    &lt;br&gt;<br/>        &lt;form method="post" enctype="multipart/form-data"&gt;<br/>            {% csrf_token %}<br/>            &lt;div class="row"&gt;<br/>                &lt;div class="col-6"&gt;<br/>                    &lt;div class="col"&gt;<br/>                        {{ form.name|as_crispy_field }}<br/>                        {{ form.image|as_crispy_field }}<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>                &lt;div class="col-6"&gt;<br/>                    {{ form.description|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;br&gt;<br/>            &lt;div class="row justify-content-center"&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.prep|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.cook|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-2"&gt;<br/>                    {{ form.servings|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;br&gt;<br/>            &lt;div class="row"&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.ingredients|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.directions|as_crispy_field }}<br/>                &lt;/div&gt;<br/>                &lt;div class="col-4"&gt;<br/>                    {{ form.notes|as_crispy_field }}<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>            &lt;div class="mt-4 mb-4 d-flex justify-content-center"&gt;<br/>                &lt;button type="submit" class="btn btn-success"&gt;Save Recipe&lt;/button&gt;<br/>            &lt;/div&gt;<br/>        &lt;/form&gt;<br/>    {{ form.media }}<br/>&lt;/div&gt;</span><span id="69d5" class="ky jr hi ku b fi lg la l lb lc">{% endblock %}</span></pre><p id="2b43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续试一试，你的表单应该显示对象的数据，并正确地保存到数据库中。</p><h1 id="b78b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">删除</h1><p id="2cee" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">尽管删除我们的数据库对象很痛苦，但有时这是用户或我们想要做的。</p><p id="d3e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/views.py</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="585f" class="ky jr hi ku b fi kz la l lb lc">@login_required<br/>def delete(request, id):<br/>    recipe = get_object_or_404(Recipe, id=id)<br/>    if not request.user == recipe.author:<br/>        return redirect('detail', recipe.id)<br/>    else:<br/>        name = recipe.name<br/>        recipe.delete()<br/>        context = {<br/>            'name': name<br/>        }<br/>        return render(request, 'app/delete.html', context)</span></pre><p id="64db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">app/delete.html</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="6122" class="ky jr hi ku b fi kz la l lb lc">{% extends 'base.html' %}<br/>{% block content %}<br/>{% load crispy_forms_tags %}</span><span id="644d" class="ky jr hi ku b fi lg la l lb lc">&lt;br class="mt-0 mb-4"&gt;<br/>&lt;div class="container"&gt;<br/>    &lt;h4&gt;You have successfully deleted the {{name|capfirst}} Recipe&lt;/h4&gt;<br/>    &lt;br&gt;&lt;br&gt;<br/>    &lt;div class="row"&gt;<br/>        &lt;div class="col"&gt;&lt;a href="{% url 'home' %}"&gt;&lt;button class="btn btn-primary"&gt;Back Home&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;<br/>        &lt;div class="col"&gt;&lt;a href="{% url 'create' %}"&gt;&lt;button class="btn btn-success"&gt;New Recipe&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;<br/>{% endblock %}</span></pre><h1 id="8f9f" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">第三部分🚗</h1><p id="69aa" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们现在已经准备好在Heroku进行现场部署。此时，请前往<a class="ae jd" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>，创建并推送您的代码到一个新的存储库，这样我们就可以在Heroku上托管它。另外，如果你还没有一个Heroku账户，去Heroku主页创建一个。</p><p id="51fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，Heroku需要gunicorn来运行，所以我们将使用pip来安装它。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="07d5" class="ky jr hi ku b fi kz la l lb lc">pip install gunicorn<br/>pip freeze &gt; requirements.txt</span></pre><p id="251d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我们需要一个<code class="du ld le lf ku b">Procfile</code>，这样Heroku就知道用gunicorn运行我们的应用程序。</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="4585" class="ky jr hi ku b fi kz la l lb lc">web: gunicorn foodanic.wsgi --log-file -</span></pre><p id="61e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您在终端中使用以下信息登录Heroku:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="cb6c" class="ky jr hi ku b fi kz la l lb lc">heroku login</span></pre><p id="61e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下内容创建新的Heroku应用程序:</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="3c01" class="ky jr hi ku b fi kz la l lb lc">heroku create<br/># or<br/>heroku create [app-name]</span></pre><p id="f369" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在git和commit之后，运行</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="9baf" class="ky jr hi ku b fi kz la l lb lc">git push heroku HEAD:master</span></pre><p id="3d96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你得到一个成功的消息说你的应用程序(带链接)被部署到Heroku，我们必须确保我们的应用程序接受那个引用。</p><p id="20f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ld le lf ku b">foodanic/settings.py</code></p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="ff69" class="ky jr hi ku b fi kz la l lb lc">ALLOWED_HOSTS = ['[your-app].herokuapp.com']</span></pre><p id="7229" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请务必将<code class="du ld le lf ku b">['your-app']</code>替换为Heroku应用的相应应用名称。</p><p id="ddd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后重新提交并…</p><pre class="jf jg jh ji fd kt ku kv kw aw kx bi"><span id="1d26" class="ky jr hi ku b fi kz la l lb lc">git push heroku HEAD:master</span></pre><h1 id="c1c1" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结束了</h1><p id="952d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">如果你已经到了本教程的结尾，那你就牛逼了！如果你在整个教程中遇到了任何错误，请不要羞于在评论中发表它们，这样我就可以在别人遇到它们之前快速修复它们。编程毕竟是一项协作工作😁</p><h1 id="3d0f" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">项目链接:</h1><p id="57d6" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Github回购:<a class="ae jd" href="https://github.com/vladyslavnUA/foodanic" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="a1b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直播:<a class="ae jd" href="https://foodanic.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">链接</a></p><h1 id="c79e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">资源:</h1><p id="fa96" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">详情页代码笔:<a class="ae jd" href="https://codepen.io/ARIELOZAM/pen/JjRoxeN" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="6a84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户授权页面代码笔:<a class="ae jd" href="https://codepen.io/Ihor_Sukhorada/pen/LBwRvv" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="0e04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首页引导模板:<a class="ae jd" href="https://startbootstrap.com/template/heroic-features" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="7c1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Django MarkdownX: <a class="ae jd" href="https://pypi.org/project/django-markdownx/" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="c7d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">姜戈脆皮形式:<a class="ae jd" href="https://django-crispy-forms.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="aa18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lk">附言</em> <em class="lk">如果你想让我深入研究某些项目/话题，请在下面的评论中提出来，我会尽全力研究的。感谢阅读</em>🙂</p></div></div>    
</body>
</html>