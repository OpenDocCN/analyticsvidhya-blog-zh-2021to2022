<html>
<head>
<title>Virtual environments in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的虚拟环境</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/virtual-environments-in-python-ce52628d3052?source=collection_archive---------0-----------------------#2021-12-10">https://medium.com/analytics-vidhya/virtual-environments-in-python-ce52628d3052?source=collection_archive---------0-----------------------#2021-12-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="5d73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Python项目需要不同的包才能工作，或者需要相同的包，但版本不同。如果你的机器上有两个需要NumPy包的项目，但是有两个不同的版本就有问题了，因为你当然不能安装一个以上的版本。为了解决这个问题，让事情更干净，有虚拟环境。</p><p id="aa7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你认为它对你有用，看看这个故事:</p><div class="jc jd ez fb je jf"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/writing-in-python-on-vs-code-f37d2a48deb"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">用python编写VS代码</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">嗨！让我们看看如何用Visual Studio代码开始用python编码。</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">medium.com</p></div></div><div class="jo l"><div class="jp l jq jr js jo jt ju jf"/></div></div></a></div><p id="f5f3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">想象一下，每个项目都有自己的python解释器和自己的包。它们基本上运行在不同的环境中，所以两个不同虚拟环境中的两个项目不会共享任何东西。那么如何做到这一点呢？</p><p id="66c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我目前的设置是使用python 3.9.9的macOS Monterey。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/aee3a85b43f347e00f956984caad13cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuwA484Ur2zNBXVd22-LWQ.png"/></div></div></figure><p id="9651" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我有了这个名为<code class="du kg kh ki kj b">virtual_environments</code>的空文件夹。这里我想为不同的东西创建几个项目。因此，首先我将为第一个项目创建一个新文件夹，姑且称之为<code class="du kg kh ki kj b">project_one</code>。在<code class="du kg kh ki kj b">project_one</code>中，如果我调用python3显然是指安装在我机器上的python 3解释器。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/1c86f6df58455379d9863aea16bd1bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EOsppDQtYqGqcUG8TiKsXw.png"/></div></div></figure><p id="6dbe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要创建新的虚拟环境，请运行命令:</p><pre class="jw jx jy jz fd kk kj kl km aw kn bi"><span id="1f80" class="ko kp hh kj b fi kq kr l ks kt">python3 -m venv venv</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/c3c57de2a7aeccd6c70a7e37731c9710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7wdUd72G-gjqu1v3GgDvvw.png"/></div></div></figure><p id="c15a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您要求python3的模块venv创建一个新的虚拟env，存储在文件夹<code class="du kg kh ki kj b">venv</code>中。正如你所看到的，一个文件夹<code class="du kg kh ki kj b">venv</code>已经被创建了，在里面<code class="du kg kh ki kj b">bin</code>也有这个环境的python解释器。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ku"><img src="../Images/8b53ccc27d251c483f18ab7782367fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWfIozbFVMB8jsqG5DR5uA.png"/></div></div></figure><p id="4732" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<code class="du kg kh ki kj b">bin</code>文件夹中也有一堆叫做activate的脚本，这取决于你使用的shell。在我的例子中，激活虚拟env(我们创建了它，但是我们还没有告诉进程使用它！)我只需用命令源运行脚本<code class="du kg kh ki kj b">activate</code>。</p><pre class="jw jx jy jz fd kk kj kl km aw kn bi"><span id="042e" class="ko kp hh kj b fi kq kr l ks kt">source venv/bin/activate</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ku"><img src="../Images/8b3cbe409357ee325fd722816fc1972b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWsntAlb8q32gKVj1hd8XQ.png"/></div></div></figure><p id="9393" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如你现在看到的，在用户面前有一个小的<code class="du kg kh ki kj b">(venv)</code>，通知我们正在虚拟环境中工作的事实。让我们试着测试一下。如果我跑了</p><pre class="jw jx jy jz fd kk kj kl km aw kn bi"><span id="543e" class="ko kp hh kj b fi kq kr l ks kt">pip3 install pandas numpy</span></pre><p id="8ace" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些包将被安装在虚拟环境中，事实上它们是:</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ku"><img src="../Images/8ff98417621599ad97a5f52149ead4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*awAJCN7MRdUzIWMS2TFHWw.png"/></div></div></figure><p id="3c8a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我可以检查包不会在虚拟环境之外。要退出虚拟环境，我必须运行命令<code class="du kg kh ki kj b">deactivate</code>:</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ku"><img src="../Images/6a39bc655d64a36cfc1d180dc34702c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u29iwRRVHz7hXaVQvGjMZw.png"/></div></div></figure><p id="940e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有用！现在，对于第二个项目，我只是做同样的事情，我将在那里添加我需要的包。</p><p id="f405" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后要提的是。假设我想与Bob分享我的项目。我也可以和他分享文件夹<code class="du kg kh ki kj b">venv</code>,但是因为它太大了(我的没有安装任何包的文件夹是13 MB ),所以效率不高。他可以自己做。问题是他必须知道他要安装什么包。为了解决这个问题，我可以创建一个名为<code class="du kg kh ki kj b">requirements.txt</code>(标准名称)的文件，并在其中写入所需包的列表:</p><pre class="jw jx jy jz fd kk kj kl km aw kn bi"><span id="049b" class="ko kp hh kj b fi kq kr l ks kt">pip3 freeze &gt; requirements.txt</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ku"><img src="../Images/647aa030557e94c4626bbe878d51f57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYW5LNKTLBGPxLlnjiZC3A.png"/></div></div></figure><p id="7d47" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如你现在在requirements.txt中看到的，有一个包的列表。现在Bob可以创建他的虚拟env，然后运行命令</p><pre class="jw jx jy jz fd kk kj kl km aw kn bi"><span id="87ee" class="ko kp hh kj b fi kq kr l ks kt">pip3 install -r requirements.txt</span></pre><p id="63a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该命令将自动查找文件并安装所需的软件包。非常有用，很好拥有。</p></div></div>    
</body>
</html>