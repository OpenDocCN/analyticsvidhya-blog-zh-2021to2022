<html>
<head>
<title>Search automation in Google Translate: download translations with Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌翻译中的搜索自动化:用Selenium下载翻译</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/search-automation-in-google-translate-download-translations-with-selenium-3a8c8e136b0e?source=collection_archive---------2-----------------------#2021-03-26">https://medium.com/analytics-vidhya/search-automation-in-google-translate-download-translations-with-selenium-3a8c8e136b0e?source=collection_archive---------2-----------------------#2021-03-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/5c6cfc480c84c1e184273e994e2d7065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-4BKXdiKdlAO3wki5pqAw.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">Sergey Isakhanyan 在<a class="ae it" href="https://unsplash.com/s/photos/sign-in-foreign-language?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>(亚美尼亚埃里温)拍摄的照片。从上到下:“罗斯托夫唐”市场——700万，斯捷潘纳克特——332公里，迪拜——1951公里)</figcaption></figure><p id="cab2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">链接到这篇文章<a class="ae it" href="https://fabriciusbr.medium.com/automatiza%C3%A7%C3%A3o-de-pesquisas-no-google-tradutor-download-de-tradu%C3%A7%C3%B5es-com-selenium-b9b860496d02" rel="noopener">葡萄牙语翻译在这里。</a></p><p id="c126" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">介绍</p><p id="d6d8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在我之前的一篇文章中，我开发了一个程序，可以自动打开谷歌翻译网站，将特定文本翻译成另一种语言。然而，给出的代码有一个很大的局限性，因为没有复制翻译结果以便以后使用这些数据的功能。</p><p id="f5cd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们将通过使用Selenium库来添加这样的资源，Selenium库是web抓取和自动化测试的最佳可用库之一。在我们开始分析我们的代码之前，有一点很重要:要使用这样一个库，除了惯用的命令<em class="js"> pip install selenium </em>之外，还需要将geckodriver文件下载到本地机器上。该文件应该与您的Chrome浏览器版本相对应，并且来自您的计算机使用的同一操作系统(Linux、Windows或macOS)。有关这些程序的更多详细信息，请参考官方文档的以下页面:</p><p id="1012" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://selenium-python.readthedocs.io/installation.html" rel="noopener ugc nofollow" target="_blank">https://selenium-python.readthedocs.io/installation.html</a></p><p id="39eb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对Windows用户来说，另一个重要的细节是:你不应该运行chromedriver.exe文件(它是Chrome / Windows设置的geckodriver名称)。你应该把它保存在你的机器里，就这样。例如，我的geckodriver放在我的Windows 10分区桌面上。这种错误比较常见，这也是我在这里提到它的原因。我自己已经深受这个问题的困扰。请记住您保存geckodriver文件的位置，因为您将需要在后面的代码中重现它的绝对路径。</p><p id="f729" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">首次代码修改</p><p id="0530" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">下面，我将展示与我上一篇文章中相同的程序部分，以及我们现在需要的额外的导入语句。还需要强调的是，从现在开始，旧的open_google_trans()函数将被称为search_google_trans()。如果您已经阅读了另一篇文章，请跳过这段代码复制，继续前进。</p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="d884" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们将使用Selenium打开Google Translate格式化的URL，它保存在link变量中。所以，我们需要创建一个Chrome浏览器实例，并在这个实例上调用get()方法。我们还会要求程序暂停15秒钟。下面的代码行就是这样做的。请记住使用保存在您机器中的geckodriver文件路径来更改executable_path参数值。</p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="98f2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该程序将打开谷歌翻译网站，显示原文和相应的翻译成选定的语言。</p><p id="48d6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们将在页面上找到copy translation按钮，并使用Selenium单击它，以便将翻译复制到剪贴板(也安装下面的库:<em class="js"> pip install pyperclip </em>)。接下来，我们将把这个翻译粘贴到一个变量中，并将这个变量值保存到一个. txt输出文件中。所有这些步骤都由下面的代码执行:</p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="a9e9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">尽管我的整个程序在测试期间运行顺利，但在使用Selenium时编写错误处理代码总是一个好主意，因为在运行web抓取时可能会频繁出现问题。在这种情况下，亲爱的读者，如果你认为有必要的话，我把做出这种改进的挑战留给你。</p><p id="ae58" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">创建两个辅助功能</p><p id="490c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">可以通过隔离一些可能构成独立函数的部分来改进search_google_trans()函数代码。在这里，两个代码部分是突出的潜在候选部分:一方面是输入类型检查，另一方面是生成输出文件并将其保存在正确文件夹中的过程。</p><p id="9ed6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">因此，我们将创建函数check_input_type()和save_output_as_txt()，然后在search_google_trans()函数中调用它们。此外，search_google_trans()参数序列将被更改，以方便将来的功能实现，同时还会添加一些新参数，以便我们以后使用。这种代码更改摘录如下:</p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="1753" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">翻译超过5K个字符的文本</p><p id="55ec" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们将转到代码实现部分，它自动翻译超过5千个字符的. txt文本，这可能对一些用户是一个有用的资源。为了做到这一点，我们需要创建一个系统来将文本分成更小的单元，然后调用search_google_translate()函数来翻译这些文本块。因此，我们在下面给出了函数translate_any_text:</p><figure class="jt ju jv jw fd ii"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="6a12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在下面的链接中，你会找到完整的网络抓取代码。我不知道你，但我花了相当多的时间看日语和韩语的最终翻译，被这些语言的美丽所震惊。也许有一天我会有勇气学一点。谁知道呢！</p><p id="5de7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://gist.github.com/fabricius1/fcf4e630938fd4d790a9bbacb75fb6f3" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fabric ius 1/fcf4e 630938 FD 4d 790 a9 bbacb 75 FB 6 f 3</a></p><p id="4394" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">非常感谢您阅读我的文章。</p><p id="bda2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">快乐编码</em>！</p><p id="5957" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">附注:你会在LinkedIn、Medium和Github上找到更多关于我工作的信息:</p><p id="8555" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">https://www.linkedin.com/in/fabriciobrasil<a class="ae it" href="https://www.linkedin.com/in/fabriciobrasil/" rel="noopener ugc nofollow" target="_blank"/></p><p id="bb7c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">【https://fabriciusbr.medium.com/ T4】</p><p id="2a9c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://github.com/fabricius1" rel="noopener ugc nofollow" target="_blank">https://github.com/fabricius1</a></p></div></div>    
</body>
</html>