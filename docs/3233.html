<html>
<head>
<title>Unsupervised flood detection with Sentinel 2 satellite imagery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用Sentinel 2卫星图像进行无监督洪水探测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/unsupervised-flood-detection-with-sentinel-2-satellite-imagery-7a254dc2be2e?source=collection_archive---------6-----------------------#2021-06-20">https://medium.com/analytics-vidhya/unsupervised-flood-detection-with-sentinel-2-satellite-imagery-7a254dc2be2e?source=collection_archive---------6-----------------------#2021-06-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="3c24" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用Python使用Sentinel 2卫星影像检测景观变化的快速入门。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/1bb84efacaa285196f1f3de8de1c2488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHc579LlgnG57CTfU5XFYQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">2020年12月24日剑桥圣艾夫斯(左)，2021年2月27日(右)</figcaption></figure><blockquote class="jm jn jo"><p id="6c21" class="jp jq jr js b jt ju ii jv jw jx il jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">SENTINEL-2是一项欧洲宽测绘带、高分辨率、多光谱成像任务。在同一轨道上飞行但相位相差180°的两颗卫星的完整任务规范旨在给出赤道上5天的高重访频率。SENTINEL-2携带一个光学仪器有效载荷，对13个光谱带进行采样:4个10米波段、6个20米波段和3个60米空间分辨率波段。轨道条带宽度为290公里。”</p></blockquote><p id="95f3" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">任何感兴趣的人都可以获得高频率和高分辨率的卫星图像。随着创新的步伐带来更快更清晰的图像，有一些有意义的新问题可以从一个新的角度来解决或处理:从高处。</p><p id="b58b" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">泛滥就是这样一个问题，今天可以对其进行监控，我们试图用几行python代码来证明这一点！</p><h2 id="fc8f" class="kq kr hh bd ks kt ku kv kw kx ky kz la kn lb lc ld ko le lf lg kp lh li lj lk bi translated">1.在哪里？</h2><p id="ba0c" class="pw-post-body-paragraph jp jq hh js b jt ll ii jv jw lm il jy kn ln kb kc ko lo kf kg kp lp kj kk kl ha bi translated">首先，我们应该决定我们想看哪里。我选择了离剑桥不远的英国洪水易发区。</p><p id="15e5" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">我们可以创建一个地理数据框架，根据相关的纬度和经度坐标来表示所选的位置边界。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="c97c" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">让我们用叶子来观想和检查我们的边界。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ls"><img src="../Images/57b543c17b3b1325b302de10b7496058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O0mNZ0D9MJglPgrhLuCXDw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">位置边界从我们的纬度和经度坐标。</figcaption></figure></div><div class="ab cl lt lu go lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ha hb hc hd he"><h2 id="0ea4" class="kq kr hh bd ks kt ku kv kw kx ky kz la kn lb lc ld ko le lf lg kp lh li lj lk bi translated">2.访问数据</h2><p id="ae08" class="pw-post-body-paragraph jp jq hh js b jt ll ii jv jw lm il jy kn ln kb kc ko lo kf kg kp lp kj kk kl ha bi translated">我们将利用<a class="ae km" href="https://sentinelsat.readthedocs.io/en/master/index.html" rel="noopener ugc nofollow" target="_blank"> Sentinelsat </a>，一个查询哨兵任务数据的python库。首先我们需要注册一个用户名+密码，然后当然<em class="jr"> pip安装sentinelsat。</em></p><p id="6994" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">这个图书馆连接到哥白尼开放存取中心，在那里图像被存档。我们提供多边形并搜索与该区域重叠的卫星图像。然后，我们还过滤我们的结果，以搜索包含100%我们定义的边界的图像。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="1f72" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">我们可以检查卫星图像的边界，看看它们是否与我们定义的边界完全重叠，再次使用follow。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ma"><img src="../Images/86805004047598efd622c896392c53a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eVYdwqPb3WvwVyadNlrLkw.gif"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">哨兵图像边界覆盖</figcaption></figure><p id="42f6" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">在上面的代码中，我们通过日期、云覆盖和区域缩小了搜索范围，但是API提供了一些我们可能感兴趣的其他指标。</p><p id="7520" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">我们可以通过API查询各种返回图像的景观构成。虽然下面的分类并不完美，但我们可以看到，随着时间的推移，观察到的景观发生了重大变化。例如，2020年12月24日的未分类地形比例最大。我们将比较这一天的卫星图像和两个月后的2021年2月27日的图像，看看有什么变化。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb lr l"/></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">特定区域景观构成随时间的变化</figcaption></figure><p id="1b7a" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">让我们下载选定的图像，并裁剪它们以适应我们定义的区域。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="2172" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">您可能还希望对图像应用一些进一步的裁剪和旋转，因为它们可能会倾斜。我对stackoverflow用户aaronnoswell提供的一大组函数做了轻微的修改，以实现没有黑边的拉直图像，<a class="ae km" href="https://stackoverflow.com/questions/16702966/rotate-image-and-crop-out-black-borders" rel="noopener ugc nofollow" target="_blank">见线程</a>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="436a" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">所以我们已经定义了一个我们想要卫星图像的区域，并且相隔两个月下载了两张图像。让我们看看发生了什么，为什么地形成分会有明显的变化。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/1bb84efacaa285196f1f3de8de1c2488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHc579LlgnG57CTfU5XFYQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">我们在2020年12月24日(左)和2021年2月27日(右)划定的区域</figcaption></figure><p id="d062" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">我们可以清楚地看到，2020年12月24日发生了一次大洪水。让我们看看是否可以通过隔离图像中发生变化的区域来使其更加清晰。</p></div><div class="ab cl lt lu go lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ha hb hc hd he"><h2 id="3a1e" class="kq kr hh bd ks kt ku kv kw kx ky kz la kn lb lc ld ko le lf lg kp lh li lj lk bi translated">3.基于PCA和K-Means的无监督变化检测</h2><p id="7aa0" class="pw-post-body-paragraph jp jq hh js b jt ll ii jv jw lm il jy kn ln kb kc ko lo kf kg kp lp kj kk kl ha bi translated">图像基本上是包含像素的数据集。像素包含RGB颜色信息，垂直和水平组合像素给我们图像。这个信息可以用一个向量来表示，在我们的例子中，我们有两个形状向量(高度、宽度、RGB)的图像，其中高度= 670，宽度= 875，RGB = 3。</p><p id="7f63" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">如果我们的图像大小相同，我们可以通过计算每个对应像素之间的差异来创建一个新的矢量。如果我们的图像是正确对齐的，像素将是相似的，RBG值应该接近(0，0，0)，当可视化时显示为黑色。如果没有，我们会在出现差异的地方看到一个彩色的高亮显示。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mc"><img src="../Images/d73e0ce1fb150f20203c02228492f11f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5HBJUUQcRSAbuHGSlmO_A.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">差异图像，最暗的部分是最相似的，反之亦然。</figcaption></figure><p id="2c06" class="pw-post-body-paragraph jp jq hh js b jt ju ii jv jw jx il jy kn ka kb kc ko ke kf kg kp ki kj kk kl ha bi translated">这是一个开始，但还可以更清楚。下一步是使用PCA &amp; K-Means来产生两幅图像之间的显著变化的二元分类。我认为下面这篇文章很好地实现了这种变化检测。</p><div class="md me ez fb mf mg"><a href="https://appliedmachinelearning.blog/2017/11/25/unsupervised-changed-detection-in-multi-temporal-satellite-images-using-pca-k-means-python-code/" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab dw"><div class="mi ab mj cl cj mk"><h2 class="bd hi fi z dy ml ea eb mm ed ef hg bi translated">使用PCA和K-Means的多时相卫星图像的无监督变化检测:Python代码…</h2><div class="mn l"><h3 class="bd b fi z dy ml ea eb mm ed ef dx translated">自动检测一个区域在不同时间获得的图像中的变化是一个非常有趣的课题</h3></div><div class="mo l"><p class="bd b fp z dy ml ea eb mm ed ef dx translated">appliedmachinehlearning . blog</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu jg mg"/></div></div></a></div><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mv"><img src="../Images/2dbc9c9910a2c7575a46c8c31be45638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHOe83Xb8zqGm-bm01KERg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">无监督图像变化分类，白色区域属于“变化”类。</figcaption></figure><blockquote class="mw"><p id="2440" class="mx my hh bd mz na nb nc nd ne nf kl dx translated">现在，如果我们叠加我们的源图像和它们的差异来检查我们已经分类的内容，看起来我们做得很好！</p></blockquote><figure class="ng nh ni nj nk jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ma"><img src="../Images/40bc2fdc96a1d9865455ab27e962f15b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wM-5c2E58IIpoqKbCUd7Dg.gif"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx translated">叠加我们的两张卫星图像和它们的聚类差异图像</figcaption></figure></div></div>    
</body>
</html>