<html>
<head>
<title>How I’m using Machine Learning to Trade in the Stock Market</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何使用机器学习在股票市场交易</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-im-using-machine-learning-to-trade-in-the-stock-market-3ba981a2ffc2?source=collection_archive---------0-----------------------#2022-02-09">https://medium.com/analytics-vidhya/how-im-using-machine-learning-to-trade-in-the-stock-market-3ba981a2ffc2?source=collection_archive---------0-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/452d9192d8e9f2a483ce7dcd09889a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_Ly7a-tpirW7EAOojg9Tg.jpeg"/></div></div></figure><p id="e245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">免责声明:这篇文章是关于我用来创建交易机器人的一个简单策略。虽然回溯测试显示交易机器人是盈利的，但交易机器人没有能力处理“黑天鹅”事件，如市场崩溃。此外，我不是财务顾问，也不是专业交易者。我分享这个只是为了娱乐。所以交易&amp;阅读风险自担。</p><p id="9dba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jp translated">T2在我大学四年级的时候，一个朋友第一次介绍我进入股市。我记得我买了一只优步<em class="jo">(不是最聪明的事情)</em>推荐的股票，在几个小时内获得了100%的回报。这笔交易太难忘了，我至今还记得这只股票。股票代码是AETI <em class="jo">。显然这是新手的运气，因为我不知道自己在做什么。从那以后，我在金融市场上投入了大量的时间和金钱，也分享了一些收益和损失。虽然，我已经取得了一定的成功，但我最近发现，如果不是因为我的情绪，我可能会更成功。</em></p><p id="5fe8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">自从有了这个发现，我就一直在寻找在投资和交易过程中缓解情绪的方法。我意识到消除情绪的最好方法是创造一个交易机器人。在研究了几种算法交易策略后，我决定利用一个基本的机器学习模型，逻辑回归<em class="jo"> (LR) </em>，提出自己的模型。</p><p id="6891" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">制定战略..</strong></p><p id="7ed0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">股市最根本的策略就是低买高卖。现在，如果你已经投资或交易了很长时间，你会知道这并不像听起来那么简单。所以，我想创建一个模型，尽可能准确地预测股票的低点和高点。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/36bbbd933e86e8f2779a59b1a6170a8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6IaCUrftXg9-d2kv99tWg.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图1: </strong>苹果<em class="ki">(股票代码AAPL)2018年至2021年的股价走势。绿点是局部最小值(低点)，红点是局部最大值(高点)</em></figcaption></figure><p id="17c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在图1中，你可以看到苹果从2018年到2021年的每日股价走势。绿点是局部最小值，红点是局部最大值。所以我打算使用ML来预测一个数据点是绿点<em class="jo">(类别0) </em>还是红点<em class="jo">(类别1)。</em>我们的目标是，如果模型预测到一个绿点，就买入，当股价上涨一定百分比时卖出。</p><p id="733e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是我的策略<br/>的四个步骤——用ML模型预测某一天买入股票是否有利。<br/>——如果有利<em class="jo">(绿点)</em>买入股票。一旦股票上涨到一定的百分比，卖出股票以获得收益。如果股票下跌了一定的百分比，卖掉股票以减少损失。</p><p id="97f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其他一些细节<br/> -算法一次只持有一只股票<em class="jo">(这样做是为了保持一切简单)<br/> - </em>卖出百分比是模型的两个超参数，我们可以选择它们来实现收益最大化。<br/> -如果你想知道，“如果数据点既不是局部最大值也不是局部最小值，该怎么办？”等等，我们以后再谈这个。</p><p id="c2b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">ML模型</strong></p><p id="cef3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如上所述，我使用的机器学习模型是逻辑回归<em class="jo"> (LR)。</em>如果不熟悉LR，可以点击这里<a class="ae kj" href="https://github.com/kaneelgit/ML-DL-Algorithms/blob/main/Logistic%20Regression%20from%20Scratch.ipynb" rel="noopener ugc nofollow" target="_blank">查看我的教程笔记本。</a></p><p id="b6b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们的问题是一个有两个目标输出的二元分类问题。即，局部最小值<em class="jo">(类别0，“绿点”)</em>和局部最大值<em class="jo">(类别1，“红点”)。</em>接下来，我们必须确定模型的输入。一个非常简单的想法是使用股票价格&amp;成交量作为LR模型的输入，并预测它是局部最小值还是局部最大值。然而，对于预测像股票方向这样复杂的事情来说，股价和成交量是非常少的信息。因此，我在我的模型中额外加入了另外四个输入参数。</p><ul class=""><li id="272a" class="kk kl hi is b it iu ix iy jb km jf kn jj ko jn kp kq kr ks bi translated">标准化股票价格——我没有使用股票价格，而是使用标准化股票价格作为第一个输入参数。股票的价格行为通常可以用图2中的烛台来表示。烛台代表当天的最高股价(高)、最低股价(低)、开盘价(开)和收盘价(闭)(如果我们考虑如图1所示的日线图)。为了使它更容易，我创建了一个介于0和1之间的值来表示所有这四个值。这个值是通过等式1计算的。如果结果值接近1，这意味着股票已经在当天的高点附近收盘，而如果归一化值接近0，这意味着股票已经在当天的低点附近收盘。使用这样一个值的优点是，与使用一个单独的值(如当天的收盘价或平均值)相比，它包含了全天的价格行为信息。此外，该值对<a class="ae kj" href="https://en.wikipedia.org/wiki/Stock_split" rel="noopener ugc nofollow" target="_blank">股票分割</a>不敏感。</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/0da508464605c8a2e65c4c0c63e460cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*EeIdzaCOAYph6d1QA4orkQ.png"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">等式1: </strong>归一化值计算</figcaption></figure><ul class=""><li id="c5e0" class="kk kl hi is b it iu ix iy jb km jf kn jj ko jn kp kq kr ks bi translated">成交量——模型中使用的第二个参数是股票的日成交量。该参数表示某一天的股票交易量(包括买入和卖出)。</li><li id="5b27" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">3天回归系数-下一个参数是3天回归系数。这是通过对过去三天的收盘价进行线性回归计算出来的。这代表了股票在过去三天的走向。</li><li id="1428" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">5天回归系数——与3天回归系数类似的参数。我用了五天，而不是三天。</li><li id="7cec" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">10天回归系数—同上，但使用10天回归。这个值代表过去十天股价的方向。</li><li id="43d7" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">20天回归系数—同上，但使用了20天回归。</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/5264bb94d0e0215a34cb69fce8513bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*OMsY8j4udl-g7r1YpjwYcw.png"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图2: </strong>一只股票分笔成交点的开盘价、收盘价、最高价和最低价。来源【https://analyzingalpha.com/open-high-low-close-stocks】——<a class="ae kj" href="https://analyzingalpha.com/open-high-low-close-stocks" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="71f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">训练和验证模型</strong></p><p id="5e81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在定义了我的模型之后，我使用<a class="ae kj" href="https://developer.tdameritrade.com/apis" rel="noopener ugc nofollow" target="_blank"> TD Ameritrade API </a>收集历史数据来训练模型。用来创建数据集的股票是道琼斯30指数的30家公司和标准普尔500指数的20家其他知名公司。培训和验证数据跨度为2007年至2020年<em class="jo">(含)</em>。测试数据来自2021年。</p><p id="2801" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了准备训练和验证数据，我首先找到代表买点<em class="jo">(类别0或图1中的绿点)</em>或卖点<em class="jo">(类别1) </em>的数据点。这是通过一种被创建来搜索局部最小和最大点的算法来完成的。选取数据点后，收集成交量数据，计算归一化价格值&amp;回归参数。图3显示了一个输入数据示例。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/a6722cf73ac877bb48285d3e7642105e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqafvwhvO_7owgIiU-GQtw.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图3: </strong>体积，归一化值，3_reg，5_reg，10_reg，20_reg为输入参数，目标为输出。如果target为0，则该行表示来自购买点的数据(本地最小值)，如果该行表示1，则该行表示销售点(本地最大值)。</figcaption></figure><p id="3101" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">准备好数据后，我使用scikit-learn包将数据分成训练和验证集，并训练LR模型。LR模型使用输入参数并预测目标值。</p><p id="0ab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">验证结果及分析</strong></p><p id="9ee5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">验证集包含507个数据样本。完全训练的LR模型能够以88.5%的准确度预测验证数据。</p><p id="0413" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个模型的准确性起初似乎很有说服力。让我们来看看这个模型在2021年对一只股票的表现。为了做到这一点，我选择了高盛(股票代码GS)的数据，并使用训练好的LR模型预测股票每天的方向。结果如图4所示。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/5b9b823341164a0c94caa91f50bed134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Enhp6QJ6nVm5XQjcuL7tSQ.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图4: </strong>股票代码GS的测试结果。绿点代表买点，红点代表我们模型预测的卖点。</figcaption></figure><p id="b7f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您查看图4时，您会看到该模型预测了许多假阳性<em class="jo">(阳性是购买点)</em>。虽然它似乎能正确预测几乎所有的局部最小值，但它错误地预测了买点。如果你记得在训练阶段，我只使用局部最大值和局部最小值来训练模型。所以中间数据点上的模型预测非常弱。</p><p id="a53c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这可能是一个代价高昂的投资错误。毕竟高买低卖不是我们的本意😬。那么，我们该如何解决这个问题，更有把握地选择买点呢？让我们回到验证结果，看看我们是否能找到一种方法来增加我们购买点的确定性。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/97e9bc455c4a10ea1c3e12c96e14a5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*SPRHtOiSwfOZgyvKsAmk6Q.jpeg"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图5: </strong>验证数据集结果的混淆矩阵</figcaption></figure><p id="cdcd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在图5中，您可以看到验证结果的混淆矩阵。我们的模型在类别0 <em class="jo">(买点/本地最小值)</em>中预测了29个实例，而它实际上是类别1 <em class="jo">(卖点/本地最大值)。</em>这些是误正值<em class="jo">(误将阴性识别为阳性。还要记住，在我们的案例中，积极因素是购买点)。</em>如果我们回忆一下这个策略，我的模型的目标是使用ML模型寻找购买点。因此，我们可以尝试减少这些误报，并确保模型以高确定性预测买点。我们可以通过改变LR模型的阈值来做到这一点。</p><blockquote class="ld le lf"><p id="e49d" class="iq ir jo is b it iu iv iw ix iy iz ja lg jc jd je lh jg jh ji li jk jl jm jn hb bi translated">在逻辑回归二元分类中，默认阈值为0.5。这意味着如果模型预测概率大于0.5，则该数据样本将属于类别1，而如果模型预测概率小于0.5，则该数据点将属于类别0。我们可以改变这个阈值来增加某个类别的模型预测的置信度。例如，如果我们将此阈值更改为0.1，则只有小于0.1的预测将被选为购买点(类别0)。这减少了错误购买点的数量，因为模型只选择接近0的样本。</p></blockquote><p id="ca66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以为了确保我的模型能更准确地预测买点。我把我的模型的阈值改为0.03。<em class="jo">(注意这只是一个例子。我们可以稍后尝试改变阈值来调整模型以良好地执行)。</em>您现在可以在图6中看到新的混淆矩阵。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/4d36c88269a4fe8c617e6a2efdb6e505.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*JWfGpkEqSmFWXpo-IQHYMg.jpeg"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图6: </strong>阈值改为0.01后的混淆矩阵。</figcaption></figure><p id="e3f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，现在误报的数量为零。然而，这样做的缺点是，模型错过了许多真正的正值。在我们的例子中，模型只识别了五个买点，而没有识别出许多其他的买点。</p><p id="ef81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们使用新的门槛，重新规划2021年高盛股票的买入点。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/28dd7cc4482a8534c101b59efdc3eb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2rdETRDZHCg4NqnIaXDWDA.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图7: </strong>使用阈值0.03后GS股票的买入机会</figcaption></figure><p id="011f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如您在图7中看到的，现在该模型更加确定地预测了购买机会。然而，它也错过了几次买入机会。这是我们为了高确定性购买而不得不做出的牺牲。</p><p id="526a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">回测&amp;结果</strong></p><p id="7733" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我用2021年的股市数据对我的策略进行了回溯测试。我创建了一个股票模拟器和一个回溯测试脚本，使用LR模型和一个给定的阈值(t)每天扫描道琼斯30指数的买入机会。如果有可用的股票，模拟器然后购买股票并持有股票，直到它达到某个百分比的收益(g)、某个百分比的损失(l)或在某个天数后卖出(d)。最终回测模拟有四个参数(t，g，l，d ),目标是利润最大化。</p><p id="dec7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我还通过改变这些参数创建了四种投资者类型。“不耐烦的交易者”、“温和的持有者”、“耐心的摇摆交易者”和“猿”。</p><ul class=""><li id="7bb4" class="kk kl hi is b it iu ix iy jb km jf kn jj ko jn kp kq kr ks bi translated">不耐烦的交易者——这种交易者在很短的时间内买入并持有股票。交易者也寻找小收益。这个交易者也害怕亏损，所以如果股票下跌一点点，他就会亏本卖出。最后，这个交易者选择高门槛的股票，以便在他们脱手当前股票后迅速找到另一只股票。所以，这种交易者的参数是t = 0.3，g = 0.005，l = 0.001，d = 3。</li><li id="c247" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">适度持有人——这种类型的交易者在适度的时间内购买并持有股票。交易者正在寻找具有高置信度的股票，因此阈值往往较低。与不耐烦的交易者相比，交易者也寻求更高的收益，对损失有更高的容忍度。对于这种类型的交易者，参数是t = 0.1，g = 0.03，l = 0.03，d = 10。</li><li id="36dd" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">耐心的摇摆交易者——正如“摇摆”这个词所暗示的，这种类型的交易者倾向于长期持有股票。此外，交易者喜欢选择成功概率高的股票。所以这类交易者门槛很低。此外，这位交易者相信卖出股票以减少损失，然后转向不同的股票。这类交易者的参数是t = 0.05，g = 0.04，l = 0.003，d = 21。</li><li id="6497" class="kk kl hi is b it ku ix kv jb kw jf kx jj ky jn kp kq kr ks bi translated">猿类——猿类是股票市场上新出现的交易者。他们倾向于不理性地选择股票。所以他们不使用任何策略来选择股票。这些类型的投资者随机挑选股票，并在他们喜欢的时候随机卖出。</li></ul><p id="c53a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们进行回溯测试，看看这四个投资者的表现如何。这些模拟基于2021年的数据，每个投资者都有3000美元作为他们的初始余额。每种投资者类型的表现在2021年底进行衡量。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/149e856ee8fb79740ddcd50eb9732a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NolLe5zVigJTGSKcy1E5Xg.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图8:</strong>2021年投资总值。每种投资者类型的初始余额为3000美元。</figcaption></figure><p id="2d5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图8显示了四个投资者的表现结果。“耐心的摇摆交易者”在2021年底获得了47.77%的收益，获得了最大的利润，其次是不耐烦的交易者，获得了30.41%的收益。正如预期的那样，非理性交易者“猿”的收益最低，为13.72%。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/cb7118411552950e344bc5caacf3b155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w1jdiUHlT_9v61R8Lomu3g.jpeg"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图9: </strong>“耐心的摇摆交易者”(上图)和“不耐烦的交易者”(下图)的盈亏棒图</figcaption></figure><p id="45b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图9显示了“耐心的摇摆交易者”和“不耐烦的交易者”的盈亏柱状图。正如预期的那样，耐心的交易者做了少量交易，并尽快止损。不耐烦的交易者进行了大量交易，经常遭受损失。这也可以从表1中看出。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/aab5c1aa5ef5985e318907345563b812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TGaUtjcuchrxFUCKRpFS_A.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">表1: </strong>各投资者类型汇总</figcaption></figure><p id="eded" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些结果表明，当使用LR模型时，购买高信心股票并持有更长时间比频繁购买信心较低的股票更有利。然而，我们也应该注意到，在2021年，股票市场出现了一些大幅上涨，这些结果可能是一个结果。显然，即使是非理性投资者“猿”，也取得了13.72%的回报，这表明市场在2021年已经很慷慨了。</p><p id="9575" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">与S &amp; P 500 </strong>的比较</p><p id="3bd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我将我的前两个投资者模型的表现与2021年S&amp;P的表现进行了比较。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/ffdafc7a26886c0795413cd80a57ca04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjoDR8c7fDGqMKXyRIbfpw.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated"><strong class="bd kh">图10: </strong>两个模型(不耐烦的投资者&amp;耐心的摇摆交易者)到2021年投资3000美元到S &amp; P 500的比较。</figcaption></figure><p id="c9f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图10显示了一月份向标准普尔500投资3000美元时的表现。结果显示，投资增长了26.9%。与“耐心的摇摆交易者”47.77%的回报率和“不耐烦的交易者”30.41%的回报率相比，这是很低的。此外，“耐心的摇摆交易者”超过了苹果<em class="jo">(股票代码AAPL) </em>的35%回报率，并在2021年与微软<em class="jo">(股票代码MSFT) </em>的49%回报率相抗衡。</p><p id="f11a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">其他想法和未来工作</strong></p><p id="0f95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们当前的回溯测试模拟中，我们只是在算法一次交易一只有利股票时测试我们策略的性能。该算法扫描道琼斯30指数中的所有股票，并从中推荐最好的股票。然而，在现实世界中，我们可以将我们持有的股票数量转换成多只有利的股票。这可能会改变我们回溯测试模拟的性能，并有可能将回报更改为更高的值。</p><p id="d98d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">优化我们的模型性能的另一种可能的方法是通过训练LR模型来预测买点、卖点和中性点<em class="jo">(局部最大值和最小值之间的点)</em>。这样，我们可以更加确定地预测购买点，减少我们当前版本中错过的购买机会。这是因为这种类型的模型能够预测中性点，现在这些中性点不太可能被确定为买点。</p><p id="487e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，我们可以引入更多的输入变量，如30天回归系数、市场资本、市盈率，以增加模型的可预测性。我们还可以利用lasso正则化来消除对预测不重要的输入变量，并对重要的变量进行加权。此外，我们还可以测试其他ML模型，如支持向量机和随机森林，看看性能如何变化。最后，我们还可以使用深度学习技术，如LSTM以前在金融预测中使用的技术。</p><p id="6947" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结论</strong></p><p id="1734" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博文中，我描述了我如何使用一个简单的ML模型，逻辑回归，在股票市场交易。该策略的回测结果看起来很有希望，2021年的最大回报率为47.77%，超过了标准普尔500。虽然回溯测试结果显示该模型是有利可图的，但必须进行实时测试，以实际验证该策略的盈利能力。目前，我正在运行一个混合交易机器人<em class="jo">(因为这个模型是用真实的钱实时运行的，所以我确保我可以在任何时候介入这个机器人，并轻松完成订单。因此，在我的<a class="ae kj" href="https://interactivebrokers.com/en/home.php" rel="noopener ugc nofollow" target="_blank">互动经纪人账户</a>中，我使用了“混合”这个词</em>。虽然，该模型似乎如预期的那样工作，但现在推测还为时过早。我希望一旦我能够运行它一段相当长的时间，就可以公布结果。</p><p id="647c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">非常感谢您的阅读！如果你有任何问题或意见，请告诉我。</p><p id="2b83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">页（page的缩写）S — <br/>我目前正在制作一个GitHub库，其中包含从TD中提取数据并进行回溯测试的代码。一旦我把链接<a class="ae kj" href="https://github.com/kaneelgit/Trading-strategy-" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">上传到GitHub，我会把它贴在这里</strong> </a>。</p><p id="d9a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关注我的<a class="ae kj" href="https://twitter.com/kaneel_s" rel="noopener ugc nofollow" target="_blank"> <em class="jo">推特</em> </a></p></div></div>    
</body>
</html>