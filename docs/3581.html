<html>
<head>
<title>Creating Waffle Charts in Tableau</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Tableau中创建华夫饼图表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-waffle-charts-in-tableau-a6a8f9e31898?source=collection_archive---------3-----------------------#2021-07-11">https://medium.com/analytics-vidhya/creating-waffle-charts-in-tableau-a6a8f9e31898?source=collection_archive---------3-----------------------#2021-07-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/0494bcf584e3f977d9275bd5beaac706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lNnSKc3CXl0z7ruXTXeMA.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">好吃！！</figcaption></figure><div class=""/><div class=""><h2 id="3f5e" class="pw-subtitle-paragraph it hv hw bd b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk dx translated">我真诚地说，事实上，我不是在胡扯。</h2></div><p id="e259" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">你好。本教程试图带领读者通过使用足球数据在tableau中创建华夫饼图表的过程中的每一步。如果你熟悉体育分析领域，你可能会经常看到这些。</p><p id="4202" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">它是做什么的？</p><p id="880f" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">华夫格图以%的形式显示完成百分比或整体的组成部分。它基本上是一个更漂亮的饼图，只是不那么杂乱。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es kh"><img src="../Images/1f0eb3df472715f731b749b974770d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/0*0ana8RcgtjBSR8oq.png"/></div></figure><p id="cde6" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在，你们中的一些人可能会问我，哈什，这看起来一点也不像华夫饼。更像是一个里面有小方块的大方块。以上帝的名义，为什么它被称为华夫饼图表？</p><p id="b034" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">嗯，是的，但也不是。事实证明，你每天都会学到新的东西，我今天学到的是方形华夫饼干是一种非常真实的东西。你可以认为这个名字有双重用途，它看起来有点像华夫饼，但在某些方面不是华夫饼。华夫格图的名字本身就是华夫格。</p><p id="a8c6" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">(好吧，我已经意识到我在浪费你的时间，所以我将直接进入教程)</p><p id="f129" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">让我们开始闲聊吧！！</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="2f42" class="kt ku hw bd kv kw kx ky kz la lb lc ld jc le jd lf jf lg jg lh ji li jj lj lk bi translated">获取数据</h1><p id="7f9b" class="pw-post-body-paragraph jl jm hw jn b jo ll ix jq jr lm ja jt ju ln jw jx jy lo ka kb kc lp ke kf kg ha bi translated">这个可视化的数据来自足球参考。在本教程中，我将使用德国德甲球队的<strong class="jn hx">目标创造行动(GCA) </strong>。你可以在<a class="ae lq" href="https://fbref.com/en/comps/20/Bundesliga-Stats" rel="noopener ugc nofollow" target="_blank">网站</a>找到数据集。</p><p id="5ca3" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">一旦在Excel中打开了数据，您就可以删除所有多余的和(对于本教程来说)不必要的数据。您的数据现在应该如下所示。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/51b807a739f1ed43091e39de9ba04d11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GFUZwTv5uzIu4Xtd.png"/></div></div></figure><p id="23ee" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">(注意:在保存之前，我已经将该工作表复制粘贴到一个新的工作表中，因为我没有以CSV格式提取数据。数据集以名为<strong class="jn hx">“德甲GCA 3.0”</strong>的excel工作簿的形式保存</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="75cd" class="kt ku hw bd kv kw kx ky kz la lb lc ld jc le jd lf jf lg jg lh ji li jj lj lk bi translated">Tableau数据准备</h1><p id="7d68" class="pw-post-body-paragraph jl jm hw jn b jo ll ix jq jr lm ja jt ju ln jw jx jy lo ka kb kc lp ke kf kg ha bi translated">打开Tableau并加载您的数据。你现在要做的是选择除了“小队”和“GCA”之外的所有列。如果您使用的是Windows，只需按住ctrl键并选择列即可。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/218e38fb87a6f30c88a403739c9502ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Hg15ab_wmIp2JA-V.png"/></div></div></figure><p id="2b1a" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">您将看到我已经右键单击并选择了<strong class="jn hx"> pivot </strong>选项。Tableau现在将为您提供制作华夫饼图表所需的透视字段。您的表现在将看起来像这样。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/bd22401f32e058e3af4875bb5c3671e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xihNmmR24T9ia6Im.png"/></div></div></figure><p id="0272" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">将“透视字段名称”重命名为“GCA类型”，将“透视字段值”重命名为“值”。</p><p id="7c8c" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">酷吗？酷毙了。现在打开工作表。现在，您想在同一工作表上打开一个新的数据源。您将要输入的新数据集是您的华夫饼图表的模板。点击下面的链接下载。</p><p id="65d8" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated"><a class="ae lq" href="https://docs.google.com/spreadsheets/d/e/2PACX-1vThwvmaCKGZy4OlhLNFwRYYL_3yMM-95h2M_zWVgFeL9h8WgGK-_I8gLimltuBnt-NRAQeQL4ol0ark/pub?output=ods" rel="noopener ugc nofollow" target="_blank">华夫饼模板</a></p><p id="dea2" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">您可以自己设置(很容易做到)，或者将这些值复制粘贴到一个新的Excel工作表中并保存。</p><p id="219e" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">好吧。将“行”和“列”转换为维度，并将它们拖放到各自的下拉框中。建议您右键单击“行”并按降序排序。将标记类型更改为“方形”,并从底部和右侧拖动到桌面上以放大标记。通过大小滑块调整正方形的大小。隐藏两个标题。你也应该点击“格式”下的“边框”,将“行分隔线”下的“窗格”改为“无”。总而言之，它应该是这样的。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/3254237b96004a3861b78a6e8bc52d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lntcI4V7DTdpelc_.png"/></div></div></figure></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="d3c1" class="kt ku hw bd kv kw kx ky kz la lb lc ld jc le jd lf jf lg jg lh ji li jj lj lk bi translated">计算字段</h1><p id="97fa" class="pw-post-body-paragraph jl jm hw jn b jo ll ix jq jr lm ja jt ju ln jw jx jy lo ka kb kc lp ke kf kg ha bi translated">点击原始数据源(德甲GCA 3.0)并开始创建计算字段。</p><p id="7e0f" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我已经将我的计算字段命名为GCA 1到6(总共6个字段)。</p><pre class="ki kj kk kl fd ls lt lu lv aw lw bi"><span id="b275" class="lx ku hw lt b fi ly lz l ma mb">SUM(IF [GCA Types] = "Pass Live" THEN [Values] END)</span><span id="3c66" class="lx ku hw lt b fi mc lz l ma mb">/ SUM([Values])</span></pre><p id="e059" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我们在这里所做的是创造我们可以利用的所有类别的价值比率。</p><p id="651e" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">以此为例，创建其他6个计算字段，除了引号内的部分之外，其他部分都保持不变，引号内的部分包括<strong class="jn hx">、【Sh】、【Def】、【Drib】、【Fld】、</strong>和<strong class="jn hx">、【空白】。</strong></p><p id="dffe" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">参考照片。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/622ee1b14bc28beefe9a604e3a401921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P0FxgQn3K3e20gUl.png"/></div></div></figure><p id="758f" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">太好了。现在切换到<strong class="jn hx">“华夫饼模板”</strong>数据集，并创建一个新的计算字段。我将这个字段命名为<strong class="jn hx">“Final”</strong>。把这个复制粘贴到那里。</p><pre class="ki kj kk kl fd ls lt lu lv aw lw bi"><span id="c5d5" class="lx ku hw lt b fi ly lz l ma mb">IF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] THEN "Pass Live"</span><span id="3d25" class="lx ku hw lt b fi mc lz l ma mb">ELSEIF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 2] THEN "Pass Dead"</span><span id="2090" class="lx ku hw lt b fi mc lz l ma mb">ELSEIF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 2] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 3] THEN "Sh"</span><span id="fc41" class="lx ku hw lt b fi mc lz l ma mb">ELSEIF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 2] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 3] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 4] THEN "Def"</span><span id="fd7b" class="lx ku hw lt b fi mc lz l ma mb">ELSEIF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 2] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 3] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 4] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 5] THEN "Drib"</span><span id="ad27" class="lx ku hw lt b fi mc lz l ma mb">ELSEIF AVG([Percentage]) &lt;= [Sheet1 (Bundesliga GCA 3.0)].[GCA 1] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 2] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 3] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 4] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 5] + [Sheet1 (Bundesliga GCA 3.0)].[GCA 6] THEN "Fld"</span><span id="ea89" class="lx ku hw lt b fi mc lz l ma mb">ELSE "Fld" END</span></pre><p id="3277" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在，拖动<strong class="jn hx">最终</strong>到“颜色”下的标记和拖动班底到过滤器。选择你喜欢的队伍，就是这样！！</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/9734d9dd2f715abd9e3397818acae6a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uD5ViNZ_rpGLjP0-.png"/></div></div></figure><p id="527a" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">根据你的喜好调整颜色和背景，你的华夫饼图表就可以用了。</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="414e" class="kt ku hw bd kv kw kx ky kz la lb lc ld jc le jd lf jf lg jg lh ji li jj lj lk bi translated">版本2.0</h1><p id="2405" class="pw-post-body-paragraph jl jm hw jn b jo ll ix jq jr lm ja jt ju ln jw jx jy lo ka kb kc lp ke kf kg ha bi translated">现在，这些图表很好地显示了每个类别的比例。但是，如果您想不成比例地显示数据呢？也许我没有尽我所能表达得更好，但我想说的是，如果你想展示顶级的GCA球队，那么你可能需要一个不同类型的图表。类似这样的。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/39cb9c1f61bcb8b81f7c3ab2091c5664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QMIkdDy4y1PxGJta.png"/></div></div></figure><p id="84ea" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">要做到这一点，您需要在这个过程的早期步骤中做一个小的修改。这使我们回到我们的Excel表。创建一个名为<strong class="jn hx"> Blanks的新列。</strong>在这一栏中，你需要计算最高的GCA——每一个其他队伍的GCA。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es md"><img src="../Images/ae37fd6118860c74a613a6193879e1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a9BRhP153Rwme3_5.png"/></div></div></figure><p id="0178" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我们看到拜仁慕尼黑的GCA是联赛最高的。因此，我们从中减去其他球队的总积分。</p><p id="587a" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">然后，我们执行之前所做的所有相同步骤，直到创建计算字段的部分，我们现在将创建一个额外的字段，即<strong class="jn hx"> "GCA 7" </strong>，它引用类别空白，使用我们之前使用的相同公式。</p><p id="6544" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">然后，在下一个公式中，我们添加另一行，具有相同的累积模式，一直到GCA 7，现在以</p><pre class="ki kj kk kl fd ls lt lu lv aw lw bi"><span id="5774" class="lx ku hw lt b fi ly lz l ma mb">ELSE “Blanks” END</span></pre><p id="f659" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">然后，我们编辑图表的颜色，使图例“空白”的颜色与背景相同，隐藏它，并使它完全空白。</p><p id="2a7b" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这就是全部。</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><p id="26ac" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated"><em class="me">本教程参考了“Recnac”编写的指南。你可以在这里找到</em><a class="ae lq" href="https://www.pluralsight.com/guides/tableau-playbook-waffle-chart" rel="noopener ugc nofollow" target="_blank"><em class="me"/></a><em class="me">。</em></p><p id="e0c8" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">感谢Swaminathan Nanda Kishore对我理解2.0版的帮助。</p></div></div>    
</body>
</html>