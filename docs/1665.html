<html>
<head>
<title>How to create a Chatbot in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python创建聊天机器人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-a-chatbot-in-python-7ab924f10125?source=collection_archive---------8-----------------------#2021-03-12">https://medium.com/analytics-vidhya/how-to-create-a-chatbot-in-python-7ab924f10125?source=collection_archive---------8-----------------------#2021-03-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="fdc6" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">快速指南</h2><div class=""/><div class=""><h2 id="521c" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">使用高效转换器开发基于自然语言处理的聊天机器人第1部分</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/f407f323bbf14efdd512c8c85602aba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YXfjrXS8Ru3d35o2obk77A.gif"/></div></div></figure><h1 id="9c70" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd iy ke ja kf jb kg jd kh je ki kj bi translated"><strong class="ak">简介</strong></h1><p id="6370" class="pw-post-body-paragraph kk kl hi km b kn ko is kp kq kr iv ks kt ku kv kw kx ky kz la lb lc ld le lf hb bi lg translated">帽子机器人，一个与人类或其他机器人互动的人造个体或人类。会话可以是基于文本的会话、口头或非口头的会话。可以通过桌面、手机或其他外围设备访问。从古老的基于HTML的网站到现代的电子商务以及食品订购网站，我们都可以看到这些系统。</p><h1 id="4c06" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd iy ke ja kf jb kg jd kh je ki kj bi translated">聊天机器人是如何工作的？</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lp"><img src="../Images/ed35f4b450d17d85782bdef76ec4f5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Bjd521QBIgvRxLlc.png"/></div></div></figure><p id="df6d" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">聊天机器人使用自然语言处理(NLP)和<strong class="km hs">高级机器学习(ML)算法</strong>从数据洞察中学习。NLP是计算机理解和处理人类语音，并以人类可以理解的语言做出反应的能力。这样，它使交互看起来像是两个人之间的交流。谈到聊天机器人中的自然语言处理，有两个过程:</p><p id="acf9" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><strong class="km hs">自然语言理解(NLU)——</strong>这使得机器人能够理解人类，将文本转换成机器可以理解的结构化数据。</p><p id="abd0" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><strong class="km hs">自然语言生成(NLG)——</strong>它将结构化数据转换成文本，使人类有可能理解对话。</p><h1 id="83fa" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd iy ke ja kf jb kg jd kh je ki kj bi translated">聊天机器人的优势</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es lv"><img src="../Images/d203d50196fe5e10585b255fcc060921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*yQ67WVh3Re8_pUWV.jpg"/></div></figure><p id="7c1e" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">聊天机器人对客户的主要优势如下:</p><ul class=""><li id="932c" class="lw lx hi km b kn lq kq lr kt ly kx lz lb ma lf mb mc md me bi translated"><strong class="km hs"> 24*7支持</strong> —您不能依赖支持代理提供24*7支持。即使在工作时间之后，团队不在时，随时响应也很重要。聊天机器人可以通过自动回复来管理这类客户查询。</li><li id="85ac" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated"><strong class="km hs">即时回答</strong> —客户不喜欢等待帮助，任何等待时间都可能导致失望和潜在的流失。聊天机器人是确保客户收到他们要求的即时响应的一种更聪明的方式。</li><li id="235c" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated"><strong class="km hs">无需人工帮助的订单</strong> —企业可以利用聊天机器人来自动预订订单和约会，这样客户就可以立即从网站或脸书页面预订。47%的消费者会从聊天机器人那里购买商品。</li></ul><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ml"><img src="../Images/a87913851e9c035412a6bfa5aad1170d.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/0*-juMZWJGrSfFw_LK.jpeg"/></div></figure><p id="3531" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">在本文中，我们将使用<strong class="km hs">转换器</strong>创建一个聊天机器人，也称为高效转换器，在两个机器人之间生成对话。您将向您的模型输入对话，它将学习如何理解每个对话的上下文。它不仅会学习如何回答问题，如果需要更多信息，它还会知道如何提问。例如，在顾客索要火车票后，聊天机器人可以询问该顾客想什么时候离开。我们可以使用这个概念来自动化呼叫中心、酒店前台、私人教练或任何类型的客户服务。通过，我们将:</p><ul class=""><li id="a69f" class="lw lx hi km b kn lq kq lr kt ly kx lz lb ma lf mb mc md me bi translated">了解高效变压器的工作原理。</li><li id="5883" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated">探索<strong class="km hs"> <em class="mm"> MultiWoz </em> </strong>数据集。</li><li id="3169" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated">处理数据，将其输入模型。</li><li id="99cf" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated">训练你的模型。</li><li id="bf52" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mb mc md me bi translated">向模型提出一个问题，生成一个对话。</li></ul><h1 id="2f96" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd iy ke ja kf jb kg jd kh je ki kj bi translated">概述</h1><ol class=""><li id="cf07" class="lw lx hi km b kn ko kq kr kt mn kx mo lb mp lf mq mc md me bi translated"><strong class="km hs">探索MultiWoz数据集</strong></li><li id="0b94" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">处理转化炉输入数据</strong></li><li id="5774" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">令牌化，用分桶分批</strong></li><li id="0c66" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">可逆层</strong></li><li id="6da4" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">可逆层和随机性</strong></li><li id="4394" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">改革者培训</strong></li><li id="c2a5" class="lw lx hi km b kn mf kq mg kt mh kx mi lb mj lf mq mc md me bi translated"><strong class="km hs">从预训练模型解码</strong></li></ol></div><div class="ab cl mr ms gp mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hb hc hd he hf"><h2 id="1998" class="my jt hi bd ju mz na nb jy nc nd ne kc kt nf ng ke kx nh ni kg lb nj nk ki ho bi translated">1:探索多Woz数据集</h2><p id="d4d1" class="pw-post-body-paragraph kk kl hi km b kn ko is kp kq kr iv ks kt ku kv kw kx ky kz la lb lc ld le lf hb bi translated">您将从探索MultiWoz数据集开始。我们将要使用的数据集有超过10，000个人类注释的对话，跨越多个领域和主题。一些对话包括多个领域，而另一些包括单个领域。我们将加载和探索这个数据集，并开发一个函数来提取对话。</p><p id="51b8" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">让我们首先导入我们将使用的模块:</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="4caf" class="my jt hi nm b fi nq nr l ns nt">import json<br/>import random<br/>import numpy as np<br/>from termcolor import colored</span><span id="6520" class="my jt hi nm b fi nu nr l ns nt">import trax   <br/>from trax import layers as tl<br/>from trax.supervised import training<br/>!pip list | grep trax</span></pre><p id="69bf" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">让我们也声明一些我们将在练习中使用的常量。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="538f" class="my jt hi nm b fi nq nr l ns nt"># filename of the MultiWOZ dialogue dataset<br/>DATA_FILE = 'data.json'</span><span id="c83f" class="my jt hi nm b fi nu nr l ns nt"># data directory<br/>DATA_DIR = './data'</span><span id="b5cb" class="my jt hi nm b fi nu nr l ns nt"># dictionary where we will load the dialogue dataset<br/>DIALOGUE_DB = {}</span><span id="924d" class="my jt hi nm b fi nu nr l ns nt"># vocabulary filename<br/>VOCAB_FILE = 'en_32k.subword'</span><span id="3539" class="my jt hi nm b fi nu nr l ns nt"># vocabulary file directory<br/>VOCAB_DIR = 'data/vocabs'</span></pre><p id="db82" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">现在让我们加载MultiWOZ 2.1数据集。我们有json格式的数据集。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="2163" class="my jt hi nm b fi nq nr l ns nt"># help function to load a JSON file<br/>def load_json(directory, file):<br/>    with open(f'{directory}/{file}') as file: <br/>        db = json.load(file)<br/>    return db</span><span id="f6da" class="my jt hi nm b fi nu nr l ns nt"># load the dialogue data set into our dictionary<br/>DIALOGUE_DB = load_json(DATA_DIR, DATA_FILE)</span></pre><p id="3c13" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">让我们看看字典里有多少对话。1个键-值对是一个对话，所以我们可以得到字典的长度。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="0a11" class="my jt hi nm b fi nq nr l ns nt">print(f'The number of dialogues is: {len(DIALOGUE_DB)}')<br/></span><span id="b1b9" class="my jt hi nm b fi nu nr l ns nt">#Output----------------<br/>#The number of dialogues is: 10438</span></pre><p id="3b90" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">对话由多个文件组成，文件名在我们的字典中用作关键字。那些多域对话的文件名中有“MUL ”,而单域对话的文件名中有“SNG”或“WOZ”。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="b83f" class="my jt hi nm b fi nq nr l ns nt"># print 7 keys from the dataset to see the filenames<br/>print(list(DIALOGUE_DB.keys())[0:7])<br/></span><span id="9ce9" class="my jt hi nm b fi nu nr l ns nt">#Output----------------<br/>#['SNG01856.json', 'SNG0129.json', 'PMUL1635.json', 'MUL2168.json', 'SNG0073.json', 'SNG01445.json', 'MUL2105.json']</span></pre><p id="b586" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">有10，438个对话，每个都有自己的文件。您将在所有这些对话中训练您的模型。每个文件也被加载到一个字典中，并且每个文件都有两个键，它们是:</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="42cd" class="my jt hi nm b fi nq nr l ns nt"># get keys of the fifth file in the list above<br/>print(DIALOGUE_DB['SNG0073.json'].keys())</span><span id="9539" class="my jt hi nm b fi nu nr l ns nt"><br/>#Output-----------<br/>dict_keys(['goal', 'log'])</span></pre><p id="2a3f" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><code class="du nv nw nx nm b">goal</code>也指向一个字典，它包含几个与对话目标相关的关键字。例如下面，我们可以看到对话将是关于预订出租车。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="89f5" class="my jt hi nm b fi nq nr l ns nt">DIALOGUE_DB['SNG0073.json']['goal']<br/></span><span id="8942" class="my jt hi nm b fi nu nr l ns nt">#<em class="mm">output:-<br/></em>#{'taxi': {'info': {'leaveAt': '17:15',<br/>   'destination': 'pizza hut fen ditton',<br/>   'departure': "saint john's college"},<br/>  'reqt': ['car type', 'phone'],<br/>  'fail_info': {}},<br/> 'police': {},<br/> 'hospital': {},<br/> 'hotel': {},<br/> 'attraction': {},<br/> 'train': {},<br/> 'message': ["You want to book a &lt;span class='emphasis'&gt;taxi&lt;/span&gt;. The taxi should go to &lt;span class='emphasis'&gt;pizza hut fen ditton&lt;/span&gt; and should depart from &lt;span class='emphasis'&gt;saint john's college&lt;/span&gt;",<br/>  "The taxi should &lt;span class='emphasis'&gt;leave after 17:15&lt;/span&gt;",<br/>  "Make sure you get &lt;span class='emphasis'&gt;car type&lt;/span&gt; and &lt;span class='emphasis'&gt;contact number&lt;/span&gt;"],<br/> 'restaurant': {}}</span></pre><p id="e4d6" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">另一方面,<code class="du nv nw nx nm b">log</code>包含对话框。这是一个字典列表，列表中的每个元素都包含一些描述。让我们看一个例子:</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="460e" class="my jt hi nm b fi nq nr l ns nt"># get first element of the log list<br/>DIALOGUE_DB['SNG0073.json']['log'][0]</span></pre><p id="3382" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">输出</em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="c4a6" class="my jt hi nm b fi nq nr l ns nt">{'text': "I would like a taxi from Saint John's college to Pizza Hut Fen Ditton.",<br/> 'metadata': {},<br/> 'dialog_act': {'Taxi-Inform': [['Dest', 'pizza hut fen ditton'],<br/>   ['Depart', "saint john 's college"]]},<br/> 'span_info': [['Taxi-Inform', 'Dest', 'pizza hut fen ditton', 11, 14],<br/>  ['Taxi-Inform', 'Depart', "saint john 's college", 6, 9]]}</span></pre><p id="d60e" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">目前，我们只对<code class="du nv nw nx nm b">text</code>字段中的对话感兴趣。对话在两个人之间反复进行。我们称他们为‘第一人’和‘第二人’。这意味着数据[' sng 0073 . JSON '][' log '][0][' text ']是' Person 1 '，数据[' sng 0073 . JSON '][' log '][1][' text ']是' Person 2 '等等。偶数偏移是“人1”，奇数偏移是“人2”。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="a193" class="my jt hi nm b fi nq nr l ns nt">print(' Person 1: ', DIALOGUE_DB['SNG0073.json']['log'][0]['text'])<br/>print(' Person 2: ',DIALOGUE_DB['SNG0073.json']['log'][1]['text'])<br/></span><span id="639c" class="my jt hi nm b fi nu nr l ns nt">#OutPut-----------------<br/>#Person 1:  I would like a taxi from Saint John's college to Pizza #Hut Fen Ditton.<br/> #Person 2:  What time do you want to leave and what time do you #want to arrive by?</span></pre><p id="5584" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">我们现在将实现<code class="du nv nw nx nm b">get_conversation()</code>函数，该函数将从数据集的文件中提取对话。对话在文件的<code class="du nv nw nx nm b">log</code>列表的每个元素的<code class="du nv nw nx nm b">text</code>字段中。如果日志列表有<code class="du nv nw nx nm b">x</code>个元素，那么这个函数将得到这些元素的<code class="du nv nw nx nm b">text</code>个条目。我们的函数应该返回对话，如果“x”是偶数，则在每个字段前面加上“Person 1:”或“Person 2:”如果“x”是奇数。我们可以使用Python模数运算符“%”来帮助选择偶数/奇数条目。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="3381" class="my jt hi nm b fi nq nr l ns nt">def get_conversation(file, data_db):<br/>    '''<br/>    Args:<br/>        file (string): filename of the dialogue file saved as json<br/>        data_db (dict): dialogue database<br/>    <br/>    Returns:<br/>        string: A string containing the 'text' fields of  data[file]['log'][x]<br/>    '''<br/>    <br/>    # initialize empty string<br/>    result = ''<br/>    <br/>    # get length of file's log list<br/>    len_msg_log = len(data_db[file]['log'])<br/>    <br/>    # set the delimiter strings<br/>    delimiter_1 = ' Person 1: '<br/>    delimiter_2 = ' Person 2: '<br/>    <br/>    # loop over the file's log list<br/>    for i in range(len_msg_log):<br/>        <br/>    ### START CODE HERE (REPLACE INSTANCES OF 'None' WITH YOUR CODE) ###<br/>    <br/>        # get i'th element of file log list<br/>        cur_log = data_db[file]['log'][i]<br/>        <br/>        # check if i is even<br/>        if i%2 == 0:                   <br/>            # append the 1st delimiter string<br/>            result += delimiter_1<br/>        else: <br/>            # append the 2nd delimiter string<br/>            result += delimiter_2<br/>        <br/>        # append the message text from the log<br/>        result += cur_log['text']<br/>    <br/>    ### END CODE HERE ###<br/><br/>    return result</span></pre><p id="86e4" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">测试我们的功能</em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="0a4d" class="my jt hi nm b fi nq nr l ns nt"># BEGIN UNIT TEST<br/>import w4_unittest<br/>w4_unittest.test_get_conversation(get_conversation)</span></pre><p id="ef7d" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">文件测试:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="942d" class="my jt hi nm b fi nq nr l ns nt">file = 'SNG01856.json'<br/>conversation = get_conversation(file, DIALOGUE_DB)<br/><br/># print raw output<br/>print(conversation)</span></pre><p id="c07f" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">我们可以有一个实用的漂亮的打印功能，这样我们可以更容易地在视觉上跟踪对话。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="6a2c" class="my jt hi nm b fi nq nr l ns nt">def print_conversation(conversation):<br/>    <br/>    delimiter_1 = 'Person 1: '<br/>    delimiter_2 = 'Person 2: '<br/>    <br/>    split_list_d1 = conversation.split(delimiter_1)<br/>    <br/>    for sublist in split_list_d1[1:]:<br/>        split_list_d2 = sublist.split(delimiter_2)<br/>        print(colored(f'Person 1: {split_list_d2[0]}', 'red'))<br/>        <br/>        if len(split_list_d2) &gt; 1:<br/>            print(colored(f'Person 2: {split_list_d2[1]}', 'green'))<br/><br/>            <br/>print_conversation(conversation)</span></pre><p id="dd40" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">输出:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="0fbc" class="my jt hi nm b fi nq nr l ns nt">Person 1: am looking for a place to to stay that has cheap price range it should be in a type of hotel <br/>Person 2: Okay, do you have a specific area you want to stay in? <br/>Person 1: no, i just need to make sure it's cheap. oh, and i need parking <br/>Person 2: I found 1 cheap hotel for you that includes parking. Do you like me to book it? <br/>Person 1: Yes, please. 6 people 3 nights starting on tuesday. <br/>Person 2: I am sorry but I wasn't able to book that for you for Tuesday. Is there another day you would like to stay or perhaps a shorter stay? <br/>Person 1: how about only 2 nights. <br/>Person 2: Booking was successful.<br/>Reference number is : 7GAWK763. Anything else I can do for you? <br/>Person 1: No, that will be all. Good bye. <br/>Person 2: Thank you for using our services.</span><span id="d8ab" class="my jt hi nm b fi nu nr l ns nt">DIALOGUE_DB['SNG01856.json']['log'][0]</span></pre><p id="01ff" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">输出:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="80ea" class="my jt hi nm b fi nq nr l ns nt">{'text': 'am looking for a place to to stay that has cheap price range it should be in a type of hotel',<br/> 'metadata': {},<br/> 'dialog_act': {'Hotel-Inform': [['Type', 'hotel'], ['Price', 'cheap']]},<br/> 'span_info': [['Hotel-Inform', 'Type', 'hotel', 20, 20],<br/>  ['Hotel-Inform', 'Price', 'cheap', 10, 10]]}</span></pre><p id="50a4" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">该数据集还带有酒店、医院、出租车、火车、警察和餐馆数据库。例如，如果你需要打电话给医生、酒店或出租车，这将允许你自动完成整个对话。看一下数据集附带的文件。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="00a3" class="my jt hi nm b fi nq nr l ns nt"># this is an example of the attractions file<br/>attraction_file = open('data/attraction_db.json')<br/>attractions = json.load(attraction_file)<br/>print(attractions[0])</span></pre><p id="5a04" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">这是一个景点文件的例子:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="71f5" class="my jt hi nm b fi nq nr l ns nt">#Output----------------</span><span id="679a" class="my jt hi nm b fi nu nr l ns nt">#{'address': 'pool way, whitehill road, off newmarket road', 'area': 'east', 'entrance fee': '?', 'id': '1', 'location': [52.208789, 0.154883], 'name': 'abbey pool and astroturf pitch', 'openhours': '?', 'phone': '01223902088', 'postcode': 'cb58nt', 'pricerange': '?', 'type': 'swimmingpool'}</span></pre><p id="264d" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">这是一个医院文件的例子:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="ecc2" class="my jt hi nm b fi nq nr l ns nt">hospital_file = open('data/hospital_db.json')<br/>hospitals = json.load(hospital_file)<br/>print(hospitals[0]) # feel free to index into other indices</span><span id="3505" class="my jt hi nm b fi nu nr l ns nt">#Output-------------</span><span id="5dd5" class="my jt hi nm b fi nu nr l ns nt">#{'department': 'neurosciences critical care unit', 'id': 0, 'phone': '01223216297'}</span></pre><p id="9c96" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">这是一个酒店文件的例子:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="858d" class="my jt hi nm b fi nq nr l ns nt">hotel_file = open('data/hotel_db.json')<br/>hotels = json.load(hotel_file)<br/>print(hotels[0]) # feel free to index into other indices</span><span id="34e6" class="my jt hi nm b fi nu nr l ns nt">#Output----------------</span><span id="2fb0" class="my jt hi nm b fi nu nr l ns nt">{'address': '124 tenison road', 'area': 'east', 'internet': 'yes', 'parking': 'no', 'id': '0', 'location': [52.1963733, 0.1987426], 'name': 'a and b guest house', 'phone': '01223315702', 'postcode': 'cb12dp', 'price': {'double': '70', 'family': '90', 'single': '50'}, 'pricerange': 'moderate', 'stars': '4', 'takesbookings': 'yes', 'type': 'guesthouse'}</span></pre><p id="713b" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">这是警察档案的一个例子:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="3a3e" class="my jt hi nm b fi nq nr l ns nt">police_file = open('data/police_db.json')<br/>police = json.load(police_file)<br/>print(police[0]) # feel free to index into other indices</span><span id="a461" class="my jt hi nm b fi nu nr l ns nt">#Output----------------</span><span id="9a05" class="my jt hi nm b fi nu nr l ns nt">{'name': 'Parkside Police Station', 'address': 'Parkside, Cambridge', 'id': 0, 'phone': '01223358966'}</span></pre><p id="076b" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><em class="mm">这是一个restuarant文件的例子:- </em></p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="5c6d" class="my jt hi nm b fi nq nr l ns nt">restaurant_file = open('data/restaurant_db.json')<br/>restaurants = json.load(restaurant_file)<br/>print(restaurants[0]) # feel free to index into other indices</span><span id="6516" class="my jt hi nm b fi nu nr l ns nt">#Output----------------</span><span id="0586" class="my jt hi nm b fi nu nr l ns nt">{'address': 'Regent Street City Centre', 'area': 'centre', 'food': 'italian', 'id': '19210', 'introduction': 'Pizza hut is a large chain with restaurants nationwide offering convenience pizzas pasta and salads to eat in or take away', 'location': [52.20103, 0.126023], 'name': 'pizza hut city centre', 'phone': '01223323737', 'postcode': 'cb21ab', 'pricerange': 'cheap', 'type': 'restaurant'}</span></pre><p id="8372" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">关于multiwoz 2.1数据集的更多信息，让我们打印出<code class="du nv nw nx nm b">ReadMe.txt</code>文件。</p><pre class="jh ji jj jk fd nl nm nn no aw np bi"><span id="5030" class="my jt hi nm b fi nq nr l ns nt">with open('data/README') as file:<br/>    print(file.read())</span></pre><p id="9bc3" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">正如我们所见，MultiWoz数据集还有许多其他方面。尽管如此，我们将会看到，即使只有对话，我们的模型仍然能够生成有用的响应。</p><p id="4e67" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated">我们对数据集的探索到此结束。在下一部分中，我们将在将它输入模型进行训练之前做一些预处理。</p><p id="ac64" class="pw-post-body-paragraph kk kl hi km b kn lq is kp kq lr iv ks kt ls kv kw kx lt kz la lb lu ld le lf hb bi translated"><strong class="km hs"> <em class="mm">在</em></strong><a class="ae mk" href="https://github.com/shsarv/ChatBot" rel="noopener ugc nofollow" target="_blank"><strong class="km hs"><em class="mm">https://github.com/shsarv/ChatBot</em></strong></a><strong class="km hs"><em class="mm">找到数据集和源代码。</em> </strong></p></div></div>    
</body>
</html>