<html>
<head>
<title>Making a container go GUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作容器go GUI</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/making-a-container-go-gui-60340e82197b?source=collection_archive---------6-----------------------#2021-06-01">https://medium.com/analytics-vidhya/making-a-container-go-gui-60340e82197b?source=collection_archive---------6-----------------------#2021-06-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/bb3500ebd31b8459b71f0f75fc9664f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gWZQ7xSERy2sOicGBBWdg.png"/></div></div></figure><p id="90cb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jn">任务</em> : </strong> <br/>🔅<em class="jn">在GUI模式下启动docker上的容器</em> <br/>🔅<em class="jn">在容器上运行任何GUI软件</em></p><p id="da9a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">GUI(图形用户界面)是计算机软件的交互式可视组件系统。GUI显示传达信息的对象，并表示用户可以采取的动作。当用户与对象交互时，对象会改变颜色、大小或可见性。</p><p id="9c3b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是为什么要使用GUI呢？GUI虽然不像CLI或代码那样强大，但绝对更加用户友好。如果你是一名程序员，你可能知道没有IDE来开发代码的可怕之处，你可能希望有一个浏览器来检查你的web应用程序，一些像Jenkins这样的工具很难使用，除非你有一个合适的CLI来连接，你可能希望看到你的代码在一个奇妙的GUI风格的颜色显示中失败…可能性是无穷的！！！</p><p id="08a5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是我们如何才能让一个容器在其中运行GUI应用程序呢？让我们来看看……</p><p id="83bc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通过简单的谷歌搜索，我们可以发现，当有人试图在一个容器上运行GUI应用程序时，错误是关于某个名为X11 display的缺失变量，进一步搜索该错误，我们可以了解到该错误是关于一个名为display的缺失环境变量，X11需要该变量来运行GUI程序。为了解决这个问题，我们可以用-e选项启动我们的容器来定义显示。在启动终端本身之前，变量DISPLAY需要准确地告知显示器的位置。<br/>语法:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="bcce" class="jx jy hh jt b fi jz ka l kb kc">hostname:D.S</span></pre><p id="d968" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">其中</em>:</p><ul class=""><li id="0a43" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm ki kj kk kl bi translated">主机名是运行X服务器的计算机的名字。省略的主机名表示本地主机。</li><li id="d8ed" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated"><strong class="ir hi"> D </strong>是一个序号(通常为0)。如果有多台显示器连接到一台计算机，则它可以变化。</li><li id="3764" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated"><strong class="ir hi"> S </strong>是屏幕号。一个显示器实际上可以有多个屏幕。通常只有一个屏幕，0是默认值。</li></ul><p id="7753" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通常我们可以设置一个值正好等于主机显示值的变量，因此我们可以使用命令<br/> <code class="du kr ks kt jt b">docker run &lt;options&gt; -e DISPLAY=$DISPLAY &lt;image&gt;</code> <br/>来设置变量。</p><p id="ceec" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但这还不是全部。我们还需要配置X11，为此我们可以再次使用基本操作系统中的配置来配置容器。怎么会？很简单，我们只需要将卷<code class="du kr ks kt jt b">/tmp/X11-unix</code>转发到容器内的相同位置。因此，该命令现在被转换为:<br/> <code class="du kr ks kt jt b">docker run &lt;OPTIONS&gt; -e DISLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix &lt;IMAGE&gt;</code> <br/>这里. X11-unix是一个套接字文件，X11服务器需要它来连接到它的客户机(像Firefox这样的应用程序)</p><p id="9591" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，这种方法可以用来使一些特定的容器与其中的GUI工具一起工作。但是，假设我们需要在一个容器中使用图形用户界面工具，比如Centos:7，如果我们试图在那里执行这种类型的操作，我们又会遇到一堆错误，告诉我们我们的机器不支持图形用户界面或其他功能。现在该怎么办？我们找到的解决这个错误的简单方法是安装一些软件包组，这些软件包组将安装运行GUI应用程序所需的所有软件和工具。</p><p id="6d5a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，有了这些知识，让我们试着制作一个运行Firefox的Centos:7容器，如果可以，让我们看看是否可以运行一个像Jupyter这样的IDE来运行这个容器。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es ku"><img src="../Images/adf2786b3025ec23685ce8d1ccaa1a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*jLHrZ-btQREixXLScpt8ng.gif"/></div></figure><p id="49f0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤1 </strong>:拉取所需图像… <br/>为此，您可以使用命令<code class="du kr ks kt jt b">docker pull centos:7</code></p><p id="6e6d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤2 </strong>:使用拉出来的图像启动一个容器…</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es kv"><img src="../Images/7a522ca50623b7dda3e10d8ee5389598.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*Lue8luypxSmcBYWMGpu9dQ.png"/></div></figure><p id="55b1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将使用这个容器以Centos:7为基础制作一个支持GUI的图像。</p><p id="d3c5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第三步</strong>:安装包组。我们已经安装了一个名为“带GUI的服务器”的包组，因为它将为我安装Firefox。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kw"><img src="../Images/e37794d7205caf411df27e1b39e84d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-acs8kze2IrvBVEflcnAzA.png"/></div></div></figure><p id="c8b8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这一步可能需要一段时间…你可以考虑打个盹或者看个电影什么的，直到安装完成。你知道，这一步是我们想要制作图像的唯一原因。<br/>安装完成后，我们有资格进入下一步</p><p id="2642" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第四步</strong>:提交容器。现在你所要做的就是用你花了一天时间制作的容器制作一个图像。为此，我们可以运行一个命令<code class="du kr ks kt jt b">docker commit &lt;container&gt; &lt;new image name&gt;:&lt;tags for your image&gt;</code> <br/>在我们的例子中，这个命令可能看起来像:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kx"><img src="../Images/e0a28f2135f57dfc72cb42d418398cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilXrKgqQ0Trcvuw_sIZ4ow.png"/></div></div></figure><p id="98aa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du kr ks kt jt b">docker ps</code>会帮你找到你形象的名字。</p><p id="0536" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤5 </strong>:测试。为了测试您的映像，您可以启动一个包含新映像的容器。为此，我们将使用如下命令:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ky"><img src="../Images/b1965a429d4f025248250194ea06b824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fLd9z57RRZxHXr1Zt8QSPg.png"/></div></div></figure><p id="0f1b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，您可以运行GUI应用程序进行测试，在我的例子中，我使用了Firefox命令，这将为我们启动Firefox浏览器。<br/>注意容器的ID是178d2acb6406，同样的ID可以在Firefox浏览器上看到…</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kz"><img src="../Images/b0981e17f72704778d689896424e2383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DemVQ3RkM21h9nL2bExsDg.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">ID标在顶栏上</figcaption></figure><p id="7cba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如我们所看到的，容器ID与浏览器显示的ID相匹配，这表明Firefox是在容器上运行的，而不是在基本操作系统上运行的。</p><p id="8903" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想运行Jupyter IDE，我们也可以这样做。只需使用下面的命令集来启动IDE</p><ol class=""><li id="9e74" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm le kj kk kl bi translated"><code class="du kr ks kt jt b">yum install -y python3</code></li><li id="4f68" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm le kj kk kl bi translated"><code class="du kr ks kt jt b">pip install jupyter</code></li><li id="bd59" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm le kj kk kl bi translated"><code class="du kr ks kt jt b">jupyter notebook --allow-root</code></li></ol><p id="b358" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您按照命令操作，您将会看到如下屏幕:</p><div class="jo jp jq jr fd ab cb"><figure class="lf ii lg lh li lj lk paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/9000e62357fe2a6ab611a50c481fd992.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*Vr5qNwCJsjv3J__Mqwb1Xg.png"/></div></figure><figure class="lf ii ll lh li lj lk paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/1f27c00bb1987532c214b3b30f26b90f.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*UWhWpF6neNrkRE5oLgAFFg.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx lm di ln lo translated">输出和浏览器结果的CLI屏幕</figcaption></figure></div><p id="1d02" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们还可以通过其他方式在容器上实现GUI功能，其中之一就是SSH。然而，如果你确实想获得这样的结果，而没有制作图像的麻烦，你可以通过使用命令拉我们制作的图像:<br/><code class="du kr ks kt jt b">docker pull prithvirajsingh1604/task:gui01<br/></code><a class="ae lp" href="https://hub.docker.com/repository/docker/prithvirajsingh1604/task/general" rel="noopener ugc nofollow" target="_blank">https://hub . docker . com/repository/docker/prithvirajsingh 1604/task/general</a><br/>单击此处了解更多信息。</p><p id="a1fe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这项任务是与Divya Kurothe 合作完成的，我要感谢她通过她的支持努力帮助我有效地完成了这项任务。</p><p id="bba5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">乡亲们，任务圆满完成</strong> (∩^o^)⊃━☆ <br/> <em class="jn">感谢大家给本一念，</em> <strong class="ir hi"> <em class="jn">各位</em> </strong> <em class="jn"> </em> <strong class="ir hi"> <em class="jn">摇滚</em> </strong> ヾ(⌐■_■)ノ♪</p></div></div>    
</body>
</html>