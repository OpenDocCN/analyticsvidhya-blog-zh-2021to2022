<html>
<head>
<title>Spacy Pipelines : A Beginner’s Odyssey</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">空间管道:初学者的奥德赛</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/spacy-pipelines-a-beginners-odyssey-f68977e0311a?source=collection_archive---------4-----------------------#2021-07-28">https://medium.com/analytics-vidhya/spacy-pipelines-a-beginners-odyssey-f68977e0311a?source=collection_archive---------4-----------------------#2021-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d29c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗨，读者们</p><p id="9e36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">处理大量文本数据是否给你带来了问题？你在无数时间里运行一百万张唱片吗？在运行你的程序和获得结果之间有一段永恒的时间吗？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/b4cc580f631d413914d26b73c2288833.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*prLfJnGW7qLX_Gsl-xMg4g.jpeg"/></div></figure><p id="c767" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧(鼓辊) :介绍空间管道</p><h1 id="b42a" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">斯帕西:用几句话介绍我们的救世主</h1><p id="8980" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">Spacy是一个免费的开源python库。它是用Cython编写的，旨在提取语言特征并帮助其处理或在简短的NLP应用程序中使用。是的，我们可以让机器理解我们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ko"><img src="../Images/41dc3a4bdfea469fa285f781bcb6a057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fgsQQcIdlDCl0lzzmj1Ciw.gif"/></div></figure><p id="ab24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装Spacy，请使用以下命令:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="a517" class="ku jm hi kq b fi kv kw l kx ky">pip install spacy</span></pre><h1 id="ca4f" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">空间管道:NLP蝙蝠侠的公用事业带</h1><p id="97ad" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">像任何引导水流的管道一样，spaCy管道引导文本数据的流动。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/f94f281e34bce0ca93b474d97eb09619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSgPIsaAWBvb0OSWH7azgA.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">空间管道</figcaption></figure><p id="6f89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">空间管道提供了定制的方式，因此可以根据需要添加或删除管道的任何组件。这是它速度更快的主要原因之一——如果你不需要某个组件，就把它扔掉。不需要使用内存。很有效率，不是吗？</p><p id="ce2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们直入主题吧</p><h1 id="f72b" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">管道初始化</strong></h1><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="7ee7" class="ku jm hi kq b fi kv kw l kx ky">import spacy<br/>nlp = spacy.load('en_core_web_sm')</span></pre><h1 id="0984" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">先睹为快的组件</strong></h1><p id="ebf0" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">像任何电影的预告片一样，您可以查看管道的组件:使用nlp.pipeline命令，该命令返回包含组件名称和组件本身的元组列表。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="62c6" class="ku jm hi kq b fi kv kw l kx ky">print(nlp.pipeline)</span></pre><h2 id="4e5b" class="ku jm hi bd jn li lj lk jr ll lm ln jv iq lo lp jz iu lq lr kd iy ls lt kh lu bi translated">输出:</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="58ab" class="ku jm hi kq b fi kv kw l kx ky">[('tok2vec', &lt;spacy.pipeline.tok2vec.Tok2Vec at 0x13b097fd228&gt;),<br/> ('tagger', &lt;spacy.pipeline.tagger.Tagger at 0x13b097fd408&gt;),<br/> ('parser', &lt;spacy.pipeline.dep_parser.DependencyParser at 0x13b0654a3c8&gt;),<br/> ('attribute_ruler',<br/>  &lt;spacy.pipeline.attributeruler.AttributeRuler at 0x13b05e47888&gt;),<br/> ('lemmatizer', &lt;spacy.lang.en.lemmatizer.EnglishLemmatizer at 0x13b05f16e88&gt;),<br/> ('ner', &lt;spacy.pipeline.ner.EntityRecognizer at 0x13b0654a208&gt;)]</span></pre><p id="f78c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而nlp.pipe_names返回列表中所有组件的名称。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="2b5a" class="ku jm hi kq b fi kv kw l kx ky">nlp.pipe_names</span></pre><h2 id="4f52" class="ku jm hi bd jn li lj lk jr ll lm ln jv iq lo lp jz iu lq lr kd iy ls lt kh lu bi translated">输出:</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="faad" class="ku jm hi kq b fi kv kw l kx ky">['tok2vec', 'tagger', 'parser', 'attribute_ruler', 'lemmatizer', 'ner']</span></pre><p id="a46a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">组件列表包括:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lv lw l"/></div></figure><h1 id="932c" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">定制管道:添加您自己的想法</h1><p id="9711" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">虽然spacy为文本数据提供了一个流，但是用户可以添加自己的组件或删除现有的组件。</p><p id="980a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">管道的灵活性是其关键特征。如果您不想要某个组件，可以将其移除。您可以通过以下方式做到这一点:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="c3dc" class="ku jm hi kq b fi kv kw l kx ky">nlp = spacy.load('en_core_web_sm', disable=['tagger', 'parser', 'ner']) # the disable command disables the command we do not require.<br/>print(nlp.pipeline)</span></pre><h2 id="7a15" class="ku jm hi bd jn li lj lk jr ll lm ln jv iq lo lp jz iu lq lr kd iy ls lt kh lu bi translated">输出</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="32f8" class="ku jm hi kq b fi kv kw l kx ky">[('tok2vec', &lt;spacy.pipeline.tok2vec.Tok2Vec at 0x13b08187a08&gt;),<br/> ('attribute_ruler',<br/>  &lt;spacy.pipeline.attributeruler.AttributeRuler at 0x13b07a75508&gt;),<br/> ('lemmatizer', &lt;spacy.lang.en.lemmatizer.EnglishLemmatizer at 0x13b07a823c8&gt;)]</span></pre><p id="8085" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以向管道添加自定义函数。您可以通过以下方式做到这一点:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="bb9b" class="ku jm hi kq b fi kv kw l kx ky">from spacy.language import Language<br/><a class="ae lx" href="http://twitter.com/Language" rel="noopener ugc nofollow" target="_blank">@Language</a>.component("component1")<br/>def lemmatize(doc):<br/>    lemma_list = [str(tok.lemma_).lower() for tok in doc<br/>                  if tok.is_alpha and tok.text.lower() not in removal_words ]<br/>    return lemma_list</span><span id="2165" class="ku jm hi kq b fi ly kw l kx ky">nlp.add_pipe("component2")<br/>print(nlp.pipe_names)</span></pre><p id="0d61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> add_pipe </strong>参数用于定义你想要在管道中添加组件的位置。默认情况下，它被添加到管线的末端。您可以使用以下属性来管理定位:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lv lw l"/></div></figure><h2 id="b308" class="ku jm hi bd jn li lj lk jr ll lm ln jv iq lo lp jz iu lq lr kd iy ls lt kh lu bi translated">输出:</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="9fa5" class="ku jm hi kq b fi kv kw l kx ky">['tok2vec', 'attribute_ruler', 'lemmatizer', 'component1']</span></pre><p id="0670" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过组合以下成分，您可以准备自己的空间管道。请记住，您可以添加任意多的组件。重点应该是尽可能长时间地保持文档格式的输入。Spacy更喜欢这种格式，因为它将它转换为哈希值，并使用它们进行更快的计算。祝你的菜好运。</p><p id="45c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！！！</p></div></div>    
</body>
</html>