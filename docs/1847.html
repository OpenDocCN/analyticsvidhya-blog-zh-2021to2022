<html>
<head>
<title>Working on NLP with TextBlob</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TextBlob处理NLP</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/working-on-nlp-with-textblob-56d0344bb648?source=collection_archive---------2-----------------------#2021-03-22">https://medium.com/analytics-vidhya/working-on-nlp-with-textblob-56d0344bb648?source=collection_archive---------2-----------------------#2021-03-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6985" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TextBlob是一个用于处理文本数据的Python库。它提供了简单的API来执行各种自然语言处理任务。</p><div class="jc jd ez fb je jf"><a href="https://textblob.readthedocs.io/en/dev/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">TextBlob:简化的文本处理- TextBlob 0.16.0文档</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">版本0.16.0. () TextBlob是一个用于处理文本数据的Python (2和3)库。它为…提供了一个简单的API</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">textblob.readthedocs.io</p></div></div><div class="jo l"><div class="jp l jq jr js jo jt ju jf"/></div></div></a></div><p id="dcd6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们使用TextBlob完成一些NLP任务。我们将进行一些情感分析。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es jv"><img src="../Images/d9068764adaddaf1a336f5fdf655c1af.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*xN44973EaSfhvT4Z.jpg"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">NLP迷因。</figcaption></figure><p id="f4a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用Trip Advisor点评数据集，它有大约20，000条1-5星级的点评。</p><div class="jc jd ez fb je jf"><a href="https://www.kaggle.com/andrewmvd/trip-advisor-hotel-reviews" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">旅行顾问酒店评论</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">从Tripadvisor提取的20k条酒店评论。</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">www.kaggle.com</p></div></div><div class="jo l"><div class="kg l jq jr js jo jt ju jf"/></div></div></a></div><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="1c12" class="km kn hh ki b fi ko kp l kq kr"><em class="ks">#importing the libraries</em><br/><br/>import os<br/>import numpy as np <em class="ks"># linear algebra</em><br/>import pandas as pd <em class="ks"># data processing, CSV file I/O (e.g. pd.read_csv)</em><br/>from textblob import TextBlob<br/>import nltk<br/>from nltk.stem import WordNetLemmatizer<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span><span id="63db" class="km kn hh ki b fi kt kp l kq kr"><em class="ks">#reading the data</em><br/>df = pd.read_csv("/kaggle/input/trip-advisor-hotel-reviews/tripadvisor_hotel_reviews.csv")</span></pre><p id="67ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们从导入库和数据开始。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="eb44" class="km kn hh ki b fi ko kp l kq kr">df.head()</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es ku"><img src="../Images/5aa7b5adc01abfa8c25225f5d491aea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*wGlb1kYQtABu3uy0FurMBQ.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">数据是这样的。</figcaption></figure><p id="c5ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们来看看每个数据点出现了多少次。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="961a" class="km kn hh ki b fi ko kp l kq kr">print("Star reviews and number of times they occur.")<br/>df["Rating"].value_counts()</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es kv"><img src="../Images/b4e4adae6dc2dbe31acf70aada84be00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*XqKFrEsIinyFIuaSyZAXXg.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">酒店主要分为5级或4级。</figcaption></figure><p id="f2df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后有很多正常NLTK的东西，创建频率表，wordcloud等等。看看Kaggle笔记本上的全部代码。(下面会给出链接。)</p><h2 id="4450" class="km kn hh bd kw kx ky kz la lb lc ld le ip lf lg lh it li lj lk ix ll lm ln lo bi translated">使用TextBlob</h2><p id="8cec" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">我们将使用TextBlob中的内置方法来生成评论极性和主观性。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="679c" class="km kn hh ki b fi ko kp l kq kr">df_arr = df.to_numpy()</span></pre><p id="3aa9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，在创建分类器之前，我们需要将数据传递给Textblob函数，因此我们将数据传递给python 2D列表。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="6af8" class="km kn hh ki b fi ko kp l kq kr">for a <strong class="ki hi">in</strong> df_arr:<br/>    text=a[0]<br/>    testimonial = TextBlob(text)<br/>    testimonial.sentiment<br/>    polarity_arr.append(testimonial.sentiment.polarity)<br/>    subjectivity_arr.append(testimonial.sentiment.subjectivity)</span></pre><p id="1179" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们得到了极性和主观性的值。为了合并数据，我们也将它们传递给我们的数据框架。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="a129" class="km kn hh ki b fi ko kp l kq kr">df["Review_Polarity"]=polarity_arr<br/>df["Review_Subjectivity"]=subjectivity_arr<br/>df.head(3)</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lu"><img src="../Images/b9737757305e7e958d6df15da30d68a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ae4Is9hRy0_9acgHH1kmNw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">新数据已添加。</figcaption></figure><p id="df89" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">理解新数据的特征。为此我们将使用分布图。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="3380" class="km kn hh ki b fi ko kp l kq kr">plt.figure(figsize=(15,8))<br/>sns.distplot(df["Review_Polarity"])</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lz"><img src="../Images/69a3095de4762879b7177e04500f319d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pze1qDESiaQX4ThgvC4bJw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">极性分布图。</figcaption></figure><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="0bc3" class="km kn hh ki b fi ko kp l kq kr">plt.figure(figsize=(15,8))<br/>sns.distplot(df["Review_Subjectivity"])</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es ma"><img src="../Images/73d95abd8c545c89da371aa33bb45692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k60NOiTxHAtxlh6XJG240A.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">复习主观性分布。</figcaption></figure><p id="6676" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，在我们开始研究这个模型之前，先说几句话。TextBlob库有许多预定义的函数，这使得工作非常容易。但这也意味着，处理TextBlob需要大量的计算资源。我无法在所有20，000个数据点上训练模型。所以，只有1000个数据点。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="eb43" class="km kn hh ki b fi ko kp l kq kr">from textblob.classifiers import NaiveBayesClassifier</span><span id="b746" class="km kn hh ki b fi kt kp l kq kr">df_model=df_arr[0:1000]</span><span id="2dda" class="km kn hh ki b fi kt kp l kq kr">cl = NaiveBayesClassifier(df_model)</span></pre><p id="3c71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，模型已经训练好了，我们可以去测试一些样本文本。</p><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="58ac" class="km kn hh ki b fi ko kp l kq kr">cl.classify("The hotel is very good. Food was good, housekeeping could have been better. The staff was ok")</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mb"><img src="../Images/9386e7cd507a9b172537f69a4d929400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-pVsQB24iMt9NktxFxO6A.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">5星评论。</figcaption></figure><pre class="jw jx jy jz fd kh ki kj kk aw kl bi"><span id="11c1" class="km kn hh ki b fi ko kp l kq kr">test_text=".before stay hotel arrange car service price 53 tip reasonable driver waiting arrival.checkin easy downside room picked 2 person jacuzi tub no bath accessories salts bubble bath did n't stay, night got 12/1a checked voucher bottle champagne nice gesture fish waiting room, impression room huge open space felt room big, tv far away bed chore change channel, ipod dock broken disappointing.in morning way asked desk check thermostat said 65f "</span><span id="09d5" class="km kn hh ki b fi kt kp l kq kr">cl.classify(test_text)</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mc"><img src="../Images/c6453f054152d941e5b8ed49f3953ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ER_gAKf0wR_46W6rbtu3dQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">3星评论。</figcaption></figure><p id="a3ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我们可以说分类器一直做得很好。有了更好的计算资源，模型可以做得更好。</p><p id="0167" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看看整个代码。</p><div class="jc jd ez fb je jf"><a href="https://www.kaggle.com/prateekmaj21/hotel-reviews-nlp-using-textblob" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">使用TextBlob的酒店评论NLP</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">使用Kaggle笔记本探索和运行机器学习代码|使用来自Trip Advisor酒店点评的数据</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">www.kaggle.com</p></div></div><div class="jo l"><div class="md l jq jr js jo jt ju jf"/></div></div></a></div><p id="ec1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谢谢你。</p><p id="4e10" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的Linkedin个人资料-</p><div class="jc jd ez fb je jf"><a href="https://www.linkedin.com/in/prateek-majumder/" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">Prateek Majumder -分析师- applex.in | LinkedIn</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">IEM加尔各答大学的本科生。我一直是微软学生合作伙伴计划的一部分，这是一个…</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">www.linkedin.com</p></div></div><div class="jo l"><div class="me l jq jr js jo jt ju jf"/></div></div></a></div><p id="3178" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的Github个人资料-</p><div class="jc jd ez fb je jf"><a href="https://github.com/prateekmaj21" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">prateekma 21-概述</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">applex.in首席分析师| apple x . in营销和业务运营|数据科学和分析|数字…</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">github.com</p></div></div></div></a></div><p id="f1a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谢谢你。</p></div></div>    
</body>
</html>