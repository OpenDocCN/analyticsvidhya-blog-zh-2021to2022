<html>
<head>
<title>Voyage-2- Explaining the file structure for your chatbot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释你的聊天机器人的文件结构</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/rasa-chatbot-voyage-2-198e633e8c0e?source=collection_archive---------6-----------------------#2021-05-17">https://medium.com/analytics-vidhya/rasa-chatbot-voyage-2-198e633e8c0e?source=collection_archive---------6-----------------------#2021-05-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a0b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嘿，欢迎来到这个使用Rasa 系列的<strong class="ig hi">聊天机器人的第二部分。我希望你已经看到了我解释的第一部分。<br/>如何建立一个虚拟环境并制作一个初始机器人。如果您尚未看到该部分，请单击此处</strong></p><div class="jc jd ez fb je jf"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/rasa-chat-bot-voyage-1-a73b6e8e4947"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">voyage-1-了解什么是Rasa并制作第一个聊天机器人</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">旅游业的旅游机器人</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">medium.com</p></div></div><div class="jo l"><div class="jp l jq jr js jo jt ju jf"/></div></div></a></div></div><div class="ab cl jv jw go jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ha hb hc hd he"><p id="3906" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天博客的议程:-</p><ol class=""><li id="c3c3" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated">rasa中的<strong class="ig hi">意图</strong>和<strong class="ig hi">实体</strong>是什么？</li><li id="4cdc" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">Rasa中的文件结构(Rasa Init后得到的文件)做了一些自定义的意图。</li><li id="daf1" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated"><strong class="ig hi">训练修改后的模型</strong>并与之对话</li></ol><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es kq"><img src="../Images/95808cef13a0e230ebdaae60fcb1e0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dd5ZBc1MrVCuwGcb12Mlhw.jpeg"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx translated">鸣谢:blog.spg.ai</figcaption></figure></div><div class="ab cl jv jw go jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ha hb hc hd he"><h1 id="b660" class="lf lg hh bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么是意图和实体</h1><p id="b646" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">我将举例说明意图，比如说我们有5个句子</p><ol class=""><li id="b757" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated">我能买些披萨吗</li><li id="9907" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">上周我在纽约的时候，我喝了一杯非常美味的奶昔</li><li id="8c4c" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">我已经很久没有吃到美味的巧克力蛋糕了。</li><li id="ccf1" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">宝贝，我们今天出去吃晚饭好吗</li><li id="6db4" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">我的<strong class="ig hi">蛋白奶昔</strong>在哪里？</li></ol><p id="5827" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在试着仔细分析这5个句子，你观察到了什么<br/>它们都与<strong class="ig hi">食物查询</strong>有某种联系</p><p id="412f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们将在rasa中做的是，我们将制作一个名为<strong class="ig hi"> food-query </strong>的<strong class="ig hi"> intent </strong>，我们将把所有这5个句子放在它下面，并训练我们的Rasa模型。</p><p id="8877" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好的，先生，我明白了<strong class="ig hi">意图的</strong>但是什么是<strong class="ig hi">实体</strong>。<br/>所有突出显示的单词被称为<strong class="ig hi">实体</strong>，它们将被标记为<br/>实体<strong class="ig hi">食品。<br/> </strong>可以在训练数据中生成，也可以借助<strong class="ig hi">正则表达式</strong>生成</p><h1 id="28d6" class="lf lg hh bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">RASA中的文件结构</h1><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es mn"><img src="../Images/94f27c8297273c493406768fe2265160.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*m3jx2tR8j-_oseMrsdYxIg.png"/></div><figcaption class="lb lc et er es ld le bd b be z dx translated">rasa初始化后的文件</figcaption></figure><h2 id="7827" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">数据:-</h2><p id="04df" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">这个文件夹包含所有的<strong class="ig hi"> NLU </strong>和<strong class="ig hi">规则</strong>和<strong class="ig hi">故事</strong>文件。</p><p id="d3bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是阁下，这些文件是什么，它们是什么意思？</p><h1 id="bac7" class="lf lg hh bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">NLU文件:-</h1><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es nc"><img src="../Images/929b255484de728c9833a2e9b6439b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPL3cg6tjEnbFQYHzf-r5g.png"/></div></div></figure><p id="61c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">NLU代表<strong class="ig hi">自然语言理解</strong>这个简单语言的文件包含你的<strong class="ig hi">自然语言数据</strong>，Rasa将在其上进行训练。NLU文件(nlu.yml)包含了我上面解释过的<strong class="ig hi">意图</strong>和<strong class="ig hi">实体</strong>等类别。在每一个意图下，都有实际上是你的训练数据的训练例子。<br/> <strong class="ig hi"> <em class="nd">重要点</em> </strong>制作训练数据时要牢记。</p><ul class=""><li id="ce94" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb ne ki kj kk bi translated">给每个意图下的例子添加补充，但是例子不应该太不同，以免你的意图混淆。</li><li id="d892" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb ne ki kj kk bi translated">在每个意图下至少添加5个例子。</li><li id="b9f7" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb ne ki kj kk bi translated"><strong class="ig hi">意图</strong>应该传达用户可以向聊天机器人提问的感觉，因为不是每个问题都被认为是<strong class="ig hi">意图</strong>。</li><li id="4a0a" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb ne ki kj kk bi translated"><strong class="ig hi">在每个意图中添加一些错误的例子，因为没有训练数据是不完美的</strong></li></ul><h2 id="1119" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">规则文件:-</h2><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es nf"><img src="../Images/74c8c6a005b503c1555ea6168e932371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MvgtruKR5R5xChyTzhm_XQ.png"/></div></div></figure><p id="998d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">规则非常适合处理小型的特定对话模式。一旦rasa识别出<strong class="ig hi">用户的意图，这些基本上是必须遵守的硬性限制。<br/></strong></p><ol class=""><li id="0955" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated">我们在domain.yml中定义这些<strong class="ig hi"> utter的</strong>。</li><li id="4741" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">Rasa使用<strong class="ig hi"> config.yml </strong>中定义的管道做出响应</li></ol><h2 id="ae66" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">不要担心，我会在这个博客中解释域名文件和下面的内容:)</h2><h2 id="4d54" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">以及在以后的博客中，Rasa如何借助config.yml中定义的管道使用ML做出响应</h2><p id="e681" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">定义规则时要记住的要点:-</p><ol class=""><li id="abfe" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated"><strong class="ig hi">不要过度使用规则(最重要的是因为我们的目标是制作一个上下文聊天机器人)</strong></li><li id="55f5" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">取消对<strong class="ig hi"> config.yml </strong>中的规则策略的注释(在您的项目中必须使用规则)</li></ol><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es ng"><img src="../Images/5afb9783de4a0a22e6e5db1a68a03f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uMcfb8WXdprpNbX8s_A7oA.png"/></div></div></figure><h2 id="fe1a" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">故事文件:-</h2><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es nh"><img src="../Images/53a0627e09b4d504dab6d8ac1e134cc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*8Qagp58vNsGwap_cyT3JfQ.png"/></div></figure><p id="1837" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每当你和机器人说话的时候。可能有两种情况</p><ul class=""><li id="8181" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb ne ki kj kk bi translated">要么你们的谈话进行得很顺利(<strong class="ig hi">快乐之路</strong>)。</li><li id="425f" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb ne ki kj kk bi translated">或者不是(<strong class="ig hi">悲伤之路</strong>)</li></ul><p id="a9a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">故事是用户和人工智能助手之间对话的表示，被转换成特定的格式，其中用户输入被表示为意图(和必要时的实体)，而助手的响应和动作被表示为动作名称。</p><p id="19a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重要提示:-</p><ul class=""><li id="c368" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb ne ki kj kk bi translated">好的故事有助于减少聊天机器人中的误报(我从自己的经验中看到的)。</li><li id="b11e" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb ne ki kj kk bi translated">记住，你不能为每一个意图编一个故事，也不能在stories.yml中涵盖每一条快乐的路。</li></ul></div><div class="ab cl jv jw go jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ha hb hc hd he"><h2 id="4e29" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">Domain.yml</h2><p id="2b2c" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">域文件这是你的聊天机器人的世界。它包含了你想要训练的所有意图，以及每个意图的所有<strong class="ig hi">发声</strong>(响应)。</p><p id="507c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">定义话语时要记住的规则:-</p><p id="5b3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设您的意图的名称是<strong class="ig hi"> goodbye </strong>，那么在domain.yml中，我们将使用名称<strong class="ig hi"> utter_goodbye </strong>来定义它的响应(这是强制的)，以这种特定的方式定义响应。</p><ol class=""><li id="f021" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated">我们必须在<strong class="ig hi">域文件</strong>中定义<strong class="ig hi">聊天机器人</strong>的每个意图</li><li id="e90c" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated">我们可以制作<strong class="ig hi">多个域文件</strong>如果我们有这个项目的大项目，我们将制作多个域文件。</li></ol><h2 id="925d" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">Config.yml</h2><p id="3745" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">这个文件包含了你的聊天机器人将用来解释用户信息和<strong class="ig hi">预测它的意图</strong>，然后预测正确的<strong class="ig hi">发出</strong>的管道。所有这些意图和话语的预测都是在政策的帮助下完成的(我们将在以后的博客中讨论政策)</p><h2 id="2726" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated">行动</h2><p id="c9b4" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">该文件夹包含一个非常重要的文件，即<strong class="ig hi"> actions.py <br/> </strong>这将是我们编写自定义动作的地方。</p><h2 id="15ca" class="mo lg hh bd lh mp mq mr ll ms mt mu lp ip mv mw lt it mx my lx ix mz na mb nb bi translated"><em class="ni">等等:(</em></h2><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es nj"><img src="../Images/45ae6930a16902fa34ae5055074e9fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*_uqVimHn9g0n2fJJOEMrVw.jpeg"/></div></figure><p id="5578" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嘿，但是听着，这是最有趣的部分(<strong class="ig hi">这是一个python文件</strong> ) <br/>意味着你可以用它做几乎所有的事情</p><ol class=""><li id="33f8" class="kc kd hh ig b ih ii il im ip ke it kf ix kg jb kh ki kj kk bi translated"><em class="nd">点击一个API </em></li><li id="539a" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated"><em class="nd">为用户消息编写自定义回复。</em></li><li id="8d3a" class="kc kd hh ig b ih kl il km ip kn it ko ix kp jb kh ki kj kk bi translated"><em class="nd">从数据库中提取数据</em></li></ol><p id="69e1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">任何事都意味着任何事。<br/>(例如，我为我的一个客户在这个动作文件中写了一个自定义拼写检查器，并在我们的聊天机器人中使用了它)那真是太有趣了</p><p id="0f5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后<strong class="ig hi"> Credentials.yml </strong>和<strong class="ig hi"> endpoints.yml <br/> </strong>我将在部署博客(5-6)中解释这些文件，因为它们仅在那时使用</p><h1 id="82eb" class="lf lg hh bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">让我们实际一点</h1><p id="5d3b" class="pw-post-body-paragraph ie if hh ig b ih md ij ik il me in io ip mf ir is it mg iv iw ix mh iz ja jb ha bi translated">在这里，我正在制定我们的第一个定制意图</p><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es nk"><img src="../Images/95ce9699d816c56d376fa6c0c9f3e84b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z4txT5PJiMZ67xSv-KVs2g.png"/></div></div></figure><p id="8e29" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">仔细看我犯的小拼写错误<br/>(例子4聊天机器人的拼写)</p><p id="caab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">定义其答案头为<strong class="ig hi"> Domain.yml </strong></p><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es nl"><img src="../Images/826e8affda8e95df40b49ac47aa8f4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wg_lTGwpB_9qPVAU49NJ1w.png"/></div></div></figure><p id="9e0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们训练我们的模型</p><p id="351e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单纯型精神分裂症</p><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="aec8" class="mo lg hh nn b fi nr ns l nt nu">rasa train</span></pre><p id="90d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在你激活的虚拟环境中。<br/>训练完成后<br/>你可以对你的<strong class="ig hi"> TravelBot <br/> </strong>说</p><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="d5ad" class="mo lg hh nn b fi nr ns l nt nu">rasa shell</span></pre><p id="1885" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看看它能否回答与您的<strong class="ig hi"> travel_support </strong>意图相似的问题。<br/> 1。如果是，你可以添加更多的意图。</p><p id="ddb1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.如果没有，添加更多的训练数据</p><p id="a18b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">干得好，伙计们，你们今天学到了很多。<br/>如果你喜欢我的作品<br/> <strong class="ig hi">分享</strong>和<strong class="ig hi">拍</strong>会很棒。<br/>关注作者:)</p><p id="719a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">https://github.com/sahibpreetsingh12/travel-bot</strong><a class="ae nv" href="https://github.com/sahibpreetsingh12/travel-bot" rel="noopener ugc nofollow" target="_blank">项目的Github回购</a></p></div></div>    
</body>
</html>