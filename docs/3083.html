<html>
<head>
<title>What’s the buzz about Parquet File format?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拼花文件格式有什么嗡嗡声？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/whats-the-buzz-about-parquet-file-format-8a1fe4f65de?source=collection_archive---------0-----------------------#2021-06-05">https://medium.com/analytics-vidhya/whats-the-buzz-about-parquet-file-format-8a1fe4f65de?source=collection_archive---------0-----------------------#2021-06-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/416c5b7c312f4b8aedb5ba5c0dee932b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FZd4BjovLm9Eq-Gt"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae iu" href="https://unsplash.com/@iammrcup?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cup先生/杨奇煜·巴拉</a>拍摄的照片</figcaption></figure></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><p id="9de7" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Parquet是一种高效的行列文件格式，支持压缩和编码，这使得它在存储和读取数据时性能更高</p><p id="dd2c" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Parquet是Hadoop eco系统中广泛使用的文件格式，它之所以被大多数数据科学界广泛接受，主要是因为它的性能。</p><p id="3a85" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">我们知道，parquet是一种行列式文件格式，但它在有效存储数据方面做得更多。</p><p id="c06a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在这篇博客中，我们将深入探讨parquet文件格式，以及为什么在大数据生态系统中它是首选。</p><p id="8c64" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">概述:</p><p id="83c1" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">拼花地板是由twitter和cloudera发起的，灵感来自https://research.google/pubs/pub36632/<a class="ae iu" href="https://research.google/pubs/pub36632/" rel="noopener ugc nofollow" target="_blank">的Dremel</a></p><p id="afcf" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">为什么我们需要担心文件格式？？</p><blockquote class="ka"><p id="1e9e" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">1.易于与当前管道集成</p><p id="2a37" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">2.更少的IO</p><p id="9672" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">3.更少的存储</p><p id="f656" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">4.网络IO</p><p id="0b84" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">5.费用</p><p id="1b8a" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">6.询问时间</p><p id="7209" class="kb kc hi bd kd ke kf kg kh ki kj jz dx translated">7.还有更多</p></blockquote><p id="7567" class="pw-post-body-paragraph jc jd hi je b jf kk jh ji jj kl jl jm jn km jp jq jr kn jt ju jv ko jx jy jz hb bi translated">Parquet是一种开源文件格式，适用于Hadoop生态系统中的任何项目。</p><p id="0768" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">从高层次上讲，我们知道拼花文件格式是:</p><ol class=""><li id="78d1" class="kp kq hi je b jf jg jj jk jn kr jr ks jv kt jz ku kv kw kx bi translated">混合存储</li></ol><p id="fe2e" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">2.支持嵌套列</p><p id="59f3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">3.二进制格式</p><p id="0a43" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">4.编码</p><p id="0a93" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">5.压缩的</p><p id="3d3a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">6.高效存储</p><p id="548c" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">我们将深入讨论以上所有内容。</p><p id="862a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">混合存储</strong></p><p id="7707" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">让我们举一个例子，看看数据是如何在Parquet中表示的。</p><p id="ba07" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">一个简单的示例文件:</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/6c1f660b5e6d7ec5ec389d59d9b4f866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijcVhKP6ixJwdU8GuqWv7A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">示例数据</figcaption></figure><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/5fee4f63b06a6d29056fbcbd19f61725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lq_5IMup6QPIzyfiPINOSw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">基于行的存储</figcaption></figure><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/573fd624c4a75947b85873d966006c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2QAQ4Oipucx3vr0hhBWzaw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">基于列的存储</figcaption></figure><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/9da55785c39311b78047c505c0436244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qb6u8zCPDzcnLX8dUsB_SA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">混合存储</figcaption></figure><p id="1c51" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在这里，我们可以看到混合存储是行存储和列存储的组合。</p><p id="9994" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在单个列变大的情况下，以面向列的方式存储它们不会带来任何更好的性能。</p><p id="2826" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">假设我们需要读取一个记录大小为一百万的表中的第二列。这里我们需要遍历第一列的一百万条记录，然后我们可以到达第二列。</p><p id="cfa9" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">另外，我们知道文件是不可变的，我们不能真正地在旧的列块中存储追加的新数据。</p><p id="e77b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">混合存储将在这方面提供帮助。</p><p id="1ac3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">支持嵌套列</strong></p><p id="8683" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">当我们列出任何包含拼花文件的目录时，我们会看到:</p><p id="a120" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">/my/path/to/parquet/folder/</p><p id="c5dd" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">-part-r-00000-dhb 447 FH 5-c123s-w 2232–23 hghgg 4534 a 12-snappy . parquet</p><p id="1d42" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">-part-r-00001-dhb 447 FH 5-c123s-w 2232–23 hghgg 4534 a 12-snappy . parquet</p><p id="815a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">让我们取一个嵌套的列文件，看看它在parquet文件格式中是如何表示的</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/dd16e021080170ed67554d521b5599d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZCNieSN-tkuNTYGL45XDcQ.png"/></div></div></figure><p id="cda4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">必需的</strong>:与父级相同的重复和定义级别</p><p id="c814" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">可选</strong>:与父级相同的重复值，递增定义级别</p><p id="6965" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">重复</strong>:增加重复和清晰度等级</p><figure class="kz la lb lc fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/eed27f4b6b2645ee2e3d249b808c0825.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*6QAa3zEWC4lpaVDrxAKk3w.png"/></div></figure><p id="c893" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">r值=该列是否重复，重复哪一级嵌套</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/845df477c82ca45d56e51f0383f49746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVGwhW_ToN8cjZGvpmR9Kg.png"/></div></div></figure><p id="68ab" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">D value =我们需要挖掘多远才能确定该值是否为空</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/42f54427a5e26bbde449794c482e174f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GkkujdrzcIGW6_koRnSyAg.png"/></div></div></figure><p id="f1f3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">已编码</strong></p><p id="3a12" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">使用Dremel编码方法，parquet将对嵌套的列进行编码。</p><p id="a358" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">基于数据的多少次重复，它将检查在什么定义，我们需要遍历找到该列的值。</p><p id="b80e" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">有不同的编码方案可用。对于当前的讨论，我们将只谈论重要的。</p><p id="aa61" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">普通:</p><p id="8a15" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在普通编码中，数据将按原样一个接一个地存储。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/9062808fdc1c6d9da6ead18293c0a9c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sXDE_sLH0-7rcRz_Wm8cpQ.png"/></div></div></figure><p id="9a76" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">增量编码:</p><p id="95bb" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在增量编码中，该列的值将被定义一次，对于重复的列，它将从先前定义的值中导出该值。</p><p id="b8aa" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在下面的例子中，我们可以看到该列的值正在增加。</p><p id="eef0" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">因此，我们将一次性写入编码数据，对于剩余的列，我们将从先前的列值中导出它。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/f5982cc9198e6498dd9828a36681630f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ga9T3fIWr9blCTmXUI4SXw.png"/></div></div></figure><p id="3d1b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">将近50次裁员</p><p id="5c28" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">字典编码:</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/319b207146cf2bc1d4254abbc49d6773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_wSzrh8ghiTRMtIIcCOFA.png"/></div></div></figure><p id="ebc8" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">几乎减少了80%到90%</p><p id="2612" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">注意:</p><ol class=""><li id="20ae" class="kp kq hi je b jf jg jj jk jn kr jr ks jv kt jz ku kv kw kx bi translated">如果字典变得太大，自动退回到普通</li></ol><p id="99d4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">2.你可以增加拼花地板的尺寸</p><p id="b221" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">3.或者减小拼花地板的尺寸</p><p id="b783" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">其他编码方案</p><p id="3115" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;素色</p><p id="a338" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;字典</p><p id="60a8" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;游程编码</p><p id="34d3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;增量编码</p><p id="3574" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;增量长度字节数组</p><p id="5208" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">&gt;三角弦</p><p id="fc3e" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">拼花文件中的数据表示</strong></p><ul class=""><li id="7831" class="kp kq hi je b jf jg jj jk jn kr jr ks jv kt jz lk kv kw kx bi translated">数据块(hdfs数据块):存储层(hdfs、adls、s3)中数据的逻辑分割</li><li id="8099" class="kp kq hi je b jf ll jj lm jn ln jr lo jv lp jz lk kv kw kx bi translated">文件:存储层(hdfs、adls、s3)中数据的物理块</li><li id="a695" class="kp kq hi je b jf ll jj lm jn ln jr lo jv lp jz lk kv kw kx bi translated">行组:数据按行的逻辑水平划分。对于行组，没有保证的物理结构。行组由数据集中每一列的列块组成。</li><li id="eaeb" class="kp kq hi je b jf ll jj lm jn ln jr lo jv lp jz lk kv kw kx bi translated">列块:特定列的数据块。它们位于特定的行组中，并且保证在文件中是连续的。</li><li id="52b1" class="kp kq hi je b jf ll jj lm jn ln jr lo jv lp jz lk kv kw kx bi translated">页面:列块被分成页面。页面在概念上是一个不可分割的单元(就压缩和编码而言)。在一个列块中可以有多种页面类型。</li></ul><p id="2aba" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">绘画作品:</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/fc0f6c7f9f2206b57dbc7e3a5d384352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yBKX2Ol8eiFk4Qiu_AjXOw.png"/></div></div></figure><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/cd9d9e9abb851cf665b4375d96c6972e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVqtnZUSt30eXOlvg2tp3g.png"/></div></div></figure></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><p id="f57b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">文件元数据</strong></p><p id="1de4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">包含模式、节俭头、偏移量、行数</p><p id="b21c" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">行组:一组行</p><p id="feda" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">单个文件中的多个行组</p><p id="ff70" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在行组下，将列剪切成块</p><p id="b89a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">如果单个值为空:不打算存储它</p><p id="9b5d" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">如果一整列为空:不存储</p><p id="f69d" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">列块:</p><p id="de45" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在列块共享页面标题内:</p><p id="6368" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在页眉下我们有页面</p><p id="bee9" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">拼花地板的单个原子值</p><p id="b2f2" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">元数据</p><p id="d329" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">r值</p><p id="0ce2" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">d值</p><p id="e5a3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">编码数据</p><p id="46eb" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">页脚:元数据&gt;文件、行组和列元数据</p><p id="b000" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">使用拼花地板进行优化</strong></p><p id="44da" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">谓词下推</p><p id="e46b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在使用where子句进行select查询的过程中，将根据查询子句省略数据的读取。</p><p id="6669" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Where子句将被推送到文件中，并与编码的元值(如min、max)进行比较，如果文件中不存在所需的数据，则将被排除。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/4eca53325f2fb581a4e725044669cc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ekb-K6E98gq8e9_1i-tfnQ.png"/></div></div></figure><p id="bdae" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">parquet . filter . dictionary . enabled = true</p><p id="d64a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">使用谓词下推时要记住的事情:</strong></p><p id="fb22" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">1.下推过滤器不适用于AWS s3，没有随机访问。因此，网络IO提取数据并应用过滤器</p><p id="09e6" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">2.下推过滤器不适用于嵌套列</p><p id="42a4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">3.极高值和极低值:先排序</p><p id="b227" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">4.在where子句中使用相同的数据类型</p><p id="7dbb" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">5.使用parquet写入速度较慢，因为它必须计算、创建行组、将其拆分成块，并使用编码数据写入元数据。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/25b3a35b386c529afe869c56130d5c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iCYNlpW4kKja_sI2.png"/></div></div></figure><p id="4d36" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">你可以在评论中发表你的反馈。</p><p id="0591" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">阿吉特·库玛尔·谢蒂</strong></p><p id="4e98" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">大数据工程师—热爱大数据、分析、云和基础设施。</p><p id="8a59" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><a class="ae iu" href="https://ajithshetty28.medium.com/subscribe" rel="noopener">订阅</a> ✉️ || <a class="ae iu" href="https://ajithshetty28.medium.com/" rel="noopener">更多博客</a>📝|| <a class="ae iu" href="https://www.linkedin.com/in/ajshetty28" rel="noopener ugc nofollow" target="_blank">链接在</a>📊|| <a class="ae iu" href="https://ajithshetty.github.io/" rel="noopener ugc nofollow" target="_blank">个人资料页面</a>📚|| <a class="ae iu" href="https://github.com/ajithshetty/" rel="noopener ugc nofollow" target="_blank"> Git回购</a>👓</p><p id="c325" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">订阅我的:</strong> <a class="ae iu" href="https://justenoughdata.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hj">每周简讯刚好够数据</strong> </a></p></div></div>    
</body>
</html>