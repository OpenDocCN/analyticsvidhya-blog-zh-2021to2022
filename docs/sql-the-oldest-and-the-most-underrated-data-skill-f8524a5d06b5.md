# SQL，最古老也最被低估的数据技能！

> 原文：<https://medium.com/analytics-vidhya/sql-the-oldest-and-the-most-underrated-data-skill-f8524a5d06b5?source=collection_archive---------3----------------------->

![](img/d45178011dd7074153394ee67c26a3e6.png)

# 介绍

我们生活在一个数字时代，每分钟都会产生大量的数据，即使你现在正在阅读这篇文章。此刻，即使没有数十亿人，也有数百万人在谷歌上搜索某些东西。数百万人在网上购物，更多的人在进行活跃的银行交易。随着数据的快速增长，企业需要一种有效的方法来存储这些信息，并分析这些信息。SQL 正是为了满足这一需求而构建的。但是在我们开始解释为什么 SQL 是一个被低估的工具之前，让我们看看 SQL 到底是什么。

# 什么是 SQL？

SQL ( *结构化查询语言)*是一种数据库语言，用于从关系数据库中创建、维护和检索信息。由 IBM 研究人员 Raymond Boyce 和 Donald Chamberlin 在 1970 年创建的 SQL，也被称为*的续集，*多年来已经成为数据科学家工具箱中的一个重要工具。它有助于与关系数据库通信，并处理数据以更好地理解数据库。你现在会问的自然问题是*“如果它如此重要，为什么它被低估了？”我正要说到这一点。*

# SQL 经常被忽视

![](img/a46e076130d8e935aa9b886f74e39d39.png)

图片来源:谷歌

随着最近围绕“数据”一词的所有讨论，许多新时代的编程语言已经出现，这些语言不仅能够随意操纵数据，还能够创建复杂的机器学习和深度学习模型。像 Python 和 R 这样的语言已经成为处理数据的首选。我本人是 python 功能的粉丝，但是我感觉在这个过程中 SQL 经常被忽略。我们如此痴迷于复杂的模型、丰富多彩的可视化和令人兴奋的预测，以至于 python 帮助我们做到了这一点，以至于我们完全忘记了数据的根源。想想看，你从哪里得到数据来做这些复杂的事情？是的，一个数据库。我怪各种网络课程教 SQL 的方式，往往保证上他们的课一两个月就能让你成为数据科学家(哈哈，真的吗？).

许多数据爱好者认为 SQL 只是一种可以用来编写查询的语言。作为一个把大部分时间花在机器学习上的人，我自己曾经批评过 SQL，说*“当我可以用 python 和 pandas 做所有的操作时，我为什么还需要 SQL？”*。如果你也这么想，小子，你需要看看这篇文章！我还记得我的一个朋友说“是的，SQL。没什么大不了的。都是关于' *select * from table'* 不是吗？”哇，这是一个超级简单的说法，但是是的。是真的。但也不是。实际上，正是 SQL 的魅力使它看起来如此简单，而实际上，您可以仅通过 SQL 而不是其他花哨的工具来实现很多功能。

# SQL 非常强大

![](img/54e55d697759b35e5d3ac0729ae54abe.png)

图片来源:谷歌

对于一种“仅仅”用于查询的语言来说，SQL 是非常强大的。你几乎可以做任何你能想到的数据操作任务。我个人最喜欢 SQL 的一点是，它的语法与英语非常相似。一旦我知道如何得到我想要的东西，不管查询有多复杂，我都不会花太多时间来编写查询。也就是说，除了简单易读的语法之外，SQL 还有一些非常强大的命令。为了让您真正理解为什么 SQL 比您想象的更强大，了解这些命令以及您可能使用它们的场景是很重要的。

## 绝对基础(选择、不同、从、在、排序依据)

这些是 DML(数据操作语言)命令，用于对表执行基本操作。SELECT 用于从表中提取记录。要从表中只获取唯一的值，必须使用 DISTINCT 和 SELECT。要选择需要记录的表，必须使用 from 命令。这是一个非常有用的过滤数据的命令。默认情况下，SELECT 命令按升序返回记录。如果需要不同的顺序，需要将 ORDER BY 命令与 DESC 一起使用。这些是最基本的命令，您将在为数据分析编写的几乎每个查询中使用它们。相当简单！但是真正的乐趣马上就要开始了！

## 分组依据和汇总函数

当您需要从数据中生成汇总报告时，GROUP BY 命令非常强大和方便。GROUP BY 与计数、求和、AVG、最大值等汇总函数相结合。您可能使用此命令的一个例子是，当您需要查找过去 6 个月内您每月的收入(按类别细分)时。您很可能有一个包含交易日期、交易金额和交易类别的交易表。您将使用 GROUP BY 将数据按月份和类别分组，并使用 Sum summary 函数查找每个月每个类别的收入。相当甜蜜和整洁！

## 连接

![](img/7d9cf15143579c6a6ea2fd6425c93ba4.png)

图片来源:谷歌

我认为这是所有命令中最重要的 SQL 命令。如果您从来没有使用过 SQL 连接，您就永远不会真正看到 SQL 的全部潜力。联接用于合并两个或多个表。这有助于您全面了解数据，否则这些数据会分散在数据库中。现在，根据您试图解决的问题，您可以使用多种类型的连接。内部连接将获取两个表中都匹配的连接表中的所有记录。左连接和右连接是相同的，但是它们返回在任一个表中都存在的记录。还有另一种类型的连接称为外部连接，它返回两个表中的所有记录，但是您会发现自己很少使用它。使用连接的一个例子是，当您需要查找您的客户来自哪个城市时。您很可能会有一个*用户*表和一个*城市*表，并且您必须连接这两个表来提取每个客户的城市信息。相当得心应手！

## 子查询、临时表和 CTE 表

我喜欢的其他 SQL 特性包括子查询、临时表和 cte。虽然它们之间肯定有一些性能差异，但它们都服务于相同的目的。在获取数据进行分析时，您经常会发现自己需要一个查询的结果，并在另一个查询中使用它来进一步操作数据。如果不是因为 SQL，这将是一个非常令人头痛的问题！(啊，真是救命恩人)。SQL 有三种不同的方法来实现这一点。然而，我个人最喜欢的是 CTEs。(比较这三者超出了本文的范围，所以请注意我将写的关于这一点的另一篇文章)。例如，当您需要获得所有学校的名称及其详细信息，如学区、该学校的学生以及该特定学区内每所学校的平均学生人数时，您会用到这些信息。这里只有一个包含学校详细信息的表，但是要获得每个地区的平均学生人数，您别无选择，只能使用 CTE 并连接两个汇总表。(一个是一所学校的学生，另一个是每个地区每所学校的平均学生。我将在接下来的文章中详细讨论 CTE 的问题。真是救命恩人！

## 什么情况下

可以把这想象成在其他编程语言中通常使用的 IF-ELSE 阶梯。这非常有助于有条件地为您的记录赋值。您可能会发现自己使用这种方法的一个例子是，当您需要根据每个学生的分数给他们打分时。你有一个学生和他们的分数表，你将使用 CASE 时，根据一些预设的标准分配给每个学生一个等级。

## 窗口功能

当您需要处理表中与当前行相关的其他记录时，这些功能非常强大。这些节省了大量的时间，并使整个操作相当无缝。有几个不同的窗口功能，领先，滞后，排名，等等。LEAD 获取相对于当前行的下一条记录。LAG 做的正好相反，获取相对于当前行的前一行。RANK 根据某些特定标准为记录指定一个等级。窗口函数需要和 OVER 子句一起使用。使用窗口函数的一个例子是，当您想从每个地区查找前 20 名客户时。您将拥有一个包含客户详细信息及其所在地区和收入的表格。然后使用 RANK 函数对每个地区的所有客户进行排名，最后使用 WHERE 子句筛选前 20 名客户。超级干净！

# 最后的想法

这些只是我在处理数据项目时经常使用的 SQL 的一些超级方便的特性。SQL 的灵活性使其成为数据分析的最佳工具之一。SQL 通常被认为只是一种查询语言，事实也的确如此，但是如果您真正了解它的功能，您会毫不犹豫地使用它进行分析。它消除了导出数据和使用 python 进行所有操作的麻烦。毕竟，为什么要把你能轻易做到的事情复杂化呢？

希望这篇文章对你有所帮助。考虑与你认为应该读这篇文章的人分享这篇文章！

*原载于 2021 年 5 月 9 日*[*【https://praneethvasarla.com】*](https://praneethvasarla.com/sql-the-oldest-and-the-most-underrated-data-skill/)*。*