<html>
<head>
<title>Workflow Automation using Azure DataFactory and LogicApp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Azure DataFactory和LogicApp实现工作流自动化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/workflow-automation-using-azure-datafactory-and-logicapp-98a365aeed90?source=collection_archive---------14-----------------------#2021-01-13">https://medium.com/analytics-vidhya/workflow-automation-using-azure-datafactory-and-logicapp-98a365aeed90?source=collection_archive---------14-----------------------#2021-01-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/07bf3ad08151376aac790c4b2708416e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGsbloEuVj4ARFHI0Z9vWg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">Azure数据工厂</figcaption></figure><blockquote class="it iu iv"><p id="e745" class="iw ix iy iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju ha bi translated">Data Factory是最流行的基于云的编排、ETL和集成服务之一，适用于各种数据驱动的工作流。</p></blockquote><p id="b9eb" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">作为一名数据工程师，我的工作围绕着为商业智能和分析设计和部署基于云的解决方案和数据处理框架。在开发端到端解决方案时，Azure data factory是我最喜欢的服务之一。它非常通用，有多个数据连接器，git repo集成，还提供监控功能。</p><p id="22af" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">我创建了一个非常简单的adf管道来解决下面描述的业务问题。</p><p id="aa77" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">业务用例:</strong>假设你是一个全球B2B企业主，在多个地点拥有业务。您需要跟踪所有相关地点的天气状况，因为它们可能会影响您关于产品库存或供应链问题处理、能源消耗、工作现场状态等方面的决策或计划。拥有一个可以监控整个流程并定期发送所需警报的自动化工作流，将会提高生产率和效率，并为客户增加丰富的业务价值。</p><p id="75be" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">我将使用Azure服务实现上述工作流:- <br/> 1。<strong class="iz hi">数据工厂</strong> —建立端到端的管道<br/> 2。<strong class="iz hi"> LogicApp </strong> —向客户发送电子邮件通知<br/> 3。<strong class="iz hi">存储账户</strong> —将天气信息作为JSON存储在容器中</p><p id="418d" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">我使用<strong class="iz hi"> AccuWeather API </strong>服务通过位置id获取天气信息。</p></div><div class="ab cl jy jz go ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ha hb hc hd he"><h1 id="6ba7" class="kf kg hh bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">先决条件</h1><ol class=""><li id="cdf6" class="ld le hh iz b ja lf je lg jv lh jw li jx lj ju lk ll lm ln bi translated">Azure云、HTTP和ETL基础知识</li><li id="ea87" class="ld le hh iz b ja lo je lp jv lq jw lr jx ls ju lk ll lm ln bi translated">Azure订阅(您可以创建一个新帐户并获得初始免费试用点数)</li><li id="1e8c" class="ld le hh iz b ja lo je lp jv lq jw lr jx ls ju lk ll lm ln bi translated">AccuWeather开发者帐户</li></ol><h1 id="084a" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">创建Azure数据工厂</h1><p id="9068" class="pw-post-body-paragraph iw ix hh iz b ja lf jc jd je lg jg jh jv ly jk jl jw lz jo jp jx ma js jt ju ha bi translated">转到您的资源组并创建一个数据工厂资源(如果您没有现有的资源)。单击“作者和监控”并创建一个新管道“天气监控管道”。</p><p id="82e4" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">我的管道流:- </strong> <br/>提取配置文件- &gt;调用WebAPI获取配置文件中每个位置/城市的天气详情- &gt;过滤出预测有雨的位置- &gt;发送电子邮件通知</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mb"><img src="../Images/aa6876239d4324c658e4a1b00f72a8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h60_JXbY6FbRGEKcYsaXgQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">数据工厂管道</figcaption></figure><p id="c418" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">变量</strong>:在整个流水线执行过程中使用。<br/> 1。Api密钥-从您的AccuWeather开发者帐户获取(MyApps - &gt;添加新应用- &gt;密钥- &gt; API密钥<br/> 2。天气数据-存储Web API响应的数组。多雨城市-存储过滤后的数据以发送到LogicApp的数组</p><p id="3f47" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">存储账户:</strong>包含一个容器<strong class="iz hi">【天气监视器】</strong>和一个<strong class="iz hi">【位置配置. JSON】</strong>文件，用于存储所有位置的元数据。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/588a4f1b79621c6117c0c7ae57e72e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uUJvMRyDoWgrUvkR527iVg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">Azure存储帐户</figcaption></figure><h1 id="19a0" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤1:添加“查找”活动</h1><p id="b3d8" class="pw-post-body-paragraph iw ix hh iz b ja lf jc jd je lg jg jh jv ly jk jl jw lz jo jp jx ma js jt ju ha bi translated">我们首先需要从上面的容器中获取<strong class="iz hi"> 'Location config.json' </strong>文件。添加一个“<strong class="iz hi">查找</strong>活动，并创建一个“<strong class="iz hi"> Azure </strong> <strong class="iz hi"> Blob存储”</strong>源数据集，具有<strong class="iz hi"> JSON </strong>格式。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mh"><img src="../Images/d6bc7493b2317f76e2f4bab4eaa3446e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmBNrnMAymH_lBnIhc2LqA.png"/></div></div></figure><p id="0595" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">我们需要一个<strong class="iz hi">‘linked service’</strong>来连接上述数据集和存储帐户。我已经使用了<strong class="iz hi">Azure Key</strong><strong class="iz hi">vault</strong>来管理存储账户的<strong class="iz hi">Key</strong>和<strong class="iz hi"> secrets </strong>。<br/> <strong class="iz hi">文件路径</strong> —存储配置文件的位置。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/9989a3fa96cac2d01a877a12ae58f024.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppibXTL2XuFDCp9h5d-L2g.png"/></div></div></figure><p id="015a" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><em class="iy">注意:记住在保存数据集之前测试连接。</em></p><h1 id="f975" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤2:添加“ForEach”活动</h1><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mj"><img src="../Images/c2292e405e08bb583f22416e2ea61c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*be1bbT-UvJftynaLvAzshw.png"/></div></div></figure><p id="6e78" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">这将遍历我们想要获取天气信息的城市列表。</p><pre class="mc md me mf fd mk ml mm mn aw mo bi"><span id="485c" class="mp kg hh ml b fi mq mr l ms mt"><a class="ae mu" href="http://twitter.com/activity" rel="noopener ugc nofollow" target="_blank"><strong class="ml hi">@activity</strong></a><strong class="ml hi">(‘Fetch Location Meta data’).output.value</strong></span></pre><p id="3fa7" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">我们将在“ForEach”活动中添加3个活动。</strong></p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/2597d9a66a263a1e11f3708002c9e72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q03DxSOi8mwj49bNzhjs4A.png"/></div></div></figure><ol class=""><li id="7d18" class="ld le hh iz b ja jb je jf jv mw jw mx jx my ju lk ll lm ln bi translated"><strong class="iz hi">“复制”活动— </strong>从Web API获取天气数据，并将结果作为blob文件存储在容器<br/> <strong class="iz hi">源— </strong> HTTP Web API中</li></ol><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mz"><img src="../Images/e177c413ddeb7693cd98f35b8a46d8ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHtvYmnslEFgEoiOPTkK3g.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">活动1来源:HTTP</figcaption></figure><p id="5ef5" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">创建源'<strong class="iz hi"> HTTP' </strong>数据集和链接服务。添加一个数据集参数来传递来自先前复制活动的相对URL(包含特定的<strong class="iz hi"> locationID </strong>)。</p><pre class="mc md me mf fd mk ml mm mn aw mo bi"><span id="7b27" class="mp kg hh ml b fi mq mr l ms mt"><a class="ae mu" href="http://twitter.com/concat" rel="noopener ugc nofollow" target="_blank">@concat</a>(item().locationId,’?apikey=’,variables(‘Api Key’))</span></pre><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es na"><img src="../Images/f981cb4ac9b2f3e9ec5b71e8a63a9822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A6XiJhNGC53tICybRZWDgQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">源数据集HTTP API</figcaption></figure><p id="c452" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">水槽</strong>——“Azure Blob存储”</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nb"><img src="../Images/3c40a21e46d9c181782be3f4cc7a20ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5t-RwxFTNn6WvXP8T-LeqQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">活动1接收器:Blob存储</figcaption></figure><p id="a34f" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">类似地，创建接收器'<strong class="iz hi"> BLOB存储'</strong>数据集和链接服务。</p><pre class="mc md me mf fd mk ml mm mn aw mo bi"><span id="6b80" class="mp kg hh ml b fi mq mr l ms mt"><a class="ae mu" href="http://twitter.com/concat" rel="noopener ugc nofollow" target="_blank">@concat</a>(item().locationId,’?apikey=’,variables(‘Api Key’))</span></pre><p id="43f3" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><em class="iy">我们正在使用“Api密钥”变量的值。</em></p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nc"><img src="../Images/45e89daf5c2896b8221352ab3a334fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZmmoMnI6w8Anw3sm77F31g.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">接收器数据集Blob存储</figcaption></figure><p id="ad38" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">输出:- </strong></p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nd"><img src="../Images/a3c5d5124055a83826db4992e8907c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uC0UvIloLPzNgthWnBbr2w.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">生成的Blob文件</figcaption></figure><p id="5e54" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi"> 2。“查找”活动— </strong>从容器<strong class="iz hi">“天气监视器”</strong>中读取创建的JSON blob文件的内容。我们将使用之前创建的现有Blob存储数据集(尽可能重用数据集和链接服务)。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ne"><img src="../Images/a0487e8edbb7ba5f7168fad8ca9e9a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OrHqtFCDKIzgMBjyUC-HYg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">活动2:从容器中提取JSON文件</figcaption></figure><p id="309b" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">输出如下所示:-</p><p id="7260" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi"> 3。如果' condition activity — </strong>将从先前的activity中读取文件内容，如果关键字'<strong class="iz hi">类别</strong>是'<strong class="iz hi"> rain </strong>'，它将使用<strong class="iz hi">' Append Variable '</strong>activity将输出追加到'<strong class="iz hi">rain city</strong>'数组变量中。</p><pre class="mc md me mf fd mk ml mm mn aw mo bi"><span id="6c6e" class="mp kg hh ml b fi mq mr l ms mt"># If Condition<a class="ae mu" href="http://twitter.com/equals" rel="noopener ugc nofollow" target="_blank"><br/>@equals</a>(activity('Extract from BLOB').output.value[0].Headline.Category,'rain')</span><span id="2815" class="mp kg hh ml b fi nf mr l ms mt"># Add JSON output to array<br/>Rainy Cities = <a class="ae mu" href="http://twitter.com/activity" rel="noopener ugc nofollow" target="_blank">@activity</a>('Extract from BLOB').output.value[0].headline</span></pre><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ng"><img src="../Images/5cc7f0135c8f99e69deb94ad0197a2b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5c3WXA9NL1X0o9HvC8HiEg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">活动3:过滤掉“类别”为“雨”的数据</figcaption></figure><h1 id="f98a" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤3:添加“如果”条件活动</h1><p id="96fb" class="pw-post-body-paragraph iw ix hh iz b ja lf jc jd je lg jg jh jv ly jk jl jw lz jo jp jx ma js jt ju ha bi translated">我们将检查“多雨的城市”变量是否包含数据，因为我们希望避免用空数据触发LogicApp。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nh"><img src="../Images/51d12857e4f362b8cbd8ef44cb479466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZ7Qbu6QU84YP846jbkwRA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">检查最终输出是否包含数据</figcaption></figure><h1 id="05ef" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤4:添加“Web”活动以调用LogicApp</h1><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ni"><img src="../Images/6bff4859ecd651ba6b1f3401c4317608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p36638lBPsz7HGXCTuFxwQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">通过网络活动呼叫LogicApp</figcaption></figure><p id="341a" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">URL:从LogicApp <br/> Body中提取:要发送到LogicApp的数据</p><pre class="mc md me mf fd mk ml mm mn aw mo bi"><span id="ed33" class="mp kg hh ml b fi mq mr l ms mt">{<br/>  "EmailTo": "<a class="ae mu" href="mailto:shefali.bisht@gmail.com" rel="noopener ugc nofollow" target="_blank">shefali.bisht@gmail.com</a>",<br/>  "EmailBody": <br/>   @{variables('Rainy Cities')}<br/>}</span></pre><p id="41a7" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">如果正文格式不正确，活动将失败，并显示无法解析JSON错误。</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nj"><img src="../Images/586c2c03f9334cfa05f04e6d6699138c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYqL4oDqa462q_R1nlnWZA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">LogicApp发送电子邮件</figcaption></figure><h1 id="cfbb" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤5:验证和调试管道</h1><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nk"><img src="../Images/8f10b277790dc71f7e9903f814440178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xhr929mxMK_UJujzBO6V2w.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">初始管道运行</figcaption></figure><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nl"><img src="../Images/ad6ed65d4afa58fcfba924f61e339d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyV5yVAGOM2rKo6c5NynJQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">管道成功</figcaption></figure><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nm"><img src="../Images/319231c604971ff71189aec2d31e0729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ffxtvJ5SipyvzQ4oV96BA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">LogicApp触发的电子邮件</figcaption></figure><h1 id="725a" class="kf kg hh bd kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky lx la lb lc bi translated">步骤6:验证存储容器的输出</h1><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nn"><img src="../Images/ef8c41761dab25af83179f494fbf1841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ls3uksU5L4gWSpLerTWQsw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">具有已创建输出文件的存储帐户</figcaption></figure><p id="1985" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">如您所见，容器中创建了包含天气信息的所有5个位置的blob(' location name _ location id . JSON ')。由于这5个城市中只有3个预报有“雨”，我们在电子邮件通知中只看到3个城市的名称。</p></div><div class="ab cl jy jz go ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ha hb hc hd he"><p id="ef4d" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi">进一步改进:- <br/> </strong> 1。我们可以在天气监视容器中创建一个<strong class="iz hi">目录</strong>结构。每当管道运行时，它将为当前日期创建一个文件夹，并在该文件夹中创建所有的JSON文件。对<strong class="iz hi">历史</strong>数据存储和<strong class="iz hi">分析</strong>有用。<br/> 2。如果需要对数据进行复杂的处理或操作，我们可以使用<strong class="iz hi"> databricks </strong>,因为仅使用adf进行转换是有限且昂贵的。<br/> 3。可以使用粒度级安全性，如<strong class="iz hi"> RBAC </strong>或<strong class="iz hi"> AAD </strong>，但这完全取决于组织和业务用例。</p><p id="084b" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated"><strong class="iz hi"> <em class="iy"> **注:我们使用的服务越多，我们需要支付的费用就越多。当涉及到结构化或非结构化数据、日志存储或数据归档时，Azure blob storage等廉价服务总是一个明智的选择。</em> </strong></p><p id="32e1" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">我决定不在文章中包括所有细节，因为我想保持它的最佳阅读目的。我将在另一篇文章中介绍<strong class="iz hi"> LogicApps </strong>和<strong class="iz hi"> Key Vault </strong>安全基础知识，因为这些主题也有点冗长。</p><p id="1dda" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh jv jj jk jl jw jn jo jp jx jr js jt ju ha bi translated">如果您对以上设计的工作流程、数据工程或Azure cloud有任何疑问或问题，请随时通过<a class="ae mu" href="https://www.linkedin.com/in/shefali-bisht/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p></div></div>    
</body>
</html>