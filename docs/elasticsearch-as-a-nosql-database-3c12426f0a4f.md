# 作为 NoSQL 数据库的弹性搜索

> 原文：<https://medium.com/analytics-vidhya/elasticsearch-as-a-nosql-database-3c12426f0a4f?source=collection_archive---------1----------------------->

![](img/ee578732b9b2e32b05d17337246bdc68.png)

[图片来源:https://www.pharmathirdpartymanufacturer.com/](https://www.pharmathirdpartymanufacturer.com/)

Elasticsearch 是一个分布式开源搜索引擎和分析数据库，由 java 在 Apache Lucene 上开发。它允许在几秒钟内存储数据、搜索和分析大量数据。它通过搜索索引实现快速搜索响应。它作为 RESTful API 用于更新、创建和搜索。因此，作为核心的 Elasticsearch 处理 JSON 请求，结果将以 JSON 格式返回。而 Elasticsearch 最棒的地方就是开源，而且是免费的。弹性搜索的术语不同于传统的数据库术语。这里，数据库被称为索引，表被称为类型，行被称为文档。

# **主要特点:**

Elasticsearch 在分布式环境中工作。它提供了企业级的安全性和易于理解的 API。

## 【Elasticsearch 的亮点在哪里？

**搜索查询:**

在搜索查询中，它根据分数匹配结果。对于每个查询，它返回一个结果集合，并为其分配一个分数。分数指示结果与搜索查询参数和条件的匹配程度。

**过滤器:**

评分没有不确定性，因此过滤器比查询快得多。无论特定文档是否包含该术语，它都只是一个二元结果。

它的其他一些特征是:

*   可扩展性和弹性—集群随着需求而增长。
*   集群和高可用性—碎片和副本架构处理节点故障。如果一个碎片失败了，那么复制品将代替它。
*   自动节点恢复—当一个节点出现故障时，主节点将分配与节点碎片相关联的副本。
*   自动数据重新平衡—主节点决定碎片的节点分配，并在节点之间移动碎片以重新平衡群集。
*   横向可伸缩性——当使用率增加时，Elasticsearch 也会随之扩展。
*   apache spark、pig、hive、storm 中的支持—通过 Elasticsearch for Hadoop 为 spark 提供一流的支持。
*   商业智能-支持 Tableau 桌面。MS powerBI、MS Exel SQL Workbench 等等。
*   插件和集成——许多插件和集成是免费的。
*   管理 API—可以使用各种与管理相关的 API 来管理 Elasticsearch。

以上只是几个要点，在弹性研究中还有许多其他的特点。

# 基本概念和术语。

**数据模型**

在典型的 RDBMS 中，我们以表格的形式存储数据。一行代表一条有用的信息。但是在 Elasticsearch 中我们以 JSON 字符串的形式保存数据。Elasticsearch 中的一个 JSON 字符串叫做文档。RDBMS 术语中的 JSON 字段是列，值本身是值。

在 Elasticsearch 中有几个架构和数据建模术语，我将简短地解释它们。

**索引**

Elasticsearch 中的索引类似于关系数据库管理系统中的数据库。索引是最大的单元，是弹性搜索中最大的数据逻辑分区。考虑一个博客应用程序，您可以在一个索引中存储与博客、作者和出版物以及读者相关的所有信息。在 Elasticsearch 集群中可以有任意数量的索引，并且应该为每个索引分配一个唯一的名称。这些将保存多种类型(表)。一个类型中有多个文档(行)，每个文档可能有几个属性(列)。

**映射**

文档如何被索引和存储文档字段由映射定义。Elasticsearch 中的映射类似于 RDBMS 中的模式。映射描述了文档的属性及其包含的字段、字段的数据类型，以及 Lucene 应该如何索引和存储它。创建索引后，正确定义映射非常重要。不适当的预备性描述和映射可能会导致错误的搜索结果。诸如 _index 和 _id 之类的元数据字段也应该包括在映射中。有两种类型的映射动态映射和显式映射。各有各的好处。

**映射类型**

不要混淆映射类型和数据类型。Elasticsearch 使用文档中的类型将相似类型的数据分成不同的类，每个类定义一组独特的文档。一个索引可以有任意数量的类型。属于这些类型的文档可以分别存储在每个类型中。Type 包含一个名称和一个映射，通过添加一个 type 字段来使用它。当以特定类型查询时，这些字段对过滤很有用。

**文件**

当我们正式定义文档时，文档是我们存储在 Elasticsearch 中的信息的最小数据单元。您可以将 Elasticsearch 的文档等效为关系数据库中代表一个实体的一行。例如，让我们考虑一个博客应用程序。在那里，您可以为每个博客帖子创建一个文档。特定类型(表格)中的文档数量没有限制。文档中的数据由包含键和值的字段定义。键是字段的名称，而值是与之关联的数据。该值可以是字符串、数字、布尔值或任何其他对象，如数组或列表。一些保留字段(如索引、类型和 id)被标识为文档元数据。

**碎片和复制品**

当索引大小超过托管服务器的磁盘大小限制时，Elasticsearch 可能会崩溃。克服这一挑战的一个方法是使用碎片。创建索引时，您可以定义想要包含在其中的碎片和副本的数量。分片意味着将索引分成多个部分。每一块都被称为碎片。Shard 作为一个全功能索引工作，可以托管在集群中的任何节点上。分片允许您水平分割数据量，还可以通过多个节点并行化进程，从而提高性能。复制品是碎片的复制品。它作为一个备份。当特定节点崩溃时，它的副本将开始为读取请求提供服务。因此，副本有助于提高搜索性能。碎片和它的副本不应该放在同一个节点上，以确保高可用性。副本的数量可以在创建索引时定义，如果以后需要也可以更改。

**节点**

节点保存我们的数据，并为集群索引和搜索能力做出贡献。一个节点可以被识别为集群中的一台服务器。节点启动时分配给它的随机通用唯一标识符。我们需要我们可以编辑它。有几种类型的节点，如主节点、数据节点和客户端节点等。他们每个人都有自己的工作要做，不同的配置。

**集群**

Elasticsearch 是一个分布式环境。保存全部数据的一个或多个节点的集合称为集群，它提供搜索功能和索引。可以有任意数量的节点具有相同的集群名称。群集有一个唯一的标识符，节点在加入群集时必须使用它。集群中的一个节点被识别为主节点，它由集群本身自动选择。主节点负责群集的配置和管理。如果主节点出现故障，群集中的另一个节点将被选为主节点。我们可以从集群的任何节点进行查询，但是节点也会将查询转发到数据所在的其他节点。

# **优势**

因为它是由 Java 开发的，所以它兼容所有平台。它的另一个优点是搜索的速度和高性能。因为，它是一个实时搜索引擎，你可以在其中存储数据，并利用它的功能搜索你的数据。Elasticsearch 有一个分布式架构，因此您可以在需要时扩展它。它支持任何支持文本呈现的文档类型。最后，它是开源的，没有下载成本。

# **劣势**

从技术上来说，使用 Elasticsearch 作为中央数据存储是可能的，但不能保证其准确性。每个文档都将附加一个版本号，它将单调递增。当两个写调用进入弹性搜索时，两个都将并发写入，但是它将只保留最新的版本。从技术上讲，Elasticsearch 不支持 ACID 属性，并且很少在 Elasticsearch 中出现裂脑情况问题。

任何想创建搜索引擎或想分析数据(如交易数据、日志数据)以从中提取有用信息的人，都可以使用 Elasticsearch。此外，Elasticsearch 在实现集中式日志记录系统时非常有用，该系统可以从位于不同位置的不同服务器捕获日志，以存储日志并分析来自一个位置的日志。Elasticsearch 文档有多种语言版本，内容详尽。支持论坛、博客和 YouTube 视频都可用于 Elasticsearch。因此，对于打算开始使用它的人来说，这很容易。

如果你发现有什么不对或者有什么要补充的，请随时评论。谢谢你。