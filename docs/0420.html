<html>
<head>
<title>Getting Started With Flask-RESTful API And Deploying to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始使用Flask-RESTful API并部署到Heroku</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/flask-restful-api-with-heroku-da1ecf3e04b?source=collection_archive---------1-----------------------#2021-01-16">https://medium.com/analytics-vidhya/flask-restful-api-with-heroku-da1ecf3e04b?source=collection_archive---------1-----------------------#2021-01-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="ceba" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="f07f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在进入编码和部署部分之前，让我们从一些我们应该知道的基本主题开始。</p><p id="2d63" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">什么是烧瓶？</strong></p><p id="167e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Flask是一个简单而强大的微型web框架。它主要用于在Python中创建API。Flask依赖于<a class="ae kf" href="https://palletsprojects.com/p/jinja/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi"> Jinja </strong> </a>模板引擎和<a class="ae kf" href="https://palletsprojects.com/p/werkzeug/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi"> Werkzeug </strong> </a> WSGI工具包。微web框架中的“微”意味着Flask旨在保持核心简单但可扩展。</p><p id="187d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Flask不包括数据库抽象层、表单验证或其他任何已经存在的不同库可以处理的东西。相反，Flask支持扩展，将这种功能添加到您的应用程序中，就好像它是在Flask本身中实现的一样。许多扩展提供了数据库集成、表单验证、上传处理、各种开放认证技术等等。Flask可能是“微型”的，但是它已经准备好用于各种需求的生产。你可以在这里 查看官方烧瓶文档<a class="ae kf" href="https://flask.palletsprojects.com/en/1.1.x/#" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi">。</strong></a></p><p id="e851" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">什么是API？</strong></p><p id="b05c" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">API代表应用程序编程接口。它提供了一个软件接口或者作为一个媒介，允许两个应用程序互相对话。例如:当我们登录到脸书，脸书应用程序调用用户认证API，验证我们的脸书帐户是否有效，并给我们访问各自的用户帐户。对于Flask-API，我们可以从其官方文档中给出的<a class="ae kf" href="https://flask.palletsprojects.com/en/1.1.x/#api-reference" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi">这里</strong> </a>开始。</p><blockquote class="kg kh ki"><p id="47e1" class="jc jd kj je b jf ka jh ji jj kb jl jm kk kc jp jq kl kd jt ju km ke jx jy jz ha bi translated">什么是长颈瓶RESTful？</p><p id="876d" class="jc jd kj je b jf ka jh ji jj kb jl jm kk kc jp jq kl kd jt ju km ke jx jy jz ha bi translated">Flask-RESTful是对Flask的扩展，用于构建REST APIs。你可以在这里 查看它的官方文档<a class="ae kf" href="https://flask-restful.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi">。</strong></a></p></blockquote><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es kn"><img src="../Images/dff5c2294980c6746bd4801fae0448a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*O0TqSEfoD4mniuMEZFETng.png"/></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">来源:官方文件</figcaption></figure><p id="e95e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">什么是REST API？</p><p id="b66d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">REST代表“代表性状态转移”。它是开发人员在创建API时遵循的一组规则(或设计模式)。</p><blockquote class="kg kh ki"><p id="5306" class="jc jd kj je b jf ka jh ji jj kb jl jm kk kc jp jq kl kd jt ju km ke jx jy jz ha bi translated">RESTful API使用命令来获取资源。这些资源可以是文本文件、Html页面、图像、视频或动态业务数据。REST服务器只提供对资源的访问，REST客户机访问和修改资源。</p><p id="552f" class="jc jd kj je b jf ka jh ji jj kb jl jm kk kc jp jq kl kd jt ju km ke jx jy jz ha bi translated">资源在任何给定时间戳的状态称为资源表示，API调用是无状态的。</p></blockquote><p id="26d0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">RESTful API使用现有的HTTP操作方法，例如:</p><ul class=""><li id="b9f6" class="kz la hh je b jf ka jj kb jn lb jr lc jv ld jz le lf lg lh bi translated">获取以检索资源；</li><li id="0c47" class="kz la hh je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh bi translated">放置以改变资源的状态或更新资源，该资源可以是对象、文件或块；</li><li id="a29e" class="kz la hh je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh bi translated">发布以创建资源；和</li><li id="876f" class="kz la hh je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh bi translated">删除以移除它。</li></ul><h1 id="4d46" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">例子</h1><p id="03d3" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">现在，在基本介绍之后，让我们从编码部分开始。</p><p id="0d59" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">让我们创建一个名为<strong class="je hi"><em class="kj">flask-restful-heroku</em></strong><em class="kj"/>的目录。然后，在这个目录下，创建一个名为<strong class="je hi"> <em class="kj"> venv </em> </strong>的虚拟环境。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="19e6" class="ls if hh lo b fi lt lu l lv lw">$ virtualenv venv</span></pre><p id="19ec" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">激活创建的虚拟环境。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="a2d5" class="ls if hh lo b fi lt lu l lv lw">$ source ./venv/bin/activate</span></pre><p id="0026" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，安装Flask和Flask-RESTful。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="2085" class="ls if hh lo b fi lt lu l lv lw">$ pip install Flask<br/>$ pip install flask-restful</span></pre><p id="5c7b" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们将使用gunicorn作为服务器。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="7663" class="ls if hh lo b fi lt lu l lv lw">$ pip install gunicorn</span></pre><p id="4ab2" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在项目目录下创建一个名为<strong class="je hi"> <em class="kj"> main.py </em> </strong>的文件。该目录将如下所示:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es lx"><img src="../Images/6fa5535fea6d97ee5aa6b8e33cc5431b.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*FvIEhyqalMWbWJFUdFvfTA.png"/></div></div></figure><p id="6b72" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">将下面的代码复制到<strong class="je hi"> <em class="kj"> main.py </em> </strong>。这是一个最小的Flask-RESTful API。</p><figure class="ko kp kq kr fd ks"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="23bc" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">保存文件<strong class="je hi"> <em class="kj"> main.py </em> </strong>并使用python解释器运行它。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="31b6" class="ls if hh lo b fi lt lu l lv lw">$ python main.py</span></pre><p id="de8a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">它将看起来如下。</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es me"><img src="../Images/945898432e6b0ed08a05bd2c0cd083b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XEBE70E1Eg6prjxXdr5uvw.png"/></div></div></figure><p id="7b21" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">要使用WSGI服务器运行文件，首先通过按下<em class="kj"> CTRL+C. </em>来停止flask应用程序</p><p id="7ced" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后，在项目目录中创建一个名为wsgi.py的文件。该目录将如下所示:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mf"><img src="../Images/1ecdb40ac5cd51f21dc8db6470fe8926.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*hxRLeAzhQZHE5EfsMYhEqQ.png"/></div></figure><p id="48a1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，将下面的代码复制到wsgi.py。我们正在准备运行WSGI服务器的文件。</p><figure class="ko kp kq kr fd ks"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="76a0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后，使用WSGI服务器运行该文件。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="e8de" class="ls if hh lo b fi lt lu l lv lw">$ flask run</span></pre><p id="97d3" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后，通过按下<em class="kj"> CTRL键并点击url上的</em>来跟踪该URL。您将被重定向到默认浏览器中指向该url的新选项卡。您将在浏览器中获得以下输出。</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mg"><img src="../Images/5d44ea8f65791c5d47d29c3cfe4f0b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*fWLjEtW2GNZCu0IBpDZjrg.png"/></div></figure><p id="0206" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在这里，如果flask运行在调试模式下，对我们来说就很容易了。因此，更改会自动实现。因此，使用<em class="kj"> CTRL+C </em>停止生产服务器，并使用python解释器再次运行main.py文件。通过按下<em class="kj"> CTRL键并点击url上的</em>来跟踪URL。您将被重定向到默认浏览器中指向该url的新选项卡。您将获得与上面相同的输出。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="5293" class="ls if hh lo b fi lt lu l lv lw">from flask import Flask, jsonify<br/>from flask_restful import Resource, Api</span></pre><p id="a7e7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这里，我们已经导入了所需的库Flask、jsonify、Resource和Api。“jsonify”用于将Python字典结构转换为json格式。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="83b6" class="ls if hh lo b fi lt lu l lv lw">app = Flask(__name__)<br/>api = Api(app)</span></pre><p id="dfe9" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">首先，我们已经初始化了flask app。然后，我们将flask应用程序指定为api。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="70b5" class="ls if hh lo b fi lt lu l lv lw">class HelloWorld(Resource):    <br/>     def get(self):        <br/>         return {'hello': 'world'}</span></pre><p id="08f8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">HelloWorld是一个充当api资源的类。函数<em class="kj"> get </em>充当get请求。如果我们必须处理<em class="kj"> post </em>请求，我们可以创建一个名为post的函数，并在该函数中执行post请求。由于HelloWorld是一个api资源，它的函数充当不同类型的api请求。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="8579" class="ls if hh lo b fi lt lu l lv lw">api.add_resource(HelloWorld, '/')</span></pre><p id="0f87" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这一行将HelloWorld添加为api的一个url为“/”的资源。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="8254" class="ls if hh lo b fi lt lu l lv lw">if __name__ == '__main__':<br/>    app.run(debug=True)</span></pre><p id="d189" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">每个Python模块都定义了它的__name__，如果这是“__main__”，则意味着用户正在独立运行该模块，我们可以执行相应的适当操作。这也意味着，如果当前文件名等于主文件名，然后运行应用程序。</p><p id="293e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">语法debug=True在调试模式下运行文件，在这种模式下，对代码的更改会自动更改到服务器。</p><p id="b104" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">让我们修改main.py。首先删除HelloWorld类，并创建一个类名为<strong class="je hi">状态为</strong>的类，该类返回api状态的响应，如下所示:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="faf9" class="ls if hh lo b fi lt lu l lv lw">class status(Resource):    <br/>     def get(self):<br/>         try:<br/>            return {'data': 'Api running'}<br/>         except(error): <br/>            return {'data': error}</span></pre><p id="2e9a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">它只是提供api的状态信息。</p><p id="498a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后创建另一个类名为S <strong class="je hi"> um，</strong>的类，它通过get请求返回所提供的两个数之和，如下所示:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="9749" class="ls if hh lo b fi lt lu l lv lw">class Sum(Resource):<br/>    def get(self, a, b):<br/>        return jsonify({'data': a+b})</span></pre><p id="b4d7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，让我们将它们添加为分配了URL的资源。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="212e" class="ls if hh lo b fi lt lu l lv lw">api.add_resource(status,'/')</span><span id="0646" class="ls if hh lo b fi mh lu l lv lw">api.add_resource(Sum,'/add/&lt;int:a&gt;,&lt;int:b&gt;')</span></pre><p id="6819" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们将删除main.py中的debug=true，因为我们现在要在Heroku中进行生产和部署。</p><p id="c033" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在原料药的情况下，有一个跨来源的概念。这意味着即使我们用python开发了我们的API，其他来源(如Javascript、React等语言)也可以访问我们的API。因此，我们还将导入CORS，并将我们的应用程序指定为CORS应用程序。</p><p id="1e45" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">安装烧瓶-cors组件:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="77f7" class="ls if hh lo b fi lt lu l lv lw">$ pip install Flask-Cors</span></pre><p id="33ba" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">最后，我们的main.py将如下所示:</p><figure class="ko kp kq kr fd ks"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="9f11" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们有自己的wsgi.py。</p><h1 id="9e4b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">去Heroku</h1><p id="9508" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在去Heroku之前，我们需要一些额外的文件。</p><p id="76af" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">添加一个名为<em class="kj"> Procfile </em>的文件，其内容为:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="da57" class="ls if hh lo b fi lt lu l lv lw">web: gunicorn  main:app</span></pre><p id="3283" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这意味着该应用程序是一个网络应用程序，运行在gunicorn服务器和主要是我们的应用程序。</p><p id="437f" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">用内部内容创建另一个名为<em class="kj"> runtime.txt </em>的文件:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="9b1c" class="ls if hh lo b fi lt lu l lv lw">python-3.7.3</span></pre><p id="4ef4" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这是我目前使用的python版本。</p><p id="cb09" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，在终端上键入:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="3b22" class="ls if hh lo b fi lt lu l lv lw">pip freeze &gt; requirements.txt</span></pre><p id="1226" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">它将创建一个requirements.txt文件，其中包含此应用程序所需的要求。打开requirements.txt文件，您可以看到如下图所示的指定需求。</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mi"><img src="../Images/642c12e9020fecb9ff97b259e5d6dd78.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*gnniMtYGXYiU5EcSYKzrkg.png"/></div></figure><p id="2575" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们最终的文件目录将如下所示:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mj"><img src="../Images/46805bf38862f74bae46140ab48bae48.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*Q0O5Ai1HfiX4SEh_eCELEg.png"/></div></figure><p id="dde9" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">安装Heroku CLI并逐步执行命令。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="9c6a" class="ls if hh lo b fi lt lu l lv lw">$ heroku login</span></pre><p id="7cb6" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">遵循程序并登录。</p><p id="8694" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，让我们创建一个名为flask-heroku1的新heroku应用程序。给你唯一的应用程序名称。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="a218" class="ls if hh lo b fi lt lu l lv lw">heroku create flask-heroku1 --buildpack heroku/python</span></pre><p id="398a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">你可以检查你的heroku仪表盘，看看上面的代码是否有效。</p><p id="5c69" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这里，我们将buildpack指定为python，因为我们的应用程序是用Python编写的。在部署过程中，heroku根据Python buildpack构建我们的应用程序。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="d188" class="ls if hh lo b fi lt lu l lv lw">$ git init</span></pre><p id="d903" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果你没有安装git，那么首先安装git并继续。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="46f3" class="ls if hh lo b fi lt lu l lv lw">$ git add .</span></pre><p id="9d07" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">该命令将所有已更改的文件视为更改。现在，我们提交到我们刚刚初始化的本地git存储库。</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="d308" class="ls if hh lo b fi lt lu l lv lw">$ git commit -m "Flask-Restful-Heroku api"</span></pre><p id="9e24" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">有时，我们的heroku create-app不设置远程原点。所以，我们必须将远程原点添加为:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="500c" class="ls if hh lo b fi lt lu l lv lw">$ heroku git:remote -a flask-heroku1p</span></pre><p id="0ab4" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">最后，将heroku部署为:</p><pre class="ko kp kq kr fd ln lo lp lq aw lr bi"><span id="9013" class="ls if hh lo b fi lt lu l lv lw">$ git push heroku master</span></pre><p id="7af3" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后，您可以看到部署过程如下:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mk"><img src="../Images/e782c18ad4c26ed61fe64fe8ccfb4a46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NgcnqbAFR_pdYUcDtlhpHw.png"/></div></div></figure><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es ml"><img src="../Images/98f1a89cb2c465471ae062cc6ed764de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mKFXaJN4rHfNqLqIdPz10Q.png"/></div></div></figure><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es ml"><img src="../Images/3020d9ec5da4419d50537dbec3d2d0b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*timnl2liEVj9jvSenAfROg.png"/></div></div></figure><p id="d7a6" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">正在使用pip安装requirements.txt上的要求</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es mm"><img src="../Images/4d9ea621d91d72215a0a21796c8f72c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mG_dxYYNaryhBCUdLU_oLA.png"/></div></div></figure><p id="7c78" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">部署完成。我的api托管在:</p><p id="f90a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><a class="ae kf" href="https://flask-heroku1p.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://flask-heroku1p.herokuapp.com/</a></p><p id="7be6" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">它给出了:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mn"><img src="../Images/61b934678c98a090273689c16165f5e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*8jjQTwrPuOegaw6uMof0qA.png"/></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">获取api的根url的请求输出</figcaption></figure><p id="6f7b" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我将通过输入以下url获得两个数字的和:</p><p id="e381" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><a class="ae kf" href="https://flask-heroku1p.herokuapp.com/add/3,5" rel="noopener ugc nofollow" target="_blank">https://flask-heroku1p.herokuapp.com/add/3,5</a></p><p id="5e77" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">它给出了:</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div class="er es mo"><img src="../Images/6614720dc3666ea929f7254b1a77a082.png" data-original-src="https://miro.medium.com/v2/resize:fit:222/format:webp/1*W73Pm2P4nXS-YNmZnIdZyw.png"/></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">获得3和5之和的请求输出</figcaption></figure><h1 id="0d92" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">参考资料:</h1><ol class=""><li id="bf83" class="kz la hh je b jf jg jj jk jn mp jr mq jv mr jz ms lf lg lh bi translated"><a class="ae kf" href="https://flask-restful.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"><strong class="je hi"/></a></li><li id="e35a" class="kz la hh je b jf li jj lj jn lk jr ll jv lm jz ms lf lg lh bi translated"><a class="ae kf" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi">烧瓶用户指南</strong> </a></li></ol></div></div>    
</body>
</html>