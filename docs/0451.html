<html>
<head>
<title>Airbnb New User Prediction — A Kaggle case study</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Airbnb新用户预测——ka ggle案例研究</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/airbnb-new-user-prediction-a-kaggle-case-study-e26e712fe8d2?source=collection_archive---------8-----------------------#2021-01-17">https://medium.com/analytics-vidhya/airbnb-new-user-prediction-a-kaggle-case-study-e26e712fe8d2?source=collection_archive---------8-----------------------#2021-01-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/dbca7392737fa961cb1e5140799be6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xa56giZQguzHM0QiP6jmIg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图片鸣谢:我..！</figcaption></figure><p id="c031" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">随着人们对周围环境越来越好奇，他们开始跨越国界去探索遥远的地方。人类的这种好奇心催生了旅游业。多年来，该行业在世界各地蓬勃发展，并开始提供不同类型的住宿和体验，以满足人们各种各样的需求。</p><p id="4fb5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在这个行业中，一个非常突出的名字是一家名为Airbnb的初创公司(现在是一家价值数十亿美元的公司)。<strong class="iv hi"> Airbnb </strong>成立于2008年，从旧金山起步，迅速扩张，目前在全球数百个城市开展业务。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h2 id="2846" class="jy jz hh bd ka kb kc kd ke kf kg kh ki je kj kk kl ji km kn ko jm kp kq kr ks bi translated"><strong class="ak">内容:</strong></h2><ol class=""><li id="4a2b" class="kt ku hh iv b iw kv ja kw je kx ji ky jm kz jq la lb lc ld bi translated"><em class="le">商业问题</em></li><li id="3c15" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">将现实世界的问题映射为ML问题</em></li><li id="dfde" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">数据集分析</em></li><li id="855a" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">现实世界的业务约束</em></li><li id="0f2e" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">绩效指标</em></li><li id="06f1" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">现有方法</em></li><li id="a3f9" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">我的改进</em></li><li id="4add" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le"> EDA </em></li><li id="ffeb" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">特色工程</em></li><li id="7342" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">建模</em></li><li id="0561" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le"> Kaggle截图</em></li><li id="0876" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">未来工作</em></li><li id="30ae" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le">参考文献</em></li><li id="a52e" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le"> Github资源库链接</em></li><li id="f2ed" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated"><em class="le"> Linkedin个人资料</em></li></ol></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><ol class=""><li id="ae4c" class="kt ku hh iv b iw ix ja jb je lk ji ll jm lm jq la lb lc ld bi translated"><strong class="iv hi">业务问题:</strong></li></ol><p id="24d5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Airbnb已经成为世界各地旅行者的一个非常受欢迎的选择，因为它们提供了独特的体验，也提供了昂贵酒店的替代选择。它目前在190个国家的34000多个城市开展业务。客户可以通过网站应用程序或使用iOS/Android应用程序进行预订。Airbnb一直在努力改善这种预订体验，让首次入住的顾客更加方便。</p><p id="42ae" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">本案例研究处理的问题是预测用户最有可能第一次预订的位置。准确的预测有助于通过分享更个性化的推荐以及更好地预测需求来减少预订所需的平均时间。我们使用浏览器的会话数据以及提供给我们的用户人口统计信息来创建有助于解决问题的功能。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="bc46" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 2 </strong>。<strong class="iv hi">将现实世界的问题映射为ML问题:</strong></p><p id="534f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是一个多类分类问题，在给定用户数据的情况下，我们必须预测12个选项中任何一个的前五个最有可能的目的地，即“美国”、“法国”、“加拿大”、“英国”、“es”、“IT”、“PT”、“荷兰”、“DE”、“AU”、“NDF”和“其他”。</p><p id="12a4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">“NDF”和“其他”是不同的。“NDF”表示该用户没有预订,“others”表示有预订，但预订的国家不在给定的列表中。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="e916" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 3。数据集分析:</strong></p><p id="dc93" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">数据集取自Kaggle竞赛页面。</p><div class="ln lo ez fb lp lq"><a href="https://www.kaggle.com/c/airbnb-recruiting-new-user-bookings/data" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">Airbnb新用户预订</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">新客人会在哪里预订他们的第一次旅行体验？</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">www.kaggle.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me in lq"/></div></div></a></div><p id="859e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)给定的文件:</p><p id="8881" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">培训用户、测试用户、会话、国家和年龄性别。</p><p id="2b2c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)总文件大小:64.71MB</p><p id="02ab" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)记录总数:2，13，451(训练用户)，62，096(测试用户)</p><p id="9084" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">d)<strong class="iv hi"><em class="le">前两个文件</em> </strong>包含用户的个人信息，即年龄、性别、注册方式、语言、国家/目的地(目标)等。<strong class="iv hi"> <em class="le"> sessions.csv </em> </strong>包含用户的web会话数据。此数据集中的每条记录都由user_id字段标识，该字段与训练数据集的id字段相对应。我们发现几个会话记录包含特定用户访问Airbnb应用程序的不同时间的信息。</p><p id="4700" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">sessions.csv具有从2014年起的用户数据，而训练数据集具有追溯到2010年的记录。这意味着许多用户的会话记录不可用。只有<strong class="iv hi"> <em class="le"> 35%的训练用户</em> </strong>和<strong class="iv hi"> <em class="le"> 99%的测试用户</em> </strong>在会话数据集中有记录。</p><p id="3c74" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">f)最后两个数据集分别包含目的地和用户的更一般的统计信息。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="65e6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 4。现实世界的商业约束:</strong></p><p id="775f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)低延迟很重要。</p><p id="668e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)错误分类的成本不是很高，因为如果用户不喜欢给定的推荐，他/她可以很容易地改变目的地。</p><p id="02c7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)不太需要结果的可解释性。因为用户不太关心如何推荐这些地方。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="577c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 5。绩效指标:</strong></p><p id="4a88" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">由于这是一个多类分类问题，我们可以使用像多类Logloss和F1分数这样的度量。但是Kaggle竞赛要求我们使用NDCG(标准化折扣累积收益)分数。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="eb83" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">6。现有方法:</p><p id="2593" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)只有35%的培训用户有会话记录。只使用训练数据而不使用会话数据的人得分相对较低。</p><p id="bb5d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">示例:</p><div class="ln lo ez fb lp lq"><a href="https://www.kaggle.com/krutarthhd/airbnb-eda-and-xgboost" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">Airbnb EDA和Xgboost</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">使用Kaggle笔记本探索和运行机器学习代码|使用Airbnb新用户预订的数据</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">www.kaggle.com</p></div></div><div class="lz l"><div class="mf l mb mc md lz me in lq"/></div></div></a></div><p id="ad9f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)以下内核仅使用每个用户的会话记录计数作为新特性。它放弃了所有其他会话功能。后面给出的特征重要性图证明了会话特征在建模中非常重要。因此，它的得分相对较低。</p><div class="ln lo ez fb lp lq"><a href="https://www.kaggle.com/fffjay/airbnb-new-user-bookings" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">Airbnb新用户预订</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">使用Kaggle笔记本探索和运行机器学习代码|使用Airbnb新用户预订的数据</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">www.kaggle.com</p></div></div><div class="lz l"><div class="mg l mb mc md lz me in lq"/></div></div></a></div></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="1c09" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">7。我的改进:</p><p id="73b7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)使用data Train.csv和Session.csv来突出工程。</p><p id="3687" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)会话CSV对于每个ID/用户具有多个记录，其中每个记录捕获用户的动作以及在Airbnb上进行该动作所花费的时间。我们对每个用户的所有记录进行了分组。</p><p id="ed2e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)使用TF-IDF矢量器的unigram和bigram来捕捉每个动作/装置的普遍性和稀有性。</p><p id="0014" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">d)对“<em class="le">年龄</em>和日期列进行了广泛处理。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="91ab" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 8。EDA : </strong></p><p id="897e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们首先阅读<em class="le"> train_users.csv </em>文件并检查列。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="1f3e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到大约有2，13，451条记录，总共有16列。在这16列中，有3列包含空值。让我们检查这些列中有多少百分比的值为空。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">三个字段有空记录。</figcaption></figure><p id="5901" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有了这些基本信息，让我们开始单变量分析。</p><p id="d175" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">单因素分析:</strong></p><p id="edca" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)目标列:'<em class="le">国家/地区_目的地</em>'</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/61e2e87924b9f40ba657933cf7bfd731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KwtyF-UqKczK95JT2pxefw.png"/></div></div></figure><p id="8772" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">数据集非常不平衡。大多数顾客<strong class="iv hi"> (58.35%) </strong>没有预订。其中，很大一部分用户<strong class="iv hi"> (29.22%) </strong>预订了<strong class="iv hi">【美国】</strong>的目的地。在美国以外的国家中，<strong class="iv hi">法国(‘FR’)</strong>在<strong class="iv hi"> 2.35% </strong>中占有很高的份额。此外，相当比例的用户<strong class="iv hi"> (4.73%) </strong>前往的目的地不在给出的选项中。</p><p id="848d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)栏:'<em class="le">性别</em>'</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/29d983df6153bd57764de2485f8070dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-7Skt1pdbadZVNUUTOtYQ.png"/></div></div></figure><p id="13b4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到在<strong class="iv hi">性别</strong>字段中有<strong class="iv hi"> 4 </strong>个类别。大多数用户<strong class="iv hi"> (44.83%) </strong>没有透露他们的性别。在拥有手机的用户中，女性用户略多于男性用户，女性用户占29.53%，男性用户占25.5%。一小部分(0.13%)用户选择了<strong class="iv hi">‘其他’</strong>作为他们的性别。这意味着它们可能属于非二进制类别。</p><p id="26cc" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)列:'<em class="le">注册方法【T33 ' '</em></p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/cd453201f757355927e86f3d6aa3182f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4RTDmSgmW-cta3g3BW9vg.png"/></div></div></figure><p id="1e30" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">大多数用户<strong class="iv hi"> (71.63%) </strong>都使用过<strong class="iv hi">基本</strong>方法在Airbnb应用上创建账户。这意味着他们可能使用了普通的电子邮件密码来注册。在剩下的用户中，绝大多数<strong class="iv hi"> (28.11%) </strong>使用过<strong class="iv hi">脸书</strong>进行注册。很少比例的人<strong class="iv hi"> (0.26%) </strong>使用谷歌注册。</p><p id="b3bb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这表明谷歌并不是注册的首选方式。此外，这可能意味着用户不太愿意以脸书或谷歌链接的形式与他们的Airbnb账户分享他们的个人信息，因此他们选择了基本的电子邮件密码方法来访问他们的账户。</p><p id="6958" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">d)列:“<em class="le">语言</em></p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/117186b671921ad77b45c13b5b04faf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bzMFCALR_Xe8Ma1pQmV2w.png"/></div></div></figure><p id="94d0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">大多数用户(96.66%)将英语作为他们的语言。因为数据来自美国，所以这种行为是很正常的，因为那个国家的大多数人都把英语作为他们的主要语言。</p><p id="81f4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">e)栏目:'<em class="le">affiliate _ channel【T1]'</em></p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/683807b3784701293deaa608c8565509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVLIpfqVX8mLD1MKSXGWaw.png"/></div></div></figure><p id="b415" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">此字段解释了使用何种付费营销来接触用户，即使用了哪些不同的渠道/类别。在<strong class="iv hi"> 8 </strong>个不同的类别中，<strong class="iv hi">【直接】</strong>是最有用的，因为它到达了大多数用户<strong class="iv hi"> (64.52%) </strong>。当我们转向第二重要的类别'<strong class="iv hi">半品牌</strong>'时，这一比例急剧下降，达到了约<strong class="iv hi"> 12.2% </strong>的用户。<strong class="iv hi">【内容】</strong>和<strong class="iv hi">【再营销】</strong>的用户比例非常小，分别为1.85%和0.51%。作为销售应用程序的渠道，这些并没有多大用处。要么放弃它们以节省营销成本，要么对它们进行改进以让更多的用户接触到它们。</p><p id="9c93" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">f)列:'<em class="le"> signup_app </em>'</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mr"><img src="../Images/d40860680fb5431627ec8883fd2f06e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgdWELAtr2HRcjXexKzUJQ.png"/></div></div></figure><p id="8304" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">大多数用户<strong class="iv hi"> (85.6%) </strong>使用<strong class="iv hi">【Web】</strong>创建账户。在剩下的人中，<strong class="iv hi">‘iOS’</strong>比<strong class="iv hi">‘Moweb’</strong>和<strong class="iv hi">‘Android’</strong>稍微多使用了<strong class="iv hi">(大约多5.98%)</strong>。<strong class="iv hi">【Moweb】</strong><strong class="iv hi">【Android】</strong>并不是很受欢迎的注册应用，因为分别只有2.93%和2.56%的用户使用。</p><p id="6e94" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">g)列:“<em class="le">第一设备类型</em></p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ms"><img src="../Images/8d2afa53bb5e1374468ce1a4408b4e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*juffXhp2v4WC3eHGaCEJBQ.png"/></div></div></figure><p id="78e6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最常用于创建账户的设备是<strong class="iv hi">“Mac桌面”</strong>，有<strong class="iv hi"> 41.98% </strong>的客户使用该设备。紧随其后的是<strong class="iv hi">‘Windows桌面’</strong>，拥有34.07%的客户。在剩下的类别中，在移动领域，<strong class="iv hi">【iPhone】</strong>比<strong class="iv hi">【安卓手机】</strong>更受欢迎<em class="le">。同样的，<strong class="iv hi">‘iPad’</strong>在平板领域<em class="le">比<strong class="iv hi">‘安卓平板’</strong>更受欢迎</em>。总的来说，我们可以从这个图中得出结论，在所有类别(桌面、移动、平板)中，苹果产品比安卓产品更受欢迎。</em></p><p id="7d58" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">h)列:'<em class="le"> first_browser </em>'</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mt"><img src="../Images/cf6f34c1dc63c47d4e515570c23b2557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7gsYOnJFWpSnXcdF8d2ZHQ.png"/></div></div></figure><p id="2d58" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">此字段跟踪客户用于访问应用程序的第一个浏览器。大部分份额<strong class="iv hi"> (29.91%) </strong>被<strong class="iv hi">【Chrome浏览器】</strong>占据，其次是<strong class="iv hi">【Safari】</strong>占<strong class="iv hi"> 21.16% </strong>和<strong class="iv hi">【火狐】</strong>占<strong class="iv hi"> 15.77% </strong>。从之前的剧情可知<strong class="iv hi">‘Mac桌面’</strong>是最受用户欢迎的设备。从该图中可以看出，大部分客户更喜欢使用“Chrome”作为他们的浏览器，即使是在他们的苹果产品上，而不是苹果自己的浏览器“Safari”。另一个有趣的事实是，相当比例的<strong class="iv hi"> (12.77%) </strong>客户不知道第一款浏览器。</p><p id="738c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">I)列:'<em class="le">日期_账户_创建</em></p><p id="b609" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们从该日期字段创建了3列，即'<em class="le">帐户_创建_日</em>'、<em class="le">帐户_创建_月</em>'和'<em class="le">帐户_创建_年</em>'。在这之后，让我们分别分析月和年列。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es mu"><img src="../Images/aaa73e0c41349b743cf899605b22a23d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*5bN64eBwpxB7CdwV4iVtRA.png"/></div></figure><p id="7be1" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">‘六月’(06)</strong>是客户开户最有利的月份，其次是<strong class="iv hi">‘五月’(05)</strong>。在<strong class="iv hi">‘十一月’(11)</strong>和<strong class="iv hi">‘十二月’(12)</strong>期间创建的账户数量最少。对于世界上大多数人来说，这段时间是假期，所以他们可能会在这段时间旅行。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/924b5a32ce66f72f49d1a7e2a041f757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAGjWwJ4GyQlZlIODxEcoA.png"/></div></div></figure><p id="9ef5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从2010年到2014年，创建的账户数量逐年增加。对于2014年，训练数据集中仅给出1月至6月间创建的账户。</p><p id="2f05" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在，让我们检查月和年的增量，以检查季节变化。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es mw"><img src="../Images/8f3668f6619fac290352e603d51e2ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*aVbi8fN7UVV30oZ4SEo1QQ.png"/></div></figure><p id="a676" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对于4月(04年)和5月(05年)，我们看到所有年份的帐户创建量都在增加。类似地，六月(06)和七月(07)我们看到这样的增量。8月(08年)和9月(09年)出现增长，但仅在2011年和2013年，而2012年我们看到该数字有所下降。截至2014年6月，2月份创建的账户数量最少，而6月份创建的账户数量最多。此外，与其他年份相比，2014年为所有月份创建的账户数量要多得多。</p><p id="501f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">j)列:'<em class="le">年龄</em>'</p><p id="6f11" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如前所述，共有87，990名用户没有透露他们的年龄。让我们检查该列的值的分布。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mx"><img src="../Images/8e3a04abac4054d0bada34b7ee4eaed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfMYtUEP3vrMdREDDexL7w.png"/></div></div></figure><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="947f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">检查百分位值以检测最小值中的异常值:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="27bd" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">0.04百分位值为<strong class="iv hi"> 5.0 </strong>，0.05百分位值为<strong class="iv hi"> 15.0 </strong>。这表明任何低于0.05 百分点值的<em class="le">都是一个<em class="le">异常值</em>。因此，我们将<strong class="iv hi">年龄的最小允许值设为15.0 </strong>，除此之外的任何其他值都将通过如下所述的处理来处理。</em></p><p id="f7b3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">检查百分点值，检测最大值中的异常值:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="1182" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">99.29百分位值是110.0，99.39百分位值是1949(近似值)。因此，这表明任何高于99.29 百分位值的<em class="le">都是异常值，并通过如下所述的处理来处理。</em></p><p id="1eeb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到有些人给出的年龄值是19xx或20xx。</p><p id="2606" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">我们可以假设，那些给了19xx作为年龄的人，错把出生年份而不是年龄给错了。</em>T19】</strong></p><p id="72e6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">给定20xx作为年龄的人，输入任意值作为年龄。</em> </strong></p><p id="72e1" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">我们使用以下四种情况中的任何一种来处理“<em class="le">年龄</em>字段的值:</strong></p><ol class=""><li id="ceb4" class="kt ku hh iv b iw ix ja jb je lk ji ll jm lm jq la lb lc ld bi translated">用<strong class="iv hi">中值</strong>即34填充<strong class="iv hi">空值</strong>。</li><li id="3888" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated">我们用中值(即34)替换任何小于最小年龄的值(即15.0)或任何大于2007的值。</li><li id="b52c" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated">我们保持15.0到117.0(当今最长寿的人的年龄)之间的值不变。</li><li id="fd6e" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated">对于大于117.0 的<strong class="iv hi">和小于2007 </strong>的<strong class="iv hi">的年龄，我们假设用户错误地输入了他们的出生年份，而不是年龄。因此，我们从'<em class="le"> account_created_year </em>'字段值中减去该值，以获得他们创建帐户当天的年龄。</strong></li></ol><pre class="mh mi mj mk fd my mz na nb aw nc bi"><span id="1c84" class="jy jz hh mz b fi nd ne l nf ng">Max Age before processing :  2014.0</span></pre><p id="6f0f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以上述方式处理这些值后，我们看到:</p><pre class="mh mi mj mk fd my mz na nb aw nc bi"><span id="44e2" class="jy jz hh mz b fi nd ne l nf ng">Max Age After Year Imputation :  115.0</span><span id="376d" class="jy jz hh mz b fi nh ne l nf ng">count    213451.000000<br/>mean         36.006526<br/>std          10.794212<br/>min          15.000000<br/>25%          32.000000<br/>50%          34.000000<br/>75%          35.000000<br/>max         115.000000</span></pre><p id="1a01" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">“年龄”的统计数据现在似乎好得多。</p><p id="d07e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">至此，我们完成了单变量分析阶段。</p><p id="0565" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">双变量分析:</strong></p><p id="6152" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)让我们首先将“年龄”值分成10年间隔的区间，即“15-20”、“20-30”等。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es ni"><img src="../Images/201d0d138eec009b964ce0e004719446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*EVliS928C9ridTKruWhAEg.png"/></div></figure><p id="e825" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">“30-40”年龄段构成了几乎所有目的地的大多数人口。对于“NDF”、“美国”和“其他”，我们看到第二个最常见的用户年龄段是“20-30岁”。</p><p id="abf3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b) ' <em class="le">国家_目的地</em>'和'<em class="le">性别</em>':</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es nj"><img src="../Images/258537bfccaff7c1be8a06bca1b96304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*tHNeIyPCB6PnlNjpCBXvhQ.png"/></div></figure><p id="2e28" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们只看到选项<strong class="iv hi">‘NDF’</strong>和<strong class="iv hi">‘US’</strong>我们对不同的性别阶层都有大量的统计。对于其他目的地，不同性别的人数没有太多明显差异。</p><p id="000c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c) ' <em class="le">国家_目的地</em>'和'<em class="le">账户_创建_月份</em>':</p><p id="f909" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从月-年列的单变量分析中，我们了解到大多数账户是在6-7-8月份创建的。让我们看看7月份，为每个目的地创建的客户百分比。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nk"><img src="../Images/fd31b4e9460117291f8a2ce60dc39b8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OstvlH3qh5kEIdWNHlsPQw.png"/></div></div></figure><p id="f753" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对于7月的<strong class="iv hi">，我们看到绝大多数(<strong class="iv hi"> 56.41% </strong>)没有预订。<strong class="iv hi"> 31.02% </strong>的用户为“我们”做过预订。由于数据集高度偏向“NDF”和“US ”,这种行为是意料之中的。</strong></p><p id="e348" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">多元分析:</strong></p><p id="41ae" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">分析'<em class="le">年龄</em>'、<em class="le">国家_目的地</em>'和'<em class="le">性别</em>':</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/a665b0f97c7e035cd2c91cb5acacb399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfx0YBdNhVDhs70oGwuiHA.png"/></div></div></figure><p id="4115" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对于<strong class="iv hi">‘NDF’</strong>，我们看到‘男性’和‘女性’性别的‘年龄’分布是相同的。这几乎适用于所有其他目的地。</p><p id="de32" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">但是对于<strong class="iv hi">“其他”</strong>性别，我们看到<em class="le">不同目的地的“年龄”变量的<em class="le">分布</em>有相当大的差异</em>。</p><p id="8833" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">例如，对于像“法国”、“英国”和“荷兰”这样的目的地，“其他”性别的“<em class="le">年龄</em>”的分布非常小。另一方面，对于' CA '，' it '，和' DE '来说是相当大的。</p><p id="5cc7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这样，我们就完成了EDA部分。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="7743" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">9。特征工程:</p><p id="d236" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们检查sessions.csv文件的头，以便更好地理解会话数据。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="f6fa" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到一个<em class="le">用户标识</em>有多个会话记录。我们需要对这些记录进行分组，这样每个用户id只有一条记录。</p><p id="ba1f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到有些会话数据缺少<strong class="iv hi">‘用户标识’</strong>。这没有任何意义，因为除非我们有了user_id，否则我们不知道这个会话数据适用于哪个用户。因此，我们将<strong class="iv hi">仅</strong>考虑具有非空user_id会话信息。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es nl"><img src="../Images/06d7097431afc7ae8849c6238a39c81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*Y3yfcECgakJo7YuKo97pVQ.png"/></div></figure><p id="ecac" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们总共有1，35483个不同用户的会话数据。这些用户存在于训练和测试文件中。</p><p id="fc2e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">串联每个用户的会话数据行:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="f0c9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在，我们为每个<em class="le">用户id </em>创建了一个记录。</p><p id="182b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">创建会话特征:</strong></p><p id="1100" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对于'<em class="le">秒_已用时间</em>'字段，我们正在创建3个特征:</p><ol class=""><li id="96f7" class="kt ku hh iv b iw ix ja jb je lk ji ll jm lm jq la lb lc ld bi translated">每个用户跨多个会话花费的总秒数</li><li id="3371" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated">每个用户花费的平均秒数</li><li id="886c" class="kt ku hh iv b iw lf ja lg je lh ji li jm lj jq la lb lc ld bi translated">每个用户的会话数计数</li></ol><p id="50b2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对于<strong class="iv hi"> <em class="le">动作</em> </strong>字段，我们从上面的快照中看到在“<em class="le">动作</em>”、“<em class="le">动作_类型</em>”、“<em class="le">动作_细节</em>”和“<em class="le">设备_类型</em>”列中有重复。对于功能工程部分，我们正在创建一个<em class="le">列表，其中仅包含用户在访问应用程序时执行/使用的独特动作/设备</em>。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es nm"><img src="../Images/c0f41490f89ae96542fd0c3d12a2d2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*WTvxZBukSmDqcykuvzBVNA.png"/></div></figure><p id="2a5b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从'<em class="le"> secs_elapsed '字段创建的特征示例。</em></p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nn"><img src="../Images/69891b4b8d0dc1189d0f69b3a72cd824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pCe61Z_mIWrAYjgtFpKvA.png"/></div></div></figure><p id="7b09" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从“<em class="le">动作/设备”字段创建的特征示例。</em></p><p id="898a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">所有这些函数的代码都在GitHub repo中，其链接在最后给出。</p><p id="e1ff" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在特征创建阶段之后，让我们合并训练和会话文件中存在的公共用户:</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="4379" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">之前我们已经看到，我们总共有1，35483个不同用户的会话记录。其中，只有73815个用户出现在培训文件中。其余的都存在于测试文件中。</p><p id="b8b6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们将只使用这73815条记录进行建模。创建新要素后，合并的数据集总共有31个要素。</p><p id="fc08" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">删除'<em class="le"> timestamp_first_active </em>'、<em class="le"> date_account_created </em>'、<em class="le"> action </em>'、<em class="le"> action_type </em>'、<em class="le"> action_detail </em>'、<em class="le"> device_type </em>'、<em class="le"> secs_elapsed </em>'、<em class="le"> user_id </em>'因为我们已经预处理了这些特性并创建了需要处理的特性。</p><p id="df60" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">创建X和Y，将列车数据拆分成列车和CV进行建模:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="c979" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">让我们为分类特征创建一个热点向量。</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="1e9a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">像这样，我们一次性编码所有剩余的分类特征。</p><p id="b543" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le"> TFIDF对文本字段进行矢量化:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="0caf" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为不同的文本/分类字段创建向量后，我们将从训练和cv数据集中删除原始的非矢量化(数字)特征。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="c384" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这8个特征都是数值特征。</p><p id="29f6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="le">将矢量化的特征与剩余的8个原始数字特征连接:</em> </strong></p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="cd53" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">保存我们创建的最终数据框和矢量器以备将来使用。</p><p id="980a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有了这些，我们就完成了特征工程阶段。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="ebb5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 10。造型:</strong></p><p id="efca" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们已经将不同的ML模型应用于我们之前处理过的数据集。我们有合适的逻辑回归、朴素贝叶斯、随机森林和GBDT分类器，如XGBoost和LightGBM分类器。最佳测试结果来自随机森林模型。令人惊讶的是，最差的结果来自XGBoost模型。我们已经调整了所有模型的超参数，并绘制了热图，以了解调整的效果。我们还绘制了RF和XGBoost模型的特性重要性。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es no"><img src="../Images/4fb62f3fc53f1fc78f93bce123d9f609.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*tWFbSt_ZEGlBG6XPYToxlg.png"/></div></figure><p id="ad2c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">由于最佳模型被证明是随机森林模型，我们采用最佳随机森林模型的前80%的特征，并进一步超参数调整它。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="92bb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最佳参数是:</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es np"><img src="../Images/b2a32e2d066ea3eacf4b867720d2c3e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*xfMfguOyX_0EpLtRBG00XA.png"/></div></div></figure><p id="4ca2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们绘制特征重要性图:</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nq"><img src="../Images/b664261ddc412a187fa59d45691d355c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEU1bJkeuajvzj2CBr-H8w.png"/></div></div></figure><p id="5223" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们看到‘年龄’是最重要的特征。很好的一点是，我们已经小心翼翼地处理了这个特性。此外，我们知道会话功能比其他功能更重要，因为我们看到许多会话功能，如“查看_预订_请求”、“预订_请求_提交”等。是绘制的前25个特征之一。</p><p id="85b1" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们绘制了训练和cv数据集的“max_depth”和“n_estimators”等超参数之间的热图。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es nr"><img src="../Images/ef58e2815872e605e4572d1b4831395f.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*Bopxcbu2CtzbEE-66A6LZg.png"/></div></figure><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es ns"><img src="../Images/a6e02a3c045a2f233dedec1f8d294183.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*zXdxQq9GEFxs7dLxON4Ndg.png"/></div></figure><p id="9ad5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这样，让我们保存这个模型，以便我们可以在以后使用它来部署应用程序。</p><p id="e9de" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们看看这个模型对测试文件的预测的快照。</p><figure class="mh mi mj mk fd ii"><div class="bz dy l di"><div class="ml mm l"/></div></figure><figure class="mh mi mj mk fd ii er es paragraph-image"><div class="er es nt"><img src="../Images/fc28e716c7e4857c9217f42d5b3d12a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/format:webp/1*veGkTDspLAQOiQvlnOMu9Q.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">测试数据预测</figcaption></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="2605" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 11。Kaggle截图:</strong></p><p id="86ca" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">随机森林模型给出了最好的私有分数——0.87883，接近排行榜的20%。</p><figure class="mh mi mj mk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nu"><img src="../Images/0f34429f3ea3972ca771a182760ae9f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMjJB-19bSBrIRVa8iqRvQ.png"/></div></div></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="d32e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 12。未来工作:</strong></p><p id="9a29" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)更严格的超参数调整。</p><p id="11e0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)使用TF-IDF矢量器的二元模型和三元模型特征，这将显著增加维度和模型复杂性，但可能给出更好的分数。</p><p id="0e6d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)使用类似LSTMs的深度学习技术从动作列中捕获时间序列信息。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="0847" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 13。参考文献:</strong></p><p id="6935" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a)<a class="ae nv" href="https://rstudio-pubs-static.s3.amazonaws.com/197502_9bf4cf621a824e3093abc48d5a04e6de.html" rel="noopener ugc nofollow" target="_blank">https://r studio-pubs-static . S3 . amazonaws . com/197502 _ 9 BF 4 cf 621 a 824 e 3093 ABC 48 d5a 04 e 6 de . html</a></p><p id="f580" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b)<a class="ae nv" href="https://www.diva-portal.org/smash/get/diva2:1108334/FULLTEXT01.pdf" rel="noopener ugc nofollow" target="_blank">https://www . diva-portal . org/smash/get/diva 2:1108334/full text 01 . pdf</a></p><p id="7529" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c)<a class="ae nv" href="https://www.kaggle.com/rounakbanik/airbnb-new-user-bookings:" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/rounakbanik/Airbnb-new-user-bookings:</a></p><p id="3971" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">https://www.kaggle.com/krutarthhd/airbnb-eda-and-xgboost</p><p id="79c5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">https://www.appliedaicourse.com/</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="52ad" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 14。Github回购:</strong></p><p id="e414" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">链接到我的GitHub知识库来进行这个案例研究—</p><div class="ln lo ez fb lp lq"><a href="https://github.com/NamrataThakur/Airbnb-New-User-Prediction" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">NamrataThakur/Airbnb-新用户-预测</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">Kaggle竞赛:Airbnb新用户预订预测问题:商业问题:AIRBNB已经成为非常受欢迎的…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">github.com</p></div></div><div class="lz l"><div class="nw l mb mc md lz me in lq"/></div></div></a></div></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="375b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> 15。LinkedIn个人资料:</strong></p><div class="ln lo ez fb lp lq"><a href="https://www.linkedin.com/in/namrata-thakur-6383a855" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">印度西孟加拉邦Nam rata tha kur-Kolkata |职业简介| LinkedIn</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">查看Namrata Thakur在世界上最大的职业社区LinkedIn上的个人资料。纳姆拉塔有一份工作列在…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">www.linkedin.com</p></div></div><div class="lz l"><div class="nx l mb mc md lz me in lq"/></div></div></a></div></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="acce" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">本案例研究到此为止。如果你有任何改进的建议，请在评论中留下..！！</p></div></div>    
</body>
</html>