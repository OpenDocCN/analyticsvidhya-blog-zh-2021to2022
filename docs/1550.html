<html>
<head>
<title>Survival Analysis — Estimating probability of a subject surviving</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">存活分析——估计受试者存活的概率</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/survival-analysis-probability-of-event-occurring-at-a-certain-time-b79da54abdb3?source=collection_archive---------14-----------------------#2021-03-07">https://medium.com/analytics-vidhya/survival-analysis-probability-of-event-occurring-at-a-certain-time-b79da54abdb3?source=collection_archive---------14-----------------------#2021-03-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/3039bba524cc422cbf44388a2a320753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKErrcfo5sdZZMbpYHKmJw.jpeg"/></div></div></figure><p id="376e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi jn translated">存活分析是一种统计技术，最初被开发出来是为了找出不同组群的病人的预期寿命，但近年来该技术允许我们回答一个问题，例如“在一个特定事件发生之前，还有多长时间？”。因此，它也被称为<strong class="ir hi">事件时间分析</strong>，因为它可以帮助我们估计某个事件发生的概率。</p><h2 id="ba30" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">事件发生时间(T)</h2><p id="dfd3" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">生存分析有三个组成部分，它们是:</p><ul class=""><li id="af8d" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated"><em class="lf">事件(如客户流失)</em></li><li id="e6c5" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><em class="lf">时间起点(如客户开始使用服务)</em></li><li id="4ddb" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><em class="lf">事件发生时间(例如，时间起点和事件发生之间的时间差)</em></li></ul><p id="a1aa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">事件发生时间(T)是连续的随机变量，可以用概率密度函数(PDF)或累积分布函数(CDF)来描述。PDF或f(t)指定事件在时间t发生的概率(见下图)，CDF或F(t)是PDF = 'f(a)到t '的积分。换句话说，PDF中面积的累积和达到t。</p><div class="ll lm ln lo fd ab cb"><figure class="lp ii lq lr ls lt lu paragraph-image"><img src="../Images/c03dd124fc811f30565f51aabf433a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*nO2MqdOAaAGWcj3CxxvH5A.png"/></figure><figure class="lp ii lv lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/4c87fe947310e5c10856fe2091099f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*zs0vHrhjVHQ19YQB3nZWyQ.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx ma di mb mc translated">概率密度和累积分布函数</figcaption></figure></div><h2 id="1493" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated"><strong class="ak">生存分析</strong></h2><p id="97c6" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated"><strong class="ir hi">生存函数</strong>发现事件在时间t之前没有发生的概率(即超过时间t的生存概率)，可以描述为:</p><ul class=""><li id="2912" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">生存函数:S(t) = 1 - F(t) = P(T≥t)</li></ul><p id="ba6d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">除了生存函数，我们还对事件发生的速率感兴趣，这就是<strong class="ir hi">风险函数</strong>。在t时刻幸存的人中，接下来几秒内这些人的死亡率是多少(假设现在还活着)？<a class="ae md" href="https://www.mathcha.io/editor/5BwdZSYniVvh6VZzEZhGYNPGKFD2odmLiddOG18" rel="noopener ugc nofollow" target="_blank">见数学解释(1。存活率、风险与pdf的关系)。</a></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es me"><img src="../Images/103f17c170053a90f37ff90075eca7cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*VVd_eYE-IXPb6OJoGtBhOA.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">冒险函数</figcaption></figure></div><div class="ab cl mf mg go mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ha hb hc hd he"><ul class=""><li id="ed05" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">风险、存活率和pdf的关系:h(t)= f(t)/S(t)</li></ul><p id="ee74" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">某人暴露于某一因素，与另一因素相比，其事件发生的概率为<strong class="ir hi">危险比</strong>。这使我们能够比较每个群体暴露于不同因素或条件下的影响差异。</p><ul class=""><li id="27b9" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">危险比(HR): H(t)= h(t|x=a)/h(t|x=b)</li></ul><h2 id="e8f2" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">不同生存模型概述</h2><p id="a2ae" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">有一些模型以它们自己的方式描述生存函数，它们是Kaplan-Meier模型、指数模型和Cox模型。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mm"><img src="../Images/5a0373ec0de6cedf740146e9338cb197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1j25Eoa69Kk_Fs6BuLAfAg.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">相同数据集下的Kaplan-Meier &amp;指数模型</figcaption></figure><ul class=""><li id="8aa0" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated"><strong class="ir hi">卡普兰-迈耶</strong> <strong class="ir hi">模型</strong>解释简单，可以估计生存函数S(t)。然而，它不能估计风险比(HR)来比较两个不同的队列，因为它是一个阶梯函数(见上述K-M图中的阶梯)。因素或事件变量应为分类类型(如死亡或存活)。</li><li id="04cb" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><strong class="ir hi">指数模型</strong>可以估计S(t)和HR，但假设风险函数h(t)不变。</li><li id="f1cc" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><strong class="ir hi"> Cox模型</strong>具有随时间波动的风险函数，这意味着它可以描述由于老化等原因导致的事件随时间发生的不同概率。它能估计HR，但不能估计S(t)。这有利于队列比较。</li></ul><h2 id="ced6" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">卡普兰-迈耶模型</h2><p id="f88d" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">K-M模型也被称为阶梯函数，因为它将函数可视化为“楼梯”,并在统计上将生存函数描述为(Pi符号将函数的所有结果相乘)</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es mn"><img src="../Images/60aa8da7a22ac50f4eefb3e9fe16be55.png" data-original-src="https://miro.medium.com/v2/resize:fit:260/format:webp/1*0lqzvUb11m4hL96fMjjvWQ.png"/></div></figure><ul class=""><li id="3c65" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">这里，ni表示在时间t之前处于危险中的受试者的数量。di表示在时间t感兴趣的事件的数量</li><li id="627d" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">S(t) = S(t-1)q(t) (q为当前存活率)</li></ul><p id="ec1e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">假设你有以下生存数据。我们可以手动计算t时刻的生存函数，并使用python包<em class="lf">生命线</em>来可视化它，如下所示。重要的是，我们可以估计t=15的中位生存点</p><ul class=""><li id="6e7b" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">时间= [2，3，6，6，7，10，15，15，16，27，30，32]</li><li id="2c6b" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">死亡(事件)= [1，0，1，1，1，0，1，1，1，1，1，1，1，1]</li></ul><div class="ll lm ln lo fd ab cb"><figure class="lp ii mo lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/0cc1df6b8d167d986e17dbcf9b3da199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*RQ11bfANfgM1152pMiNJuA.png"/></div></figure><figure class="lp ii mp lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/35afb54a46aa0d5994eddc7177fa60b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*BBzojEM-JjBGbBOWQp6qpg.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx mq di mr mc translated">卡普兰-迈耶模型</figcaption></figure></div><h2 id="d733" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">指数模型</h2><p id="aaac" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">根据<a class="ae md" href="https://www.mathcha.io/editor/5BwdZSYniVvh6VZzEZhGYNPGKFD2odmLiddOG18" rel="noopener ugc nofollow" target="_blank">中所解释的数学关系(见第4点)</a>，生存函数可相应地描述如下。请注意，风险率在指数模型中是常数，为λ。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es ms"><img src="../Images/e53242a277050fb4e2d92a28f8e47156.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*pOEWVEvV8_0ApXBGCVHgKQ.png"/></div></figure><p id="a3d7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在图表“Kaplan-Meier &amp;具有相同数据集的指数模型”的上述指数模型中，λ为16.9，因此风险率变为1/16.9=0.05912，这是常数。</p><h2 id="a19a" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">Cox比例风险模型——比较不同预测因子的效果</h2><p id="f1fa" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">cox模型<strong class="ir hi">通常用于比较协变量(预测因素)对生存曲线</strong>(生存概率函数)的影响，如果我们知道相关的协变量值，这将有助于我们预测个体的生存概率。该模型背后的想法是<strong class="ir hi">个体的对数风险是其静态协变量的线性函数</strong>，是随时间变化的群体水平基线风险。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es mt"><img src="../Images/9755b23a8cbf446ea958f7b9ab9b4ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*abZ-EzGtLwp9HKJtAUR68A.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">对数风险是cox模型中的线性回归</figcaption></figure><p id="edf0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">h0(t)是基线风险函数，它被定义为当所有其他协变量等于零时经历感兴趣事件的概率。b1、b2..是每个协变量或预测值的系数。它是模型中唯一依赖于时间的组件。在不知道回归中的截距ln(h0(t))的情况下，该模型仍然可以估计斜率并比较群组。该模型允许风险函数随时间增加/减少，但风险比是成比例的(HR是常数)。</p><ul class=""><li id="d05a" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">HR = h(t | x =男性)/h(t | x =女性)=2(任何时间点的常数)</li></ul><h2 id="92de" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated"><strong class="ak">示例:客户流失</strong></h2><p id="a467" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">在本节中，cox模型使用IBM的客户流失数据集进行训练。在这种情况下，事件是客户流失，列任期被视为时间跨度。请注意，在下面的代码中，我将数据集中的分类值转换为二进制值。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/db5d5c862ab7866ca1916957abae0f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6i3VoU6bPCQtGRnWfSFPvg.png"/></div></div></figure><h2 id="c17e" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">Cox模型—绘制系数</h2><p id="0623" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">使用上述拟合模型，查看系数及其范围的另一种方法是使用绘图法。在剧情中，这里发现了一些有趣的点。</p><ul class=""><li id="964e" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">性别在预测客户流失方面没有起到关键作用(几乎没有影响)</li><li id="1870" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">月费的β值看似微不足道，但实际上它的范围很广，因此相乘将产生巨大的差异</li></ul><div class="ll lm ln lo fd ab cb"><figure class="lp ii mv lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/b384f2fb9314ccca4ec99b4978f2886d.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*Vwh5gEqnxQVgFXHAoeFSlg.png"/></div></figure><figure class="lp ii mw lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/f562b7fc0fc78b43601fcac39faa85a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*TNET_XZgRWCsH4JM541-OQ.png"/></div></figure></div><h2 id="c0e8" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">考克斯模型——绘制协变量变化的影响</h2><p id="d132" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">拟合模型后，我们可以绘制出当其他因素不变时，单个协变量发生变化时的生存曲线。在给定模型的情况下，这有助于理解协变量的影响。为此，我们使用plot _ partial _ effects _ on _ outcome()方法，并为其提供感兴趣的协变量以及要显示的值。</p><p id="aefd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该图比较了客户是否拥有流媒体电视对流失的影响。您可以看到使用StreamingTV (StreamingTV_Yes=1)的客户流失率较低。</p><div class="ll lm ln lo fd ab cb"><figure class="lp ii mx lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/d6ef8806da003fab409b4fe2f4a25f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*pyU9Za6hPf5INtKwrNFbSA.png"/></div></figure><figure class="lp ii my lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/98364bf787bb4d0f4f1f6029af592c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*r1GgW6rA7bnR3cdeHrDOpg.png"/></div></figure></div><h2 id="afe4" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">Cox模型——预测样本的生存函数</h2><p id="73b1" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">拟合模型可以通过将预测值作为一行提供给模型来估计样本的生存函数。下图显示了客户5到10的流失率。</p><div class="ll lm ln lo fd ab cb"><figure class="lp ii mz lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/36bc3e9ff0e7608476b83fcb1ec2e42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*Gz-Mj3qqTWwN9jlNmvIkXg.png"/></div></figure><figure class="lp ii na lr ls lt lu paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/e2de49ae1e7a3acbb0b0f1146d51d91b.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*IahyJu6-HnNNi68EkFAYcw.png"/></div></figure></div><h2 id="a80c" class="jw jx hh bd jy jz ka kb kc kd ke kf kg ja kh ki kj je kk kl km ji kn ko kp kq bi translated">对数秩检验— <strong class="ak">比较两个样本组</strong></h2><p id="3222" class="pw-post-body-paragraph ip iq hh ir b is kr iu iv iw ks iy iz ja kt jc jd je ku jg jh ji kv jk jl jm ha bi translated">该检验通常用于使用假设检验比较两个不同队列的存活分布。</p><ul class=""><li id="f6c7" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">目标—发现各组之间是否有显著差异</li><li id="f25d" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">零假设——各组之间没有显著差异</li></ul><p id="4ad6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在零假设的情况下，如果我们获得了足够的证据来显示组间的显著差异，那么我们必须拒绝零假设。通常，在计算事件的p值后，我们将该值与显著性水平进行比较，显著性水平通常为0.05 (5%)。<strong class="ir hi">如果p值低于显著性水平，那么我们认为该事件极少发生1型错误(假阳性)，甚至可以拒绝零假设</strong>。</p><p id="1c07" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">假设我们有如下的术前或术后接受化疗的生命表。</p><ul class=""><li id="e236" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated">n:群体中风险的数量</li><li id="2206" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">o:观察到的事件数量</li><li id="0229" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated">e:预期的团体项目数</li></ul><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nb"><img src="../Images/afc71928fca9956b6d9e41b366fa6d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMP_BrHXCJYzemcUcZYH-g.png"/></div></div></figure><p id="ae3b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请注意，当只有一个事件发生时，第1组中处于危险中的数字从10变为8，因为有一个经审查的病例(即在观察时间内没有事件的情况下完成病例)。</p><p id="7300" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了计算检验统计量，我们需要在每个事件时间(例如时间月)观察到的和预期的事件数量。观察到的事件数(O)来自样本，预期的事件数(E)是在假设零假设为真的情况下计算的(即存活曲线是相同的)。</p><p id="67d5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如，在时间14，如果组间没有差异(零假设)，则无论组如何，所有受试者发生事件的概率都是1/17 (O/N)。给定该概率，将每组中处于危险中的人数相乘，得到预期的事件数，7(1/17)=0.444，10(1/17)=0.556。如果总共有2个事件发生，那么应该乘以2/17。</p><p id="578c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在计算出所有预期事件数(E)后，我们可以计算检验统计量，并在卡方表中与临界值(x)进行比较(因为对数秩检验是卡方检验的一种)。</p><p id="52dd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">x =σ(O-E)/E =(6–2.62)/2.62+(3–6.38)/6.38 = 6.151</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es nc"><img src="../Images/07ba96a4fd042417a915a257f2ef8a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*k7EpaSuOQoqdBYZp1BLkyg.png"/></div></figure><p id="cdee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对数秩统计量的自由度(df)等于k-1，其中k代表比较组的数量。在本例中，k=2，因此检验统计量有1个自由度。</p><p id="2dca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">鉴于此，我们可以发现临界值为3.84，显著性水平为0.05 (5%)。由于测试统计在0.01和0.05之间(&lt; 5%), we can reject the null hypothesis and say that the observation shows statistical difference between Group 1 and 2.</p></div><div class="ab cl mf mg go mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ha hb hc hd he"><p id="6755" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Survival analysis is the great technique which allows us to find the curve of certain event not occurring over time and compare it with another curve. If the comparison shows statistically significant difference through testing then the cox model allows us to analyse cause of it by seeing performance of a covariate.</p><p id="146f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Thanks for reading!</p><p id="5b19" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="lf">参考:</em></p><ul class=""><li id="b9a9" class="kw kx hh ir b is it iw ix ja ky je kz ji la jm lb lc ld le bi translated"><em class="lf">我自己讲解的生存方程、风险方程、指数方程、Cox模型以及它们在</em> <a class="ae md" href="https://www.mathcha.io/editor/5BwdZSYniVvh6VZzEZhGYNPGKFD2odmLiddOG18" rel="noopener ugc nofollow" target="_blank"> <em class="lf">的数学关系https://www . mathcha . io/editor/5 bwdzsynivvh 6 vzzezygynpgkfd 2d odmliddog 18</em></a></li><li id="ff87" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><a class="ae md" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjzvfWlxJ3vAhWxkOYKHT6BBmsQFjABegQIARAD&amp;url=https%3A%2F%2Fdata.princeton.edu%2Fwws509%2Fnotes%2Fc7.pdf&amp;usg=AOvVaw1tCwnI01MR3wUJd8PvM-YW" rel="noopener ugc nofollow" target="_blank"> <em class="lf">生存Modelsdata.princeton.edu wws 509笔记</em> </a></li><li id="9165" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><a class="ae md" href="https://pub.towardsai.net/survival-analysis-with-python-tutorial-how-what-when-and-why-19a5cfb3c312" rel="noopener ugc nofollow" target="_blank"> <em class="lf">生存分析与Python教程</em> </a></li><li id="23d2" class="kw kx hh ir b is lg iw lh ja li je lj ji lk jm lb lc ld le bi translated"><a class="ae md" href="https://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_survival/BS704_Survival5.html" rel="noopener ugc nofollow" target="_blank"> <em class="lf">比较生存曲线</em> </a></li></ul></div></div>    
</body>
</html>