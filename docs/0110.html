<html>
<head>
<title>Data Monitoring and it’s importance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据监控及其重要性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-monitoring-and-its-importance-44b5495f4731?source=collection_archive---------31-----------------------#2021-01-04">https://medium.com/analytics-vidhya/data-monitoring-and-its-importance-44b5495f4731?source=collection_archive---------31-----------------------#2021-01-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1a5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在训练机器学习模型时，我们总是希望根据我们正在解决的问题最大化(AUC，Precision，Recall，F1 score)或最小化(log loss)我们的评估指标。我们稍后将在测试数据集上评估该模型，以确保该模型没有过度拟合，并且按照预期工作。</p><p id="74df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦这个阶段完成，模型部署到生产中，我们如何知道模型是否过度拟合，或者模型在实际中的表现如何？在这些情况下，我们没有预先构建的测试数据集来判断模型的实际性能。因此，为了处理这种情况，我们通常会构建数据监视器来监视模型的性能，并在我们看到模型的行为发生突然变化时向我们发送警报。</p><h2 id="364d" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">这些数据监视器是如何工作的？</h2><p id="4538" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">数据监视器的主要工作是每天、每周或每月查看预测得分，并检查预测得分的分布是否在生产和培训期间保持不变。如果分布中有任何差异，那么我们需要分析是什么特征导致了预测分数分布的漂移。在下图中，您可以看到在培训和部署阶段，预测得分的分布在任何时段的变化都不超过2%。这意味着模型的训练数据和模型在生产中的得分数据非常相似，不存在重大偏差。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div class="er es kc"><img src="../Images/edaa8820888bc6cc9339955cab00527b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*mgLu8WfP6H44Z31qGoTIwQ.png"/></div><figcaption class="kk kl et er es km kn bd b be z dx translated">训练和部署阶段预测分数的分布</figcaption></figure><p id="3363" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一方面，在下图中，您可以看到桶0.9–1.0和0.2–0.3的预测分数分布急剧增加(&gt; 8%)，而桶0.5–0.6的预测分数分布急剧减少(&gt; 5%)。这意味着模型在生产中评分的数据发生了很大变化，因为分数的分布发生了变化。因此，我们需要研究是什么特征导致了模型分数的显著漂移。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div class="er es kc"><img src="../Images/a4c14c4c814cbd86441b57e7dbb6d4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*IfxeyBUgsCL5aZ3uaJLFgA.png"/></div></figure><h2 id="7012" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated"><strong class="ak">检测特征漂移</strong></h2><p id="2dbe" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">根据上面的预测得分分析，我们得出一个结论，即一个或多个特征发生了漂移。现在，如何找出导致漂移的特征？我们可以使用不同的技术来检测特征漂移。首先，让我们看看检测单变量特征漂移的最常见技术。</p><p id="6fab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="ko">概率稳定指数(PSI): </em> </strong></p><p id="8241" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">PSI值将是一个特征在一段时间内或在两个不同样本中的分布变化的指标。这只适用于数值和单变量特征。以下是PSI计算的步骤。</p><p id="5312" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于每个数字特征，</p><ol class=""><li id="b241" class="kp kq hh ig b ih ii il im ip kr it ks ix kt jb ku kv kw kx bi translated">对于训练数据集(在模型被训练之后)，将数据分成10个相同大小的分位数。例如，如果值的范围在0和1之间。这10个存储桶在每个存储桶中有10%的值，如下所示。</li></ol><figure class="kd ke kf kg fd kh er es paragraph-image"><div class="er es ky"><img src="../Images/3f6422c5830c0699182b5a24a7e745a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*kGKmNctX-b1oVK_4-DvubQ.png"/></div></figure><p id="7690" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.获取生产过程中的每日、每周或每月数据，计算每个铲斗的分布，并查看生产过程中的分布情况</p><p id="8b37" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.使用以下公式为10个铲斗的每个特性计算PSI值。实际是指训练数据集值，预期是指生产数据集。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/0238c50cb0678c8be643c43bb6bb0b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frfbtw3usRGCLbTrITgClA.png"/></div></div></figure><p id="8d39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">释义:</strong></p><ul class=""><li id="a639" class="kp kq hh ig b ih ii il im ip kr it ks ix kt jb le kv kw kx bi translated"><strong class="ig hi"> PSI &lt; 0.1 </strong>:没有显著的人口变化</li><li id="3bd5" class="kp kq hh ig b ih lf il lg ip lh it li ix lj jb le kv kw kx bi translated"><strong class="ig hi"> PSI &lt; 0.2 </strong>:适度的人口变化</li><li id="a595" class="kp kq hh ig b ih lf il lg ip lh it li ix lj jb le kv kw kx bi translated"><strong class="ig hi"> PSI &gt; = 0.2 </strong>:显著的人口变化</li></ul><p id="cf46" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果PSI &gt; =0.2，则特征存在显著漂移，我们可能需要根据影响程度重新训练模型。</p><p id="d524" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">关注点:</strong></p><p id="c771" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于这仅适用于数字特征，因此很难处理分类特征。我们需要进行一次热编码，并将该热编码特征视为二进制，并在这些情况下计算PSI索引。</p><p id="62f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="ko">多元数据:</em> </strong></p><p id="6a5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当我们需要检测特征组合是否漂移时，我们必须建立另一个机器学习模型来检测特征漂移。该模型可以是神经网络或KNN算法。</p><h2 id="ede4" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated"><strong class="ak">结论:</strong></h2><p id="d808" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">数据监控器对于生产中的任何ML模型都非常重要。我们可以有多个用于不同目的的数据监视器，并同时使用它们。我们想要构建的数据监视器的类型取决于应用程序的类型。</p><p id="60ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢您阅读博客！希望对你有用。请在下面留下您的评论或通过<a class="ae lk" href="https://www.linkedin.com/in/madhu-ramiah-a66a4b48/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p></div></div>    
</body>
</html>