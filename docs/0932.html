<html>
<head>
<title>How to Find Stocks to Invest in Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python寻找股票进行投资</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-find-stocks-to-invest-in-using-python-87b5169190d5?source=collection_archive---------2-----------------------#2021-02-07">https://medium.com/analytics-vidhya/how-to-find-stocks-to-invest-in-using-python-87b5169190d5?source=collection_archive---------2-----------------------#2021-02-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/0dffc605cac757f1416f9aca9c89e360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBbgkFG8akKp6BiOPFElSw.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">Hart Rockwell摄于新西兰奥克兰</figcaption></figure><div class=""/><p id="e8e6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我着迷于股票市场，并发现它是无数想法使用Python转化为项目的灵感。本文概述了下载公司财务报告、对财务数据运行一系列测试以及总结哪些股票通过了测试的过程。这篇文章旨在尽可能简化选择股票投资的过程。</p><p id="dacc" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">将涵盖以下部分:</p><ol class=""><li id="7036" class="jr js hw iv b iw ix ja jb je jt ji ju jm jv jq jw jx jy jz bi translated">如何寻找股票进行投资</li><li id="f6b2" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">运行脚本需要什么</li><li id="7f4f" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">主要功能概述</li><li id="4fec" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">输出文件的描述</li><li id="3e1d" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">如何使用输出文件选择股票</li><li id="1dbb" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">布丁中的证据</li></ol><p id="ace5" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">不应该假设这里介绍的方法、技术或指标会盈利或不会导致亏损。</p><p id="eecd" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">你可以在这里查看库<a class="ae kf" href="https://gitlab.com/hartr/stock-search-public.git" rel="noopener ugc nofollow" target="_blank"/>！</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kg"><img src="../Images/67367b6b238dcbe4312fe0c0a5efc648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mnx2fWQjG3rvE7RG"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">由<a class="ae kf" href="https://unsplash.com/@blunkorama?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">劳埃德·布兰克</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="871c" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">如何寻找股票进行投资</h1><p id="96bf" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">我对寻找有前途的股票的大部分研究来自威廉·奥尼尔的《如何在股票中赚钱》一书。尽管我读的这一版是2009年出版的，而且自那以后市场已经发生了巨大的变化，但我相信，有一些基本的衡量标准永远可以识别一家成功的公司。</p><p id="fd91" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以下是我的脚本使用的指标:</p><ul class=""><li id="2e7c" class="jr js hw iv b iw ix ja jb je jt ji ju jm jv jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/r/revenue.asp" rel="noopener ugc nofollow" target="_blank">收入/销售</a></li><li id="c684" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/n/netincome.asp" rel="noopener ugc nofollow" target="_blank">净收入</a></li><li id="c657" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/s/shareholdersequity.asp" rel="noopener ugc nofollow" target="_blank">股东权益</a></li><li id="460c" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/o/outstandingshares.asp" rel="noopener ugc nofollow" target="_blank">已发行股份</a></li><li id="908b" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/e/eps.asp" rel="noopener ugc nofollow" target="_blank">每股收益</a></li><li id="83cd" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><a class="ae kf" href="https://www.investopedia.com/terms/r/returnonequity.asp" rel="noopener ugc nofollow" target="_blank">净资产收益率</a></li></ul></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><p id="7fba" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">奥尼尔的书主要基于一个名为CAN SLIM的首字母缩略词。我开发的Python脚本利用了前两个字母。</p><h2 id="0996" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">当前季度收益和销售额</h2><p id="e46b" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">每股季度收益必须至少增长18-20%，但最好增长40-100%或更多。越高越好。在最近几个季度的某个时候，它们也应该在加速增长。季度销售额也将加速增长或达到25%或更多。</p><h2 id="047a" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">年收入增加</h2><p id="c15c" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">在过去三年中，每年必须有显著(25%或以上)的收入增长，并且股本回报率达到17%或以上(25-50%优先)。如果股本回报率太低，税前利润率必须很高。</p></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><p id="2aa2" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">利用这些知识，我设置了脚本来测试股票，如下所示:</p><ol class=""><li id="af50" class="jr js hw iv b iw ix ja jb je jt ji ju jm jv jq jw jx jy jz bi translated">年度报告的每股收益必须至少增长20%</li><li id="0fba" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">年度报告的净资产收益率必须至少增长17%</li><li id="c9b8" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">季度报告的每股收益必须至少增长20%</li><li id="458d" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">季度报告必须有至少20%的销售增长</li></ol><p id="2a56" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">百分比增长是逐年的，例如，从2020年第一季度到2021年第一季度的百分比变化。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div class="er es mk"><img src="../Images/e573715b731681b7a8a9bb76d82d5050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*W0ZZR3kJbCJQ8DU5HId_vw.jpeg"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae kf" href="https://www.wsj.com/articles/BL-TOTALB-1670" rel="noopener ugc nofollow" target="_blank">在华尔街日报上找到</a></figcaption></figure><h1 id="5045" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">运行脚本需要什么</h1><p id="550d" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">要开始使用这些脚本，您需要一个要处理的股票代码列表。您可以生成自己的符号列表，也可以从网上下载列表。我已经用<a class="ae kf" href="https://www.tradingview.com/" rel="noopener ugc nofollow" target="_blank">交易视图</a>、<a class="ae kf" href="https://stockcharts.com" rel="noopener ugc nofollow" target="_blank">股票图表</a>和<a class="ae kf" href="https://finviz.com" rel="noopener ugc nofollow" target="_blank"> finfiz </a>下载了一个*。股票符号的csv。如果你不想付费订阅，这些网站有一个月的免费试用期。当我使用这些脚本时，我通常会下载一个价格范围的符号列表，或者寻找特定行业的股票。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ml"><img src="../Images/1ead15bf3dafff4379c0595e13e23b11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXYzaSfzRuH6WJLLe9miVA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">带符号栏的股票列表示例</figcaption></figure><p id="139f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最重要的是。csv需要有一个标记为“Symbol”的列，其中包含所有要处理的股票符号。</p></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><p id="25b0" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您还需要一个来自Alpha Vantage的免费API密匙<a class="ae kf" href="https://www.alphavantage.co/support/#api-key" rel="noopener ugc nofollow" target="_blank">,用于下载财务报告。</a></p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mm"><img src="../Images/5366a039035b32910ca805d043ff3114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTheoqn_-BlzO6DbHZdyfg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">沃尔玛(WMT)季度损益表</figcaption></figure><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mn"><img src="../Images/06331102ded4f37d0ffccdb2415af101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhfOVcLxwJ0mTya_9evm9A.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">沃尔玛(WMT)季度资产负债表</figcaption></figure><p id="7e18" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">API将下载四个报告:季度损益表、季度资产负债表、年度损益表和年度资产负债表。这些报告将提供与你在SEC.gov找到的相同的财务信息。上面的两个数字突出了脚本中使用的列:总收入、净收入、股东权益和流通股。</p><p id="93e5" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="mo">你需要运行的两块</em> <a class="ae kf" href="https://gitlab.com/hartr/stock-search-public.git" rel="noopener ugc nofollow" target="_blank"> <em class="mo">脚本</em> </a> <em class="mo">都是*。您想要处理的所有股票的csv和API密钥。</em></p><p id="7f14" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一旦下载了存储库和必要的Python包，只需从命令行解释器运行以下命令:</p><pre class="kh ki kj kk fd mp mq mr ms aw mt bi"><span id="1499" class="lw km hw mq b fi mu mv l mw mx">python findStocks.py --stock_list "Your Stock List.csv" --key "YOURAPIKEY"</span></pre><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es my"><img src="../Images/9cc465a4bc69a1e0672a24737e71d920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wA9kUwgdwAuOWrwF18Peqw.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae kf" href="https://www.glasbergen.com/ngg_tag/stock-market-humor-cartoon-comics/" rel="noopener ugc nofollow" target="_blank">在Glasbergen卡通服务上找到</a></figcaption></figure><h1 id="d9c5" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">主要功能概述</h1><p id="04ae" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">下面你会看到脚本的一般过程。</p><h2 id="50e7" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">伪代码</h2><pre class="kh ki kj kk fd mp mq mr ms aw mt bi"><span id="5fab" class="lw km hw mq b fi mu mv l mw mx">Download the data<br/>for stock in all_stocks<br/>    Run preliminary tests on stock<br/>    Calculate additional metrics<br/>    Run main tests<br/>    Save financial data for stock<br/>Save results for all stocks</span></pre><p id="6473" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">下面你会看到主函数和解释过程的详细注释。</p><h2 id="531e" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated"><a class="ae kf" href="https://gitlab.com/hartr/stock-search-public" rel="noopener ugc nofollow" target="_blank"> findStocks.py </a></h2><pre class="kh ki kj kk fd mp mq mr ms aw mt bi"><span id="f7aa" class="lw km hw mq b fi mu mv l mw mx">if __name__ == '__main__':</span><span id="c7cf" class="lw km hw mq b fi mz mv l mw mx">    # Get user inputs<br/>    stockFile, dataFolder, apikey, flexible, record = getInputs()</span><span id="acdb" class="lw km hw mq b fi mz mv l mw mx">    # Get financial report data<br/>    symbols = getData(stockFile, dataFolder, apikey)</span><span id="1f25" class="lw km hw mq b fi mz mv l mw mx">    # Loop through all stocks<br/>    for s in symbols:<br/>        print('&gt;&gt;&gt;', s)</span><span id="f8fd" class="lw km hw mq b fi mz mv l mw mx">        # Initialize Stock object<br/>        stock = Stock(s, dataFolder, flexible)</span><span id="bd4a" class="lw km hw mq b fi mz mv l mw mx">        # Run preliminary tests to check if stock is disqualified<br/>        preliminaryTests(stock)</span><span id="64e2" class="lw km hw mq b fi mz mv l mw mx">        # Skip stock if it failed preliminary tests. Update<br/>        # the *Processed.csv<br/>        if stock.errorMessage != 'processed':<br/>            updateProcessed(stockFile, s, stock.errorMessage)<br/>            continue</span><span id="ddc2" class="lw km hw mq b fi mz mv l mw mx">        for r in stock.reports:<br/>            # Manage missing data and other inconsistencies in data<br/>            manageBadData(stock, r)</span><span id="efb0" class="lw km hw mq b fi mz mv l mw mx">            # Calculate new metrics and run stock tests<br/>            analyzeStock(stock, r)</span><span id="f124" class="lw km hw mq b fi mz mv l mw mx">        # Save data and update files<br/>        record = saveResults(stock, s, stockFile, record)</span><span id="a482" class="lw km hw mq b fi mz mv l mw mx">    # Save the test results for all stocks<br/>    columns = [x for x in stock.record.keys()]<br/>    saveAll(record, columns)</span></pre><p id="688b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我创建了一个<em class="mo"> preliminaryTests </em>函数，它将运行可以取消股票进一步分析资格的初步测试。取消股票资格可以加快运行时间，减少保存的文件数量。它还减少了<em class="mo"> *Results.csv </em>中的股票数量，从而减少了最终分析的混乱和混乱。初步测试包括以下内容:</p><ol class=""><li id="13aa" class="jr js hw iv b iw ix ja jb je jt ji ju jm jv jq jw jx jy jz bi translated">最近两个季度报告和最近一个年度报告不能有负的净收入。</li><li id="73d5" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">该股不可能正在经历调整。稍后将详细讨论这个初步测试。</li><li id="ead9" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">从Alpha Vantage下载的财务报告，一半以上的数据都不能少。</li><li id="91f7" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq jw jx jy jz bi translated">财务报告必须以美元报告。</li></ol><figure class="kh ki kj kk fd hj er es paragraph-image"><div class="er es na"><img src="../Images/0c72440a74f780c1ea47e99c4ba44232.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*2qtSaU4UKhHtMr80Mua_aA.jpeg"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae kf" href="https://twitter.com/Calvinn_Hobbes/status/502817542940143617/photo/1" rel="noopener ugc nofollow" target="_blank">在推特上找到的</a></figcaption></figure><h1 id="9a6f" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">输出文件的描述</h1><p id="9497" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">运行脚本后，将保存以下文件和文件夹:</p><ul class=""><li id="9a25" class="jr js hw iv b iw ix ja jb je jt ji ju jm jv jq lo jx jy jz bi translated"><em class="mo"> *Results.csv </em>总结测试结果。</li><li id="3111" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><em class="mo"> *Processed.csv </em>跟踪哪些股票已经处理以及任何错误信息。</li><li id="283a" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><em class="mo">数据</em>文件夹包含使用Alpha Vantage API下载的数据。</li><li id="7454" class="jr js hw iv b iw ka ja kb je kc ji kd jm ke jq lo jx jy jz bi translated"><em class="mo">已处理的</em>文件夹将包含压缩的财务报告。*Results.csv中包含的所有数据都是使用已处理文件夹中的文件计算的。</li></ul></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><figure class="kh ki kj kk fd hj er es paragraph-image"><div class="er es nb"><img src="../Images/e5b4cae525156bbe136f74bdab815d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*RVyj6ml3vagoeqZuZ1VgFQ.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">Example *Processed.csv显示所有成功处理的股票</figcaption></figure><p id="0c69" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上图是*Processed.csv. This *的一个例子。csv用于跟踪哪些股票已被处理，以及在处理股票时发生的任何错误。</p><p id="18d9" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从Alpha Vantage下载的数据经常丢失或不正确。我已经编写了代码，以便在出错时将错误消息保存到*Processed.csv文件中。</p><p id="2104" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一些错误消息可以通过手动清理和更正财务报告来更正。如果您想更正错误或阅读关于错误消息的更多信息，您可以阅读脚本顶部的docstring<a class="ae kf" href="https://gitlab.com/hartr/stock-search-public.git" rel="noopener ugc nofollow" target="_blank">findstocksclasses . py</a>。</p></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nc"><img src="../Images/563bbdf8243322036b6ea90782e2153e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vd6O3wiByUSpre7_LiJQlA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">处理过的沃尔玛(WMT)财务数据</figcaption></figure><p id="be9c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">处理后的文件夹将有每只股票的压缩财务数据(见上图)。</p><p id="121d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">财政日期、总收入、净收入、股东权益和已发行股票直接取自资产负债表和损益表。所有其他列都经过计算，用于测试库存质量。</p><p id="e11e" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了减少文件数量，我把季度报告和年度报告连接在一起。这就是日期从2017年7月31日跳到2020年1月31日的原因。百分比变化是逐年计算的，上图中的空单元格是由于没有数据来计算百分比变化。</p></div><div class="ab cl lp lq go lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ha hb hc hd he"><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nd"><img src="../Images/56f820ede2faf6598ccf7fd233fb5eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0BMqRxHMQlhP1MaEF9ceg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">*总结库存质量的Results.csv</figcaption></figure><p id="f73f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">运行脚本后，a *Results.csv将提供哪些股票值得投资的信息(见上图)。</p><h2 id="2681" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">倾斜</h2><p id="d3d5" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">第二列<em class="mo">斜率</em>是衡量股价最近上涨多少的一种方式。我创建了一个简短的算法，对最近的股票价格变化进行加权，使其比几个月前的价格变化更重。斜率值越大，最近涨价幅度越大。价格变化率是用从<a class="ae kf" href="https://pypi.org/project/yahoo-finance/" rel="noopener ugc nofollow" target="_blank">雅虎下载的数据计算出来的财务API </a>。</p><p id="4cee" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">下面你可以看到斜率是如何计算的。您也可以在findStocksClasses.py 中查看第<a class="ae kf" href="https://gitlab.com/hartr/stock-search-public" rel="noopener ugc nofollow" target="_blank">行179-206的代码。</a></p><pre class="kh ki kj kk fd mp mq mr ms aw mt bi"><span id="cd67" class="lw km hw mq b fi mu mv l mw mx"># Download ticker data<br/>df = yf.download(self.s, period='1y', interval='1d')</span><span id="c7a7" class="lw km hw mq b fi mz mv l mw mx"># Get the most recent close price<br/>last = df.iloc[-1, 3]<br/>self.changes = []<br/>adjSlope = 0<br/>normalizer = 0</span><span id="b027" class="lw km hw mq b fi mz mv l mw mx"># Example dates: [9/1/2020, 10/1/2020, 11/1/2020, 12/1/2020,<br/>#                 1/1/2021, 2/1/2021]<br/>for i in range(len(dates)):</span><span id="78c1" class="lw km hw mq b fi mz mv l mw mx">    # Fist of the month might not be a day that the stock market is<br/>    # open. If not then subtract one day until it is in df.index<br/>    d = dates[i]<br/>    while d not in df.index or d in self.daysClosed:<br/>        d -= td(days=1)<br/>    <br/>    # Get close price<br/>    price = df.loc[d, 'Close']<br/>    <br/>    # Calculate percent change<br/>    pc = (last - price) / price<br/>    <br/>    # Weight increases each month<br/>    # More weight is added to recent slopes<br/>    weight = i + 1</span><span id="f92a" class="lw km hw mq b fi mz mv l mw mx">    # Add to normalizer, this will normalize the cumulative slopes.<br/>    normalizer += weight<br/>    <br/>    # Add to the cumulative slope<br/>    adjSlope += pc * (weight)<br/>    self.changes.append(pc)</span><span id="e85a" class="lw km hw mq b fi mz mv l mw mx">self.record['slope'] = round(adjSlope / normalizer, 3)</span></pre><h2 id="b889" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">平均百分比变化</h2><p id="5c6a" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">第三列<em class="mo"> avgpc </em>是最近三个季度总收入百分比变化和EPS百分比变化的平均值(六个值的平均值)。平均百分比变化衡量了过去三个季度中每个季度的平均收入和每股收益的同比增长情况。</p><h2 id="e50e" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">复制</h2><p id="1ba1" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">我添加了一个<em class="mo">复制的</em>列，如果财务信息(除了发行在外的股票)是从最近的季度/年度报告中复制的，该列将具有真实值。使用Alpha Vantage API经常会丢失数据。对于已发行的股票来说尤其如此。如果数据丢失，则复制下一个最旧报告中的数据，以避免用户输入丢失的数据。如果被复制，在<em class="mo">复制</em>栏会有一个真值。如果用户想要找到并输入任何丢失的数据，则由用户决定。可以将脚本配置为在遇到缺失数据时等待用户输入。更多信息见<a class="ae kf" href="https://gitlab.com/hartr/stock-search-public.git" rel="noopener ugc nofollow" target="_blank">库</a>。</p><h2 id="6f63" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">股票测试</h2><p id="406b" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">接下来的四列<em class="mo"> annualeps、</em> <em class="mo"> annualroe </em>、<em class="mo"> quarterlyeps </em>和<em class="mo">quarterly revue</em>是我在本文第一部分中描述的测试。这些测试包括年报EPS增长20%以上，年报ROE增长17%以上，季报EPS增长20%以上，季报销售额增长20%以上。如果这些测试中的任何一个失败，值1将被保存。<em class="mo"> numfailed </em>列是失败的测试的数量(四个测试列的总和)。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ne"><img src="../Images/a2bc4e12707110381e9d3bf35df2c43a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7xRjWVA-GU5kKoQ-V3YfuQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae kf" href="http://micawberprinciple.com/riding-the-stock-market-roller-coaster-2859/" rel="noopener ugc nofollow" target="_blank">发现米考伯原理</a></figcaption></figure><h1 id="c311" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">如何使用输出文件选择股票</h1><p id="c58d" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">当我分析*Results.csv时，我对<em class="mo"> numfailed </em>列进行升序排序。通过所有测试的股票将有一个0，并在表格的顶部。</p><p id="9be6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在我找到通过可接受数量测试的股票后，我开始调查这些公司。以下是奥尼尔的《如何在股票中赚钱》中涉及的一些研究课题。</p><h2 id="54ef" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">公司是做什么的？</h2><p id="5572" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">该公司是否属于科技等有前途的行业？T21公司从新冠肺炎疫情中获益了吗(也许是暂时的)？</p><h2 id="5ca8" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">无论他们有新产品还是管理</h2><p id="55ad" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">他们有能大幅增加收入的新产品吗？同样，他们有新的管理层吗？选择创业型管理人员，而不是看护人员。大公司规模往往导致缺乏想象力和生产效率。它们通常变化缓慢，由较老的管理层保守地管理。</p><h2 id="15ed" class="lw km hw bd kn lx ly lz kr ma mb mc kv je md me kz ji mf mg ld jm mh mi lh mj bi translated">如果他们有机构赞助</h2><p id="e119" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">推高价格需要巨大的需求，到目前为止，股票需求的最大来源是机构投资者。股票也应该由最高管理层拥有。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nf"><img src="../Images/780741fdf28e935fed68607e9f51a9d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SVKuHARkZAWLQ2Dt2yG2UQ.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae kf" href="https://theunderfold.com/2020/03/16/the-stock-market-is-crashing/" rel="noopener ugc nofollow" target="_blank">在下层漫画上找到的</a></figcaption></figure><h1 id="7d60" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">布丁中的证据</h1><p id="9e09" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">为了用证据支持我寻找股票的努力，我用本文概述的方法分析了我的雇主401(k)和我找到的股票。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ng"><img src="../Images/0882446577fa566c0fc40e1c8d8327ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8v0lRL_yvIx7BnumxsepqA.png"/></div></div></figure><p id="3869" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上面你会看到我通过运行脚本找到的八只股票与我的401(k)相比如何。每个数据点显示了投资账户每月的百分比变化。我还画出了两只表现最好的股票:Etsy和可再生能源集团(REGI)。</p><p id="7ed9" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上图中的数据始于2020年8月，当时我觉得有信心在2020年春季的高波动期结束后，将债券投资转移到股票。尽管这不是一个足够长的时间来做出明确的结论，但我选择的股票在除了一个月之外的所有月份都超过了我的401(k)计划，这是有希望的。</p><figure class="kh ki kj kk fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nh"><img src="../Images/2f066d06178a198b60164708d479bc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-tzBdQ9HryPz2LVj"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">照片由<a class="ae kf" href="https://unsplash.com/@robertbye?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">罗伯特拜拜</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h1 id="8980" class="kl km hw bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">结论</h1><p id="265a" class="pw-post-body-paragraph it iu hw iv b iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ln jo jp jq ha bi translated">这篇文章简要介绍了我用来寻找高质量股票的指标。我提供的大部分信息都是使用脚本以及如何解释文件和数据的手册。你所需要的只是一个股票代码列表和一个来自Alpha Vantage的API密匙。</p><p id="6f3d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我花了几个小时使用合理的研究和Python来简化寻找股票的过程。我已经成功地用这些脚本找到了股票，我相信开源软件的精神。我希望你也能有同样的成功！</p><p id="5e0d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您可以查看<a class="ae kf" href="https://gitlab.com/hartr/stock-search-public" rel="noopener ugc nofollow" target="_blank">存储库</a>来查看本文中包含的所有数据，以及关于运行脚本的更多信息。感谢您的阅读，交易愉快！</p></div></div>    
</body>
</html>