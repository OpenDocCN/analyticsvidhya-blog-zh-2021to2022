<html>
<head>
<title>Understanding the SEMBLEU (and BLEU) Metric</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解SEMBLEU(和BLEU)度量</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understanding-the-sembleu-and-bleu-metric-2e8a01cedcb3?source=collection_archive---------15-----------------------#2021-03-23">https://medium.com/analytics-vidhya/understanding-the-sembleu-and-bleu-metric-2e8a01cedcb3?source=collection_archive---------15-----------------------#2021-03-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="b288" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">一种健壮的AMR解析评估方法</h1><p id="3022" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我最近开始探索语义推理的抽象意义表示。我熟悉流行的SMATCH指标，但今天我将学习一下<a class="ae ka" href="https://arxiv.org/pdf/1905.10726.pdf" rel="noopener ugc nofollow" target="_blank"> SEMBLEU </a>，这是一个针对AMR解析器的更健壮的评估。</p><h1 id="ce3d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">自主移动机器人（Adaptive Multi-Rate的缩写）</h1><p id="8611" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">AMR图的要点是将句子的语义编码成有向图。图中的节点表示句子中的语义术语，边标识节点之间的语义关系。语义推理任务的一个主要目标是能够从常规句子中提取这些图形。如果我们可以自动提取句子的语义和相应的关系，这将对NLP产生巨大的影响，因为现代语言模型通常很难理解许多关于语义的内容(特别是长距离语义关系)。</p><p id="731d" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">在从输入句子中自动提取AMR图的努力中，我们需要适当的评估度量来理解推断图和金色标记图之间的相似性。为此，人们历来使用SMATCH指标进行AMR评估。</p><h1 id="3199" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">SMATCH</h1><p id="bb1f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">比较两个AMR图是否相似的经典方法是使用<em class="kg"> SMATCH </em>性能指标<strong class="je hi">，它可以有效地解决两个图之间的最佳映射，并计算相应的F1分数</strong>。这有几个问题。</p><p id="1f8f" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">1)寻找精确的最佳映射是一个NP完全问题。因此，找到最佳匹配的良好近似的结果策略容易出错，这削弱了度量的质量。有一些方法可以使这种方法不容易出错，比如用不同的随机初始化多次运行它，但是，这是非常昂贵的。</p><p id="ebd4" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">SMATCH的另一个问题是，在比较边标签时，不考虑节点内容。因此，如果节点不正确，但边是正确的，则SMATCH奖励实际上没有意义的模型。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/6b62e3b05478a700fa24ed60ad20f800.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/0*7JubTIcptn2WT4xc.PNG"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图鸣谢:<a class="ae ka" href="https://arxiv.org/pdf/1905.10726.pdf" rel="noopener ugc nofollow" target="_blank">林峰宋和丹尼尔吉尔迪</a>，有修改</figcaption></figure><p id="2f0c" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">考虑图1中的两个AMR图，其给出的smatch得分为0.25。有人可能会问，<strong class="je hi">为什么我们要给没有语义相似性的图任何分，即使存在一些边标签对齐的配置</strong>？这显然是一个有缺陷的程序，塞姆勒试图解决这个问题。</p><h1 id="e031" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">塞姆勒乌</h1><p id="073e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">让我们介绍一下SEMBLEU，它是对常用于评估机器翻译模型输出的BLEU度量的改编。</p><h2 id="d977" class="kt if hh bd ig ku kv kw ik kx ky kz io jn la lb is jr lc ld iw jv le lf ja lg bi translated">为什么使用SEMBLEU</h2><p id="cca8" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">SEMBLEU将节点/边视为n-gram，从而强制评估过程将节点和边标签作为一个单元进行匹配</p><ul class=""><li id="2971" class="lh li hh je b jf kb jj kc jn lj jr lk jv ll jz lm ln lo lp bi translated">这确保了模型不会被错误地归因于F1点，以在不正确的节点对上产生正确的边标签。</li></ul><p id="66df" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">SEMBLEU不会出现搜索错误，而且速度明显更快</p><ul class=""><li id="1a83" class="lh li hh je b jf kb jj kc jn lj jr lk jv ll jz lm ln lo lp bi translated">SEMBLEU通过计算AMR图上的BLEU分数来工作，其中每个n元文法由节点和边组成</li></ul><p id="00af" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">通过扩展我们想要查看的节点的n-grams数，我们可以评估图中越来越长的依赖关系。</p><ul class=""><li id="eb78" class="lh li hh je b jf kb jj kc jn lj jr lk jv ll jz lm ln lo lp bi translated">例如，如果我们在一个SEMBLEU计算中考虑一个三元组，那么我们要看这个模型是否正确地识别了一系列的3个节点。在评估期间要考虑的n-grams的数量是SEMBLEU系统的超参数。</li></ul><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lq"><img src="../Images/6979b847dcfaa47c94dd7b46c2898d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/0*ZBJJ-nGux91GOasn"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图鸣谢:<a class="ae ka" href="https://arxiv.org/pdf/1905.10726.pdf" rel="noopener ugc nofollow" target="_blank">林峰宋和丹尼尔吉尔迪</a>，有修改</figcaption></figure><h1 id="34d8" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">计算组件</h1><h2 id="a2d0" class="kt if hh bd ig ku kv kw ik kx ky kz io jn la lb is jr lc ld iw jv le lf ja lg bi translated">BLEU的背景知识</h2><p id="ed56" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">原始BLEU度量用于识别机器翻译算法执行得有多好。如果我们不使用BLEU，而使用Precision这样的度量标准，会发生什么</p><blockquote class="lr ls lt"><p id="1627" class="jc jd kg je b jf kb jh ji jj kc jl jm lu kd jp jq lv ke jt ju lw kf jx jy jz ha bi translated">参考文献1:猫在垫子上<br/>参考文献2:垫子上有只猫<br/>预测翻译:The The The The</p></blockquote><p id="e075" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">在上面的例子中，我们可以通过查看预测翻译中的每个单词是否出现在参考句子中来评估预测翻译。然而，这会给我们4/4的精度，这显然不是翻译质量有多高的良好表示。</p><p id="7b48" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">BLEU做的更聪明！让我们看看BLEU的等式</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lx"><img src="../Images/13d442741971a1eef12725776f34469a.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*CfJq9WXcXmnsJemfu0mWJQ.png"/></div></figure><p id="6362" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">其中<em class="kg"> k </em>是考虑中的n-gram的数量，而<em class="kg"> w_k </em>是我们对每个n-gram的分类的权重。“简洁惩罚”，BP 用来鼓励长句子。<em class="kg"> len(参考)</em>和<em class="kg"> len(预测)</em>分别指参考句和预测句的长度。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ly"><img src="../Images/d5c76672644f54601a79c09dd8e740eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*oPtO_7SMhtLsAkDy3-S-7A.png"/></div></figure><p id="0d42" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">让我们通过一个例子来学习p(k)的含义。假设我们想要将这个预测的翻译与我们的两个参考句子进行比较。</p><blockquote class="lr ls lt"><p id="8a34" class="jc jd kg je b jf kb jh ji jj kc jl jm lu kd jp jq lv ke jt ju lw kf jx jy jz ha bi translated">参考文献1:猫在垫子上<br/>参考文献2:垫子上有一只猫<br/>预测翻译:猫垫子上的猫</p></blockquote><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lz"><img src="../Images/e1e13e2c1188e22d827dfd5503f25299.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*HdeVMS1PWBAvlKLQfF8Giw.png"/></div></figure><p id="07c6" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">在上表中，计数是每个二元模型在预测翻译中出现的次数。计数片段(BLEU的核心)是二元模型在任一句子中出现的最大次数。</p><p id="0bf3" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">给定这些信息，我们可以计算<em class="kg"> p(k) </em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ma"><img src="../Images/c6593bf1192c53d78d9551e6ea1026e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:296/format:webp/1*pleDK9eLaf9-wg0uO5jP9A.png"/></div></figure><p id="bde3" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">现在再次为<em class="kg"> n=1 </em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es mb"><img src="../Images/bdc19a8aab0cff7c899e6baf516bc864.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*CuL561TMmdqUXOctKLJbtA.png"/></div></figure><p id="5400" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">我们看到<em class="kg"> p(k)=5/7 </em></p><p id="7e73" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">为了计算BLEU分数的其余部分，我们可以简单地将句子长度插入BP计算中，并根据我们对分类单词和双词的关心程度来选择每个n-gram <em class="kg"> </em>的权重。如果我们想平等地衡量它们，我们可以简单地将它们设置为0.5。</p><h1 id="e06a" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">为语义图调整BLEU</h1><p id="9269" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们可以使用同样的想法来计算两个语义图之间的关系，正如在SEMBLEU论文中介绍的那样。需要进行的高级别调整如下</p><p id="d1f0" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">1)我们使用图中的节点，而不是将n元语法视为句子中的单词。具体来说，一元图将由单个节点组成，二元图将由两个节点和一条边组成，三元图将有3个节点和2条边，等等。</p><p id="6086" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">在下图中，我们会发现一个二元模型= (ask-01，ARG1，leave-11)</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es mc"><img src="../Images/1c80f9d486e1d900f484c6c0c7a5a963.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/0*ee6d5YwXWrf65iCB"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图鸣谢:<a class="ae ka" href="https://arxiv.org/pdf/1905.10726.pdf" rel="noopener ugc nofollow" target="_blank">宋和</a></figcaption></figure><p id="e1d7" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">2)我们不考虑句子长度(在<em class="kg"> BP </em>术语中),而是使用图形大小。明确地</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es md"><img src="../Images/5a9af7dbe7174676488f3a9d7273abf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*fWc9m-XkrVKolmuhjZrsEg.png"/></div></figure><p id="5197" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">3)我们从所有可能的根节点开始计算n元文法。</p><p id="5c46" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">现在我们可以将与BLEU相同的逻辑应用于语义图！我们将从预测图中获得所有的n-grams，检查它们是否出现在参考图中，并计算BLEU分数！</p><h1 id="0a5d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">参考</h1><p id="0ff4" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">塞布勒纸:【https://arxiv.org/abs/1905.10726】T4T6】布鲁纸:<a class="ae ka" href="https://www.aclweb.org/anthology/P02-1040/" rel="noopener ugc nofollow" target="_blank">https://www.aclweb.org/anthology/P02-1040/</a></p></div></div>    
</body>
</html>