<html>
<head>
<title>Eurovision Song Contest Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">欧洲歌唱大赛分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/eurovision-song-contest-analysis-6aaa26a7771?source=collection_archive---------5-----------------------#2021-05-12">https://medium.com/analytics-vidhya/eurovision-song-contest-analysis-6aaa26a7771?source=collection_archive---------5-----------------------#2021-05-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="8bb9" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="80d9" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">2018年，Netta凭借歌曲《Toy》赢得了当年在里斯本举行的欧洲电视网(Eurovision)歌曲大赛，并第三次将比赛场地带回以色列——这一次是特拉维夫。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ka"><img src="../Images/424651348cd76cbe177e2e4999c20fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWacM0LVra7P9KvfWHTT4g.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated"><em class="kq">2018年来自以色列的欧洲歌唱大赛冠军Netta Barzilai。Rolf Klatt/REX/Shutterstock的照片</em></figcaption></figure></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><p id="d1fe" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">一年后，比赛的准备工作全面展开，我决定成为以色列公共广播公司KAN的志愿者，并被选为葡萄牙代表团的主持人。我和他们一起去了耶路撒冷和死海，参加了开幕式和其他音乐活动。我在观众席上观看了两场半决赛和盛大的决赛彩排。我也有机会和我的家人一起招待代表团吃安息日晚餐。多好的体验啊！</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ld"><img src="../Images/3827deb853cbc0e8d37cbe6cb3b3bfe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1FeYQfMGk5UFj77yDyNGw.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">2019年1月24日，在特拉维夫中心街道上看到的即将举行的2019年欧洲电视网歌曲大赛的街头广告。(亚当·舒尔曼/Flash90)</figcaption></figure></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><p id="bc5c" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">荷兰歌手Duncan Laurence凭借歌曲《Arcade》获奖后，新冠肺炎疫情风靡欧洲和世界。该节目首次被取消。该节目的取消向EBU-欧洲广播联盟提出了挑战，要求其制定一个计划，包括四个场景，以便在重大危机时期举办一场节目，事实上2021年的比赛将在鹿特丹举行。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es le"><img src="../Images/cfdffcc6a27027f6f657719950f5b751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuIk6lQi3P7qrhbRzuHqdw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">鹿特丹Ahoy的欧洲歌唱大赛设计。照片:NPO/NOS/AVROTROS</figcaption></figure></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><p id="187d" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">在本文中，我们将从这个Kaggle的链接中深入了解欧洲歌唱大赛投票数据集:<a class="ae lf" href="https://www.kaggle.com/datagraver/eurovision-song-contest-scores-19752019" rel="noopener ugc nofollow" target="_blank">欧洲歌唱大赛1975年至2019年的得分数据集</a>。我们将看到参与国之间的政治和社会关系及其对投票的影响。剧透警报！陪审团投票除了明显的公众投票外，还有政治关联。</p><p id="7f1c" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">最后，我们将看到具有相似社会政治属性的国家集群，我们将绘制每个国家的关系强度图，我们将使用网络图来可视化国家之间的联系，并查看哪些国家平均得分最高和最低。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es lg"><img src="../Images/afb2e549e429c577c3233ce143946918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AM0tbVFPcvxJTGnyxPX3jg.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">荷兰歌手邓肯·劳伦斯(Duncan Laurence)在2019年最后一届欧洲电视网(Eurovision)上凯旋。GETTY IMAGES</figcaption></figure></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><h1 id="a4cc" class="ie if hh bd ig ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb bi translated">探索性数据分析(<strong class="ak"> EDA) &amp;预处理</strong></h1><p id="1241" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们的数据集包含从1975年到2019年的欧洲电视网歌曲比赛。从那一年——1975年，一种新的投票制度被引入，这种制度一直沿用至今——比赛中的每个国家给其他国家10张1、2、3、4、5、6、7、8、10和12的选票。在那之前，比赛只有一场盛大的决赛，但在2004年引入了半决赛，因为由于苏联和南斯拉夫解体成为更小的独立国家，参赛国家的数量开始增加。从2008年开始，在总决赛前有2场半决赛，和今天一样。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="9bef" class="lr if hh ln b fi ls lt l lu lv">df = pd.read_excel('eurovision_song_contest_voting_dataset.xlsx')<br/>df.head()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es lw"><img src="../Images/7cbad9181d1c2d579f52e00184b5f949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*rEWj4LOV76qvHpiPyC5NoQ.png"/></div></figure><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="981d" class="lr if hh ln b fi ls lt l lu lv">df.tail()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es lx"><img src="../Images/949bfa9875795e6cfc97825666eb978e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*BDUJphdUqRhC26e76MM1Dw.png"/></div></figure><ul class=""><li id="d072" class="ly lz hh je b jf ky jj kz jn ma jr mb jv mc jz md me mf mg bi translated"><strong class="je hi">年</strong>特征是从1975年到2019年。</li><li id="4512" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">(半决赛)决赛</strong>特征由['f '，' sf '，' sf1 '，' sf2']组成，分别对应决赛，半决赛，半决赛1和半决赛2。</li><li id="b9b2" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">评审团或电话投票</strong>功能由['J '，' T']组成。</li><li id="2614" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">点</strong>从0到12 - 0，1，2，3，4，5，6，7，8，10，12。</li><li id="436c" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">重复</strong>特征用‘x’标记具有相同<strong class="je hi"/>‘自’和‘至’国家的行。因为一个国家不能给自己加分，所以这些行是过时的，我们将删除这些行。</li></ul><p id="3537" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">在清理并用更新的国家名称替换旧名称后，我们得到了过去参与或至今仍在参与的国家的列表:</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="0263" class="lr if hh ln b fi ls lt l lu lv">['Belgium', 'Finland', 'France', 'Germany', 'Ireland', 'Israel',<br/>'Italy', 'Luxembourg', 'Malta', 'Monaco', 'Norway', 'Portugal',<br/>'Spain', 'Sweden', 'Switzerland', 'The Netherlands', 'Turkey',<br/>'United Kingdom', 'Yugoslavia', 'Austria', 'Greece', 'Denmark',<br/>'Morocco', 'Cyprus', 'Iceland', 'Bosnia &amp; Herzegovina', 'Croatia',<br/>'Slovenia', 'Estonia', 'Hungary', 'Lithuania', 'Poland', 'Romania',<br/>'Russia', 'Slovakia', 'North Macedonia', 'Latvia', 'Ukraine',<br/>'Albania', 'Serbia &amp; Montenegro', 'Andorra', 'Belarus', 'Moldova',<br/>'Bulgaria', 'Armenia', 'Georgia', 'Serbia', 'Czech Republic',<br/>'Montenegro', 'Azerbaijan', 'San Marino', 'Australia']</span></pre><h2 id="2514" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">Douze或lose (12分对0分)</h2><p id="de6d" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将会看到哪个国家得到最多的12分。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="84cb" class="lr if hh ln b fi ls lt l lu lv">df_douze = df[df[‘Points’] == 12][[‘Jury or Televoting’, ‘From country’, ‘To country’, ‘Points’]]</span><span id="7353" class="lr if hh ln b fi mz lt l lu lv">df_douze['To country'].value_counts()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es na"><img src="../Images/16f12d40a5b891d90965cd19d8eee354.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*6C5W-rzo-QOWZ_2vZ3RJxw.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">是瑞典。</figcaption></figure><p id="3bec" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">现在我们将看到哪个国家得到最多的0分。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="0cbb" class="lr if hh ln b fi ls lt l lu lv">df_zero = df[df[‘Points’] == 0][[‘Jury or Televoting’, ‘From country’, ‘To country’, ‘Points’]]</span><span id="a9e8" class="lr if hh ln b fi mz lt l lu lv">df_zero['To country'].value_counts()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nb"><img src="../Images/e1a9517045cea2e3acf8e436581117a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*Yf-4huB-GVXlZplThWKRUA.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">是西班牙。</figcaption></figure><p id="a54f" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">让我们看看哪些国家给了最多的12分</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="5a6e" class="lr if hh ln b fi ls lt l lu lv">df_douze_points_countries_relationships = df_douze.groupby(['To country', 'From country']).size().sort_values(ascending=False).reset_index(name='counts')</span><span id="8dfa" class="lr if hh ln b fi mz lt l lu lv">df_douze_points_countries_relationships.drop_duplicates(subset=['To country'], keep='first', inplace=True)</span><span id="533b" class="lr if hh ln b fi mz lt l lu lv">df_douze_points_countries_relationships</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nc"><img src="../Images/732930d4d3a22c0495d8e09438bd1f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*htzIr_xmgsCyI8bJKX8Heg.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">塞浦路斯34次给希腊12分！</figcaption></figure><p id="0dab" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们通过给对方打12分，开始看到国与国之间的社会政治关系。</p><p id="f74a" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">让我们看看哪些国家给了最多的0分</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="aa76" class="lr if hh ln b fi ls lt l lu lv">df_zero_points_countries_relationships = df_zero.groupby(['To country', 'From country']).size().sort_values(ascending=False).reset_index(name='counts')</span><span id="6f37" class="lr if hh ln b fi mz lt l lu lv">df_zero_points_countries_relationships.drop_duplicates(subset=['To country'], keep='first', inplace=True)</span><span id="e2fd" class="lr if hh ln b fi mz lt l lu lv">df_zero_points_countries_relationships</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nd"><img src="../Images/baa102ba1d09b0cd81eb690c163e22c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*bRjMfVZq_nqCbdLTziXk-w.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">瑞典39次给西班牙0分！</figcaption></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ne"><img src="../Images/179e643c0e80badff4244dfdfe37b02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f_ZxstvD1gjTGZyN2cwMaA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">ESC2019总决赛(YouTube上的欧洲歌唱大赛频道)</figcaption></figure><h2 id="9967" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">每个国家的平均分数</h2><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="88b5" class="lr if hh ln b fi ls lt l lu lv">df_average_points_per_country = df.groupby('To country').agg({'Points': ['mean']}).sort_values(('Points', 'mean'), ascending = False)</span><span id="02ac" class="lr if hh ln b fi mz lt l lu lv">labels = df_average_points_per_country[('Points', 'mean')].index<br/>avg_points = list(df_average_points_per_country[('Points', 'mean')])</span><span id="b8c8" class="lr if hh ln b fi mz lt l lu lv">fig, ax = plt.subplots(figsize=(12,18))<br/>rects = ax.barh(labels, avg_points)</span><span id="ed0c" class="lr if hh ln b fi mz lt l lu lv">ax.invert_yaxis()</span><span id="1763" class="lr if hh ln b fi mz lt l lu lv">ax.set_ylabel('Countries')<br/>ax.set_title('Eurovision (1975-2019): Average points')<br/>ax.xaxis.set_tick_params(pad = 5)<br/>ax.yaxis.set_tick_params(pad = 10)</span><span id="d0a6" class="lr if hh ln b fi mz lt l lu lv">for i in ax.patches:<br/>    plt.text(i.get_width()+0.2, i.get_y()+0.5,<br/>             str(round((i.get_width()), 2)),<br/>             fontsize = 10, fontweight ='bold',<br/>             color ='grey')</span><span id="49f5" class="lr if hh ln b fi mz lt l lu lv">fig.tight_layout()</span><span id="d1af" class="lr if hh ln b fi mz lt l lu lv">plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nf"><img src="../Images/588700dc4473419f4158e85e61e89e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kip51WCcQFOqMhX_GmZzVA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">塞尔维亚和黑山国家联盟参加了两次欧洲歌唱大赛:2004年<a class="ae lf" href="https://en.wikipedia.org/wiki/Eurovision_Song_Contest_2004" rel="noopener ugc nofollow" target="_blank">和2005年</a>。他们的首次亮相非常成功，由eljko joksimovi演唱的歌曲“<a class="ae lf" href="https://en.wikipedia.org/wiki/Lane_moje" rel="noopener ugc nofollow" target="_blank"> Lane moje </a>获得第二名。第二年，他们排名第七。</figcaption></figure><p id="41f2" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">让我们画出瑞典每年的平均分数:</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="cee1" class="lr if hh ln b fi ls lt l lu lv">df_average_points_per_country_by_year = df.groupby(['To country', 'Year']).agg({'Points': ['mean']})</span><span id="102d" class="lr if hh ln b fi mz lt l lu lv">country = 'Sweden'<br/>x = df_average_points_per_country_by_year.loc[[country]].index.get_level_values('Year')<br/>y = df_average_points_per_country_by_year.loc[[country]][('Points', 'mean')]<br/>z = np.poly1d(np.polyfit(x, y, 1))(x)</span><span id="f109" class="lr if hh ln b fi mz lt l lu lv">plt.figure(figsize=(16,10))<br/>plt.plot(x, y, color='green', linestyle='dashed', linewidth = 3, marker='o', markerfacecolor='blue', markersize=12)<br/>plt.plot(x, z,"r--", linewidth = 3)<br/>for year, average_points in zip(x, y): <br/>    plt.text(year, average_points+0.2, str(round(average_points, 2)))<br/>plt.xlabel('Years')<br/>plt.ylabel('Average Points')<br/>plt.title('Average points by year for ' + country)<br/>plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ng"><img src="../Images/c284219856ec40daf8ac9fcda1ef5d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8982td_aErJaLuHRWLNxmA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">自1975年以来，瑞典每年参赛的平均分数。</figcaption></figure><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="6894" class="lr if hh ln b fi ls lt l lu lv">print('Maximum average points for', country, 'is', round(y.max(), 2), 'in', y.idxmax()[1])<br/>print('Minimum average points for', country, 'is', round(y.min(), 2), 'in', y.idxmin()[1])<br/>print('The gradient is',round((z[-1] - z[0]) / (max(x) - min(x)), 3))</span><span id="09a2" class="lr if hh ln b fi mz lt l lu lv">Maximum average points for Sweden is 9.86 in 2015<br/>Minimum average points for Sweden is 0.12 in 1977<br/>The gradient is 0.044</span></pre><h2 id="b267" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">等级</h2><p id="ae42" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">排名是基于每年每一版(sf、sf1、sf2和f)中每个国家的得分。排名可以是基于共享点数的与另外1个或多个国家的共享排名(平均排名)。例如，在1991年的决赛中，法国和瑞典同积146分，所以他们的排名是1.5 (1和2)。根据当时的规则，瑞典被宣布获胜。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="c5a8" class="lr if hh ln b fi ls lt l lu lv">df_rank = df.groupby(['Edition', 'To country']).agg({'Points': ['sum']})<br/>df_rank.columns = ['Total Points']</span><span id="2c42" class="lr if hh ln b fi mz lt l lu lv">df_rank['Rank'] = df_rank.groupby(level=0).rank(ascending=False)<br/>df_rank = df_rank.sort_values(['Edition','Rank'], ascending=[True, True])</span><span id="b7ca" class="lr if hh ln b fi mz lt l lu lv">df_rank.loc[['2019f']][:5]</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nh"><img src="../Images/96a058a49a49f5fbd529aa4403b0d22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*itXYpD3SF6mnOTolzhCLXw.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">2019年决赛的前5名</figcaption></figure><h2 id="5770" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">赢家和输家</h2><p id="b97e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">让我们记住，1991年法国和瑞典得分相同，但瑞典赢了:</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="400f" class="lr if hh ln b fi ls lt l lu lv">df_rank.loc[('1991f', 'Sweden'), 'Rank'] = 1.0</span></pre><p id="50c9" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">这是每个版本最好和最差的地方:</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="dd33" class="lr if hh ln b fi ls lt l lu lv">n_winners_and_losers = 1<br/>winners = df_rank.groupby(level=0).apply(lambda x: x.iloc[:n_winners_and_losers])<br/>losers = df_rank.groupby(level=0).apply(lambda x: x.iloc[-n_winners_and_losers:])</span><span id="a644" class="lr if hh ln b fi mz lt l lu lv">df_winners_and_losers = pd.DataFrame({'Edition': winners.index.get_level_values(0)})<br/>df_winners_and_losers.set_index('Edition', inplace=True)</span><span id="e470" class="lr if hh ln b fi mz lt l lu lv">df_winners_and_losers['Winning country'] = winners.index.get_level_values('To country')<br/>df_winners_and_losers['Winning rank'] = list(winners['Rank'])<br/>df_winners_and_losers['Winning points'] = list(winners['Total Points'])<br/>df_winners_and_losers['Last place country'] = losers.index.get_level_values('To country')<br/>df_winners_and_losers['Last place rank'] = list(losers['Rank'])<br/>df_winners_and_losers['Last place points'] = list(losers['Total Points'])<br/>df_winners_and_losers</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ni"><img src="../Images/271a8d8e3597edb8d276daa59d36f61d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2ibl9JcLk39wpYKtorKug.png"/></div></div></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es le"><img src="../Images/e9e658a2be34a97cfbab95f995d5bfad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QvzlvSG085d70-cFrmW_Q.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">来自葡萄牙的Salvador Sobral凭借优美的歌曲Amar Pelos Dois赢得了2017年欧洲电视网歌曲大赛的冠军。照片:安德烈斯推杆</figcaption></figure><h2 id="f381" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">每个国家在决赛中的平均排名、最佳和最差名次</h2><p id="bf90" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将只关注决赛，因为半决赛中的排名在相互比较和与决赛比较时可能有所不同。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="9888" class="lr if hh ln b fi ls lt l lu lv">df_final_rank = df_rank[~df_rank.index.get_level_values('Edition').str.contains('sf')]</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nj"><img src="../Images/861ad29de6d31ae898860d4e64a56fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Q85G_bRmcunXlnZW-yYig.png"/></div></div></figure><p id="98b0" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">让我们来看看瑞典的年度排名:</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="42b8" class="lr if hh ln b fi ls lt l lu lv">country = 'Sweden'<br/>country_rank_and_points_in_finals = df_final_rank[df_final_rank.index.get_level_values('To country') == country].reset_index()</span><span id="6b7f" class="lr if hh ln b fi mz lt l lu lv">x = [int(year[:4]) for year in country_rank_and_points_in_finals['Edition']]<br/>y = country_rank_and_points_in_finals['Rank']<br/>z = np.poly1d(np.polyfit(x, y, 1))(x)</span><span id="01a6" class="lr if hh ln b fi mz lt l lu lv">plt.figure(figsize=(16,10))<br/>plt.plot(x, y, color='green', linestyle='dashed', linewidth = 3, marker='o', markerfacecolor='blue', markersize=12)<br/>plt.plot(x, z,"r--", linewidth = 3)<br/>for year, average_points in zip(x, y): <br/>    plt.text(year+0.3, average_points-0.3, str(round(average_points, 2)))<br/>plt.xlabel('Years')<br/>plt.ylabel('Rank (place)')<br/>plt.gca().invert_yaxis()<br/>plt.title('Rank (place) by year for ' + country)<br/>plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ng"><img src="../Images/d005187546ae123f0cd8e18b6a7fbf15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YgZ1ow1PDks1TumOu0hY7g.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">瑞典自1975年以来每年都有参赛。</figcaption></figure><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="98a3" class="lr if hh ln b fi ls lt l lu lv">print('Best place for', country, 'is', df_final_rank_for_country.loc[country]['Top place'], 'in', df_final_rank_for_country.loc[country]['Top place years'])<br/>print('Worst place for', country, 'is', df_final_rank_for_country.loc[country]['Bottom place'], 'in', df_final_rank_for_country.loc[country]['Bottom place years'])<br/>print('The gradient is',round(-(z[-1] - z[0]) / (max(x) - min(x)), 3))</span><span id="df20" class="lr if hh ln b fi mz lt l lu lv">Best place for Sweden is 1.0 in 1984, 1991, 1999, 2012, 2015<br/>Worst place for Sweden is 22.0 in 1992<br/>The gradient is 0.078</span></pre><h2 id="0920" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">半决赛和决赛中每个国家的平均得分(2008-2019)</h2><p id="8d49" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">从现在开始，我们将只看近几年的比赛，从2008年到2019年，采用我们今天所知道的半决赛和决赛的形式。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="3d7e" class="lr if hh ln b fi ls lt l lu lv">df_with_semi_finals = df[df.Year &gt;= df[df[‘(semi-) final’] == ‘sf1’][‘Year’].unique()[0]]</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nk"><img src="../Images/4719f4775f61f4522cad6381c809ff06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*O3soaY1Z2TuM24grOu2zpQ.gif"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">中暑项目&amp; Olia Tira-Run Away(摩尔多瓦)2010年欧洲电视网歌曲大赛现场(YouTube上的欧洲电视网歌曲大赛频道)。</figcaption></figure><h2 id="3d6d" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">半决赛中国家的平均得分</h2><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="c989" class="lr if hh ln b fi ls lt l lu lv">df_average_points_per_country_in_sf = df_with_semi_finals.loc[(df_with_semi_finals['(semi-) final'] == 'sf1') | (df_with_semi_finals['(semi-) final'] == 'sf2')].groupby('To country')['Points'].mean().sort_values(ascending=False).reset_index(name='counts')</span><span id="954c" class="lr if hh ln b fi mz lt l lu lv">labels = df_average_points_per_country_in_sf['To country']<br/>avg_points = list(df_average_points_per_country_in_sf['counts'])</span><span id="add1" class="lr if hh ln b fi mz lt l lu lv">fig, ax = plt.subplots(figsize=(12,18))<br/>rects = ax.barh(labels, avg_points)</span><span id="d14a" class="lr if hh ln b fi mz lt l lu lv">ax.invert_yaxis()</span><span id="023e" class="lr if hh ln b fi mz lt l lu lv">ax.set_ylabel('Countries')<br/>ax.set_title('Eurovision (2008-2019): Average points for country at the semi-finals')<br/>ax.xaxis.set_tick_params(pad = 5)<br/>ax.yaxis.set_tick_params(pad = 10)</span><span id="7b9a" class="lr if hh ln b fi mz lt l lu lv">for i in ax.patches:<br/>    plt.text(i.get_width()+0.2, i.get_y()+0.5,<br/>             str(round((i.get_width()), 2)),<br/>             fontsize = 10, fontweight ='bold',<br/>             color ='grey')</span><span id="c33b" class="lr if hh ln b fi mz lt l lu lv">fig.tight_layout()</span><span id="680c" class="lr if hh ln b fi mz lt l lu lv">plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nf"><img src="../Images/1646fdc859bebfc6e056b8a58521398e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8hG2KrYQnmSWk7bnW0reQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">近年来，瑞典队在半决赛中的平均得分一直领先</figcaption></figure><p id="0907" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们将把半决赛的平均分分配给评审团和电话投票:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nl"><img src="../Images/5e19cd1fd490e72ee637a15f17cbee6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GcHFYvVX24sG0brTrWITwA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated"><strong class="bd ig">评审团</strong>喜欢<strong class="bd ig">澳大利亚和瑞典</strong>，但是<strong class="bd ig">公众</strong>在半决赛中投票给<strong class="bd ig">乌克兰和保加利亚</strong>。陪审团和公众投票的最大差异在保加利亚和葡萄牙。</figcaption></figure><h2 id="d979" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">国家在决赛中的平均得分</h2><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="d260" class="lr if hh ln b fi ls lt l lu lv">df_average_points_per_country_in_final = df_with_semi_finals[df_with_semi_finals['(semi-) final'] == 'f'].groupby('To country')['Points'].mean().sort_values(ascending=False).reset_index(name='counts')</span><span id="0f62" class="lr if hh ln b fi mz lt l lu lv">labels = df_average_points_per_country_in_final['To country']<br/>avg_points = list(df_average_points_per_country_in_final['counts'])</span><span id="6e91" class="lr if hh ln b fi mz lt l lu lv">fig, ax = plt.subplots(figsize=(12,18))<br/>rects = ax.barh(labels, avg_points)</span><span id="76e2" class="lr if hh ln b fi mz lt l lu lv">ax.invert_yaxis()</span><span id="2dab" class="lr if hh ln b fi mz lt l lu lv">ax.set_ylabel('Countries')<br/>ax.set_title('Eurovision (2008-2019): Average points for country at the final')<br/>ax.xaxis.set_tick_params(pad = 5)<br/>ax.yaxis.set_tick_params(pad = 10)</span><span id="d20f" class="lr if hh ln b fi mz lt l lu lv">for i in ax.patches:<br/>    plt.text(i.get_width()+0.2, i.get_y()+0.5,<br/>             str(round((i.get_width()), 2)),<br/>             fontsize = 10, fontweight ='bold',<br/>             color ='grey')</span><span id="5430" class="lr if hh ln b fi mz lt l lu lv">fig.tight_layout()</span><span id="362c" class="lr if hh ln b fi mz lt l lu lv">plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nf"><img src="../Images/a5a231b34eab88c0c0af6b856032003a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cNK5BvpfAdViIgNrYEWtvw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">俄罗斯在近几年的总决赛中平均得分一直领先</figcaption></figure><p id="007e" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们将把决赛的平均分分配给评审团和电话投票:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nl"><img src="../Images/37fa69f60e570c5b00d1cced38e74300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAWqXCbhnzARDg2eTka7sQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated"><strong class="bd ig">评审团</strong>喜欢<strong class="bd ig">瑞典和澳大利亚</strong>，但是<strong class="bd ig">公众</strong>在决赛中投票给<strong class="bd ig">俄罗斯和罗马尼亚</strong>。陪审团和公众投票的最大差异在T21和俄国。</figcaption></figure><h2 id="6092" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">一个国家和所有其他参与者之间的平均分数</h2><p id="2e10" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将查看亚美尼亚的关系强度，在本例中，它是亚美尼亚的平均分和亚美尼亚给每个国家的平均分之间的平均值。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="6e21" class="lr if hh ln b fi ls lt l lu lv">country = 'Armenia'<br/>df_country_relationships = country_relationship_strength(country)<br/>df_country_relationships[['country', 'Average Points']]</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nm"><img src="../Images/25d2946583b1071c9c80f86339899fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*GJrLa2L0GCba1I2TQoAd5A.png"/></div></figure><p id="8d30" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">这开始变得有趣——我们可以看到国家之间的社会政治投票。有时可能是不对称关系，正如我们在这个图中看到的:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nn"><img src="../Images/9f60fd89d9775d736138b0cecbeb136d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_RG4hW_tEOCdES8Ur28rw.png"/></div></div></figure><p id="660d" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">例如，我们可以看到，与瑞士给亚美尼亚的平均分相比，瑞士给亚美尼亚的平均分更高。</p></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><h1 id="982c" class="ie if hh bd ig ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb bi translated">分层聚类</h1><p id="150f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将使用聚类方法来查看不同国家集团的投票情况。从2008年开始，我们将继续使用与半决赛相同的投票数据，就像我们以前使用的一样。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="737c" class="lr if hh ln b fi ls lt l lu lv">from scipy.cluster.hierarchy import linkage, dendrogram<br/>from scipy.cluster.vq import whiten</span><span id="aa73" class="lr if hh ln b fi mz lt l lu lv">df_average_points_to = df_with_semi_finals.groupby(['To country', 'From country']).agg({'Points': ['mean']}).sort_values(('Points', 'mean'), ascending = False)</span><span id="e604" class="lr if hh ln b fi mz lt l lu lv">dist = df_average_points_to.pivot(index='From country', columns='To country', values='Points')<br/>dist.fillna(12, inplace=True)</span><span id="41c9" class="lr if hh ln b fi mz lt l lu lv">df_scaled = whiten(dist.to_numpy())<br/>mergings = linkage(df_scaled, method='ward')<br/>plt.figure(figsize=(20,12))<br/>dn = dendrogram(mergings, labels=np.array(dist.index), color_threshold=0.3*max(mergings[:,2]), leaf_rotation=90, leaf_font_size=14)<br/><br/>plt.show()</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es no"><img src="../Images/e72eeb209f831da9cbfa059d1d27a204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dOK2NM4970335i7k1t12bA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">最大0.3 *的分层聚类(合并[:，2])</figcaption></figure><p id="5191" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们可以看到“最好的朋友”的基本集团:</p><ul class=""><li id="262a" class="ly lz hh je b jf ky jj kz jn ma jr mb jv mc jz md me mf mg bi translated">北欧国家:<strong class="je hi">芬兰、冰岛、挪威、瑞典和丹麦</strong>。</li><li id="afac" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">波罗的海国家:<strong class="je hi">拉托维亚、立陶宛和爱沙尼亚</strong>。</li><li id="2dfa" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">不列颠群岛:<strong class="je hi">英国和爱尔兰</strong>。</li><li id="f022" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">伊比利亚半岛:<strong class="je hi">西班牙和葡萄牙</strong>。</li><li id="93a9" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">中东欧:<strong class="je hi">匈牙利和波兰</strong>。</li><li id="dbb0" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">中欧:<strong class="je hi">奥地利和瑞士。</strong></li><li id="0199" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">比荷卢(不含卢森堡):<strong class="je hi">比利时和荷兰。</strong></li><li id="539d" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">巴尔干锅#1: <strong class="je hi">黑山和北马其顿。</strong></li><li id="4eb8" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">巴尔干锅#2: <strong class="je hi">塞尔维亚，克罗地亚，斯洛文尼亚，波斯尼亚&amp;黑塞哥维纳。</strong></li><li id="2967" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">东欧和西亚:<strong class="je hi">乌克兰、白俄罗斯、格鲁吉亚和俄罗斯。</strong></li><li id="da83" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">东南欧:<strong class="je hi">罗马尼亚和摩尔多瓦。</strong></li><li id="443d" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">南欧锅#1: <strong class="je hi">阿尔巴尼亚和圣马力诺。</strong></li><li id="c7dd" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">南欧锅#2: <strong class="je hi">意大利和马耳他。</strong></li><li id="be3d" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">东地中海:<strong class="je hi">希腊和塞浦路斯。</strong></li><li id="af9b" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">离群国家(不属于任何低等级集团):<strong class="je hi">澳大利亚、安道尔、斯洛伐克、法国、以色列、捷克共和国、德国、阿塞拜疆、土耳其、亚美尼亚和保加利亚。</strong></li></ul><p id="aa8f" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">现在，我们将通过提高阈值来继续更高层次的块:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es no"><img src="../Images/2fc52d4be23c4c0cf770bb78b83828f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5HOW-pmUDVoL9qPtGj7RDw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">最大0.5 *的分层聚类(合并[:，2])</figcaption></figure><p id="b6c9" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们有6个区块:</p><ul class=""><li id="85da" class="ly lz hh je b jf ky jj kz jn ma jr mb jv mc jz md me mf mg bi translated">北欧集团和澳大利亚:<strong class="je hi">芬兰、冰岛、挪威、瑞典、丹麦和澳大利亚。</strong></li><li id="39a1" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">西北和东北集团:<strong class="je hi">拉脱维亚、立陶宛、爱沙尼亚、英国和爱尔兰。</strong></li><li id="0ebc" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">中西部和以色列集团:<strong class="je hi">西班牙、葡萄牙、匈牙利、波兰、捷克、奥地利、瑞士、德国、比利时、荷兰、法国和以色列。</strong></li><li id="1bb4" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">巴尔干集团:<strong class="je hi">黑山、北马其顿、塞尔维亚、克罗地亚、斯洛文尼亚、波斯尼亚&amp;黑塞哥维那。</strong></li><li id="cb9f" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">东方集团:阿塞拜疆、俄罗斯、乌克兰、白俄罗斯和格鲁吉亚。</li><li id="9043" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">东南集团:土耳其、罗马尼亚、摩尔多瓦、阿尔巴尼亚、圣马力诺、意大利、马耳他、希腊、塞浦路斯、保加利亚和亚美尼亚。</li><li id="8977" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">安道尔和斯洛伐克</strong>，是离群国家，可以与中西部和以色列集团联系在一起。</li></ul><p id="aab0" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">一些见解:</p><ul class=""><li id="bb55" class="ly lz hh je b jf ky jj kz jn ma jr mb jv mc jz md me mf mg bi translated"><strong class="je hi">澳洲</strong>是一个类似北欧的国家。</li><li id="3b39" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">以色列</strong>与法国相连，与欧盟的其他国家相连，这使得以色列成为一个中欧国家。</li><li id="8a92" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">巴尔干集团非常以自我为中心，与其他集团隔绝。</li><li id="f0be" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">安道尔</strong>与<strong class="je hi">西班牙</strong>联系紧密(他们总是给对方12分)，但因为场均分低，出场次数少，国家离集团太远。</li><li id="d2ab" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated"><strong class="je hi">东欧</strong>和<strong class="je hi">西欧</strong>之间有明显的差距，那些不是来自欧洲，但有着相同心态的国家，都属于西方或东方的同一个集团。</li></ul><h2 id="d54d" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">只有陪审团投票</h2><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es no"><img src="../Images/ef50c089f6029d97c8033e9ac899b8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jA-g0xem4KFY-OdvChDHjw.png"/></div></div></figure><p id="9754" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">类似于最初的聚类，但有一些变化，澳大利亚现在是中欧类型的国家，而以色列是东方类型的国家。</p><h2 id="57ba" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">只有电话投票</h2><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es np"><img src="../Images/00592e827c8c109d8759659887b5628d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KW-CNuAhmmrNC8es_E6GpA.png"/></div></div></figure><p id="413b" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">较小的以自我为中心的孤立集团，具有相同的文化、语言、人民、地域、食物等共同属性。</p><h1 id="f977" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">绘制平均点</h1><p id="68d6" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将绘制“关系强度”，这基本上是一个国家的平均投票数(往返)。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="6221" class="lr if hh ln b fi ls lt l lu lv">import plotly.graph_objects as go<br/>import plotly.express as px</span><span id="f0d5" class="lr if hh ln b fi mz lt l lu lv">def plot_map(country):<br/>    df = country_relationship_strength(country)</span><span id="771a" class="lr if hh ln b fi mz lt l lu lv">fig = go.Figure(data=[go.Choropleth(<br/>        locations=[codes_dict[country]],<br/>        z = [0],<br/>        text = [country],<br/>        colorscale='Reds',<br/>        reversescale=True,<br/>        ), go.Choropleth(<br/>        locations = df['code'],<br/>        z = df['Average Points'],<br/>        text = df['country'],<br/>        colorscale = 'Blues',<br/>        autocolorscale=False,<br/>        reversescale=False,<br/>        marker_line_color='darkgray',<br/>        marker_line_width=0.5,<br/>        colorbar_title = 'Average points',<br/>    )])</span><span id="f298" class="lr if hh ln b fi mz lt l lu lv">fig.update_layout(<br/>        title_text='All average votes/scores (to and from) given during the (semi) finals from jury and televoting for &lt;b&gt;' + country,<br/>        geo=dict(<br/>            showframe=False,<br/>            showcoastlines=False,<br/>            projection_type='equirectangular'<br/>        ),<br/>        annotations = [dict(<br/>            x=0.55,<br/>            y=0.1,<br/>            xref='paper',<br/>            yref='paper',<br/>            text='source: &lt;a href="<a class="ae lf" href="https://www.kaggle.com/datagraver/eurovision-song-contest-scores-19752019" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/datagraver/eurovision-song-contest-scores-19752019</a>"&gt;\<br/>                Eurovision Song Contest scores 2008-2019&lt;/a&gt;',<br/>            showarrow = False<br/>        )]<br/>    )<br/>    <br/>    return fig</span></pre><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nq"><img src="../Images/ab5164d3f920a4efb73ab170f8211184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/1*zKPhNef0Oz5i48stwBMblQ.gif"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">每个国家/地区在半决赛比赛期间由评审团和电话投票给出的平均分(往返)图</figcaption></figure><p id="5c50" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">国家之间的平均分越高，颜色就越深。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nr"><img src="../Images/773cccc8ec536bcaa8a7de88274c28f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GbVQHlSr6qCkie9t5k_CJg.gif"/></div></div></figure><h1 id="451b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">网络(图形)</h1><p id="23ea" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">NetworkX是一个Python包，用于创建、操作和研究复杂网络的结构、动态和功能，如欧洲电视网歌曲比赛投票。</p><pre class="kb kc kd ke fd lm ln lo lp aw lq bi"><span id="6bd9" class="lr if hh ln b fi ls lt l lu lv">import networkx as nx</span></pre><h2 id="c096" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">使用地理位置定位节点。</h2><p id="cb27" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">节点(或国家)是基于经度和纬度定位的。</p><ul class=""><li id="fe33" class="ly lz hh je b jf ky jj kz jn ma jr mb jv mc jz md me mf mg bi translated">国旗越大，平均得分越多。</li><li id="f1e1" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">国家之间的界限越宽，国家之间的联系就越强(平均分越高)。</li><li id="7c8f" class="ly lz hh je b jf mh jj mi jn mj jr mk jv ml jz md me mf mg bi translated">国与国之间的界线越坚实，国与国之间的联系就越强(平均分越高)。</li></ul><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ns"><img src="../Images/3eda4c26d296257251551eeadff8d237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iWVkoyEFQtTOiLnJL9BKhA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">基于地理位置的图表，结合了陪审团投票和电话投票</figcaption></figure><h2 id="11c0" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">陪审团投票和电话投票</h2><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ns"><img src="../Images/a440bfc80b50d961c237750f1ef85c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*u5rpGyX0pEu6Ru0xjMiQ7g.gif"/></div></div></figure><p id="9ed5" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">陪审团倾向于瑞典、澳大利亚和阿塞拜疆，而公众倾向于俄罗斯、葡萄牙和摩尔多瓦。</p><h2 id="fdfd" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">使用Fruchterman-Reingold力定向算法定位节点。</h2><p id="688b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">力定向图形绘制算法是一类以美观的方式绘制图形的算法。它们的目的是在二维或三维空间中定位图的节点，使得所有的边都或多或少地等长，并且有尽可能少的交叉边，通过基于它们的相对位置在边集合和节点集合之间分配力，然后使用这些力来模拟边和节点的运动或者最小化它们的能量。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ns"><img src="../Images/a7d1000339d84cb76bef2e6f79e43bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pr8FL_UTMzDEK3_bzxWcHw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">陪审团投票和电话投票相结合的力有向图</figcaption></figure></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><h1 id="7b59" class="ie if hh bd ig ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb bi translated">结论</h1><p id="bc3e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们从0分12分票的EDA开始。我们看到<strong class="je hi">瑞典得到最多的12分</strong>(杜泽)，而<strong class="je hi">西班牙得到最多的0分</strong>。</p><p id="c723" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们继续计算每个国家的平均分数。黑山共和国的平均分最高，为6.14分，但他们作为一个国家参赛才两年。<strong class="je hi">平均第二高的国家是俄罗斯</strong>，4.6。<strong class="je hi">平均最低的是摩洛哥【0.39，至今仍在参赛的<strong class="je hi">平均最低的国家是圣马力诺</strong>1.29。</strong></p><p id="8fbd" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们绘制了瑞典(可以是任何其他国家)每年的平均分数和排名。<strong class="je hi">总的来说，瑞典的平均水平和排名都在不断提高</strong>。</p><p id="7ec6" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们看到了每一版的赢家(第一名)和输家(最后一名)。也是每个国家在决赛中最好和最差的地方。</p><p id="5c5c" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们从2018年的2个半决赛版本继续分析大赛。我们看到<strong class="je hi">瑞典在半决赛中胜出</strong>俄罗斯在决赛中胜出。</p><p id="0c38" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated"><strong class="je hi">评审团</strong>更倾向于投票给<strong class="je hi">澳洲和瑞典</strong>，而<strong class="je hi">大众</strong>更倾向于投票给半决赛<strong class="je hi">乌克兰和保加利亚</strong>，决赛<strong class="je hi">俄罗斯和罗马尼亚</strong>。</p><p id="d053" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated"><strong class="je hi">关系强度</strong>是指两个国家之间的<strong class="je hi">平均票数，这也暴露了两者之间的<strong class="je hi">社会政治联系</strong>。在我们的例子中，亚美尼亚与俄罗斯、格鲁吉亚和希腊有着牢固的关系，它们分享着同样的东方基督教文化。由于冲突等原因，与阿塞拜疆的关系很弱。</strong></p><p id="f496" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">通过使用<strong class="je hi">等级聚类</strong>，我们绘制了国家之间的<strong class="je hi">等级图</strong>，得到了不同等级的<strong class="je hi">投票群体</strong>总投票、评审团投票和公众投票。由文化相似的国家组成的集团。</p><p id="407a" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们绘制了每个国家的T42关系强度图。我们可以清楚地看到每个国家的地区投票。</p><p id="5faa" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">我们用Python包<strong class="je hi"> NetworkX </strong>绘制了由节点(国家)和边(选票)组成的<strong class="je hi">复杂投票网络</strong>。我们使用了两种方法:第一种是通过每个国家的<strong class="je hi">地理位置</strong>，第二种是通过Fruchterman-Reingold <strong class="je hi">力定向算法</strong>。</p><h2 id="63ed" class="lr if hh bd ig mm mn mo ik mp mq mr io jn ms mt is jr mu mv iw jv mw mx ja my bi translated">遗言…</h2><p id="f4d1" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">尽管投票可能看起来是政治性或社会性的，获胜的歌曲被选中是因为它是最好的歌曲。获奖歌曲的选择可能对自己来说很奇怪，但它是基于陪审团和公众的不同意见的总和。</p><p id="f246" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">这就是为什么很难预测哪首歌会胜出的原因之一，因为它不仅基于政治，也基于统计数据，还基于对这首歌的热爱以及每年歌词、旋律、舞蹈、时尚、烟火、舞台、效果等的质量。它还依赖于同一节目中其他参与者的歌曲。</p><p id="e3ed" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">虽然欧洲电视网赔率网站试图预测获胜歌曲和其他歌曲的顺序，但基于其他特征，如点赞数、YouTube浏览量，可能会有一首“百搭”歌曲在最后一秒钟占据第一名，让所有人感到惊讶。</p><p id="ce7d" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">这就是为什么欧洲歌唱大赛看起来如此有趣。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nt"><img src="../Images/0e79467034bbd2207625e8a5eb61a35f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voIglzIc--sQRWy6LJlgrA.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">芬兰的怪兽摇滚乐队Lordi庆祝他们在2006年欧洲电视网歌曲大赛中的胜利</figcaption></figure><p id="8b19" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated">你可以在我的<a class="ae lf" href="http://www.github.com/EranPer/Eurovision-Song-Contest-Analysis" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上的笔记本里看到我的完整分析。</p></div><div class="ab cl kr ks go kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ha hb hc hd he"><h1 id="1082" class="ie if hh bd ig ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb bi translated">参考</h1><p id="607b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><a class="ae lf" rel="noopener" href="/swlh/hierarchical-clustering-of-countries-based-on-eurovision-votes-2d02ae40b063">基于欧洲电视网投票的国家等级聚类</a></p><p id="4876" class="pw-post-body-paragraph jc jd hh je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz ha bi translated"><a class="ae lf" href="https://towardsdatascience.com/social-network-analysis-from-theory-to-applications-with-python-d12e9a34c2c7" rel="noopener" target="_blank">社交网络分析:从图论到Python应用</a></p></div></div>    
</body>
</html>