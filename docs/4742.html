<html>
<head>
<title>Exploring exokernels — A chance to prove yourself</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索外核——证明自己的机会</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-exokernels-a-chance-to-prove-yourself-e2f24501b229?source=collection_archive---------1-----------------------#2022-01-30">https://medium.com/analytics-vidhya/exploring-exokernels-a-chance-to-prove-yourself-e2f24501b229?source=collection_archive---------1-----------------------#2022-01-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3e82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">奥拉朋友们！我带着一个关于外核的有趣故事回来了(这次很快)。你有没有为你的操作系统烦恼过？咄，比你想的更经常发生，对不对？你总是说，“我两个月大的侄女能比你更好地安排我的IO密集型脚本，Windows”。嗯，外核正是一个让你这样做的机会！</p><h2 id="8160" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">对传统操作系统感到厌烦的主要原因</h2><p id="1884" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated"><strong class="ig hi">应用程序感觉不够特别— </strong>在这个世界上，我们与之互动的一切——从汽车到我们在Youtube上看到的广告——都是根据我们的好恶定制的，为什么应用程序不应该得到同样的待遇呢？为什么所有的应用程序都有相同的无聊的操作系统界面，不管它们试图完成什么？如果允许应用程序决定缓存哪些变量，或者垃圾收集器应该取走哪些内存位置，那么应用程序可能会做得更好。</p><p id="f08a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">应用程序知道什么对自己最有利— </strong>应用程序更适合做出资源管理决策(而不是操作系统)，因为毕竟它们是利用那些资源的人。因此，虚拟内存、IPC等传统操作系统抽象应该完全在应用程序级别实现。</p><p id="5bba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">用库操作系统</strong>将相似的应用程序分组——传统操作系统的USPs之一是抽象出应用程序使用的通用功能。我们可以通过让思想相似的应用程序与他们熟悉的库操作系统组合在一起，用外核实现同样的目标。这提供了最少内核交叉的额外优势，因为大多数操作系统现在运行在应用程序的地址空间中。很整洁，是吧？</p><h2 id="ad2a" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">如果应用程序控制着资源，那么外核到底在做什么呢？</h2><figure class="kd ke kf kg fd kh er es paragraph-image"><div class="er es kc"><img src="../Images/bc8a1d7ee851d6a16520bee0f59a0d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9Bo3Ck3F8x3AB7ui6F-nAQ.jpeg"/></div><figcaption class="kk kl et er es km kn bd b be z dx translated">外核冷却</figcaption></figure><p id="8b54" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最终，我们仍然需要有人来解决不同库操作系统应用程序之间对各种硬件资源的争用。我们不希望它们彼此争斗，覆盖彼此的数据，或者彼此死锁。我们需要一个中介— <strong class="ig hi">外核</strong>。</p><p id="c4f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们仔细看看外核是如何做到这一点的。</p><p id="3c26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">复用物理资源</strong> —外核使用三个原则保护物理资源，如内存和设备。</p><ul class=""><li id="409c" class="ko kp hh ig b ih ii il im ip kq it kr ix ks jb kt ku kv kw bi translated"><strong class="ig hi">安全绑定</strong> —多路复用物理资源的一个明显要求是保护分配给特定库操作系统的资源免受其他应用程序的非法访问。外核选择在<em class="kx">访问时间</em>期间借助检查来实现这一点。特别是，在<em class="kx">绑定时间</em>期间不进行任何检查。</li></ul><p id="f2b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们仔细看看如何使用安全绑定来管理内存。</p><p id="8ed9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—因此，首先，外核<strong class="ig hi">向库操作系统公开</strong>所有物理资源的名称和详细信息，以便可以分配给它们。</p><p id="372f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—库操作系统现在可以对任何物理资源向外核发出<strong class="ig hi">请求</strong>。例如，假设它正在运行的进程需要一些页面。</p><p id="0faf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—通过记录所有者和读写权限，外核为页面创建了一个<strong class="ig hi">安全绑定</strong>。</p><p id="5c7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—为了确保保护，每次访问物理内存位置时，库操作系统都需要<strong class="ig hi">提供</strong>功能<a class="ae ky" href="https://uwsgi-docs.readthedocs.io/en/latest/Capabilities.html#:~:text=POSIX%20capabilities%20allow%20fine%2Dgrained,based%20distros)%20before%20building%20uWSGI." rel="noopener ugc nofollow" target="_blank"/>。如果允许，则允许请求通过。</p><p id="3843" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—为了让事情变得更快，这些虚拟到物理地址的映射可以在大型软件TLB中被缓存。</p><p id="a36a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">—类似地，当页面需要被释放时，所有安全绑定都被<strong class="ig hi">破坏</strong>，并且资源被标记为空闲。</p><ul class=""><li id="5296" class="ko kp hh ig b ih ii il im ip kq it kr ix ks jb kt ku kv kw bi translated"><strong class="ig hi">可见的重新分配</strong> —外核与库操作系统交流任何被撤销的资源，以便在必要时给它执行任何应用程序级清理的机会。以下是一个<em class="kx"> *friendly* </em>库操作系统和外核之间的合法对话。</li></ul><p id="bbac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">外核</strong>:嘿库OS，你在这个处理器上的时间片到了！</p><p id="61ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">友好的图书馆操作系统:哦，真的，谢谢你通知我，伙计。嗯，让我看看我需要保存哪些寄存器？我需要全部吗？我认为不是。让我保存这些包含程序状态的数据。</p><p id="5b07" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">没问题，祝你今天休息愉快！😄</p><ul class=""><li id="6f2f" class="ko kp hh ig b ih ii il im ip kq it kr ix ks jb kt ku kv kw bi translated">中止协议——当然，不是所有的库操作系统都这么友好，在这种情况下，我们的外核需要采取一些强有力的措施。以下是一段<em class="kx"> *rogue* </em>库操作系统与外核的合法对话。</li></ul><p id="6cef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嘿，库操作系统，我需要释放你的一些页面。你能告诉我哪些你不用吗？</p><p id="2b0a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">流氓库OS</strong>:<em class="kx">* Ghosts exo kernel *</em></p><p id="1069" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嘿，你在听吗？</p><p id="6cd4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">流氓库OS:</strong><em class="kx">*鬼鬼Exokernel* </em></p><p id="6048" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Exokernel: </strong>如果你不回复，我就要拿走你所有的页面。😡</p><p id="3ca6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嗯，但我也不想这么刻薄！也许，我应该随便拿走几页纸。但是，如果该页面包含一些重要的引导信息，而库操作系统没有这些信息将会崩溃，该怎么办呢？哦，嘿，等等，图书馆的操作系统已经告诉我一些重要的页面，它们是不可或缺的。所以，让我选择它的一个页面<strong class="ig hi">而不是列表上的</strong>，我应该没问题！让我也把这个页面放到<em class="kx">*回收向量* </em>中，以防图书馆操作系统最终决定回复我。</p><p id="0998" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">几秒钟后…</p><p id="c631" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">流氓库OS: </strong>哦，这是什么？一个<em class="kx">*收楼例外* </em>？妈的，一定是外核发来的。让我把这页复制到一个更安全的地方。</p><p id="a10d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">外核:</strong> Tch tch，这几天库OS。😩</p><p id="fd8e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当然，对于外核来说，事情并不都那么顺利！他们有自己的缺点，我们不得不接受。你能想到什么吗？</p><p id="b9e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">希望这能让你对外核有多酷有一个很好的了解！我会带着更多操作系统世界的故事回来。与此同时，在平行世界中快乐编码😊</p></div></div>    
</body>
</html>