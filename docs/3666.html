<html>
<head>
<title>Web Scraping — BeautifulSoup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网页抓取—美丽的声音</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-beautifulsoup-2e4676cdf76c?source=collection_archive---------9-----------------------#2021-07-16">https://medium.com/analytics-vidhya/web-scraping-beautifulsoup-2e4676cdf76c?source=collection_archive---------9-----------------------#2021-07-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/ca30aa69b788b6af6cc13cd35aaa2892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IjHD3vX9-inVafA3ozCS6Q.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">图片由Corinne Kutz在Unsplash上提供</figcaption></figure><div class=""/><p id="98ec" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">你并不总是有你需要的数据，有时候你需要去获取。</p><p id="5de6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Web抓取是一种有效的工具，可以获取网页背后的公共可用数据。这种数据可以有多种用例。</p><p id="6995" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们举个例子。</p><p id="7a3f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">下面是一个ESPNcricinfo页面，显示了顶级击球手的测试职业统计数据。</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es jr"><img src="../Images/5deb5422a9c4eb23b8a666b79f76a821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*3Js8hHgL7Wr6U0vw770-7w.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated"><a class="ae jw" href="https://stats.espncricinfo.com/ci/content/records/223646.html" rel="noopener ugc nofollow" target="_blank">https://stats . espncricinfo . com/ci/content/records/223646 . html</a></figcaption></figure><p id="ffc5" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">将所有这些数据加载到python程序中进行分析，而不是手动复制并清理电子表格中的数据，这不是很好吗？这就是网络抓取所能做到的。</p><p id="6a54" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们看看怎么做。</p><p id="13ce" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们将需要以下库</p><p id="1dca" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.请求—向网站发送http请求以获取其内容</p><p id="94fc" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.beautiful soup——完成所有漂亮的网页抓取工作</p><p id="3061" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">3.熊猫——用于分析</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jx"><img src="../Images/414bbc6ee56e4be9e95c8487cc862fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2-jDiQCVvzIcL7Y2is3-w.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">导入库</figcaption></figure><p id="1098" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以下是我们需要的步骤。</p><ol class=""><li id="3903" class="jy jz hw iv b iw ix ja jb je ka ji kb jm kc jq kd ke kf kg bi translated"><strong class="iv hx"> <em class="kh">请求网页的全部html内容</em> </strong></li></ol><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ki"><img src="../Images/3cdbbd9c0e59a44c2ae2a915f52707d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_kyMHyH5EqsqKNLBznrqA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">请求内容</figcaption></figure><p id="5e18" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"> <em class="kh"> 2。创建一个BeautifulSoup对象，将上面提取的内容</em> </strong>传递给它</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kj"><img src="../Images/7fcd474fc80a627d82d5a349e47bb01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XV02kCi4USpNKrlqJkcitw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">创建美丽组对象</figcaption></figure><p id="1754" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"> <em class="kh"> 3。查找所需数据所在的html标签或元素。你需要知道网站的结构，“查看页面源代码”选项会有所帮助。</em>T13】</strong></p><p id="300b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在这种情况下，数据驻留在class = data1中。</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kk"><img src="../Images/42110c7c906f9078ed56a79fa477f077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8dGjSkwZcu6EcqW7mxeeJQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">查看页面源class = data1</figcaption></figure><p id="1bf3" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们需要做的就是找到上述标签的所有实例。这可以使用BeautifulSoup中的find_all方法来完成。它会将所有这些标签存储到一个列表中。</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kl"><img src="../Images/dca378da75b2f801c649ff604bc2900b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVmXfn6uWTi1uf110YY2qQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">查找class = data1的所有实例</figcaption></figure><p id="7c3c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"> <em class="kh"> 4。提取数据</em> </strong></p><p id="ed89" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">正如您在上面看到的，数据在每个<td>标签中。下面的代码从每个</td><td>标签中提取数据值，并将它们存储在另一个列表中。</td></p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es km"><img src="../Images/786e540fd20a5508eff8a6a0ef9efcbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5XWUSWqpjLV8r22T78oFzA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">提取数据</figcaption></figure><p id="e48e" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a.Get_text方法将所有数据值提取到用“|”分隔的字符串中</p><p id="ade6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b.内部循环只是删除换行符</p><p id="3a84" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">c.外部循环创建一个名为final_data的列表，该列表又包含一个数据点列表，即每个玩家的final_attributes</p><p id="b7d7" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"> <em class="kh"> 5。将数据打包成一个数据帧</em> </strong></p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kn"><img src="../Images/cb01d328825e398f8f142ad9410d7f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JciQBhZOxMdFNJ66APtnGg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">创建熊猫数据框架</figcaption></figure><p id="cc89" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"> <em class="kh"> 6。</em>分析数据</strong></p><p id="15ca" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您已经准备好使用抓取的数据。让我们创建一个玩家得分数的直方图。</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ko"><img src="../Images/8fa4db6d2c7c76948c814347239d946a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oX_bXTeYlWI4F6SeDStuLQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">创建直方图</figcaption></figure><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es kp"><img src="../Images/8f95d87f115d416fc9aefe69d0dfcdf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*2UbBYshMC9m5gLY9ewXvdQ.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx translated">柱状图</figcaption></figure><p id="46f3" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">40以上的玩家没几个考几百的。嗯…</p><p id="dca0" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">注意:虽然web抓取在静态html页面上运行良好，但我还没有在动态页面上尝试过。</p><p id="1cae" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">关于网络抓取的一句警告(Credits-Codecademy)</strong></p><ul class=""><li id="4083" class="jy jz hw iv b iw ix ja jb je ka ji kb jm kc jq kq ke kf kg bi translated">在刮之前总是检查网站的条款和条件</li><li id="a560" class="jy jz hw iv b iw kr ja ks je kt ji ku jm kv jq kq ke kf kg bi translated">阅读关于合法使用数据的声明(你可能会有麻烦)</li><li id="0823" class="jy jz hw iv b iw kr ja ks je kt ji ku jm kv jq kq ke kf kg bi translated">不要给网站发太多垃圾邮件，因为这会破坏网站</li></ul><blockquote class="kw kx ky"><p id="632f" class="it iu kh iv b iw ix iy iz ja jb jc jd kz jf jg jh la jj jk jl lb jn jo jp jq ha bi translated"><strong class="iv hx">你在哪里用过网页抓取？</strong></p></blockquote></div></div>    
</body>
</html>