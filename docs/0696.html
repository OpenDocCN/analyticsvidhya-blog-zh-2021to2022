<html>
<head>
<title>Web Scraping Sold Clothing on Grailed with Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网上销售的衣服含有硒</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-sold-clothing-on-grailed-with-selenium-2514cbe6855e?source=collection_archive---------14-----------------------#2021-01-27">https://medium.com/analytics-vidhya/web-scraping-sold-clothing-on-grailed-with-selenium-2514cbe6855e?source=collection_archive---------14-----------------------#2021-01-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/81b03a5ed069836dbca391c1d2c5f469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTNE5Pl-fwQ4WmQDoaOKSQ.png"/></div></div></figure><h1 id="8d6d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">介绍</h1><p id="d622" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在整个高中和大学期间，我一直使用Grailed的平台来销售我从日本进口的二手服装。对于那些可能不知道的人来说，Grailed本质上是一个男装易贝，用户可以在那里列出他们用过的物品。</p><p id="1262" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">最终，我的目标是创建一个工具来改善Grailed体验，让用户可以获得他们将要发布的物品的准确价格预测。这个工具可以让用户更好地了解他们张贴的物品的价值。</p><p id="f4eb" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">为了创建这个工具，我首先需要一个数据集。这种对海量数据的需求是我的网络抓取冒险开始的地方。Grailed绝不是一个容易刮的网站。我最初担心的是处理弹出窗口、无休止的滚动和下拉菜单，然而，随着我对web scrapping Grailed的深入研究，更多的困难变得明显起来。</p><p id="7f5f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">为了创建一个准确的价格预测模型，我需要已售出的物品而不是已上市的物品，但不是已售出的物品。不幸的是，与未售出的物品相比，Grailed使得抓取已售出的物品更加困难。</p><p id="c6ad" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我将利用python和Selenium包来抓取已售出的列表。</p><p id="32ae" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我首先要感谢Mike Liu在网上搜集未售出商品清单的帖子，他为我的大部分代码提供了基础。</p><h1 id="f4b3" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">抓取已出售的Grailed列表的困难:</h1><ol class=""><li id="50ac" class="kr ks hh jp b jq jr ju jv jy kt kc ku kg kv kk kw kx ky kz bi translated">导航无限滚动</li><li id="6b85" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">弹出窗口</li><li id="f7e0" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">下拉菜单</li></ol><p id="924a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">这三个初始问题只是冰山一角。我原本希望从https://www.grailed.com/sold的<a class="ae kq" href="https://www.grailed.com/sold" rel="noopener ugc nofollow" target="_blank">搜刮到所有最近售出的房源。然而，这个想法被放弃了，因为我发现从这个地址出售的物品只能加载前20页。这意味着从标准销售页面只能收集到大约800个列表。</a></p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lf"><img src="../Images/46f4fde0a0fc941e32cdcc892da02203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J941aNAr-HqH4BU6osam_A.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">标准Grailed销售页面。</figcaption></figure><p id="c143" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我的解决办法是从6，000个特定于设计师的页面中收集售出的商品。在6000个特定设计师售出的页面中，每一页都没有滚动限制。这意味着我可以通过循环浏览每个设计师页面和收集售出商品信息来收集更多的数据。</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lo"><img src="../Images/05a63a3cd7a92feac2e9ef59f182c232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4Vj5zNmURhQwqpzPDMCfA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">设计师特定销售页面示例(古驰)。</figcaption></figure><h1 id="0887" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">正在收集Grailed设计器页面链接:</h1><p id="553d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">我首先收集了Grailed上所有设计师页面的链接。总共Grailed主机6028独特的设计师，我需要收集。为此，我收集了Grailed上<a class="ae kq" href="https://www.grailed.com/designers" rel="noopener ugc nofollow" target="_blank">设计师页面的链接。</a></p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/9c24764eaf4733e591786de497568f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BaURN3--OV1qsD3q8-owIw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">Grailed设计师的网页。</figcaption></figure><figure class="lg lh li lj fd ii"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">用于收集设计器页面链接的代码。</figcaption></figure><h1 id="0914" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">收集每位设计师的售出页面:</h1><p id="a120" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">接下来，我需要获得每个特定设计师页面的已售出列表，而不是当前未售出的列表。这最初似乎是一个简单的过程。我怀疑出售的页面只需要在每个链接的末尾添加“/sold”即可。这不是真的。</p><p id="9685" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">例如，在查看设计师古驰时，我发现设计师页面是<a class="ae kq" href="https://www.grailed.com/designers/gucci" rel="noopener ugc nofollow" target="_blank">https://www.grailed.com/designers/gucci</a>，而进入古驰销售页面的URL是【https://www.grailed.com/sold/kZ4iDqlEsQ】T2。这意味着Grailed上出售的设计师页面的URL没有明确的顺序。为了解决这个问题，我使用Selenium在每个designer页面链接中循环，单击“show only”下拉菜单，关闭登录弹出窗口，然后单击sold框。一旦加载了售出页面，Selenium就会在ItemDF数据框架中为每个设计者收集售出页面的链接。</p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es ls"><img src="../Images/da76dc7f1d1bae33cc45af38aab3ba5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*W_OhQrMaRarP85Cw1-IYxw.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">对于每个设计师来说，最终需要选择什么才能到达售出页面。</figcaption></figure><figure class="lg lh li lj fd ii"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">为每个设计者收集售出页面的代码。</figcaption></figure><h1 id="af4d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">收集特定物品出售链接:</h1><p id="31f5" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">接下来，我收集了上一节中收集的所有设计师的售出页面，并收集了各个项目的链接。由于时间限制，我决定不收集少于25件商品的设计师的作品，我也收集最多4页卷轴的作品。</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lt"><img src="../Images/24b46afe85c7ad3fc73b9283c7e7041b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBRxYAn16oDUXqs3EFc7iQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">我需要收集的链接的例子。</figcaption></figure><figure class="lg lh li lj fd ii"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">收集物品售出链接的代码。</figcaption></figure><h1 id="1aa3" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">正在收集项目信息:</h1><p id="2c9a" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">最后，我使用selenium遍历每个商品链接，收集我首先寻找的基本商品信息。对于每个项目，我收集了以下信息:</p><ol class=""><li id="5e58" class="kr ks hh jp b jq kl ju km jy lu kc lv kg lw kk kw kx ky kz bi translated">发帖人用户名</li><li id="6aa0" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">海报设计者</li><li id="7e1a" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">帖子的副标题</li><li id="ddf5" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">发布的大小</li><li id="6906" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">发布的颜色</li><li id="f72e" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">发布条件</li><li id="502c" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">发布类别</li><li id="9088" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">海报的反馈计数</li><li id="e6ec" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">过帐的销售价格</li><li id="f388" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">过帐的描述</li><li id="70c4" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">帖子中的图片数量</li></ol><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lx"><img src="../Images/10159611ff79284ec9378117e499dec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KjEI8XgBQB-7DVr_Ew3ziw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">从每个项目链接收集的内容示例。</figcaption></figure><figure class="lg lh li lj fd ii"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">用于收集个别项目信息的代码。</figcaption></figure><h1 id="1f39" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">结论:</h1><p id="c79c" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在出售的列表被删除后，我清理了数据。最后，Grailed销售数据集总共有103，537个列表。上面的代码可以很容易地通过增加滚动限制来抓取Grailed上的每一篇售出的文章。然而，问题是，即使收集大约100，000个列表也需要大约2周的运行时间，因此更大的数据收集需要耐心。</p><p id="03d9" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">以下是最终的数据框架:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/980fc55189e5586e9d88c75e403b48f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRel6nWiCuZ2UAc_Jj_VSA.png"/></div></div></figure><p id="df21" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">请随意在我的Github上下载完整的数据框架，在这里找到<a class="ae kq" href="https://github.com/albertfrantz/Grailed_Sold_Data" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>