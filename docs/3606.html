<html>
<head>
<title>Hastily Constructed Precipitation Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仓促建立的降水分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/hastily-constructed-precipitation-analysis-32e132dc1933?source=collection_archive---------12-----------------------#2021-07-12">https://medium.com/analytics-vidhya/hastily-constructed-precipitation-analysis-32e132dc1933?source=collection_archive---------12-----------------------#2021-07-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="169e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jc translated">我最近搬到了俄亥俄州的一个偏僻的地方，因为我的公司搬到了偏远的地方，我想要一些旧的“混凝土丛林”所不能提供的更好的风景。我搬到的这个地区值得注意的一点是，它的降雨量比城市里多得多。以至于某个不是我的人问了这样一个问题，“这是这个地区正常的降雨量吗？还是？”</p><p id="5e12" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以！像一个优秀的小程序员一样，我有权工作。<em class="jl">这是正常的降雨量吗？如果不是，有多不正常？</em>事实证明，寻找答案是一场完美的午后冒险。</p><p id="49a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，我需要弄清楚，确切地说，我应该从哪里获得这类信息。在谷歌搜索了大约7分钟后，我设法找到了去美国国家海洋和大气管理局的路。他们有各种像这样的可以追溯到很久以前的数据集。事实证明，获得感兴趣地区的数据集非常容易——您只需使用他们出色的地图工具来选择您想要查看数据的站点！我决定尝试获取我所在区域的<a class="ae jm" href="https://gis.ncdc.noaa.gov/maps/ncei/normals" rel="noopener ugc nofollow" target="_blank">法线数据集</a>是个好主意。这是个错误。我下载了数据，并注意到它没有一年，只有一个月。我花了<em class="jl">比应该花的时间长得多的时间</em>才明白我已经下载了错误的数据。</p><p id="3251" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好吧好吧好吧。我决定再次狩猎，直到我发现，很像正常人，你可以专门下载降水数据。我决定为我新家周围精心挑选的区域获取<a class="ae jm" href="https://gis.ncdc.noaa.gov/maps/ncei/cdo/hourly?layers=001" rel="noopener ugc nofollow" target="_blank">降水数据集</a>。令人惊讶的是，你可以…在你想要的东西周围拖一个盒子。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/ab47602a61ca22a0f5bb904fa21e50ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2048yqcHT3puVLhy1LBRw.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">所选的天气区域，或多或少。</figcaption></figure><p id="1302" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，获取数据就相当简单了。你选择你想要的数据集，然后“将它们添加到你的购物车”，用你想要的数据构建一个小的顺序。这需要一点时间，但很快，您就会收到一封包含数据链接的电子邮件。而且数据很酷！</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es kd"><img src="../Images/2a511f1cb03aba5187a15c364c3d37ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vdv0tf4DCg6-ueuGhostrQ.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">一些样本降水数据</figcaption></figure><p id="bbfa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它没有满足我所有的需求或愿望，但它足以让我进行快速而粗略的分析。在这次分析中，我真正关心的字段是HPCP ( <a class="ae jm" href="https://www.battelleecology.org/da-viz-coop-precip-data-R#:~:text=HPCP%3A%20The%20total%20precipitation%20given,value%20999.99%20indicates%20missing%20data." rel="noopener ugc nofollow" target="_blank">以英寸为单位的每小时降雨量</a>和日期。几行CSV解析代码，我就可以开始了。</p><p id="4973" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最大的障碍是将数据提升到月度水平。由于数据集包含小时级别的测量值，我需要按站进行汇总，然后进一步汇总到每个月各站的平均值。嗯，我想我没有走那条路。只是看起来不错，万一我以后要用站级数据，就不多了。这部分的代码相当简单:</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es ke"><img src="../Images/839d6e7ada0a3253c4e81d51789358b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uUGmD5YpNdBFrJhVOJU9og.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">按电台和月份累计</figcaption></figure><p id="d452" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我先在车站装了一本字典，然后按月装。我保存了任何给定月份的累计降水量，但也保存了单独的测量值，<em class="jl">以防万一</em>。</p><p id="48db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这一点上，我注意到一些测量结果是999.99。根据NOAA文件，这意味着这些数据点丢失或没有足够的数据。像一个优秀的统计学家一样，我把这些扔进了垃圾桶，希望没人看见。</p><p id="4223" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在接下来的部分，我需要得到每个月的降雨量。这糟透了，因为我有很多电台。我大胆猜测了一下，心想，“好吧，我们就每个月计算一下所有站点的平均降雨量吧。”我…认为我做得对。对吗？这似乎是合法的。代码…效率不高。但它在紧要关头完成了任务。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es kf"><img src="../Images/5bec4359c67b39389c5f2685e8f3eecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SgWHZHWhREs9XaBow9yKvg.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">构建“按月”平均值</figcaption></figure><p id="ce9f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我已经准备好开始策划了。现在，我不是matplotlib向导。我永远不会自称是。这并不是说你在外面，你在做大事，你在顶层公寓区。我…只是还没有提高我的那部分技能。</p><p id="aa24" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是！我<em class="jl">可以</em>很快做出一个丑陋的散点图。现在，你会记得我已经把日期都安排好了。我真的，真的想要剧情里的那些人。但他们至少有100人，所以我决定抛弃他们。如果你知道怎么做才不会很烂，请随时留下评论。这是从另一边出来的情节！</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es kg"><img src="../Images/02204dc42627502cad612cc3665e3cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhfqRAfJ_RfF_DcodAluoA.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">嗯，是的，这里的数据是由数据组成的</figcaption></figure><p id="a70e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以是的，这些地方有大量降水。但是，有增加的趋势吗？递减？一点都没有！？</p><p id="1325" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了找到答案，我刷掉了我尘封已久的线性代数知识，编写了一个快速线性回归程序。有这方面的图书馆吗？当然可以。但是这有什么意思呢？反正我也不知道怎么用numpy。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es kh"><img src="../Images/b281551fbe25f05f600bce1a45e62ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ibryXJkRZhn4B3-cKj2ZIA.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">线性回归代码</figcaption></figure><p id="5b7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我把分子和分母分开，因为…嗯，因为嗯…</p><p id="78bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从弹出的情节，没有进一步的分析(因为，当然，没有必要。代码是100%完美的，很好。别看了。也不看数据。)我们可以得出这样的结论:尽管这里可能下了很多雨，但这里似乎……总是下很多雨。这是一个非常无趣的结果，但是，嘿，这也是一个结果。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es ki"><img src="../Images/558fbc677a1ebcafb064711b45b113ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GcxESd_0PCYebLfjIDvcDQ.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">产生的回归线</figcaption></figure><p id="5864" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">拟合优度？你在说什么？“使用正确的工具？”走开，好吗？一个星期天的下午，我很无聊。</p><p id="d79d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢你的阅读！你可以在这个<a class="ae jm" href="https://gist.github.com/svidovich/14ccdd51bd7f9cbfbf9f1821968a0f0b" rel="noopener ugc nofollow" target="_blank"> github gist </a>里找到代码。如果你在代码/分析中看到任何明显的问题，请评论！我会学到新的东西。</p><p id="c147" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">引文</p><p id="3fa2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">资料来源:用户参与和服务处。DOC/NOAA/NESDIS/NCDC &gt;国家气候数据中心，NESDIS，NOAA，美国商务部。</p></div></div>    
</body>
</html>