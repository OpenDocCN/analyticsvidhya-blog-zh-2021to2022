<html>
<head>
<title>Introduction to Computer Vision with OpenCV | Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV计算机视觉简介|第2部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-computer-vision-with-opencv-part-2-2ff85c1abf15?source=collection_archive---------18-----------------------#2021-02-25">https://medium.com/analytics-vidhya/introduction-to-computer-vision-with-opencv-part-2-2ff85c1abf15?source=collection_archive---------18-----------------------#2021-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="fcc9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在教程的第一部分(<a class="ae jc" rel="noopener" href="/analytics-vidhya/introduction-to-computer-vision-with-opencv-part-1-3dc948521deb">点击此处查看</a>)，介绍了OpenCV库的最基本的主题，在这一步，我们将应用这些知识和其他知识来制作一个项目，你可以将它添加到你的文件夹中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ec1f8807aa5ebc45f5706d673b053c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ig3vwZcxKf4y_MW3vY3rHw.jpeg"/></div></div></figure><h2 id="daff" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">问题是</h2><p id="a5e7" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">想象一下，你是一个从事摄影的人，你有很多照片是从你受雇参加的一个聚会上拍摄的，你想把它们添加到你的作品集里，但是你需要给它们添加你公司的水印，为了做到这一点，你需要在一些编辑软件比如Photoshop或者GIMP中一张一张地打开，然后手动添加你的徽标。</p><p id="8f55" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为几张照片做这个并不是很大的工作量，但是想想你要为100多张照片做这个，可能200张，300张甚至1000张，现在实际上是一个很大的问题，因为花在上面的时间会极高。</p><p id="2332" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，可以注意到，这是一个机械的过程，所有(或几乎所有)这种类型的过程都可以通过一些脚本实现自动化。所以让我们用计算机视觉自动化这个过程来优化你的时间。</p></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><h2 id="5e0b" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">解决方案</h2><p id="a9e1" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">为了更好地执行算法，请确保徽标是白底黑字，为了更容易，本教程中使用的图像以及完整的代码都存放在我的<em class="kw"> github </em>存储库中，只需<a class="ae jc" href="https://github.com/rafaelgrecco/Watermark-Project" rel="noopener ugc nofollow" target="_blank">单击此处</a>即可访问。</p><p id="1989" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，确保所有要添加水印的图像都在同一个文件夹中。</p><p id="a0b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们编写脚本，第一步将一如既往地导入我们将在整个开发过程中使用的库。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="0fa3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们将导入与<code class="du kz la lb lc b">imread()</code>函数一起使用的徽标，然后我们将提取图像的高度和宽度。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="9dc0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">channels变量也在那里，因为正如我们在第1课中学到的，shape方法返回3个值，即高度、宽度和通道数。如果你没看过第1部分，我强烈推荐(<a class="ae jc" rel="noopener" href="/analytics-vidhya/introduction-to-computer-vision-with-opencv-part-1-3dc948521deb">点击这里看第1部分</a>)。</p><p id="ec45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在对所有图像执行该过程之前，让我们对单个图像执行该过程，因此让我们提取我们想要测试的图像的高度和宽度。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="0ff8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这一步，使用<code class="du kz la lb lc b">imshow()</code>功能，我们将看到我们想要添加的徽标和图像。</p><div class="je jf jg jh fd ab cb"><figure class="ld ji le lf lg lh li paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/d0ec77b4bc9c64ab68dc6d6835278b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*r2MYQabnY6Pge3U1DuInxg.jpeg"/></div></figure><figure class="ld ji lj lf lg lh li paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/11ffd696afe19ef8fa1569e89f443d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*ge_KAb9LHdBqiAI01absFA.jpeg"/></div></figure></div><p id="222c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们假设我们要在图像的中心添加我们的徽标，我们要怎么做才能找到图像的中间呢？好的，因为我们有了图像的高度和宽度，如果我们找到这些值的一半，我们就有了图像的中心，让我们开始吧。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="42d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意，我们使用int this来允许<strong class="ig hi"> center_x </strong>和<strong class="ig hi"> center_y </strong>的值为整数。用<em class="kw"> openCV </em>的<code class="du kz la lb lc b">circle()</code>函数我们会看到图像的中心点。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/4b76765b5cfe1e2e239c0f3fab9d2fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HVyMFRARRHv9RwU7y0SZPg.jpeg"/></div></div></figure><p id="0e38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，现在让我们来看一下极值点，也就是说，我们将划定图像中徽标所在的区域，对于左上角，我们将从图像的中心减去徽标的中心，我们将使用代码来简化这一步。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="072d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们用circle函数来形象化这两点</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="6b5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在这里放了一个更大的半径，在案例10中，为了提高可视化，用点来可视化我们的图像，我们将有:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ll"><img src="../Images/e3e4bb988941d7816dbf561b80a7ee7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W8_LJAu-nRRS1r7mP2m7eg.jpeg"/></div></div></figure><p id="c0e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，这些点界定了感兴趣的区域。</p></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><p id="bb0b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们有了界定感兴趣区域的点，我们现在必须把这个标志放在那个区域，所以首先我们要写区域。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="0b00" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">定义好区域后，让我们使用<code class="du kz la lb lc b">addWeighted()</code>函数将它与我们的徽标连接起来，与OpenCV add函数不同，该函数旨在合并两幅图像，该操作在以下等式中举例说明:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/ca29a0bfa545e892856ed6e1735c5f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*X-Zi2GYvz9hHLlSF3LAWnA.jpeg"/></div></figure><p id="b96c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其中A是第一个图像，B是第二个图像，α和β是每个图像的权重，在我们的代码中，第一个图像是<em class="kw"> img </em>的权重为1，第二个图像是水印，权重为0.4，如果第二个值在代码中不满意，您可以增加或减少它，直到找到您想要的结果。在我们的代码中，伽马值为零。</p><p id="e9a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们去看代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="eb34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，让我们将这个变量与之前划定的区域相匹配</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="341f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们看看最终的图像并检查结果</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ln"><img src="../Images/8236283e48ec4bc85af1862775e09817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEymaCK_98PiYJHFiLhBFA.jpeg"/></div></div></figure><p id="4799" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是结果，但是，我们不想逐个图像地应用这个图像，我们想优化我们的时间，所以让我们对我们的代码进行一些更改，以便将它应用到给定文件夹中的所有图像。</p></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><p id="5a37" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我会把完整的最终代码和评论的变化，使这一进程适用于所有的图像。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="5d8a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一个变化是path变量，它将包含包含图像的文件夹的路径，为了到达这个文件夹，我们使用glob库中的glob函数，并且作为一个参数，我们传递文件夹的路径，并且在文件夹内我们将搜索所有格式(*)的所有文件(*)，如下(*。*).</p><p id="e93a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一个变化是，我们所有的代码现在都在for中，它将在路径中寻找每个图像的路径，找到的那些图像将成为我们的<code class="du kz la lb lc b">imread()</code>函数的参数。</p><p id="7232" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来的变化在最后两行，第31行的目标是将图像名称存储在文件变量中，在下一行我们使用<code class="du kz la lb lc b">imwrite()</code>函数保存图像，这是因为现在的目标不是查看图像，而是将图像与徽标一起保存在我们的机器上。</p><h2 id="dac1" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">代码操作</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/55e3c1b26f909f245e884e6777b4f227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRVNsM099ObSq2HBZteiBA.png"/></div></div></figure><p id="0269" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里我们有一些保存在一个目录中的图像，让我们对该目录中的图像运行我们的代码，看看结果</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/ad4884ca6f254dfb9b6fc5ff298fd347.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*KsyTM--yoSgSMeYOgApFZQ.png"/></div></figure><p id="0bda" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在0.833秒内，代码已经将转换应用于所有图像，结果如下。</p><p id="7109" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意</strong>:脚本的运行时间会随着图像的数量和计算机的处理能力而变化。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lq"><img src="../Images/8ba10bc62fb8aa4860a906417d5d25c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-3P9BUss6-QTRPv0j02ag.png"/></div></div></figure><p id="dd30" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我会在这里放一些图片</p><div class="je jf jg jh fd ab cb"><figure class="ld ji lr lf lg lh li paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/ed49e2b3174a12e93c1a65d628521c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*kC5QO6QFMnSVczq66Hp47A.jpeg"/></div></figure><figure class="ld ji ls lf lg lh li paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/5d7939946c735a55394b4052c2a73b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*YgeLz5-RuDPCzjprusHFSA.jpeg"/></div></figure><figure class="ld ji lt lf lg lh li paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/e67a572f82a30ed61b2aca71c970cb4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0RAoRm8cnRGBDI6QWjxYMg.jpeg"/></div></figure></div><p id="8e21" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想检查所有的结果，这个项目的文件夹将存放在<a class="ae jc" href="https://github.com/rafaelgrecco/Watermark-Project" rel="noopener ugc nofollow" target="_blank"> github </a>上，里面有原始图像和那些被应用到水印的图像。</p></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><p id="3c63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">关于OpenCV的计算机视觉教程的第2部分已经结束，在第3部分中，我们将执行一个具有更多功能和更深层次的项目。</p><p id="0de5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望本教程对您的计算机视觉之旅有所帮助，欢迎留下任何评论，如果您想联系我，可以在我的LinkedIn上找到我，非常感谢您的光临。好好学习！</p></div></div>    
</body>
</html>