<html>
<head>
<title>EXTRACT FOOTBALL (SOCCER) DATA IN R WITH ZERO R EXPERIENCE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以零R经验提取R中的足球数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/extract-football-soccer-data-in-r-with-zero-r-experience-bee36287ad37?source=collection_archive---------2-----------------------#2021-06-14">https://medium.com/analytics-vidhya/extract-football-soccer-data-in-r-with-zero-r-experience-bee36287ad37?source=collection_archive---------2-----------------------#2021-06-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c134e62da548079b693585606b4a2dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6A13FNomKUYz5B5Zoz7wNQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">结合R、worldfootballR和RStudio分析足球数据</figcaption></figure><h1 id="39e3" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="7a3a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">你是否发现你对足球的热爱和好奇汇聚到了这样一个点，你想要挖掘一点数据，以确认你的眼睛所看到的是否确实是正在发生的事情，但你只是不知道如何开始，或从哪里获得数据？或者你可能已经开始在可视化软件中做一些分析，包括PowerBI、Tableau、Excel等，或者对统计学有足够的了解，想要进行一些统计建模，但你只需要知道如何更快、更容易地访问更多数据？那么这个帖子就是给你的。</p><p id="9b38" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这篇文章将有望教你如何使用<code class="du kv kw kx ky b">worldfootballR</code>——一个R包，用于帮助从一些流行的网站(在他们同意的情况下)提取世界足球数据。</p><p id="2bd1" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">本文将演示如何使用该包以编程方式提取数据，并将其保存为适合您的报告的文件格式，省去了您从下面列出的流行网站提取数据的手动步骤。</p><p id="d160" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">此外，如果你愿意花时间学习R，我还将展示R中可用的可视化工具。</p><p id="89f0" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这篇文章的最后一个目的是强调对于那些R编程新手来说，R中有什么是可能的，希望它能激起足够的兴趣，让你开始R学习之旅。</p><p id="84c4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这篇文章不会是一篇深入的如何编写R代码的文章——有大量的在线资源，包括MOOCs、文章、视频等等。这篇文章将关注如何让你的手里或屏幕上的数据运行起来。</p><h2 id="169e" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">能得到什么数据？</h2><p id="c014" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">版本为0.3.2的软件包提供了对来自以下数据站点的数据的访问:</p><ul class=""><li id="4265" class="ln lo hi ju b jv kq jz kr kd lp kh lq kl lr kp ls lt lu lv bi translated">FBref.com(一大堆要分析的数据，包括结果、比赛数据、赛季数据、球员和球队数据等)；</li><li id="f29c" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated">Transfermarkt.com(球员市值、球队转会历史、球员转会历史)；而且，</li><li id="249f" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated">Understat.com(大联盟比赛的拍摄地点数据)</li></ul><p id="14c4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这三个站点是世界各地的分析师经常使用的，但是软件包在不断发展，将来可能会包括来自其他站点的数据。</p><p id="48ea" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">据我所知，只有FBref提供了将数据导出到文件的能力——其他两个都没有，所以您需要找到一些其他方法来获取数据(极其缓慢的复制和粘贴),这就是<code class="du kv kw kx ky b">worldfootballR</code>的用武之地。</p><h2 id="3a77" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">先决条件</h2><p id="d8fa" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">这个职位的唯一先决条件是你有一台电脑，互联网连接和分析世界足球数据的愿望。这篇文章旨在让任何没有R编码经验的有抱负的分析师能够使用<code class="du kv kw kx ky b">worldfootballR</code> R库以编程方式提取数据。</p><h2 id="83c0" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">什么是R /为什么我要用R？</h2><p id="3731" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">来自R官方网站(<a class="ae mb" href="https://www.r-project.org/about.html" rel="noopener ugc nofollow" target="_blank">https://www.r-project.org/about.html</a>)；</p><blockquote class="mc md me"><p id="1421" class="js jt mf ju b jv kq jx jy jz kr kb kc mg ks kf kg mh kt kj kk mi ku kn ko kp hb bi translated"><em class="hi"> R是一种统计计算和图形的语言和环境。</em></p></blockquote><p id="840e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">随着您对主页上的语言越来越有经验，您可以找到更多关于R的信息，但是现在您需要知道的是，R将是您的工具箱中的另一个工具，用于执行您想要做的分析。R是一个令人惊叹的编程框架，它允许你做很多事情，包括数据清理、执行统计分析和建模，以及使用R编程语言构建完全可定制的可视化。</p><p id="0245" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">重要的是，任何被编程的东西都意味着它是可重复的。预先设置您的代码，然后简单地重新运行它以获得一致的结果。</p><p id="5257" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">如果你有学习的动力，世界是你的。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><h1 id="2264" class="iu iv hi bd iw ix mq iz ja jb mr jd je jf ms jh ji jj mt jl jm jn mu jp jq jr bi translated">安装R和RStudio</h1><p id="5e4e" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">第一部分将详细介绍安装R和RStudio所需的步骤，然后您可以开始使用<code class="du kv kw kx ky b">worldfootballR</code>提取数据。</p><h2 id="2712" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">入门指南</h2><p id="c864" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">好了，在我们开始之前，有几件事…这是用外行的术语来说的(因为我自己就是个外行)。r是引擎，是驱动您想做的一切的编码语言，RStudio是漂亮的图形用户界面(GUI读作“gooey”)，当您在其中编写代码时，它会为您提供额外的功能。在这篇文章中，我打算建议同时安装R和RStudio，但是如果你不想要RStudio(我建议你使用RStudio)，你仍然可以运行代码来获得你需要的数据(这里我假设一切都是在RStudio中完成的)。</p><h2 id="642b" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">安装R</h2><p id="c34c" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">你记得我说过我是个门外汉吗？它会延伸到这里。我们将安装R，并使用所有默认选项(只需继续点击“<em class="mf">接受</em>”或“<em class="mf">同意</em>”，或“<em class="mf">继续</em>”，直到R成功安装为止)。当你更精通R时，你可以定制安装，但是现在，只给我看数据！</p><p id="8e09" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">所以你问怎么找R安装R？嗯，你必须在谷歌上输入一些非常复杂的东西…“<em class="mf">下载r windows </em>”或者在Mac OS上…是的，你猜对了，“T13】下载r mac ”。</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/3ec3472c22e2dc05e20082fb6f7dfa39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cKtsxuooGJ2zSJyU.jpg"/></div></div></figure><p id="6419" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">如果你不想这么做，这里有一些链接:</p><ul class=""><li id="6de1" class="ln lo hi ju b jv kq jz kr kd lp kh lq kl lr kp ls lt lu lv bi translated">对于Windows操作系统:<a class="ae mb" href="https://cran.r-project.org/bin/windows/base/" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/bin/windows/base/</a></li></ul><p id="5e53" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">选择“下载R X.X.X for Windows”，其中“X.X.X”表示最新版本的R:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/9a0a2be09a8771e78ef9ad7c4f1a5b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zqvBUg6QX7lNXkxR.jpg"/></div></div></figure><ul class=""><li id="4f7a" class="ln lo hi ju b jv kq jz kr kd lp kh lq kl lr kp ls lt lu lv bi translated">对于苹果操作系统:<a class="ae mb" href="https://cran.r-project.org/bin/macosx/" rel="noopener ugc nofollow" target="_blank">https://cran.r-project.org/bin/macosx/</a></li></ul><p id="5be9" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">根据您运行的Mac OS的版本，将决定安装哪个版本，但一般来说，这只是下面突出显示的选项之一:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/e5836fcdcadcfef81aa10bf9a664dc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wg3FniV6JppxNJFJ.jpg"/></div></div></figure><p id="26ee" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">一旦你选择了Windows或Mac OS版本，就像安装任何软件一样安装，记住我在本节开始时的一个特殊规则…默认选项。</p><h2 id="e894" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">现在是RStudio</h2><p id="9d9b" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">一旦安装了R，我们现在就可以继续安装RStudio，记住，它是一个GUI，允许您编码并提供附加功能。</p><p id="1e54" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">回到我们复杂的谷歌搜索查询…“<em class="mf">下载rstudio </em>”，并选择第一个结果:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/503e07ec51237244ed9d1973474aec98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mLgeoIf5RXti2NMh.jpg"/></div></div></figure><p id="84d4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">或者为网址:<a class="ae mb" href="https://www.rstudio.com/products/rstudio/download/" rel="noopener ugc nofollow" target="_blank">https://www.rstudio.com/products/rstudio/download/</a></p><p id="38f7" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">打开页面后，我们会看到几个定价选项，但如果你像几乎所有的业余分析师一样(说实话，即使是专业分析师)，你可能只需要免费版:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/f2e71575395477ca81fd50216e28cce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OvHDJ6W2pef7rFi4.jpg"/></div></div></figure><h2 id="0253" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">我们(几乎)准备好开始编码了！</h2><p id="6150" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">好了，我们几乎已经准备好开始编码了，但是首先我们将对RStudio进行一点浏览(再次提醒那些已经忘记的人，RStudio是我们键入和执行R代码的软件)。</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/36f7b984ed5f08bc4601a9ebb5eeb37b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7kGyNeeRT7TBFOJ3.jpg"/></div></div></figure><p id="a74d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">控制台窗格是我们能够看到我们的代码运行的地方(或者如果我们不使用脚本，在这里运行我们的代码)，是否有任何“错误”或“警告”和打印输出。</p><p id="3d69" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">环境是我们将看到我们已经导入或创建的对象的部分，包括数据框(想象类似于Excel表的东西)。</p><p id="8b2d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在“查看器”窗格中，有几个选项卡，包括能够浏览文件系统(“文件”选项卡)、我们创建的任何可视化(“绘图”选项卡)、我们已经加载到我们的机器上并且“本地”可供我们使用的库/包(“包”选项卡)、帮助部分，在那里我们可以获得提供工作功能所需的其他详细信息，以及查看HTML输出的“查看器”选项卡。</p><h2 id="1fbf" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">现在我们准备开始编码了</h2><p id="4f5f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">打开一个R脚本(有许多不同的选择来编码，但是. R脚本是最好的开始。</p><p id="1b5a" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">要打开一个脚本，您可以在Windows机器上按<code class="du kv kw kx ky b">control+shift+n</code>，或者在Mac上按<code class="du kv kw kx ky b">command+shift+n</code>，或者您可以通过左上角的下拉菜单选择一个新的脚本:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/efc8419d298306c6ad4dba5403b97862.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/0*VzA6BCf086FHZGhd.jpg"/></div></figure><p id="40d5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">像这样更改布局:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/d4ad4c2839b0ffe94a58ba1805133a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*yzHcfuM0GIfDxqUc.jpg"/></div></figure><p id="af90" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们将在左上角开始编写代码。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><h1 id="f440" class="iu iv hi bd iw ix mq iz ja jb mr jd je jf ms jh ji jj mt jl jm jn mu jp jq jr bi translated">世界足球</h1><p id="25a9" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">现在我们在这里，准备好开始编码了吗？我们还有一件事要掩盖。什么是<code class="du kv kw kx ky b"><a class="ae mb" href="https://jaseziv.github.io/worldfootballR/" rel="noopener ugc nofollow" target="_blank">worldfootballR</a></code>？</p><p id="f603" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><code class="du kv kw kx ky b">worldfootballR</code>是一个由帮助从流行足球网站提取数据的函数组成的包。</p><p id="2c0d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我知道你在想什么——什么是函数？？</p><p id="91fd" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">来自<a class="ae mb" href="https://www.datacamp.com/community/tutorials/functions-in-r-a-tutorial" rel="noopener ugc nofollow" target="_blank">数据营</a></p><blockquote class="mc md me"><p id="93a8" class="js jt mf ju b jv kq jx jy jz kr kb kc mg ks kf kg mh kt kj kk mi ku kn ko kp hb bi translated"><em class="hi">在编程中，你使用函数来合并你想重复使用的指令集，或者，由于它们的复杂性，最好是包含在子程序中，并在需要时调用。函数是为执行特定任务而编写的一段代码；它可以接受也可以不接受自变量或参数，它可以也可以不返回一个或多个值。</em></p></blockquote><p id="a56b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">非常清楚，对吗？你所需要知道的就是<code class="du kv kw kx ky b">worldfootballR</code>已经用一行又一行的代码来提取数据，并从本质上将其压缩成一行(对你来说更重要的是，你没有网络搜集知识)。</p><p id="bca0" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">例如，您想从FBref.com获取特定匹配的匹配摘要信息，而不是学习R编程和web抓取来编写以下代码:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div class="er es nf"><img src="../Images/51cd6a6511f52a04174038a1b7452757.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/0*NPROxUV4IBS16Yf-.jpg"/></div></figure><p id="f3ab" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">您需要做的就是运行这行代码:</p><pre class="mw mx my mz fd ng ky nh ni aw nj bi"><span id="1f0f" class="kz iv hi ky b fi nk nl l nm nn"><strong class="ky hj">get_match_summary</strong>(match_url)</span></pre><p id="6480" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">好了，现在我想我们已经准备好开始编写代码，以你需要的形式提取和保存数据。</p><h2 id="f962" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">编写代码</h2><p id="4fc9" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在我完全了解代码的具体细节之前，我只想向您介绍一些资源。</p><p id="20cb" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">已经为<code class="du kv kw kx ky b">worldfootballR</code>包创建了一个网站，它将为您提供所有可用函数的完整运行，以及您需要传递给这些函数以获得所需数据的参数。网站可以在<a class="ae mb" href="https://jaseziv.github.io/worldfootballR/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="d805" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">现在我们可以真正开始写代码了。</p><p id="0bb9" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">正如我们已经建立的，包包含函数(做某事的代码)。要使用这些软件包，首先需要安装它们(下载到我们的笔记本电脑上)。</p><p id="cf77" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">包通常(但不限于)存放在CRAN(所有包的中央存储库)或GitHub上。<code class="du kv kw kx ky b">worldfootballR</code>位于GitHub上，因此安装该软件包的说明与CRAN上的软件包略有不同。在我们可以安装<code class="du kv kw kx ky b">worldfootballR</code>之前，我们需要安装<code class="du kv kw kx ky b">devtools</code>包来启用<code class="du kv kw kx ky b">worldfootballR</code>的安装。我们还将安装另一个包，<code class="du kv kw kx ky b">xlsx</code>，它将使我们能够保存文件。xlsx '格式。</p><p id="2e90" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">当我们第一次使用R <strong class="ju hj">或</strong>时，我们将这些代码行输入(只是复制和粘贴)到我们的R脚本中。当我们更新R <strong class="ju hj">或</strong>的版本时，包更新了它的功能:</p><pre class="mw mx my mz fd ng ky nh ni aw nj bi"><span id="bd4d" class="kz iv hi ky b fi nk nl l nm nn"><em class="mf"># to allow us to install packages from github:</em><br/>install.packages("devtools")</span><span id="3e94" class="kz iv hi ky b fi no nl l nm nn"><em class="mf"># a meta package that contains packages for data cleaning, analysis and visualisation</em><br/>install.packages("tidyverse")</span><span id="6217" class="kz iv hi ky b fi no nl l nm nn"><em class="mf"># to save xlsx files</em><br/>install.packages("xlsx")</span></pre><p id="59ea" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">如果没有错误消息，并且您可以在控制台部分看到“&gt;”符号和闪烁的光标，您就知道他们已经成功安装。</p><figure class="mw mx my mz fd ij er es paragraph-image"><div class="er es np"><img src="../Images/87e58cb064e93b276cbcf8b4c67085aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/0*UQarBxrC12YMgino.jpg"/></div></figure><p id="75ee" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然后我们将安装<code class="du kv kw kx ky b">worldfootballR</code>(这就是我们在这里的目的)并且重要的是加载库——仅仅安装包是不够的，我们需要加载它以使函数在我们当前的会话中容易使用。</p><p id="6f97" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><strong class="ju hj">注意:</strong>我们只需要在第一次安装R <strong class="ju hj">或</strong>时安装软件包，如果我们更新了R的版本，如果有更新版本的软件包，就安装<strong class="ju hj">或</strong>。</p><pre class="mw mx my mz fd ng ky nh ni aw nj bi"><span id="6ce4" class="kz iv hi ky b fi nk nl l nm nn">devtools::install_github("JaseZiv/worldfootballR", <strong class="ky hj">ref</strong> = "main")</span></pre><p id="97c9" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated"><strong class="ju hj">注2: </strong>虽然我们只需要很少安装它，但是每次我们想要使用这个包的时候，我们都需要加载这个包<strong class="ju hj">。</strong></p><pre class="mw mx my mz fd ng ky nh ni aw nj bi"><span id="35da" class="kz iv hi ky b fi nk nl l nm nn"><strong class="ky hj">library</strong>(worldfootballR)</span></pre><h2 id="0d2c" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">你可随心所欲了</h2><p id="3766" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><code class="du kv kw kx ky b">worldfootballR</code>中有许多函数可以让你得到你需要的所有数据。</p><p id="76aa" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">要找到这些函数，您可以访问软件包网站上的参考页面<a class="ae mb" href="https://jaseziv.github.io/worldfootballR/reference/index.html" rel="noopener ugc nofollow" target="_blank">这里</a>。参考页面将为您提供该功能的简要概述—要了解更多详细信息，请单击该功能，它会将您带到功能页面。</p><p id="5bc5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">此外，网站上还有每个收集数据的站点的说明和示例代码:</p><ul class=""><li id="13b0" class="ln lo hi ju b jv kq jz kr kd lp kh lq kl lr kp ls lt lu lv bi translated">点击<a class="ae mb" href="https://jaseziv.github.io/worldfootballR/articles/extract-fbref-data.html" rel="noopener ugc nofollow" target="_blank">此处</a>获取<strong class="ju hj"> FBref </strong>数据</li><li id="c9e2" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated">点击<a class="ae mb" href="https://jaseziv.github.io/worldfootballR/articles/extract-transfermarkt-data.html" rel="noopener ugc nofollow" target="_blank">此处</a>查看<strong class="ju hj"> Transfermarkt </strong>数据</li><li id="7f5e" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated">点击<a class="ae mb" href="https://jaseziv.github.io/worldfootballR/articles/extract-understat-data.html" rel="noopener ugc nofollow" target="_blank">此处</a>查看<strong class="ju hj">了解</strong>数据</li></ul><h2 id="5911" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">让我们得到一些数据</h2><p id="3008" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">现在是有趣的部分——获取数据！</p><p id="3341" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在我们开始之前，在下面的代码中，当我们在文本开头看到一个“#”时，那是一个注释，而不是可执行代码，这是R程序员给自己或使用代码的其他人写注释的方式，以给出正在做的事情的概述。</p><p id="3ea4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在每个脚本的开始，最好的做法是在分析中包含您将要使用/需要的所有包。安装包只需要在您第一次开始使用R时，安装新版本或R时，或者当包的新版本可用并且您想要已经创建的更新时进行。</p><p id="0d43" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们将运行的代码如下。需要记住的几件事:</p><ol class=""><li id="5dcb" class="ln lo hi ju b jv kq jz kr kd lp kh lq kl lr kp nq lt lu lv bi translated">要“运行”我们打出的代码，有两种主要方法；</li></ol><p id="cab2" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">a.突出显示您想要运行的代码，并在MacOS上按<code class="du kv kw kx ky b">control+enter</code>或<code class="du kv kw kx ky b">command+enter</code></p><p id="b727" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">b.将光标放在您想要运行的行上，并在MacOS上按下<code class="du kv kw kx ky b">control+enter</code>或<code class="du kv kw kx ky b">command+enter</code></p><p id="9093" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">2.脚本中的“#”表示注释，我将在代码中使用它们来告诉您我们在做什么</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><h2 id="51e8" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">我要拍摄数据！</h2><p id="6b4f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">假设我们想从FBref获得2020-2021 EPL赛季球队的射门数据，以便能够分析一支球队进了多少球，或者他们的表现如何超出预期(xG)，或者他们的平均射门距离:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/1080c43487f980eff32d34d8740a45c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/0*rmhtujL63Fr2XjIU.jpg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:FB ref<a class="ae mb" href="https://fbref.com/en/comps/9/Premier-League-Stats" rel="noopener ugc nofollow" target="_blank">https://fbref.com/en/comps/9/Premier-League-Stats</a></figcaption></figure><p id="585f" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然后我们运行特定的代码从FBref.com中提取拍摄数据:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="1b95" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这是现在R中的数据:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/b4fa47384ab2fef85f31e01d189b24d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FlUgZH94rmOPtCQh.jpg"/></div></div></figure><h2 id="98c1" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">我只想要数据，不要别的</h2><p id="fa61" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果您想要的只是csv或Excel输出(用于其他软件/框架)，那么下面几行代码将满足您的需求:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="a3c5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这是我们输出的样子，这个输出可以输入到我们选择使用的任何可视化软件中:</p><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/9e65020d95cf81ae1107a68350c2c1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8NNEz5edhlyVi5Nd.jpg"/></div></div></figure><h2 id="109c" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">但是R能提供更多，对吗？</h2><p id="b4eb" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">r不仅仅是一个提取和保存数据的工具。</p><p id="e050" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们可以用代码创建完全可定制的可视化来分析我们的数据。这种灵活性意味着你的创造力只会受到你练习、学习、练习、学习的欲望的限制。</p><p id="5c1e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">下面，我们根据本赛季的预期目标绘制了一个团队的表现。在终点线以上的球队比xG队进了更多的球，而在虚线以下的球队得分更少。</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/ce2af613eaf91ff5a8ea950f51b0d01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rSb1dECHPYVp84Bf.png"/></div></div></figure><p id="c68f" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们还可以使用R中的<code class="du kv kw kx ky b">cor()</code>函数来计算xG与预期目标的相关程度，我们看到打印出来的结果是0.8805275——高度相关表示团队得分非常接近预期:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><h2 id="2992" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">请提供更多数据</h2><p id="d79a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">FBref.com是一个伟大的网站，让分析师前所未有地访问他们的数据，包括手动提取到csv的能力。当您只需要一个提取时，这是非常好的，但是当有多个提取时，这将变得非常耗时！已经为这些创建了函数，官方的<code class="du kv kw kx ky b"><a class="ae mb" href="https://jaseziv.github.io/worldfootballR/" rel="noopener ugc nofollow" target="_blank">worldfootballR</a></code> <a class="ae mb" href="https://jaseziv.github.io/worldfootballR/" rel="noopener ugc nofollow" target="_blank">站点</a>会带你一起去。</p><p id="198d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">其他的，像Transfermarkt.com和Understat.com没有给你导出到文件的能力。<code class="du kv kw kx ky b">worldfootballR</code>也是来帮忙的！</p><p id="c918" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">首先我们会得到数据:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="2d7d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然后我们将它保存到文件:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="c3e4" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">最后，我们还将创建一个可视化:</p><figure class="mw mx my mz fd ij"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="mw mx my mz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/f3f862d8d1a413818399a40bc4c017c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1sI1i__iy0U4Czlo.png"/></div></div></figure><h1 id="53a9" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="97cf" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">希望你已经走了这么远！</p><p id="a64c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我们已经浏览了<code class="du kv kw kx ky b">worldfootballR</code>包的概述，该包旨在帮助您从流行的足球数据网站中提取足球数据，我们已经安装了R和RStudio，我们已经开始使用worldfootballR提取数据，我们已经将数据保存在其中任何一个中。xlsx或者。csv，我们已经看到了一些简短的统计分析，我们还使用<code class="du kv kw kx ky b">dplyr</code>(准备好我们的数据)和<code class="du kv kw kx ky b">ggplot</code>的混合创建了一些可视化。</p><p id="9f40" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">希望这已经激发了你的兴趣，让你有可能使用R和<code class="du kv kw kx ky b">worldfootballR</code>！</p><p id="94b0" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">如果您有任何问题或反馈，请随时发表评论，或在twitter <a class="ae mb" href="https://twitter.com/jaseziv" rel="noopener ugc nofollow" target="_blank"> jaseziv </a>上联系。</p><p id="2c81" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">这篇文章最初出现在“不要责怪数据”博客上，可以在这里找到<a class="ae mb" href="https://www.dontblamethedata.com/blog/extract-data-using-worldfootballr/" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="d2ff" class="kz iv hi bd iw la lb lc ja ld le lf je kd lg lh ji kh li lj jm kl lk ll jq lm bi translated">资源</h2><ul class=""><li id="75a3" class="ln lo hi ju b jv jw jz ka kd nw kh nx kl ny kp ls lt lu lv bi translated"><code class="du kv kw kx ky b"><a class="ae mb" href="https://jaseziv.github.io/worldfootballR/" rel="noopener ugc nofollow" target="_blank">worldfootballR</a></code></li><li id="2999" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated"><a class="ae mb" href="https://fbref.com/en/" rel="noopener ugc nofollow" target="_blank"> FBref </a></li><li id="b5f3" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated"><a class="ae mb" href="https://understat.com/" rel="noopener ugc nofollow" target="_blank">理解</a></li><li id="778c" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated"><a class="ae mb" href="https://www.transfermarkt.com/" rel="noopener ugc nofollow" target="_blank">转移市场</a></li><li id="c90d" class="ln lo hi ju b jv lw jz lx kd ly kh lz kl ma kp ls lt lu lv bi translated">一组非常有价值的R软件包，用于操作、分析和可视化数据</li></ul></div></div>    
</body>
</html>