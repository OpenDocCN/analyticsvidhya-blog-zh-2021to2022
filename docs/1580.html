<html>
<head>
<title>Streamlit in Practice | Learn how to Create Interactive Dashboards</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实践中的简化|了解如何创建交互式仪表盘</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/streamlit-in-practice-learn-how-to-create-interactive-dashboards-69dc22adaf7b?source=collection_archive---------9-----------------------#2021-03-08">https://medium.com/analytics-vidhya/streamlit-in-practice-learn-how-to-create-interactive-dashboards-69dc22adaf7b?source=collection_archive---------9-----------------------#2021-03-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/bd0e8e24e0a89a09f6d56b1a28ff7e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eqtZE3ezsDAjceIHqdvWUw.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">美国宇航局任务控制中心。<a class="ae it" href="https://www.nasa.gov/feature/jpl/explore-nasa-s-jet-propulsion-laboratory-with-the-new-virtual-tour" rel="noopener ugc nofollow" target="_blank">nasa.gov</a></figcaption></figure><h2 id="42e4" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">什么是仪表板？</h2><p id="e557" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km ha bi translated">数据科学家的优点之一当然是知道在每天产生的大量数据中寻找什么，但也许比这更重要的是知道如何将这些信息传递给其他人，例如，在当前的会议上，以优雅简洁的方式将从数据中提取的信息传递给你的老板。</p><p id="50d7" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">大多数情况下，设置仪表板的目的是向人们展示呼号或见解，目的是根据这些呼号做出决策。</p><p id="031e" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">为了做到这一点，许多人使用添加了图形的幻灯片，但是您是否考虑过使用python来制作您的演示文稿呢？使用代码行创建交互式的非常优雅的演示文稿？这就是我今天在这篇文章中要教授的内容。</p><p id="b687" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">使用仪表板显示上述指标的优势在于，根据您的应用程序，您可以实时监控这些数据，也就是说，这是一个可以每秒更新的应用程序，而不是静态的简单幻灯片。例如，本文开头的图像来自NASA控制室。对他们来说，必须实时显示数据，才能知道航天器在另一个星球上发射或着陆的真实情况。</p><h2 id="d48c" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">如何创建仪表板？</h2><p id="ebb6" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km ha bi translated">第一步是数据科学家每天都要做的，<strong class="ju hi">对数据的探索性分析</strong>，我个人喜欢在<em class="ks"> google colab </em>上做，但也可以在Jupyter笔记本或任何其他工具上做。</p><p id="00da" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">在这个例子中，我们将使用优步提供的数据，可以在这里<a class="ae it" href="https://s3-us-west-2.amazonaws.com/streamlit-demo-data/uber-raw-data-sep14.csv.gz" rel="noopener ugc nofollow" target="_blank">找到</a>。这里我将使用纽约市的数据，然而这里<a class="ae it" href="https://movement.uber.com/?lang=pt-BR" rel="noopener ugc nofollow" target="_blank"/>——你可以找到其他城市的数据。</p><figure class="ku kv kw kx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kt"><img src="../Images/b8951f3135e097a3b2d9cfea1d776373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9FLHrv1ypvUrNnBcgBVGTg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">优步标志。<a class="ae it" href="https://www.uber.com/br/pt-br/" rel="noopener ugc nofollow" target="_blank">uber.com</a></figcaption></figure><p id="2e02" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">由于本文的重点不在数据探索上，所以不解释这一步，不过，我使用的笔记本将在<em class="ks"> Github </em>资源库中提供。</p><h2 id="9235" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">细流</h2><figure class="ku kv kw kx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ky"><img src="../Images/418487468f64eb76e19d98cf2178921c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_tOPp_41jV_3X8RE4E7fw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">流线型标志。<a class="ae it" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> streamlit.io </a></figcaption></figure><p id="58d4" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">为了创建我们的仪表板，我们将使用Streamlit库，这是我所知道的python中最好的库，它允许您执行这种类型的任务。</p><p id="4b42" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">安装它非常简单，您可以使用以下命令:</p><p id="0273" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated"><code class="du kz la lb lc b">pip install streamlit</code></p><p id="d6d8" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">下一步是在您最喜欢的IDE中创建一个文件，在我的例子中，我将使用VS代码，并导入streamlit，如下所示:</p><p id="8ec2" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated"><code class="du kz la lb lc b">import streamlit as st</code></p><p id="95b2" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">在这个项目中，我们将使用另外两个库，NumPy和Pandas</p><p id="a2fa" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">让我们开始写代码吧</p><p id="5c3c" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">像往常一样，最初，我们将导入所有库</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="5751" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">streamlit需要我们的代码位于函数内部，为此，我们将添加以下代码。</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="6b79" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">我们仪表板上的所有代码都必须在主函数内部。</p><p id="292e" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">现在让我们了解一下Streamlit库的主要功能:</p><p id="43d4" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">我们知道的第一个是<code class="du kz la lb lc b">st.title()</code>。这是一个非常简单和不言自明的功能，它的目标是添加一个标题到您的仪表板。还有其他方法来写标题，例如使用markdown标记语言。为此，我们使用以下函数:</p><p id="cb8b" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated"><code class="du kz la lb lc b">st.markdown()</code></p><p id="d42f" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">括号里有引号，我们可以用markdown来写。</p><p id="c7c4" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">如果你想在你的仪表盘上呈现一个数学公式，你可以用LaTeX用命令<code class="du kz la lb lc b">st.latex()</code>写出来。</p><p id="1fdc" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">我们将在应用程序中使用的另一个函数是<code class="du kz la lb lc b">st.subheader()</code>，它基本上是第二级标题。</p><p id="3730" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">正如你所看到的，streamlit库有无数的函数用于编写文本、标题和公式，不幸的是，我不能对它们都进行评论，这将是一篇很大的文章，但我会留下到<a class="ae it" href="https://docs.streamlit.io/en/stable/api.html" rel="noopener ugc nofollow" target="_blank">文档</a>的链接，以防你想看到向你的仪表板添加文本的其他方法。</p><p id="9b27" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">另一个对我们非常重要并且我们将在项目中使用的函数是:<code class="du kz la lb lc b">@st.cache</code>。为了理解这个函数的目的，假设我们必须使用一个数据集，该数据集不会被添加新数据，并且该数据集很重，每次打开应用程序时都要加载，这是浪费时间，所以我们只加载一次，然后用这个函数保存它，这样每次进入应用程序时，都不需要重新加载数据。</p><p id="eae6" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">这是这个神奇的库的一些基本功能，现在让我们看看它们是如何应用到我们的项目中的:</p><p id="e646" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">我们将精心制作一个函数来加载数据集，并对数据进行一些调整</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="ff54" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">在这一步中，我们创建了一个函数来加载我们的数据，将列名放在小写字母中，以方便代码，我们还将日期字段更改为<em class="ks"> datetime </em>格式。</p><p id="2f29" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">这个函数的参数是加载一定数量的列，让我们调用这个函数并传递数字1000</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="fc32" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">要查看到目前为止您的应用程序，您必须在终端中使用以下命令streamlit run[您的应用程序的名称]。</p><p id="af5e" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">我的应用程序名称是main.py，请注意它的外观:</p><figure class="ku kv kw kx fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/77102a5637975f6b37183f1abe013026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*2iNkNWrIRqwi2h6AGSZlGQ.png"/></div></figure><p id="3bd4" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">之后，您的浏览器将在该本地主机上打开，您将看到如下页面:</p><figure class="ku kv kw kx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lg"><img src="../Images/2b16671b3e85c14133d42e28ce0946f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WKlfY6g_XGfBz3XUEAHIGA.png"/></div></div></figure><p id="3531" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">您可能想知道，我没有从我的数据集加载1000行？这些线在哪里？它在缓存中，但是，在任何时候我们都不会要求显示这些数据，我们会这样做。</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="a928" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">让我们来理解刚刚编写的代码，最初，我们创建了一个对象，即侧边栏(应用程序的一侧)中的一个复选框，当我们单击此复选框时，它具有一个真值，使用st.success()函数，我们将显示一条确认操作的消息，最后，使用st.write()函数，我们将显示数据集的行，让我们看看我们的应用程序是如何工作的。</p><figure class="ku kv kw kx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/c7210bffdbe20d045701800cea9f04b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYKd92FI6KX6y4VGZjIQQw.png"/></div></div></figure><p id="28d5" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">当您打开应用程序时，您会看到这个屏幕，当您单击复选框时，您的屏幕会是这样的:</p><figure class="ku kv kw kx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es li"><img src="../Images/cb9241d347329426a8390577e7f79f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcRFpX8Z1DgP_hP7PlL9zg.png"/></div></div></figure><p id="f841" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">现在，我们将在应用程序中添加一个直方图，以检查峰值运行的时间。</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="40ac" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">不要被代码吓到，我们将逐行理解这些代码。最初，我们用subheader函数创建一个副标题，然后我们创建一个直方图，计算一天中每小时的运行次数。<br/>最后，我们使用st.bar_chart()函数来绘制条形图。</p><p id="445c" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">下一步是使用纬度和经度坐标绘制一个带有跑步路线的地图，这非常简单，只需使用st.map()函数，但是，我们需要一个带有函数st.slide()的交互式图形。我们创建了一个从1到24(一天中的小时)的幻灯片，最后一个参数是该幻灯片的步长，在本例中为1比1。</p><p id="791b" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">为了将此幻灯片与map函数集成，创建了一个新的变量f_data，它将接收通过幻灯片选择的一天中的小时值。</p><p id="f158" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">最后，让我们将这个变量f_data作为map函数的一个参数来传递。</p><p id="5516" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated"><strong class="ju hi">让我们看看结果吧！</strong></p><div class="ku kv kw kx fd ab cb"><figure class="lj ii lk ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/96d9f8dbe3c4362bb34cf44aaba5116e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*V72lYOFqLdAj2xM5_XXmXQ.png"/></div></figure><figure class="lj ii lp ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/fdfa643a6b5d63b309430d0dd85b7512.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*n68TS5i4Op2id-SRtl26Sw.png"/></div></figure></div><div class="ab cb"><figure class="lj ii lq ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/ed2e60888d577af219e7d3f81e9b3491.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*iE45DXZxlJwHyGzbpWUVBg.png"/></div></figure><figure class="lj ii lr ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><img src="../Images/56fe41996e40420d804c44415ad5f333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*R2g5ThTxA3SQIebY5rOFXw.png"/></div></figure></div><p id="be5e" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">这里有一些图片显示了我们得到的结果。这是一个简单的项目，但它可以让你走得更远。<br/>我希望这篇文章在某种程度上对你有所帮助，欢迎留下建议/提示/批评的评论。<br/> <strong class="ju hi">好好学习！！</strong></p></div><div class="ab cl ls lt go lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ha hb hc hd he"><p id="1102" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">如果你想开始学习数据科学，但是不知道从哪里开始，可以考虑看一下<a class="ae it" rel="noopener" href="/analytics-vidhya/5-best-books-on-data-science-and-machine-learning-bb0f9591cbc5">我写的这篇文章</a>。</p><p id="0bf9" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">以下是完整的代码:</p><figure class="ku kv kw kx fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="ae72" class="pw-post-body-paragraph js jt hh ju b jv kn jx jy jz ko kb kc jf kp ke kf jj kq kh ki jn kr kk kl km ha bi translated">如果你想访问Github，这里是<a class="ae it" href="https://github.com/rafaelgrecco/Streamlit-library-Projects" rel="noopener ugc nofollow" target="_blank">链接</a>。</p></div></div>    
</body>
</html>