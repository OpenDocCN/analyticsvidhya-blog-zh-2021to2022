<html>
<head>
<title>IPL Powerplay Score Prediction using AWS Lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Lambda预测IPL Powerplay分数</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ipl-powerplay-score-prediction-using-aws-lambda-73a580b63ba2?source=collection_archive---------17-----------------------#2021-07-26">https://medium.com/analytics-vidhya/ipl-powerplay-score-prediction-using-aws-lambda-73a580b63ba2?source=collection_archive---------17-----------------------#2021-07-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/b774848bcdff7c80bde885374d7e5ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XU4taVtJzJuwHqiW"/></div></div></figure><p id="0bd7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们首先对IPL中的powerplay有一个基本的了解，然后快速浏览“Powerplay”分数预测演练&amp; Hyper Parameters Optimization →在此基础上20遍预测分数。</p><p id="389f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你想获取密码？<a class="ae jn" href="https://github.com/sumankanukollu/cricket_scorePredict_in_first6_overs/blob/main/IPL_Powerplay_Score_Prediction_v2.ipynb" rel="noopener ugc nofollow" target="_blank">点击这里</a></p><p id="1353" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你想预测分数吗？<a class="ae jn" href="https://suman-projects.s3.ap-south-1.amazonaws.com/myWebPage/index.html" rel="noopener ugc nofollow" target="_blank">点击这里</a></p><p id="5db0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">免责声明:</strong>此处的分析和预测仅供学习之用，不得用于任何非法活动，如赌博。</p><h1 id="732f" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">项目演示:</h1><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="kq kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">预测6比20得分的演示视频</figcaption></figure><h1 id="d3ed" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">简介:</h1><p id="153c" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">COVID封锁时间到了。每个人都担心越来越多的COVID病例，在家工作(WFH)的环境。没有办法出去，没有聚会，没有郊游，没有度假计划，没有聚会……</p><p id="c7cd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">政府宣布封锁:1.0，2.0，3.0，4.0 …..</p><p id="ab37" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当时每个板球迷都有一个问题。<strong class="ir hi">“做新政府。lockdown 4.0中的规则为IPL 2020铺路？?"</strong>终于IPL 2020发生了。即使是疫情的情况也不能让IPL的强大力量脱轨。</p><p id="4fb5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">IPL 2020的收入为400亿卢比，</p><ul class=""><li id="7673" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">成本降低35%,并且</li><li id="861b" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">收视率增加了25%。</li></ul><p id="44ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">作为一名板球迷，我观看了所有的比赛，在那段时间里，我观察到<strong class="ir hi">“力量发挥了主要作用”</strong>，这在球队比分预测中非常重要。</p><h1 id="81a0" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">IPL里什么Powerplay？</h1><p id="f5b2" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">IPL中的“Powerplay”在1 st6-overs中有fielding限制，即..</p><ul class=""><li id="adb0" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">只有两名外野手可以留在内圈之外</li></ul><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/1dc6291c2cc1049651540dcaa6bcf968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HAGPAbQTLyRbXcGA.JPG"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">权力游戏中的防守限制</figcaption></figure><ul class=""><li id="afcc" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">在powerplay之后，最多5名外野手可以留在内圈之外，4名外野手必须留在内圈之内。</li></ul><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/68f9bc99a767f760b6c1a1e97a2a2198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t6i3-l4G3DLmlGlA.JPG"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">权力游戏后的防守限制</figcaption></figure><h1 id="28da" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">效果和重要性:</h1><p id="b656" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">Powerplay使击球相对容易。对于击球手来说，这也是一个陷阱，因为这将使他们冒险并在1比6的比赛中失去检票口。因此，这些比赛被认为是任何球队胜利的支柱。<strong class="ir hi"> 75%的胜算</strong>取决于Powerplay的分数。所以，每个队对前三名击球手的期望是<strong class="ir hi">“开局大”</strong></p><h1 id="3f33" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">该博客的步骤如下图所示:</h1><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/717d2bbf983ec74c948a4b22d6d34534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2eUFh5H43yAgPNSJ.JPG"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">这篇博文中解释的步骤</figcaption></figure><h1 id="da86" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">1.加载数据集:</h1><p id="8bd9" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">实际上，这一步是数据连接层，对于这个非常简单的原型，我们将保持它简单易用，就像从<a class="ae jn" href="https://cricsheet.org/downloads/ipl_male_csv.zip" rel="noopener ugc nofollow" target="_blank"> cricsheet </a>加载数据集一样</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">下载数据集</figcaption></figure><h1 id="883e" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">2.数据帧:</h1><p id="f19f" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">这里我们将使用pandas将数据集加载到pandas对象中。可以通过下面的代码来完成:</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><p id="0578" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">其中包含200664行，22列</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="6bf3" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">3.探索性数据分析(EDA):</h1><p id="93de" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">在分析数据之前，<strong class="ir hi">“数据处理”</strong>被认为是创建学习模型中最重要的步骤！</p><p id="272e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以很容易地获得各种数据集形式的大量数据，但要使这些数据适合从中获得各种见解，需要大量的观察、修改、操作和许多其他步骤。</p><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lt"><img src="../Images/005e9c766d000f5a7a2b539ffa387d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R11tFB9ICxD5jXen"/></div></div></figure><p id="3284" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们为我们的项目新下载一个数据集时，它包含的数据是随机的(大部分时间)，即没有按照我们需要的方式排列或填充。有时，它可能有<code class="du lu lv lw lx b">NULL Values, Unnecessary Features, Datatypes not in a proper format. etc...</code></p><p id="117d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，为了解决所有这些缺点，我们要经历一个过程，这个过程通常被称为“数据预处理”。</p><p id="06c3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">回到我们的IPL数据集，我们必须做如下数据处理，以训练模型。</p><p id="bfd0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，这个数据集的头是不言自明的。</p><h2 id="565f" class="ly jp hh bd jq lz ma mb ju mc md me jy ja mf mg kc je mh mi kg ji mj mk kk ml bi translated">数据处理步骤:</h2><ul class=""><li id="73d6" class="lb lc hh ir b is kw iw kx ja mm je mn ji mo jm lg lh li lj bi translated">数据集中的第一个<code class="du lu lv lw lx b">Identify the "Null" values</code>，希望这个数据集中的<strong class="ir hi">必填字段</strong>没有空值。</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">所有必填字段都不为空</figcaption></figure><ul class=""><li id="bbb2" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated"><strong class="ir hi">选择1st6-Overs比赛详情&amp;下降休息:</strong></li></ul><blockquote class="mp"><p id="b7ce" class="mq mr hh bd ms mt mu mv mw mx my jm dx translated">-在这里，由于我们预测的是“powerplay”得分，我们可以忽略其余数据，除了第一个6-overs和</p><p id="f7d5" class="mq mr hh bd ms mt mz na nb nc nd jm dx translated">-放弃所有超过2局的比赛，因为没有第3局和第4局的比赛</p></blockquote><figure class="ne nf ng nh ni ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="87a0" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated"><strong class="ir hi">识别&amp;掉局比赛&lt; 6局:<br/> * </strong>在我们的数据中，有几场比赛没有进行，并被宣布为“没有结果”，可能是因为下雨…一些技术问题。<br/> <strong class="ir hi"> * </strong>任一比赛结果都是用DCB方法申报的，我们无法预测比分。</li></ul><p id="d9c0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这可能会导致异常值。因为如果球队只打了3局，那么得分最小值会影响到接下来的“正常化”过程。所以最好在我们的预测中去掉这些数据。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="7656" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">在这里，我们的预测不需要“季节”和“开始日期”列。<code class="du lu lv lw lx b">So we can drop the columns 'season' and 'start_date' from the dataset.</code></li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="1b01" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">删除不存在的团队:</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="34c1" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">用新团队名称替换旧团队名称:</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="9207" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">使用唯一的名称更正场地列。在这个数据集中，同一个体育场以多种方式呈现。因此，确定这些并重新命名。</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="2ce8" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">创建一列<code class="du lu lv lw lx b">"Total_score" : which reflects the runs through bat and extra runs</code>通过宽的，轮空，无球，腿轮空...等等。</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><ul class=""><li id="7ded" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">处理<code class="du lu lv lw lx b">['wides', 'noballs', 'byes', 'legbyes', 'penalty', 'wicket_type','other_wicket_type', 'other_player_dismissed']</code>时可以忽略考虑数据框中的列</li></ul><h2 id="af9a" class="ly jp hh bd jq lz ma mb ju mc md me jy ja mf mg kc je mh mi kg ji mj mk kk ml bi translated">数据帧看起来像:</h2><p id="fffd" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">然后，我们的数据帧如下所示，有54525行，13列(最初是200664行，22列)</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="124d" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.编码:</h1><p id="7993" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">到目前为止，作为第一步，</p><ul class=""><li id="f0ff" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">我们用所有“空”值清理了数据集</li><li id="357f" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">过滤列/行数据(不用于预测)和</li><li id="6249" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">添加了带有值的必需列(如total_score ),以使数据集更清晰。</li></ul><p id="6cfb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如您在上面看到的，我们清理的数据集有13列多种Dtype，如int64和float64和object。</p><p id="28ce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，接下来我要做的是尝试将所有这些多种数据类型转换为单一数据类型，以训练模型。</p><pre class="km kn ko kp fd nj lx nk nl aw nm bi"><span id="12b0" class="ly jp hh lx b fi nn no l np nq">1   venue                54525 non-null  object</span><span id="d59b" class="ly jp hh lx b fi nr no l np nq">4   batting_team         54525 non-null  object</span><span id="68a0" class="ly jp hh lx b fi nr no l np nq">5   bowling_team         54525 non-null  object</span><span id="ada1" class="ly jp hh lx b fi nr no l np nq">6   batsmen              54525 non-null  object</span><span id="b605" class="ly jp hh lx b fi nr no l np nq">7   bowlers              54525 non-null  object</span></pre><h1 id="bb83" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.1.对“击球手”和“投球手”列值进行编码:</h1><ul class=""><li id="3344" class="lb lc hh ir b is kw iw kx ja mm je mn ji mo jm lg lh li lj bi translated">在这里我们可以看到，很少有球员可以像保龄球一样击球。意味着相同的球员将被列为击球手和保龄球手。</li><li id="10a3" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">因此，为了正确地进行预测，我创建了一个包含所有玩家的数据帧，将其命名为“players_df”，我用它来对玩家进行编码，以识别一些值。</li><li id="de4c" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">为了进一步推理，我用所有这些编码值创建了一个字典</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="6551" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.2.对“场地”、“击球队”和“保龄球队”列值进行编码:</h1><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="0186" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.3.将编码值保存到json文件中:</h1><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="301e" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.4.格式化数据集:</h1><p id="4c4f" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">在这一步中，我尝试根据比赛ID和比赛局来排列所有行(因为比赛ID是识别特定比赛和比赛局的唯一方式，以识别谁先击球)。</p><p id="98b8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基于这两个细节，</p><ul class=""><li id="e6dd" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">获取所有击球手和投球手的详细资料，他们在第一个6回合中击球和投球</li><li id="c147" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">计算总分(击球得分+额外得分)</li><li id="8aae" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">在前6回合中有多少球员被罚出场</li></ul><pre class="km kn ko kp fd nj lx nk nl aw nm bi"><span id="d6a6" class="ly jp hh lx b fi nn no l np nq">print('### Shape of Dataframe before format_data : {}'.format(df_parsed.shape))</span><span id="ae84" class="ly jp hh lx b fi nr no l np nq">Runs_off_Bat_6_overs = df_parsed.groupby(['match_id', 'venue', 'innings', 'batting_team', 'bowling_team'])['runs_off_bat'].sum()</span><span id="bf87" class="ly jp hh lx b fi nr no l np nq">Extras_6_overs = df_parsed.groupby(['match_id', 'venue', 'innings', 'batting_team', 'bowling_team'])['extras'].sum()</span><span id="600a" class="ly jp hh lx b fi nr no l np nq">TotalScore_6_overs = df_parsed.groupby(['match_id', 'venue', 'innings', 'batting_team', 'bowling_team'])['Total_score'].sum()</span><span id="815d" class="ly jp hh lx b fi nr no l np nq">Total_WktsDown = df_parsed.groupby(['match_id', 'venue', 'innings', 'batting_team', 'bowling_team'])['player_dismissed'].count()</span><span id="56bf" class="ly jp hh lx b fi nr no l np nq">bat_df = df_parsed.groupby(['match_id', 'venue', 'innings','batting_team', 'bowling_team'])['batsmen'].apply(list)</span><span id="725d" class="ly jp hh lx b fi nr no l np nq">bow_df = df_parsed.groupby(['match_id', 'venue', 'innings','batting_team', 'bowling_team'])['bowlers'].apply(list)</span><span id="f860" class="ly jp hh lx b fi nr no l np nq">df_parsed = pd.DataFrame(pd.concat([bat_df, bow_df, Runs_off_Bat_6_overs, Extras_6_overs, TotalScore_6_overs, Total_WktsDown],axis=1)).reset_index()</span></pre><h1 id="0369" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.5.将击球手和投球手的详细资料排成单独的一列:</h1><p id="7302" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">在上面格式化的数据集中，我们得到了击球手和投球手的详细列表，他们在6回合中击球和投球。</p><p id="1c25" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们要把这些击球手排成单独的一列，</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><p id="85b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里，我只选择了10个击球手(因为我们只有10个三柱门)，和6个投球手(可以在6回合中投球)，因为在6回合中这是唯一可能的。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="1bae" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.6.创建击球手和投球手虚拟数据框:</h1><p id="8032" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">为了保持顺序一致，首先我将创建一个虚拟数据帧</p><ul class=""><li id="09c4" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm lg lh li lj bi translated">列名为[bat1，bat2，…的10人击球手..bat9，bat10]</li><li id="995c" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm lg lh li lj bi translated">带列名的6人保龄球[保龄球1、保龄球2、保龄球3、保龄球4、保龄球5、保龄球6]</li></ul><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="26c9" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.7.以相同的顺序将batsmen元素列表更新到每一列中:</h1><p id="d4e1" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">意味着，在每个matchID的元素列表中的数据和局以相同的顺序进入相应的单个击球手列。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><p id="3b93" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，我们的数据框终于准备好了击球手和投球手的详细信息。所以我们可以删除一些不重要的列。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="aefe" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.8.将多个数据类型编码成单个数据类型:</h1><p id="5d39" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">现在该使用标签编码值(在前面的步骤中已经完成)对数据帧进行编码了。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="bba7" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">4.9.在这一步结束时，我们的数据框看起来像这样:</h1><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">编码数据帧</figcaption></figure><h1 id="3e81" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">5.标准化:</h1><p id="5592" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">在编码步骤中，所有数据都被转换成不同范围内的数值。</p><p id="8953" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个标准化步骤中，借助于<strong class="ir hi">“minmax scaler”</strong>，我们用一个通用的数据标度表示数字列值，而不会丢失信息和扭曲值范围的差异。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><p id="822f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这一步结束时，数据帧看起来像:</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">标准化数据帧</figcaption></figure><h1 id="0175" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">6.分割训练和测试数据:</h1><p id="9301" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">将数据集分成70%用于训练，30%用于测试</p><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ns"><img src="../Images/b7b9b9285a8f06ef721333ca3218a13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OCTOizmRLnmuzMTF"/></div></div></figure><ol class=""><li id="b727" class="lb lc hh ir b is it iw ix ja ld je le ji lf jm nt lh li lj bi translated">从pandas数据框架中识别输入与目标，并转换为Torch张量</li><li id="e1cc" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm nt lh li lj bi translated">创建torch数据集</li><li id="a9a4" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm nt lh li lj bi translated">现在将torch_ds分成train_ds和test_ds数据集(70%对30%)</li><li id="161b" class="lb lc hh ir b is lk iw ll ja lm je ln ji lo jm nt lh li lj bi translated">为train_ds和test_ds创建数据加载器</li></ol><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="4ed9" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">7.型号选择:</h1><p id="bd7d" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">这里我用的是线性回归模型。</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">基本线性回归模型</figcaption></figure><h1 id="712a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">8.超参数优化:</h1><p id="9a42" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">我尝试了许多关于LR、动量、NAG、批量大小、优化器和调度器的组合来找到全局最小值。</p><p id="2282" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所有结果均可在<a class="ae jn" href="https://github.com/sumankanukollu/cricket_scorePredict_in_first6_overs/blob/main/Recorded_Metrics.csv" rel="noopener ugc nofollow" target="_blank">记录指标</a>获得</p><p id="8579" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在所有测试中，以下确定的超参数给出了更好的结果:</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><h1 id="0172" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">9.评估:</h1><figure class="km kn ko kp fd ii er es paragraph-image"><div class="er es nu"><img src="../Images/a7c8aa1f781bf9d9f25fb284271c0f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*wniwL0yjk6D0MYxl.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">培训与测试损失</figcaption></figure><p id="734f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从上图中，我们在第36个时期达到了全局最小值，训练损失= 0.0061，测试损失= 0.0117</p><h1 id="9cf6" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">10.评分:</h1><p id="858d" class="pw-post-body-paragraph ip iq hh ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">让我们看看模型对测试数据的预测值:</p><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><figure class="km kn ko kp fd ii"><div class="bz dy l di"><div class="ls kr l"/></div></figure><p id="1028" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基于这些可以说这个模型有83.33%的准确率。仍然有改进的余地。任何人都可以从这个点开始<a class="ae jn" href="https://github.com/sumankanukollu/cricket_scorePredict_in_first6_overs/blob/main/IPL_Powerplay_Score_Prediction_v2.ipynb" rel="noopener ugc nofollow" target="_blank">从这里获取代码</a></p></div><div class="ab cl nv nw go nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ha hb hc hd he"><p id="2aa2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">【http://github.com】最初发表于<a class="ae jn" href="https://gist.github.com/ae2d72bdd43bbf3386addd29276f7fef" rel="noopener ugc nofollow" target="_blank"><em class="oc"/></a><em class="oc">。</em></p></div></div>    
</body>
</html>