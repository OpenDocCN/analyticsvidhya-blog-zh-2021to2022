<html>
<head>
<title>How to Version Control Your Machine Learning Code and Datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对机器学习代码和数据集进行版本控制</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-version-your-machine-learning-code-and-datasets-183206611096?source=collection_archive---------12-----------------------#2021-02-28">https://medium.com/analytics-vidhya/how-to-version-your-machine-learning-code-and-datasets-183206611096?source=collection_archive---------12-----------------------#2021-02-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="ea10" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">版本控制</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/35b9746ea9450b8c1d2922720d90c1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTR6TZyGIs6ANMM_eSJ47g.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx translated">写一个Windows需要多少百万个代码？</figcaption></figure><p id="4a78" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">你有没有问过自己，我们的操作系统或搜索引擎有多大，有多复杂？根据数据，Windows XP包含4000万行代码，脸书包含6200万行代码，谷歌包含20亿行代码[1]。这些数字是巨大的，你可能想知道“他们的工程师如何合作维护这些代码，并确保这些公司的每个工程师在同一时间拥有相同版本的相同代码？”。如果我们谈论他们开发人员的数量，这些大公司有数千名工程师维护这些庞大的系统。答案是我们需要使用版本控制软件。</p><h1 id="cdb1" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">使用Git</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es kq"><img src="../Images/7e31b7a2b579d2eacb773ca572a3b835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Cb2WlVRiO3csejByQUOiIQ.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx translated">Github工作流程</figcaption></figure><p id="5613" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">现在我们有了Git这样一个非常稳定成熟的版本控制软件。还有其他软件具有相同的目的，如SVN和Mercurial。但是在本文中，由于Git的流行，我将只讨论它。在本地使用Git非常简单，在完成几个初始化步骤和学习几个语法之后，你就可以开始控制你的代码版本了。但有趣的是Git有几个提供者可以在云中托管你的代码，比如Github、Gitlab和Bitbucket。他们允许你在他们的云服务中自由地备份你的代码和他们的版本历史，你可以邀请其他人来合作你的项目。基于上图，Git的工作流程非常简单。在您的本地计算机中，您可以将代码添加到git中，然后提交它。在所有的更改完成后，您可以将它推送到远程服务器(在本例中是Github服务器)，其他工程师可以将它拉过来并开始协作[2]。我会给你一个小教程来开始你的git之旅。</p><h1 id="ce0b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">安装Git</h1><p id="3c49" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">首先你可以从这个链接下载git(<a class="ae kw" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/downloads</a>)。安装过程结束后，您可以使用该命令检查git是否已经安装在您的计算机中。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="5fb9" class="lc if hh ky b fi ld le l lf lg">$ git --version</span></pre><p id="d83b" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">有时在开始使用git之前，您还需要确定您的Git用户名和电子邮件。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="615e" class="lc if hh ky b fi ld le l lf lg">$ git config --global user.email ["you@example.com](mailto:%22you@example.com)"<br/>$ git config --global [user.name](&lt;http://user.name/&gt;) "Your Name"</span></pre><p id="0b2c" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">为您的存储库创建一个新文件夹(存储库是存放您的源代码的地方),并在您的存储库中初始化版本控制。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="8073" class="lc if hh ky b fi ld le l lf lg">$ mkdir your_repository<br/>$ cd your_repository<br/>$ git init</span></pre><h1 id="f246" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">创建您的第一个提交</h1><p id="4a3e" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">初始化之后，您可以创建一个新文件(例如python文件)并将其添加到git中，然后提交它。之后，您可以通过log命令查看日志。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="1e43" class="lc if hh ky b fi ld le l lf lg">$ touch hello_world.py<br/>$ git add .<br/>$ git commit -m "My first commit"<br/>$ git log</span></pre><h1 id="4e97" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">提高你的水平</h1><p id="049a" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">Git非常有用，目前被认为是机器学习工程师、软件工程师和数据科学家的主要工具。但是如果我们想更深入地了解Git，它有几个限制，其中之一就是处理大文件。Git被设计用来处理源代码文件，它们的大小通常小于1 MB。在机器学习项目的情况下，我们的数据集会比这个大，Git处理起来很麻烦。目前，Git有一个名为Git LFS的服务来处理大文件，但我将向您介绍另一个名为DVC(数据版本控制)的解决方案。</p><h1 id="a5ef" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">使用DVC(数据版本控制)</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lh"><img src="../Images/5a84c924cc0a0018d606a33680fd7865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02kpc7lxx8nY6AML1VwCDQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx translated">数据版本控制工作流</figcaption></figure><p id="486e" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">DVC或数据版本控制是一个类似git的版本控制软件或库，它使用Git作为主干来创建数据集版本[3]。根据上面的图片，我们可以看到DVC的工作流程。首先，我们需要将文件添加到DVC，然后DVC将为这些文件创建元数据。这些元数据将被提交给git，并用于数据版本控制。DVC的有趣之处在于，我们可以使用云提供商，如S3、Azure、Google Cloud，甚至Google Drive作为我们的数据存储库(在实现中，我们将在Github中存储源代码，在Google Drive中存储大量数据)。像Git一样，我会给你一个非常简单的教程来开始你的本地DVC。</p><h1 id="cce4" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">安装DVC</h1><p id="5541" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">你可以通过这个链接下载DVC(<a class="ae kw" href="https://dvc.org" rel="noopener ugc nofollow" target="_blank">https://dvc.org</a>)。如果你是macOS用户或者Linux用户，可以通过brew或者apt安装。安装完成后，使用下面的命令确保它正常工作。安装完成后，我们希望在本教程中使用我们的“your_repository”存储库。您需要使用Git教程将目录更改为“your_repository”文件夹，然后初始化DVC。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="2754" class="lc if hh ky b fi ld le l lf lg">$ brew install dvc<br/>$ dvc --version</span></pre><p id="683e" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">安装完成后，我们希望在本教程中使用我们的“your_repository”存储库。您需要使用Git教程将目录更改为“your_repository”文件夹，然后初始化DVC。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="1fb7" class="lc if hh ky b fi ld le l lf lg">$ dvc init</span></pre><p id="9f2d" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">之后，您可以使用git提交更改。</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="78de" class="lc if hh ky b fi ld le l lf lg">$ git status<br/>Changes to be committed:<br/>        new file:   .dvc/.gitignore<br/>        new file:   .dvc/config<br/>        ...<br/>$ git add .<br/>$ git commit -m "Initialize DVC"</span></pre><p id="8c89" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">下一步是创建任何大型数据集文件或将其复制到“your_repository”文件夹中。(在本例中，我将创建一个空的CSV文件)</p><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="cdce" class="lc if hh ky b fi ld le l lf lg">$ touch dataset.csv<br/>$ dvm add dataset.csv<br/>$ git add .<br/>$ git commit -m "Add dataset"</span></pre><p id="de66" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">恭喜，您已经为数据集添加了版本控制。</p><h1 id="244b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">添加远程云存储</h1><p id="be30" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">如果我们只在本地计算机中存储数据集的版本，这种体验是不方便的。我们的项目会变得越来越大，所以我们需要与其他工程师分享我们的数据集。我们将添加远程云存储，将我们的数据保存在云中，以便其他人可以访问和提取它。首先，你可以在你的Google Drive内部创建一个新的文件夹，然后你可以从URL中复制文件夹ID。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es li"><img src="../Images/c685c1b5bd04ac4aa6e1415fc57e5075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UvLkChy9FcrQ1ME20DUWsQ.png"/></div></div></figure><pre class="jd je jf jg fd kx ky kz la aw lb bi"><span id="99c2" class="lc if hh ky b fi ld le l lf lg">$ dvc remote add -f --default myremote gdrive://&lt;your folder id&gt;                                                                                             <br/>$ git add .dvc/config<br/>$ git commit -m "Configure remote storage"</span></pre><p id="a7ac" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">之后，您可以提交配置文件，并开始将数据集推送到您的Google Drive存储。您的文件将出现在您的文件夹目录中，您可以随时随地提取它们。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lj"><img src="../Images/b0f198265a976d95f76aef18daba07c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdSUrBPbXAttChdvL3gM8w.png"/></div></div></figure><p id="7c28" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">最后的话</p><p id="4089" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">你的机器学习项目会变得更大，你会邀请其他工程师来贡献和合作。Git和DVC是很好的工具，可以让我们确保项目中的每个人同时拥有相同的代码和数据集状态。</p><h1 id="240d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">参考</h1><p id="ce01" class="pw-post-body-paragraph js jt hh ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp ha bi translated">[1]:https://www . informationisbeautiful . net/visualizations/百万行代码</p><p id="7487" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">[2]:https://git-scm.com/doc</p><p id="5a91" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">[3]:https://dvc.org</p></div></div>    
</body>
</html>