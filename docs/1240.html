<html>
<head>
<title>Linear Programming/Optimization in Finance using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行金融领域的线性规划/优化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/linear-programming-optimization-in-finance-using-python-8d1e04b5815?source=collection_archive---------11-----------------------#2021-02-21">https://medium.com/analytics-vidhya/linear-programming-optimization-in-finance-using-python-8d1e04b5815?source=collection_archive---------11-----------------------#2021-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/19ba2e7815a82e46deb5093813f351b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*M8qG6026SMyv8F1lS2WGPg.png"/></div></figure><p id="9d03" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不是博客，只是给自己写笔记:-)</p><p id="2ccd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在大多数财务模型中，我们有一个线性或二次优化器，需要在特定的约束条件下相应地最大化或最小化。</p><p id="8d44" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在CAPM模型中，我们假设模型是线性的，并使用Python中的回归求解预期股票价格。</p><p id="26e3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，在最后的这个<a class="ae jk" rel="noopener" href="/analytics-vidhya/portfolio-construction-using-efficient-frontier-optimization-b00f294e6c81">博客</a>中，二次优化器的目标是在某些约束条件下最小化波动性</p><p id="7fcf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">随着我们投资组合中股票数量的增加，也引入了某些限制。</p><p id="bde0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">线性优化通过关注回报最大化和波动性最小化来帮助我们克服投资组合分配的问题。</p><p id="a629" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些目标通常受特定法规的约束，例如禁止卖空规则、投资股票数量的限制等等</p><p id="907e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">大多数优化问题都是通过使用线性规划来解决的</p><p id="04fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">线性规划是一套数学和计算工具，让你找到一个特定的解决方案，这个系统对应的最大值或最小值的一些其他线性函数。</p><p id="bff1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">还记得以前在数学课上，我们曾经通过求解多个线性方程来找到X的值吗？类似地，我们将通过使用Python编写的线性编程库来解决这些相同的问题</p><p id="9b7e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有许多可用的Python库，例如</p><ul class=""><li id="55d8" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated"><a class="ae jk" href="https://docs.scipy.org/doc/scipy/reference/optimize.html" rel="noopener ugc nofollow" target="_blank"> SciPy优化和寻根</a></li><li id="92c2" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated"><a class="ae jk" href="https://www.coin-or.org/PuLP/solvers.html" rel="noopener ugc nofollow" target="_blank">纸浆</a></li><li id="f5ab" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated"><a class="ae jk" href="https://pyomo.readthedocs.io/en/stable/solving_pyomo_models.html#supported-solvers" rel="noopener ugc nofollow" target="_blank"> Pyomo </a></li><li id="80bd" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated"><a class="ae jk" href="https://cvxopt.org/userguide/coneprog.html#optional-solvers" rel="noopener ugc nofollow" target="_blank"> CVXOPT </a></li></ul><p id="1e61" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将使用纸浆包装来解决我们的问题</p><p id="1f27" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从一个小例子开始</p><blockquote class="jz ka kb"><p id="50dd" class="im in kc io b ip iq ir is it iu iv iw kd iy iz ja ke jc jd je kf jg jh ji jj hb bi translated">假设我们对投资两只股票X和Y感兴趣。我们希望找出每5个单位的股票X和2个单位的股票Y的实际投资单位数，以便使投资单位总数最大化</p></blockquote><p id="51dd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然而，我们的投资策略存在某些限制:</p><p id="080a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每投资2单位股票X和1单位股票Y，总数量不得超过100</p><p id="7c94" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于投资的每单位股票X和Y，总数量不得超过80</p><p id="7326" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">允许投资于证券X的总量不得超过40</p><p id="7d64" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">两种证券都不允许卖空</p><p id="aa95" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最大化问题可以用数学方法表示如下:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="357a" class="kp kq hi kl b fi kr ks l kt ku">Maximize: f(x,y) = 5x+2y&lt;=100<br/>Subject to :</span><span id="9834" class="kp kq hi kl b fi kv ks l kt ku">2x + y &lt;=100</span><span id="b399" class="kp kq hi kl b fi kv ks l kt ku">x + y &lt;=80</span><span id="3be5" class="kp kq hi kl b fi kv ks l kt ku">x &lt;=40</span><span id="2d61" class="kp kq hi kl b fi kv ks l kt ku">x &gt;=0, y &gt;= 0</span></pre><p id="0dc5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用纸浆包装可以解决上述问题</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/cc7771e1b1f913b3c86abb498282f016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgqO0yKayycHEzLKXD3W7w.png"/></div></div></figure><p id="6f10" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在上面的问题中，我们已经被允许是连续的或分数的。使用分数值或结果不现实怎么办？这个问题被称为线性整数规划问题，其中所有的变量都被限制为整数。整数变量的一个特例是二进制变量，它可以是0也可以是1。</p><p id="0ec0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在给定一组选择的情况下，二元变量对于建立决策模型特别有用。</p><blockquote class="jz ka kb"><p id="de54" class="im in kc io b ip iq ir is it iu iv iw kd iy iz ja ke jc jd je kf jg jh ji jj hb bi translated">假设我们必须从三个经纪人那里购买150份特殊的场外股票合约。经纪人X每份合约报价500卢比，外加手续费4000卢比，不考虑卖出多少份合约。经纪人Y收取每份合同350卢比，外加2000卢比的交易费。经纪人Z每份合同收取450卢比，外加6000卢比的手续费。经纪人X最多卖出100份合约，经纪人Y最多卖出90份合约，经纪人Z最多卖出70份合约。任何经纪人的最小交易量是30份合约，如果有任何合约与该经纪人交易的话。应该如何最小化购买150份合同的成本？</p></blockquote><p id="c3b4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们来淡化一下上面的问题</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="88c5" class="kp kq hi kl b fi kr ks l kt ku">How many brokers we have? </span><span id="abdf" class="kp kq hi kl b fi kv ks l kt ku">brokers = [“X”, “Y”, “Z”]</span><span id="0011" class="kp kq hi kl b fi kv ks l kt ku">What are the variable cost and fixed cost of these Brokers </span><span id="afb5" class="kp kq hi kl b fi kv ks l kt ku">variable_costs = {“X”: 500,<br/>                  “Y”: 350,<br/>                  “Z”: 450}<br/>fixed_costs = {“X”: 4000,<br/>               “Y”: 2000,<br/>               “Z”: 6000}</span></pre><p id="ddcb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以，我们有一个需要最小化的目标</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="620c" class="kp kq hi kl b fi kr ks l kt ku">Minimize ∑ (variable cost_i *quantity_i + fixed cost_i * IsOrder_i)</span></pre><p id="4e58" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">其中IsOrder {如果从经纪人I处购买则为1，如果不从经纪人I处购买则为0 }</p><p id="22bf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们的其他约束如下</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="b40e" class="kp kq hi kl b fi kr ks l kt ku">IsOrder_i × 30 ≤ quantityX ≤ IsOrder_i * 100</span><span id="03bf" class="kp kq hi kl b fi kv ks l kt ku">IsOrder_i × 30 ≤ quantityY ≤ IsOrder_i * 90</span><span id="9c71" class="kp kq hi kl b fi kv ks l kt ku">IsOrder_i × 30 ≤ quantityZ ≤ IsOrder_i * 70</span><span id="21df" class="kp kq hi kl b fi kv ks l kt ku">∑quantity_i =150</span></pre><p id="ad6d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用纸浆包装，我们可以定义我们的目标以及约束，并解决问题</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lb"><img src="../Images/f81942ad90047b996e9d055f67da533b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*is_Uy2Co7GDd-WJeuV3GqQ.png"/></div></div></figure></div></div>    
</body>
</html>