<html>
<head>
<title>Scraping Reddit data using Reddit API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Reddit APIæŠ“å–Redditæ•°æ®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/scraping-reddit-data-using-reddit-api-3eba4bd7a56a?source=collection_archive---------3-----------------------#2021-07-18">https://medium.com/analytics-vidhya/scraping-reddit-data-using-reddit-api-3eba4bd7a56a?source=collection_archive---------3-----------------------#2021-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="aa9e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»çŸ³æºªå¤§å­¦å­ç½‘ç«™æ”¶é›†<strong class="ak">çƒ­é—¨å¸–å­</strong> &amp; <strong class="ak">æ–°å¸–</strong>ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/db8a0d01f9ce949ceedf269ddba8d85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUAyU-VmtfoqmtbRtihWTQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">å¤§å£°å–Šå‡ºæ¥<a class="ae jn" href="https://unsplash.com/@brett_jordan" rel="noopener ugc nofollow" target="_blank">å¸ƒé›·ç‰¹Â·ä¹”ä¸¹</a></figcaption></figure><p id="513c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">é¦–å…ˆï¼Œ</strong></p><ul class=""><li id="75f2" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">å‚è§‚https://www.reddit.com/prefs/apps<a class="ae jn" href="https://www.reddit.com/prefs/apps" rel="noopener ugc nofollow" target="_blank"/></li><li id="169b" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">æ»šåŠ¨åˆ°æŒ‰é’®å¹¶ç‚¹å‡»:<strong class="jq hj">åˆ›å»ºåº”ç”¨</strong>æŒ‰é’®</li><li id="8468" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">æ¥ä¸‹æ¥ï¼Œæ ¹æ®æ‚¨çš„éœ€è¦å¡«å†™ä»»ä½•æ‰€éœ€çš„åç§°å’Œæè¿°ï¼Œç„¶åå•å‡»'<strong class="jq hj">åˆ›å»ºåº”ç”¨'</strong></li><li id="0c7e" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">è·å–â€œå¯†é’¥â€å’Œâ€œä¸ªäººä½¿ç”¨è„šæœ¬â€ä¿¡æ¯ã€‚</li><li id="7957" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">ç„¶åï¼Œæˆ‘ä»¬ç»§ç»­ä¸‹é¢çš„pythonä»£ç ã€‚</li></ul><p id="51a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç§˜å¯†= 12345ã€‚ä¸ªäººä½¿ç”¨è„šæœ¬= 'abcde '</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="3eb1" class="ld le hi kz b fi lf lg l lh li">secret_key = '12345'<br/>client_id = 'abcde'</span><span id="c4ed" class="ld le hi kz b fi lj lg l lh li"># pip install requests<br/>import requests</span></pre><p id="cd74" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">ä½¿ç”¨å®¢æˆ·ç«¯idå’Œå¯†é’¥è·å¾—æˆæƒ</strong></p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="7f3a" class="ld le hi kz b fi lf lg l lh li">auth = requests.auth.HTTPBasicAuth(client_id,secret_key)</span></pre><p id="925e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ç™»å½•ï¼Œä»¥ä¾¿è·å–ä¿¡æ¯ã€‚åˆå§‹åŒ–å­—å…¸ä»¥å­˜å‚¨ç™»å½•ä¿¡æ¯ï¼ŒæŒ‡å®šæˆ‘ä»¬å°†ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="6434" class="ld le hi kz b fi lf lg l lh li">login_data = {<br/>    'grant_type' : 'password',<br/>    'username' : 'XYZ',<br/>    'password' : 'MNO'<br/>}</span></pre><p id="c868" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šAPIçš„ç‰ˆæœ¬</strong></p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="d929" class="ld le hi kz b fi lf lg l lh li">headers = {'User-Agent': 'MyAPI/0.0.1'}</span></pre><p id="91dd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘é€ä¸€ä¸ªå¯¹OAuthä»¤ç‰Œçš„è¯·æ±‚ï¼Œå½“ä½¿ç”¨APIæ—¶ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„å¤´ä¸­ä½¿ç”¨å®ƒ</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="dd8b" class="ld le hi kz b fi lf lg l lh li">response = requests.post('https://www.reddit.com/api/v1/access_token',auth=auth,data=login_data, headers=headers)<br/>response.json()</span><span id="4325" class="ld le hi kz b fi lj lg l lh li">token = response.json()['access_token']</span><span id="14dc" class="ld le hi kz b fi lj lg l lh li">headers = {**headers, **{'Authorization': f'bearer {token}'}}<br/>headers</span></pre><h2 id="574d" class="ld le hi bd lk ll lm ln lo lp lq lr ls jx lt lu lv kb lw lx ly kf lz ma mb mc bi translated">æœ€åï¼Œæœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®Reddit APIä¸­çš„æ¯ä¸ªç«¯ç‚¹ã€‚</h2><p id="8134" class="pw-post-body-paragraph jo jp hi jq b jr md ij jt ju me im jw jx mf jz ka kb mg kd ke kf mh kh ki kj hb bi translated">è®©æˆ‘ä»¬åˆ†åˆ«ä»SBU subredditæŸ¥çœ‹çƒ­é—¨å¸–å­å’Œæ–°å¸–å­ï¼Œå¹¶æ”¶é›†50ä¸ªå¸–å­ä¿¡æ¯</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="ae4d" class="ld le hi kz b fi lf lg l lh li">res_hot = requests.get('https://oauth.reddit.com/r/SBU/hot',headers=headers,params={'limit':'50'})<br/>res_new = res = requests.get('https://oauth.reddit.com/r/SBU/new',headers=headers,params={'limit':'50'})</span></pre><p id="02c9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç”¨è¿™ä¸ªæ¥çœ‹çœ‹è¿™äº›è®¨åŒçš„æ•°æ®ï¼Œå› ä¸ºæ–‡ç« é•¿åº¦çš„åŸå› ï¼Œæˆ‘æ²¡æœ‰å±•ç¤ºç»“æœ</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="2412" class="ld le hi kz b fi lf lg l lh li">res_hot.json()</span><span id="4640" class="ld le hi kz b fi lj lg l lh li"># Moving on to the next procedure...</span><span id="7cff" class="ld le hi kz b fi lj lg l lh li"># pip install pandas<br/>import pandas as pd<br/>from datetime import datetime</span><span id="74a4" class="ld le hi kz b fi lj lg l lh li">post = res_hot.json()['data']['children'][0]<br/>[i for i in post['data'].keys()]</span><span id="85be" class="ld le hi kz b fi lj lg l lh li"># Following is the items we can access:</span><span id="6f45" class="ld le hi kz b fi lj lg l lh li">['approved_at_utc',<br/> 'subreddit',<br/> 'selftext',<br/> 'author_fullname',<br/> 'saved',</span><span id="ce3b" class="ld le hi kz b fi lj lg l lh li">   .<br/>   .<br/>   .</span><span id="57ad" class="ld le hi kz b fi lj lg l lh li"> 'subreddit_subscribers',<br/> 'created_utc',<br/> 'num_crossposts',<br/> 'media',<br/> 'is_video']</span></pre><h1 id="f4e4" class="mi le hi bd lk mj mk ml lo mm mn mo ls io mp ip lv ir mq is ly iu mr iv mb ms bi translated">æ£€æŸ¥æ­¤å­ç¼–è¾‘ä¸­çš„æ–°å¸–å­</h1><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="1144" class="ld le hi kz b fi lf lg l lh li">df_hot_posts = pd.DataFrame()<br/>for post in res_hot.json()['data']['children']:<br/>    df_hot_posts = df_hot_posts.append(<br/>                           {'subreddit' : post['data']['subreddit'],<br/>                 'author_fullname': post['data']['author_fullname'],<br/>   'created at': datetime.utcfromtimestamp(post['data']['created']),<br/>                                     'title': post['data']['title'],<br/>                               'selftext': post['data']['selftext'],<br/>                       'upvote_ratio': post['data']['upvote_ratio'],<br/>                      'Post ID':post['kind']+'_'+post['data']['id']<br/>                            }, ignore_index=True)</span></pre><p id="bda9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç”¨è¿™ä¸ªæ£€æŸ¥æ‰€æœ‰çš„æ ‡é¢˜</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="8ed0" class="ld le hi kz b fi lf lg l lh li">[[i] for i in df_hot_posts['title']]</span><span id="2cc5" class="ld le hi kz b fi lj lg l lh li"># next..</span><span id="66e4" class="ld le hi kz b fi lj lg l lh li">df_hot_posts.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="ab fe cl mt"><img src="../Images/8c5661d995fd8da69e556a55a70c4eef.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-ZJ1R7MYNvdwETP79n820A.png"/></div></figure><h1 id="4e80" class="mi le hi bd lk mj mk ml lo mm mn mo ls io mp ip lv ir mq is ly iu mr iv mb ms bi translated">æ£€æŸ¥æ­¤å­ç¼–è¾‘ä¸­çš„æ–°å¸–å­</h1><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="3914" class="ld le hi kz b fi lf lg l lh li">df_new_posts = pd.DataFrame()<br/>for post in res_new.json()['data']['children']:<br/>    df_new_posts = df_new_posts.append(<br/>                           {'subreddit' : post['data']['subreddit'],<br/>                 'author_fullname': post['data']['author_fullname'],<br/>   'created at': datetime.utcfromtimestamp(post['data']['created']),<br/>                                     'title': post['data']['title'],<br/>                               'selftext': post['data']['selftext'],<br/>                       'upvote_ratio': post['data']['upvote_ratio'],<br/>                      'Post ID':post['kind']+'_'+post['data']['id']<br/>                            }, ignore_index=True)</span><span id="96ad" class="ld le hi kz b fi lj lg l lh li">df_new_posts.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="ab fe cl mt"><img src="../Images/e6e0bff6be599784558b4056e8bcd7b1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*db0yCXY79flv0Std8ENYTA.png"/></div></figure><p id="41b5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">çœ‹çœ‹æ‰€æœ‰çš„æ ‡é¢˜</p><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="e2d4" class="ld le hi kz b fi lf lg l lh li">[ [i] for i in df_new_posts['title']]</span></pre><h1 id="2b4b" class="mi le hi bd lk mj mk ml lo mm mn mo ls io mp ip lv ir mq is ly iu mr iv mb ms bi translated">ä»¥CSVæ ¼å¼å­˜å‚¨æ•°æ®</h1><pre class="iy iz ja jb fd ky kz la lb aw lc bi"><span id="5b33" class="ld le hi kz b fi lf lg l lh li">pwd()</span><span id="6f39" class="ld le hi kz b fi lj lg l lh li">'/Users/nilsonchapagain/Desktop/Blogs'</span><span id="4eff" class="ld le hi kz b fi lj lg l lh li">df_hot_posts.to_csv('/Users/nilsonchapagain/Desktop/Blogs/data/sbu_hot_post.csv', index=False)</span><span id="a8ed" class="ld le hi kz b fi lj lg l lh li">df_new_posts.to_csv('/Users/nilsonchapagain/Desktop/Blogs/data/sbu_new_post.csv', index=False)</span></pre><h2 id="c67f" class="ld le hi bd lk ll lm ln lo lp lq lr ls jx lt lu lv kb lw lx ly kf lz ma mb mc bi translated">è°¢è°¢ä½ çœ‹æˆ‘çš„å¸–å­ã€‚æˆ‘å¸Œæœ›ä½ å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿*ğŸ™Œ ğŸ‰</h2></div></div>    
</body>
</html>