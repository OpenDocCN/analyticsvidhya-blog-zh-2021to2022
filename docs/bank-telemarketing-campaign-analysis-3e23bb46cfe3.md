# 银行电话营销活动分析

> 原文：<https://medium.com/analytics-vidhya/bank-telemarketing-campaign-analysis-3e23bb46cfe3?source=collection_archive---------4----------------------->

## 分析数据以建立机器学习模型

![](img/f454925cceb322b8c5d4c2fd413553c7.png)

今天，我们将讨论我的第一个项目，我做的第一个迭代是根据客户的信息预测他/她是否会订阅定期存款，并计算出这将如何发生。

我从 [UCI 机器学习库](https://archive.ics.uci.edu/ml/index.php)得到这个数据集，这个数据集可以从这篇文章 [Moro 等人，2014](https://core.ac.uk/download/pdf/55631291.pdf) 中得到，这篇文章使用了其他种类的工具来预测订阅。他们使用 R 作为编程语言，模型评估的指标是曲线下面积(AUC)和提升分析，其中包括绘制人口的累积十分位数与真实答案的累积百分比的曲线，曲线下面积(ALIFT)是另一个评估的指标。

所以，像往常一样，我将使用 python，作为我的编程语言，使用我们都熟悉的所有有趣的 jupyter 笔记本、pandas 和 seaborn extravaganza，对于这第一次迭代，我将只是看一下这些数据，看看在用一些机器学习模型实际处理它之前我能提取什么信息，并建立那个了不起的仪表板，以便我们能更容易地访问这些数据，选择的仪表板工具是 streamlit，这是我在飞行中发现和学习的，请看。

你可以在这里查看代码。

## 那么，这个挑战的数据是什么？

所以，从网页上下载数据，我得到了 3 个文件，一个包含所有条目，45211 代表完整信息，4521 代表样本信息，根据作者的说法，这种分离是由于使用了更重的处理算法，比如如果你想使用支持向量机，你可能想使用这个更小的集合，另一个。txt 文件，其中包含关于数据集的一些一般信息。

因此，也有更多的数据集可用，银行额外的数据集，这些数据集包含一个较小的人口，41188，但更重要的是，更多的功能，这意味着什么？我们的模型需要更多的变量，因此标准银行数据集的内容中包含 17 个变量，没有缺失值，并且只涉及客户的银行信息，另外 3 个变量，总共 20 个，用于社会和经济背景信息，这里有一些缺失值，但目前，我试图只使用银行信息。

## 瞥一眼人群

![](img/0a2465dec8831f4adcfea5a636249d24.png)

首先，我们需要了解这些数据是如何与所有列一起分布的，乍一看，我看到了日列和月列，这是一项非常不愉快的任务，将这些列转换为日期格式的列，我在互联网上找到了一些方法来实现这一点，但是，这些方法非常复杂，所以，我采用了传统的方法。 打开谷歌表格，手动添加全年数值，这其实并不难，在数据集页面上显示的信息是从 2008 年到 2010 年。

> 注意:我花了很长时间试图解决这个问题，如果你想告诉我为什么我会在这里游荡，请留下你的评论。

在这个甜蜜的开始之后，并不那么甜蜜，我运行了一些基本的代码行来检查是否一切都在它的位置上，首先我看到 pdays 变量的值为-1，这妨碍了平均值和标准偏差的计算，因为这个值是这个特定的人在以前的活动中被联系的天数，而-1 是那些以前从未被任何活动联系过的人， 我把它改为 0，因为我计算了这一列中 0 的个数，讽刺的是，它也是 0，所以替换这个值不会很快来咬我，我现在很好。

在第一次治疗后，一切似乎都很好，我去做了一些频率计算，这是很多图表，就像一个视觉表现节，各种各样的一维图表，你可以想象 plotly express 和 seaborn 可以在一个像图表一样的条形图中表现出来。

## 数着正在发生的事情

所以我画了 42 张图表来观察这个数据点的外观，我决定遍历每个变量并告诉你那里发生了什么。为了更方便，我将源数据框架分成两个部分，yes_df 和 no_df，这样我们也可以通过对活动的响应看到人们的主要特征是什么，因此每列生成 3 个图表，一个更通用，每个答案一个。

*   **工作**

因此，工作变量是不言自明的，但它更多的是关于你的工作类型，而不是你实际做什么，它们有 12 个值，所有数据的前三个值依次是蓝领、管理和技术人员。现在，是的，排名前三的工作是管理、技术和蓝领，实际上对我来说很意外，但是还可以。不包括蓝领、管理人员和技术人员。

这些图表本身并不能告诉我们太多，但它们是很好的定性数据，可以让我们更多地了解银行拥有哪些类型的客户。

*   **年龄**

在这里，我认为我会看到三个图表中的一些变化，让我们看看会发生什么。

总体数据图表显示，我们的大多数客户年龄在 24 岁至 60 岁之间，总数值范围在 18 岁至 95 岁之间。

是的，图表显示了大多数客户范围内更多的分布值，但是，大多数积极因素都在 24-39 岁的人群中。

没有图表显示 29-30 岁之间有很大的差异，直到 60 年代，有很大的下降，因为 60-95 岁的人很少。

总而言之，这三个图形具有非常相似的形状，因此这是年龄和运动接受度之间低相关性的标志。

*   **教育**

所以教育有 4 个等级，未知，小学，中学，和大学，大多数人受过中学教育。

这里要注意的一点是各个阶层接受运动的比率，因为是的阶层，高等教育比中等教育多一点。

*   **默认**

所以，如果你不知道的话，违约是一个术语，指的是客户未能支付他/她所欠的任何债务，即使有些款项没有支付。就整体数据而言，违约的客户数量非常少。

*   **住房**

在这个数据集中，住房意味着如果有人贷款买房，这里事情变得更有趣了。在所有人群中，有住房贷款的客户较多。

但是，如果我们只分析对活动说“是”的人，我们会看到一个转变，没有住房贷款的人更倾向于说“是”，这是合理的，但看到这种转变是非常有趣的。

*   **贷款**

所以这个变量意味着如果某人有个人贷款，除了住房贷款，看最后一个变量，这应该有或多或少相同的行为，对吗？是的，事实上，大多数人没有个人贷款。

*   **联系人**

这个变量告诉我们如何与客户取得联系，并得到了 3 类，未知，手机和电话，因为是一个电话营销活动。同样，所有的图表都有相同的轮廓，但是，在“是”人群中，更多的顾客通过手机联系。

*   **撅嘴**

此变量是关于此特定客户之前的营销活动的成功程度，它假设了 4 个级别:未知、失败、其他和成功。总体数据更多的是关于未知的结果。

虽然，是的，人口有更高的失败和成功的比率，后者是很容易理解的，但第一个也很令人惊讶地显示了这种增长与人口的相关性。

*   **先前的**

以前的数据意味着与该特定客户发生了多少次联系，首先，大多数人以前从未被联系过，这解释了我们之前看到的许多未知类别，这种趋势适用于所有图表。

*   **持续时间**

这个变量衡量最后一次通话的时间，大多数人都在 0 到 400 秒之间，我注意到这里唯一不同的是“是”图中缺失值的数量，这是一个巧合，最快的“是”通话是 8 秒，我不知道是谁打的电话，但知道是哪个销售人员。

这个变量还有更多，但是我们在这里训练一些模型时会更多地讨论它。

*   **活动**

这衡量了本次活动和某个特定客户的联系人数，它具有相同的图表轮廓，所以差不多就是这样，大多数人在本次活动中最多被联系了 5 次。

*   **上次联系日期**

这里有一个有趣的功能，所以，当我下载数据集时，它有两件事吸引了我的注意，首先，数据是按时间顺序排列的，其次，两个功能日和月，表示与那个人最后一次联系发生的时间，在这个数据集中制作一个日期变量是很自然的，但以我的 python 知识，这不是一件容易的事情。

所以，当一切都准备就绪，绘制出一段时间内的结果后，我不禁发现，每天打电话的次数和对活动的肯定程度之间存在某种关联，你可以在几英里之外嗅到这一点，但这里我们有这种行为的表现，发现这种关系到底有多糟糕呢？我们的结果将如何与每天的呼叫次数和分类模型的预测之间的动态关系联系起来？一些更具商业眼光的人会问，这些问题很有趣，但这是以后的话题。

*   **Pdays**

这个变量几乎是最后一个，因为它没有图，是的，超过 75%的数据集以前没有接触过另一个活动，因此，没有天数来计算差异。但是一个奇怪的行为，在网站上说，999 意味着以前没有联系，但是，在实际的数据集中是-1，所以要小心。

*   **y**

这是我们的目标，所以计算是和否的数量表明，人们对否的态度非常不平衡，这可以从电话营销活动中预料到实际上，我的意思是，我不太喜欢在一天当中被打电话询问定期存款，但有些人喜欢。

## 这些变量之间有多大关联？

因此，对于这一部分，我决定尝试找到一维以上的图形，为此我用 seaborn 在热图中绘制了相关矩阵，结果不是很好，这些数字变量中的大多数根本不相关。

但是，在日期和年份之间有一点相关性，所以我画了散点图，实际上是一个非常奇怪的图，这里肯定有一个趋势，但是很弱，我不确定是否值得一提，因为首先，最多有 25%的人口有相关性，如果我们想看到任何相关性，这是一个非常低的样本，也不是非常随机的。

## 结论

![](img/561cff98213bca8f8891556d6a1d33d0.png)

如果你读到这里，谢谢你，我很感激你喜欢我的内容，这一部分将是学习、信息和期望的混合体。

首先，学习，我从来没有想到在准备好东西之前，要花这么多时间做所有这些事情，思考、解释、处理工具这么多次。另一点是，写下我正在做的事情非常有帮助，比如，很多次我发现自己在想‘等等，这是真的吗？’或者在我写作的时候有了别的想法，所以写出作品，很好。

我们现在对这些数据了解多少？嗯，这是非常不平衡的，不仅仅是对于 nos，而是在所有方面，我们看到了许多部分，一个类仅仅是变量中所有其他类的总和，为什么这很重要？如果我们想用这个数据集训练一个模型，我今天会说，让这个模型学习谁会对这个活动说不可能会更好，反正说不的人有很多可变性，但让我们看看我如何克服这个问题。

而且，希望我的应用程序应该在周一在 streamlit 上发布，因为我读了很多关于如何制作应用程序的书，但当你把手弄脏时，伙计，就完全是另一回事了。在训练一些模型时，我可能一开始不会寻找 ALIFT 和 AUC 分析，我想看看这与更常规的分类指标(如混淆矩阵等)的关系。

请记住，我并没有停止使用好的指标，我的这个项目的目的是实际计算一个模型在生产时会有多好，就像一些真实的业务指标一样，但这是未来，现在，保持安全，小心谨慎。