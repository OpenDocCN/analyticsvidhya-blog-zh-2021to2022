<html>
<head>
<title>Using Natural Language Processing in Python to Conduct Your Own Social Listening</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的自然语言处理来进行你自己的社交倾听</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-natural-language-processing-in-python-to-conduct-your-own-social-listening-f0e6bda47aee?source=collection_archive---------6-----------------------#2021-04-08">https://medium.com/analytics-vidhya/using-natural-language-processing-in-python-to-conduct-your-own-social-listening-f0e6bda47aee?source=collection_archive---------6-----------------------#2021-04-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/708981b465e5793a013affc613d9a067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KD4Ua9ElYtXMPoMOCrSzWw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:KM&amp;A</figcaption></figure><p id="83b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">近年来，我们已经看到越来越多的企业不仅使用社交媒体与消费者互动，还利用这些数据更好地为他们的商业决策提供信息。具体到营销，社交倾听已经成为广告商的解决方案。</p><p id="3a7a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">什么是社交倾听？根据提供社交倾听服务的营销公司Hootsuite的说法，品牌的社交倾听是“跟踪、分析和回应社交媒体上关于他们的对话的机会。”然而<a class="ae js" href="https://sproutsocial.com/social-listening/" rel="noopener ugc nofollow" target="_blank">的另一个社交倾听工具</a>将它定义为“分析不仅仅围绕你的品牌，而是围绕你的整个行业的对话和趋势。”为了我们的例子，我们将使用前一个定义，并采取更微观的方法来进行社交倾听。</p><p id="a9a2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将使用来自Kaggle的这个<a class="ae js" href="https://www.kaggle.com/kavita5/twitter-dataset-avengersendgame" rel="noopener ugc nofollow" target="_blank">#复仇者联盟</a> Twitter数据集。</p><p id="b5b7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步:导入</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="fb47" class="kc kd hi jy b fi ke kf l kg kh">#imports<br/>import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>from sklearn.feature_extraction.text import CountVectorizer, TfidfVectorizer<br/>from nltk.sentiment.vader import SentimentIntensityAnalyzer</span></pre><p id="1afd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将使用的两个主要NLP工具是Sklearn的CountVectorizer(或TfidfVectorizer)和NLTK的SentimentIntensityAnalyzer。</p><p id="4803" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步:设置数据</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="2a9a" class="kc kd hi jy b fi ke kf l kg kh"># read into data<br/>tweets = pd.read_csv('tweets.csv')</span><span id="fc99" class="kc kd hi jy b fi ki kf l kg kh"># drop columns as needed<br/>tweets = tweets.drop(columns=['Unnamed: 0', 'favorited', 'favoriteCount', 'replyToSN','replyToSID', 'statusSource','truncated', 'id', 'replyToUID', 'longitude', 'latitude'])</span><span id="d1f0" class="kc kd hi jy b fi ki kf l kg kh"># check data<br/>tweets</span></pre><p id="103f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">输出应该如下所示:</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/73996a50ba8ac3e16daba5feec4c41e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZTFMnaelT6Pxn7x0qlO4w.png"/></div></div></figure><p id="e4e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步:计数矢量器</strong></p><p id="956a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">CountVectorizer将文本转换为向量，并计算每行文本中某个单词出现的次数。TfidfVectorizer也将文本转换为向量，但它不是使用由整数表示的词频，而是通过每个词在数据中出现的频率来计算它们的权重，这由浮点数表示。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e373" class="kc kd hi jy b fi ke kf l kg kh"># instantiate CountVectorizer with stop_words parameter<br/>cvec = CountVectorizer(stop_words='english')</span><span id="5594" class="kc kd hi jy b fi ki kf l kg kh"># fit cvec to text column<br/>cvec.fit(tweets['text'])</span><span id="0a10" class="kc kd hi jy b fi ki kf l kg kh"># transform text column<br/>text_cvec = cvec.transform(tweets['text'])</span><span id="766a" class="kc kd hi jy b fi ki kf l kg kh"># create dataframe with the transformed vectors<br/>df = pd.DataFrame(text_cvec.todense(),<br/>                 columns = cvec.get_feature_names())</span><span id="e00b" class="kc kd hi jy b fi ki kf l kg kh"># view results<br/>df</span></pre><p id="32e7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">以CountVectorizer为例，输出应该如下所示:</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/8ef00fd0c97a10a46b2b5cc30a8f76ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dWfQp989H5x_-xQvMduDQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由于我们没有专注于清洁，我们看到了许多奇怪的矢量创建。如果我们建立一个模型，这些可以用超参数剔除。</figcaption></figure><p id="818e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步:可视化最常用的单词</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4c44" class="kc kd hi jy b fi ke kf l kg kh"># set image size<br/>plt.figure(figsize=(15,7))</span><span id="4aac" class="kc kd hi jy b fi ki kf l kg kh"># plot top 30 most frequent words<br/>df.sum().sort_values(ascending=False).head(30).plot(kind='barh')<br/>plt.title("Most Frequent Words (Excluding Stop Words)")</span></pre><p id="0b37" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">输出:</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/9bb60dfd2f3f5d7b5d0efa47485a8533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9B1n1ZeXtemZUw0-MGorQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">毫不奇怪，核心标签之外最常见的词是:漫威，复仇者联盟。美国队长/克里斯·埃文斯和斯嘉丽·约翰逊都是热门话题。</figcaption></figure><p id="63e1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第四步:情感分析</strong></p><p id="6672" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们正在利用NLTK包中的SentimentIntensityAnalyzer。这将输出一个正数、中性、负数和复合分数。正面情绪由正整数表示，负面情绪由负整数表示，而中性情绪得分为0。我们将只查看每条推文的复合(整体)得分。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e3fe" class="kc kd hi jy b fi ke kf l kg kh"># instantiate sentiment analysis<br/>sentiment = SentimentIntensityAnalyzer()</span><span id="59bd" class="kc kd hi jy b fi ki kf l kg kh"># create an empty list for sentiment scores<br/>sentiment_list = []</span><span id="c745" class="kc kd hi jy b fi ki kf l kg kh"># loop through each tweet and calculate overall sentiment score, then append to the list above<br/>for i in tweets['text']:<br/>    score = sentiment.polarity_scores(i)['compound']<br/>    sentiment_list.append(score)</span><span id="5dea" class="kc kd hi jy b fi ki kf l kg kh"># create a new column in tweets dataframe that has the sentiment scores<br/>tweets['sentiment'] = sentiment_list</span><span id="826d" class="kc kd hi jy b fi ki kf l kg kh"># view results<br/>tweets.head()</span></pre><p id="8477" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">输出应该是这样的(最右边的新情绪栏):</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/45f52e47c900546ad8f1756158f81e0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cD-Ci7DGJqj4ieFyZtgc7g.png"/></div></div></figure><p id="37bd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">步骤5:将计数矢量器与情感分析相结合</strong></p><p id="a6a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们来看看推文中情绪得分为<em class="kn">正值</em>的热门词汇。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3ebe" class="kc kd hi jy b fi ke kf l kg kh"># create new dataframe with positive sentiment tweets<br/>positives = tweets[tweets['sentiment'] &gt; 0]</span><span id="e454" class="kc kd hi jy b fi ki kf l kg kh"># instantiate CountVectorizer with stop_words parameter<br/>cvec_pos = CountVectorizer(stop_words='english')</span><span id="00c2" class="kc kd hi jy b fi ki kf l kg kh"># fit cvec to text column<br/>cvec_pos.fit(positives['text'])</span><span id="430b" class="kc kd hi jy b fi ki kf l kg kh"># transform text column<br/>text_cvec_pos = cvec_pos.transform(positives['text'])</span><span id="e5ad" class="kc kd hi jy b fi ki kf l kg kh"># create dataframe with the transformed vectors<br/>df_pos = pd.DataFrame(text_cvec_pos.todense(),<br/>                 columns = cvec_pos.get_feature_names())</span><span id="1516" class="kc kd hi jy b fi ki kf l kg kh"># set image size<br/>plt.figure(figsize=(15,7))</span><span id="faf7" class="kc kd hi jy b fi ki kf l kg kh"># plot top 30 most frequent words<br/>df_pos.sum().sort_values(ascending=False).head(30).plot(kind='barh')<br/>plt.title("Most Frequent Words in Positive Tweets")</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/019492c6c27efe8d78a5c4f04fdc34fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l-2YvP54209sGL0KIrygFQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">除了核心术语之外，正面推文中最常见的一些词是:originalfunko、ironman、robertdowneyjr、captainmarvel。</figcaption></figure><p id="0851" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们来看看情绪得分为<em class="kn">负</em>的推文中的热门词汇。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7d46" class="kc kd hi jy b fi ke kf l kg kh"># create new dataframe with negative sentiment tweets<br/>negatives = tweets[tweets['sentiment'] &lt; 0]</span><span id="96ee" class="kc kd hi jy b fi ki kf l kg kh"># instantiate CountVectorizer with stop_words parameter<br/>cvec_neg = CountVectorizer(stop_words='english')</span><span id="b6e7" class="kc kd hi jy b fi ki kf l kg kh"># fit cvec to text column<br/>cvec_neg.fit(negatives['text'])</span><span id="5859" class="kc kd hi jy b fi ki kf l kg kh"># transform text column<br/>text_cvec_neg = cvec_neg.transform(negatives['text'])</span><span id="e5aa" class="kc kd hi jy b fi ki kf l kg kh"># create dataframe with the transformed vectors<br/>df_neg = pd.DataFrame(text_cvec_neg.todense(),<br/>                 columns = cvec_neg.get_feature_names())</span><span id="dd86" class="kc kd hi jy b fi ki kf l kg kh"># set image size<br/>plt.figure(figsize=(15,7))</span><span id="d147" class="kc kd hi jy b fi ki kf l kg kh"># plot top 30 most frequent words<br/>df_neg.sum().sort_values(ascending=False).head(30).plot(kind='barh')<br/>plt.title("Most Frequent Words in Negative Tweets")</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/84e2224d57cf39a323da18eed2b7a190.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ipBH5WAwfbn1RjB_AIINfw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">除了核心术语之外，负面推特中最常见的一些词是:哭了，克里斯·埃文斯，海姆斯沃斯，塔诺斯，失败。</figcaption></figure><p id="d521" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">结论</strong></p><p id="e96d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">梳理所有的推文，我们发现克里斯·埃文斯/美国队长是电影中最受欢迎的话题之一。当专门查看积极情绪的推文时，小罗伯特·唐尼/铁人是最受欢迎的话题之一。对于负面情绪的推文，“哭了”是最常见的关键词，其次是“克里斯·埃文斯”(没有剧透)、“thanos”和“失败”。从这个分析中，我们可以为观众推断出电影中最激动人心的时刻，既有快乐的也有悲伤的。</p></div></div>    
</body>
</html>