<html>
<head>
<title>Data Storytelling to help in your analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据讲故事，帮助您进行分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-storytelling-to-help-in-your-analysis-2da96811d91?source=collection_archive---------0-----------------------#2022-01-03">https://medium.com/analytics-vidhya/data-storytelling-to-help-in-your-analysis-2da96811d91?source=collection_archive---------0-----------------------#2022-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="11ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我想展示一下《用数据讲故事》这本书如何帮助我构建图表，以便将复杂的数据集转化为文本、数字和图形。</p><p id="537a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你有两个图形在下面展示这本书如何让我跳出思维定势。第一个是我在阅读之前做的图形，第二个是在阅读之后做的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/4a87f6e23a71685fb7802fb6ed42caea.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*yyeXm_9RibzY_ZZA9_EaBw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图1。截至2021年3月，新冠肺炎死亡人数最多的五个国家。作者塑造的形象</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/40735301635fd3d1e215b89b9e958a74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNmClcgK7aieI2iU3hydiw.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图2。截至2021年12月8日，新冠肺炎死亡人数最多的五个国家。作者塑造的形象。</figcaption></figure><p id="5327" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这本书的理念带来了如何传递数据集中的信息更直接和毫不费力地给观众，干净和清晰的图表。</p><p id="2ed8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">书中有一节解释了<strong class="ih hj">视知觉的格式塔原理</strong>，它们是:</p><ul class=""><li id="ac18" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><strong class="ih hj">邻近度</strong></li><li id="3613" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">近似值</strong></li><li id="988b" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">相似度</strong></li><li id="a5df" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">连续性</strong></li><li id="6680" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">关闭</strong></li><li id="9213" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">连接</strong></li></ul><p id="396c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将这些概念应用到图表中，将有助于观众更有效地理解信息并专注于所展示的内容。</p><p id="a171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用数据讲故事</strong>也让我们想到了如何将数据表达到不同的图表中，比如下图中的折线图，我在其中比较了新冠肺炎新增病例数对巴西和世界的影响:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ki"><img src="../Images/6b9c2417c93989690f57e0b10e216cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mD9dmDg63VPFtFZCMlUS9w.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图3。折线图。作者塑造的形象。</figcaption></figure><p id="2239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个非常有助于表达数据的概念是使用数字和文本来传递信息，而不是使用图表，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kj"><img src="../Images/d83dcb31a6e10bad3d8bb12a94e6864c.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*w5cLH27mqymzRlTDqnOE2Q.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图4。数字作为传递数据的方式。作者制作。</figcaption></figure><p id="dc5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们可以看到，这本书回报了所做的投资，这本书带给我的其中一个想法就是把数字和图表混合在一起。<br/>如图5所示，想法是表达2021年12月8日前接种疫苗的总人数，接下来是显示每个月全部接种疫苗的人的发展情况。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kk"><img src="../Images/61792861e21756a163ed66fbf599197e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n6V5tp_aVagSb-rPV20e8w.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图5。仪表板上显示的是截至12月8日的全部接种人数和该月的全部接种人数。作者制作。</figcaption></figure><p id="5d7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是时候解释数据集并制作一些图表了。我使用的数据集来自<a class="ae kl" href="https://github.com/owid/covid-19-data" rel="noopener ugc nofollow" target="_blank">我们的数据世界</a>的GitHub页面，在那里你可以找到关于数据集中存在的所有变量(列)的解释。现在有了明确的答案，让我们来看看我做的关于2021年12月8日之前全球新冠肺炎局势的项目。</p><p id="ed6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在展示构建图5中的图形的脚本之前，我们首先必须调用库来帮助提取、加载和转换数据，然后，探索数据集对我们来说是什么。</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="87f9" class="kr ks hi kn b fi kt ku l kv kw"><em class="kx"># Calling the libraries</em><br/><strong class="kn hj">import</strong> pandas <strong class="kn hj">as</strong> pd<br/><strong class="kn hj">import</strong> matplotlib.pyplot <strong class="kn hj">as</strong> plt<br/><strong class="kn hj">import</strong> seaborn <strong class="kn hj">as</strong> sns<br/><br/><em class="kx"># configuring the graphics</em><br/><strong class="kn hj">%</strong>matplotlib inline<br/>sns<strong class="kn hj">.</strong>set_style()</span><span id="8e11" class="kr ks hi kn b fi ky ku l kv kw"><em class="kx"># DataFrame until 08/12/2021</em><br/>PATH <strong class="kn hj">=</strong> "https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv"<br/>df_w <strong class="kn hj">=</strong> pd<strong class="kn hj">.</strong>read_csv(PATH)<br/>df_w <strong class="kn hj">=</strong> df_w[df_w<strong class="kn hj">.</strong>date <strong class="kn hj">&lt;=</strong> '2021-12-08']<br/><em class="kx"># The first five data</em><br/>df_w<strong class="kn hj">.</strong>head()</span></pre><p id="1749" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我看到了数据框和我拥有的数据类型，并做出了必要的更改。然后，在项目的下一步，我首先建立了一个初步的分析，例如建立了关于新冠肺炎新病例数和总死亡数最高值的国家的平滑移动平均图表和条形图，这些都是数据集提供的。</p><p id="9465" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，要构建如图5所示的图表，我需要首先理解可变大陆，比如我在该列中拥有的大陆，为此，我以这种方式开始脚本:</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="2ff4" class="kr ks hi kn b fi kt ku l kv kw"><em class="kx"># What are the entries in the continent column</em><br/>df_w['continent']<strong class="kn hj">.</strong>unique()</span></pre><p id="e426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是:</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="dcd3" class="kr ks hi kn b fi kt ku l kv kw">array(['Asia', nan, 'Europe', 'Africa', 'North America', 'South America',<br/>       'Oceania'], dtype=object)</span></pre><p id="37e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我必须导入库<strong class="ih hj"> DateTime </strong>来构建一个列month，在该列中，我只有列日期的月份。</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="9bdc" class="kr ks hi kn b fi kt ku l kv kw"><em class="kx"># import the library datetime</em><br/><strong class="kn hj">import</strong> datetime <strong class="kn hj">as</strong> dt<br/><em class="kx">#get a month from the column date and put this into the dataframe</em><br/>df_w['month'] <strong class="kn hj">=</strong> df_w['date']<strong class="kn hj">.</strong>dt<strong class="kn hj">.</strong>month</span></pre><p id="88f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成这两个步骤后，我只需要获得每个大洲完全接种疫苗人数的数据。为此，我使用了函数groupby()。</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="c406" class="kr ks hi kn b fi kt ku l kv kw"><em class="kx"># Total number of people who received full vaccinated for each continent</em><br/><br/>df_w<strong class="kn hj">.</strong>groupby(['continent'])<strong class="kn hj">.</strong>people_fully_vaccinated<strong class="kn hj">.</strong>sum()<strong class="kn hj">.</strong>sort_values(ascending <strong class="kn hj">=</strong> <strong class="kn hj">False</strong>)</span></pre><p id="a795" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是:</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="b134" class="kr ks hi kn b fi kt ku l kv kw">continent<br/>Asia             1.043767e+11<br/>Europe           6.021483e+10<br/>North America    5.600873e+10<br/>South America    2.705435e+10<br/>Africa           4.168491e+09<br/>Oceania          2.053342e+09<br/>Name: people_fully_vaccinated, dtype: float64</span></pre><p id="dc63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过数据提取、转换和加载，现在我只需要将我在《用数据讲故事的T2》一书中学到的所有概念应用到Matplotlibrary中:</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="97b9" class="kr ks hi kn b fi kt ku l kv kw"><em class="kx"># Dashboard for the number of people fully vaccinated for each continent</em><br/>sns<strong class="kn hj">.</strong>set_style('ticks')<br/>fig, (ax, ax1) <strong class="kn hj">=</strong> plt<strong class="kn hj">.</strong>subplots(nrows <strong class="kn hj">=</strong> 1, ncols <strong class="kn hj">=</strong>2, figsize<strong class="kn hj">=</strong>(18,6))<br/><br/><em class="kx"># Remove the horizontal gap between the subplots</em><br/>plt<strong class="kn hj">.</strong>subplots_adjust(wspace<strong class="kn hj">=</strong> <strong class="kn hj">-</strong>.50)<br/><br/><em class="kx"># Text figure</em><br/>ax<strong class="kn hj">.</strong>text(0.0,0.900, s <strong class="kn hj">=</strong> 'South America', size <strong class="kn hj">=</strong> 30,color <strong class="kn hj">=</strong> 'DarkSlateGray',weight <strong class="kn hj">=</strong>'bold')<br/>ax<strong class="kn hj">.</strong>text(0.0, 0.40, s <strong class="kn hj">=</strong>'26 billions',size <strong class="kn hj">=</strong> 65, color <strong class="kn hj">=</strong> 'DarkOrange', fontweight <strong class="kn hj">=</strong> 'bold')<br/>ax<strong class="kn hj">.</strong>text(0.0,0.250, s <strong class="kn hj">=</strong> ' of people fully vaccinated until December \n 8th of 2021', size <strong class="kn hj">=</strong> 18,color <strong class="kn hj">=</strong> 'DarkSlateGray', weight <strong class="kn hj">=</strong> 'bold')<br/><br/>sns<strong class="kn hj">.</strong>despine(left <strong class="kn hj">=</strong> <strong class="kn hj">True</strong>, bottom <strong class="kn hj">=</strong> <strong class="kn hj">True</strong>)<br/>ax<strong class="kn hj">.</strong>xaxis<strong class="kn hj">.</strong>set_visible(<strong class="kn hj">False</strong>)<br/>ax<strong class="kn hj">.</strong>yaxis<strong class="kn hj">.</strong>set_visible(<strong class="kn hj">False</strong>)<br/><br/><em class="kx"># The variable pf_v will be  the values for the data at the bar plot</em><br/>pf_v <strong class="kn hj">=</strong> (df_w<strong class="kn hj">.</strong>loc[(df_w<strong class="kn hj">.</strong>continent <strong class="kn hj">==</strong> 'South America') <strong class="kn hj">&amp;</strong> df_w<strong class="kn hj">.</strong>continent<strong class="kn hj">.</strong>notnull()]<strong class="kn hj">.</strong>sort_values(by <strong class="kn hj">=</strong>'people_fully_vaccinated', ascending <strong class="kn hj">=</strong> <strong class="kn hj">False</strong>))<strong class="kn hj">.</strong>copy()<br/><br/><em class="kx"># the barplot</em><br/>pf_plot <strong class="kn hj">=</strong> sns<strong class="kn hj">.</strong>barplot(x <strong class="kn hj">=</strong> 'month', y <strong class="kn hj">=</strong> 'people_fully_vaccinated', data <strong class="kn hj">=</strong> pf_v, ax <strong class="kn hj">=</strong> ax1, color <strong class="kn hj">=</strong> 'DarkOrange', ci <strong class="kn hj">=</strong> <strong class="kn hj">None</strong>)<br/><br/><em class="kx">#ax1.set_title("Total people vaccinated in South America in 2021 \n", loc = 'left', size = 20, color = 'DarkSlateGray') </em><br/>ax1<strong class="kn hj">.</strong>set_xlabel([], color<strong class="kn hj">=</strong>'white')<br/>ax1<strong class="kn hj">.</strong>set_ylabel([], color<strong class="kn hj">=</strong>'white')<br/>ax1<strong class="kn hj">.</strong>set_xticklabels(["Jan","Feb","Mar","Apr","May","Jun","Jul", "Aug","Sep",'Oct',"Nov",'Dec'],{'fontweight':'bold','fontsize': 12})<br/>ax1<strong class="kn hj">.</strong>set_yticklabels([],color <strong class="kn hj">=</strong> 'white')<br/>sns<strong class="kn hj">.</strong>despine(left<strong class="kn hj">=True</strong>, bottom<strong class="kn hj">=True</strong>)<br/><br/>plt<strong class="kn hj">.</strong>tight_layout()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kz"><img src="../Images/926f2d5f367e67eb88cbe47fad2e0ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8DfclNeOMo45q0LBilBilg.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图6。仪表板到南美。由作者制作</figcaption></figure><p id="0044" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我使用了一些步骤和代码来将我的数据转换成一些图形中的CSV文件，以便直接传递信息。</p><p id="ca89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你必须点击这个<a class="ae kl" href="https://github.com/heitor-eng/H_Data_Science/blob/master/Data_Science_Projeto_2_Covid19_.ipynb" rel="noopener ugc nofollow" target="_blank">链接</a>才能看到整个项目以及我用这个数据集对这个主题所做的所有分析。如果你想看我到目前为止完成的其他项目，你可以访问我的<a class="ae kl" href="https://github.com/heitor-eng/Heitor_Profile" rel="noopener ugc nofollow" target="_blank"> GitHub个人资料</a>页面，如果有任何反馈，你可以在我的<a class="ae kl" href="https://www.linkedin.com/in/heitor-campos-02770734/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>页面上联系我。</p></div></div>    
</body>
</html>