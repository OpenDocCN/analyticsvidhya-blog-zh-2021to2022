<html>
<head>
<title>Titanic dataset Analysis (~80% accuracy)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">泰坦尼克号数据集分析(约80%的准确率)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/titanic-dataset-analysis-80-accuracy-9480cf3db538?source=collection_archive---------0-----------------------#2021-11-25">https://medium.com/analytics-vidhya/titanic-dataset-analysis-80-accuracy-9480cf3db538?source=collection_archive---------0-----------------------#2021-11-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/4237eaeb9e024bc2f906876de2222e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kK49KzkYEUYbFjVXrAEJxQ.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated"><a class="ae it" href="https://ornjhonnywingsfood.blogspot.com/2021/08/titanic-rms-titanic-wikiwand-murdoch.html" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><h1 id="01c0" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="5b0e" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">泰坦尼克号，或者说，T2号泰坦尼克号是有史以来最具标志性的悲剧之一的一部分。皇家邮轮泰坦尼克号是一艘英国客轮，在从南安普顿到纽约市的航行中撞上冰山，在北大西洋沉没，数百名乘客在这起致命事件中丧生。一些幸存下来的乘客获救了，而许多人在无助地等待救援到来时失去了生命。</p><p id="adbd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">传说中的卡格尔问题，<a class="ae it" href="https://www.kaggle.com/c/titanic" rel="noopener ugc nofollow" target="_blank">泰坦尼克号</a>，基于皇家邮轮泰坦尼克号的悲惨沉没记录了皇家邮轮泰坦尼克号上891名乘客的数据，我们需要根据我们所掌握的关于乘客的信息和船只沉没后的结果来预测他们是否幸存。</p><p id="297f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">注意:这个笔记本是我对titanic数据集的分析，以从数据中获得任何有意义的见解，并获得大约80%的准确率(Kaggle上14k条目的前5%)。</p><p id="4ca3" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">我们开始吧！</p><h1 id="a9f1" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">内容:</h1><p id="88fe" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">1.关于数据</p><p id="00f8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">2.问题定义和指标</p><p id="66fb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">3.电子设计自动化(Electronic Design Automation)</p><p id="50fe" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">4.基线模型性能</p><p id="727e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">5.型号选择</p><p id="9c26" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">6.结果和结论</p></div><div class="ab cl kv kw go kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ha hb hc hd he"><h1 id="3989" class="iu iv hh bd iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn lg jp jq jr bi translated">关于数据:</h1><p id="fe75" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">首先，我们有一个预测变量，即他们是否在沉船中幸存。然后是一堆数字变量，比如身份证，乘客的年龄等等。后面是分类变量，如票的类别，以及字符串，如名称等。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/1698d3d267374118525051a58bf65569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yz3RqmWUKkilAJWCWVB_gA.png"/></div></div></figure><figure class="li lj lk ll fd ii er es paragraph-image"><div class="er es lm"><img src="../Images/217fdc1c9391e360358599155fdedabe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*6CkrEMfZ3CSDe24avFlxhQ.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">RMS泰坦尼克号船票示例:<a class="ae it" href="https://www.encyclopedia-titanica.org/titanic-tickets/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="4885" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">打印给定数据集的前5行..</p><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="dc39" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">问题定义和指标</h1><p id="02de" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">这个问题是一个<strong class="ju hi">二元类分类</strong>问题。我们可以使用<strong class="ju hi">二元交叉熵</strong>或逻辑损失作为损失函数，以及任何度量标准，如<strong class="ju hi">准确性</strong>或/和<strong class="ju hi"> ROC AUC分数</strong>作为评估结果的度量标准。</p><h1 id="ca0a" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">电子设计自动化(Electronic Design Automation)</h1><h2 id="ed7f" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">特征之间的相关性:</h2><figure class="li lj lk ll fd ii er es paragraph-image"><div class="er es md"><img src="../Images/950d5b84d8971250ef645ae4d322d1de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*hi0oVejvvsPOOXQz4EEldA.png"/></div></figure><p id="b8e9" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">从特征之间的相关性中获得洞察力..</p><ul class=""><li id="d6ca" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">Fare与Pclass呈负相关(皮尔逊相关系数为-0.55)；显然，<strong class="ju hi">更高的票价意味着更好的机票等级</strong>(更低的等级编号)，反之亦然。</li><li id="f725" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">Pclass和目标特征呈中度负相关(-0.34)，这意味着<strong class="ju hi">票证类别越好，存活的机会越高。</strong></li><li id="57a8" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">对于特征Parch、SibSp和Age，可以观察到类似的模式；Parch和SibSp这两个特征与除年龄特征之外的所有特征都非常轻微地相关，并且都与年龄负相关(分别为-0.19和-0.31)；<strong class="ju hi">年龄越低，陪伴乘客的家庭人数越多</strong></li><li id="7718" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">SibSp和Parch特征是正相关的，这两个特征都表示陪伴乘客的家庭成员的数量</li><li id="2f4b" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">PClass和年龄负相关(-0.37)，暗示<strong class="ju hi">年龄越高，机票等级越好</strong></li></ul><h2 id="5211" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">缺失数据</h2><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="3b73" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">年龄</strong>:包含891个条目中的177个nan值。用中位数估算得到最佳结果。</p><p id="1ebd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">上船</strong>:包含2个nan值。用现有数据模式估算。</p><p id="b112" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">舱室</strong>:891个舱室条目中有687个是nan，即超过50%的总数据以缺失数据或nan的形式存在，因此假设从该特征中导出其他特征更好。</p><p id="2667" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">现在，在处理缺失数据并将分类字符串转换为编码(0，1，2..)..</p><figure class="li lj lk ll fd ii er es paragraph-image"><div class="er es ms"><img src="../Images/57b79eb2f473fd437cc2f7ee50c5738a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*N2LDEjUVlSf66aIUxCyELA.png"/></div></figure><ul class=""><li id="2733" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">上船也与目标变量有轻微的相关性(-0.17)，乘客上船的<strong class="ju hi">港口确实决定了他们的生存机会</strong></li><li id="8bec" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">性别也与目标变量高度相关(-0.54)，表明<strong class="ju hi">乘客的性别对他们的生存机会有很大影响</strong></li><li id="9e00" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">乘客上船与票价呈负相关(-0.22)；显然，票价取决于乘客上船的港口。</li><li id="9057" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">上船和性别似乎也略有关联(0.11)，表明乘客从哪个<strong class="ju hi">港口上船取决于乘客的性别</strong>；上船和Pclass也相关(0.16)，表明<strong class="ju hi">一等舱乘客可能与三等舱乘客</strong>在不同的港口登机。</li><li id="dd86" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">性别与票价、性别与Parch、SibSp、性别与Pclass似乎都略有相关(分别为-0.18，-0.25，-0.11，0.13)；也就是说，乘客支付的费用，乘客的家庭，以及机票的等级似乎稍微取决于乘客的性别。</li></ul><p id="db46" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">问题1:特征‘年龄’、‘性别’、‘票价’、‘上船’如何影响乘客的生还几率？</strong></p><p id="9bb6" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">年龄:</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mt"><img src="../Images/d2ef7334b26a401874d8f9810072dc1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jG1ZUvwVHlskPuBxc-pvXg.png"/></div></div></figure><ul class=""><li id="0bca" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">幸存者和未幸存者的两种分布都是正常的，未幸存者在30岁左右出现峰值，即<strong class="ju hi">30岁左右的人更有可能无法存活</strong></li><li id="da90" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">年龄&gt; 51岁的人被认为是死亡人口分布中的异常值。由于事实上<strong class="ju hi">51岁以上的人很少</strong>，55岁以上的人是幸存人口分布中的异常值，即<strong class="ju hi">很少55岁以上的人真正幸存</strong></li></ul><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/3940b21688be2f32c22c956d3598ee21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wOWx-1PrVfvTMB5fiuJ4YA.png"/></div></div></figure><p id="18e5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">性:</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/a86a94cba6d060b3c29a28a3bf222ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ICcg6xiC9S9LfwyEE6efQ.png"/></div></div></figure><ul class=""><li id="af5b" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">从上面的叠加图可以明显看出<strong class="ju hi">有更多的女性乘客幸存</strong>，即74.2 %，而只有18.9 %的男性乘客幸存，尽管车上有更多的男性乘客</li></ul><p id="01ba" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">票价:</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/e218b9e27422aa7271e24396ea297e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Twu8yJncGXU5QrRHqy7jLw.png"/></div></div></figure><ul class=""><li id="2a5b" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">幸存者的票价分布明显具有更高的中值，因此<strong class="ju hi">幸存者的平均票价更高</strong></li><li id="9761" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">两者的分布都有很多异常值</li><li id="7d11" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">没有活下来的人的分布有一个巨大的峰值，或者说没有活下来的人有大约10个货币单位的概率非常高</li></ul><p id="5f53" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">上船:</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/ed88d77e6144b10254daefe19a56a3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VAHPoLZQ3gdKn4TSeTBTgA.png"/></div></div></figure><ul class=""><li id="6fc2" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">在南安普敦港登船的乘客似乎已经达到最大限度，只有33%的人幸存下来；在皇后镇上船的所有乘客中，观察到类似的模式。</li><li id="6aa2" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">然而，在瑟堡登机的乘客幸存的比例更高(55.4%)；因此，如果一名乘客在瑟堡港登船，他们有更大的生存机会。</li></ul><p id="12bf" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">问题2:如何确定影响乘客生还几率的其他特征？</strong></p><h2 id="f2e6" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">特征工程</h2><p id="67b6" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">使用了三种可视化方法(主要是箱线图和密度图):</p><ol class=""><li id="70f3" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mw mk ml mm bi translated">箱线图:告诉我们每个输出类的要素分布范围(或第一个四分位数、中值、第三个四分位数),并让我们了解数据中的异常值</li><li id="220e" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mw mk ml mm bi translated">密度图:告诉我们特征的分布和更多的分布形状(类似正态分布或任何其他分布)</li><li id="6e25" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mw mk ml mm bi translated">堆叠计数图:通过属于哪个输出类的百分比信息，告诉我们关于要素的每个类别的计数的更多信息</li></ol><h2 id="bcad" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">SibSp和炒制</h2><p id="9fe4" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">由于这两个特征高度正相关(0.41)，我们可以通过添加配偶/兄弟姐妹的数量(SibSp)和父母/子女的数量(Parch)来推导出一个单一特征，该特征指示了乘客的随行家庭成员的数量。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mx"><img src="../Images/7d775611c52db50d69d3a72b05966b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVGtOPWeF-ataIZpHEU1Dg.png"/></div></div></figure><ul class=""><li id="96f1" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">从箱线图来看，那些幸存下来的人平均有大约1个家庭成员，而那些没有幸存下来的人，家庭成员更少或者没有</li><li id="c3a1" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">从概率分布来看，这两种分布都类似于正态分布，只是略微向右倾斜</li><li id="f71d" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated"><strong class="ju hi">家庭成员人数越少，乘客死亡的几率越高</strong></li></ul><h2 id="29ab" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">名字</h2><p id="7bb3" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">由于乘客的名字不能直接用作特征，我们需要从中派生出特征。可以从每个乘客的名字中导出多个特征，例如:</p><ul class=""><li id="5a4b" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">名称的长度</li><li id="4481" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">姓名头衔(先生/夫人/等等)</li><li id="5cc6" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">字数(因为看起来确实与姓名长度相关，所以被丢弃)</li><li id="424d" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">姓氏字母</li></ul><p id="0495" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">名称长度</strong></p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mt"><img src="../Images/3b3f96d6c7b7eeba1801293b4d3c730f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1hbeTRSUMdpyAgYyYfQ1w.png"/></div></div></figure><ul class=""><li id="0be8" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">没有幸存下来的乘客名字的中位数往往是25个字母，而幸存下来的乘客名字的中位数是30个字母；没有幸存下来的乘客名字更短的可能性<strong class="ju hi">(大约25个字母)。</strong></li></ul><p id="ac23" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">姓名头衔</strong></p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es my"><img src="../Images/47b1a157c24a1619c7af67abfacf5ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MR7rakfANLi68nctZXXyhg.png"/></div></div></figure><ul class=""><li id="e5ce" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">有5类姓名头衔，乘客有“小姐”、“夫人”、“主人”、“先生”，第五类有所有剩余的少数头衔，如“博士”、“牧师”。</li><li id="a553" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">三等舱中未能生还的乘客概率分布的急剧上升意味着拥有“主人”或<strong class="ju hi">头衔的年轻男孩生还的机会更小。</strong></li></ul><p id="b73a" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">姓氏的字母</strong></p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/ffeca840d4455786a85dab61274eb440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JnYE8eEEhm8V4YoviNcP0g.png"/></div></div></figure><ul class=""><li id="c66c" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">最常见的姓氏以下列字母开头:</li></ul><pre class="li lj lk ll fd mz na nb nc aw nd bi"><span id="f985" class="lp iv hh na b fi ne nf l ng nh">Maximum occurence of letters in surname beginning : [('S', 86), ('M', 74), ('B', 72), ('C', 69), ('H', 69)]</span></pre><ul class=""><li id="8557" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">这些被认为是姓氏特征的类别1至5，而其余的姓氏是类别6的一部分。</li><li id="0ca9" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">相似的概率分布在两种乘客分布中被注意到，那些幸存的和那些没有的，姓氏以“H”开头的乘客有一个峰值。</li></ul><h2 id="ea97" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">小木屋</h2><p id="7b2a" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">由于大量nan值的存在，我们从该特征中导出其他特征:</p><ul class=""><li id="36a4" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">字母舱室号码开始(舱室的位置决定了乘客的生存，因为它决定了乘客离船的距离)</li><li id="aadc" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">舱室值是否为nan(在数据丢失或未知的情况下，表示存活的机会较小或与其他因素相关)</li></ul><p id="cfbb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">宁滨号船舱</strong></p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/f8f43b8123e16a659883e67d085cf1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pItyjfNiqmGVF490gJfRA.png"/></div></div></figure><ul class=""><li id="1442" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">客舱分为6个等级，机票从“A”、“B”、“C”、“D”、“E”开始，第6个等级为剩余的客舱号。</li><li id="cdd1" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">两种概率分布都观察到了类似的模式，以“E”开头的客舱号码出现峰值。</li></ul><p id="b701" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">机舱男</strong></p><p id="c810" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">检查数据集中的随机行，我们可以看到许多三等舱乘客在他们的舱号中有多个nan。</p><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">“客舱”作为“Pclass”值3的nan的数据中的随机行</figcaption></figure><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ni"><img src="../Images/23a30b5ac76df289d2e8e7dc8767a8f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otA3zx96inJVzhCCecx80w.png"/></div></div></figure><ul class=""><li id="bde7" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">在机舱号中没有与nans一起幸存的乘客的分布中看到的峰值；如果客舱值为nans ，乘客生还的几率会更高<strong class="ju hi"/></li><li id="7fbf" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">一等舱的乘客被安排在A、B、C、D和E甲板的船舱里，而二等舱的乘客主要被安排在D和E甲板的船舱里，而更远的甲板则为三等舱的乘客安排了船舱。</li></ul><h2 id="e84c" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated"><strong class="ak">票</strong>:</h2><ul class=""><li id="4651" class="me mf hh ju b jv jw jz ka kd nj kh nk kl nl kp mj mk ml mm bi translated">票号是指由订票代理提供的印在票上的值(如上图),它可以表示订票日期。(没有产生好的结果，所以不使用)</li><li id="8b0e" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">基于票据串的内容进行分箱(首先是数字，然后是每个串的第一个字母，但是由于更好的性能，保留了两个分箱，一个分箱具有仅包含数字的票据编号，另一个分箱具有数字和字母)。</li><li id="1d8e" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">我们在此基础上检查票号和bin中第一个字母的重要性。</li></ul><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es my"><img src="../Images/eda7bdf893863d54b15972f0b6646b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeORnTFIEVCHVYlGZ56-cg.png"/></div></div></figure><ul class=""><li id="72f6" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">在两种概率分布中观察到相似的模式，并且在两种观察到的分布中观察到相似的平均值，对于没有幸存的乘客，分布稍微陡峭一些。</li></ul><h2 id="76b9" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">特征编码:</h2><p id="257e" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">我使用了熊猫的get_dummies()函数进行热编码。对于数据中的多个类别，pd.get_dummies()为每个标签创建一个值为0或1的列，避免使用标签编码，这样会给出数字数据(0，1，2，3..类的数量)作为可能混淆模型的特征。</p><h2 id="5ac5" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">特征工程后特征之间的相关性</h2><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/1cabdcc0f1f1d7f5de9d55fb3beac52e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMBBiVLOK2QSMXKJXuvDBg.png"/></div></div></figure><h2 id="1dd3" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">组合高度相关的特征</h2><p id="1e89" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">我们将高度相关的功能组合在一起，创建一个新功能，即:</p><ul class=""><li id="17ba" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">性别和姓名_职务</li><li id="f228" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">P_class、fare_bin和cabin_bin</li></ul><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h2 id="dfb8" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">不平衡数据集</h2><figure class="li lj lk ll fd ii er es paragraph-image"><div class="er es nm"><img src="../Images/84c8e171ebe2472c28ab01e54baa27dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*xGHU_yC2sTaKUSC0LLx2ew.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx translated">“幸存”特征计数图</figcaption></figure><ul class=""><li id="fceb" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated"><strong class="ju hi">数据明显不平衡</strong>，幸存<strong class="ju hi">的人数几乎接近未幸存</strong>人数的一半</li><li id="2588" class="me mf hh ju b jv mn jz mo kd mp kh mq kl mr kp mj mk ml mm bi translated">我们可以使用分层抽样、过采样、SMOTE或任何其他技术来处理数据中的不平衡，但我坚持使用分层抽样，参考了这里提到的几个笔记本。</li></ul><h2 id="bee4" class="lp iv hh bd iw lq lr ls ja lt lu lv je kd lw lx ji kh ly lz jm kl ma mb jq mc bi translated">特征重要性</h2><p id="d0f2" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">训练提取树分类器以查看X_train中最重要的特征。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div class="er es nn"><img src="../Images/8f8c6eef102d95a1ea3571a8937056c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*DpmIXaNLC3FF7-J-tGQFOA.png"/></div></figure><h1 id="ef50" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">基线模型</h1><p id="67ea" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">对于基线模型，我们使用优化的随机森林模型，因为它非常健壮，并且算法创建去相关的树，这有助于克服将模型过度拟合到较少的特征。</p><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="ce60" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">以下是来自已训练随机森林模型的树:</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es no"><img src="../Images/a330be7eea361b2bebff7b90bd4aa220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGTJBhWFeMzUxI2i58dXLA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">来自已训练的随机森林模型的单个决策树</figcaption></figure><p id="ed3f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在顶部，我们有第一个分割，特征“性别_姓名_头衔”，看起来是告诉我们关于乘客生存机会的最重要的特征。基于这个特征分割X_train给了我们一个gini杂质分数，或者更简单地说，一个0.469的信息增益。</p><p id="34f7" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">‘cabin _ nan’和‘Age’是用于下一次分割的特征，具有第二好的信息增益值。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es np"><img src="../Images/12c8669f47f57b69004b1b7cbc09fed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gAYtD7lwu7C7aNuTS5f67w.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">放大上图</figcaption></figure><p id="8522" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">我们使用实现了<strong class="ju hi">贝叶斯优化</strong>的<strong class="ju hi">hyperpt</strong>库来获得模型的优化超参数。</p><p id="9a75" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">术语贝叶斯是指包含先验<strong class="ju hi">和<strong class="ju hi">可能性函数</strong>的概率定律，先验</strong>是在进行观察之前事件的概率分布，由过去的知识确定，而<strong class="ju hi">可能性函数</strong>根据记录的观察提供关于事件概率分布的信息。</p><p id="1be2" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">贝叶斯优化是一种使用先验概率来确定函数的全局最小值的算法。简而言之，与网格搜索和随机搜索算法不同，网格搜索和随机搜索算法使用预测的当前值来寻找误差表面中的最小误差点，贝叶斯优化使用关于先前误差的信息来预测下一个预测，这使得在寻找优化问题中的最小误差点的过程中更加可靠。这是一个很棒的博客，用非常简单的术语解释了贝叶斯优化。</p><figure class="li lj lk ll fd ii"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="3be0" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">型号选择</h1><p id="c2a2" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">我们用简单的二元分类模型进行实验，如逻辑回归、SVM、KNN，然后是基于决策树的分类器，如随机森林、XGBoost。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nq"><img src="../Images/3e2a074f6b72fd287697ecbd8dd71ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bzHV0fU9ktWQ9vjxWuYjbQ.png"/></div></div></figure><p id="4a92" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">上图显示了分类结果，其中SVC和Random Forest预测的误差最小，而XGBoost预测的误差最大。</p><h1 id="c5f0" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结果和结论</h1><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nq"><img src="../Images/6146ab7c90595db114d552711bba15d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6rgDhmGDUmUiO3q8QOc5g.png"/></div></div></figure><ul class=""><li id="34b0" class="me mf hh ju b jv kq jz kr kd mg kh mh kl mi kp mj mk ml mm bi translated">我们使用<strong class="ju hi">随机森林和KNN </strong>在测试集上得到最终的准确度分数<strong class="ju hi"> 0.8334 </strong>，使用<strong class="ju hi"> SVC </strong>得到分数<strong class="ju hi"> 0.855 </strong>。</li></ul></div><div class="ab cl kv kw go kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ha hb hc hd he"><p id="19ea" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><em class="nr">感谢阅读！</em></p><p id="e3b8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">另外，如果有任何改进这篇文章的建议，请告诉我！</p><p id="3c73" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://www.kaggle.com/aish0997/titanic-dataset-80-accuracy" rel="noopener ugc nofollow" target="_blank">这里</a>是Kaggle笔记本的链接，供参考。</p></div><div class="ab cl kv kw go kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ha hb hc hd he"><h1 id="9255" class="iu iv hh bd iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn lg jp jq jr bi translated"><strong class="ak">参考文献:</strong></h1><ol class=""><li id="3d4a" class="me mf hh ju b jv jw jz ka kd nj kh nk kl nl kp mw mk ml mm bi translated"><a class="ae it" href="https://en.wikipedia.org/wiki/Titanic" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Titanic</a></li></ol><p id="9d63" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://www.kaggle.com/slythe/infamous-titanic-80-accuracy" rel="noopener ugc nofollow" target="_blank"> 2。https://www.kaggle.com/slythe/infamous-titanic-80-accuracy</a>:</p><p id="65bd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://www.kaggle.com/raysun91/0-794-top-5-using-logistic-regression" rel="noopener ugc nofollow" target="_blank"> 3。https://www . ka ggle . com/raysun 91/0-794-top-5-using-logistic-regression</a></p><p id="a9a5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://towardsdatascience.com/choosing-the-right-encoding-method-label-vs-onehot-encoder-a4434493149b" rel="noopener" target="_blank"> 4。https://towards data science . com/choosing-the-right-encoding-method-label-vs-one hot-encoder-a 4434493149 b</a></p><p id="1a35" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">5.<a class="ae it" href="https://datascience.stackexchange.com/questions/63558/should-features-be-correlated-or-uncorrelated-for-classification" rel="noopener ugc nofollow" target="_blank">https://data science . stack exchange . com/questions/63558/should-features-be-correlated-or-un-correlated-for-class ification</a></p><p id="5126" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">6.<a class="ae it" href="https://www.encyclopedia-titanica.org/cabins.html" rel="noopener ugc nofollow" target="_blank">https://www.encyclopedia-titanica.org/cabins.html</a></p><p id="54aa" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">7.https://www.encyclopedia-titanica.org/titanic-tickets/<a class="ae it" href="https://www.encyclopedia-titanica.org/titanic-tickets/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>