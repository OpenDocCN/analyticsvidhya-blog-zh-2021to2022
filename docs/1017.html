<html>
<head>
<title>Scraping Twitter Hashtags and Tweet Conversations using Twitter API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Twitter API抓取Twitter标签和Tweet对话</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/scraping-twitter-hashtags-and-tweet-conversations-using-twitter-api-bb696caf7429?source=collection_archive---------4-----------------------#2021-02-10">https://medium.com/analytics-vidhya/scraping-twitter-hashtags-and-tweet-conversations-using-twitter-api-bb696caf7429?source=collection_archive---------4-----------------------#2021-02-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1626a1226b84defc0783e8bc9a9c4cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xi_nA9sSuqy8W2KE.jpeg"/></div></div></figure><p id="3627" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">内容:<br/> </strong> 1。简介<br/> 2。创建Twitter API开发者账户<br/> 3。刮掉标签<br/> 4。抓取推文对话</p><p id="d9f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">简介:<br/> </strong>在很大程度上，当任何人都是任何人时，当想到数据和搜集数据时，Twitter通常会出现在脑海中。如果你正在读这篇文章，我敢肯定你不需要我来告诉你twitter在原始数据等方面是多么巨大的财富。我也不会用统计数据(尽管它们非常令人兴奋，但不是今天的主题)或引用行业领袖的话来轰炸你。现在让我们向前迈一步，看看这是怎么回事。</p><p id="bed0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Twitter API是您和上述数据缓存之间的看门人。它可以帮助你检索推文，获得用户，媒体，以及其他令人兴奋的事情。除此之外，您还可以使用API在Twitter上发布或执行操作。目前，有两个受支持的Twitter API版本和4个主要的访问层。出于本文的目的，我们所有的例子都是使用v2完成的。</p><p id="7ab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">创建Twitter API开发者账户:</strong></p><p id="6a32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了查询Twitter API，必须首先创建一个帐户，然后等待案例被批准。根据我的个人经验，这可能需要一些时间，甚至需要来回发送几封电子邮件，直到获得批准，所以如果你希望这在一夜之间甚至立即完成，那么你就不走运了。然而，记住这一点，请不要感到气馁，如果你知道你要求Twitter API做什么，并遵循明确的指示，一切都应该是好的。更多信息可在<a class="ae jo" href="https://developer.twitter.com/en/docs/twitter-api/getting-started/guide" rel="noopener ugc nofollow" target="_blank">这里</a>找到。一旦所有这些都完成了，你需要做的就是<strong class="is hj">三件事:</strong>承载令牌、访问令牌和访问秘密。确保你手头有这三个。</p><p id="325e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我目前有一个标准的免费帐户层，所以通过API检索的数据量会有一个限制。更多信息请点击查看<a class="ae jo" href="https://developer.twitter.com/en/docs/twitter-api/rate-limits" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="84cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Scrape Hashtag: <br/> </strong>此时，我们应该准备好使用Twitter API了。首先，我们将导入所需的库。我们将导入python请求库，这将允许我们进行GET请求，还有JSON库。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="5307" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将存储不记名令牌(在成功创建开发人员帐户后，您已经被分配到这里)。我们需要这个来验证我们的请求。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="6b14" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将使用访问Twitter API所需的URL地址。请注意，第三个“/”后面是数字2，这表示我们正在使用v2。该URL也称为最近搜索查询。正如你从上面的片段中看到的，在URL后面有一个名为“query”的参数，我们将在这里插入我们的hashtag。为了这个练习的目的，我选择了一个在我写这篇文章的那天比较流行的标签。我们称之为“twitter_params”。选择的标签是“星期三动机”。在您自己的实现中，您可以用另一个hashtag替换它，如果它是应用程序的一部分，可以从一个参数中获取它，或者简单地让它保持原样。接下来，我们将把hashtag添加到最终版本的URL主体中。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="90cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经有了发送到Twitter API的URL，现在让它运行起来吧！现在我们将创建headers变量来添加到请求头中。第7行的下一个是请求，参数是不言自明的，但我还是会这样做。第一个是GET请求，第二个是URL，最后是头。最后，将响应转换成JSON主体，使其可读。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/7a9c9439f4e21fa36568a8de456fe1b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l9-2SisZEgAth1Uk"/></div></div></figure><p id="49f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们打印出结果，应该会得到类似上面的结果。只是重申一下，因为我有自由层，如果你也有，结果本身可能不同，但大小和结构相同。</p><p id="21a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">抓取Tweet对话:<br/> </strong>之前，我们通过最近的搜索查询，以相关标签为参数，从Twitter上抓取了一个标签。在这一部分，我们将尝试抓取一条推文的对话——换句话说，获取对一条特定推文的所有回复。</p><p id="dbbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你理解了上一节，这一节应该很相似。除了参数，URL是相同的。在这种情况下，查询是“conversation_id ”,我们在URL中添加tweet ID。</p><p id="e0c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，这里有一条最近发布的推文的链接:</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jw ju l"/></div></figure><p id="ef52" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们从URL中需要的是最后的大数字。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="8822" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了参数的变化之外，遵循与前面相同的步骤，结果应该如下所示。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/9eca41fe4d38371615261ad0d959cd5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2eCgUGXKucL9KDuF"/></div></div></figure></div></div>    
</body>
</html>