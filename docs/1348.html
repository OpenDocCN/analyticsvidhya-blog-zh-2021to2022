<html>
<head>
<title>Python for stock analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于股票分析的Python</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-for-stock-analysis-fcff252ca559?source=collection_archive---------0-----------------------#2021-02-25">https://medium.com/analytics-vidhya/python-for-stock-analysis-fcff252ca559?source=collection_archive---------0-----------------------#2021-02-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="127c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，我们将分析股票市场的数据。</p><p id="b037" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，我们将使用Pandas提取和分析信息，将其可视化，并根据股票的表现历史，寻找不同的方法来分析股票的风险。</p><p id="2b0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我将尝试回答的问题:</p><ul class=""><li id="ad75" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">随着时间的推移，股票价格的变化是什么？</li><li id="5bd4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">一支股票的日平均回报率是多少？</li><li id="167c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">各种股票的移动平均数是多少？</li><li id="b194" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">为什么均线很重要？</li><li id="3973" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">什么是技术指标以及如何使用它们。</li><li id="095f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">不同股票的日收益之间的相关性是什么？</li><li id="1030" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">各种股票的回报如何？</li><li id="31c8" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">投资一支特定的股票会让我们冒多大的风险？</li><li id="c225" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我们如何试图预测未来的股票行为？</li></ul><p id="29e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将分析一些科技股，看看它们去年的表现似乎是个好主意。</p><h2 id="1742" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><code class="du km kn ko kp b">We're going to analyse stock info for Apple, Google, Microsoft, and Amazon</code></h2><p id="45ad" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">让我们来看看数据，我有从<a class="ae kv" href="https://in.finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank">雅虎财经</a>下载的CSV文件。这些CSV文件有超过20年的数据，对于本教程来说应该足够了。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="98da" class="jr js hi kp b fi le lf l lg lh">AAPL = pd.read_csv("AAPL.csv")</span><span id="72b6" class="jr js hi kp b fi li lf l lg lh">MSFT = pd.read_csv("MSFT.csv")</span><span id="1ce3" class="jr js hi kp b fi li lf l lg lh">INTC = pd.read_csv("INTC.csv")</span><span id="349a" class="jr js hi kp b fi li lf l lg lh">GOOG = pd.read_csv("GOOG.csv")</span><span id="6c68" class="jr js hi kp b fi li lf l lg lh">AMZN = pd.read_csv("AMZN.csv")</span></pre><p id="f664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看这里有什么。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="4f70" class="jr js hi kp b fi le lf l lg lh">AAPL.head()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es lj"><img src="../Images/299f6d1aa4324e9f86f2f9bc4bffbff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*5gMwKxKXKSw6WcUrBkIlxg.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">苹果股票数据的前几行</figcaption></figure><p id="6945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以检查一些数据的统计，即有多少行，最大值，平均值。通过一个简单的命令，由熊猫提供给我们。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="854b" class="jr js hi kp b fi le lf l lg lh">#Basic stats for Apple’s Stock</span><span id="c00b" class="jr js hi kp b fi li lf l lg lh">AAPL.describe()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es lr"><img src="../Images/e33bfd13f74fecef2618751a51734b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oRCTVXhLW75C64pR1qVDfA.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">苹果股票数据的基本统计</figcaption></figure><p id="7cca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在应该看看我们有什么类型的列，熊猫再次用另一个简单的命令来救援。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="37a9" class="jr js hi kp b fi le lf l lg lh"># Some basic info about the dataframe</span><span id="109f" class="jr js hi kp b fi li lf l lg lh">AAPL.info()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es lw"><img src="../Images/cedbb0af202d2e9c3bf3087090e0083d.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*wtWa96Nh36xQAMsBQ9HyJA.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">关于苹果股票数据的信息</figcaption></figure><p id="5ea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的数据框架中没有遗漏信息，所以我们可以继续我们的业务。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="b8d8" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">随着时间的推移，股票价格有什么变化？</h1><p id="7da9" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们将分析去年，即2020年的数据，所以我们有另一个名为“truncate”的属性，我们可以用它来绘制特定日期之间的数据。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="2618" class="jr js hi kp b fi le lf l lg lh"># Plotting the stock's adjusted closing price using pandas</span><span id="ef1c" class="jr js hi kp b fi li lf l lg lh">AAPL.truncate(before='2020-01-01', after='2021-01-01')['Adj Close'].plot(legend=True,figsize=(12,5))</span></pre><p id="fa34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需记住这样做，您需要将“日期列”作为数据帧的索引，这可以用另一个简单的命令来完成。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="3243" class="jr js hi kp b fi le lf l lg lh">AAPL.set_index('Date',inplace=True)</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es mv"><img src="../Images/7a141c6caf2db40ea10f7333eb94c7b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gs6QzHqC2S7C17EsBKToUA.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL调整关闭交易随着时间的推移</figcaption></figure><p id="0d1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似地，我们可以画出股票交易量随时间的变化。同样，我们将只使用去年的数据，即2020年的数据。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="3cbe" class="jr js hi kp b fi le lf l lg lh"># Plotting the total volume being traded over time</span><span id="91bd" class="jr js hi kp b fi li lf l lg lh">AAPL.truncate(before='2020-01-01', after='2021-01-01')['Volume'].plot(legend=True,figsize=(12,5))</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es mw"><img src="../Images/01b6392de4fa1c026995e12c42cc2d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhsWTM8g25xYCf8QtbxiBw.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">一段时间内的AAPL交易量</figcaption></figure></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="6962" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">什么是技术指标，如何使用它们</h1><p id="4ea9" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">技术指标是探索性的变量，通常来源于股票的价格和交易量。它们被用来解释股票的价格变动，以期预测未来的波动。换句话说，它们被用来确定一只股票是“超买”还是“超卖”。虽然这些指标被独立投资者和对冲基金广泛利用，但许多人没有快速获得它们的方法。他们不得不一次计算一个指标。这个过程需要大量的时间和计算能力。相信我。过去，我花了相当多的时间用python编写这个过程。</p><p id="345b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算技术指标会占用建模过程的时间，因此会阻碍构建更复杂的统计模型。通过TA(技术分析)库，我们可以用一行代码证实任何股票的历史价格数据，包括40多个不同的技术指标。</p><p id="5f0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装TA(技术分析)库</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="3dc8" class="jr js hi kp b fi le lf l lg lh">pip install --upgrade ta</span><span id="c8f0" class="jr js hi kp b fi li lf l lg lh">from ta import add_all_ta_features</span><span id="fc23" class="jr js hi kp b fi li lf l lg lh">from ta.utils import dropna</span><span id="ce25" class="jr js hi kp b fi li lf l lg lh">mom_data = add_all_ta_features(AAPL, open=”Open”, high=”High”, low=”Low”, close=”Close”, volume=”Volume”)</span><span id="3bc4" class="jr js hi kp b fi li lf l lg lh">mom_data.columns</span></pre><p id="fea3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这时，图书馆已经实施了32项指标:</p><h1 id="080d" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">卷</h1><ul class=""><li id="4a48" class="jd je hi ih b ii kq im kr iq nc iu nd iy ne jc ji jj jk jl bi translated">积累/分配指数</li><li id="3364" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">平衡量(OBV)</li><li id="91c9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">平衡体积平均值(OBV平均值)</li><li id="0586" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">柴金资金流(CMF)</li><li id="cdcf" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">力指数</li><li id="6bdb" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">便于移动(EMV选举观察团)</li><li id="d2f7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">量价趋势(VPT)</li><li id="8bb0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">负体积指数</li></ul><h1 id="b3ed" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">波动性</h1><ul class=""><li id="897d" class="jd je hi ih b ii kq im kr iq nc iu nd iy ne jc ji jj jk jl bi translated">平均真实距离</li><li id="a9d0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">布林线(BB)</li><li id="e71e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">凯尔特纳海峡</li><li id="af2a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">唐奇安海峡(DC)</li></ul><h1 id="9c7d" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">趋势</h1><ul class=""><li id="7ca0" class="jd je hi ih b ii kq im kr iq nc iu nd iy ne jc ji jj jk jl bi translated">移动平均收敛发散(MACD)</li><li id="226e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">平均定向运动指数</li><li id="fd7f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">涡流指示器(六)</li><li id="a59b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">特里克斯(Trix)</li><li id="3ae9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">质量指数</li><li id="bd69" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">商品频道指数(CCI)</li><li id="27b7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">去趋势价格振荡器(DPO)</li><li id="d761" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">KST振荡器(KST)</li><li id="2364" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">一目岛</li></ul><h1 id="9bab" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">动力</h1><ul class=""><li id="f2c8" class="jd je hi ih b ii kq im kr iq nc iu nd iy ne jc ji jj jk jl bi translated">货币流通指数</li><li id="2bb8" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">相对强度指数</li><li id="0678" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">真实强度指数</li><li id="c07e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">终极振荡器(UO)</li><li id="4558" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">随机振荡器</li><li id="f22e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">威廉姆斯%R (WR)</li><li id="b5c9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">超棒振荡器(AO)</li></ul><h1 id="c499" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">其他人</h1><ul class=""><li id="6987" class="jd je hi ih b ii kq im kr iq nc iu nd iy ne jc ji jj jk jl bi translated">每日退货</li><li id="f1b3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">累积回报</li></ul><p id="776d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些指标产生了58个特征。开发人员可以设置许多输入参数，如窗口的大小，不同的常数或智能自动填充方法中生成的NaN值。</p><div class="nf ng ez fb nh ni"><a href="https://github.com/bukosabino/ta" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hj fi z dy nn ea eb no ed ef hh bi translated">布科萨比诺/ta</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">这是一个技术分析库，可用于从金融时间序列数据集(开放、封闭…</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ll ni"/></div></div></a></div></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="c6fb" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">各种股票的移动平均数是多少？</h1><p id="d7f1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">让我们来看看股票在10、20和50天内的移动平均线。我们会将这些信息添加到股票的数据框架中。</p><figure class="kw kx ky kz fd lk"><div class="bz dy l di"><div class="nx ny l"/></div></figure><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es nz"><img src="../Images/f1f3e2f9bda7b88955a1d068602252c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36H8gg7URvGX2SqQKn4Tkg.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">10、20、30天的移动平均线</figcaption></figure><p id="b05f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们同样用去年，也就是2020年的数据来绘制。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="ad92" class="jr js hi kp b fi le lf l lg lh">AAPL.truncate(before='2020-01-01', after='2021-01-01')[['Adj Close','MA for 10 days','MA for 20 days','MA for 50 days']].plot(subplots=False,figsize=(12,5))</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es mv"><img src="../Images/1de8b6bfc80d91e2bebc7a10c537eeaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MqbyqpFgW-VaaMt49Kmq3g.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL移动平均图</figcaption></figure><p id="44c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多天的移动平均线有更平滑的曲线，因为它们在每日波动上不太可靠。因此，尽管苹果公司的股票在年初有小幅下跌，主要是由于新冠肺炎的影响，但自6月初以来，它一直呈上升趋势。</p><h1 id="b739" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">为什么均线很重要？</h1><p id="e9dc" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">移动平均线用于识别重要的<a class="ae kv" href="https://www.investopedia.com/trading/support-and-resistance-basics/" rel="noopener ugc nofollow" target="_blank">支撑位</a>和<a class="ae kv" href="https://www.investopedia.com/trading/support-and-resistance-basics/" rel="noopener ugc nofollow" target="_blank">阻力位</a>。</p><p id="9fc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">交易者观察短期均线与长期均线的交叉，作为趋势变化的可能指标，以进入多头和空头头寸。</p><blockquote class="oa ob oc"><p id="417b" class="if ig od ih b ii ij ik il im in io ip oe ir is it of iv iw ix og iz ja jb jc hb bi translated">Stan Weinstein认为:要想买入一只股票，价格必须高于短期MA。</p></blockquote></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="099d" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">一支股票的日平均回报率是多少？</h1><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="670a" class="jr js hi kp b fi le lf l lg lh"># The daily return column can be created by using the percentage change over the adjusted closing price</span><span id="a360" class="jr js hi kp b fi li lf l lg lh">AAPL['Daily Return'] = AAPL['Adj Close'].pct_change()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es oh"><img src="../Images/33a168e8aa2eb3f3a7cdb5d8993589ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*EYBp03fUQdHUuBaWtfV5wg.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL每日回报专栏</figcaption></figure><p id="31ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们绘制去年(即2020年)的日收益率</p><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es oi"><img src="../Images/9d11f42b886530af7889e913cc7a732b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XC4YZCiHTOGpHfRvQdyvyA.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL每日回报</figcaption></figure><p id="5773" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将通过Seaborn library的distplot来检查我们得到了多少正或负的回报。在我们绘图之前，先了解一下distplot。</p><p id="dcd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Seaborn distplot允许您显示一个带线条的直方图。这可以表现在各种各样的变化中。distplot绘制观察值的单变量分布。distplot()函数将matplotlib hist函数与seaborn kdeplot()和rugplot()函数结合在一起。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="fe04" class="jr js hi kp b fi le lf l lg lh">sns.distplot(AAPL[‘Daily Return’].dropna(),bins=50,color=’blue’)</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es oj"><img src="../Images/6fe7793c4983dd35d5e42b368d662836.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*oH7VHAXztiT4CN0aPrLQtg.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL区地块</figcaption></figure><p id="ce03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对苹果来说，每日正回报似乎比负回报更频繁。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="8589" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">不同股票的日收益之间的相关性是什么？</h1><p id="4eab" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我以前写过一篇关于这个的文章，你可以看看。<a class="ae kv" rel="noopener" href="/analytics-vidhya/how-to-create-a-stock-correlation-matrix-in-python-4f32f8cb5b50">如何在python中创建股票相关性矩阵</a></p><figure class="kw kx ky kz fd lk"><div class="bz dy l di"><div class="nx ny l"/></div></figure><p id="34b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们将所有股票数据合并到一个数据框架中，这样我们就可以用它来计算相关性。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="a2d2" class="jr js hi kp b fi le lf l lg lh">df = pd.concat(data)</span><span id="a6e5" class="jr js hi kp b fi li lf l lg lh">df = df.reset_index()</span><span id="92ba" class="jr js hi kp b fi li lf l lg lh">df = df[[‘Date’, ‘Adj Close’, ‘Symbol’]]</span><span id="1a7d" class="jr js hi kp b fi li lf l lg lh">df.head()</span><span id="845c" class="jr js hi kp b fi li lf l lg lh">df_pivot=df.pivot(‘Date’,’Symbol’,’Adj Close’).reset_index()</span><span id="6552" class="jr js hi kp b fi li lf l lg lh">df_pivot.head()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es ok"><img src="../Images/e828a8362f8b7c1e8fc703aaff65920e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*aGY6qMNBJG37dL8RGXHKew.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">所有股票的组合数据框架</figcaption></figure><p id="30d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在，我们可以运行关联。使用熊猫的“corr”函数计算每对股票之间的皮尔逊相关系数。</strong></p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="006d" class="jr js hi kp b fi le lf l lg lh">corr_df = df_pivot.corr(method='pearson')</span><span id="ed1b" class="jr js hi kp b fi li lf l lg lh"># reset symbol as index (rather than 0-X)</span><span id="0286" class="jr js hi kp b fi li lf l lg lh">corr_df.head().reset_index()</span><span id="5c23" class="jr js hi kp b fi li lf l lg lh"># del corr_df.index.name</span><span id="eb86" class="jr js hi kp b fi li lf l lg lh">corr_df.head(10)</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es ol"><img src="../Images/48beb9442341dfddbb6aec0b34c2871e.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*Pi33LYMRcBjbJ3IibyTROg.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">股票之间的相关值</figcaption></figure><p id="7439" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们使用Seaborn库来绘制一个热图，并以一种更好的方式来可视化相关性</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="0a15" class="jr js hi kp b fi le lf l lg lh">plt.figure(figsize=(13, 8))</span><span id="a09f" class="jr js hi kp b fi li lf l lg lh">sns.heatmap(corr_df, annot=True, cmap="RdYlGn")</span><span id="2e9f" class="jr js hi kp b fi li lf l lg lh">plt.figure()</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es om"><img src="../Images/353ef8fd210268b884374744e11c24aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ew6vsL871xY6ICUwu-7e5g.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">相关矩阵</figcaption></figure><p id="4b54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，除了英特尔，所有其他公司都有很强的相关性。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="245e" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">各种股票的回报如何？</h1><p id="d50c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">让我们把我们所有的存货都标出来。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="8a68" class="jr js hi kp b fi le lf l lg lh">df_pivot.plot(figsize=(10,4))</span><span id="d0f9" class="jr js hi kp b fi li lf l lg lh">plt.ylabel('Price')</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es on"><img src="../Images/cb483ea156c2024aa9388bf9584d0bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*B9ZZrUrbMOgfyR6u1Adawg.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">2020年所有股票的价格图</figcaption></figure><h1 id="aa60" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">标准化多个股票</h1><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="51de" class="jr js hi kp b fi le lf l lg lh">returnfstart = df_pivot.apply(lambda x: x / x[0])</span><span id="e22b" class="jr js hi kp b fi li lf l lg lh">returnfstart.plot(figsize=(10,4)).axhline(1, lw=1, color=’black’)</span><span id="a648" class="jr js hi kp b fi li lf l lg lh">plt.ylabel(‘Return From Start Price’)</span></pre><p id="fd54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我将所有收盘价除以该期间的第一个收盘价。</p><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es oo"><img src="../Images/8da167a4a692cfa04cb660d5ea82752e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*A_qt_PIH9w4-cNhg0OI6lA.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">从起始价格返回</figcaption></figure><h1 id="a56f" class="me js hi bd jt mf mx mh jx mi my mk kb ml mz mn ke mo na mq kh mr nb mt kk mu bi translated">每日回报百分比图</h1><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="c306" class="jr js hi kp b fi le lf l lg lh">df2=df_pivot.pct_change()</span><span id="3813" class="jr js hi kp b fi li lf l lg lh">df2.plot(figsize=(10,4))</span><span id="50b9" class="jr js hi kp b fi li lf l lg lh">plt.axhline(0, color=’black’, lw=1)</span><span id="21a6" class="jr js hi kp b fi li lf l lg lh">plt.ylabel(‘Daily Percentage Return’)</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es op"><img src="../Images/ee3444c86c3fcb830de2bba83a2da571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*r04oBJxQrg3I2Bp0fHIwvA.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">每日百分比回报</figcaption></figure><p id="535a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我有5只股票相互重叠，所以在这里进行比较有点困难。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="5a0b" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">投资一支特定的股票会让我们冒多大的风险？</h1><p id="9a60" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">量化风险的一个基本方法是将预期回报(可以是股票每日回报的平均值)与每日回报的标准差进行比较。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="1801" class="jr js hi kp b fi le lf l lg lh">risk = corr_df.dropna()</span></pre><figure class="kw kx ky kz fd lk"><div class="bz dy l di"><div class="nx ny l"/></div></figure><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es oq"><img src="../Images/02487332c750522c15f2f1c657a7ef45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*W3AJnqkCmRRx281bvG3gHA.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">风险图</figcaption></figure><p id="4696" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">英特尔(INTC) : —高风险低回报</p><p id="f461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌(Google):低风险中等回报</p><p id="ee2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">微软(MSFT): —中等风险，中等回报</p><p id="4687" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">亚马逊(Amazon):—低风险高回报</p><p id="87e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">苹果(AAPL): —高风险高回报</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="0b67" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">风险价值法</h1><p id="56e4" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们可以将<em class="od">风险价值</em>视为在给定的置信区间内我们可能会损失的金额。我们将使用“Bootstrap”方法和“Monte Carlo”方法来提取该值。</p><p id="1bab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">自举方法</strong></p><p id="4fcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用这种方法，我们从日收益率直方图中计算经验分位数。分位数帮助我们定义我们的置信区间。</p><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="b526" class="jr js hi kp b fi le lf l lg lh">sns.distplot(AAPL.truncate(before='2020-01-01', after='2021-01-01')['Daily Return'].dropna(),bins=100,color='purple')</span></pre><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es or"><img src="../Images/2d152469ac2835119d065bc489e9435a.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*PoqRYf2e3nPvTcdN8S6daw.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">AAPL的每日回报直方图</figcaption></figure><p id="5c6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">概括地说，我们的苹果股票柱状图看起来如上。我们的数据框架是这样的。</p><figure class="kw kx ky kz fd lk er es paragraph-image"><div class="er es os"><img src="../Images/7b5ee5b8dc95b6314b4e238444dcf664.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*EG2vHFIyaSeqMApw9D4d_w.png"/></div></figure><pre class="kw kx ky kz fd la kp lb lc aw ld bi"><span id="f174" class="jr js hi kp b fi le lf l lg lh"># Using Pandas built in qualtile method</span><span id="a8e7" class="jr js hi kp b fi li lf l lg lh">risk['AAPL'].quantile(0.05)</span><span id="ab9a" class="jr js hi kp b fi li lf l lg lh">&gt;&gt; -0.04486874869710267</span></pre><p id="aa2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日收益的0.05经验分位数在-0.004703。这意味着，在95%的信心下，最差的日损失不会超过(投资的)4.48%。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><h1 id="2613" class="me js hi bd jt mf mg mh jx mi mj mk kb ml mm mn ke mo mp mq kh mr ms mt kk mu bi translated">我们如何试图预测未来的股票行为？</h1><p id="6a76" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">在这里，我给你提供了一个可以用来预测股票价格的不同模型的列表。</p><h2 id="63ef" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><a class="ae kv" rel="noopener" href="/analytics-vidhya/predicting-stock-prices-using-facebooks-prophet-model-b1716c733ea6">使用脸书先知模型预测股票价格</a></h2><h2 id="0993" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><a class="ae kv" rel="noopener" href="/analytics-vidhya/time-series-forecasting-predicting-microsoft-msft-stock-prices-using-arima-model-be1c45961739">时间序列预测:用ARIMA模型预测微软(MSFT)的股票价格</a></h2><h2 id="9505" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><a class="ae kv" rel="noopener" href="/analytics-vidhya/time-series-forecasting-predicting-apple-stock-price-using-an-lstm-model-f1bb73bd8a80">时间序列预测:使用LSTM模型预测苹果股票价格</a></h2><p id="2e2d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我推荐你通读这些文章，所描述的模型能够非常精确地预测价格。</p><p id="43ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">免责声明</strong>已经有人尝试使用时间序列分析算法来预测股票价格，尽管它们仍然不能用于在真实市场中下注。这只是一篇教程文章，并不打算以任何方式“指导”人们购买股票。</p><p id="44aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">马拉松结束了，我必须说:我完成了我想做的事情。</p><p id="2ada" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在轮到你跟我来了。感谢您的阅读！</p><p id="0450" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给我一个<a class="ae kv" href="https://rohan09.medium.com/" rel="noopener">关注</a>如果你喜欢这个，更多的技术博客！</p><blockquote class="oa ob oc"><p id="5fcc" class="if ig od ih b ii ij ik il im in io ip oe ir is it of iv iw ix og iz ja jb jc hb bi translated">"如果一开始你不成功，那么跳伞不适合你."—梅尔·赫利策</p></blockquote><p id="4368" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下次见！</p></div></div>    
</body>
</html>