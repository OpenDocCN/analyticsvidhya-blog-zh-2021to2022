<html>
<head>
<title>Intelligent delivery assistant with MTZ formulation using real time traffic and weather data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用实时交通和天气数据的MTZ公式智能递送助手</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/intelligent-delivery-assistant-with-mtz-formulation-using-real-time-traffic-and-weather-data-10964ca7574a?source=collection_archive---------6-----------------------#2021-11-01">https://medium.com/analytics-vidhya/intelligent-delivery-assistant-with-mtz-formulation-using-real-time-traffic-and-weather-data-10964ca7574a?source=collection_archive---------6-----------------------#2021-11-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8b6e95b84a29535cb931a2a804acdc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0UpZeWvxLnCvJq7f"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">布雷特·乔丹在<a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c2ff" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在当前的十年中，产品的交付已经成为一种必须，而不是一种没有选择的设施。在疫情期间，这已经被证明了很多。在优化递送策略方面有很多研究，这些研究侧重于提高客户满意度，并鼓励递送合作伙伴递送更多包裹。在本文中，我们将看到一种以更简单的方式实现的优化方法，用于帮助交付合作伙伴嵌入实时交通和天气数据。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="41a5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们的原型就叫送快递的名字吧！！！！</p><p id="ea07" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Delivery express根据距离、交通和天气数据优化递送路径。</p><ul class=""><li id="bb47" class="jz ka hh iw b ix iy jb jc jf kb jj kc jn kd jr ke kf kg kh bi translated">【HERE.com】为我们提供实时交通数据，这些数据是基于2个lat: long对作为我们感兴趣区域的包围盒来采集的。更多信息请点击<a class="ae it" href="https://developer.here.com/documentation/traffic-data-service/dev_guide/topics/apply-bounding-box-filter.html" rel="noopener ugc nofollow" target="_blank">此处</a> …</li><li id="16ea" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated"><a class="ae it" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank"> Openweathermap </a>为我们提供特定位置的实时天气数据信息。</li><li id="8fa9" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated">我们使用一个由经度对组成的样本数据集，这些经度对是当天的交货地点。</li><li id="962c" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated">最后，我们将收集的所有信息嵌入MTZ公式，以实现更好的交付优化。<a class="ae it" href="https://pypi.org/project/PuLP/" rel="noopener ugc nofollow" target="_blank">纸浆</a> python包用于模型准备。</li></ul><p id="1d75" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://en.wikipedia.org/wiki/Travelling_salesman_problem" rel="noopener ugc nofollow" target="_blank"><strong class="iw hi">Miller-Tucker-zem Lin</strong></a>是一种传统的TSP算法，它基于作为权重参数的距离以及为避免任何子路线、重复路径创建而添加的约束来优化路径。在我们的实验中，我们将在算法中引入一些实时交通和天气情况。</p><p id="87ba" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">样本数据:</strong></p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="bbc7" class="kw kx hh ks b fi ky kz l la lb"> ------------Package data----------------    <br/>Package  lat      long     Traffic  Weather <br/>DC   13.00036  80.19466      NaN      NaN <br/>P9   13.00408  80.20105      NaN      NaN <br/>P10  13.00777  80.20728      NaN      NaN <br/>P11  13.00903  80.21206      NaN      NaN <br/>P12  13.01195  80.22173      NaN      NaN <br/>P13  12.99500  80.20373      NaN      NaN <br/>P14  12.99407  80.21776      NaN      NaN      <br/>P15  12.99945  80.21717      NaN      NaN     <br/>P16  13.01648  80.20514      NaN      NaN      <br/>P17  13.00863  80.20177      NaN      NaN     <br/>P18  13.02343  80.20660      NaN      NaN     <br/>P19  13.01353  80.21393      NaN      NaN  <br/>P20  13.00211  80.20595      NaN      NaN <br/>  --------------------------------------</span></pre><figure class="kn ko kp kq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lc"><img src="../Images/9fdfa962a89d9c793e2a2da2f4c56cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s7dMG9VUcBQSBlOw4mcFUA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图1:基于Lat long对绘制的样本数据</figcaption></figure><p id="900b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">抓取流量数据使用此处:</strong></p><p id="9594" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里提供了基于纬度和经度对的边界框的实时交通数据。有关数据收集的更多信息，请访问<a class="ae it" href="https://www.here.com/platform/traffic-solutions/real-time-traffic-information" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="3413" class="kw kx hh ks b fi ky kz l la lb">import requests</span><span id="c5ea" class="kw kx hh ks b fi ld kz l la lb">myreq=requests.get("https://traffic.ls.hereapi.com/traffic/6.2/flow.xml?apiKey=&lt;apikey&gt;&amp;bbox=12.968437582654817, 80.15070295546795;13.015591299483422, 80.22396372312538&amp;responseattributes=sh,fc")</span></pre><p id="1f46" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">使用打开的天气图抓取天气数据:</strong></p><p id="3595" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们已经使用了<a class="ae it" href="https://openweathermap.org/current" rel="noopener ugc nofollow" target="_blank"> OpenWeatherMap </a>，它提供了地球上任何地方的当前天气数据，包括200，000多个城市！基于地理坐标。</p><p id="4bf7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们根据代码和描述将天气状况分为非常糟糕、糟糕、正常和良好。这里可以找到详细设置<a class="ae it" href="https://openweathermap.org/weather-conditions" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="3f4f" class="kw kx hh ks b fi ky kz l la lb">VBad_WeatherCodes = [202,212,221,232,503,504,511,602,622,781,762]</span><span id="8937" class="kw kx hh ks b fi ld kz l la lb">Bad_WeatherCodes = [200,201,210,211,230,231,500,501,502,520,521,522,531,601,611,615,621,731,751,761,771]</span><span id="83d8" class="kw kx hh ks b fi ld kz l la lb">normal_WeatherCodes = [300,301,302,310,311,312,313,314,321,600,615,620,701,711,721,741]</span><span id="c22f" class="kw kx hh ks b fi ld kz l la lb">Good_WeatherCodes = [800,801,802,803,804]</span><span id="4763" class="kw kx hh ks b fi ld kz l la lb">req = requests.get("http://api.openweathermap.org/data/2.5/weather?lat=12.97612&amp;lon=80.15710&amp;appid=&lt;appID&gt;&amp;units=metric")</span><span id="e833" class="kw kx hh ks b fi ld kz l la lb">weather_data=req.json()</span></pre><p id="fc97" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最后，解析请求以获取基于纬度-经度对查询的位置的当前天气状态。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es le"><img src="../Images/488705dabb5229fea12fd089547cf393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCqb6xlg5Y15Ke5LAdGudw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图2:抓取实时交通和天气数据后的最终数据</figcaption></figure><p id="4e73" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们已经添加了值为[0，1]的TrafficWeatherCheck度量，用于根据编码列表指示该包是否可以交付。</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="f46d" class="kw kx hh ks b fi ky kz l la lb">trafficEncoding = ["Less","Normal"]</span><span id="ac33" class="kw kx hh ks b fi ld kz l la lb">weatherEncoding = ["good","partially bad"]</span><span id="fb65" class="kw kx hh ks b fi ld kz l la lb">for index,rows in data.iterrows():</span><span id="ab45" class="kw kx hh ks b fi ld kz l la lb">if rows[3] in trafficEncoding and rows[4] in weatherEncoding:</span><span id="b995" class="kw kx hh ks b fi ld kz l la lb">data.at[index,'TrafficWeatherCheck'] = 0</span><span id="266e" class="kw kx hh ks b fi ld kz l la lb">else:</span><span id="34d3" class="kw kx hh ks b fi ld kz l la lb">data.at[index,'TrafficWeatherCheck'] = 1</span></pre><p id="26bb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最后，我们在模型准备中使用它们来获取考虑距离、交通和天气条件的最佳可能路径。</p><p id="1953" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了代码清晰，我们使用了碳元素，</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lf"><img src="../Images/9939febf171eb1b8c86eea7eaf1c3f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gll5hZr2PlU0RFPbbRxkWA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图3:使用纸浆实现MTZ配方的模型代码</figcaption></figure><p id="0ad0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">输出:</strong></p><p id="36d5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们的模型显示了从起始位置向所有包裹建议的最佳路径，跳过P20和P16，即具有恶劣天气或恶劣交通条件，并最终返回到起始位置。考虑到交通和天气等环境因素，Delivery Express可以帮助配送合作伙伴挑选合适的包裹进行配送，同时他也有一个要在整个城市进行配送的包裹列表。它通过最大限度地减少交通和天气干扰所浪费的时间和精力，最大限度地提高了交付合作伙伴的生产力。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lc"><img src="../Images/bd0effd15f90bb752994bfce1cb56dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wuix3u0jN-KJ13HnkQR0yA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx translated">图4:显示预计交付路径的输出图</figcaption></figure><p id="2ef9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://colab.research.google.com/drive/1OxjHYhZD5TWjB5mbDADOd-VnE7bFfqWD?usp=sharing" rel="noopener ugc nofollow" target="_blank">完整代码</a> …！！！</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="a981" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">参考文献:</strong></p><div class="lg lh ez fb li lj"><a href="https://www.here.com/platform/traffic-solutions/real-time-traffic-information" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hi fi z dy lo ea eb lp ed ef hg bi translated">实时交通信息和数据|此处</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">交通拥堵和事故造成的延误成本高昂、耗时，而且直到现在都难以预测…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">www.here.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx in lj"/></div></div></a></div><div class="lg lh ez fb li lj"><a href="https://openweathermap.org/current" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hi fi z dy lo ea eb lp ed ef hg bi translated">当前天气数据</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">访问地球上任何地方的当前天气数据。我们收集和处理来自不同来源的天气数据，例如…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">openweathermap.org</p></div></div><div class="ls l"><div class="ly l lu lv lw ls lx in lj"/></div></div></a></div></div></div>    
</body>
</html>